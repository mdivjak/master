var uN=Object.create;var Lg=Object.defineProperty,cN=Object.defineProperties,lN=Object.getOwnPropertyDescriptor,dN=Object.getOwnPropertyDescriptors,hN=Object.getOwnPropertyNames,nb=Object.getOwnPropertySymbols,ib=Object.getPrototypeOf,ob=Object.prototype.hasOwnProperty,fN=Object.prototype.propertyIsEnumerable,pN=Reflect.get;var rb=(n,e,t)=>e in n?Lg(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Y=(n,e)=>{for(var t in e||={})ob.call(e,t)&&rb(n,t,e[t]);if(nb)for(var t of nb(e))fN.call(e,t)&&rb(n,t,e[t]);return n},Re=(n,e)=>cN(n,dN(e));var mN=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var gN=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of hN(e))!ob.call(n,i)&&i!==t&&Lg(n,i,{get:()=>e[i],enumerable:!(r=lN(e,i))||r.enumerable});return n};var _N=(n,e,t)=>(t=n!=null?uN(ib(n)):{},gN(e||!n||!n.__esModule?Lg(t,"default",{value:n,enumerable:!0}):t,n));var po=(n,e,t)=>pN(ib(n),t,e);var b=(n,e,t)=>new Promise((r,i)=>{var o=d=>{try{c(t.next(d))}catch(f){i(f)}},a=d=>{try{c(t.throw(d))}catch(f){i(f)}},c=d=>d.done?r(d.value):Promise.resolve(d.value).then(o,a);c((t=t.apply(n,e)).next())});var CR=mN((Cg,bR)=>{"use strict";(function(n,e){typeof Cg=="object"&&typeof bR<"u"?e(Cg):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.leaflet={}))})(Cg,function(n){"use strict";var e="1.9.4";function t(s){var u,h,p,_;for(h=1,p=arguments.length;h<p;h++){_=arguments[h];for(u in _)s[u]=_[u]}return s}var r=Object.create||function(){function s(){}return function(u){return s.prototype=u,new s}}();function i(s,u){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(u,p.length?p.concat(h.call(arguments)):arguments)}}var o=0;function a(s){return"_leaflet_id"in s||(s._leaflet_id=++o),s._leaflet_id}function c(s,u,h){var p,_,w,S;return S=function(){p=!1,_&&(w.apply(h,_),_=!1)},w=function(){p?_=arguments:(s.apply(h,arguments),setTimeout(S,u),p=!0)},w}function d(s,u,h){var p=u[1],_=u[0],w=p-_;return s===p&&h?s:((s-_)%w+w)%w+_}function f(){return!1}function g(s,u){if(u===!1)return s;var h=Math.pow(10,u===void 0?6:u);return Math.round(s*h)/h}function y(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function E(s){return y(s).split(/\s+/)}function C(s,u){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?r(s.options):{});for(var h in u)s.options[h]=u[h];return s.options}function F(s,u,h){var p=[];for(var _ in s)p.push(encodeURIComponent(h?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!u||u.indexOf("?")===-1?"?":"&")+p.join("&")}var z=/\{ *([\w_ -]+) *\}/g;function $(s,u){return s.replace(z,function(h,p){var _=u[p];if(_===void 0)throw new Error("No value provided for variable "+h);return typeof _=="function"&&(_=_(u)),_})}var Z=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function te(s,u){for(var h=0;h<s.length;h++)if(s[h]===u)return h;return-1}var oe="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ce(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var ot=0;function he(s){var u=+new Date,h=Math.max(0,16-(u-ot));return ot=u+h,window.setTimeout(s,h)}var M=window.requestAnimationFrame||ce("RequestAnimationFrame")||he,T=window.cancelAnimationFrame||ce("CancelAnimationFrame")||ce("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function D(s,u,h){if(h&&M===he)s.call(u);else return M.call(window,i(s,u))}function x(s){s&&T.call(window,s)}var R={__proto__:null,extend:t,create:r,bind:i,get lastId(){return o},stamp:a,throttle:c,wrapNum:d,falseFn:f,formatNum:g,trim:y,splitWords:E,setOptions:C,getParamString:F,template:$,isArray:Z,indexOf:te,emptyImageUrl:oe,requestFn:M,cancelFn:T,requestAnimFrame:D,cancelAnimFrame:x};function N(){}N.extend=function(s){var u=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=u.__super__=this.prototype,p=r(h);p.constructor=u,u.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(u[_]=this[_]);return s.statics&&t(u,s.statics),s.includes&&(A(s.includes),t.apply(null,[p].concat(s.includes))),t(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?r(h.options):{},t(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,S=p._initHooks.length;w<S;w++)p._initHooks[w].call(this)}},u},N.include=function(s){var u=this.prototype.options;return t(this.prototype,s),s.options&&(this.prototype.options=u,this.mergeOptions(s.options)),this},N.mergeOptions=function(s){return t(this.prototype.options,s),this},N.addInitHook=function(s){var u=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function A(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=Z(s)?s:[s];for(var u=0;u<s.length;u++)s[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Qe={on:function(s,u,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],u);else{s=E(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],u,h)}return this},off:function(s,u,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],u);else{s=E(s);for(var _=arguments.length===1,w=0,S=s.length;w<S;w++)_?this._off(s[w]):this._off(s[w],u,h)}return this},_on:function(s,u,h,p){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(s,u,h)===!1){h===this&&(h=void 0);var _={fn:u,ctx:h};p&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,u,h){var p,_,w;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,w=p.length;_<w;_++)p[_].fn=f;delete this._events[s];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var S=this._listens(s,u,h);if(S!==!1){var O=p[S];this._firingCount&&(O.fn=f,this._events[s]=p=p.slice()),p.splice(S,1)}}},fire:function(s,u,h){if(!this.listens(s,h))return this;var p=t({},u,{type:s,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var w=0,S=_.length;w<S;w++){var O=_[w],B=O.fn;O.once&&this.off(s,B,O.ctx),B.call(O.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,u,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var _=u;typeof u!="function"&&(p=!!u,_=void 0,h=void 0);var w=this._events&&this._events[s];if(w&&w.length&&this._listens(s,_,h)!==!1)return!0;if(p){for(var S in this._eventParents)if(this._eventParents[S].listens(s,u,h,p))return!0}return!1},_listens:function(s,u,h){if(!this._events)return!1;var p=this._events[s]||[];if(!u)return!!p.length;h===this&&(h=void 0);for(var _=0,w=p.length;_<w;_++)if(p[_].fn===u&&p[_].ctx===h)return _;return!1},once:function(s,u,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],u,!0);else{s=E(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],u,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[a(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[a(s)],this},_propagateEvent:function(s){for(var u in this._eventParents)this._eventParents[u].fire(s.type,t({layer:s.target,propagatedFrom:s.target},s),!0)}};Qe.addEventListener=Qe.on,Qe.removeEventListener=Qe.clearAllEventListeners=Qe.off,Qe.addOneTimeEventListener=Qe.once,Qe.fireEvent=Qe.fire,Qe.hasEventListeners=Qe.listens;var In=N.extend(Qe);function Ee(s,u,h){this.x=h?Math.round(s):s,this.y=h?Math.round(u):u}var Xi=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Ee.prototype={clone:function(){return new Ee(this.x,this.y)},add:function(s){return this.clone()._add(de(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(de(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Ee(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Ee(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Xi(this.x),this.y=Xi(this.y),this},distanceTo:function(s){s=de(s);var u=s.x-this.x,h=s.y-this.y;return Math.sqrt(u*u+h*h)},equals:function(s){return s=de(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=de(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function de(s,u,h){return s instanceof Ee?s:Z(s)?new Ee(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Ee(s.x,s.y):new Ee(s,u,h)}function st(s,u){if(s)for(var h=u?[s,u]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}st.prototype={extend:function(s){var u,h;if(!s)return this;if(s instanceof Ee||typeof s[0]=="number"||"x"in s)u=h=de(s);else if(s=on(s),u=s.min,h=s.max,!u||!h)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=h.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return de((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return de(this.min.x,this.max.y)},getTopRight:function(){return de(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var u,h;return typeof s[0]=="number"||s instanceof Ee?s=de(s):s=on(s),s instanceof st?(u=s.min,h=s.max):u=h=s,u.x>=this.min.x&&h.x<=this.max.x&&u.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=on(s);var u=this.min,h=this.max,p=s.min,_=s.max,w=_.x>=u.x&&p.x<=h.x,S=_.y>=u.y&&p.y<=h.y;return w&&S},overlaps:function(s){s=on(s);var u=this.min,h=this.max,p=s.min,_=s.max,w=_.x>u.x&&p.x<h.x,S=_.y>u.y&&p.y<h.y;return w&&S},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var u=this.min,h=this.max,p=Math.abs(u.x-h.x)*s,_=Math.abs(u.y-h.y)*s;return on(de(u.x-p,u.y-_),de(h.x+p,h.y+_))},equals:function(s){return s?(s=on(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function on(s,u){return!s||s instanceof st?s:new st(s,u)}function ln(s,u){if(s)for(var h=u?[s,u]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}ln.prototype={extend:function(s){var u=this._southWest,h=this._northEast,p,_;if(s instanceof ye)p=s,_=s;else if(s instanceof ln){if(p=s._southWest,_=s._northEast,!p||!_)return this}else return s?this.extend(Ve(s)||nt(s)):this;return!u&&!h?(this._southWest=new ye(p.lat,p.lng),this._northEast=new ye(_.lat,_.lng)):(u.lat=Math.min(p.lat,u.lat),u.lng=Math.min(p.lng,u.lng),h.lat=Math.max(_.lat,h.lat),h.lng=Math.max(_.lng,h.lng)),this},pad:function(s){var u=this._southWest,h=this._northEast,p=Math.abs(u.lat-h.lat)*s,_=Math.abs(u.lng-h.lng)*s;return new ln(new ye(u.lat-p,u.lng-_),new ye(h.lat+p,h.lng+_))},getCenter:function(){return new ye((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ye(this.getNorth(),this.getWest())},getSouthEast:function(){return new ye(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ye||"lat"in s?s=Ve(s):s=nt(s);var u=this._southWest,h=this._northEast,p,_;return s instanceof ln?(p=s.getSouthWest(),_=s.getNorthEast()):p=_=s,p.lat>=u.lat&&_.lat<=h.lat&&p.lng>=u.lng&&_.lng<=h.lng},intersects:function(s){s=nt(s);var u=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>=u.lat&&p.lat<=h.lat,S=_.lng>=u.lng&&p.lng<=h.lng;return w&&S},overlaps:function(s){s=nt(s);var u=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>u.lat&&p.lat<h.lat,S=_.lng>u.lng&&p.lng<h.lng;return w&&S},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,u){return s?(s=nt(s),this._southWest.equals(s.getSouthWest(),u)&&this._northEast.equals(s.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function nt(s,u){return s instanceof ln?s:new ln(s,u)}function ye(s,u,h){if(isNaN(s)||isNaN(u))throw new Error("Invalid LatLng object: ("+s+", "+u+")");this.lat=+s,this.lng=+u,h!==void 0&&(this.alt=+h)}ye.prototype={equals:function(s,u){if(!s)return!1;s=Ve(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(u===void 0?1e-9:u)},toString:function(s){return"LatLng("+g(this.lat,s)+", "+g(this.lng,s)+")"},distanceTo:function(s){return Nr.distance(this,Ve(s))},wrap:function(){return Nr.wrapLatLng(this)},toBounds:function(s){var u=180*s/40075017,h=u/Math.cos(Math.PI/180*this.lat);return nt([this.lat-u,this.lng-h],[this.lat+u,this.lng+h])},clone:function(){return new ye(this.lat,this.lng,this.alt)}};function Ve(s,u,h){return s instanceof ye?s:Z(s)&&typeof s[0]!="object"?s.length===3?new ye(s[0],s[1],s[2]):s.length===2?new ye(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ye(s.lat,"lng"in s?s.lng:s.lon,s.alt):u===void 0?null:new ye(s,u,h)}var En={latLngToPoint:function(s,u){var h=this.projection.project(s),p=this.scale(u);return this.transformation._transform(h,p)},pointToLatLng:function(s,u){var h=this.scale(u),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var u=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(u.min,h),_=this.transformation.transform(u.max,h);return new st(p,_)},infinite:!1,wrapLatLng:function(s){var u=this.wrapLng?d(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?d(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new ye(h,u,p)},wrapLatLngBounds:function(s){var u=s.getCenter(),h=this.wrapLatLng(u),p=u.lat-h.lat,_=u.lng-h.lng;if(p===0&&_===0)return s;var w=s.getSouthWest(),S=s.getNorthEast(),O=new ye(w.lat-p,w.lng-_),B=new ye(S.lat-p,S.lng-_);return new ln(O,B)}},Nr=t({},En,{wrapLng:[-180,180],R:6371e3,distance:function(s,u){var h=Math.PI/180,p=s.lat*h,_=u.lat*h,w=Math.sin((u.lat-s.lat)*h/2),S=Math.sin((u.lng-s.lng)*h/2),O=w*w+Math.cos(p)*Math.cos(_)*S*S,B=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O));return this.R*B}}),eo=6378137,Ec={R:eo,MAX_LATITUDE:85.0511287798,project:function(s){var u=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),_=Math.sin(p*u);return new Ee(this.R*s.lng*u,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var u=180/Math.PI;return new ye((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*u,s.x*u/this.R)},bounds:function(){var s=eo*Math.PI;return new st([-s,-s],[s,s])}()};function bc(s,u,h,p){if(Z(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=u,this._c=h,this._d=p}bc.prototype={transform:function(s,u){return this._transform(s.clone(),u)},_transform:function(s,u){return u=u||1,s.x=u*(this._a*s.x+this._b),s.y=u*(this._c*s.y+this._d),s},untransform:function(s,u){return u=u||1,new Ee((s.x/u-this._b)/this._a,(s.y/u-this._d)/this._c)}};function kr(s,u,h,p){return new bc(s,u,h,p)}var to=t({},Nr,{code:"EPSG:3857",projection:Ec,transformation:function(){var s=.5/(Math.PI*Ec.R);return kr(s,.5,-s,.5)}()}),Cc=t({},to,{code:"EPSG:900913"});function da(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function ha(s,u){var h="",p,_,w,S,O,B;for(p=0,w=s.length;p<w;p++){for(O=s[p],_=0,S=O.length;_<S;_++)B=O[_],h+=(_?"L":"M")+B.x+" "+B.y;h+=u?ne.svg?"z":"x":""}return h||"M0 0"}var ns=document.documentElement.style,rs="ActiveXObject"in window,qd=rs&&!document.addEventListener,Gd="msLaunchUri"in navigator&&!("documentMode"in document),fa=Fn("webkit"),Tc=Fn("android"),pa=Fn("android 2")||Fn("android 3"),Wd=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Sg=Tc&&Fn("Google")&&Wd<537&&!("AudioNode"in window),is=!!window.opera,ma=!Gd&&Fn("chrome"),ga=Fn("gecko")&&!fa&&!is&&!rs,Zt=!ma&&Fn("safari"),Kt=Fn("phantom"),os="OTransition"in ns,Zd=navigator.platform.indexOf("Win")===0,Dc=rs&&"transition"in ns,Sc="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!pa,no="MozPerspective"in ns,Kd=!window.L_DISABLE_3D&&(Dc||Sc||no)&&!os&&!Kt,ro=typeof orientation<"u"||Fn("mobile"),Ac=ro&&fa,Ag=ro&&Sc,Qd=!window.PointerEvent&&window.MSPointerEvent,_a=!!(window.PointerEvent||Qd),xc="ontouchstart"in window||!!window.TouchEvent,Yd=!window.L_NO_TOUCH&&(xc||_a),ss=ro&&is,Mc=ro&&ga,Pc=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,vi=function(){var s=!1;try{var u=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",f,u),window.removeEventListener("testPassiveEventSupport",f,u)}catch{}return s}(),Jd=function(){return!!document.createElement("canvas").getContext}(),io=!!(document.createElementNS&&da("svg").createSVGRect),Xd=!!io&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),as=!io&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var u=s.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),eh=navigator.platform.indexOf("Mac")===0,sn=navigator.platform.indexOf("Linux")===0;function Fn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ne={ie:rs,ielt9:qd,edge:Gd,webkit:fa,android:Tc,android23:pa,androidStock:Sg,opera:is,chrome:ma,gecko:ga,safari:Zt,phantom:Kt,opera12:os,win:Zd,ie3d:Dc,webkit3d:Sc,gecko3d:no,any3d:Kd,mobile:ro,mobileWebkit:Ac,mobileWebkit3d:Ag,msPointer:Qd,pointer:_a,touch:Yd,touchNative:xc,mobileOpera:ss,mobileGecko:Mc,retina:Pc,passiveEvents:vi,canvas:Jd,svg:io,vml:as,inlineSvg:Xd,mac:eh,linux:sn},oo=ne.msPointer?"MSPointerDown":"pointerdown",th=ne.msPointer?"MSPointerMove":"pointermove",nh=ne.msPointer?"MSPointerUp":"pointerup",yi=ne.msPointer?"MSPointerCancel":"pointercancel",Rc={touchstart:oo,touchmove:th,touchend:nh,touchcancel:yi},rh={touchstart:oh,touchmove:so,touchend:so,touchcancel:so},pr={},Nc=!1;function kc(s,u,h){return u==="touchstart"&&Lc(),rh[u]?(h=rh[u].bind(this,h),s.addEventListener(Rc[u],h,!1),h):(console.warn("wrong event specified:",u),f)}function va(s,u,h){if(!Rc[u]){console.warn("wrong event specified:",u);return}s.removeEventListener(Rc[u],h,!1)}function Or(s){pr[s.pointerId]=s}function ih(s){pr[s.pointerId]&&(pr[s.pointerId]=s)}function Oc(s){delete pr[s.pointerId]}function Lc(){Nc||(document.addEventListener(oo,Or,!0),document.addEventListener(th,ih,!0),document.addEventListener(nh,Oc,!0),document.addEventListener(yi,Oc,!0),Nc=!0)}function so(s,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var h in pr)u.touches.push(pr[h]);u.changedTouches=[u],s(u)}}function oh(s,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&It(u),so(s,u)}function sh(s){var u={},h,p;for(p in s)h=s[p],u[p]=h&&h.bind?h.bind(s):h;return s=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var xg=200;function ya(s,u){s.addEventListener("dblclick",u);var h=0,p;function _(w){if(w.detail!==1){p=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var S=qc(w);if(!(S.some(function(B){return B instanceof HTMLLabelElement&&B.attributes.for})&&!S.some(function(B){return B instanceof HTMLInputElement||B instanceof HTMLSelectElement}))){var O=Date.now();O-h<=xg?(p++,p===2&&u(sh(w))):p=1,h=O}}}return s.addEventListener("click",_),{dblclick:u,simDblclick:_}}function ah(s,u){s.removeEventListener("dblclick",u.dblclick),s.removeEventListener("click",u.simDblclick)}var us=Xn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),mr=Xn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Lr=mr==="webkitTransition"||mr==="OTransition"?mr+"End":"transitionend";function wa(s){return typeof s=="string"?document.getElementById(s):s}function cs(s,u){var h=s.style[u]||s.currentStyle&&s.currentStyle[u];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[u]:null}return h==="auto"?null:h}function qe(s,u,h){var p=document.createElement(s);return p.className=u||"",h&&h.appendChild(p),p}function lt(s){var u=s.parentNode;u&&u.removeChild(s)}function ls(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Fr(s){var u=s.parentNode;u&&u.lastChild!==s&&u.appendChild(s)}function Vr(s){var u=s.parentNode;u&&u.firstChild!==s&&u.insertBefore(s,u.firstChild)}function Ia(s,u){if(s.classList!==void 0)return s.classList.contains(u);var h=ds(s);return h.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(h)}function De(s,u){if(s.classList!==void 0)for(var h=E(u),p=0,_=h.length;p<_;p++)s.classList.add(h[p]);else if(!Ia(s,u)){var w=ds(s);Fc(s,(w?w+" ":"")+u)}}function wt(s,u){s.classList!==void 0?s.classList.remove(u):Fc(s,y((" "+ds(s)+" ").replace(" "+u+" "," ")))}function Fc(s,u){s.className.baseVal===void 0?s.className=u:s.className.baseVal=u}function ds(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function bn(s,u){"opacity"in s.style?s.style.opacity=u:"filter"in s.style&&Mg(s,u)}function Mg(s,u){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(u===1)return}u=Math.round(u*100),h?(h.Enabled=u!==100,h.Opacity=u):s.style.filter+=" progid:"+p+"(opacity="+u+")"}function Xn(s){for(var u=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in u)return s[h];return!1}function an(s,u,h){var p=u||new Ee(0,0);s.style[us]=(ne.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function pt(s,u){s._leaflet_pos=u,ne.any3d?an(s,u):(s.style.left=u.x+"px",s.style.top=u.y+"px")}function er(s){return s._leaflet_pos||new Ee(0,0)}var ao,Je,uo;if("onselectstart"in document)ao=function(){we(window,"selectstart",It)},Je=function(){rt(window,"selectstart",It)};else{var gr=Xn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ao=function(){if(gr){var s=document.documentElement.style;uo=s[gr],s[gr]="none"}},Je=function(){gr&&(document.documentElement.style[gr]=uo,uo=void 0)}}function wi(){we(window,"dragstart",It)}function Vc(){rt(window,"dragstart",It)}var hs,Bc;function Uc(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Ea(),hs=s,Bc=s.style.outlineStyle,s.style.outlineStyle="none",we(window,"keydown",Ea))}function Ea(){hs&&(hs.style.outlineStyle=Bc,hs=void 0,Bc=void 0,rt(window,"keydown",Ea))}function uh(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Ii(s){var u=s.getBoundingClientRect();return{x:u.width/s.offsetWidth||1,y:u.height/s.offsetHeight||1,boundingClientRect:u}}var Br={__proto__:null,TRANSFORM:us,TRANSITION:mr,TRANSITION_END:Lr,get:wa,getStyle:cs,create:qe,remove:lt,empty:ls,toFront:Fr,toBack:Vr,hasClass:Ia,addClass:De,removeClass:wt,setClass:Fc,getClass:ds,setOpacity:bn,testProp:Xn,setTransform:an,setPosition:pt,getPosition:er,get disableTextSelection(){return ao},get enableTextSelection(){return Je},disableImageDrag:wi,enableImageDrag:Vc,preventOutline:Uc,restoreOutline:Ea,getSizedParentNode:uh,getScale:Ii};function we(s,u,h,p){if(u&&typeof u=="object")for(var _ in u)$c(s,_,u[_],h);else{u=E(u);for(var w=0,S=u.length;w<S;w++)$c(s,u[w],h,p)}return this}var Vn="_leaflet_events";function rt(s,u,h,p){if(arguments.length===1)Ei(s),delete s[Vn];else if(u&&typeof u=="object")for(var _ in u)zc(s,_,u[_],h);else if(u=E(u),arguments.length===2)Ei(s,function(O){return te(u,O)!==-1});else for(var w=0,S=u.length;w<S;w++)zc(s,u[w],h,p);return this}function Ei(s,u){for(var h in s[Vn]){var p=h.split(/\d/)[0];(!u||u(p))&&zc(s,p,null,null,h)}}var jc={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function $c(s,u,h,p){var _=u+a(h)+(p?"_"+a(p):"");if(s[Vn]&&s[Vn][_])return this;var w=function(O){return h.call(p||s,O||window.event)},S=w;!ne.touchNative&&ne.pointer&&u.indexOf("touch")===0?w=kc(s,u,w):ne.touch&&u==="dblclick"?w=ya(s,w):"addEventListener"in s?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?s.addEventListener(jc[u]||u,w,ne.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(w=function(O){O=O||window.event,ms(s,O)&&S(O)},s.addEventListener(jc[u],w,!1)):s.addEventListener(u,S,!1):s.attachEvent("on"+u,w),s[Vn]=s[Vn]||{},s[Vn][_]=w}function zc(s,u,h,p,_){_=_||u+a(h)+(p?"_"+a(p):"");var w=s[Vn]&&s[Vn][_];if(!w)return this;!ne.touchNative&&ne.pointer&&u.indexOf("touch")===0?va(s,u,w):ne.touch&&u==="dblclick"?ah(s,w):"removeEventListener"in s?s.removeEventListener(jc[u]||u,w,!1):s.detachEvent("on"+u,w),s[Vn][_]=null}function dn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Hc(s){return $c(s,"wheel",dn),this}function fs(s){return we(s,"mousedown touchstart dblclick contextmenu",dn),s._leaflet_disable_click=!0,this}function It(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function tr(s){return It(s),dn(s),this}function qc(s){if(s.composedPath)return s.composedPath();for(var u=[],h=s.target;h;)u.push(h),h=h.parentNode;return u}function co(s,u){if(!u)return new Ee(s.clientX,s.clientY);var h=Ii(u),p=h.boundingClientRect;return new Ee((s.clientX-p.left)/h.x-u.clientLeft,(s.clientY-p.top)/h.y-u.clientTop)}var ps=ne.linux&&ne.chrome?window.devicePixelRatio:ne.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Gc(s){return ne.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/ps:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function ms(s,u){var h=u.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var gt={__proto__:null,on:we,off:rt,stopPropagation:dn,disableScrollPropagation:Hc,disableClickPropagation:fs,preventDefault:It,stop:tr,getPropagationPath:qc,getMousePosition:co,getWheelDelta:Gc,isExternalTarget:ms,addListener:we,removeListener:rt},ch=In.extend({run:function(s,u,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=er(s),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(s){var u=+new Date-this._startTime,h=this._duration*1e3;u<h?this._runFrame(this._easeOut(u/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,u){var h=this._startPos.add(this._offset.multiplyBy(s));u&&h._round(),pt(this._el,h),this.fire("step")},_complete:function(){x(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Be=In.extend({options:{crs:to,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,u){u=C(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(Ve(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=mr&&ne.any3d&&!ne.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),we(this._proxy,Lr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,u,h){if(u=u===void 0?this._zoom:this._limitZoom(u),s=this._limitCenter(Ve(s),u,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=t({animate:h.animate},h.zoom),h.pan=t({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,u,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,u,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,u){return this._loaded?this.setView(this.getCenter(),s,{zoom:u}):(this._zoom=s,this)},zoomIn:function(s,u){return s=s||(ne.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,u)},zoomOut:function(s,u){return s=s||(ne.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,u)},setZoomAround:function(s,u,h){var p=this.getZoomScale(u),_=this.getSize().divideBy(2),w=s instanceof Ee?s:this.latLngToContainerPoint(s),S=w.subtract(_).multiplyBy(1-1/p),O=this.containerPointToLatLng(_.add(S));return this.setView(O,u,{zoom:h})},_getBoundsCenterZoom:function(s,u){u=u||{},s=s.getBounds?s.getBounds():nt(s);var h=de(u.paddingTopLeft||u.padding||[0,0]),p=de(u.paddingBottomRight||u.padding||[0,0]),_=this.getBoundsZoom(s,!1,h.add(p));if(_=typeof u.maxZoom=="number"?Math.min(u.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var w=p.subtract(h).divideBy(2),S=this.project(s.getSouthWest(),_),O=this.project(s.getNorthEast(),_),B=this.unproject(S.add(O).divideBy(2).add(w),_);return{center:B,zoom:_}},fitBounds:function(s,u){if(s=nt(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,u);return this.setView(h.center,h.zoom,u)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,u){return this.setView(s,this._zoom,{pan:u})},panBy:function(s,u){if(s=de(s).round(),u=u||{},!s.x&&!s.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ch,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){De(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,u.duration||.25,u.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,u,h){if(h=h||{},h.animate===!1||!ne.any3d)return this.setView(s,u,h);this._stop();var p=this.project(this.getCenter()),_=this.project(s),w=this.getSize(),S=this._zoom;s=Ve(s),u=u===void 0?S:u;var O=Math.max(w.x,w.y),B=O*this.getZoomScale(S,u),q=_.distanceTo(p)||1,X=1.42,fe=X*X;function Oe(Lt){var Sh=Lt?-1:1,iN=Lt?B:O,oN=B*B-O*O+Sh*fe*fe*q*q,sN=2*iN*fe*q,Og=oN/sN,tb=Math.sqrt(Og*Og+1)-Og,aN=tb<1e-9?-18:Math.log(tb);return aN}function Tn(Lt){return(Math.exp(Lt)-Math.exp(-Lt))/2}function Yt(Lt){return(Math.exp(Lt)+Math.exp(-Lt))/2}function nr(Lt){return Tn(Lt)/Yt(Lt)}var Nn=Oe(0);function ka(Lt){return O*(Yt(Nn)/Yt(Nn+X*Lt))}function eN(Lt){return O*(Yt(Nn)*nr(Nn+X*Lt)-Tn(Nn))/fe}function tN(Lt){return 1-Math.pow(1-Lt,1.5)}var nN=Date.now(),XE=(Oe(1)-Nn)/X,rN=h.duration?1e3*h.duration:1e3*XE*.8;function eb(){var Lt=(Date.now()-nN)/rN,Sh=tN(Lt)*XE;Lt<=1?(this._flyToFrame=D(eb,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(eN(Sh)/q)),S),this.getScaleZoom(O/ka(Sh),S),{flyTo:!0})):this._move(s,u)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),eb.call(this),this},flyToBounds:function(s,u){var h=this._getBoundsCenterZoom(s,u);return this.flyTo(h.center,h.zoom,u)},setMaxBounds:function(s){return s=nt(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var u=this.options.minZoom;return this.options.minZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var u=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,u){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,nt(s));return h.equals(p)||this.panTo(p,u),this._enforcingBounds=!1,this},panInside:function(s,u){u=u||{};var h=de(u.paddingTopLeft||u.padding||[0,0]),p=de(u.paddingBottomRight||u.padding||[0,0]),_=this.project(this.getCenter()),w=this.project(s),S=this.getPixelBounds(),O=on([S.min.add(h),S.max.subtract(p)]),B=O.getSize();if(!O.contains(w)){this._enforcingBounds=!0;var q=w.subtract(O.getCenter()),X=O.extend(w).getSize().subtract(B);_.x+=q.x<0?-X.x:X.x,_.y+=q.y<0?-X.y:X.y,this.panTo(this.unproject(_),u),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=t({animate:!1,pan:!0},s===!0?{animate:!0}:s);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=u.divideBy(2).round(),_=h.divideBy(2).round(),w=p.subtract(_);return!w.x&&!w.y?this:(s.animate&&s.pan?this.panBy(w):(s.pan&&this._rawPanBy(w),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=t({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=i(this._handleGeolocationResponse,this),h=i(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,h,s):navigator.geolocation.getCurrentPosition(u,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var u=s.code,h=s.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var u=s.coords.latitude,h=s.coords.longitude,p=new ye(u,h),_=p.toBounds(s.coords.accuracy*2),w=this._locateOptions;if(w.setView){var S=this.getBoundsZoom(_);this.setView(p,w.maxZoom?Math.min(S,w.maxZoom):S)}var O={latlng:p,bounds:_,timestamp:s.timestamp};for(var B in s.coords)typeof s.coords[B]=="number"&&(O[B]=s.coords[B]);this.fire("locationfound",O)}},addHandler:function(s,u){if(!u)return this;var h=this[s]=new u(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),lt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(x(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)lt(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,u){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=qe("div",h,u||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),u=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new ln(u,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,u,h){s=nt(s),h=de(h||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),w=this.getMaxZoom(),S=s.getNorthWest(),O=s.getSouthEast(),B=this.getSize().subtract(h),q=on(this.project(O,p),this.project(S,p)).getSize(),X=ne.any3d?this.options.zoomSnap:1,fe=B.x/q.x,Oe=B.y/q.y,Tn=u?Math.max(fe,Oe):Math.min(fe,Oe);return p=this.getScaleZoom(Tn,p),X&&(p=Math.round(p/(X/100))*(X/100),p=u?Math.ceil(p/X)*X:Math.floor(p/X)*X),Math.max(_,Math.min(w,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Ee(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,u){var h=this._getTopLeftPoint(s,u);return new st(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,u){var h=this.options.crs;return u=u===void 0?this._zoom:u,h.scale(s)/h.scale(u)},getScaleZoom:function(s,u){var h=this.options.crs;u=u===void 0?this._zoom:u;var p=h.zoom(s*h.scale(u));return isNaN(p)?1/0:p},project:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(Ve(s),u)},unproject:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(de(s),u)},layerPointToLatLng:function(s){var u=de(s).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(s){var u=this.project(Ve(s))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(Ve(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(nt(s))},distance:function(s,u){return this.options.crs.distance(Ve(s),Ve(u))},containerPointToLayerPoint:function(s){return de(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return de(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var u=this.containerPointToLayerPoint(de(s));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ve(s)))},mouseEventToContainerPoint:function(s){return co(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var u=this._container=wa(s);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");we(u,"scroll",this._onScroll,this),this._containerId=a(u)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ne.any3d,De(s,"leaflet-container"+(ne.touch?" leaflet-touch":"")+(ne.retina?" leaflet-retina":"")+(ne.ielt9?" leaflet-oldie":"")+(ne.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=cs(s,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),pt(this._mapPane,new Ee(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(De(s.markerPane,"leaflet-zoom-hide"),De(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,u,h){pt(this._mapPane,new Ee(0,0));var p=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var _=this._zoom!==u;this._moveStart(_,h)._move(s,u)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,u){return s&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(s,u,h,p){u===void 0&&(u=this._zoom);var _=this._zoom!==u;return this._zoom=u,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((_||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return x(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){pt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[a(this._container)]=this;var u=s?rt:we;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),ne.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){x(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,u){for(var h=[],p,_=u==="mouseout"||u==="mouseover",w=s.target||s.srcElement,S=!1;w;){if(p=this._targets[a(w)],p&&(u==="click"||u==="preclick")&&this._draggableMoved(p)){S=!0;break}if(p&&p.listens(u,!0)&&(_&&!ms(w,s)||(h.push(p),_))||w===this._container)break;w=w.parentNode}return!h.length&&!S&&!_&&this.listens(u,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var u=s.target||s.srcElement;if(!(!this._loaded||u._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(u))){var h=s.type;h==="mousedown"&&Uc(u),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,u,h){if(s.type==="click"){var p=t({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var _=this._findEventTargets(s,u);if(h){for(var w=[],S=0;S<h.length;S++)h[S].listens(u,!0)&&w.push(h[S]);_=w.concat(_)}if(_.length){u==="contextmenu"&&It(s);var O=_[0],B={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var q=O.getLatLng&&(!O._radius||O._radius<=10);B.containerPoint=q?this.latLngToContainerPoint(O.getLatLng()):this.mouseEventToContainerPoint(s),B.layerPoint=this.containerPointToLayerPoint(B.containerPoint),B.latlng=q?O.getLatLng():this.layerPointToLatLng(B.layerPoint)}for(S=0;S<_.length;S++)if(_[S].fire(u,B,!0),B.originalEvent._stopped||_[S].options.bubblingMouseEvents===!1&&te(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,u=this._handlers.length;s<u;s++)this._handlers[s].disable()},whenReady:function(s,u){return this._loaded?s.call(u||this,{target:this}):this.on("load",s,u),this},_getMapPanePos:function(){return er(this._mapPane)||new Ee(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,u){var h=s&&u!==void 0?this._getNewPixelOrigin(s,u):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,u){var h=this.getSize()._divideBy(2);return this.project(s,u)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,u,h){var p=this._getNewPixelOrigin(h,u);return this.project(s,u)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,u,h){var p=this._getNewPixelOrigin(h,u);return on([this.project(s.getSouthWest(),u)._subtract(p),this.project(s.getNorthWest(),u)._subtract(p),this.project(s.getSouthEast(),u)._subtract(p),this.project(s.getNorthEast(),u)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,u,h){if(!h)return s;var p=this.project(s,u),_=this.getSize().divideBy(2),w=new st(p.subtract(_),p.add(_)),S=this._getBoundsOffset(w,h,u);return Math.abs(S.x)<=1&&Math.abs(S.y)<=1?s:this.unproject(p.add(S),u)},_limitOffset:function(s,u){if(!u)return s;var h=this.getPixelBounds(),p=new st(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,u))},_getBoundsOffset:function(s,u,h){var p=on(this.project(u.getNorthEast(),h),this.project(u.getSouthWest(),h)),_=p.min.subtract(s.min),w=p.max.subtract(s.max),S=this._rebound(_.x,-w.x),O=this._rebound(_.y,-w.y);return new Ee(S,O)},_rebound:function(s,u){return s+u>0?Math.round(s-u)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(u))},_limitZoom:function(s){var u=this.getMinZoom(),h=this.getMaxZoom(),p=ne.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(u,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){wt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,u){var h=this._getCenterOffset(s)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,u),!0)},_createAnimProxy:function(){var s=this._proxy=qe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(u){var h=us,p=this._proxy.style[h];an(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){lt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),u=this.getZoom();an(this._proxy,this.project(s,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,u,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(u),_=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(_)?!1:(D(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,u,!0)},this),!0)},_animateZoom:function(s,u,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=u,De(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:u,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&wt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function lh(s,u){return new Be(s,u)}var Rn=N.extend({options:{position:"topright"},initialize:function(s){C(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var u=this._map;return u&&u.removeControl(this),this.options.position=s,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var u=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return De(u,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(lt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),lo=function(s){return new Rn(s)};Be.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},u="leaflet-",h=this._controlContainer=qe("div",u+"control-container",this._container);function p(_,w){var S=u+_+" "+u+w;s[_+w]=qe("div",S,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)lt(this._controlCorners[s]);lt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var gs=Rn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,u,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,u,h){C(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in u)this._addLayer(u[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Rn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,u){return this._addLayer(s,u),this._map?this._update():this},addOverlay:function(s,u){return this._addLayer(s,u,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var u=this._getLayer(a(s));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){De(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(De(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):wt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return wt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",u=this._container=qe("div",s),h=this.options.collapsed;u.setAttribute("aria-haspopup",!0),fs(u),Hc(u);var p=this._section=qe("section",s+"-list");h&&(this._map.on("click",this.collapse,this),we(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=qe("a",s+"-toggle",u);_.href="#",_.title="Layers",_.setAttribute("role","button"),we(_,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){It(w),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=qe("div",s+"-base",p),this._separator=qe("div",s+"-separator",p),this._overlaysList=qe("div",s+"-overlays",p),u.appendChild(p)},_getLayer:function(s){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&a(this._layers[u].layer)===s)return this._layers[u]},_addLayer:function(s,u,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:u,overlay:h}),this.options.sortLayers&&this._layers.sort(i(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ls(this._baseLayersList),ls(this._overlaysList),this._layerControlInputs=[];var s,u,h,p,_=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),u=u||p.overlay,s=s||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=u&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var u=this._getLayer(a(s.target)),h=u.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,u)},_createRadioElement:function(s,u){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(u?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var u=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+a(this),h),this._layerControlInputs.push(p),p.layerId=a(s.layer),we(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var w=document.createElement("span");u.appendChild(w),w.appendChild(p),w.appendChild(_);var S=s.overlay?this._overlaysList:this._baseLayersList;return S.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,u,h,p=[],_=[];this._handlingClick=!0;for(var w=s.length-1;w>=0;w--)u=s[w],h=this._getLayer(u.layerId).layer,u.checked?p.push(h):u.checked||_.push(h);for(w=0;w<_.length;w++)this._map.hasLayer(_[w])&&this._map.removeLayer(_[w]);for(w=0;w<p.length;w++)this._map.hasLayer(p[w])||this._map.addLayer(p[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,u,h,p=this._map.getZoom(),_=s.length-1;_>=0;_--)u=s[_],h=this._getLayer(u.layerId).layer,u.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,we(s,"click",It),this.expand();var u=this;setTimeout(function(){rt(s,"click",It),u._preventClick=!1})}}),dh=function(s,u,h){return new gs(s,u,h)},Bn=Rn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var u="leaflet-control-zoom",h=qe("div",u+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,u+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,u+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,u,h,p,_){var w=qe("a",h,p);return w.innerHTML=s,w.href="#",w.title=u,w.setAttribute("role","button"),w.setAttribute("aria-label",u),fs(w),we(w,"click",tr),we(w,"click",_,this),we(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var s=this._map,u="leaflet-disabled";wt(this._zoomInButton,u),wt(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(De(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(De(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});Be.mergeOptions({zoomControl:!0}),Be.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Bn,this.addControl(this.zoomControl))});var hh=function(s){return new Bn(s)},fh=Rn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var u="leaflet-control-scale",h=qe("div",u),p=this.options;return this._addScales(p,u+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,u,h){s.metric&&(this._mScale=qe("div",u,h)),s.imperial&&(this._iScale=qe("div",u,h))},_update:function(){var s=this._map,u=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,u]),s.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var u=this._getRoundNum(s),h=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,h,u/s)},_updateImperial:function(s){var u=s*3.2808399,h,p,_;u>5280?(h=u/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(_=this._getRoundNum(u),this._updateScale(this._iScale,_+" ft",_/u))},_updateScale:function(s,u,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=u},_getRoundNum:function(s){var u=Math.pow(10,(Math.floor(s)+"").length-1),h=s/u;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,u*h}}),_s=function(s){return new fh(s)},ph='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',vs=Rn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ne.inlineSvg?ph+" ":"")+"Leaflet</a>"},initialize:function(s){C(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=qe("div","leaflet-control-attribution"),fs(this._container);for(var u in s._layers)s._layers[u].getAttribution&&this.addAttribution(s._layers[u].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var u in this._attributions)this._attributions[u]&&s.push(u);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Be.mergeOptions({attributionControl:!0}),Be.addInitHook(function(){this.options.attributionControl&&new vs().addTo(this)});var ba=function(s){return new vs(s)};Rn.Layers=gs,Rn.Zoom=Bn,Rn.Scale=fh,Rn.Attribution=vs,lo.layers=dh,lo.zoom=hh,lo.scale=_s,lo.attribution=ba;var Un=N.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Un.addTo=function(s,u){return s.addHandler(u,this),this};var Ca={Events:Qe},mh=ne.touch?"touchstart mousedown":"mousedown",_r=In.extend({options:{clickTolerance:3},initialize:function(s,u,h,p){C(this,p),this._element=s,this._dragStartTarget=u||s,this._preventOutline=h},enable:function(){this._enabled||(we(this._dragStartTarget,mh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_r._dragging===this&&this.finishDrag(!0),rt(this._dragStartTarget,mh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Ia(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){_r._dragging===this&&this.finishDrag();return}if(!(_r._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(_r._dragging=this,this._preventOutline&&Uc(this._element),wi(),ao(),!this._moving)){this.fire("down");var u=s.touches?s.touches[0]:s,h=uh(this._element);this._startPoint=new Ee(u.clientX,u.clientY),this._startPos=er(this._element),this._parentScale=Ii(h);var p=s.type==="mousedown";we(document,p?"mousemove":"touchmove",this._onMove,this),we(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var u=s.touches&&s.touches.length===1?s.touches[0]:s,h=new Ee(u.clientX,u.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,It(s),this._moved||(this.fire("dragstart"),this._moved=!0,De(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),De(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),pt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){wt(document.body,"leaflet-dragging"),this._lastTarget&&(wt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),rt(document,"mousemove touchmove",this._onMove,this),rt(document,"mouseup touchend touchcancel",this._onUp,this),Vc(),Je();var u=this._moved&&this._moving;this._moving=!1,_r._dragging=!1,u&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function ho(s,u,h){var p,_=[1,4,2,8],w,S,O,B,q,X,fe,Oe;for(w=0,X=s.length;w<X;w++)s[w]._code=Ur(s[w],u);for(O=0;O<4;O++){for(fe=_[O],p=[],w=0,X=s.length,S=X-1;w<X;S=w++)B=s[w],q=s[S],B._code&fe?q._code&fe||(Oe=ys(q,B,fe,u,h),Oe._code=Ur(Oe,u),p.push(Oe)):(q._code&fe&&(Oe=ys(q,B,fe,u,h),Oe._code=Ur(Oe,u),p.push(Oe)),p.push(B));s=p}return s}function Wc(s,u){var h,p,_,w,S,O,B,q,X;if(!s||s.length===0)throw new Error("latlngs not passed");Cn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var fe=Ve([0,0]),Oe=nt(s),Tn=Oe.getNorthWest().distanceTo(Oe.getSouthWest())*Oe.getNorthEast().distanceTo(Oe.getNorthWest());Tn<1700&&(fe=Ta(s));var Yt=s.length,nr=[];for(h=0;h<Yt;h++){var Nn=Ve(s[h]);nr.push(u.project(Ve([Nn.lat-fe.lat,Nn.lng-fe.lng])))}for(O=B=q=0,h=0,p=Yt-1;h<Yt;p=h++)_=nr[h],w=nr[p],S=_.y*w.x-w.y*_.x,B+=(_.x+w.x)*S,q+=(_.y+w.y)*S,O+=S*3;O===0?X=nr[0]:X=[B/O,q/O];var ka=u.unproject(de(X));return Ve([ka.lat+fe.lat,ka.lng+fe.lng])}function Ta(s){for(var u=0,h=0,p=0,_=0;_<s.length;_++){var w=Ve(s[_]);u+=w.lat,h+=w.lng,p++}return Ve([u/p,h/p])}var Zc={__proto__:null,clipPolygon:ho,polygonCenter:Wc,centroid:Ta};function Da(s,u){if(!u||!s.length)return s.slice();var h=u*u;return s=bi(s,h),s=gh(s,h),s}function Kc(s,u,h){return Math.sqrt(Ht(s,u,h,!0))}function Sa(s,u,h){return Ht(s,u,h)}function gh(s,u){var h=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(h);_[0]=_[h-1]=1,Aa(s,_,u,0,h-1);var w,S=[];for(w=0;w<h;w++)_[w]&&S.push(s[w]);return S}function Aa(s,u,h,p,_){var w=0,S,O,B;for(O=p+1;O<=_-1;O++)B=Ht(s[O],s[p],s[_],!0),B>w&&(S=O,w=B);w>h&&(u[S]=1,Aa(s,u,h,p,S),Aa(s,u,h,S,_))}function bi(s,u){for(var h=[s[0]],p=1,_=0,w=s.length;p<w;p++)xa(s[p],s[_])>u&&(h.push(s[p]),_=p);return _<w-1&&h.push(s[w-1]),h}var Qc;function Yc(s,u,h,p,_){var w=p?Qc:Ur(s,h),S=Ur(u,h),O,B,q;for(Qc=S;;){if(!(w|S))return[s,u];if(w&S)return!1;O=w||S,B=ys(s,u,O,h,_),q=Ur(B,h),O===w?(s=B,w=q):(u=B,S=q)}}function ys(s,u,h,p,_){var w=u.x-s.x,S=u.y-s.y,O=p.min,B=p.max,q,X;return h&8?(q=s.x+w*(B.y-s.y)/S,X=B.y):h&4?(q=s.x+w*(O.y-s.y)/S,X=O.y):h&2?(q=B.x,X=s.y+S*(B.x-s.x)/w):h&1&&(q=O.x,X=s.y+S*(O.x-s.x)/w),new Ee(q,X,_)}function Ur(s,u){var h=0;return s.x<u.min.x?h|=1:s.x>u.max.x&&(h|=2),s.y<u.min.y?h|=4:s.y>u.max.y&&(h|=8),h}function xa(s,u){var h=u.x-s.x,p=u.y-s.y;return h*h+p*p}function Ht(s,u,h,p){var _=u.x,w=u.y,S=h.x-_,O=h.y-w,B=S*S+O*O,q;return B>0&&(q=((s.x-_)*S+(s.y-w)*O)/B,q>1?(_=h.x,w=h.y):q>0&&(_+=S*q,w+=O*q)),S=s.x-_,O=s.y-w,p?S*S+O*O:new Ee(_,w)}function Cn(s){return!Z(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Jc(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Cn(s)}function Ci(s,u){var h,p,_,w,S,O,B,q;if(!s||s.length===0)throw new Error("latlngs not passed");Cn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var X=Ve([0,0]),fe=nt(s),Oe=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());Oe<1700&&(X=Ta(s));var Tn=s.length,Yt=[];for(h=0;h<Tn;h++){var nr=Ve(s[h]);Yt.push(u.project(Ve([nr.lat-X.lat,nr.lng-X.lng])))}for(h=0,p=0;h<Tn-1;h++)p+=Yt[h].distanceTo(Yt[h+1])/2;if(p===0)q=Yt[0];else for(h=0,w=0;h<Tn-1;h++)if(S=Yt[h],O=Yt[h+1],_=S.distanceTo(O),w+=_,w>p){B=(w-p)/_,q=[O.x-B*(O.x-S.x),O.y-B*(O.y-S.y)];break}var Nn=u.unproject(de(q));return Ve([Nn.lat+X.lat,Nn.lng+X.lng])}var l={__proto__:null,simplify:Da,pointToSegmentDistance:Kc,closestPointOnSegment:Sa,clipSegment:Yc,_getEdgeIntersection:ys,_getBitCode:Ur,_sqClosestPointOnSegment:Ht,isFlat:Cn,_flat:Jc,polylineCenter:Ci},m={project:function(s){return new Ee(s.lng,s.lat)},unproject:function(s){return new ye(s.y,s.x)},bounds:new st([-180,-90],[180,90])},v={R:6378137,R_MINOR:6356752314245179e-9,bounds:new st([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var u=Math.PI/180,h=this.R,p=s.lat*u,_=this.R_MINOR/h,w=Math.sqrt(1-_*_),S=w*Math.sin(p),O=Math.tan(Math.PI/4-p/2)/Math.pow((1-S)/(1+S),w/2);return p=-h*Math.log(Math.max(O,1e-10)),new Ee(s.lng*u*h,p)},unproject:function(s){for(var u=180/Math.PI,h=this.R,p=this.R_MINOR/h,_=Math.sqrt(1-p*p),w=Math.exp(-s.y/h),S=Math.PI/2-2*Math.atan(w),O=0,B=.1,q;O<15&&Math.abs(B)>1e-7;O++)q=_*Math.sin(S),q=Math.pow((1-q)/(1+q),_/2),B=Math.PI/2-2*Math.atan(w*q)-S,S+=B;return new ye(S*u,s.x*u/h)}},I={__proto__:null,LonLat:m,Mercator:v,SphericalMercator:Ec},k=t({},Nr,{code:"EPSG:3395",projection:v,transformation:function(){var s=.5/(Math.PI*v.R);return kr(s,.5,-s,.5)}()}),U=t({},Nr,{code:"EPSG:4326",projection:m,transformation:kr(1/180,1,-1/180,.5)}),Q=t({},En,{projection:m,transformation:kr(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,u){var h=u.lng-s.lng,p=u.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});En.Earth=Nr,En.EPSG3395=k,En.EPSG3857=to,En.EPSG900913=Cc,En.EPSG4326=U,En.Simple=Q;var Ne=In.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[a(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[a(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var u=s.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var h=this.getEvents();u.on(h,this),this.once("remove",function(){u.off(h,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});Be.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var u=a(s);return this._layers[u]?this:(this._layers[u]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var u=a(s);return this._layers[u]?(this._loaded&&s.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return a(s)in this._layers},eachLayer:function(s,u){for(var h in this._layers)s.call(u,this._layers[h]);return this},_addLayers:function(s){s=s?Z(s)?s:[s]:[];for(var u=0,h=s.length;u<h;u++)this.addLayer(s[u])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[a(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var u=a(s);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,u=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),u=_.maxZoom===void 0?u:Math.max(u,_.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var _t=Ne.extend({initialize:function(s,u){C(this,u),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var u=this.getLayerId(s);return this._layers[u]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var u=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(s){var u=typeof s=="number"?s:this.getLayerId(s);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var u=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,u);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,u){for(var h in this._layers)s.call(u,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return a(s)}}),Ge=function(s,u){return new _t(s,u)},dt=_t.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),_t.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),_t.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new ln;for(var u in this._layers){var h=this._layers[u];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),Qt=function(s,u){return new dt(s,u)},jn=N.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){C(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,u){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,u){var h=this.options,p=h[u+"Size"];typeof p=="number"&&(p=[p,p]);var _=de(p),w=de(u==="shadow"&&h.shadowAnchor||h.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+u+" "+(h.className||""),w&&(s.style.marginLeft=-w.x+"px",s.style.marginTop=-w.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,u){return u=u||document.createElement("img"),u.src=s,u},_getIconUrl:function(s){return ne.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function $n(s){return new jn(s)}var jr=jn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof jr.imagePath!="string"&&(jr.imagePath=this._detectIconPath()),(this.options.imagePath||jr.imagePath)+jn.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var u=function(h,p,_){var w=p.exec(h);return w&&w[_]};return s=u(s,/^url\((['"])?(.+)\1\)$/,2),s&&u(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=qe("div","leaflet-default-icon-path",document.body),u=cs(s,"background-image")||cs(s,"backgroundImage");if(document.body.removeChild(s),u=this._stripUrl(u),u)return u;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),Ma=Un.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new _r(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),De(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&wt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var u=this._marker,h=u._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,w=er(u._icon),S=h.getPixelBounds(),O=h.getPixelOrigin(),B=on(S.min._subtract(O).add(_),S.max._subtract(O).subtract(_));if(!B.contains(w)){var q=de((Math.max(B.max.x,w.x)-B.max.x)/(S.max.x-B.max.x)-(Math.min(B.min.x,w.x)-B.min.x)/(S.min.x-B.min.x),(Math.max(B.max.y,w.y)-B.max.y)/(S.max.y-B.max.y)-(Math.min(B.min.y,w.y)-B.min.y)/(S.min.y-B.min.y)).multiplyBy(p);h.panBy(q,{animate:!1}),this._draggable._newPos._add(q),this._draggable._startPos._add(q),pt(u._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=D(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(x(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,s)))},_onDrag:function(s){var u=this._marker,h=u._shadow,p=er(u._icon),_=u._map.layerPointToLatLng(p);h&&pt(h,p),u._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,u.fire("move",s).fire("drag",s)},_onDragEnd:function(s){x(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),_h=Ne.extend({options:{icon:new jr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,u){C(this,u),this._latlng=Ve(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var u=this._latlng;return this._latlng=Ve(s),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),De(h,u),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&we(h,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),w=!1;_!==this._shadow&&(this._removeShadow(),w=!0),_&&(De(_,u),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&w&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&rt(this._icon,"focus",this._panOnFocus,this),lt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&lt(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&pt(this._icon,s),this._shadow&&pt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(De(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ma)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ma(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&bn(this._icon,s),this._shadow&&bn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var u=this.options.icon.options,h=u.iconSize?de(u.iconSize):de(0,0),p=u.iconAnchor?de(u.iconAnchor):de(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function LR(s,u){return new _h(s,u)}var fo=Ne.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return C(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),vh=fo.extend({options:{fill:!0,radius:10},initialize:function(s,u){C(this,u),this._latlng=Ve(s),this._radius=this.options.radius},setLatLng:function(s){var u=this._latlng;return this._latlng=Ve(s),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var u=s&&s.radius||this._radius;return fo.prototype.setStyle.call(this,s),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,u=this._radiusY||s,h=this._clickTolerance(),p=[s+h,u+h];this._pxBounds=new st(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function FR(s,u){return new vh(s,u)}var Pg=vh.extend({initialize:function(s,u,h){if(typeof u=="number"&&(u=t({},h,{radius:u})),C(this,u),this._latlng=Ve(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new ln(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:fo.prototype.setStyle,_project:function(){var s=this._latlng.lng,u=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===Nr.distance){var _=Math.PI/180,w=this._mRadius/Nr.R/_,S=h.project([u+w,s]),O=h.project([u-w,s]),B=S.add(O).divideBy(2),q=h.unproject(B).lat,X=Math.acos((Math.cos(w*_)-Math.sin(u*_)*Math.sin(q*_))/(Math.cos(u*_)*Math.cos(q*_)))/_;(isNaN(X)||X===0)&&(X=w/Math.cos(Math.PI/180*u)),this._point=B.subtract(h.getPixelOrigin()),this._radius=isNaN(X)?0:B.x-h.project([q,s-X]).x,this._radiusY=B.y-S.y}else{var fe=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(fe).x}this._updateBounds()}});function VR(s,u,h){return new Pg(s,u,h)}var Ti=fo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,u){C(this,u),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var u=1/0,h=null,p=Ht,_,w,S=0,O=this._parts.length;S<O;S++)for(var B=this._parts[S],q=1,X=B.length;q<X;q++){_=B[q-1],w=B[q];var fe=p(s,_,w,!0);fe<u&&(u=fe,h=p(s,_,w))}return h&&(h.distance=Math.sqrt(u)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ci(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,u){return u=u||this._defaultShape(),s=Ve(s),u.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new ln,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Cn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var u=[],h=Cn(s),p=0,_=s.length;p<_;p++)h?(u[p]=Ve(s[p]),this._bounds.extend(u[p])):u[p]=this._convertLatLngs(s[p]);return u},_project:function(){var s=new st;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),u=new Ee(s,s);this._rawPxBounds&&(this._pxBounds=new st([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(s,u,h){var p=s[0]instanceof ye,_=s.length,w,S;if(p){for(S=[],w=0;w<_;w++)S[w]=this._map.latLngToLayerPoint(s[w]),h.extend(S[w]);u.push(S)}else for(w=0;w<_;w++)this._projectLatlngs(s[w],u,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,h,p,_,w,S,O,B;for(h=0,_=0,w=this._rings.length;h<w;h++)for(B=this._rings[h],p=0,S=B.length;p<S-1;p++)O=Yc(B[p],B[p+1],s,p,!0),O&&(u[_]=u[_]||[],u[_].push(O[0]),(O[1]!==B[p+1]||p===S-2)&&(u[_].push(O[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,u=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=Da(s[h],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,u){var h,p,_,w,S,O,B=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,w=this._parts.length;h<w;h++)for(O=this._parts[h],p=0,S=O.length,_=S-1;p<S;_=p++)if(!(!u&&p===0)&&Kc(s,O[_],O[p])<=B)return!0;return!1}});function BR(s,u){return new Ti(s,u)}Ti._flat=Jc;var Pa=Ti.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Wc(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var u=Ti.prototype._convertLatLngs.call(this,s),h=u.length;return h>=2&&u[0]instanceof ye&&u[0].equals(u[h-1])&&u.pop(),u},_setLatLngs:function(s){Ti.prototype._setLatLngs.call(this,s),Cn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Cn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,u=this.options.weight,h=new Ee(u,u);if(s=new st(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,w;p<_;p++)w=ho(this._rings[p],s,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var u=!1,h,p,_,w,S,O,B,q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(w=0,B=this._parts.length;w<B;w++)for(h=this._parts[w],S=0,q=h.length,O=q-1;S<q;O=S++)p=h[S],_=h[O],p.y>s.y!=_.y>s.y&&s.x<(_.x-p.x)*(s.y-p.y)/(_.y-p.y)+p.x&&(u=!u);return u||Ti.prototype._containsPoint.call(this,s,!0)}});function UR(s,u){return new Pa(s,u)}var Di=dt.extend({initialize:function(s,u){C(this,u),this._layers={},s&&this.addData(s)},addData:function(s){var u=Z(s)?s:s.features,h,p,_;if(u){for(h=0,p=u.length;h<p;h++)_=u[h],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var w=this.options;if(w.filter&&!w.filter(s))return this;var S=yh(s,w);return S?(S.feature=Eh(s),S.defaultOptions=S.options,this.resetStyle(S),w.onEachFeature&&w.onEachFeature(s,S),this.addLayer(S)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=t({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(u){this._setLayerStyle(u,s)},this)},_setLayerStyle:function(s,u){s.setStyle&&(typeof u=="function"&&(u=u(s.feature)),s.setStyle(u))}});function yh(s,u){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,_=[],w=u&&u.pointToLayer,S=u&&u.coordsToLatLng||Rg,O,B,q,X;if(!p&&!h)return null;switch(h.type){case"Point":return O=S(p),OE(w,s,O,u);case"MultiPoint":for(q=0,X=p.length;q<X;q++)O=S(p[q]),_.push(OE(w,s,O,u));return new dt(_);case"LineString":case"MultiLineString":return B=wh(p,h.type==="LineString"?0:1,S),new Ti(B,u);case"Polygon":case"MultiPolygon":return B=wh(p,h.type==="Polygon"?1:2,S),new Pa(B,u);case"GeometryCollection":for(q=0,X=h.geometries.length;q<X;q++){var fe=yh({geometry:h.geometries[q],type:"Feature",properties:s.properties},u);fe&&_.push(fe)}return new dt(_);case"FeatureCollection":for(q=0,X=h.features.length;q<X;q++){var Oe=yh(h.features[q],u);Oe&&_.push(Oe)}return new dt(_);default:throw new Error("Invalid GeoJSON object.")}}function OE(s,u,h,p){return s?s(u,h):new _h(h,p&&p.markersInheritOptions&&p)}function Rg(s){return new ye(s[1],s[0],s[2])}function wh(s,u,h){for(var p=[],_=0,w=s.length,S;_<w;_++)S=u?wh(s[_],u-1,h):(h||Rg)(s[_]),p.push(S);return p}function Ng(s,u){return s=Ve(s),s.alt!==void 0?[g(s.lng,u),g(s.lat,u),g(s.alt,u)]:[g(s.lng,u),g(s.lat,u)]}function Ih(s,u,h,p){for(var _=[],w=0,S=s.length;w<S;w++)_.push(u?Ih(s[w],Cn(s[w])?0:u-1,h,p):Ng(s[w],p));return!u&&h&&_.length>0&&_.push(_[0].slice()),_}function Ra(s,u){return s.feature?t({},s.feature,{geometry:u}):Eh(u)}function Eh(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var kg={toGeoJSON:function(s){return Ra(this,{type:"Point",coordinates:Ng(this.getLatLng(),s)})}};_h.include(kg),Pg.include(kg),vh.include(kg),Ti.include({toGeoJSON:function(s){var u=!Cn(this._latlngs),h=Ih(this._latlngs,u?1:0,!1,s);return Ra(this,{type:(u?"Multi":"")+"LineString",coordinates:h})}}),Pa.include({toGeoJSON:function(s){var u=!Cn(this._latlngs),h=u&&!Cn(this._latlngs[0]),p=Ih(this._latlngs,h?2:u?1:0,!0,s);return u||(p=[p]),Ra(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),_t.include({toMultiPoint:function(s){var u=[];return this.eachLayer(function(h){u.push(h.toGeoJSON(s).geometry.coordinates)}),Ra(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(s){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(s);var h=u==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var w=_.toGeoJSON(s);if(h)p.push(w.geometry);else{var S=Eh(w);S.type==="FeatureCollection"?p.push.apply(p,S.features):p.push(S)}}}),h?Ra(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function LE(s,u){return new Di(s,u)}var jR=LE,bh=Ne.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,u,h){this._url=s,this._bounds=nt(u),C(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(De(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){lt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Fr(this._image),this},bringToBack:function(){return this._map&&Vr(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=nt(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",u=this._image=s?this._url:qe("img");if(De(u,"leaflet-image-layer"),this._zoomAnimated&&De(u,"leaflet-zoom-animated"),this.options.className&&De(u,this.options.className),u.onselectstart=f,u.onmousemove=f,u.onload=i(this.fire,this,"load"),u.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(s){var u=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;an(this._image,h,u)},_reset:function(){var s=this._image,u=new st(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=u.getSize();pt(s,u.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){bn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),$R=function(s,u,h){return new bh(s,u,h)},FE=bh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",u=this._image=s?this._url:qe("video");if(De(u,"leaflet-image-layer"),this._zoomAnimated&&De(u,"leaflet-zoom-animated"),this.options.className&&De(u,this.options.className),u.onselectstart=f,u.onmousemove=f,u.onloadeddata=i(this.fire,this,"load"),s){for(var h=u.getElementsByTagName("source"),p=[],_=0;_<h.length;_++)p.push(h[_].src);this._url=h.length>0?p:[u.src];return}Z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var S=qe("source");S.src=this._url[w],u.appendChild(S)}}});function zR(s,u,h){return new FE(s,u,h)}var VE=bh.extend({_initImage:function(){var s=this._image=this._url;De(s,"leaflet-image-layer"),this._zoomAnimated&&De(s,"leaflet-zoom-animated"),this.options.className&&De(s,this.options.className),s.onselectstart=f,s.onmousemove=f}});function HR(s,u,h){return new VE(s,u,h)}var $r=Ne.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,u){s&&(s instanceof ye||Z(s))?(this._latlng=Ve(s),C(this,u)):(C(this,s),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&bn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&bn(this._container,1),this.bringToFront(),this.options.interactive&&(De(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(bn(this._container,0),this._removeTimeout=setTimeout(i(lt,void 0,this._container),200)):lt(this._container),this.options.interactive&&(wt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=Ve(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Fr(this._container),this},bringToBack:function(){return this._map&&Vr(this._container),this},_prepareOpen:function(s){var u=this._source;if(!u._map)return!1;if(u instanceof dt){u=null;var h=this._source._layers;for(var p in h)if(h[p]._map){u=h[p];break}if(!u)return!1;this._source=u}if(!s)if(u.getCenter)s=u.getCenter();else if(u.getLatLng)s=u.getLatLng();else if(u.getBounds)s=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")s.innerHTML=u;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),u=de(this.options.offset),h=this._getAnchor();this._zoomAnimated?pt(this._container,s.add(h)):u=u.add(s).add(h);var p=this._containerBottom=-u.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});Be.include({_initOverlay:function(s,u,h,p){var _=u;return _ instanceof s||(_=new s(p).setContent(u)),h&&_.setLatLng(h),_}}),Ne.include({_initOverlay:function(s,u,h,p){var _=h;return _ instanceof s?(C(_,p),_._source=this):(_=u&&!p?u:new s(p,this),_.setContent(h)),_}});var Ch=$r.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,$r.prototype.openOn.call(this,s)},onAdd:function(s){$r.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof fo||this._source.on("preclick",dn))},onRemove:function(s){$r.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof fo||this._source.off("preclick",dn))},getEvents:function(){var s=$r.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",u=this._container=qe("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=qe("div",s+"-content-wrapper",u);if(this._contentNode=qe("div",s+"-content",h),fs(u),Hc(this._contentNode),we(u,"contextmenu",dn),this._tipContainer=qe("div",s+"-tip-container",u),this._tip=qe("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=qe("a",s+"-close-button",u);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',we(p,"click",function(_){It(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,u=s.style;u.width="",u.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),u.width=h+1+"px",u.whiteSpace="",u.height="";var p=s.offsetHeight,_=this.options.maxHeight,w="leaflet-popup-scrolled";_&&p>_?(u.height=_+"px",De(s,w)):wt(s,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();pt(this._container,u.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,u=parseInt(cs(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+u,p=this._containerWidth,_=new Ee(this._containerLeft,-h-this._containerBottom);_._add(er(this._container));var w=s.layerPointToContainerPoint(_),S=de(this.options.autoPanPadding),O=de(this.options.autoPanPaddingTopLeft||S),B=de(this.options.autoPanPaddingBottomRight||S),q=s.getSize(),X=0,fe=0;w.x+p+B.x>q.x&&(X=w.x+p-q.x+B.x),w.x-X-O.x<0&&(X=w.x-O.x),w.y+h+B.y>q.y&&(fe=w.y+h-q.y+B.y),w.y-fe-O.y<0&&(fe=w.y-O.y),(X||fe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([X,fe]))}},_getAnchor:function(){return de(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),qR=function(s,u){return new Ch(s,u)};Be.mergeOptions({closePopupOnClick:!0}),Be.include({openPopup:function(s,u,h){return this._initOverlay(Ch,s,u,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Ne.include({bindPopup:function(s,u){return this._popup=this._initOverlay(Ch,this._popup,s,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof dt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){tr(s);var u=s.layer||s.target;if(this._popup._source===u&&!(u instanceof fo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=u,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Th=$r.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){$r.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){$r.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=$r.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",u=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=qe("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var u,h,p=this._map,_=this._container,w=p.latLngToContainerPoint(p.getCenter()),S=p.layerPointToContainerPoint(s),O=this.options.direction,B=_.offsetWidth,q=_.offsetHeight,X=de(this.options.offset),fe=this._getAnchor();O==="top"?(u=B/2,h=q):O==="bottom"?(u=B/2,h=0):O==="center"?(u=B/2,h=q/2):O==="right"?(u=0,h=q/2):O==="left"?(u=B,h=q/2):S.x<w.x?(O="right",u=0,h=q/2):(O="left",u=B+(X.x+fe.x)*2,h=q/2),s=s.subtract(de(u,h,!0)).add(X).add(fe),wt(_,"leaflet-tooltip-right"),wt(_,"leaflet-tooltip-left"),wt(_,"leaflet-tooltip-top"),wt(_,"leaflet-tooltip-bottom"),De(_,"leaflet-tooltip-"+O),pt(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&bn(this._container,s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(u)},_getAnchor:function(){return de(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),GR=function(s,u){return new Th(s,u)};Be.include({openTooltip:function(s,u,h){return this._initOverlay(Th,s,u,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Ne.include({bindTooltip:function(s,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Th,this._tooltip,s,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var u=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[u](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof dt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&(we(u,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),we(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var u=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),u=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(u)}});var BE=jn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var u=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(ls(u),u.appendChild(h.html)):u.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=de(h.bgPos);u.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function WR(s){return new BE(s)}jn.Default=jr;var Xc=Ne.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ne.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){C(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),lt(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Fr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Vr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Ee?s:new Ee(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var u=this.getPane().children,h=-s(-1/0,1/0),p=0,_=u.length,w;p<_;p++)w=u[p].style.zIndex,u[p]!==this._container&&w&&(h=s(h,+w));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ne.ielt9){bn(this._container,this.options.opacity);var s=+new Date,u=!1,h=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var w=Math.min(1,(s-_.loaded)/200);bn(_.el,w),w<1?u=!0:(_.active?h=!0:this._onOpaqueTile(_),_.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),u&&(x(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=qe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,u=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=u-Math.abs(s-h),this._onUpdateLevel(h)):(lt(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],_=this._map;return p||(p=this._levels[s]={},p.el=qe("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=u,p.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,_.getCenter(),_.getZoom()),f(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var s,u,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)u=this._tiles[s],u.retain=u.current;for(s in this._tiles)if(u=this._tiles[s],u.current&&!u.active){var p=u.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var u in this._tiles)this._tiles[u].coords.z===s&&this._removeTile(u)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)lt(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,u,h,p){var _=Math.floor(s/2),w=Math.floor(u/2),S=h-1,O=new Ee(+_,+w);O.z=+S;var B=this._tileCoordsToKey(O),q=this._tiles[B];return q&&q.active?(q.retain=!0,!0):(q&&q.loaded&&(q.retain=!0),S>p?this._retainParent(_,w,S,p):!1)},_retainChildren:function(s,u,h,p){for(var _=2*s;_<2*s+2;_++)for(var w=2*u;w<2*u+2;w++){var S=new Ee(_,w);S.z=h+1;var O=this._tileCoordsToKey(S),B=this._tiles[O];if(B&&B.active){B.retain=!0;continue}else B&&B.loaded&&(B.retain=!0);h+1<p&&this._retainChildren(_,w,h+1,p)}},_resetView:function(s){var u=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var u=this.options;return u.minNativeZoom!==void 0&&s<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<s?u.maxNativeZoom:s},_setView:function(s,u,h,p){var _=Math.round(u);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var w=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||w)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,u)},_setZoomTransforms:function(s,u){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,u)},_setZoomTransform:function(s,u,h){var p=this._map.getZoomScale(h,s.zoom),_=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(u,h)).round();ne.any3d?an(s.el,_,p):pt(s.el,_)},_resetGrid:function(){var s=this._map,u=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,u.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,u.wrapLng[1]],p).x/h.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([u.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([u.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var u=this._map,h=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),p=u.getZoomScale(h,this._tileZoom),_=u.project(s,this._tileZoom).floor(),w=u.getSize().divideBy(p*2);return new st(_.subtract(w),_.add(w))},_update:function(s){var u=this._map;if(u){var h=this._clampZoom(u.getZoom());if(s===void 0&&(s=u.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(p),w=_.getCenter(),S=[],O=this.options.keepBuffer,B=new st(_.getBottomLeft().subtract([O,-O]),_.getTopRight().add([O,-O]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var q in this._tiles){var X=this._tiles[q].coords;(X.z!==this._tileZoom||!B.contains(new Ee(X.x,X.y)))&&(this._tiles[q].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var fe=_.min.y;fe<=_.max.y;fe++)for(var Oe=_.min.x;Oe<=_.max.x;Oe++){var Tn=new Ee(Oe,fe);if(Tn.z=this._tileZoom,!!this._isValidTile(Tn)){var Yt=this._tiles[this._tileCoordsToKey(Tn)];Yt?Yt.current=!0:S.push(Tn)}}if(S.sort(function(Nn,ka){return Nn.distanceTo(w)-ka.distanceTo(w)}),S.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var nr=document.createDocumentFragment();for(Oe=0;Oe<S.length;Oe++)this._addTile(S[Oe],nr);this._level.el.appendChild(nr)}}}},_isValidTile:function(s){var u=this._map.options.crs;if(!u.infinite){var h=this._globalTileRange;if(!u.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!u.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return nt(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var u=this._map,h=this.getTileSize(),p=s.scaleBy(h),_=p.add(h),w=u.unproject(p,s.z),S=u.unproject(_,s.z);return[w,S]},_tileCoordsToBounds:function(s){var u=this._tileCoordsToNwSe(s),h=new ln(u[0],u[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var u=s.split(":"),h=new Ee(+u[0],+u[1]);return h.z=+u[2],h},_removeTile:function(s){var u=this._tiles[s];u&&(lt(u.el),delete this._tiles[s],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){De(s,"leaflet-tile");var u=this.getTileSize();s.style.width=u.x+"px",s.style.height=u.y+"px",s.onselectstart=f,s.onmousemove=f,ne.ielt9&&this.options.opacity<1&&bn(s,this.options.opacity)},_addTile:function(s,u){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),i(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&D(i(this._tileReady,this,s,null,_)),pt(_,h),this._tiles[p]={el:_,coords:s,current:!0},u.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,u,h){u&&this.fire("tileerror",{error:u,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(bn(h.el,0),x(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),u||(De(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ne.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var u=new Ee(this._wrapX?d(s.x,this._wrapX):s.x,this._wrapY?d(s.y,this._wrapY):s.y);return u.z=s.z,u},_pxBoundsToTileRange:function(s){var u=this.getTileSize();return new st(s.min.unscaleBy(u).floor(),s.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function ZR(s){return new Xc(s)}var Na=Xc.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,u){this._url=s,u=C(this,u),u.detectRetina&&ne.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,u){return this._url===s&&u===void 0&&(u=!0),this._url=s,u||this.redraw(),this},createTile:function(s,u){var h=document.createElement("img");return we(h,"load",i(this._tileOnLoad,this,u,h)),we(h,"error",i(this._tileOnError,this,u,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var u={r:ne.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(u.y=h),u["-y"]=h}return $(this._url,t(u,this.options))},_tileOnLoad:function(s,u){ne.ielt9?setTimeout(i(s,this,null,u),0):s(null,u)},_tileOnError:function(s,u,h){var p=this.options.errorTileUrl;p&&u.getAttribute("src")!==p&&(u.src=p),s(h,u)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,u=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=u-s),s+p},_getSubdomain:function(s){var u=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var s,u;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(u=this._tiles[s].el,u.onload=f,u.onerror=f,!u.complete)){u.src=oe;var h=this._tiles[s].coords;lt(u),delete this._tiles[s],this.fire("tileabort",{tile:u,coords:h})}},_removeTile:function(s){var u=this._tiles[s];if(u)return u.el.setAttribute("src",oe),Xc.prototype._removeTile.call(this,s)},_tileReady:function(s,u,h){if(!(!this._map||h&&h.getAttribute("src")===oe))return Xc.prototype._tileReady.call(this,s,u,h)}});function UE(s,u){return new Na(s,u)}var jE=Na.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,u){this._url=s;var h=t({},this.defaultWmsParams);for(var p in u)p in this.options||(h[p]=u[p]);u=C(this,u);var _=u.detectRetina&&ne.retina?2:1,w=this.getTileSize();h.width=w.x*_,h.height=w.y*_,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Na.prototype.onAdd.call(this,s)},getTileUrl:function(s){var u=this._tileCoordsToNwSe(s),h=this._crs,p=on(h.project(u[0]),h.project(u[1])),_=p.min,w=p.max,S=(this._wmsVersion>=1.3&&this._crs===U?[_.y,_.x,w.y,w.x]:[_.x,_.y,w.x,w.y]).join(","),O=Na.prototype.getTileUrl.call(this,s);return O+F(this.wmsParams,O,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+S},setParams:function(s,u){return t(this.wmsParams,s),u||this.redraw(),this}});function KR(s,u){return new jE(s,u)}Na.WMS=jE,UE.wms=KR;var Si=Ne.extend({options:{padding:.1},initialize:function(s){C(this,s),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),De(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,u){var h=this._map.getZoomScale(u,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,u),w=p.multiplyBy(-h).add(_).subtract(this._map._getNewPixelOrigin(s,u));ne.any3d?an(this._container,w,h):pt(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,u=this._map.getSize(),h=this._map.containerPointToLayerPoint(u.multiplyBy(-s)).round();this._bounds=new st(h,h.add(u.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),$E=Si.extend({options:{tolerance:0},getEvents:function(){var s=Si.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Si.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");we(s,"mousemove",this._onMouseMove,this),we(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),we(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){x(this._redrawRequest),delete this._ctx,lt(this._container),rt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var u in this._layers)s=this._layers[u],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Si.prototype._update.call(this);var s=this._bounds,u=this._container,h=s.getSize(),p=ne.retina?2:1;pt(u,s.min),u.width=p*h.x,u.height=p*h.y,u.style.width=h.x+"px",u.style.height=h.y+"px",ne.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Si.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[a(s)]=s;var u=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var u=s._order,h=u.next,p=u.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[a(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var u=s.options.dashArray.split(/[, ]+/),h=[],p,_;for(_=0;_<u.length;_++){if(p=Number(u[_]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var u=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new st,this._redrawBounds.extend(s._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(s._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var u=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,u=this._redrawBounds;if(this._ctx.save(),u){var h=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!u||s._pxBounds&&s._pxBounds.intersects(u))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,u){if(this._drawing){var h,p,_,w,S=s._parts,O=S.length,B=this._ctx;if(O){for(B.beginPath(),h=0;h<O;h++){for(p=0,_=S[h].length;p<_;p++)w=S[h][p],B[p?"lineTo":"moveTo"](w.x,w.y);u&&B.closePath()}this._fillStroke(B,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var u=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||p)/p;_!==1&&(h.save(),h.scale(1,_)),h.beginPath(),h.arc(u.x,u.y/_,p,0,Math.PI*2,!1),_!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,u){var h=u.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(u.options&&u.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var u=this._map.mouseEventToLayerPoint(s),h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(u)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,u)}},_handleMouseOut:function(s){var u=this._hoveredLayer;u&&(wt(this._container,"leaflet-interactive"),this._fireEvent([u],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,u){if(!this._mouseHoverThrottled){for(var h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(u)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(De(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,u,h){this._map._fireDOMEvent(u,h||u.type,s)},_bringToFront:function(s){var u=s._order;if(u){var h=u.next,p=u.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(s)}},_bringToBack:function(s){var u=s._order;if(u){var h=u.next,p=u.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(s)}}});function zE(s){return ne.canvas?new $E(s):null}var el=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),QR={_initContainer:function(){this._container=qe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Si.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var u=s._container=el("shape");De(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",s._path=el("path"),u.appendChild(s._path),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){var u=s._container;this._container.appendChild(u),s.options.interactive&&s.addInteractiveTarget(u)},_removePath:function(s){var u=s._container;lt(u),s.removeInteractiveTarget(u),delete this._layers[a(s)]},_updateStyle:function(s){var u=s._stroke,h=s._fill,p=s.options,_=s._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(u||(u=s._stroke=el("stroke")),_.appendChild(u),u.weight=p.weight+"px",u.color=p.color,u.opacity=p.opacity,p.dashArray?u.dashStyle=Z(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=p.lineCap.replace("butt","flat"),u.joinstyle=p.lineJoin):u&&(_.removeChild(u),s._stroke=null),p.fill?(h||(h=s._fill=el("fill")),_.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(_.removeChild(h),s._fill=null)},_updateCircle:function(s){var u=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+u.x+","+u.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,u){s._path.v=u},_bringToFront:function(s){Fr(s._container)},_bringToBack:function(s){Vr(s._container)}},Dh=ne.vml?el:da,tl=Si.extend({_initContainer:function(){this._container=Dh("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Dh("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){lt(this._container),rt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Si.prototype._update.call(this);var s=this._bounds,u=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,h.setAttribute("width",u.x),h.setAttribute("height",u.y)),pt(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(s){var u=s._path=Dh("path");s.options.className&&De(u,s.options.className),s.options.interactive&&De(u,"leaflet-interactive"),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){lt(s._path),s.removeInteractiveTarget(s._path),delete this._layers[a(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var u=s._path,h=s.options;u&&(h.stroke?(u.setAttribute("stroke",h.color),u.setAttribute("stroke-opacity",h.opacity),u.setAttribute("stroke-width",h.weight),u.setAttribute("stroke-linecap",h.lineCap),u.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?u.setAttribute("stroke-dasharray",h.dashArray):u.removeAttribute("stroke-dasharray"),h.dashOffset?u.setAttribute("stroke-dashoffset",h.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),h.fill?(u.setAttribute("fill",h.fillColor||h.color),u.setAttribute("fill-opacity",h.fillOpacity),u.setAttribute("fill-rule",h.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(s,u){this._setPath(s,ha(s._parts,u))},_updateCircle:function(s){var u=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,_="a"+h+","+p+" 0 1,0 ",w=s._empty()?"M0 0":"M"+(u.x-h)+","+u.y+_+h*2+",0 "+_+-h*2+",0 ";this._setPath(s,w)},_setPath:function(s,u){s._path.setAttribute("d",u)},_bringToFront:function(s){Fr(s._path)},_bringToBack:function(s){Vr(s._path)}});ne.vml&&tl.include(QR);function HE(s){return ne.svg||ne.vml?new tl(s):null}Be.include({getRenderer:function(s){var u=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var u=this._paneRenderers[s];return u===void 0&&(u=this._createRenderer({pane:s}),this._paneRenderers[s]=u),u},_createRenderer:function(s){return this.options.preferCanvas&&zE(s)||HE(s)}});var qE=Pa.extend({initialize:function(s,u){Pa.prototype.initialize.call(this,this._boundsToLatLngs(s),u)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=nt(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function YR(s,u){return new qE(s,u)}tl.create=Dh,tl.pointsToPath=ha,Di.geometryToLayer=yh,Di.coordsToLatLng=Rg,Di.coordsToLatLngs=wh,Di.latLngToCoords=Ng,Di.latLngsToCoords=Ih,Di.getFeature=Ra,Di.asFeature=Eh,Be.mergeOptions({boxZoom:!0});var GE=Un.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){we(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){rt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){lt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ao(),wi(),this._startPoint=this._map.mouseEventToContainerPoint(s),we(document,{contextmenu:tr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=qe("div","leaflet-zoom-box",this._container),De(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var u=new st(this._point,this._startPoint),h=u.getSize();pt(this._box,u.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(lt(this._box),wt(this._container,"leaflet-crosshair")),Je(),Vc(),rt(document,{contextmenu:tr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var u=new ln(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Be.addInitHook("addHandler","boxZoom",GE),Be.mergeOptions({doubleClickZoom:!0});var WE=Un.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var u=this._map,h=u.getZoom(),p=u.options.zoomDelta,_=s.originalEvent.shiftKey?h-p:h+p;u.options.doubleClickZoom==="center"?u.setZoom(_):u.setZoomAround(s.containerPoint,_)}});Be.addInitHook("addHandler","doubleClickZoom",WE),Be.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ZE=Un.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new _r(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}De(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){wt(this._map._container,"leaflet-grab"),wt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=nt(this._map.options.maxBounds);this._offsetLimit=on(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var u=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(u),this._prunePositions(u)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,u){return s-(s-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;s.x<u.min.x&&(s.x=this._viscousLimit(s.x,u.min.x)),s.y<u.min.y&&(s.y=this._viscousLimit(s.y,u.min.y)),s.x>u.max.x&&(s.x=this._viscousLimit(s.x,u.max.x)),s.y>u.max.y&&(s.y=this._viscousLimit(s.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,u=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-u+h)%s+u-h,w=(p+u+h)%s-u-h,S=Math.abs(_+h)<Math.abs(w+h)?_:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=S},_onDragEnd:function(s){var u=this._map,h=u.options,p=!h.inertia||s.noInertia||this._times.length<2;if(u.fire("dragend",s),p)u.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,S=h.easeLinearity,O=_.multiplyBy(S/w),B=O.distanceTo([0,0]),q=Math.min(h.inertiaMaxSpeed,B),X=O.multiplyBy(q/B),fe=q/(h.inertiaDeceleration*S),Oe=X.multiplyBy(-fe/2).round();!Oe.x&&!Oe.y?u.fire("moveend"):(Oe=u._limitOffset(Oe,u.options.maxBounds),D(function(){u.panBy(Oe,{duration:fe,easeLinearity:S,noMoveStart:!0,animate:!0})}))}}});Be.addInitHook("addHandler","dragging",ZE),Be.mergeOptions({keyboard:!0,keyboardPanDelta:80});var KE=Un.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),we(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),rt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,u=document.documentElement,h=s.scrollTop||u.scrollTop,p=s.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var u=this._panKeys={},h=this.keyCodes,p,_;for(p=0,_=h.left.length;p<_;p++)u[h.left[p]]=[-1*s,0];for(p=0,_=h.right.length;p<_;p++)u[h.right[p]]=[s,0];for(p=0,_=h.down.length;p<_;p++)u[h.down[p]]=[0,s];for(p=0,_=h.up.length;p<_;p++)u[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var u=this._zoomKeys={},h=this.keyCodes,p,_;for(p=0,_=h.zoomIn.length;p<_;p++)u[h.zoomIn[p]]=s;for(p=0,_=h.zoomOut.length;p<_;p++)u[h.zoomOut[p]]=-s},_addHooks:function(){we(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){rt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var u=s.keyCode,h=this._map,p;if(u in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[u],s.shiftKey&&(p=de(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(de(p),h.options.maxBounds)),h.options.worldCopyJump){var _=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(_)}else h.panBy(p)}else if(u in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;tr(s)}}});Be.addInitHook("addHandler","keyboard",KE),Be.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var QE=Un.extend({addHooks:function(){we(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){rt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var u=Gc(s),h=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),p),tr(s)},_performZoom:function(){var s=this._map,u=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,w=h?Math.ceil(_/h)*h:_,S=s._limitZoom(u+(this._delta>0?w:-w))-u;this._delta=0,this._startTime=null,S&&(s.options.scrollWheelZoom==="center"?s.setZoom(u+S):s.setZoomAround(this._lastMousePos,u+S))}});Be.addInitHook("addHandler","scrollWheelZoom",QE);var JR=600;Be.mergeOptions({tapHold:ne.touchNative&&ne.safari&&ne.mobile,tapTolerance:15});var YE=Un.extend({addHooks:function(){we(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){rt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var u=s.touches[0];this._startPos=this._newPos=new Ee(u.clientX,u.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(we(document,"touchend",It),we(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),JR),we(document,"touchend touchcancel contextmenu",this._cancel,this),we(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){rt(document,"touchend",It),rt(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),rt(document,"touchend touchcancel contextmenu",this._cancel,this),rt(document,"touchmove",this._onMove,this)},_onMove:function(s){var u=s.touches[0];this._newPos=new Ee(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,u){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});h._simulated=!0,u.target.dispatchEvent(h)}});Be.addInitHook("addHandler","tapHold",YE),Be.mergeOptions({touchZoom:ne.touch,bounceAtZoomLimits:!0});var JE=Un.extend({addHooks:function(){De(this._map._container,"leaflet-touch-zoom"),we(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){wt(this._map._container,"leaflet-touch-zoom"),rt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var u=this._map;if(!(!s.touches||s.touches.length!==2||u._animatingZoom||this._zooming)){var h=u.mouseEventToContainerPoint(s.touches[0]),p=u.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),we(document,"touchmove",this._onTouchMove,this),we(document,"touchend touchcancel",this._onTouchEnd,this),It(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var u=this._map,h=u.mouseEventToContainerPoint(s.touches[0]),p=u.mouseEventToContainerPoint(s.touches[1]),_=h.distanceTo(p)/this._startDist;if(this._zoom=u.getScaleZoom(_,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&_<1||this._zoom>u.getMaxZoom()&&_>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var w=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&w.x===0&&w.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),x(this._animRequest);var S=i(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(S,this,!0),It(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,x(this._animRequest),rt(document,"touchmove",this._onTouchMove,this),rt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Be.addInitHook("addHandler","touchZoom",JE),Be.BoxZoom=GE,Be.DoubleClickZoom=WE,Be.Drag=ZE,Be.Keyboard=KE,Be.ScrollWheelZoom=QE,Be.TapHold=YE,Be.TouchZoom=JE,n.Bounds=st,n.Browser=ne,n.CRS=En,n.Canvas=$E,n.Circle=Pg,n.CircleMarker=vh,n.Class=N,n.Control=Rn,n.DivIcon=BE,n.DivOverlay=$r,n.DomEvent=gt,n.DomUtil=Br,n.Draggable=_r,n.Evented=In,n.FeatureGroup=dt,n.GeoJSON=Di,n.GridLayer=Xc,n.Handler=Un,n.Icon=jn,n.ImageOverlay=bh,n.LatLng=ye,n.LatLngBounds=ln,n.Layer=Ne,n.LayerGroup=_t,n.LineUtil=l,n.Map=Be,n.Marker=_h,n.Mixin=Ca,n.Path=fo,n.Point=Ee,n.PolyUtil=Zc,n.Polygon=Pa,n.Polyline=Ti,n.Popup=Ch,n.PosAnimation=ch,n.Projection=I,n.Rectangle=qE,n.Renderer=Si,n.SVG=tl,n.SVGOverlay=VE,n.TileLayer=Na,n.Tooltip=Th,n.Transformation=bc,n.Util=R,n.VideoOverlay=FE,n.bind=i,n.bounds=on,n.canvas=zE,n.circle=VR,n.circleMarker=FR,n.control=lo,n.divIcon=WR,n.extend=t,n.featureGroup=Qt,n.geoJSON=LE,n.geoJson=jR,n.gridLayer=ZR,n.icon=$n,n.imageOverlay=$R,n.latLng=Ve,n.latLngBounds=nt,n.layerGroup=Ge,n.map=lh,n.marker=LR,n.point=de,n.polygon=UR,n.polyline=BR,n.popup=qR,n.rectangle=YR,n.setOptions=C,n.stamp=a,n.svg=HE,n.svgOverlay=HR,n.tileLayer=UE,n.tooltip=GR,n.transformation=kr,n.version=e,n.videoOverlay=zR;var XR=window.L;n.noConflict=function(){return window.L=XR,this},window.L=n})});function sb(n,e){return Object.is(n,e)}var qt=null,Ah=!1,xh=1,Ai=Symbol("SIGNAL");function Ke(n){let e=qt;return qt=n,e}function ab(){return qt}var rl={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Bg(n){if(Ah)throw new Error("");if(qt===null)return;qt.consumerOnSignalRead(n);let e=qt.nextProducerIndex++;if(Nh(qt),e<qt.producerNode.length&&qt.producerNode[e]!==n&&nl(qt)){let t=qt.producerNode[e];Rh(t,qt.producerIndexOfThis[e])}qt.producerNode[e]!==n&&(qt.producerNode[e]=n,qt.producerIndexOfThis[e]=nl(qt)?db(n,qt,e):0),qt.producerLastReadVersion[e]=n.version}function vN(){xh++}function ub(n){if(!(nl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===xh)){if(!n.producerMustRecompute(n)&&!jg(n)){n.dirty=!1,n.lastCleanEpoch=xh;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=xh}}function cb(n){if(n.liveConsumerNode===void 0)return;let e=Ah;Ah=!0;try{for(let t of n.liveConsumerNode)t.dirty||yN(t)}finally{Ah=e}}function lb(){return qt?.consumerAllowSignalWrites!==!1}function yN(n){n.dirty=!0,cb(n),n.consumerMarkedDirty?.(n)}function Ph(n){return n&&(n.nextProducerIndex=0),Ke(n)}function Ug(n,e){if(Ke(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(nl(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Rh(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function jg(n){Nh(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(ub(t),r!==t.version))return!0}return!1}function $g(n){if(Nh(n),nl(n))for(let e=0;e<n.producerNode.length;e++)Rh(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function db(n,e,t){if(hb(n),n.liveConsumerNode.length===0&&fb(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=db(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Rh(n,e){if(hb(n),n.liveConsumerNode.length===1&&fb(n))for(let r=0;r<n.producerNode.length;r++)Rh(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Nh(i),i.producerIndexOfThis[r]=e}}function nl(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Nh(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function hb(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function fb(n){return n.producerNode!==void 0}function pb(n){let e=Object.create(wN);e.computation=n;let t=()=>{if(ub(e),Bg(e),e.value===Mh)throw e.error;return e.value};return t[Ai]=e,t}var Fg=Symbol("UNSET"),Vg=Symbol("COMPUTING"),Mh=Symbol("ERRORED"),wN=Re(Y({},rl),{value:Fg,dirty:!0,error:null,equal:sb,producerMustRecompute(n){return n.value===Fg||n.value===Vg},producerRecomputeValue(n){if(n.value===Vg)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Vg;let t=Ph(n),r;try{r=n.computation()}catch(i){r=Mh,n.error=i}finally{Ug(n,t)}if(e!==Fg&&e!==Mh&&r!==Mh&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function IN(){throw new Error}var mb=IN;function gb(){mb()}function _b(n){mb=n}var EN=null;function vb(n){let e=Object.create(wb);e.value=n;let t=()=>(Bg(e),e.value);return t[Ai]=e,t}function zg(n,e){lb()||gb(),n.equal(n.value,e)||(n.value=e,bN(n))}function yb(n,e){lb()||gb(),zg(n,e(n.value))}var wb=Re(Y({},rl),{equal:sb,value:void 0});function bN(n){n.version++,vN(),cb(n),EN?.()}function Se(n){return typeof n=="function"}function Oa(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var kh=Oa(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ws(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Dt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Se(r))try{r()}catch(o){e=o instanceof kh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Ib(o)}catch(a){e=e??[],a instanceof kh?e=[...e,...a.errors]:e.push(a)}}if(e)throw new kh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ib(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ws(t,e)}remove(e){let{_finalizers:t}=this;t&&ws(t,e),e instanceof n&&e._removeParent(this)}};Dt.EMPTY=(()=>{let n=new Dt;return n.closed=!0,n})();var Hg=Dt.EMPTY;function Oh(n){return n instanceof Dt||n&&"closed"in n&&Se(n.remove)&&Se(n.add)&&Se(n.unsubscribe)}function Ib(n){Se(n)?n():n.unsubscribe()}var vr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var La={setTimeout(n,e,...t){let{delegate:r}=La;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=La;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Lh(n){La.setTimeout(()=>{let{onUnhandledError:e}=vr;if(e)e(n);else throw n})}function il(){}var Eb=qg("C",void 0,void 0);function bb(n){return qg("E",void 0,n)}function Cb(n){return qg("N",n,void 0)}function qg(n,e,t){return{kind:n,value:e,error:t}}var Is=null;function Fa(n){if(vr.useDeprecatedSynchronousErrorHandling){let e=!Is;if(e&&(Is={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Is;if(Is=null,t)throw r}}else n()}function Tb(n){vr.useDeprecatedSynchronousErrorHandling&&Is&&(Is.errorThrown=!0,Is.error=n)}var Es=class extends Dt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Oh(e)&&e.add(this)):this.destination=DN}static create(e,t,r){return new mo(e,t,r)}next(e){this.isStopped?Wg(Cb(e),this):this._next(e)}error(e){this.isStopped?Wg(bb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Wg(Eb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},CN=Function.prototype.bind;function Gg(n,e){return CN.call(n,e)}var Zg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Fh(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Fh(r)}else Fh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Fh(t)}}},mo=class extends Es{constructor(e,t,r){super();let i;if(Se(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&vr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Gg(e.next,o),error:e.error&&Gg(e.error,o),complete:e.complete&&Gg(e.complete,o)}):i=e}this.destination=new Zg(i)}};function Fh(n){vr.useDeprecatedSynchronousErrorHandling?Tb(n):Lh(n)}function TN(n){throw n}function Wg(n,e){let{onStoppedNotification:t}=vr;t&&La.setTimeout(()=>t(n,e))}var DN={closed:!0,next:il,error:TN,complete:il};var Va=typeof Symbol=="function"&&Symbol.observable||"@@observable";function zn(n){return n}function Vh(...n){return Kg(n)}function Kg(n){return n.length===0?zn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ue=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=AN(t)?t:new mo(t,r,i);return Fa(()=>{let{operator:a,source:c}=this;o.add(a?a.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Db(r),new r((i,o)=>{let a=new mo({next:c=>{try{t(c)}catch(d){o(d),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Va](){return this}pipe(...t){return Kg(t)(this)}toPromise(t){return t=Db(t),new t((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return n.create=e=>new n(e),n})();function Db(n){var e;return(e=n??vr.Promise)!==null&&e!==void 0?e:Promise}function SN(n){return n&&Se(n.next)&&Se(n.error)&&Se(n.complete)}function AN(n){return n&&n instanceof Es||SN(n)&&Oh(n)}function Qg(n){return Se(n?.lift)}function We(n){return e=>{if(Qg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function je(n,e,t,r,i){return new Yg(n,e,t,r,i)}var Yg=class extends Es{constructor(e,t,r,i,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=t?function(c){try{t(c)}catch(d){e.error(d)}}:super._next,this._error=i?function(c){try{i(c)}catch(d){e.error(d)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ba(){return We((n,e)=>{let t=null;n._refCount++;let r=je(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ua=class extends Ue{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Qg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Dt;let t=this.getSubject();e.add(this.source.subscribe(je(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Dt.EMPTY)}return e}refCount(){return Ba()(this)}};var Sb=Oa(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Jt=(()=>{class n extends Ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Bh(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Sb}next(t){Fa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Fa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Fa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Hg:(this.currentObservers=null,o.push(t),new Dt(()=>{this.currentObservers=null,ws(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ue;return t.source=this,t}}return n.create=(e,t)=>new Bh(e,t),n})(),Bh=class extends Jt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Hg}};var Mt=class extends Jt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Jg={now(){return(Jg.delegate||Date).now()},delegate:void 0};var Uh=class extends Dt{constructor(e,t){super()}schedule(e,t=0){return this}};var ol={setInterval(n,e,...t){let{delegate:r}=ol;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ol;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ja=class extends Uh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return ol.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ol.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ws(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var $a=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};$a.now=Jg.now;var za=class extends $a{constructor(e,t=$a.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Xg=new za(ja);var jh=class extends ja{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var $h=class extends za{};var e_=new $h(jh);var Hn=new Ue(n=>n.complete());function Ab(n){return n&&Se(n.schedule)}function xb(n){return n[n.length-1]}function zh(n){return Se(xb(n))?n.pop():void 0}function go(n){return Ab(xb(n))?n.pop():void 0}function t_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Pb(n,e,t,r){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(g){try{f(r.next(g))}catch(y){a(y)}}function d(g){try{f(r.throw(g))}catch(y){a(y)}}function f(g){g.done?o(g.value):i(g.value).then(c,d)}f((r=r.apply(n,e||[])).next())})}function Mb(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bs(n){return this instanceof bs?(this.v=n,this):new bs(n)}function Rb(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(C){return function(F){return Promise.resolve(F).then(C,y)}}function c(C,F){r[C]&&(i[C]=function(z){return new Promise(function($,Z){o.push([C,z,$,Z])>1||d(C,z)})},F&&(i[C]=F(i[C])))}function d(C,F){try{f(r[C](F))}catch(z){E(o[0][3],z)}}function f(C){C.value instanceof bs?Promise.resolve(C.value.v).then(g,y):E(o[0][2],C)}function g(C){d("next",C)}function y(C){d("throw",C)}function E(C,F){C(F),o.shift(),o.length&&d(o[0][0],o[0][1])}}function Nb(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Mb=="function"?Mb(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(a){return new Promise(function(c,d){a=n[o](a),i(c,d,a.done,a.value)})}}function i(o,a,c,d){Promise.resolve(d).then(function(f){o({value:f,done:c})},a)}}var Hh=n=>n&&typeof n.length=="number"&&typeof n!="function";function qh(n){return Se(n?.then)}function Gh(n){return Se(n[Va])}function Wh(n){return Symbol.asyncIterator&&Se(n?.[Symbol.asyncIterator])}function Zh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function xN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Kh=xN();function Qh(n){return Se(n?.[Kh])}function Yh(n){return Rb(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield bs(t.read());if(i)return yield bs(void 0);yield yield bs(r)}}finally{t.releaseLock()}})}function Jh(n){return Se(n?.getReader)}function Ft(n){if(n instanceof Ue)return n;if(n!=null){if(Gh(n))return MN(n);if(Hh(n))return PN(n);if(qh(n))return RN(n);if(Wh(n))return kb(n);if(Qh(n))return NN(n);if(Jh(n))return kN(n)}throw Zh(n)}function MN(n){return new Ue(e=>{let t=n[Va]();if(Se(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function PN(n){return new Ue(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function RN(n){return new Ue(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Lh)})}function NN(n){return new Ue(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function kb(n){return new Ue(e=>{ON(n,e).catch(t=>e.error(t))})}function kN(n){return kb(Yh(n))}function ON(n,e){var t,r,i,o;return Pb(this,void 0,void 0,function*(){try{for(t=Nb(n);r=yield t.next(),!r.done;){let a=r.value;if(e.next(a),e.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function kn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function _o(n,e=0){return We((t,r)=>{t.subscribe(je(r,i=>kn(r,n,()=>r.next(i),e),()=>kn(r,n,()=>r.complete(),e),i=>kn(r,n,()=>r.error(i),e)))})}function vo(n,e=0){return We((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Ob(n,e){return Ft(n).pipe(vo(e),_o(e))}function Lb(n,e){return Ft(n).pipe(vo(e),_o(e))}function Fb(n,e){return new Ue(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Vb(n,e){return new Ue(t=>{let r;return kn(t,e,()=>{r=n[Kh](),kn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){t.error(a);return}o?t.complete():t.next(i)},0,!0)}),()=>Se(r?.return)&&r.return()})}function Xh(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ue(t=>{kn(t,e,()=>{let r=n[Symbol.asyncIterator]();kn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Bb(n,e){return Xh(Yh(n),e)}function Ub(n,e){if(n!=null){if(Gh(n))return Ob(n,e);if(Hh(n))return Fb(n,e);if(qh(n))return Lb(n,e);if(Wh(n))return Xh(n,e);if(Qh(n))return Vb(n,e);if(Jh(n))return Bb(n,e)}throw Zh(n)}function vt(n,e){return e?Ub(n,e):Ft(n)}function pe(...n){let e=go(n);return vt(n,e)}function Ha(n,e){let t=Se(n)?n:()=>n,r=i=>i.error(t());return new Ue(e?i=>e.schedule(r,0,i):r)}function n_(n){return!!n&&(n instanceof Ue||Se(n.lift)&&Se(n.subscribe))}var yr=Oa(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function r_(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new mo({next:a=>{r(a),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new yr)}});n.subscribe(o)})}function me(n,e){return We((t,r)=>{let i=0;t.subscribe(je(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:LN}=Array;function FN(n,e){return LN(e)?n(...e):n(e)}function ef(n){return me(e=>FN(n,e))}var{isArray:VN}=Array,{getPrototypeOf:BN,prototype:UN,keys:jN}=Object;function tf(n){if(n.length===1){let e=n[0];if(VN(e))return{args:e,keys:null};if($N(e)){let t=jN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function $N(n){return n&&typeof n=="object"&&BN(n)===UN}function nf(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Cs(...n){let e=go(n),t=zh(n),{args:r,keys:i}=tf(n);if(r.length===0)return vt([],e);let o=new Ue(zN(r,e,i?a=>nf(i,a):zn));return t?o.pipe(ef(t)):o}function zN(n,e,t=zn){return r=>{jb(e,()=>{let{length:i}=n,o=new Array(i),a=i,c=i;for(let d=0;d<i;d++)jb(e,()=>{let f=vt(n[d],e),g=!1;f.subscribe(je(r,y=>{o[d]=y,g||(g=!0,c--),c||r.next(t(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}function jb(n,e,t){n?kn(t,n,e):e()}function $b(n,e,t,r,i,o,a,c){let d=[],f=0,g=0,y=!1,E=()=>{y&&!d.length&&!f&&e.complete()},C=z=>f<r?F(z):d.push(z),F=z=>{o&&e.next(z),f++;let $=!1;Ft(t(z,g++)).subscribe(je(e,Z=>{i?.(Z),o?C(Z):e.next(Z)},()=>{$=!0},void 0,()=>{if($)try{for(f--;d.length&&f<r;){let Z=d.shift();a?kn(e,a,()=>F(Z)):F(Z)}E()}catch(Z){e.error(Z)}}))};return n.subscribe(je(e,C,()=>{y=!0,E()})),()=>{c?.()}}function Vt(n,e,t=1/0){return Se(e)?Vt((r,i)=>me((o,a)=>e(r,o,i,a))(Ft(n(r,i))),t):(typeof e=="number"&&(t=e),We((r,i)=>$b(r,i,n,t)))}function qa(n=1/0){return Vt(zn,n)}function zb(){return qa(1)}function Ga(...n){return zb()(vt(n,go(n)))}function rf(n){return new Ue(e=>{Ft(n()).subscribe(e)})}function i_(...n){let e=zh(n),{args:t,keys:r}=tf(n),i=new Ue(o=>{let{length:a}=t;if(!a){o.complete();return}let c=new Array(a),d=a,f=a;for(let g=0;g<a;g++){let y=!1;Ft(t[g]).subscribe(je(o,E=>{y||(y=!0,f--),c[g]=E},()=>d--,void 0,()=>{(!d||!y)&&(f||o.next(r?nf(r,c):c),o.complete())}))}});return e?i.pipe(ef(e)):i}function qn(n,e){return We((t,r)=>{let i=0;t.subscribe(je(r,o=>n.call(e,o,i++)&&r.next(o)))})}function yo(n){return We((e,t)=>{let r=null,i=!1,o;r=e.subscribe(je(t,void 0,void 0,a=>{o=Ft(n(a,yo(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Hb(n,e,t,r,i){return(o,a)=>{let c=t,d=e,f=0;o.subscribe(je(a,g=>{let y=f++;d=c?n(d,g,y):(c=!0,g),r&&a.next(d)},i&&(()=>{c&&a.next(d),a.complete()})))}}function Ts(n,e){return Se(e)?Vt(n,e,1):Vt(n,1)}function wo(n){return We((e,t)=>{let r=!1;e.subscribe(je(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Xt(n){return n<=0?()=>Hn:We((e,t)=>{let r=0;e.subscribe(je(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function o_(n){return me(()=>n)}function of(n=HN){return We((e,t)=>{let r=!1;e.subscribe(je(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function HN(){return new yr}function sl(n){return We((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function zr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?qn((i,o)=>n(i,o,r)):zn,Xt(1),t?wo(e):of(()=>new yr))}function Wa(n){return n<=0?()=>Hn:We((e,t)=>{let r=[];e.subscribe(je(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function s_(n,e){let t=arguments.length>=2;return r=>r.pipe(n?qn((i,o)=>n(i,o,r)):zn,Wa(1),t?wo(e):of(()=>new yr))}function sf(n,e){return We(Hb(n,e,arguments.length>=2,!0))}function af(...n){let e=go(n);return We((t,r)=>{(e?Ga(n,t,e):Ga(n,t)).subscribe(r)})}function Dn(n,e){return We((t,r)=>{let i=null,o=0,a=!1,c=()=>a&&!i&&r.complete();t.subscribe(je(r,d=>{i?.unsubscribe();let f=0,g=o++;Ft(n(d,g)).subscribe(i=je(r,y=>r.next(e?e(d,y,g,f++):y),()=>{i=null,c()}))},()=>{a=!0,c()}))})}function a_(n){return We((e,t)=>{Ft(n).subscribe(je(t,()=>t.complete(),il)),!t.closed&&e.subscribe(t)})}function Gt(n,e,t){let r=Se(n)||e||t?{next:n,error:e,complete:t}:n;return r?We((i,o)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let c=!0;i.subscribe(je(o,d=>{var f;(f=r.next)===null||f===void 0||f.call(r,d),o.next(d)},()=>{var d;c=!1,(d=r.complete)===null||d===void 0||d.call(r),o.complete()},d=>{var f;c=!1,(f=r.error)===null||f===void 0||f.call(r,d),o.error(d)},()=>{var d,f;c&&((d=r.unsubscribe)===null||d===void 0||d.call(r)),(f=r.finalize)===null||f===void 0||f.call(r)}))}):zn}var xC="https://g.co/ng/security#xss",se=class extends Error{constructor(e,t){super(dv(e,t)),this.code=e}};function dv(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function ml(n){return{toString:n}.toString()}var uf="__parameters__";function qN(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function MC(n,e,t){return ml(()=>{let r=qN(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let a=new i(...o);return c.annotation=a,c;function c(d,f,g){let y=d.hasOwnProperty(uf)?d[uf]:Object.defineProperty(d,uf,{value:[]})[uf];for(;y.length<=g;)y.push(null);return(y[g]=y[g]||[]).push(a),d}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var I_=globalThis;function at(n){for(let e in n)if(n[e]===at)return e;throw Error("Could not find renamed property on target object.")}function GN(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function An(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(An).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function qb(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var WN=at({__forward_ref__:at});function Qr(n){return n.__forward_ref__=Qr,n.toString=function(){return An(this())},n}function Sn(n){return PC(n)?n():n}function PC(n){return typeof n=="function"&&n.hasOwnProperty(WN)&&n.__forward_ref__===Qr}function ie(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Mo(n){return{providers:n.providers||[],imports:n.imports||[]}}function zf(n){return Gb(n,NC)||Gb(n,kC)}function RC(n){return zf(n)!==null}function Gb(n,e){return n.hasOwnProperty(e)?n[e]:null}function ZN(n){let e=n&&(n[NC]||n[kC]);return e||null}function Wb(n){return n&&(n.hasOwnProperty(Zb)||n.hasOwnProperty(KN))?n[Zb]:null}var NC=at({\u0275prov:at}),Zb=at({\u0275inj:at}),kC=at({ngInjectableDef:at}),KN=at({ngInjectorDef:at}),ae=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ie({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function OC(n){return n&&!!n.\u0275providers}var QN=at({\u0275cmp:at}),YN=at({\u0275dir:at}),JN=at({\u0275pipe:at}),XN=at({\u0275mod:at}),vf=at({\u0275fac:at}),ul=at({__NG_ELEMENT_ID__:at}),Kb=at({__NG_ENV_ID__:at});function eu(n){return typeof n=="string"?n:n==null?"":String(n)}function e1(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():eu(n)}function t1(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new se(-200,n)}function hv(n,e){throw new se(-201,!1)}var ke=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ke||{}),E_;function LC(){return E_}function On(n){let e=E_;return E_=n,e}function FC(n,e,t){let r=zf(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ke.Optional)return null;if(e!==void 0)return e;hv(n,"Injector")}var n1={},cl=n1,b_="__NG_DI_FLAG__",yf="ngTempTokenPath",r1="ngTokenPath",i1=/\n/gm,o1="\u0275",Qb="__source",Ja;function s1(){return Ja}function Io(n){let e=Ja;return Ja=n,e}function a1(n,e=ke.Default){if(Ja===void 0)throw new se(-203,!1);return Ja===null?FC(n,void 0,e):Ja.get(n,e&ke.Optional?null:void 0,e)}function ge(n,e=ke.Default){return(LC()||a1)(Sn(n),e)}function W(n,e=ke.Default){return ge(n,Hf(e))}function Hf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function C_(n){let e=[];for(let t=0;t<n.length;t++){let r=Sn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new se(900,!1);let i,o=ke.Default;for(let a=0;a<r.length;a++){let c=r[a],d=u1(c);typeof d=="number"?d===-1?i=c.token:o|=d:i=c}e.push(ge(i,o))}else e.push(ge(r))}return e}function VC(n,e){return n[b_]=e,n.prototype[b_]=e,n}function u1(n){return n[b_]}function c1(n,e,t,r){let i=n[yf];throw e[Qb]&&i.unshift(e[Qb]),n.message=l1(`
`+n.message,i,t,r),n[r1]=i,n[yf]=null,n}function l1(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==o1?n.slice(2):n;let i=An(e);if(Array.isArray(e))i=e.map(An).join(" -> ");else if(typeof e=="object"){let o=[];for(let a in e)if(e.hasOwnProperty(a)){let c=e[a];o.push(a+":"+(typeof c=="string"?JSON.stringify(c):An(c)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(i1,`
  `)}`}var hn=VC(MC("Optional"),8);var fv=VC(MC("SkipSelf"),4);function Ss(n,e){let t=n.hasOwnProperty(vf);return t?n[vf]:null}function pv(n,e){n.forEach(t=>Array.isArray(t)?pv(t,e):e(t))}function BC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function wf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function d1(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function h1(n,e,t){let r=gl(n,e);return r>=0?n[r|1]=t:(r=~r,d1(n,r,e,t)),r}function u_(n,e){let t=gl(n,e);if(t>=0)return n[t|1]}function gl(n,e){return f1(n,e,1)}function f1(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),a=n[o<<t];if(e===a)return o<<t;a>e?i=o:r=o+1}return~(i<<t)}var tu={},rr=[],nu=new ae(""),UC=new ae("",-1),jC=new ae(""),If=class{get(e,t=cl){if(t===cl){let r=new Error(`NullInjectorError: No provider for ${An(e)}!`);throw r.name="NullInjectorError",r}return t}},$C=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}($C||{}),Gr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Gr||{}),Co=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Co||{});function p1(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function T_(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],a=t[r++],c=t[r++];n.setAttribute(e,a,c,o)}else{let o=i,a=t[++r];m1(o)?n.setProperty(e,o,a):n.setAttribute(e,o,a),r++}}return r}function zC(n){return n===3||n===4||n===6}function m1(n){return n.charCodeAt(0)===64}function ll(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Yb(n,t,i,null,e[++r]):Yb(n,t,i,null,null))}}return n}function Yb(n,e,t,r,i){let o=0,a=n.length;if(e===-1)a=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){a=-1;break}else if(c>e){a=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}a!==-1&&(n.splice(a,0,e),o=a+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var HC="ng-template";function g1(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&p1(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(mv(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function mv(n){return n.type===4&&n.value!==HC}function _1(n,e,t){let r=n.type===4&&!t?HC:n.value;return e===r}function v1(n,e,t){let r=4,i=n.attrs,o=i!==null?I1(i):0,a=!1;for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="number"){if(!a&&!wr(r)&&!wr(d))return!1;if(a&&wr(d))continue;a=!1,r=d|r&1;continue}if(!a)if(r&4){if(r=2|r&1,d!==""&&!_1(n,d,t)||d===""&&e.length===1){if(wr(r))return!1;a=!0}}else if(r&8){if(i===null||!g1(n,i,d,t)){if(wr(r))return!1;a=!0}}else{let f=e[++c],g=y1(d,i,mv(n),t);if(g===-1){if(wr(r))return!1;a=!0;continue}if(f!==""){let y;if(g>o?y="":y=i[g+1].toLowerCase(),r&2&&f!==y){if(wr(r))return!1;a=!0}}}}return wr(r)||a}function wr(n){return(n&1)===0}function y1(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let a=e[i];if(a===n)return i;if(a===3||a===6)o=!0;else if(a===1||a===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=o?1:2}return-1}else return E1(e,n)}function w1(n,e,t=!1){for(let r=0;r<e.length;r++)if(v1(n,e[r],t))return!0;return!1}function I1(n){for(let e=0;e<n.length;e++){let t=n[e];if(zC(t))return e}return n.length}function E1(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Jb(n,e){return n?":not("+e.trim()+")":e}function b1(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let a=n[t];if(typeof a=="string")if(r&2){let c=n[++t];i+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!wr(a)&&(e+=Jb(o,i),i=""),r=a,o=o||!wr(r);t++}return i!==""&&(e+=Jb(o,i)),e}function C1(n){return n.map(b1).join(",")}function T1(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!wr(i))break;i=o}r++}return{attrs:e,classes:t}}function ht(n){return ml(()=>{let e=QC(n),t=Re(Y({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===$C.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Gr.Emulated,styles:n.styles||rr,_:null,schemas:n.schemas||null,tView:null,id:""});YC(t);let r=n.dependencies;return t.directiveDefs=eC(r,!1),t.pipeDefs=eC(r,!0),t.id=A1(t),t})}function D1(n){return To(n)||GC(n)}function S1(n){return n!==null}function Po(n){return ml(()=>({type:n.type,bootstrap:n.bootstrap||rr,declarations:n.declarations||rr,imports:n.imports||rr,exports:n.exports||rr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Xb(n,e){if(n==null)return tu;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,a,c=Co.None;Array.isArray(i)?(c=i[0],o=i[1],a=i[2]??o):(o=i,a=i),e?(t[o]=c!==Co.None?[r,c]:r,e[o]=a):t[o]=r}return t}function Et(n){return ml(()=>{let e=QC(n);return YC(e),e})}function qC(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function To(n){return n[QN]||null}function GC(n){return n[YN]||null}function WC(n){return n[JN]||null}function ZC(n){let e=To(n)||GC(n)||WC(n);return e!==null?e.standalone:!1}function KC(n,e){let t=n[XN]||null;if(!t&&e===!0)throw new Error(`Type ${An(n)} does not have '\u0275mod' property.`);return t}function QC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||tu,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||rr,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Xb(n.inputs,e),outputs:Xb(n.outputs),debugInfo:null}}function YC(n){n.features?.forEach(e=>e(n))}function eC(n,e){if(!n)return null;let t=e?WC:D1;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(S1)}function A1(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Yr(n){return{\u0275providers:n}}function x1(...n){return{\u0275providers:JC(!0,n),\u0275fromNgModule:!0}}function JC(n,...e){let t=[],r=new Set,i,o=a=>{t.push(a)};return pv(e,a=>{let c=a;D_(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&XC(i,o),t}function XC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];gv(i,o=>{e(o,r)})}}function D_(n,e,t,r){if(n=Sn(n),!n)return!1;let i=null,o=Wb(n),a=!o&&To(n);if(!o&&!a){let d=n.ngModule;if(o=Wb(d),o)i=d;else return!1}else{if(a&&!a.standalone)return!1;i=n}let c=r.has(i);if(a){if(c)return!1;if(r.add(i),a.dependencies){let d=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let f of d)D_(f,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let f;try{pv(o.imports,g=>{D_(g,e,t,r)&&(f||=[],f.push(g))})}finally{}f!==void 0&&XC(f,e)}if(!c){let f=Ss(i)||(()=>new i);e({provide:i,useFactory:f,deps:rr},i),e({provide:jC,useValue:i,multi:!0},i),e({provide:nu,useValue:()=>ge(i),multi:!0},i)}let d=o.providers;if(d!=null&&!c){let f=n;gv(d,g=>{e(g,f)})}}else return!1;return i!==n&&n.providers!==void 0}function gv(n,e){for(let t of n)OC(t)&&(t=t.\u0275providers),Array.isArray(t)?gv(t,e):e(t)}var M1=at({provide:String,useValue:at});function eT(n){return n!==null&&typeof n=="object"&&M1 in n}function P1(n){return!!(n&&n.useExisting)}function R1(n){return!!(n&&n.useFactory)}function ru(n){return typeof n=="function"}function N1(n){return!!n.useClass}var qf=new ae(""),ff={},k1={},c_;function _v(){return c_===void 0&&(c_=new If),c_}var Gn=class{},dl=class extends Gn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,A_(e,a=>this.processProvider(a)),this.records.set(UC,Za(void 0,this)),i.has("environment")&&this.records.set(Gn,Za(void 0,this));let o=this.records.get(qf);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(jC,rr,ke.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ke(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ke(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Io(this),r=On(void 0),i;try{return e()}finally{Io(t),On(r)}}get(e,t=cl,r=ke.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Kb))return e[Kb](this);r=Hf(r);let i,o=Io(this),a=On(void 0);try{if(!(r&ke.SkipSelf)){let d=this.records.get(e);if(d===void 0){let f=B1(e)&&zf(e);f&&this.injectableDefInScope(f)?d=Za(S_(e),ff):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d)}let c=r&ke.Self?_v():this.parent;return t=r&ke.Optional&&t===cl?null:t,c.get(e,t)}catch(c){if(c.name==="NullInjectorError"){if((c[yf]=c[yf]||[]).unshift(An(e)),o)throw c;return c1(c,e,"R3InjectorError",this.source)}else throw c}finally{On(a),Io(o)}}resolveInjectorInitializers(){let e=Ke(null),t=Io(this),r=On(void 0),i;try{let o=this.get(nu,rr,ke.Self);for(let a of o)a()}finally{Io(t),On(r),Ke(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(An(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new se(205,!1)}processProvider(e){e=Sn(e);let t=ru(e)?e:Sn(e&&e.provide),r=L1(e);if(!ru(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Za(void 0,ff,!0),i.factory=()=>C_(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ke(null);try{return t.value===ff&&(t.value=k1,t.value=t.factory()),typeof t.value=="object"&&t.value&&V1(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ke(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Sn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function S_(n){let e=zf(n),t=e!==null?e.factory:Ss(n);if(t!==null)return t;if(n instanceof ae)throw new se(204,!1);if(n instanceof Function)return O1(n);throw new se(204,!1)}function O1(n){if(n.length>0)throw new se(204,!1);let t=ZN(n);return t!==null?()=>t.factory(n):()=>new n}function L1(n){if(eT(n))return Za(void 0,n.useValue);{let e=tT(n);return Za(e,ff)}}function tT(n,e,t){let r;if(ru(n)){let i=Sn(n);return Ss(i)||S_(i)}else if(eT(n))r=()=>Sn(n.useValue);else if(R1(n))r=()=>n.useFactory(...C_(n.deps||[]));else if(P1(n))r=()=>ge(Sn(n.useExisting));else{let i=Sn(n&&(n.useClass||n.provide));if(F1(n))r=()=>new i(...C_(n.deps));else return Ss(i)||S_(i)}return r}function Za(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function F1(n){return!!n.deps}function V1(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function B1(n){return typeof n=="function"||typeof n=="object"&&n instanceof ae}function A_(n,e){for(let t of n)Array.isArray(t)?A_(t,e):t&&OC(t)?A_(t.\u0275providers,e):e(t)}function Jr(n,e){n instanceof dl&&n.assertNotDestroyed();let t,r=Io(n),i=On(void 0);try{return e()}finally{Io(r),On(i)}}function nT(){return LC()!==void 0||s1()!=null}function U1(n){if(!nT())throw new se(-203,!1)}function j1(n){return typeof n=="function"}var Ri=0,Fe=1,Ie=2,xn=3,Ir=4,br=5,Ef=6,bf=7,Er=8,iu=9,Wr=10,Ut=11,hl=12,tC=13,pu=14,Zr=15,ou=16,Ka=17,su=18,Gf=19,rT=20,Eo=21,l_=22,ir=23,sr=25,iT=1;var As=7,Cf=8,Tf=9,or=10,Df=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Df||{});function bo(n){return Array.isArray(n)&&typeof n[iT]=="object"}function Ni(n){return Array.isArray(n)&&n[iT]===!0}function vv(n){return(n.flags&4)!==0}function Wf(n){return n.componentOffset>-1}function Zf(n){return(n.flags&1)===1}function Do(n){return!!n.template}function x_(n){return(n[Ie]&512)!==0}var M_=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function oT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Ro(){return sT}function sT(n){return n.type.prototype.ngOnChanges&&(n.setInput=z1),$1}Ro.ngInherit=!0;function $1(){let n=uT(this),e=n?.current;if(e){let t=n.previous;if(t===tu)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function z1(n,e,t,r,i){let o=this.declaredInputs[r],a=uT(n)||H1(n,{previous:tu,current:null}),c=a.current||(a.current={}),d=a.previous,f=d[o];c[o]=new M_(f&&f.currentValue,t,d===tu),oT(n,e,i,t)}var aT="__ngSimpleChanges__";function uT(n){return n[aT]||null}function H1(n,e){return n[aT]=e}var nC=null;var Hr=function(n,e,t){nC?.(n,e,t)},cT="svg",q1="math";function Kr(n){for(;Array.isArray(n);)n=n[Ri];return n}function lT(n,e){return Kr(e[n])}function ar(n,e){return Kr(e[n.index])}function dT(n,e){return n.data[e]}function hT(n,e){return n[e]}function No(n,e){let t=e[n];return bo(t)?t:t[Ri]}function yv(n){return(n[Ie]&128)===128}function G1(n){return Ni(n[xn])}function au(n,e){return e==null?null:n[e]}function fT(n){n[Ka]=0}function pT(n){n[Ie]&1024||(n[Ie]|=1024,yv(n)&&Qf(n))}function W1(n,e){for(;n>0;)e=e[pu],n--;return e}function Kf(n){return!!(n[Ie]&9216||n[ir]?.dirty)}function P_(n){n[Wr].changeDetectionScheduler?.notify(8),n[Ie]&64&&(n[Ie]|=1024),Kf(n)&&Qf(n)}function Qf(n){n[Wr].changeDetectionScheduler?.notify(0);let e=xs(n);for(;e!==null&&!(e[Ie]&8192||(e[Ie]|=8192,!yv(e)));)e=xs(e)}function mT(n,e){if((n[Ie]&256)===256)throw new se(911,!1);n[Eo]===null&&(n[Eo]=[]),n[Eo].push(e)}function Z1(n,e){if(n[Eo]===null)return;let t=n[Eo].indexOf(e);t!==-1&&n[Eo].splice(t,1)}function xs(n){let e=n[xn];return Ni(e)?e[xn]:e}var Me={lFrame:TT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var gT=!1;function K1(){return Me.lFrame.elementDepthCount}function Q1(){Me.lFrame.elementDepthCount++}function Y1(){Me.lFrame.elementDepthCount--}function _T(){return Me.bindingsEnabled}function J1(){return Me.skipHydrationRootTNode!==null}function X1(n){return Me.skipHydrationRootTNode===n}function ek(){Me.skipHydrationRootTNode=null}function Xe(){return Me.lFrame.lView}function fn(){return Me.lFrame.tView}function be(n){return Me.lFrame.contextLView=n,n[Er]}function Ce(n){return Me.lFrame.contextLView=null,n}function pn(){let n=vT();for(;n!==null&&n.type===64;)n=n.parent;return n}function vT(){return Me.lFrame.currentTNode}function tk(){let n=Me.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ks(n,e){let t=Me.lFrame;t.currentTNode=n,t.isParent=e}function wv(){return Me.lFrame.isParent}function yT(){Me.lFrame.isParent=!1}function nk(){return Me.lFrame.contextLView}function wT(){return gT}function rC(n){gT=n}function Iv(){let n=Me.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function rk(){return Me.lFrame.bindingIndex}function ik(n){return Me.lFrame.bindingIndex=n}function Yf(){return Me.lFrame.bindingIndex++}function IT(n){let e=Me.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function ok(){return Me.lFrame.inI18n}function sk(n,e){let t=Me.lFrame;t.bindingIndex=t.bindingRootIndex=n,R_(e)}function ak(){return Me.lFrame.currentDirectiveIndex}function R_(n){Me.lFrame.currentDirectiveIndex=n}function uk(n){let e=Me.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function ET(n){Me.lFrame.currentQueryIndex=n}function ck(n){let e=n[Fe];return e.type===2?e.declTNode:e.type===1?n[br]:null}function bT(n,e,t){if(t&ke.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ke.Host);)if(i=ck(o),i===null||(o=o[pu],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Me.lFrame=CT();return r.currentTNode=e,r.lView=n,!0}function Ev(n){let e=CT(),t=n[Fe];Me.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function CT(){let n=Me.lFrame,e=n===null?null:n.child;return e===null?TT(n):e}function TT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function DT(){let n=Me.lFrame;return Me.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var ST=DT;function bv(){let n=DT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function lk(n){return(Me.lFrame.contextLView=W1(n,Me.lFrame.contextLView))[Er]}function Os(){return Me.lFrame.selectedIndex}function Ms(n){Me.lFrame.selectedIndex=n}function Cv(){let n=Me.lFrame;return dT(n.tView,n.selectedIndex)}function AT(){Me.lFrame.currentNamespace=cT}function xT(){dk()}function dk(){Me.lFrame.currentNamespace=null}function hk(){return Me.lFrame.currentNamespace}var MT=!0;function Jf(){return MT}function Xf(n){MT=n}function fk(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let a=sT(e);(t.preOrderHooks??=[]).push(n,a),(t.preOrderCheckHooks??=[]).push(n,a)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function ep(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:d,ngAfterViewChecked:f,ngOnDestroy:g}=o;a&&(n.contentHooks??=[]).push(-t,a),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),d&&(n.viewHooks??=[]).push(-t,d),f&&((n.viewHooks??=[]).push(t,f),(n.viewCheckHooks??=[]).push(t,f)),g!=null&&(n.destroyHooks??=[]).push(t,g)}}function pf(n,e,t){PT(n,e,3,t)}function mf(n,e,t,r){(n[Ie]&3)===t&&PT(n,e,t,r)}function d_(n,e){let t=n[Ie];(t&3)===e&&(t&=16383,t+=1,n[Ie]=t)}function PT(n,e,t,r){let i=r!==void 0?n[Ka]&65535:0,o=r??-1,a=e.length-1,c=0;for(let d=i;d<a;d++)if(typeof e[d+1]=="number"){if(c=e[d],r!=null&&c>=r)break}else e[d]<0&&(n[Ka]+=65536),(c<o||o==-1)&&(pk(n,t,e,d),n[Ka]=(n[Ka]&4294901760)+d+2),d++}function iC(n,e){Hr(4,n,e);let t=Ke(null);try{e.call(n)}finally{Ke(t),Hr(5,n,e)}}function pk(n,e,t,r){let i=t[r]<0,o=t[r+1],a=i?-t[r]:t[r],c=n[a];i?n[Ie]>>14<n[Ka]>>16&&(n[Ie]&3)===e&&(n[Ie]+=16384,iC(c,o)):iC(c,o)}var Xa=-1,Ps=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function mk(n){return n instanceof Ps}function gk(n){return(n.flags&8)!==0}function _k(n){return(n.flags&16)!==0}var h_={},N_=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Hf(r);let i=this.injector.get(e,h_,r);return i!==h_||t===h_?i:this.parentInjector.get(e,t,r)}};function RT(n){return n!==Xa}function Sf(n){return n&32767}function vk(n){return n>>16}function Af(n,e){let t=vk(n),r=e;for(;t>0;)r=r[pu],t--;return r}var k_=!0;function xf(n){let e=k_;return k_=n,e}var yk=256,NT=yk-1,kT=5,wk=0,qr={};function Ik(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ul)&&(r=t[ul]),r==null&&(r=t[ul]=wk++);let i=r&NT,o=1<<i;e.data[n+(i>>kT)]|=o}function Mf(n,e){let t=OT(n,e);if(t!==-1)return t;let r=e[Fe];r.firstCreatePass&&(n.injectorIndex=e.length,f_(r.data,n),f_(e,null),f_(r.blueprint,null));let i=Tv(n,e),o=n.injectorIndex;if(RT(i)){let a=Sf(i),c=Af(i,e),d=c[Fe].data;for(let f=0;f<8;f++)e[o+f]=c[a+f]|d[a+f]}return e[o+8]=i,o}function f_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function OT(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Tv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=UT(i),r===null)return Xa;if(t++,i=i[pu],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Xa}function O_(n,e,t){Ik(n,e,t)}function Ek(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(zC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function LT(n,e,t){if(t&ke.Optional||n!==void 0)return n;hv(e,"NodeInjector")}function FT(n,e,t,r){if(t&ke.Optional&&r===void 0&&(r=null),!(t&(ke.Self|ke.Host))){let i=n[iu],o=On(void 0);try{return i?i.get(e,r,t&ke.Optional):FC(e,r,t&ke.Optional)}finally{On(o)}}return LT(r,e,t)}function VT(n,e,t,r=ke.Default,i){if(n!==null){if(e[Ie]&2048&&!(r&ke.Self)){let a=Sk(n,e,t,r,qr);if(a!==qr)return a}let o=BT(n,e,t,r,qr);if(o!==qr)return o}return FT(e,t,r,i)}function BT(n,e,t,r,i){let o=Tk(t);if(typeof o=="function"){if(!bT(e,n,r))return r&ke.Host?LT(i,t,r):FT(e,t,r,i);try{let a;if(a=o(r),a==null&&!(r&ke.Optional))hv(t);else return a}finally{ST()}}else if(typeof o=="number"){let a=null,c=OT(n,e),d=Xa,f=r&ke.Host?e[Zr][br]:null;for((c===-1||r&ke.SkipSelf)&&(d=c===-1?Tv(n,e):e[c+8],d===Xa||!sC(r,!1)?c=-1:(a=e[Fe],c=Sf(d),e=Af(d,e)));c!==-1;){let g=e[Fe];if(oC(o,c,g.data)){let y=bk(c,e,t,a,r,f);if(y!==qr)return y}d=e[c+8],d!==Xa&&sC(r,e[Fe].data[c+8]===f)&&oC(o,c,e)?(a=g,c=Sf(d),e=Af(d,e)):c=-1}}return i}function bk(n,e,t,r,i,o){let a=e[Fe],c=a.data[n+8],d=r==null?Wf(c)&&k_:r!=a&&(c.type&3)!==0,f=i&ke.Host&&o===c,g=Ck(c,a,t,d,f);return g!==null?uu(e,a,g,c):qr}function Ck(n,e,t,r,i){let o=n.providerIndexes,a=e.data,c=o&1048575,d=n.directiveStart,f=n.directiveEnd,g=o>>20,y=r?c:c+g,E=i?c+g:f;for(let C=y;C<E;C++){let F=a[C];if(C<d&&t===F||C>=d&&F.type===t)return C}if(i){let C=a[d];if(C&&Do(C)&&C.type===t)return d}return null}function uu(n,e,t,r){let i=n[t],o=e.data;if(mk(i)){let a=i;a.resolving&&t1(e1(o[t]));let c=xf(a.canSeeViewProviders);a.resolving=!0;let d,f=a.injectImpl?On(a.injectImpl):null,g=bT(n,r,ke.Default);try{i=n[t]=a.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&fk(t,o[t],e)}finally{f!==null&&On(f),xf(c),a.resolving=!1,ST()}}return i}function Tk(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ul)?n[ul]:void 0;return typeof e=="number"?e>=0?e&NT:Dk:e}function oC(n,e,t){let r=1<<n;return!!(t[e+(n>>kT)]&r)}function sC(n,e){return!(n&ke.Self)&&!(n&ke.Host&&e)}var Ds=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return VT(this._tNode,this._lView,e,Hf(r),t)}};function Dk(){return new Ds(pn(),Xe())}function ki(n){return ml(()=>{let e=n.prototype.constructor,t=e[vf]||L_(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[vf]||L_(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function L_(n){return PC(n)?()=>{let e=L_(Sn(n));return e&&e()}:Ss(n)}function Sk(n,e,t,r,i){let o=n,a=e;for(;o!==null&&a!==null&&a[Ie]&2048&&!(a[Ie]&512);){let c=BT(o,a,t,r|ke.Self,qr);if(c!==qr)return c;let d=o.parent;if(!d){let f=a[rT];if(f){let g=f.get(t,qr,r);if(g!==qr)return g}d=UT(a),a=a[pu]}o=d}return i}function UT(n){let e=n[Fe],t=e.type;return t===2?e.declTNode:t===1?n[br]:null}function Dv(n){return Ek(pn(),n)}function aC(n,e=null,t=null,r){let i=jT(n,e,t,r);return i.resolveInjectorInitializers(),i}function jT(n,e=null,t=null,r,i=new Set){let o=[t||rr,x1(n)];return r=r||(typeof n=="object"?void 0:An(n)),new dl(o,e||_v(),r||null,i)}var un=class n{static{this.THROW_IF_NOT_FOUND=cl}static{this.NULL=new If}static create(e,t){if(Array.isArray(e))return aC({name:""},t,e,"");{let r=e.name??"";return aC({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=ie({token:n,providedIn:"any",factory:()=>ge(UC)})}static{this.__NG_ELEMENT_ID__=-1}};var Ak=new ae("");Ak.__NG_ELEMENT_ID__=n=>{let e=pn();if(e===null)throw new se(204,!1);if(e.type&2)return e.value;if(n&ke.Optional)return null;throw new se(204,!1)};var xk="ngOriginalError";function p_(n){return n[xk]}var $T=!0,Sv=(()=>{class n{static{this.__NG_ELEMENT_ID__=Mk}static{this.__NG_ENV_ID__=t=>t}}return n})(),F_=class extends Sv{constructor(e){super(),this._lView=e}onDestroy(e){return mT(this._lView,e),()=>Z1(this._lView,e)}};function Mk(){return new F_(Xe())}var mu=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Mt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}}return n})();var V_=class extends Jt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,nT()&&(this.destroyRef=W(Sv,{optional:!0})??void 0,this.pendingTasks=W(mu,{optional:!0})??void 0)}emit(e){let t=Ke(null);try{super.next(e)}finally{Ke(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),a=r;if(e&&typeof e=="object"){let d=e;i=d.next?.bind(d),o=d.error?.bind(d),a=d.complete?.bind(d)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),a&&(a=this.wrapInTimeout(a)));let c=super.subscribe({next:i,error:o,complete:a});return e instanceof Dt&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Bt=V_;function Pf(...n){}function zT(n){let e,t;function r(){n=Pf;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function uC(n){return queueMicrotask(()=>n()),()=>{n=Pf}}var Av="isAngularZone",Rf=Av+"_ID",Pk=0,et=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bt(!1),this.onMicrotaskEmpty=new Bt(!1),this.onStable=new Bt(!1),this.onError=new Bt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=$T}=e;if(typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!i&&r,a.shouldCoalesceRunChangeDetection=i,a.callbackScheduled=!1,a.scheduleInRootZone=o,kk(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Av)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new se(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,e,Rk,Pf,Pf);try{return o.runTask(a,t,r)}finally{o.cancelTask(a)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Rk={};function xv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Nk(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){zT(()=>{n.callbackScheduled=!1,B_(n),n.isCheckStableRunning=!0,xv(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),B_(n)}function kk(n){let e=()=>{Nk(n)},t=Pk++;n._inner=n._inner.fork({name:"angular",properties:{[Av]:!0,[Rf]:t,[Rf+t]:!0},onInvokeTask:(r,i,o,a,c,d)=>{if(Ok(d))return r.invokeTask(o,a,c,d);try{return cC(n),r.invokeTask(o,a,c,d)}finally{(n.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),lC(n)}},onInvoke:(r,i,o,a,c,d,f)=>{try{return cC(n),r.invoke(o,a,c,d,f)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Lk(d)&&e(),lC(n)}},onHasTask:(r,i,o,a)=>{r.hasTask(o,a),i===o&&(a.change=="microTask"?(n._hasPendingMicrotasks=a.microTask,B_(n),xv(n)):a.change=="macroTask"&&(n.hasPendingMacrotasks=a.macroTask))},onHandleError:(r,i,o,a)=>(r.handleError(o,a),n.runOutsideAngular(()=>n.onError.emit(a)),!1)})}function B_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function cC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function lC(n){n._nesting--,xv(n)}var U_=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bt,this.onMicrotaskEmpty=new Bt,this.onStable=new Bt,this.onError=new Bt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Ok(n){return HT(n,"__ignore_ng_zone__")}function Lk(n){return HT(n,"__scheduler_tick__")}function HT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var xi=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&p_(e);for(;t&&p_(t);)t=p_(t);return t||null}},Fk=new ae("",{providedIn:"root",factory:()=>{let n=W(et),e=W(xi);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function Vk(){return tp(pn(),Xe())}function tp(n,e){return new Cr(ar(n,e))}var Cr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=Vk}}return n})();function qT(n){return(n.flags&128)===128}var GT=new Map,Bk=0;function Uk(){return Bk++}function jk(n){GT.set(n[Gf],n)}function j_(n){GT.delete(n[Gf])}var dC="__ngContext__";function So(n,e){bo(e)?(n[dC]=e[Gf],jk(e)):n[dC]=e}function WT(n){return KT(n[hl])}function ZT(n){return KT(n[Ir])}function KT(n){for(;n!==null&&!Ni(n);)n=n[Ir];return n}var $_;function QT(n){$_=n}function $k(){if($_!==void 0)return $_;if(typeof document<"u")return document;throw new se(210,!1)}var Mv=new ae("",{providedIn:"root",factory:()=>zk}),zk="ng",Pv=new ae(""),Xr=new ae("",{providedIn:"platform",factory:()=>"unknown"});var Rv=new ae("",{providedIn:"root",factory:()=>$k().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Hk="h",qk="b";var Gk=()=>null;function Nv(n,e,t=!1){return Gk(n,e,t)}var YT=!1,Wk=new ae("",{providedIn:"root",factory:()=>YT});var cf;function Zk(){if(cf===void 0&&(cf=null,I_.trustedTypes))try{cf=I_.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return cf}function hC(n){return Zk()?.createScriptURL(n)||n}var Nf=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${xC})`}};function _l(n){return n instanceof Nf?n.changingThisBreaksApplicationSecurity:n}function kv(n,e){let t=Kk(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${xC})`)}return t===e}function Kk(n){return n instanceof Nf&&n.getTypeName()||null}var Qk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function JT(n){return n=String(n),n.match(Qk)?n:"unsafe:"+n}var np=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(np||{});function Yk(n){let e=eD();return e?e.sanitize(np.URL,n)||"":kv(n,"URL")?_l(n):JT(eu(n))}function Jk(n){let e=eD();if(e)return hC(e.sanitize(np.RESOURCE_URL,n)||"");if(kv(n,"ResourceURL"))return hC(_l(n));throw new se(904,!1)}function Xk(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?Jk:Yk}function XT(n,e,t){return Xk(e,t)(n)}function eD(){let n=Xe();return n&&n[Wr].sanitizer}var eO=/^>|^->|<!--|-->|--!>|<!-$/g,tO=/(<|>)/g,nO="\u200B$1\u200B";function rO(n){return n.replace(eO,e=>e.replace(tO,nO))}function tD(n){return n instanceof Function?n():n}function iO(n){return(n??W(un)).get(Xr)==="browser"}var Mi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Mi||{}),oO;function Ov(n,e){return oO(n,e)}function Qa(n,e,t,r,i){if(r!=null){let o,a=!1;Ni(r)?o=r:bo(r)&&(a=!0,r=r[Ri]);let c=Kr(r);n===0&&t!==null?i==null?sD(e,t,c):kf(e,t,c,i||null,!0):n===1&&t!==null?kf(e,t,c,i||null,!0):n===2?IO(e,c,a):n===3&&e.destroyNode(c),o!=null&&bO(e,n,o,t,i)}}function sO(n,e){return n.createText(e)}function aO(n,e,t){n.setValue(e,t)}function uO(n,e){return n.createComment(rO(e))}function nD(n,e,t){return n.createElement(e,t)}function cO(n,e){rD(n,e),e[Ri]=null,e[br]=null}function lO(n,e,t,r,i,o){r[Ri]=i,r[br]=e,ip(n,r,t,1,i,o)}function rD(n,e){e[Wr].changeDetectionScheduler?.notify(9),ip(n,e,e[Ut],2,null,null)}function dO(n){let e=n[hl];if(!e)return m_(n[Fe],n);for(;e;){let t=null;if(bo(e))t=e[hl];else{let r=e[or];r&&(t=r)}if(!t){for(;e&&!e[Ir]&&e!==n;)bo(e)&&m_(e[Fe],e),e=e[xn];e===null&&(e=n),bo(e)&&m_(e[Fe],e),t=e&&e[Ir]}e=t}}function hO(n,e,t,r){let i=or+r,o=t.length;r>0&&(t[i-1][Ir]=e),r<o-or?(e[Ir]=t[i],BC(t,or+r,e)):(t.push(e),e[Ir]=null),e[xn]=t;let a=e[ou];a!==null&&t!==a&&iD(a,e);let c=e[su];c!==null&&c.insertView(n),P_(e),e[Ie]|=128}function iD(n,e){let t=n[Tf],r=e[xn];if(bo(r))n[Ie]|=Df.HasTransplantedViews;else{let i=r[xn][Zr];e[Zr]!==i&&(n[Ie]|=Df.HasTransplantedViews)}t===null?n[Tf]=[e]:t.push(e)}function Lv(n,e){let t=n[Tf],r=t.indexOf(e);t.splice(r,1)}function z_(n,e){if(n.length<=or)return;let t=or+e,r=n[t];if(r){let i=r[ou];i!==null&&i!==n&&Lv(i,r),e>0&&(n[t-1][Ir]=r[Ir]);let o=wf(n,or+e);cO(r[Fe],r);let a=o[su];a!==null&&a.detachView(o[Fe]),r[xn]=null,r[Ir]=null,r[Ie]&=-129}return r}function oD(n,e){if(!(e[Ie]&256)){let t=e[Ut];t.destroyNode&&ip(n,e,t,3,null,null),dO(e)}}function m_(n,e){if(e[Ie]&256)return;let t=Ke(null);try{e[Ie]&=-129,e[Ie]|=256,e[ir]&&$g(e[ir]),pO(n,e),fO(n,e),e[Fe].type===1&&e[Ut].destroy();let r=e[ou];if(r!==null&&Ni(e[xn])){r!==e[xn]&&Lv(r,e);let i=e[su];i!==null&&i.detachView(n)}j_(e)}finally{Ke(t)}}function fO(n,e){let t=n.cleanup,r=e[bf];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[bf]=null);let i=e[Eo];if(i!==null){e[Eo]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}}function pO(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ps)){let o=t[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let c=i[o[a]],d=o[a+1];Hr(4,c,d);try{d.call(c)}finally{Hr(5,c,d)}}else{Hr(4,i,o);try{o.call(i)}finally{Hr(5,i,o)}}}}}function mO(n,e,t){return gO(n,e.parent,t)}function gO(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Ri];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Gr.None||o===Gr.Emulated)return null}return ar(r,t)}}function kf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function sD(n,e,t){n.appendChild(e,t)}function fC(n,e,t,r,i){r!==null?kf(n,e,t,r,i):sD(n,e,t)}function aD(n,e){return n.parentNode(e)}function _O(n,e){return n.nextSibling(e)}function vO(n,e,t){return wO(n,e,t)}function yO(n,e,t){return n.type&40?ar(n,t):null}var wO=yO,pC;function rp(n,e,t,r){let i=mO(n,r,e),o=e[Ut],a=r.parent||e[br],c=vO(a,r,e);if(i!=null)if(Array.isArray(t))for(let d=0;d<t.length;d++)fC(o,i,t[d],c,!1);else fC(o,i,t,c,!1);pC!==void 0&&pC(o,r,e,t,i)}function al(n,e){if(e!==null){let t=e.type;if(t&3)return ar(e,n);if(t&4)return H_(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return al(n,r);{let i=n[e.index];return Ni(i)?H_(-1,i):Kr(i)}}else{if(t&128)return al(n,e.next);if(t&32)return Ov(e,n)()||Kr(n[e.index]);{let r=uD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=xs(n[Zr]);return al(i,r)}else return al(n,e.next)}}}return null}function uD(n,e){if(e!==null){let r=n[Zr][br],i=e.projection;return r.projection[i]}return null}function H_(n,e){let t=or+n+1;if(t<e.length){let r=e[t],i=r[Fe].firstChild;if(i!==null)return al(r,i)}return e[As]}function IO(n,e,t){n.removeChild(null,e,t)}function Fv(n,e,t,r,i,o,a){for(;t!=null;){if(t.type===128){t=t.next;continue}let c=r[t.index],d=t.type;if(a&&e===0&&(c&&So(Kr(c),r),t.flags|=2),(t.flags&32)!==32)if(d&8)Fv(n,e,t.child,r,i,o,!1),Qa(e,n,i,c,o);else if(d&32){let f=Ov(t,r),g;for(;g=f();)Qa(e,n,i,g,o);Qa(e,n,i,c,o)}else d&16?EO(n,e,r,t,i,o):Qa(e,n,i,c,o);t=a?t.projectionNext:t.next}}function ip(n,e,t,r,i,o){Fv(t,r,n.firstChild,e,i,o,!1)}function EO(n,e,t,r,i,o){let a=t[Zr],d=a[br].projection[r.projection];if(Array.isArray(d))for(let f=0;f<d.length;f++){let g=d[f];Qa(e,n,i,g,o)}else{let f=d,g=a[xn];qT(r)&&(f.flags|=128),Fv(n,e,f,g,i,o,!0)}}function bO(n,e,t,r,i){let o=t[As],a=Kr(t);o!==a&&Qa(e,n,r,o,i);for(let c=or;c<t.length;c++){let d=t[c];ip(d[Fe],d,n,e,r,o)}}function CO(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Mi.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Mi.Important),n.setStyle(t,r,i,o))}}function TO(n,e,t){n.setAttribute(e,"style",t)}function cD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function lD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&T_(n,e,r),i!==null&&cD(n,e,i),o!==null&&TO(n,e,o)}var Oi={};function G(n=1){dD(fn(),Xe(),Os()+n,!1)}function dD(n,e,t,r){if(!r)if((e[Ie]&3)===3){let o=n.preOrderCheckHooks;o!==null&&pf(e,o,t)}else{let o=n.preOrderHooks;o!==null&&mf(e,o,0,t)}Ms(t)}function J(n,e=ke.Default){let t=Xe();if(t===null)return ge(n,e);let r=pn();return VT(r,t,Sn(n),e)}function hD(){let n="invalid";throw new Error(n)}function fD(n,e,t,r,i,o){let a=Ke(null);try{let c=null;i&Co.SignalBased&&(c=e[r][Ai]),c!==null&&c.transformFn!==void 0&&(o=c.transformFn(o)),i&Co.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,c,o,t,r):oT(e,c,r,o)}finally{Ke(a)}}function DO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ms(~i);else{let o=i,a=t[++r],c=t[++r];sk(a,o);let d=e[o];c(2,d)}}}finally{Ms(-1)}}function op(n,e,t,r,i,o,a,c,d,f,g){let y=e.blueprint.slice();return y[Ri]=i,y[Ie]=r|4|128|8|64,(f!==null||n&&n[Ie]&2048)&&(y[Ie]|=2048),fT(y),y[xn]=y[pu]=n,y[Er]=t,y[Wr]=a||n&&n[Wr],y[Ut]=c||n&&n[Ut],y[iu]=d||n&&n[iu]||null,y[br]=o,y[Gf]=Uk(),y[Ef]=g,y[rT]=f,y[Zr]=e.type==2?n[Zr]:y,y}function vl(n,e,t,r,i){let o=n.data[e];if(o===null)o=SO(n,e,t,r,i),ok()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let a=tk();o.injectorIndex=a===null?-1:a.injectorIndex}return ks(o,!0),o}function SO(n,e,t,r,i){let o=vT(),a=wv(),c=a?o:o&&o.parent,d=n.data[e]=RO(n,c,t,e,r,i);return n.firstChild===null&&(n.firstChild=d),o!==null&&(a?o.child==null&&d.parent!==null&&(o.child=d):o.next===null&&(o.next=d,d.prev=o)),d}function pD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function mD(n,e,t,r,i){let o=Os(),a=r&2;try{Ms(-1),a&&e.length>sr&&dD(n,e,sr,!1),Hr(a?2:0,i),t(r,i)}finally{Ms(o),Hr(a?3:1,i)}}function Vv(n,e,t){if(vv(e)){let r=Ke(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let a=i;a<o;a++){let c=n.data[a];if(c.contentQueries){let d=t[a];c.contentQueries(1,d,a)}}}finally{Ke(r)}}}function Bv(n,e,t){_T()&&(VO(n,e,t,ar(t,e)),(t.flags&64)===64&&yD(n,e,t))}function Uv(n,e,t=ar){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let a=r[o+1],c=a===-1?t(e,n):n[a];n[i++]=c}}}function gD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=jv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function jv(n,e,t,r,i,o,a,c,d,f,g){let y=sr+r,E=y+i,C=AO(y,E),F=typeof f=="function"?f():f;return C[Fe]={type:n,blueprint:C,template:t,queries:null,viewQuery:c,declTNode:e,data:C.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:d,consts:F,incompleteFirstPass:!1,ssrId:g}}function AO(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Oi);return t}function xO(n,e,t,r){let o=r.get(Wk,YT)||t===Gr.ShadowDom,a=n.selectRootElement(e,o);return MO(a),a}function MO(n){PO(n)}var PO=()=>null;function RO(n,e,t,r,i,o){let a=e?e.injectorIndex:-1,c=0;return J1()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function mC(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let a=e[o];if(a===void 0)continue;r??={};let c,d=Co.None;Array.isArray(a)?(c=a[0],d=a[1]):c=a;let f=o;if(i!==null){if(!i.hasOwnProperty(o))continue;f=i[o]}n===0?gC(r,t,f,c,d):gC(r,t,f,c)}return r}function gC(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function NO(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,a=e.attrs,c=[],d=null,f=null;for(let g=r;g<i;g++){let y=o[g],E=t?t.get(y):null,C=E?E.inputs:null,F=E?E.outputs:null;d=mC(0,y.inputs,g,d,C),f=mC(1,y.outputs,g,f,F);let z=d!==null&&a!==null&&!mv(e)?KO(d,g,a):null;c.push(z)}d!==null&&(d.hasOwnProperty("class")&&(e.flags|=8),d.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=d,e.outputs=f}function kO(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function _D(n,e,t,r,i,o,a,c){let d=ar(e,t),f=e.inputs,g;!c&&f!=null&&(g=f[r])?(zv(n,t,g,r,i),Wf(e)&&OO(t,e.index)):e.type&3?(r=kO(r),i=a!=null?a(i,e.value||"",r):i,o.setProperty(d,r,i)):e.type&12}function OO(n,e){let t=No(e,n);t[Ie]&16||(t[Ie]|=64)}function $v(n,e,t,r){if(_T()){let i=r===null?null:{"":-1},o=UO(n,t),a,c;o===null?a=c=null:[a,c]=o,a!==null&&vD(n,e,t,a,i,c),i&&jO(t,r,i)}t.mergedAttrs=ll(t.mergedAttrs,t.attrs)}function vD(n,e,t,r,i,o){for(let f=0;f<r.length;f++)O_(Mf(t,e),n,r[f].type);zO(t,n.data.length,r.length);for(let f=0;f<r.length;f++){let g=r[f];g.providersResolver&&g.providersResolver(g)}let a=!1,c=!1,d=pD(n,e,r.length,null);for(let f=0;f<r.length;f++){let g=r[f];t.mergedAttrs=ll(t.mergedAttrs,g.hostAttrs),HO(n,t,e,d,g),$O(d,g,i),g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let y=g.type.prototype;!a&&(y.ngOnChanges||y.ngOnInit||y.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),a=!0),!c&&(y.ngOnChanges||y.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),c=!0),d++}NO(n,t,o)}function LO(n,e,t,r,i){let o=i.hostBindings;if(o){let a=n.hostBindingOpCodes;a===null&&(a=n.hostBindingOpCodes=[]);let c=~e.index;FO(a)!=c&&a.push(c),a.push(t,r,o)}}function FO(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function VO(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Wf(t)&&qO(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Mf(t,e),So(r,e);let a=t.initialInputs;for(let c=i;c<o;c++){let d=n.data[c],f=uu(e,n,c,t);if(So(f,e),a!==null&&ZO(e,c-i,f,d,t,a),Do(d)){let g=No(t.index,e);g[Er]=uu(e,n,c,t)}}}function yD(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,a=ak();try{Ms(o);for(let c=r;c<i;c++){let d=n.data[c],f=e[c];R_(c),(d.hostBindings!==null||d.hostVars!==0||d.hostAttrs!==null)&&BO(d,f)}}finally{Ms(-1),R_(a)}}function BO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function UO(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let a=t[o];if(w1(e,a.selectors,!1))if(r||(r=[]),Do(a))if(a.findHostDirectiveDefs!==null){let c=[];i=i||new Map,a.findHostDirectiveDefs(a,c,i),r.unshift(...c,a);let d=c.length;q_(n,e,d)}else r.unshift(a),q_(n,e,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return r===null?null:[r,i]}function q_(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function jO(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new se(-301,!1);r.push(e[i],o)}}}function $O(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Do(e)&&(t[""]=n)}}function zO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function HO(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Ss(i.type,!0)),a=new Ps(o,Do(i),J);n.blueprint[r]=a,t[r]=a,LO(n,e,r,pD(n,t,i.hostVars,Oi),i)}function qO(n,e,t){let r=ar(e,n),i=gD(t),o=n[Wr].rendererFactory,a=16;t.signals?a=4096:t.onPush&&(a=64);let c=sp(n,op(n,i,null,a,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=c}function GO(n,e,t,r,i,o){let a=ar(n,e);WO(e[Ut],a,o,n.value,t,r,i)}function WO(n,e,t,r,i,o,a){if(o==null)n.removeAttribute(e,i,t);else{let c=a==null?eu(o):a(o,r||"",i);n.setAttribute(e,i,c,t)}}function ZO(n,e,t,r,i,o){let a=o[e];if(a!==null)for(let c=0;c<a.length;){let d=a[c++],f=a[c++],g=a[c++],y=a[c++];fD(r,t,d,f,g,y)}}function KO(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let a=n[o];for(let c=0;c<a.length;c+=3)if(a[c]===e){r.push(o,a[c+1],a[c+2],t[i+1]);break}}i+=2}return r}function wD(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function ID(n,e){let t=n.contentQueries;if(t!==null){let r=Ke(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],a=t[i+1];if(a!==-1){let c=n.data[a];ET(o),c.contentQueries(2,e[a],a)}}}finally{Ke(r)}}}function sp(n,e){return n[hl]?n[tC][Ir]=e:n[hl]=e,n[tC]=e,e}function G_(n,e,t){ET(0);let r=Ke(null);try{e(n,t)}finally{Ke(r)}}function QO(n){return n[bf]??=[]}function YO(n){return n.cleanup??=[]}function ED(n,e){let t=n[iu],r=t?t.get(xi,null):null;r&&r.handleError(e)}function zv(n,e,t,r,i){for(let o=0;o<t.length;){let a=t[o++],c=t[o++],d=t[o++],f=e[a],g=n.data[a];fD(g,f,r,c,d,i)}}function bD(n,e,t){let r=lT(e,n);aO(n[Ut],r,t)}function JO(n,e){let t=No(e,n),r=t[Fe];XO(r,t);let i=t[Ri];i!==null&&t[Ef]===null&&(t[Ef]=Nv(i,t[iu])),Hv(r,t,t[Er])}function XO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Hv(n,e,t){Ev(e);try{let r=n.viewQuery;r!==null&&G_(1,r,t);let i=n.template;i!==null&&mD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[su]?.finishViewCreation(n),n.staticContentQueries&&ID(n,e),n.staticViewQueries&&G_(2,n.viewQuery,t);let o=n.components;o!==null&&eL(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ie]&=-5,bv()}}function eL(n,e){for(let t=0;t<e.length;t++)JO(n,e[t])}function tL(n,e,t,r){let i=Ke(null);try{let o=e.tView,c=n[Ie]&4096?4096:16,d=op(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),f=n[e.index];d[ou]=f;let g=n[su];return g!==null&&(d[su]=g.createEmbeddedView(o)),Hv(o,d,t),d}finally{Ke(i)}}function _C(n,e){return!e||e.firstChild===null||qT(n)}function nL(n,e,t,r=!0){let i=e[Fe];if(hO(i,e,n,t),r){let a=H_(t,n),c=e[Ut],d=aD(c,n[As]);d!==null&&lO(i,n[br],c,e,d,a)}let o=e[Ef];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Of(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Kr(o)),Ni(o)&&rL(o,r);let a=t.type;if(a&8)Of(n,e,t.child,r);else if(a&32){let c=Ov(t,e),d;for(;d=c();)r.push(d)}else if(a&16){let c=uD(e,t);if(Array.isArray(c))r.push(...c);else{let d=xs(e[Zr]);Of(d[Fe],d,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function rL(n,e){for(let t=or;t<n.length;t++){let r=n[t],i=r[Fe].firstChild;i!==null&&Of(r[Fe],r,i,e)}n[As]!==n[Ri]&&e.push(n[As])}var CD=[];function iL(n){return n[ir]??oL(n)}function oL(n){let e=CD.pop()??Object.create(aL);return e.lView=n,e}function sL(n){n.lView[ir]!==n&&(n.lView=null,CD.push(n))}var aL=Re(Y({},rl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Qf(n.lView)},consumerOnSignalRead(){this.lView[ir]=this}});function uL(n){let e=n[ir]??Object.create(cL);return e.lView=n,e}var cL=Re(Y({},rl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=xs(n.lView);for(;e&&!TD(e[Fe]);)e=xs(e);e&&pT(e)},consumerOnSignalRead(){this.lView[ir]=this}});function TD(n){return n.type!==2}var lL=100;function DD(n,e=!0,t=0){let r=n[Wr],i=r.rendererFactory,o=!1;o||i.begin?.();try{dL(n,t)}catch(a){throw e&&ED(n,a),a}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function dL(n,e){let t=wT();try{rC(!0),W_(n,e);let r=0;for(;Kf(n);){if(r===lL)throw new se(103,!1);r++,W_(n,1)}}finally{rC(t)}}function hL(n,e,t,r){let i=e[Ie];if((i&256)===256)return;let o=!1,a=!1;!o&&e[Wr].inlineEffectRunner?.flush(),Ev(e);let c=!0,d=null,f=null;o||(TD(n)?(f=iL(e),d=Ph(f)):ab()===null?(c=!1,f=uL(e),d=Ph(f)):e[ir]&&($g(e[ir]),e[ir]=null));try{fT(e),ik(n.bindingStartIndex),t!==null&&mD(n,e,t,2,r);let g=(i&3)===3;if(!o)if(g){let C=n.preOrderCheckHooks;C!==null&&pf(e,C,null)}else{let C=n.preOrderHooks;C!==null&&mf(e,C,0,null),d_(e,0)}if(a||fL(e),SD(e,0),n.contentQueries!==null&&ID(n,e),!o)if(g){let C=n.contentCheckHooks;C!==null&&pf(e,C)}else{let C=n.contentHooks;C!==null&&mf(e,C,1),d_(e,1)}DO(n,e);let y=n.components;y!==null&&xD(e,y,0);let E=n.viewQuery;if(E!==null&&G_(2,E,r),!o)if(g){let C=n.viewCheckHooks;C!==null&&pf(e,C)}else{let C=n.viewHooks;C!==null&&mf(e,C,2),d_(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[l_]){for(let C of e[l_])C();e[l_]=null}o||(e[Ie]&=-73)}catch(g){throw o||Qf(e),g}finally{f!==null&&(Ug(f,d),c&&sL(f)),bv()}}function SD(n,e){for(let t=WT(n);t!==null;t=ZT(t))for(let r=or;r<t.length;r++){let i=t[r];AD(i,e)}}function fL(n){for(let e=WT(n);e!==null;e=ZT(e)){if(!(e[Ie]&Df.HasTransplantedViews))continue;let t=e[Tf];for(let r=0;r<t.length;r++){let i=t[r];pT(i)}}}function pL(n,e,t){let r=No(e,n);AD(r,t)}function AD(n,e){yv(n)&&W_(n,e)}function W_(n,e){let r=n[Fe],i=n[Ie],o=n[ir],a=!!(e===0&&i&16);if(a||=!!(i&64&&e===0),a||=!!(i&1024),a||=!!(o?.dirty&&jg(o)),a||=!1,o&&(o.dirty=!1),n[Ie]&=-9217,a)hL(r,n,r.template,n[Er]);else if(i&8192){SD(n,1);let c=r.components;c!==null&&xD(n,c,1)}}function xD(n,e,t){for(let r=0;r<e.length;r++)pL(n,e[r],t)}function qv(n,e){let t=wT()?64:1088;for(n[Wr].changeDetectionScheduler?.notify(e);n;){n[Ie]|=t;let r=xs(n);if(x_(n)&&!r)return n;n=r}return null}var Rs=class{get rootNodes(){let e=this._lView,t=e[Fe];return Of(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Er]}set context(e){this._lView[Er]=e}get destroyed(){return(this._lView[Ie]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[xn];if(Ni(e)){let t=e[Cf],r=t?t.indexOf(this):-1;r>-1&&(z_(e,r),wf(t,r))}this._attachedToViewContainer=!1}oD(this._lView[Fe],this._lView)}onDestroy(e){mT(this._lView,e)}markForCheck(){qv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ie]&=-129}reattach(){P_(this._lView),this._lView[Ie]|=128}detectChanges(){this._lView[Ie]|=1024,DD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=x_(this._lView),t=this._lView[ou];t!==null&&!e&&Lv(t,this._lView),rD(this._lView[Fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=e;let t=x_(this._lView),r=this._lView[ou];r!==null&&!t&&iD(r,this._lView),P_(this._lView)}},ap=(()=>{class n{static{this.__NG_ELEMENT_ID__=_L}}return n})(),mL=ap,gL=class extends mL{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=tL(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Rs(i)}};function _L(){return MD(pn(),Xe())}function MD(n,e){return n.type&4?new gL(e,n,tp(n,e)):null}var O8=new RegExp(`^(\\d+)*(${qk}|${Hk})*(.*)`);var vL=()=>null;function vC(n,e){return vL(n,e)}var cu=class{},up=new ae("",{providedIn:"root",factory:()=>!1});var PD=new ae(""),RD=new ae(""),Z_=class{},Lf=class{};function yL(n){let e=Error(`No component factory found for ${An(n)}.`);return e[wL]=n,e}var wL="ngComponent";var K_=class{resolveComponentFactory(e){throw yL(e)}},lu=class{static{this.NULL=new K_}},du=class{},ei=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>IL()}}return n})();function IL(){let n=Xe(),e=pn(),t=No(e.index,n);return(bo(t)?t:n)[Ut]}var EL=(()=>{class n{static{this.\u0275prov=ie({token:n,providedIn:"root",factory:()=>null})}}return n})();function Ff(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number")o=c;else if(o==1)i=qb(i,c);else if(o==2){let d=c,f=e[++a];r=qb(r,d+": "+f+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Vf=class extends lu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=To(e);return new hu(t,this.ngModule)}};function yC(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),a=o?i[0]:i,c=o?i[1]:Co.None;e?t.push({propName:a,templateName:r,isSignal:(c&Co.SignalBased)!==0}):t.push({propName:a,templateName:r})}return t}function bL(n){let e=n.toLowerCase();return e==="svg"?cT:e==="math"?q1:null}var hu=class extends Lf{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=yC(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return yC(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=C1(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Ke(null);try{i=i||this.ngModule;let a=i instanceof Gn?i:i?.injector;a&&this.componentDef.getStandaloneInjector!==null&&(a=this.componentDef.getStandaloneInjector(a)||a);let c=a?new N_(e,a):e,d=c.get(du,null);if(d===null)throw new se(407,!1);let f=c.get(EL,null),g=c.get(cu,null),y={rendererFactory:d,sanitizer:f,inlineEffectRunner:null,changeDetectionScheduler:g},E=d.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",F=r?xO(E,r,this.componentDef.encapsulation,c):nD(E,C,bL(C)),z=512;this.componentDef.signals?z|=4096:this.componentDef.onPush||(z|=16);let $=null;F!==null&&($=Nv(F,c,!0));let Z=jv(0,null,null,1,0,null,null,null,null,null,null),te=op(null,Z,null,z,null,null,y,E,c,null,$);Ev(te);let oe,ce,ot=null;try{let he=this.componentDef,M,T=null;he.findHostDirectiveDefs?(M=[],T=new Map,he.findHostDirectiveDefs(he,M,T),M.push(he)):M=[he];let D=CL(te,F);ot=TL(D,F,he,M,te,y,E),ce=dT(Z,sr),F&&AL(E,he,F,r),t!==void 0&&xL(ce,this.ngContentSelectors,t),oe=SL(ot,he,M,T,te,[ML]),Hv(Z,te,null)}catch(he){throw ot!==null&&j_(ot),j_(te),he}finally{bv()}return new Q_(this.componentType,oe,tp(ce,te),te,ce)}finally{Ke(o)}}},Q_=class extends Z_{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Rs(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;zv(o[Fe],o,i,e,t),this.previousInputValues.set(e,t);let a=No(this._tNode.index,o);qv(a,1)}}get injector(){return new Ds(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function CL(n,e){let t=n[Fe],r=sr;return n[r]=e,vl(t,r,2,"#host",null)}function TL(n,e,t,r,i,o,a){let c=i[Fe];DL(r,n,e,a);let d=null;e!==null&&(d=Nv(e,i[iu]));let f=o.rendererFactory.createRenderer(e,t),g=16;t.signals?g=4096:t.onPush&&(g=64);let y=op(i,gD(t),null,g,i[n.index],n,o,f,null,null,d);return c.firstCreatePass&&q_(c,n,r.length-1),sp(i,y),i[n.index]=y}function DL(n,e,t,r){for(let i of n)e.mergedAttrs=ll(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Ff(e,e.mergedAttrs,!0),t!==null&&lD(r,t,e))}function SL(n,e,t,r,i,o){let a=pn(),c=i[Fe],d=ar(a,i);vD(c,i,a,t,null,r);for(let g=0;g<t.length;g++){let y=a.directiveStart+g,E=uu(i,c,y,a);So(E,i)}yD(c,i,a),d&&So(d,i);let f=uu(i,c,a.directiveStart+a.componentOffset,a);if(n[Er]=i[Er]=f,o!==null)for(let g of o)g(f,e);return Vv(c,a,i),f}function AL(n,e,t,r){if(r)T_(n,t,["ng-version","18.2.10"]);else{let{attrs:i,classes:o}=T1(e.selectors[0]);i&&T_(n,t,i),o&&o.length>0&&cD(n,t,o.join(" "))}}function xL(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function ML(){let n=pn();ep(Xe()[Fe],n)}var gu=(()=>{class n{static{this.__NG_ELEMENT_ID__=PL}}return n})();function PL(){let n=pn();return NL(n,Xe())}var RL=gu,ND=class extends RL{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return tp(this._hostTNode,this._hostLView)}get injector(){return new Ds(this._hostTNode,this._hostLView)}get parentInjector(){let e=Tv(this._hostTNode,this._hostLView);if(RT(e)){let t=Af(e,this._hostLView),r=Sf(e),i=t[Fe].data[r+8];return new Ds(i,t)}else return new Ds(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=wC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-or}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let a=vC(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,a);return this.insertImpl(c,i,_C(this._hostTNode,a)),c}createComponent(e,t,r,i,o){let a=e&&!j1(e),c;if(a)c=t;else{let F=t||{};c=F.index,r=F.injector,i=F.projectableNodes,o=F.environmentInjector||F.ngModuleRef}let d=a?e:new hu(To(e)),f=r||this.parentInjector;if(!o&&d.ngModule==null){let z=(a?f:this.parentInjector).get(Gn,null);z&&(o=z)}let g=To(d.componentType??{}),y=vC(this._lContainer,g?.id??null),E=y?.firstChild??null,C=d.create(f,i,E,o);return this.insertImpl(C.hostView,c,_C(this._hostTNode,y)),C}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(G1(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let d=i[xn],f=new ND(d,d[br],d[xn]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(t),a=this._lContainer;return nL(a,i,o,r),e.attachToViewContainerRef(),BC(g_(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=wC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=z_(this._lContainer,t);r&&(wf(g_(this._lContainer),t),oD(r[Fe],r))}detach(e){let t=this._adjustIndex(e,-1),r=z_(this._lContainer,t);return r&&wf(g_(this._lContainer),t)!=null?new Rs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function wC(n){return n[Cf]}function g_(n){return n[Cf]||(n[Cf]=[])}function NL(n,e){let t,r=e[n.index];return Ni(r)?t=r:(t=wD(r,e,null,n),e[n.index]=t,sp(e,t)),OL(t,e,n,r),new ND(t,n,e)}function kL(n,e){let t=n[Ut],r=t.createComment(""),i=ar(e,n),o=aD(t,i);return kf(t,o,r,_O(t,i),!1),r}var OL=VL,LL=()=>!1;function FL(n,e,t){return LL(n,e,t)}function VL(n,e,t,r){if(n[As])return;let i;t.type&8?i=Kr(r):i=kL(e,t),n[As]=i}var IC=new Set;function _u(n){IC.has(n)||(IC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function BL(n){return typeof n=="function"&&n[Ai]!==void 0}function yl(n,e){_u("NgSignals");let t=vb(n),r=t[Ai];return e?.equal&&(r.equal=e.equal),t.set=i=>zg(r,i),t.update=i=>yb(r,i),t.asReadonly=UL.bind(t),t}function UL(){let n=this[Ai];if(n.readonlyFn===void 0){let e=()=>this();e[Ai]=n,n.readonlyFn=e}return n.readonlyFn}function kD(n){return BL(n)&&typeof n.set=="function"}function jL(n){return Object.getPrototypeOf(n.prototype).constructor}function ur(n){let e=jL(n.type),t=!0,r=[n];for(;e;){let i;if(Do(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new se(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let a=n;a.inputs=lf(n.inputs),a.inputTransforms=lf(n.inputTransforms),a.declaredInputs=lf(n.declaredInputs),a.outputs=lf(n.outputs);let c=i.hostBindings;c&&GL(n,c);let d=i.viewQuery,f=i.contentQueries;if(d&&HL(n,d),f&&qL(n,f),$L(n,i),GN(n.outputs,i.outputs),Do(i)&&i.data.animation){let g=n.data;g.animation=(g.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let a=0;a<o.length;a++){let c=o[a];c&&c.ngInherit&&c(n),c===ur&&(t=!1)}}e=Object.getPrototypeOf(e)}zL(r)}function $L(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function zL(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ll(i.hostAttrs,t=ll(t,i.hostAttrs))}}function lf(n){return n===tu?{}:n===rr?[]:n}function HL(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function qL(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function GL(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Gv(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Ao=class{},fl=class{};var Y_=class extends Ao{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Vf(this);let o=KC(e);this._bootstrapComponents=tD(o.bootstrap),this._r3Injector=jT(e,t,[{provide:Ao,useValue:this},{provide:lu,useValue:this.componentFactoryResolver},...r],An(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},J_=class extends fl{constructor(e){super(),this.moduleType=e}create(e){return new Y_(this.moduleType,e,[])}};var Bf=class extends Ao{constructor(e){super(),this.componentFactoryResolver=new Vf(this),this.instance=null;let t=new dl([...e.providers,{provide:Ao,useValue:this},{provide:lu,useValue:this.componentFactoryResolver}],e.parent||_v(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function cp(n,e,t=null){return new Bf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function OD(n){return ZL(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function WL(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function ZL(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function LD(n,e,t){return n[e]=t}function xo(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function FD(n,e,t,r){let i=xo(n,e,t);return xo(n,e+1,r)||i}function KL(n){return(n.flags&32)===32}function QL(n,e,t,r,i,o,a,c,d){let f=e.consts,g=vl(e,n,4,a||null,c||null);$v(e,t,g,au(f,d)),ep(e,g);let y=g.tView=jv(2,g,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,f,null);return e.queries!==null&&(e.queries.template(e,g),y.queries=e.queries.embeddedTView(g)),g}function YL(n,e,t,r,i,o,a,c,d,f){let g=t+sr,y=e.firstCreatePass?QL(g,e,n,r,i,o,a,c,d):e.data[g];ks(y,!1);let E=JL(e,n,y,t);Jf()&&rp(e,n,E,y),So(E,n);let C=wD(E,n,E,y);return n[g]=C,sp(n,C),FL(C,y,n),Zf(y)&&Bv(e,n,y),d!=null&&Uv(n,y,f),y}function Ae(n,e,t,r,i,o,a,c){let d=Xe(),f=fn(),g=au(f.consts,o);return YL(d,f,n,e,t,r,i,g,a,c),Ae}var JL=XL;function XL(n,e,t,r){return Xf(!0),e[Ut].createComment("")}var Ya=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ya||{}),VD=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}}return n})(),X_=class n{constructor(){this.ngZone=W(et),this.scheduler=W(cu),this.errorHandler=W(xi,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Ya.EarlyRead,Ya.Write,Ya.MixedReadWrite,Ya.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}},ev=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Wv(n,e){!e?.injector&&U1(Wv);let t=e?.injector??W(un);return iO(t)?(_u("NgAfterNextRender"),tF(n,t,e,!0)):nF}function eF(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function tF(n,e,t,r){let i=e.get(VD);i.impl??=e.get(X_);let o=t?.phase??Ya.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(Sv):null,c=new ev(i.impl,eF(n,o),r,a);return i.impl.register(c),c}var nF={destroy(){}};function wl(n,e,t,r){let i=Xe(),o=Yf();if(xo(i,o,e)){let a=fn(),c=Cv();GO(c,i,n,e,t,r)}return wl}function rF(n,e,t,r){return xo(n,Yf(),t)?e+eu(t)+r:Oi}function iF(n,e,t,r,i,o){let a=rk(),c=FD(n,a,t,i);return IT(2),c?e+eu(t)+r+eu(i)+o:Oi}function df(n,e){return n<<17|e<<2}function Ns(n){return n>>17&32767}function oF(n){return(n&2)==2}function sF(n,e){return n&131071|e<<17}function tv(n){return n|2}function fu(n){return(n&131068)>>2}function __(n,e){return n&-131069|e<<2}function aF(n){return(n&1)===1}function nv(n){return n|1}function uF(n,e,t,r,i,o){let a=o?e.classBindings:e.styleBindings,c=Ns(a),d=fu(a);n[r]=t;let f=!1,g;if(Array.isArray(t)){let y=t;g=y[1],(g===null||gl(y,g)>0)&&(f=!0)}else g=t;if(i)if(d!==0){let E=Ns(n[c+1]);n[r+1]=df(E,c),E!==0&&(n[E+1]=__(n[E+1],r)),n[c+1]=sF(n[c+1],r)}else n[r+1]=df(c,0),c!==0&&(n[c+1]=__(n[c+1],r)),c=r;else n[r+1]=df(d,0),c===0?c=r:n[d+1]=__(n[d+1],r),d=r;f&&(n[r+1]=tv(n[r+1])),EC(n,g,r,!0),EC(n,g,r,!1),cF(e,g,n,r,o),a=df(c,d),o?e.classBindings=a:e.styleBindings=a}function cF(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&gl(o,e)>=0&&(t[r+1]=nv(t[r+1]))}function EC(n,e,t,r){let i=n[t+1],o=e===null,a=r?Ns(i):fu(i),c=!1;for(;a!==0&&(c===!1||o);){let d=n[a],f=n[a+1];lF(d,e)&&(c=!0,n[a+1]=r?nv(f):tv(f)),a=r?Ns(f):fu(f)}c&&(n[t+1]=r?tv(i):nv(i))}function lF(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?gl(n,e)>=0:!1}function ue(n,e,t){let r=Xe(),i=Yf();if(xo(r,i,e)){let o=fn(),a=Cv();_D(o,a,r,n,e,r[Ut],t,!1)}return ue}function bC(n,e,t,r,i){let o=e.inputs,a=i?"class":"style";zv(n,t,o[a],a,r)}function lp(n,e){return dF(n,e,null,!0),lp}function dF(n,e,t,r){let i=Xe(),o=fn(),a=IT(2);if(o.firstUpdatePass&&fF(o,n,a,r),e!==Oi&&xo(i,a,e)){let c=o.data[Os()];vF(o,c,i,i[Ut],n,i[a+1]=yF(e,t),r,a)}}function hF(n,e){return e>=n.expandoStartIndex}function fF(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Os()],a=hF(n,t);wF(o,r)&&e===null&&!a&&(e=!1),e=pF(i,o,e,r),uF(i,o,e,t,a,r)}}function pF(n,e,t,r){let i=uk(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=v_(null,n,e,t,r),t=pl(t,e.attrs,r),o=null);else{let a=e.directiveStylingLast;if(a===-1||n[a]!==i)if(t=v_(i,n,e,t,r),o===null){let d=mF(n,e,r);d!==void 0&&Array.isArray(d)&&(d=v_(null,n,e,d[1],r),d=pl(d,e.attrs,r),gF(n,e,r,d))}else o=_F(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function mF(n,e,t){let r=t?e.classBindings:e.styleBindings;if(fu(r)!==0)return n[Ns(r)]}function gF(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ns(i)]=r}function _F(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let a=n[o].hostAttrs;r=pl(r,a,t)}return pl(r,e.attrs,t)}function v_(n,e,t,r,i){let o=null,a=t.directiveEnd,c=t.directiveStylingLast;for(c===-1?c=t.directiveStart:c++;c<a&&(o=e[c],r=pl(r,o.hostAttrs,i),o!==n);)c++;return n!==null&&(t.directiveStylingLast=c),r}function pl(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?i=a:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),h1(n,a,t?!0:e[++o]))}return n===void 0?null:n}function vF(n,e,t,r,i,o,a,c){if(!(e.type&3))return;let d=n.data,f=d[c+1],g=aF(f)?CC(d,e,t,i,fu(f),a):void 0;if(!Uf(g)){Uf(o)||oF(f)&&(o=CC(d,null,t,i,c,a));let y=lT(Os(),t);CO(r,a,y,i,o)}}function CC(n,e,t,r,i,o){let a=e===null,c;for(;i>0;){let d=n[i],f=Array.isArray(d),g=f?d[1]:d,y=g===null,E=t[i+1];E===Oi&&(E=y?rr:void 0);let C=y?u_(E,r):g===r?E:void 0;if(f&&!Uf(C)&&(C=u_(d,r)),Uf(C)&&(c=C,a))return c;let F=n[i+1];i=a?Ns(F):fu(F)}if(e!==null){let d=o?e.residualClasses:e.residualStyles;d!=null&&(c=u_(d,r))}return c}function Uf(n){return n!==void 0}function yF(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=An(_l(n)))),n}function wF(n,e){return(n.flags&(e?8:16))!==0}function IF(n,e,t,r,i,o){let a=e.consts,c=au(a,i),d=vl(e,n,2,r,c);return $v(e,t,d,au(a,o)),d.attrs!==null&&Ff(d,d.attrs,!1),d.mergedAttrs!==null&&Ff(d,d.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,d),d}function V(n,e,t,r){let i=Xe(),o=fn(),a=sr+n,c=i[Ut],d=o.firstCreatePass?IF(a,o,i,e,t,r):o.data[a],f=EF(o,i,d,c,e,n);i[a]=f;let g=Zf(d);return ks(d,!0),lD(c,f,d),!KL(d)&&Jf()&&rp(o,i,f,d),K1()===0&&So(f,i),Q1(),g&&(Bv(o,i,d),Vv(o,d,i)),r!==null&&Uv(i,d),V}function P(){let n=pn();wv()?yT():(n=n.parent,ks(n,!1));let e=n;X1(e)&&ek(),Y1();let t=fn();return t.firstCreatePass&&(ep(t,n),vv(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&gk(e)&&bC(t,e,Xe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&_k(e)&&bC(t,e,Xe(),e.stylesWithoutHost,!1),P}function Pt(n,e,t,r){return V(n,e,t,r),P(),Pt}var EF=(n,e,t,r,i,o)=>(Xf(!0),nD(r,i,hk()));function bF(n,e,t,r,i){let o=e.consts,a=au(o,r),c=vl(e,n,8,"ng-container",a);a!==null&&Ff(c,a,!0);let d=au(o,i);return $v(e,t,c,d),e.queries!==null&&e.queries.elementStart(e,c),c}function Il(n,e,t){let r=Xe(),i=fn(),o=n+sr,a=i.firstCreatePass?bF(o,i,r,e,t):i.data[o];ks(a,!0);let c=CF(i,r,a,n);return r[o]=c,Jf()&&rp(i,r,c,a),So(c,r),Zf(a)&&(Bv(i,r,a),Vv(i,a,r)),t!=null&&Uv(r,a),Il}function El(){let n=pn(),e=fn();return wv()?yT():(n=n.parent,ks(n,!1)),e.firstCreatePass&&(ep(e,n),vv(n)&&e.queries.elementEnd(n)),El}var CF=(n,e,t,r)=>(Xf(!0),uO(e[Ut],""));function mt(){return Xe()}var jf="en-US";var TF=jf;function DF(n){typeof n=="string"&&(TF=n.toLowerCase().replace(/_/g,"-"))}var SF=(n,e,t)=>{};function $e(n,e,t,r){let i=Xe(),o=fn(),a=pn();return BD(o,i,i[Ut],a,n,e,r),$e}function AF(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let a=i[o];if(a===t&&i[o+1]===r){let c=e[bf],d=i[o+2];return c.length>d?c[d]:null}typeof a=="string"&&(o+=2)}return null}function BD(n,e,t,r,i,o,a){let c=Zf(r),f=n.firstCreatePass&&YO(n),g=e[Er],y=QO(e),E=!0;if(r.type&3||a){let z=ar(r,e),$=a?a(z):z,Z=y.length,te=a?ce=>a(Kr(ce[r.index])):r.index,oe=null;if(!a&&c&&(oe=AF(n,e,i,r.index)),oe!==null){let ce=oe.__ngLastListenerFn__||oe;ce.__ngNextListenerFn__=o,oe.__ngLastListenerFn__=o,E=!1}else{o=DC(r,e,g,o),SF(z,i,o);let ce=t.listen($,i,o);y.push(o,ce),f&&f.push(i,te,Z,Z+1)}}else o=DC(r,e,g,o);let C=r.outputs,F;if(E&&C!==null&&(F=C[i])){let z=F.length;if(z)for(let $=0;$<z;$+=2){let Z=F[$],te=F[$+1],ot=e[Z][te].subscribe(o),he=y.length;y.push(o,ot),f&&f.push(i,r.index,he,-(he+1))}}}function TC(n,e,t,r){let i=Ke(null);try{return Hr(6,e,t),t(r)!==!1}catch(o){return ED(n,o),!1}finally{Hr(7,e,t),Ke(i)}}function DC(n,e,t,r){return function i(o){if(o===Function)return r;let a=n.componentOffset>-1?No(n.index,e):e;qv(a,5);let c=TC(e,t,r,o),d=i.__ngNextListenerFn__;for(;d;)c=TC(e,t,d,o)&&c,d=d.__ngNextListenerFn__;return c}}function Le(n=1){return lk(n)}function xF(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Rt(n){let e=nk();return hT(e,sr+n)}function j(n,e=""){let t=Xe(),r=fn(),i=n+sr,o=r.firstCreatePass?vl(r,i,1,e,null):r.data[i],a=MF(r,t,o,e,n);t[i]=a,Jf()&&rp(r,t,a,o),ks(o,!1)}var MF=(n,e,t,r,i)=>(Xf(!0),sO(e[Ut],r));function ut(n){return mn("",n,""),ut}function mn(n,e,t){let r=Xe(),i=rF(r,n,e,t);return i!==Oi&&bD(r,Os(),i),mn}function bl(n,e,t,r,i){let o=Xe(),a=iF(o,n,e,t,r,i);return a!==Oi&&bD(o,Os(),a),bl}function bt(n,e,t){kD(e)&&(e=e());let r=Xe(),i=Yf();if(xo(r,i,e)){let o=fn(),a=Cv();_D(o,a,r,n,e,r[Ut],t,!1)}return bt}function St(n,e){let t=kD(n);return t&&n.set(e),t}function Ct(n,e){let t=Xe(),r=fn(),i=pn();return BD(r,t,t[Ut],i,n,e),Ct}function PF(n,e,t){let r=fn();if(r.firstCreatePass){let i=Do(n);rv(t,r.data,r.blueprint,i,!0),rv(e,r.data,r.blueprint,i,!1)}}function rv(n,e,t,r,i){if(n=Sn(n),Array.isArray(n))for(let o=0;o<n.length;o++)rv(n[o],e,t,r,i);else{let o=fn(),a=Xe(),c=pn(),d=ru(n)?n:Sn(n.provide),f=tT(n),g=c.providerIndexes&1048575,y=c.directiveStart,E=c.providerIndexes>>20;if(ru(n)||!n.multi){let C=new Ps(f,i,J),F=w_(d,e,i?g:g+E,y);F===-1?(O_(Mf(c,a),o,d),y_(o,n,e.length),e.push(d),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(C),a.push(C)):(t[F]=C,a[F]=C)}else{let C=w_(d,e,g+E,y),F=w_(d,e,g,g+E),z=C>=0&&t[C],$=F>=0&&t[F];if(i&&!$||!i&&!z){O_(Mf(c,a),o,d);let Z=kF(i?NF:RF,t.length,i,r,f);!i&&$&&(t[F].providerFactory=Z),y_(o,n,e.length,0),e.push(d),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(Z),a.push(Z)}else{let Z=UD(t[i?F:C],f,!i&&r);y_(o,n,C>-1?C:F,Z)}!i&&r&&$&&t[F].componentProviders++}}}function y_(n,e,t,r){let i=ru(e),o=N1(e);if(i||o){let d=(o?Sn(e.useClass):e).prototype.ngOnDestroy;if(d){let f=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let g=f.indexOf(t);g===-1?f.push(t,[r,d]):f[g+1].push(r,d)}else f.push(t,d)}}}function UD(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function w_(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function RF(n,e,t,r){return iv(this.multi,[])}function NF(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=uu(t,t[Fe],this.providerFactory.index,r);o=c.slice(0,a),iv(i,o);for(let d=a;d<c.length;d++)o.push(c[d])}else o=[],iv(i,o);return o}function iv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function kF(n,e,t,r,i){let o=new Ps(n,t,J);return o.multi=[],o.index=e,o.componentProviders=0,UD(o,i,r&&!t),o}function ko(n,e=[]){return t=>{t.providersResolver=(r,i)=>PF(r,i?i(n):n,e)}}var OF=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=JC(!1,t.type),i=r.length>0?cp([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=ie({token:n,providedIn:"environment",factory:()=>new n(ge(Gn))})}}return n})();function ft(n){_u("NgStandalone"),n.getStandaloneInjector=e=>e.get(OF).getOrCreateStandaloneInjector(n)}function vu(n,e,t,r){return zD(Xe(),Iv(),n,e,t,r)}function jD(n,e,t,r,i){return LF(Xe(),Iv(),n,e,t,r,i)}function $D(n,e){let t=n[e];return t===Oi?void 0:t}function zD(n,e,t,r,i,o){let a=e+t;return xo(n,a,i)?LD(n,a+1,o?r.call(o,i):r(i)):$D(n,a+1)}function LF(n,e,t,r,i,o,a){let c=e+t;return FD(n,c,i,o)?LD(n,c+2,a?r.call(a,i,o):r(i,o)):$D(n,c+2)}function yu(n,e){let t=fn(),r,i=n+sr;t.firstCreatePass?(r=FF(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Ss(r.type,!0)),a,c=On(J);try{let d=xf(!1),f=o();return xf(d),xF(t,Xe(),i,f),f}finally{On(c)}}function FF(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function wu(n,e,t){let r=n+sr,i=Xe(),o=hT(i,r);return VF(i,r)?zD(i,Iv(),e,o.transform,t,o):o.transform(t)}function VF(n,e){return n[Fe].data[e].pure}function Ls(n,e){return MD(n,e)}var Pi=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},HD=new Pi("18.2.10");var dp=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var qD=new ae("");function Oo(n){return!!n&&typeof n.then=="function"}function Zv(n){return!!n&&typeof n.subscribe=="function"}var hp=new ae(""),GD=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=W(hp,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Oo(o))t.push(o);else if(Zv(o)){let a=new Promise((c,d)=>{o.subscribe({complete:c,error:d})});t.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fp=new ae("");function BF(){_b(()=>{throw new se(600,!1)})}function UF(n){return n.isBoundToModule}var jF=10;function $F(n,e,t){try{let r=t();return Oo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Fs=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=W(Fk),this.afterRenderManager=W(VD),this.zonelessEnabled=W(up),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Jt,this.afterTick=new Jt,this.componentTypes=[],this.components=[],this.isStable=W(mu).hasPendingTasks.pipe(me(t=>!t)),this._injector=W(Gn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Lf;if(!this._injector.get(GD).done){let E=!i&&ZC(t),C=!1;throw new se(405,C)}let a;i?a=t:a=this._injector.get(lu).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=UF(a)?void 0:this._injector.get(Ao),d=r||a.selector,f=a.create(un.NULL,[],d,c),g=f.location.nativeElement,y=f.injector.get(qD,null);return y?.registerApplication(g),f.onDestroy(()=>{this.detachView(f.hostView),gf(this.components,f),y?.unregisterApplication(g)}),this._loadComponent(f),f}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new se(101,!1);let t=Ke(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ke(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(du,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<jF;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)zF(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Kf(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;gf(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(fp,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>gf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new se(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function gf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function zF(n,e,t,r){if(!t&&!Kf(n))return;DD(n,e,t&&!r?0:1)}var ov=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},pp=(()=>{class n{compileModuleSync(t){return new J_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=KC(t),o=tD(i.declarations).reduce((a,c)=>{let d=To(c);return d&&a.push(new hu(d)),a},[]);return new ov(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var HF=(()=>{class n{constructor(){this.zone=W(et),this.changeDetectionScheduler=W(cu),this.applicationRef=W(Fs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qF=new ae("",{factory:()=>!1});function WD({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new et(Re(Y({},KD()),{scheduleInRootZone:t})),[{provide:et,useFactory:n},{provide:nu,multi:!0,useFactory:()=>{let r=W(HF,{optional:!0});return()=>r.initialize()}},{provide:nu,multi:!0,useFactory:()=>{let r=W(GF);return()=>{r.initialize()}}},e===!0?{provide:PD,useValue:!0}:[],{provide:RD,useValue:t??$T}]}function ZD(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=WD({ngZoneFactory:()=>{let i=KD(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&_u("NgZone_CoalesceEvent"),new et(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Yr([{provide:qF,useValue:!0},{provide:up,useValue:!1},r])}function KD(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var GF=(()=>{class n{constructor(){this.subscription=new Dt,this.initialized=!1,this.zone=W(et),this.pendingTasks=W(mu)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{et.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{et.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var WF=(()=>{class n{constructor(){this.appRef=W(Fs),this.taskService=W(mu),this.ngZone=W(et),this.zonelessEnabled=W(up),this.disableScheduling=W(PD,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Dt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Rf):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(W(RD,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof U_||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?uC:zT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Rf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,uC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ZF(){return typeof $localize<"u"&&$localize.locale||jf}var Kv=new ae("",{providedIn:"root",factory:()=>W(Kv,ke.Optional|ke.SkipSelf)||ZF()});var sv=new ae("");function hf(n){return!n.moduleRef}function KF(n){let e=hf(n)?n.r3Injector:n.moduleRef.injector,t=e.get(et);return t.run(()=>{hf(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(xi,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),hf(n)){let o=()=>e.destroy(),a=n.platformInjector.get(sv);a.add(o),e.onDestroy(()=>{i.unsubscribe(),a.delete(o)})}else{let o=()=>n.moduleRef.destroy(),a=n.platformInjector.get(sv);a.add(o),n.moduleRef.onDestroy(()=>{gf(n.allPlatformModules,n.moduleRef),i.unsubscribe(),a.delete(o)})}return $F(r,t,()=>{let o=e.get(GD);return o.runInitializers(),o.donePromise.then(()=>{let a=e.get(Kv,jf);if(DF(a||jf),hf(n)){let c=e.get(Fs);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return QF(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function QF(n,e){let t=n.injector.get(Fs);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new se(-403,!1);e.push(n)}var _f=null;function YF(n=[],e){return un.create({name:e,providers:[{provide:qf,useValue:"platform"},{provide:sv,useValue:new Set([()=>_f=null])},...n]})}function JF(n=[]){if(_f)return _f;let e=YF(n);return _f=e,BF(),XF(e),e}function XF(n){n.get(Pv,null)?.forEach(t=>t())}var Lo=(()=>{class n{static{this.__NG_ELEMENT_ID__=eV}}return n})();function eV(n){return tV(pn(),Xe(),(n&16)===16)}function tV(n,e,t){if(Wf(n)&&!t){let r=No(n.index,e);return new Rs(r,r)}else if(n.type&175){let r=e[Zr];return new Rs(r,e)}return null}var av=class{constructor(){}supports(e){return OD(e)}create(e){return new uv(e)}},nV=(n,e)=>e,uv=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||nV}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let a=!r||t&&t.currentIndex<SC(r,i,o)?t:r,c=SC(a,i,o),d=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(t=t._next,a.previousIndex==null)i++;else{o||(o=[]);let f=c-i,g=d-i;if(f!=g){for(let E=0;E<f;E++){let C=E<o.length?o[E]:o[E]=0,F=C+E;g<=F&&F<f&&(o[E]=C+1)}let y=a.previousIndex;o[y]=g-f}}c!==d&&e(a,c,d)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!OD(e))throw new se(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,a;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],a=this._trackByFn(c,o),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,o,a,c),r=!0):(r&&(t=this._verifyReinsertion(t,o,a,c)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,WL(e,c=>{a=this._trackByFn(i,c),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,c,a,i),r=!0):(r&&(t=this._verifyReinsertion(t,c,a,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new cv(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new $f),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new $f),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},cv=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},lv=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},$f=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new lv,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function SC(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function AC(){return new Qv([new av])}var Qv=(()=>{class n{static{this.\u0275prov=ie({token:n,providedIn:"root",factory:AC})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||AC()),deps:[[n,new fv,new hn]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new se(901,!1)}}return n})();function QD(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=JF(r),o=[WD({}),{provide:cu,useExisting:WF},...t||[]],a=new Bf({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return KF({r3Injector:a.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Fo(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Cl(n,e){_u("NgSignals");let t=pb(n);return e?.equal&&(t[Ai].equal=e.equal),t}function Tr(n){let e=Ke(null);try{return n()}finally{Ke(e)}}function YD(n){let e=To(n);if(!e)return null;let t=new hu(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var rS=null;function Fi(){return rS}function iS(n){rS??=n}var mp=class{};var Ln=new ae(""),iy=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:()=>W(rV),providedIn:"platform"})}}return n})(),oS=new ae(""),rV=(()=>{class n extends iy{constructor(){super(),this._doc=W(Ln),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fi().getBaseHref(this._doc)}onPopState(t){let r=Fi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Fi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function oy(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function JD(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Li(n){return n&&n[0]!=="?"?"?"+n:n}var Vi=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:()=>W(sy),providedIn:"root"})}}return n})(),sS=new ae(""),sy=(()=>{class n extends Vi{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??W(Ln).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return oy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Li(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let a=this.prepareExternalUrl(i+Li(o));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){let a=this.prepareExternalUrl(i+Li(o));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ge(iy),ge(sS,8))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),aS=(()=>{class n extends Vi{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=oy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let a=this.prepareExternalUrl(i+Li(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){let a=this.prepareExternalUrl(i+Li(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ge(iy),ge(sS,8))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),Iu=(()=>{class n{constructor(t){this._subject=new Bt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=sV(JD(XD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Li(r))}normalize(t){return n.stripTrailingSlash(oV(this._basePath,XD(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Li(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Li(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Li}static{this.joinWithSlash=oy}static{this.stripTrailingSlash=JD}static{this.\u0275fac=function(r){return new(r||n)(ge(Vi))}}static{this.\u0275prov=ie({token:n,factory:()=>iV(),providedIn:"root"})}}return n})();function iV(){return new Iu(ge(Vi))}function oV(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function XD(n){return n.replace(/\/index.html$/,"")}function sV(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function uS(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Yv=/\s+/,eS=[],_p=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=eS,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(Yv):eS}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Yv):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Yv).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(J(Cr),J(ei))}}static{this.\u0275dir=Et({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Jv=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ti=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,a)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Jv(i.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,a),tS(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);tS(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(J(gu),J(ap),J(Qv))}}static{this.\u0275dir=Et({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function tS(n,e){n.context.$implicit=e.item}var gn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Xv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){nS("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){nS("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(J(gu),J(ap))}}static{this.\u0275dir=Et({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Xv=class{constructor(){this.$implicit=null,this.ngIf=null}};function nS(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${An(e)}'.`)}function aV(n,e){return new se(2100,!1)}var ey=class{createSubscription(e,t){return Tr(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Tr(()=>e.unsubscribe())}},ty=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},uV=new ty,cV=new ey,vp=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Oo(t))return uV;if(Zv(t))return cV;throw aV(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(J(Lo,16))}}static{this.\u0275pipe=qC({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var Dr=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Po({type:n})}static{this.\u0275inj=Mo({})}}return n})(),ay="browser",lV="server";function dV(n){return n===ay}function uy(n){return n===lV}var cS=(()=>{class n{static{this.\u0275prov=ie({token:n,providedIn:"root",factory:()=>dV(W(Xr))?new ny(W(Ln),window):new ry})}}return n})(),ny=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=hV(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function hV(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let a=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(a)return a}i=r.nextNode()}}return null}var ry=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},gp=class{};var dy=class extends mp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},hy=class n extends dy{static makeCurrent(){iS(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=fV();return t==null?null:pV(t)}resetBaseElement(){Dl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return uS(document.cookie,e)}},Dl=null;function fV(){return Dl=Dl||document.querySelector("base"),Dl?Dl.getAttribute("href"):null}function pV(n){return new URL(n,document.baseURI).pathname}var mV=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),fy=new ae(""),fS=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new se(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(ge(fy),ge(et))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),yp=class{constructor(e){this._doc=e}},cy="ng-app-id",pS=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=uy(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${cy}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(cy),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(cy,this.appId),t.appendChild(a),a}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(ge(Ln),ge(Mv),ge(Rv,8),ge(Xr))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),ly={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},my=/%COMP%/g,mS="%COMP%",gV=`_nghost-${mS}`,_V=`_ngcontent-${mS}`,vV=!0,yV=new ae("",{providedIn:"root",factory:()=>vV});function wV(n){return _V.replace(my,n)}function IV(n){return gV.replace(my,n)}function gS(n,e){return e.map(t=>t.replace(my,n))}var lS=(()=>{class n{constructor(t,r,i,o,a,c,d,f=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=d,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=uy(c),this.defaultRenderer=new Sl(t,a,d,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Gr.ShadowDom&&(r=Re(Y({},r),{encapsulation:Gr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof wp?i.applyToHost(t):i instanceof Al&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let a=this.doc,c=this.ngZone,d=this.eventManager,f=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,y=this.platformIsServer;switch(r.encapsulation){case Gr.Emulated:o=new wp(d,f,r,this.appId,g,a,c,y);break;case Gr.ShadowDom:return new py(d,f,t,r,a,c,this.nonce,y);default:o=new Al(d,f,r,g,a,c,y);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(ge(fS),ge(pS),ge(Mv),ge(yV),ge(Ln),ge(Xr),ge(et),ge(Rv))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),Sl=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(ly[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(dS(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(dS(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new se(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=ly[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=ly[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Mi.DashCase|Mi.Important)?e.style.setProperty(t,r,i&Mi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Mi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Fi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function dS(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var py=class extends Sl{constructor(e,t,r,i,o,a,c,d){super(e,o,a,d),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=gS(i.id,i.styles);for(let g of f){let y=document.createElement("style");c&&y.setAttribute("nonce",c),y.textContent=g,this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Al=class extends Sl{constructor(e,t,r,i,o,a,c,d){super(e,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=d?gS(d,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},wp=class extends Al{constructor(e,t,r,i,o,a,c,d){let f=i+"-"+r.id;super(e,t,r,o,a,c,d,f),this.contentAttr=wV(f),this.hostAttr=IV(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},EV=(()=>{class n extends yp{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(ge(Ln))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})(),hS=["alt","control","meta","shift"],bV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},CV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},TV=(()=>{class n extends yp{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fi().onAndCancel(t,o.domEventName,a))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),hS.forEach(f=>{let g=r.indexOf(f);g>-1&&(r.splice(g,1),a+=f+".")}),a+=o,r.length!=0||o.length===0)return null;let d={};return d.domEventName=i,d.fullKey=a,d}static matchEventFullKeyCode(t,r){let i=bV[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),hS.forEach(a=>{if(a!==i){let c=CV[a];c(t)&&(o+=a+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(ge(Ln))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})();function _S(n,e){return QD(Y({rootComponent:n},DV(e)))}function DV(n){return{appProviders:[...PV,...n?.providers??[]],platformProviders:MV}}function SV(){hy.makeCurrent()}function AV(){return new xi}function xV(){return QT(document),document}var MV=[{provide:Xr,useValue:ay},{provide:Pv,useValue:SV,multi:!0},{provide:Ln,useFactory:xV,deps:[]}];var PV=[{provide:qf,useValue:"root"},{provide:xi,useFactory:AV,deps:[]},{provide:fy,useClass:EV,multi:!0,deps:[Ln,et,Xr]},{provide:fy,useClass:TV,multi:!0,deps:[Ln]},lS,pS,fS,{provide:du,useExisting:lS},{provide:gp,useClass:mV,deps:[]},[]];var vS=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(ge(Ln))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Pe="primary",zl=Symbol("RouteTitle"),wy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Su(n){return new wy(n)}function NV(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let a=r[o],c=n[o];if(a[0]===":")i[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function kV(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ni(n[t],e[t]))return!1;return!0}function ni(n,e){let t=n?Iy(n):void 0,r=e?Iy(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!xS(n[i],e[i]))return!1;return!0}function Iy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function xS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function MS(n){return n.length>0?n[n.length-1]:null}function Bo(n){return n_(n)?n:Oo(n)?vt(Promise.resolve(n)):pe(n)}var OV={exact:RS,subset:NS},PS={exact:LV,subset:FV,ignored:()=>!0};function yS(n,e,t){return OV[t.paths](n.root,e.root,t.matrixParams)&&PS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function LV(n,e){return ni(n,e)}function RS(n,e,t){if(!Bs(n.segments,e.segments)||!bp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!RS(n.children[r],e.children[r],t))return!1;return!0}function FV(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>xS(n[t],e[t]))}function NS(n,e,t){return kS(n,e,e.segments,t)}function kS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Bs(i,t)||e.hasChildren()||!bp(i,t,r))}else if(n.segments.length===t.length){if(!Bs(n.segments,t)||!bp(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!NS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Bs(n.segments,i)||!bp(n.segments,i,r)||!n.children[Pe]?!1:kS(n.children[Pe],e,o,r)}}function bp(n,e,t){return e.every((r,i)=>PS[t](n[i].parameters,r.parameters))}var Ui=class{constructor(e=new tt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Su(this.queryParams),this._queryParamMap}toString(){return UV.serialize(this)}},tt=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Cp(this)}},Vs=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Su(this.parameters),this._parameterMap}toString(){return LS(this)}};function VV(n,e){return Bs(n,e)&&n.every((t,r)=>ni(t.parameters,e[r].parameters))}function Bs(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function BV(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Pe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Pe&&(t=t.concat(e(i,r)))}),t}var Hl=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:()=>new Au,providedIn:"root"})}}return n})(),Au=class{parse(e){let t=new by(e);return new Ui(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${xl(e.root,!0)}`,r=zV(e.queryParams),i=typeof e.fragment=="string"?`#${jV(e.fragment)}`:"";return`${t}${r}${i}`}},UV=new Au;function Cp(n){return n.segments.map(e=>LS(e)).join("/")}function xl(n,e){if(!n.hasChildren())return Cp(n);if(e){let t=n.children[Pe]?xl(n.children[Pe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Pe&&r.push(`${i}:${xl(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=BV(n,(r,i)=>i===Pe?[xl(n.children[Pe],!1)]:[`${i}:${xl(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Pe]!=null?`${Cp(n)}/${t[0]}`:`${Cp(n)}/(${t.join("//")})`}}function OS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ip(n){return OS(n).replace(/%3B/gi,";")}function jV(n){return encodeURI(n)}function Ey(n){return OS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tp(n){return decodeURIComponent(n)}function wS(n){return Tp(n.replace(/\+/g,"%20"))}function LS(n){return`${Ey(n.path)}${$V(n.parameters)}`}function $V(n){return Object.entries(n).map(([e,t])=>`;${Ey(e)}=${Ey(t)}`).join("")}function zV(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Ip(t)}=${Ip(i)}`).join("&"):`${Ip(t)}=${Ip(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var HV=/^[^\/()?;#]+/;function gy(n){let e=n.match(HV);return e?e[0]:""}var qV=/^[^\/()?;=#]+/;function GV(n){let e=n.match(qV);return e?e[0]:""}var WV=/^[^=?&#]+/;function ZV(n){let e=n.match(WV);return e?e[0]:""}var KV=/^[^&#]+/;function QV(n){let e=n.match(KV);return e?e[0]:""}var by=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new tt([],{}):new tt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Pe]=new tt(e,t)),r}parseSegment(){let e=gy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new se(4009,!1);return this.capture(e),new Vs(Tp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=GV(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=gy(this.remaining);i&&(r=i,this.capture(r))}e[Tp(t)]=Tp(r)}parseQueryParam(e){let t=ZV(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let a=QV(this.remaining);a&&(r=a,this.capture(r))}let i=wS(t),o=wS(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=gy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new se(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Pe);let a=this.parseChildren();t[o]=Object.keys(a).length===1?a[Pe]:new tt([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new se(4011,!1)}};function FS(n){return n.segments.length>0?new tt([],{[Pe]:n}):n}function VS(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=VS(i);if(r===Pe&&o.segments.length===0&&o.hasChildren())for(let[a,c]of Object.entries(o.children))e[a]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new tt(n.segments,e);return YV(t)}function YV(n){if(n.numberOfChildren===1&&n.children[Pe]){let e=n.children[Pe];return new tt(n.segments.concat(e.segments),e.children)}return n}function Us(n){return n instanceof Ui}function JV(n,e,t=null,r=null){let i=BS(n);return US(i,e,t,r)}function BS(n){let e;function t(o){let a={};for(let d of o.children){let f=t(d);a[d.outlet]=f}let c=new tt(o.url,a);return o===n&&(e=c),c}let r=t(n.root),i=FS(r);return e??i}function US(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return _y(i,i,i,t,r);let o=XV(e);if(o.toRoot())return _y(i,i,new tt([],{}),t,r);let a=e2(o,i,n),c=a.processChildren?Rl(a.segmentGroup,a.index,o.commands):$S(a.segmentGroup,a.index,o.commands);return _y(i,a.segmentGroup,c,t,r)}function Dp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ol(n){return typeof n=="object"&&n!=null&&n.outlets}function _y(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([d,f])=>{o[d]=Array.isArray(f)?f.map(g=>`${g}`):`${f}`});let a;n===e?a=t:a=jS(n,e,t);let c=FS(VS(a));return new Ui(c,o,i)}function jS(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=jS(o,e,t)}),new tt(n.segments,r)}var Sp=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Dp(r[0]))throw new se(4003,!1);let i=r.find(Ol);if(i&&i!==MS(r))throw new se(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function XV(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Sp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([d,f])=>{c[d]=typeof f=="string"?f.split("/"):f}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((c,d)=>{d==0&&c==="."||(d==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new Sp(t,e,r)}var Cu=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function e2(n,e,t){if(n.isAbsolute)return new Cu(e,!0,0);if(!t)return new Cu(e,!1,NaN);if(t.parent===null)return new Cu(t,!0,0);let r=Dp(n.commands[0])?0:1,i=t.segments.length-1+r;return t2(t,i,n.numberOfDoubleDots)}function t2(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new se(4005,!1);i=r.segments.length}return new Cu(r,!1,i-o)}function n2(n){return Ol(n[0])?n[0].outlets:{[Pe]:n}}function $S(n,e,t){if(n??=new tt([],{}),n.segments.length===0&&n.hasChildren())return Rl(n,e,t);let r=r2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new tt(n.segments.slice(0,r.pathIndex),{});return o.children[Pe]=new tt(n.segments.slice(r.pathIndex),n.children),Rl(o,0,i)}else return r.match&&i.length===0?new tt(n.segments,{}):r.match&&!n.hasChildren()?Cy(n,e,t):r.match?Rl(n,0,i):Cy(n,e,t)}function Rl(n,e,t){if(t.length===0)return new tt(n.segments,{});{let r=n2(t),i={};if(Object.keys(r).some(o=>o!==Pe)&&n.children[Pe]&&n.numberOfChildren===1&&n.children[Pe].segments.length===0){let o=Rl(n.children[Pe],e,t);return new tt(n.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=$S(n.children[o],e,a))}),Object.entries(n.children).forEach(([o,a])=>{r[o]===void 0&&(i[o]=a)}),new tt(n.segments,i)}}function r2(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let a=n.segments[i],c=t[r];if(Ol(c))break;let d=`${c}`,f=r<t.length-1?t[r+1]:null;if(i>0&&d===void 0)break;if(d&&f&&typeof f=="object"&&f.outlets===void 0){if(!ES(d,f,a))return o;r+=2}else{if(!ES(d,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Cy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Ol(o)){let d=i2(o.outlets);return new tt(r,d)}if(i===0&&Dp(t[0])){let d=n.segments[e];r.push(new Vs(d.path,IS(t[0]))),i++;continue}let a=Ol(o)?o.outlets[Pe]:`${o}`,c=i<t.length-1?t[i+1]:null;a&&c&&Dp(c)?(r.push(new Vs(a,IS(c))),i+=2):(r.push(new Vs(a,{})),i++)}return new tt(r,{})}function i2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Cy(new tt([],{}),0,r))}),e}function IS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function ES(n,e,t){return n==t.path&&ni(e,t.parameters)}var Nl="imperative",en=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(en||{}),cr=class{constructor(e,t){this.id=e,this.url=t}},xu=class extends cr{constructor(e,t,r="imperative",i=null){super(e,t),this.type=en.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ri=class extends cr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=en.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Zn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Zn||{}),Ap=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ap||{}),Bi=class extends cr{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=en.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Vo=class extends cr{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=en.NavigationSkipped}},Ll=class extends cr{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=en.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},xp=class extends cr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=en.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ty=class extends cr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=en.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dy=class extends cr{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=en.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Sy=class extends cr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=en.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ay=class extends cr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=en.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xy=class{constructor(e){this.route=e,this.type=en.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},My=class{constructor(e){this.route=e,this.type=en.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Py=class{constructor(e){this.snapshot=e,this.type=en.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ry=class{constructor(e){this.snapshot=e,this.type=en.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ny=class{constructor(e){this.snapshot=e,this.type=en.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ky=class{constructor(e){this.snapshot=e,this.type=en.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mp=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=en.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Fl=class{},Mu=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function o2(n,e){return n.providers&&!n._injector&&(n._injector=cp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Sr(n){return n.outlet||Pe}function s2(n,e){let t=n.filter(r=>Sr(r)===e);return t.push(...n.filter(r=>Sr(r)!==e)),t}function ql(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Oy=class{get injector(){return ql(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Gl(this.rootInjector),this.attachRef=null}},Gl=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Oy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(ge(Gn))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Pp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Ly(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Ly(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Fy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Fy(e,this._root).map(t=>t.value)}};function Ly(n,e){if(n===e.value)return e;for(let t of e.children){let r=Ly(n,t);if(r)return r}return null}function Fy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Fy(n,t);if(r.length)return r.unshift(e),r}return[]}var Wn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function bu(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Rp=class extends Pp{constructor(e,t){super(e),this.snapshot=t,Gy(this,e)}toString(){return this.snapshot.toString()}};function zS(n){let e=a2(n),t=new Mt([new Vs("",{})]),r=new Mt({}),i=new Mt({}),o=new Mt({}),a=new Mt(""),c=new lr(t,r,o,a,i,Pe,n,e.root);return c.snapshot=e.root,new Rp(new Wn(c,[]),e)}function a2(n){let e={},t={},r={},i="",o=new Tu([],e,r,i,t,Pe,n,null,{});return new kp("",new Wn(o,[]))}var lr=class{constructor(e,t,r,i,o,a,c,d){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=c,this._futureSnapshot=d,this.title=this.dataSubject?.pipe(me(f=>f[zl]))??pe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(me(e=>Su(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(me(e=>Su(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Np(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Y(Y({},e.params),n.params),data:Y(Y({},e.data),n.data),resolve:Y(Y(Y(Y({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Y({},n.params),data:Y({},n.data),resolve:Y(Y({},n.data),n._resolvedData??{})},i&&qS(i)&&(r.resolve[zl]=i.title),r}var Tu=class{get title(){return this.data?.[zl]}constructor(e,t,r,i,o,a,c,d,f){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=c,this.routeConfig=d,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Su(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Su(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},kp=class extends Pp{constructor(e,t){super(t),this.url=e,Gy(this,t)}toString(){return HS(this._root)}};function Gy(n,e){e.value._routerState=n,e.children.forEach(t=>Gy(n,t))}function HS(n){let e=n.children.length>0?` { ${n.children.map(HS).join(", ")} } `:"";return`${n.value}${e}`}function vy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ni(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ni(e.params,t.params)||n.paramsSubject.next(t.params),kV(e.url,t.url)||n.urlSubject.next(t.url),ni(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Vy(n,e){let t=ni(n.params,e.params)&&VV(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Vy(n.parent,e.parent))}function qS(n){return typeof n.title=="string"||n.title===null}var Wy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Pe,this.activateEvents=new Bt,this.deactivateEvents=new Bt,this.attachEvents=new Bt,this.detachEvents=new Bt,this.parentContexts=W(Gl),this.location=W(gu),this.changeDetector=W(Lo),this.inputBinder=W(Vp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new se(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new se(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new se(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new se(4013,!1);this._activatedRoute=t;let i=this.location,a=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,d=new By(t,c,i.injector);this.activated=i.createComponent(a,{index:i.length,injector:d,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Et({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ro]})}}return n})(),By=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===lr?this.route:e===Gl?this.childContexts:this.parent.get(e,t)}},Vp=new ae(""),bS=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Cs([r.queryParams,r.params,r.data]).pipe(Dn(([o,a,c],d)=>(c=Y(Y(Y({},o),a),c),d===0?pe(c):Promise.resolve(c)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let a=YD(r.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of a.inputs)t.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})();function u2(n,e,t){let r=Vl(n,e._root,t?t._root:void 0);return new Rp(r,e)}function Vl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=c2(n,e,t);return new Wn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(c=>Vl(n,c)),a}}let r=l2(e.value),i=e.children.map(o=>Vl(n,o));return new Wn(r,i)}}function c2(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Vl(n,r,i);return Vl(n,r)})}function l2(n){return new lr(new Mt(n.url),new Mt(n.params),new Mt(n.queryParams),new Mt(n.fragment),new Mt(n.data),n.outlet,n.component,n)}var Bl=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},GS="ngNavigationCancelingError";function Op(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Us(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=WS(!1,Zn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function WS(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[GS]=!0,t.cancellationCode=e,t}function d2(n){return ZS(n)&&Us(n.url)}function ZS(n){return!!n&&n[GS]}var h2=(n,e,t,r)=>me(i=>(new Uy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Uy=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),vy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=bu(t);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=bu(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=bu(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=bu(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ky(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ry(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(vy(i),i===o)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),vy(c.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,r)}},Lp=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Du=class{constructor(e,t){this.component=e,this.route=t}};function f2(n,e,t){let r=n._root,i=e?e._root:null;return Ml(r,i,t,[r.value])}function p2(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ru(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!RC(n)?n:e.get(n):r}function Ml(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=bu(e);return n.children.forEach(a=>{m2(a,o[a.value.outlet],t,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,c])=>kl(c,t.getContext(a),i)),i}function m2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,a=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let d=g2(a,o,o.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new Lp(r)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Ml(n,e,c?c.children:null,r,i):Ml(n,e,t,r,i),d&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Du(c.outlet.component,a))}else a&&kl(e,c,i),i.canActivateChecks.push(new Lp(r)),o.component?Ml(n,null,c?c.children:null,r,i):Ml(n,null,t,r,i);return i}function g2(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Bs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Bs(n.url,e.url)||!ni(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vy(n,e)||!ni(n.queryParams,e.queryParams);case"paramsChange":default:return!Vy(n,e)}}function kl(n,e,t){let r=bu(n),i=n.value;Object.entries(r).forEach(([o,a])=>{i.component?e?kl(a,e.children.getContext(o),t):kl(a,null,t):kl(a,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Du(e.outlet.component,i)):t.canDeactivateChecks.push(new Du(null,i)):t.canDeactivateChecks.push(new Du(null,i))}function Wl(n){return typeof n=="function"}function _2(n){return typeof n=="boolean"}function v2(n){return n&&Wl(n.canLoad)}function y2(n){return n&&Wl(n.canActivate)}function w2(n){return n&&Wl(n.canActivateChild)}function I2(n){return n&&Wl(n.canDeactivate)}function E2(n){return n&&Wl(n.canMatch)}function KS(n){return n instanceof yr||n?.name==="EmptyError"}var Ep=Symbol("INITIAL_VALUE");function Pu(){return Dn(n=>Cs(n.map(e=>e.pipe(Xt(1),af(Ep)))).pipe(me(e=>{for(let t of e)if(t!==!0){if(t===Ep)return Ep;if(t===!1||b2(t))return t}return!0}),qn(e=>e!==Ep),Xt(1)))}function b2(n){return Us(n)||n instanceof Bl}function C2(n,e){return Vt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return a.length===0&&o.length===0?pe(Re(Y({},t),{guardsResult:!0})):T2(a,r,i,n).pipe(Vt(c=>c&&_2(c)?D2(r,o,n,e):pe(c)),me(c=>Re(Y({},t),{guardsResult:c})))})}function T2(n,e,t,r){return vt(n).pipe(Vt(i=>P2(i.component,i.route,t,e,r)),zr(i=>i!==!0,!0))}function D2(n,e,t,r){return vt(e).pipe(Ts(i=>Ga(A2(i.route.parent,r),S2(i.route,r),M2(n,i.path,t),x2(n,i.route,t))),zr(i=>i!==!0,!0))}function S2(n,e){return n!==null&&e&&e(new Ny(n)),pe(!0)}function A2(n,e){return n!==null&&e&&e(new Py(n)),pe(!0)}function x2(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return pe(!0);let i=r.map(o=>rf(()=>{let a=ql(e)??t,c=Ru(o,a),d=y2(c)?c.canActivate(e,n):Jr(a,()=>c(e,n));return Bo(d).pipe(zr())}));return pe(i).pipe(Pu())}function M2(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>p2(a)).filter(a=>a!==null).map(a=>rf(()=>{let c=a.guards.map(d=>{let f=ql(a.node)??t,g=Ru(d,f),y=w2(g)?g.canActivateChild(r,n):Jr(f,()=>g(r,n));return Bo(y).pipe(zr())});return pe(c).pipe(Pu())}));return pe(o).pipe(Pu())}function P2(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return pe(!0);let a=o.map(c=>{let d=ql(e)??i,f=Ru(c,d),g=I2(f)?f.canDeactivate(n,e,t,r):Jr(d,()=>f(n,e,t,r));return Bo(g).pipe(zr())});return pe(a).pipe(Pu())}function R2(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return pe(!0);let o=i.map(a=>{let c=Ru(a,n),d=v2(c)?c.canLoad(e,t):Jr(n,()=>c(e,t));return Bo(d)});return pe(o).pipe(Pu(),QS(r))}function QS(n){return Vh(Gt(e=>{if(typeof e!="boolean")throw Op(n,e)}),me(e=>e===!0))}function N2(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return pe(!0);let o=i.map(a=>{let c=Ru(a,n),d=E2(c)?c.canMatch(e,t):Jr(n,()=>c(e,t));return Bo(d)});return pe(o).pipe(Pu(),QS(r))}var Ul=class{constructor(e){this.segmentGroup=e||null}},jl=class extends Error{constructor(e){super(),this.urlTree=e}};function Eu(n){return Ha(new Ul(n))}function k2(n){return Ha(new se(4e3,!1))}function O2(n){return Ha(WS(!1,Zn.GuardRejected))}var jy=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return pe(r);if(i.numberOfChildren>1||!i.children[Pe])return k2(`${e.redirectTo}`);i=i.children[Pe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let c=t,{queryParams:d,fragment:f,routeConfig:g,url:y,outlet:E,params:C,data:F,title:z}=i,$=Jr(o,()=>c({params:C,data:F,queryParams:d,fragment:f,routeConfig:g,url:y,outlet:E,title:z}));if($ instanceof Ui)throw new jl($);t=$}let a=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new jl(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Ui(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=t[c]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),a={};return Object.entries(t.children).forEach(([c,d])=>{a[c]=this.createSegmentGroup(e,d,r,i)}),new tt(o,a)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new se(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},$y={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function L2(n,e,t,r,i){let o=YS(n,e,t);return o.matched?(r=o2(e,r),N2(r,e,t,i).pipe(me(a=>a===!0?o:Y({},$y)))):pe(o)}function YS(n,e,t){if(e.path==="**")return F2(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Y({},$y):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||NV)(t,n,e);if(!i)return Y({},$y);let o={};Object.entries(i.posParams??{}).forEach(([c,d])=>{o[c]=d.path});let a=i.consumed.length>0?Y(Y({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function F2(n){return{matched:!0,parameters:n.length>0?MS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function CS(n,e,t,r){return t.length>0&&U2(n,t,r)?{segmentGroup:new tt(e,B2(r,new tt(t,n.children))),slicedSegments:[]}:t.length===0&&j2(n,t,r)?{segmentGroup:new tt(n.segments,V2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new tt(n.segments,n.children),slicedSegments:t}}function V2(n,e,t,r){let i={};for(let o of t)if(Bp(n,e,o)&&!r[Sr(o)]){let a=new tt([],{});i[Sr(o)]=a}return Y(Y({},r),i)}function B2(n,e){let t={};t[Pe]=e;for(let r of n)if(r.path===""&&Sr(r)!==Pe){let i=new tt([],{});t[Sr(r)]=i}return t}function U2(n,e,t){return t.some(r=>Bp(n,e,r)&&Sr(r)!==Pe)}function j2(n,e,t){return t.some(r=>Bp(n,e,r))}function Bp(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function $2(n,e,t){return e.length===0&&!n.children[t]}var zy=class{};function z2(n,e,t,r,i,o,a="emptyOnly"){return new Hy(n,e,t,r,i,a,o).recognize()}var H2=31,Hy=class{constructor(e,t,r,i,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new jy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new se(4002,`'${e.segmentGroup}'`)}recognize(){let e=CS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(me(({children:t,rootSnapshot:r})=>{let i=new Wn(r,t),o=new kp("",i),a=JV(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(e){let t=new Tu([],Object.freeze({}),Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Pe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Pe,t).pipe(me(r=>({children:r,rootSnapshot:t})),yo(r=>{if(r instanceof jl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ul?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(me(a=>a instanceof Wn?[a]:[]))}processChildren(e,t,r,i){let o=[];for(let a of Object.keys(r.children))a==="primary"?o.unshift(a):o.push(a);return vt(o).pipe(Ts(a=>{let c=r.children[a],d=s2(t,a);return this.processSegmentGroup(e,d,c,a,i)}),sf((a,c)=>(a.push(...c),a)),wo(null),s_(),Vt(a=>{if(a===null)return Eu(r);let c=JS(a);return q2(c),pe(c)}))}processSegment(e,t,r,i,o,a,c){return vt(t).pipe(Ts(d=>this.processSegmentAgainstRoute(d._injector??e,t,d,r,i,o,a,c).pipe(yo(f=>{if(f instanceof Ul)return pe(null);throw f}))),zr(d=>!!d),yo(d=>{if(KS(d))return $2(r,i,o)?pe(new zy):Eu(r);throw d}))}processSegmentAgainstRoute(e,t,r,i,o,a,c,d){return Sr(r)!==a&&(a===Pe||!Bp(i,o,r))?Eu(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,a,d):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,a,d):Eu(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,a,c){let{matched:d,parameters:f,consumedSegments:g,positionalParamSegments:y,remainingSegments:E}=YS(t,i,o);if(!d)return Eu(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>H2&&(this.allowRedirects=!1));let C=new Tu(o,f,Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,TS(i),Sr(i),i.component??i._loadedComponent??null,i,DS(i)),F=Np(C,c,this.paramsInheritanceStrategy);C.params=Object.freeze(F.params),C.data=Object.freeze(F.data);let z=this.applyRedirects.applyRedirectCommands(g,i.redirectTo,y,C,e);return this.applyRedirects.lineralizeSegments(i,z).pipe(Vt($=>this.processSegment(e,r,t,$.concat(E),a,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,o,a){let c=L2(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(Dn(d=>d.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Dn(({routes:f})=>{let g=r._loadedInjector??e,{parameters:y,consumedSegments:E,remainingSegments:C}=d,F=new Tu(E,y,Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,TS(r),Sr(r),r.component??r._loadedComponent??null,r,DS(r)),z=Np(F,a,this.paramsInheritanceStrategy);F.params=Object.freeze(z.params),F.data=Object.freeze(z.data);let{segmentGroup:$,slicedSegments:Z}=CS(t,E,C,f);if(Z.length===0&&$.hasChildren())return this.processChildren(g,f,$,F).pipe(me(oe=>new Wn(F,oe)));if(f.length===0&&Z.length===0)return pe(new Wn(F,[]));let te=Sr(r)===o;return this.processSegment(g,f,$,Z,te?Pe:o,!0,F).pipe(me(oe=>new Wn(F,oe instanceof Wn?[oe]:[])))}))):Eu(t)))}getChildConfig(e,t,r){return t.children?pe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?pe({routes:t._loadedRoutes,injector:t._loadedInjector}):R2(e,t,r,this.urlSerializer).pipe(Vt(i=>i?this.configLoader.loadChildren(e,t).pipe(Gt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):O2(t))):pe({routes:[],injector:e})}};function q2(n){n.sort((e,t)=>e.value.outlet===Pe?-1:t.value.outlet===Pe?1:e.value.outlet.localeCompare(t.value.outlet))}function G2(n){let e=n.value.routeConfig;return e&&e.path===""}function JS(n){let e=[],t=new Set;for(let r of n){if(!G2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=JS(r.children);e.push(new Wn(r.value,i))}return e.filter(r=>!t.has(r))}function TS(n){return n.data||{}}function DS(n){return n.resolve||{}}function W2(n,e,t,r,i,o){return Vt(a=>z2(n,e,t,r,a.extractedUrl,i,o).pipe(me(({state:c,tree:d})=>Re(Y({},a),{targetSnapshot:c,urlAfterRedirects:d}))))}function Z2(n,e){return Vt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return pe(t);let o=new Set(i.map(d=>d.route)),a=new Set;for(let d of o)if(!a.has(d))for(let f of XS(d))a.add(f);let c=0;return vt(a).pipe(Ts(d=>o.has(d)?K2(d,r,n,e):(d.data=Np(d,d.parent,n).resolve,pe(void 0))),Gt(()=>c++),Wa(1),Vt(d=>c===a.size?pe(t):Hn))})}function XS(n){let e=n.children.map(t=>XS(t)).flat();return[n,...e]}function K2(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!qS(i)&&(o[zl]=i.title),Q2(o,n,e,r).pipe(me(a=>(n._resolvedData=a,n.data=Np(n,n.parent,t).resolve,null)))}function Q2(n,e,t,r){let i=Iy(n);if(i.length===0)return pe({});let o={};return vt(i).pipe(Vt(a=>Y2(n[a],e,t,r).pipe(zr(),Gt(c=>{if(c instanceof Bl)throw Op(new Au,c);o[a]=c}))),Wa(1),o_(o),yo(a=>KS(a)?Hn:Ha(a)))}function Y2(n,e,t,r){let i=ql(e)??r,o=Ru(n,i),a=o.resolve?o.resolve(e,t):Jr(i,()=>o(e,t));return Bo(a)}function yy(n){return Dn(e=>{let t=n(e);return t?vt(t).pipe(me(()=>e)):pe(e)})}var eA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Pe);return r}getResolvedTitleForRoute(t){return t.data[zl]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:()=>W(J2),providedIn:"root"})}}return n})(),J2=(()=>{class n extends eA{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(ge(vS))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Zl=new ae("",{providedIn:"root",factory:()=>({})}),X2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ht({type:n,selectors:[["ng-component"]],standalone:!0,features:[ft],decls:1,vars:0,template:function(r,i){r&1&&Pt(0,"router-outlet")},dependencies:[Wy],encapsulation:2})}}return n})();function Zy(n){let e=n.children&&n.children.map(Zy),t=e?Re(Y({},n),{children:e}):Y({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Pe&&(t.component=X2),t}var $l=new ae(""),Ky=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=W(pp)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return pe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Bo(t.loadComponent()).pipe(me(tA),Gt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),sl(()=>{this.componentLoaders.delete(t)})),i=new Ua(r,()=>new Jt).pipe(Ba());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return pe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=eB(r,this.compiler,t,this.onLoadEndListener).pipe(sl(()=>{this.childrenLoaders.delete(r)})),a=new Ua(o,()=>new Jt).pipe(Ba());return this.childrenLoaders.set(r,a),a}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function eB(n,e,t,r){return Bo(n.loadChildren()).pipe(me(tA),Vt(i=>i instanceof fl||Array.isArray(i)?pe(i):vt(e.compileModuleAsync(i))),me(i=>{r&&r(n);let o,a,c=!1;return Array.isArray(i)?(a=i,c=!0):(o=i.create(t).injector,a=o.get($l,[],{optional:!0,self:!0}).flat()),{routes:a.map(Zy),injector:o}}))}function tB(n){return n&&typeof n=="object"&&"default"in n}function tA(n){return tB(n)?n.default:n}var Qy=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:()=>W(nB),providedIn:"root"})}}return n})(),nB=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),nA=new ae(""),rA=new ae("");function rB(n,e,t){let r=n.get(rA),i=n.get(Ln);return n.get(et).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(f=>setTimeout(f));let o,a=new Promise(f=>{o=f}),c=i.startViewTransition(()=>(o(),iB(n))),{onViewTransitionCreated:d}=r;return d&&Jr(n,()=>d({transition:c,from:e,to:t})),a})}function iB(n){return new Promise(e=>{Wv({read:()=>setTimeout(e)},{injector:n})})}var oB=new ae(""),Yy=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Jt,this.transitionAbortSubject=new Jt,this.configLoader=W(Ky),this.environmentInjector=W(Gn),this.urlSerializer=W(Hl),this.rootContexts=W(Gl),this.location=W(Iu),this.inputBindingEnabled=W(Vp,{optional:!0})!==null,this.titleStrategy=W(eA),this.options=W(Zl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=W(Qy),this.createViewTransition=W(nA,{optional:!0}),this.navigationErrorHandler=W(oB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>pe(void 0),this.rootComponentType=null;let t=i=>this.events.next(new xy(i)),r=i=>this.events.next(new My(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Re(Y(Y({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Mt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Nl,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(qn(o=>o.id!==0),me(o=>Re(Y({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Dn(o=>{let a=!1,c=!1;return pe(o).pipe(Dn(d=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Zn.SupersededByNewNavigation),Hn;this.currentTransition=o,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,targetBrowserUrl:typeof d.extras.browserUrl=="string"?this.urlSerializer.parse(d.extras.browserUrl):d.extras.browserUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Re(Y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),g=d.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!f&&g!=="reload"){let y="";return this.events.next(new Vo(d.id,this.urlSerializer.serialize(d.rawUrl),y,Ap.IgnoredSameUrlNavigation)),d.resolve(!1),Hn}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return pe(d).pipe(Dn(y=>{let E=this.transitions?.getValue();return this.events.next(new xu(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),E!==this.transitions?.getValue()?Hn:Promise.resolve(y)}),W2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Gt(y=>{o.targetSnapshot=y.targetSnapshot,o.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation=Re(Y({},this.currentNavigation),{finalUrl:y.urlAfterRedirects});let E=new xp(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(E)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:y,extractedUrl:E,source:C,restoredState:F,extras:z}=d,$=new xu(y,this.urlSerializer.serialize(E),C,F);this.events.next($);let Z=zS(this.rootComponentType).snapshot;return this.currentTransition=o=Re(Y({},d),{targetSnapshot:Z,urlAfterRedirects:E,extras:Re(Y({},z),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=E,pe(o)}else{let y="";return this.events.next(new Vo(d.id,this.urlSerializer.serialize(d.extractedUrl),y,Ap.IgnoredByUrlHandlingStrategy)),d.resolve(!1),Hn}}),Gt(d=>{let f=new Ty(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),me(d=>(this.currentTransition=o=Re(Y({},d),{guards:f2(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),o)),C2(this.environmentInjector,d=>this.events.next(d)),Gt(d=>{if(o.guardsResult=d.guardsResult,d.guardsResult&&typeof d.guardsResult!="boolean")throw Op(this.urlSerializer,d.guardsResult);let f=new Dy(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(f)}),qn(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",Zn.GuardRejected),!1)),yy(d=>{if(d.guards.canActivateChecks.length)return pe(d).pipe(Gt(f=>{let g=new Sy(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}),Dn(f=>{let g=!1;return pe(f).pipe(Z2(this.paramsInheritanceStrategy,this.environmentInjector),Gt({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(f,"",Zn.NoDataFromResolver)}}))}),Gt(f=>{let g=new Ay(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}))}),yy(d=>{let f=g=>{let y=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(g.routeConfig).pipe(Gt(E=>{g.component=E}),me(()=>{})));for(let E of g.children)y.push(...f(E));return y};return Cs(f(d.targetSnapshot.root)).pipe(wo(null),Xt(1))}),yy(()=>this.afterPreactivation()),Dn(()=>{let{currentSnapshot:d,targetSnapshot:f}=o,g=this.createViewTransition?.(this.environmentInjector,d.root,f.root);return g?vt(g).pipe(me(()=>o)):pe(o)}),me(d=>{let f=u2(t.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=o=Re(Y({},d),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,o}),Gt(()=>{this.events.next(new Fl)}),h2(this.rootContexts,t.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),Xt(1),Gt({next:d=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ri(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{a=!0}}),a_(this.transitionAbortSubject.pipe(Gt(d=>{throw d}))),sl(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Zn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),yo(d=>{if(c=!0,ZS(d))this.events.next(new Bi(o.id,this.urlSerializer.serialize(o.extractedUrl),d.message,d.cancellationCode)),d2(d)?this.events.next(new Mu(d.url,d.navigationBehaviorOptions)):o.resolve(!1);else{let f=new Ll(o.id,this.urlSerializer.serialize(o.extractedUrl),d,o.targetSnapshot??void 0);try{let g=Jr(this.environmentInjector,()=>this.navigationErrorHandler?.(f));if(g instanceof Bl){let{message:y,cancellationCode:E}=Op(this.urlSerializer,g);this.events.next(new Bi(o.id,this.urlSerializer.serialize(o.extractedUrl),y,E)),this.events.next(new Mu(g.redirectTo,g.navigationBehaviorOptions))}else{this.events.next(f);let y=t.errorHandler(d);o.resolve(!!y)}}catch(g){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(g)}}return Hn}))}))}cancelNavigationTransition(t,r,i){let o=new Bi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function sB(n){return n!==Nl}var aB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:()=>W(uB),providedIn:"root"})}}return n})(),qy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},uB=(()=>{class n extends qy{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ki(n)))(i||n)}})()}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),iA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:()=>W(cB),providedIn:"root"})}}return n})(),cB=(()=>{class n extends iA{constructor(){super(...arguments),this.location=W(Iu),this.urlSerializer=W(Hl),this.options=W(Zl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=W(Qy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ui,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=zS(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof xu)this.stateMemento=this.createStateMemento();else if(t instanceof Vo)this.rawUrlTree=r.initialUrl;else if(t instanceof xp){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Fl?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Bi&&(t.code===Zn.GuardRejected||t.code===Zn.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ll?this.restoreHistory(r,!0):t instanceof ri&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Ui?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,a=Y(Y({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",a)}else{let o=Y(Y({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ki(n)))(i||n)}})()}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Pl=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Pl||{});function oA(n,e){n.events.pipe(qn(t=>t instanceof ri||t instanceof Bi||t instanceof Ll||t instanceof Vo),me(t=>t instanceof ri||t instanceof Vo?Pl.COMPLETE:(t instanceof Bi?t.code===Zn.Redirect||t.code===Zn.SupersededByNewNavigation:!1)?Pl.REDIRECTING:Pl.FAILED),qn(t=>t!==Pl.REDIRECTING),Xt(1)).subscribe(()=>{e()})}function lB(n){throw n}var dB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ct=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=W(dp),this.stateManager=W(iA),this.options=W(Zl,{optional:!0})||{},this.pendingTasks=W(mu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=W(Yy),this.urlSerializer=W(Hl),this.location=W(Iu),this.urlHandlingStrategy=W(Qy),this._events=new Jt,this.errorHandler=this.options.errorHandler||lB,this.navigated=!1,this.routeReuseStrategy=W(aB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=W($l,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!W(Vp,{optional:!0}),this.eventsSubscription=new Dt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Bi&&r.code!==Zn.Redirect&&r.code!==Zn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ri)this.navigated=!0;else if(r instanceof Mu){let a=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),d=Y({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||sB(i.source)},a);this.scheduleNavigation(c,Nl,null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}pB(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Nl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let d=Y({},i);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(o.state=d)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Zy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:d}=r,f=d?this.currentUrlTree.fragment:a,g=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":g=Y(Y({},this.currentUrlTree.queryParams),o);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=o||null}g!==null&&(g=this.removeEmptyProps(g));let y;try{let E=i?i.snapshot:this.routerState.snapshot.root;y=BS(E)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),y=this.currentUrlTree.root}return US(y,t,g,f??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Us(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Nl,null,r)}navigate(t,r={skipLocationChange:!1}){return fB(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Y({},dB):r===!1?i=Y({},hB):i=r,Us(t))return yS(this.currentUrlTree,t,i);let o=this.parseUrl(t);return yS(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,a){if(this.disposed)return Promise.resolve(!1);let c,d,f;a?(c=a.resolve,d=a.reject,f=a.promise):f=new Promise((y,E)=>{c=y,d=E});let g=this.pendingTasks.add();return oA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:c,reject:d,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(y=>Promise.reject(y))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function fB(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new se(4008,!1)}function pB(n){return!(n instanceof Fl)&&!(n instanceof Mu)}var ii=(()=>{class n{constructor(t,r,i,o,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.onChanges=new Jt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let d=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=d==="a"||d==="area",this.isAnchorElement?this.subscription=t.events.subscribe(f=>{f instanceof ri&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Us(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||i||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let d={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,d),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:XT(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Us(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(J(ct),J(lr),Dv("tabindex"),J(ei),J(Cr),J(Vi))}}static{this.\u0275dir=Et({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&$e("click",function(a){return i.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&wl("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Fo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Fo],replaceUrl:[2,"replaceUrl","replaceUrl",Fo],routerLink:"routerLink"},standalone:!0,features:[Gv,Ro]})}}return n})();var Fp=class{};var mB=(()=>{class n{constructor(t,r,i,o,a){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(qn(t=>t instanceof ri),Ts(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=cp(o.providers,t,`Route: ${o.path}`));let a=o._injector??t,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(c,o.children??o._loadedRoutes))}return vt(i).pipe(qa())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=pe(null);let o=i.pipe(Vt(a=>a===null?pe(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return vt([o,a]).pipe(qa())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(ge(ct),ge(pp),ge(Gn),ge(Fp),ge(Ky))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sA=new ae(""),gB=(()=>{class n{constructor(t,r,i,o,a={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof xu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ri?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Vo&&t.code===Ap.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Mp&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Mp(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){hD()}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac})}}return n})();function aA(n,...e){return Yr([{provide:$l,multi:!0,useValue:n},[],{provide:lr,useFactory:uA,deps:[ct]},{provide:fp,multi:!0,useFactory:cA},e.map(t=>t.\u0275providers)])}function uA(n){return n.routerState.root}function Kl(n,e){return{\u0275kind:n,\u0275providers:e}}function cA(){let n=W(un);return e=>{let t=n.get(Fs);if(e!==t.components[0])return;let r=n.get(ct),i=n.get(lA);n.get(Jy)===1&&r.initialNavigation(),n.get(dA,null,ke.Optional)?.setUpPreloading(),n.get(sA,null,ke.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var lA=new ae("",{factory:()=>new Jt}),Jy=new ae("",{providedIn:"root",factory:()=>1});function _B(){return Kl(2,[{provide:Jy,useValue:0},{provide:hp,multi:!0,deps:[un],useFactory:e=>{let t=e.get(oS,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(ct),o=e.get(lA);oA(i,()=>{r(!0)}),e.get(Yy).afterPreactivation=()=>(r(!0),o.closed?pe(void 0):o),i.initialNavigation()}))}}])}function vB(){return Kl(3,[{provide:hp,multi:!0,useFactory:()=>{let e=W(ct);return()=>{e.setUpLocationChangeListener()}}},{provide:Jy,useValue:2}])}var dA=new ae("");function yB(n){return Kl(0,[{provide:dA,useExisting:mB},{provide:Fp,useExisting:n}])}function wB(){return Kl(8,[bS,{provide:Vp,useExisting:bS}])}function IB(n){let e=[{provide:nA,useValue:rB},{provide:rA,useValue:Y({skipNextTransition:!!n?.skipInitialTransition},n)}];return Kl(9,e)}var SS=new ae("ROUTER_FORROOT_GUARD"),EB=[Iu,{provide:Hl,useClass:Au},ct,Gl,{provide:lr,useFactory:uA,deps:[ct]},Ky,[]],Nu=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[EB,[],{provide:$l,multi:!0,useValue:t},{provide:SS,useFactory:DB,deps:[[ct,new hn,new fv]]},{provide:Zl,useValue:r||{}},r?.useHash?CB():TB(),bB(),r?.preloadingStrategy?yB(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?SB(r):[],r?.bindToComponentInputs?wB().\u0275providers:[],r?.enableViewTransitions?IB().\u0275providers:[],AB()]}}static forChild(t){return{ngModule:n,providers:[{provide:$l,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(ge(SS,8))}}static{this.\u0275mod=Po({type:n})}static{this.\u0275inj=Mo({})}}return n})();function bB(){return{provide:sA,useFactory:()=>{let n=W(cS),e=W(et),t=W(Zl),r=W(Yy),i=W(Hl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new gB(i,r,n,e,t)}}}function CB(){return{provide:Vi,useClass:aS}}function TB(){return{provide:Vi,useClass:sy}}function DB(n){return"guarded"}function SB(n){return[n.initialNavigation==="disabled"?vB().\u0275providers:[],n.initialNavigation==="enabledBlocking"?_B().\u0275providers:[]]}var AS=new ae("");function AB(){return[{provide:AS,useFactory:cA},{provide:fp,multi:!0,useExisting:AS}]}var fA=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},xB=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],a=n[t++],c=n[t++],d=((i&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{let o=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},pA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],a=i+1<n.length,c=a?n[i+1]:0,d=i+2<n.length,f=d?n[i+2]:0,g=o>>2,y=(o&3)<<4|c>>4,E=(c&15)<<2|f>>6,C=f&63;d||(C=64,a||(E=64)),r.push(t[g],t[y],t[E],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):xB(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let f=i<n.length?t[n.charAt(i)]:64;++i;let y=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||f==null||y==null)throw new ew;let E=o<<2|c>>4;if(r.push(E),f!==64){let C=c<<4&240|f>>2;if(r.push(C),y!==64){let F=f<<6&192|y;r.push(F)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ew=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},MB=function(n){let e=fA(n);return pA.encodeByteArray(e,!0)},Ql=function(n){return MB(n).replace(/\./g,"")},nw=function(n){try{return pA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function PB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var RB=()=>PB().__FIREBASE_DEFAULTS__,NB=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},kB=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&nw(n[1]);return e&&JSON.parse(e)},jp=()=>{try{return RB()||NB()||kB()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},rw=n=>{var e,t;return(t=(e=jp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},mA=n=>{let e=rw(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},iw=()=>{var n;return(n=jp())===null||n===void 0?void 0:n.config},ow=n=>{var e;return(e=jp())===null||e===void 0?void 0:e[`_${n}`]};var Up=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function gA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ql(JSON.stringify(t)),Ql(JSON.stringify(a)),""].join(".")}function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _A(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function OB(){var n;let e=(n=jp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yA(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function wA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IA(){let n=tn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function EA(){return!OB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sw(){try{return typeof indexedDB=="object"}catch{return!1}}function bA(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var LB="FirebaseError",Kn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=LB,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ji.prototype.create)}},ji=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?FB(o,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new Kn(i,c,r)}};function FB(n,e){return n.replace(VB,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var VB=/\{\$([^}]+)}/g;function CA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Uo(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],a=e[i];if(hA(o)&&hA(a)){if(!Uo(o,a))return!1}else if(o!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function hA(n){return n!==null&&typeof n=="object"}function Yl(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ou(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Lu(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function TA(n,e){let t=new tw(n,e);return t.subscribe.bind(t)}var tw=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");BB(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Xy),i.error===void 0&&(i.error=Xy),i.complete===void 0&&(i.complete=Xy);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function BB(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Xy(){}var X7=4*60*60*1e3;function kt(n){return n&&n._delegate?n._delegate:n}var dr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var js="[DEFAULT]";var aw=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Up;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jB(e))try{this.getOrInitializeService({instanceIdentifier:js})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=js){return this.instances.has(e)}getOptions(e=js){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:UB(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=js){return this.component?this.component.multipleInstances?e:js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function UB(n){return n===js?void 0:n}function jB(n){return n.instantiationMode==="EAGER"}var $p=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new aw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var $B=[],ze=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ze||{}),zB={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},HB=ze.INFO,qB={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},GB=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=qB[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},jo=class{constructor(e){this.name=e,this._logLevel=HB,this._logHandler=GB,this._userLogHandler=null,$B.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}};var WB=(n,e)=>e.some(t=>n instanceof t),DA,SA;function ZB(){return DA||(DA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KB(){return SA||(SA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var AA=new WeakMap,cw=new WeakMap,xA=new WeakMap,uw=new WeakMap,dw=new WeakMap;function QB(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(oi(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&AA.set(t,n)}).catch(()=>{}),dw.set(e,n),e}function YB(n){if(cw.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});cw.set(n,e)}var lw={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return cw.get(n);if(e==="objectStoreNames")return n.objectStoreNames||xA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return oi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function MA(n){lw=n(lw)}function JB(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(zp(this),e,...t);return xA.set(r,e.sort?e.sort():[e]),oi(r)}:KB().includes(n)?function(...e){return n.apply(zp(this),e),oi(AA.get(this))}:function(...e){return oi(n.apply(zp(this),e))}}function XB(n){return typeof n=="function"?JB(n):(n instanceof IDBTransaction&&YB(n),WB(n,ZB())?new Proxy(n,lw):n)}function oi(n){if(n instanceof IDBRequest)return QB(n);if(uw.has(n))return uw.get(n);let e=XB(n);return e!==n&&(uw.set(n,e),dw.set(e,n)),e}var zp=n=>dw.get(n);function RA(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let a=indexedDB.open(n,e),c=oi(a);return r&&a.addEventListener("upgradeneeded",d=>{r(oi(a.result),d.oldVersion,d.newVersion,oi(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),i&&d.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}var eU=["get","getKey","getAll","getAllKeys","count"],tU=["put","add","delete","clear"],hw=new Map;function PA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hw.get(e))return hw.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=tU.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||eU.includes(t)))return;let o=function(a,...c){return b(this,null,function*(){let d=this.transaction(a,i?"readwrite":"readonly"),f=d.store;return r&&(f=f.index(c.shift())),(yield Promise.all([f[t](...c),i&&d.done]))[0]})};return hw.set(e,o),o}MA(n=>Re(Y({},n),{get:(e,t,r)=>PA(e,t)||n.get(e,t,r),has:(e,t)=>!!PA(e,t)||n.has(e,t)}));var pw=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(nU(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function nU(n){let e=n.getComponent();return e?.type==="VERSION"}var mw="@firebase/app",NA="0.10.13";var $i=new jo("@firebase/app"),rU="@firebase/app-compat",iU="@firebase/analytics-compat",oU="@firebase/analytics",sU="@firebase/app-check-compat",aU="@firebase/app-check",uU="@firebase/auth",cU="@firebase/auth-compat",lU="@firebase/database",dU="@firebase/data-connect",hU="@firebase/database-compat",fU="@firebase/functions",pU="@firebase/functions-compat",mU="@firebase/installations",gU="@firebase/installations-compat",_U="@firebase/messaging",vU="@firebase/messaging-compat",yU="@firebase/performance",wU="@firebase/performance-compat",IU="@firebase/remote-config",EU="@firebase/remote-config-compat",bU="@firebase/storage",CU="@firebase/storage-compat",TU="@firebase/firestore",DU="@firebase/vertexai-preview",SU="@firebase/firestore-compat",AU="firebase",xU="10.14.1";var gw="[DEFAULT]",MU={[mw]:"fire-core",[rU]:"fire-core-compat",[oU]:"fire-analytics",[iU]:"fire-analytics-compat",[aU]:"fire-app-check",[sU]:"fire-app-check-compat",[uU]:"fire-auth",[cU]:"fire-auth-compat",[lU]:"fire-rtdb",[dU]:"fire-data-connect",[hU]:"fire-rtdb-compat",[fU]:"fire-fn",[pU]:"fire-fn-compat",[mU]:"fire-iid",[gU]:"fire-iid-compat",[_U]:"fire-fcm",[vU]:"fire-fcm-compat",[yU]:"fire-perf",[wU]:"fire-perf-compat",[IU]:"fire-rc",[EU]:"fire-rc-compat",[bU]:"fire-gcs",[CU]:"fire-gcs-compat",[TU]:"fire-fst",[SU]:"fire-fst-compat",[DU]:"fire-vertex","fire-js":"fire-js",[AU]:"fire-js-all"};var Jl=new Map,PU=new Map,_w=new Map;function kA(n,e){try{n.container.addComponent(e)}catch(t){$i.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function zo(n){let e=n.name;if(_w.has(e))return $i.debug(`There were multiple attempts to register component ${e}.`),!1;_w.set(e,n);for(let t of Jl.values())kA(t,n);for(let t of PU.values())kA(t,n);return!0}function ed(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ar(n){return n.settings!==void 0}var RU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$o=new ji("app","Firebase",RU);var vw=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $o.create("app-deleted",{appName:this._name})}};var Ho=xU;function Hp(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:gw,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw $o.create("bad-app-name",{appName:String(i)});if(t||(t=iw()),!t)throw $o.create("no-options");let o=Jl.get(i);if(o){if(Uo(t,o.options)&&Uo(r,o.config))return o;throw $o.create("duplicate-app",{appName:i})}let a=new $p(i);for(let d of _w.values())a.addComponent(d);let c=new vw(t,r,a);return Jl.set(i,c),c}function Fu(n=gw){let e=Jl.get(n);if(!e&&n===gw&&iw())return Hp();if(!e)throw $o.create("no-app",{appName:n});return e}function qp(){return Array.from(Jl.values())}function Wt(n,e,t){var r;let i=(r=MU[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$i.warn(c.join(" "));return}zo(new dr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var NU="firebase-heartbeat-database",kU=1,Xl="firebase-heartbeat-store",fw=null;function VA(){return fw||(fw=RA(NU,kU,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Xl)}catch(t){console.warn(t)}}}}).catch(n=>{throw $o.create("idb-open",{originalErrorMessage:n.message})})),fw}function OU(n){return b(this,null,function*(){try{let t=(yield VA()).transaction(Xl),r=yield t.objectStore(Xl).get(BA(n));return yield t.done,r}catch(e){if(e instanceof Kn)$i.warn(e.message);else{let t=$o.create("idb-get",{originalErrorMessage:e?.message});$i.warn(t.message)}}})}function OA(n,e){return b(this,null,function*(){try{let r=(yield VA()).transaction(Xl,"readwrite");yield r.objectStore(Xl).put(e,BA(n)),yield r.done}catch(t){if(t instanceof Kn)$i.warn(t.message);else{let r=$o.create("idb-set",{originalErrorMessage:t?.message});$i.warn(r.message)}}})}function BA(n){return`${n.name}!${n.options.appId}`}var LU=1024,FU=30*24*60*60*1e3,yw=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ww(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=LA();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let c=new Date(a.date).valueOf();return Date.now()-c<=FU}),this._storage.overwrite(this._heartbeatsCache))}catch(r){$i.warn(r)}})}getHeartbeatsHeader(){return b(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=LA(),{heartbeatsToSend:r,unsentEntries:i}=VU(this._heartbeatsCache.heartbeats),o=Ql(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return $i.warn(t),""}})}};function LA(){return new Date().toISOString().substring(0,10)}function VU(n,e=LU){let t=[],r=n.slice();for(let i of n){let o=t.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),FA(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),FA(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var ww=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return sw()?bA().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield OU(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return OA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return OA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function FA(n){return Ql(JSON.stringify({version:2,heartbeats:n})).length}function BU(n){zo(new dr("platform-logger",e=>new pw(e),"PRIVATE")),zo(new dr("heartbeat",e=>new yw(e),"PRIVATE")),Wt(mw,NA,n),Wt(mw,NA,"esm2017"),Wt("fire-js","")}BU("");var UU="firebase",jU="10.14.1";Wt(UU,jU,"app");var zs=new Pi("ANGULARFIRE2_VERSION");function Wp(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(a=>a.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var td=(n,e)=>{let t=e?[e]:qp(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},Bu=class{constructor(){return td($U)}},$U="app-check";function Vu(){}var Gp=class{zone;delegate;constructor(e,t=e_){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(a){i.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(o,t,r)}},Iw=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vu,{},Vu,Vu)),t.pipe(Gt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Uu=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Gp(Zone.current)),this.insideAngular=t.run(()=>new Gp(Zone.current,Xg)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ge(et))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zp(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function zU(n){return Zp().ngZone.runOutsideAngular(()=>n())}function $s(n){return Zp().ngZone.run(()=>n())}function HU(n){return qU(Zp())(n)}function qU(n){return function(t){return t=t.lift(new Iw(n.ngZone)),t.pipe(vo(n.outsideAngular),_o(n.insideAngular))}}var GU=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),$s(()=>n.apply(void 0,r))},nn=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=$s(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vu,{},Vu,Vu))),r[o]=GU(r[o],t));let i=zU(()=>n.apply(this,r));if(!e)if(i instanceof Ue){let o=Zp();return i.pipe(vo(o.outsideAngular),_o(o.insideAngular))}else return $s(()=>i);return i instanceof Ue?i.pipe(HU):i instanceof Promise?$s(()=>new Promise((o,a)=>i.then(c=>$s(()=>o(c)),c=>$s(()=>a(c))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:$s(()=>i)};var zi=class{constructor(e){return e}},Hs=class{constructor(){return qp()}};function WU(n){return n&&n.length===1?n[0]:new zi(Fu())}var Ew=new ae("angularfire2._apps"),ZU={provide:zi,useFactory:WU,deps:[[new hn,Ew]]},KU={provide:Hs,deps:[[new hn,Ew]]};function QU(n){return(e,t)=>{let r=t.get(Xr);Wt("angularfire",zs.full,"core"),Wt("angularfire",zs.full,"app"),Wt("angular",HD.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new zi(i)}}function UA(n,...e){return Yr([ZU,KU,{provide:Ew,useFactory:QU(n),multi:!0,deps:[et,un,Uu,...e]}])}function rx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ix=rx,ox=new ji("auth","Firebase",rx());var em=new jo("@firebase/auth");function YU(n,...e){em.logLevel<=ze.WARN&&em.warn(`Auth (${Ho}): ${n}`,...e)}function Qp(n,...e){em.logLevel<=ze.ERROR&&em.error(`Auth (${Ho}): ${n}`,...e)}function ai(n,...e){throw qw(n,...e)}function qs(n,...e){return qw(n,...e)}function sx(n,e,t){let r=Object.assign(Object.assign({},ix()),{[e]:t});return new ji("auth","Firebase",r).create(e,{appName:n.name})}function Gi(n){return sx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qw(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return ox.create(n,...e)}function _e(n,e,...t){if(!n)throw qw(e,...t)}function Hi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Qp(e),new Error(e)}function Go(n,e){n||Hi(e)}function Dw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function JU(){return jA()==="http:"||jA()==="https:"}function jA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function XU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JU()||yA()||"connection"in navigator)?navigator.onLine:!0}function ej(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Gs=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Go(t>e,"Short delay should be less than long delay!"),this.isMobile=_A()||wA()}get(){return XU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Gw(n,e){Go(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var tm=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var tj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var nj=new Gs(3e4,6e4);function Wo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Zo(o,a,c,d){return b(this,arguments,function*(n,e,t,r,i={}){return ax(n,i,()=>b(this,null,function*(){let f={},g={};r&&(e==="GET"?g=r:f={body:JSON.stringify(r)});let y=Yl(Object.assign({key:n.config.apiKey},g)).slice(1),E=yield n._getAdditionalHeaders();E["Content-Type"]="application/json",n.languageCode&&(E["X-Firebase-Locale"]=n.languageCode);let C=Object.assign({method:e,headers:E},f);return vA()||(C.referrerPolicy="no-referrer"),tm.fetch()(ux(n,n.config.apiHost,t,y),C)}))})}function ax(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},tj),e);try{let i=new Sw(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield o.json();if("needConfirmation"in a)throw Kp(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let c=o.ok?a.errorMessage:a.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kp(n,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw Kp(n,"email-already-in-use",a);if(d==="USER_DISABLED")throw Kp(n,"user-disabled",a);let g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw sx(n,g,f);ai(n,g)}}catch(i){if(i instanceof Kn)throw i;ai(n,"network-request-failed",{message:String(i)})}})}function cd(o,a,c,d){return b(this,arguments,function*(n,e,t,r,i={}){let f=yield Zo(n,e,t,r,i);return"mfaPendingCredential"in f&&ai(n,"multi-factor-auth-required",{_serverResponse:f}),f})}function ux(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Gw(n.config,i):`${n.config.apiScheme}://${i}`}function rj(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Sw=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(qs(this.auth,"network-request-failed")),nj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Kp(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=qs(n,e,r);return i.customData._tokenResponse=t,i}function $A(n){return n!==void 0&&n.enterprise!==void 0}var Aw=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return rj(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function ij(n,e){return b(this,null,function*(){return Zo(n,"GET","/v2/recaptchaConfig",Wo(n,e))})}function oj(n,e){return b(this,null,function*(){return Zo(n,"POST","/v1/accounts:delete",e)})}function cx(n,e){return b(this,null,function*(){return Zo(n,"POST","/v1/accounts:lookup",e)})}function nd(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Ww(n,e=!1){return b(this,null,function*(){let t=kt(n),r=yield t.getIdToken(e),i=Zw(r);_e(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,a=o?.sign_in_provider;return{claims:i,token:r,authTime:nd(bw(i.auth_time)),issuedAtTime:nd(bw(i.iat)),expirationTime:nd(bw(i.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function bw(n){return Number(n)*1e3}function Zw(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Qp("JWT malformed, contained fewer than 3 sections"),null;try{let i=nw(t);return i?JSON.parse(i):(Qp("Failed to decode base64 JWT payload"),null)}catch(i){return Qp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function zA(n){let e=Zw(n);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function id(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Kn&&sj(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function sj({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var xw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var od=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nd(this.lastLoginAt),this.creationTime=nd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function nm(n){return b(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield id(n,cx(t,{idToken:r}));_e(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?lx(o.providerUserInfo):[],c=aj(n.providerData,a),d=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!c?.length,g=d?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new od(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,y)})}function Kw(n){return b(this,null,function*(){let e=kt(n);yield nm(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function aj(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function lx(n){return n.map(e=>{var{providerId:t}=e,r=t_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function uj(n,e){return b(this,null,function*(){let t=yield ax(n,{},()=>b(this,null,function*(){let r=Yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,a=ux(n,i,"/v1/token",`key=${o}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",tm.fetch()(a,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function cj(n,e){return b(this,null,function*(){return Zo(n,"POST","/v2/accounts:revokeToken",Wo(n,e))})}var rd=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");let t=zA(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield uj(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,a=new n;return r&&(_e(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(_e(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(_e(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Hi("not implemented")}};function qo(n,e){_e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ju=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=t_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new od(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield id(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Ww(this,e)}reload(){return Kw(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield nm(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(Ar(this.auth.app))return Promise.reject(Gi(this.auth));let e=yield this.getIdToken();return yield id(this,oj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,a,c,d,f,g;let y=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(i=t.email)!==null&&i!==void 0?i:void 0,C=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,F=(a=t.photoURL)!==null&&a!==void 0?a:void 0,z=(c=t.tenantId)!==null&&c!==void 0?c:void 0,$=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,Z=(f=t.createdAt)!==null&&f!==void 0?f:void 0,te=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:oe,emailVerified:ce,isAnonymous:ot,providerData:he,stsTokenManager:M}=t;_e(oe&&M,e,"internal-error");let T=rd.fromJSON(this.name,M);_e(typeof oe=="string",e,"internal-error"),qo(y,e.name),qo(E,e.name),_e(typeof ce=="boolean",e,"internal-error"),_e(typeof ot=="boolean",e,"internal-error"),qo(C,e.name),qo(F,e.name),qo(z,e.name),qo($,e.name),qo(Z,e.name),qo(te,e.name);let D=new n({uid:oe,auth:e,email:E,emailVerified:ce,displayName:y,isAnonymous:ot,photoURL:F,phoneNumber:C,tenantId:z,stsTokenManager:T,createdAt:Z,lastLoginAt:te});return he&&Array.isArray(he)&&(D.providerData=he.map(x=>Object.assign({},x))),$&&(D._redirectEventId=$),D}static _fromIdTokenResponse(e,t,r=!1){return b(this,null,function*(){let i=new rd;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield nm(o),o})}static _fromGetAccountInfoResponse(e,t,r){return b(this,null,function*(){let i=t.users[0];_e(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?lx(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!o?.length,c=new rd;c.updateFromIdToken(r);let d=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new od(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(d,f),d})}};var HA=new Map;function qi(n){Go(n instanceof Function,"Expected a class definition");let e=HA.get(n);return e?(Go(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,HA.set(n,e),e)}var lj=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,r){return b(this,null,function*(){this.storage[t]=r})}_get(t){return b(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Mw=lj;function Yp(n,e,t){return`firebase:${n}:${e}:${t}`}var rm=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Yp(this.userKey,i.apiKey,o),this.fullPersistenceKey=Yp("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ju._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return b(this,null,function*(){if(!t.length)return new n(qi(Mw),e,r);let i=(yield Promise.all(t.map(f=>b(this,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),o=i[0]||qi(Mw),a=Yp(r,e.config.apiKey,e.name),c=null;for(let f of t)try{let g=yield f._get(a);if(g){let y=ju._fromJSON(e,g);f!==o&&(c=y),o=f;break}}catch{}let d=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new n(o,e,r):(o=d[0],c&&(yield o._set(a,c.toJSON())),yield Promise.all(t.map(f=>b(this,null,function*(){if(f!==o)try{yield f._remove(a)}catch{}}))),new n(o,e,r))})}};function qA(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(px(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gx(e))return"Blackberry";if(_x(e))return"Webos";if(hx(e))return"Safari";if((e.includes("chrome/")||fx(e))&&!e.includes("edge/"))return"Chrome";if(mx(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function dx(n=tn()){return/firefox\//i.test(n)}function hx(n=tn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fx(n=tn()){return/crios\//i.test(n)}function px(n=tn()){return/iemobile/i.test(n)}function mx(n=tn()){return/android/i.test(n)}function gx(n=tn()){return/blackberry/i.test(n)}function _x(n=tn()){return/webos/i.test(n)}function Qw(n=tn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function dj(n=tn()){var e;return Qw(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function hj(){return IA()&&document.documentMode===10}function vx(n=tn()){return Qw(n)||mx(n)||_x(n)||gx(n)||/windows phone/i.test(n)||px(n)}function yx(n,e=[]){let t;switch(n){case"Browser":t=qA(tn());break;case"Worker":t=`${qA(tn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ho}/${r}`}var Pw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((a,c)=>{try{let d=e(o);a(d)}catch(d){c(d)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function fj(t){return b(this,arguments,function*(n,e={}){return Zo(n,"GET","/v2/passwordPolicy",Wo(n,e))})}var pj=6,Rw=class{constructor(e){var t,r,i,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:pj,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,a,c;let d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(a=d.containsNumericCharacter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Nw=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new im(this),this.idTokenSubscription=new im(this),this.beforeStateQueue=new Pw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ox,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qi(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield rm.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield cx(this,{idToken:e}),r=yield ju._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(Ar(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,d=yield this.tryRedirectSignIn(e);(!a||a===c)&&d?.user&&(i=d.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield nm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=ej()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(Ar(this.app))return Promise.reject(Gi(this));let t=e?kt(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return Ar(this.app)?Promise.reject(Gi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ar(this.app)?Promise.reject(Gi(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(qi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield fj(this),t=new Rw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ji("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield cj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&qi(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=yield rm.create(this,[qi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),a=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(c,this,"internal-error"),c.then(()=>{a||o(this.currentUser)}),typeof t=="function"){let d=e.addObserver(t,r,i);return()=>{a=!0,d()}}else{let d=e.addObserver(t);return()=>{a=!0,d()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return b(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&YU(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Zs(n){return kt(n)}var im=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=TA(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var dm={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mj(n){dm=n}function wx(n){return dm.loadJS(n)}function gj(){return dm.recaptchaEnterpriseScript}function _j(){return dm.gapiScript}function Ix(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var vj="recaptcha-enterprise",yj="NO_RECAPTCHA",kw=class{constructor(e){this.type=vj,this.auth=Zs(e)}verify(e="verify",t=!1){return b(this,null,function*(){function r(o){return b(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((a,c)=>b(this,null,function*(){ij(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let f=new Aw(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,a(f.siteKey)}}).catch(d=>{c(d)})}))})}function i(o,a,c){let d=window.grecaptcha;$A(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{a(f)}).catch(()=>{a(yj)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{r(this.auth).then(c=>{if(!t&&$A(window.grecaptcha))i(c,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=gj();d.length!==0&&(d+=c),wx(d).then(()=>{i(c,o,a)}).catch(f=>{a(f)})}}).catch(c=>{a(c)})})})}};function GA(n,e,t,r=!1){return b(this,null,function*(){let i=new kw(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let a=Object.assign({},e);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Ow(n,e,t,r){return b(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield GA(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>b(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let a=yield GA(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(o)}))})}function Yw(n,e){let t=ed(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Uo(o,e??{}))return i;ai(i,"already-initialized")}return t.initialize({options:e})}function wj(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(qi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Jw(n,e,t){let r=Zs(n);_e(r._canInitEmulator,r,"emulator-config-failed"),_e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=Ex(e),{host:a,port:c}=Ij(e),d=c===null?"":`:${c}`;r.config.emulator={url:`${o}//${a}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Ej()}function Ex(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Ij(n){let e=Ex(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:WA(r.substr(o.length+1))}}else{let[o,a]=r.split(":");return{host:o,port:WA(a)}}}function WA(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Ej(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var sd=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Hi("not implemented")}_getIdTokenResponse(e){return Hi("not implemented")}_linkToIdToken(e,t){return Hi("not implemented")}_getReauthenticationResolver(e){return Hi("not implemented")}};function bj(n,e){return b(this,null,function*(){return Zo(n,"POST","/v1/accounts:signUp",e)})}function Cj(n,e){return b(this,null,function*(){return cd(n,"POST","/v1/accounts:signInWithPassword",Wo(n,e))})}function Tj(n,e){return b(this,null,function*(){return cd(n,"POST","/v1/accounts:signInWithEmailLink",Wo(n,e))})}function Dj(n,e){return b(this,null,function*(){return cd(n,"POST","/v1/accounts:signInWithEmailLink",Wo(n,e))})}var ad=class n extends sd{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return b(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ow(e,t,"signInWithPassword",Cj);case"emailLink":return Tj(e,{email:this._email,oobCode:this._password});default:ai(e,"internal-error")}})}_linkToIdToken(e,t){return b(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ow(e,r,"signUpPassword",bj);case"emailLink":return Dj(e,{idToken:t,email:this._email,oobCode:this._password});default:ai(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Cw(n,e){return b(this,null,function*(){return cd(n,"POST","/v1/accounts:signInWithIdp",Wo(n,e))})}function Sj(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Aj(n){let e=Ou(Lu(n)).link,t=e?Ou(Lu(e)).deep_link_id:null,r=Ou(Lu(n)).deep_link_id;return(r?Ou(Lu(r)).link:null)||r||t||e||n}var om=class n{constructor(e){var t,r,i,o,a,c;let d=Ou(Lu(e)),f=(t=d.apiKey)!==null&&t!==void 0?t:null,g=(r=d.oobCode)!==null&&r!==void 0?r:null,y=Sj((i=d.mode)!==null&&i!==void 0?i:null);_e(f&&g&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=g,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=d.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=Aj(e);try{return new n(t)}catch{return null}}};var bx=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return ad._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=om.parseLink(r);return _e(i,"argument-error"),ad._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),sm=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Lw=class extends sm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function xj(n,e){return b(this,null,function*(){return cd(n,"POST","/v1/accounts:signUp",Wo(n,e))})}var $u=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return b(this,null,function*(){let o=yield ju._fromIdTokenResponse(e,r,i),a=ZA(r);return new n({user:o,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return b(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=ZA(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function ZA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Fw=class n extends Kn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Cx(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Fw._fromErrorAndOperation(n,o,e,r):o})}function Mj(n,e,t=!1){return b(this,null,function*(){let r=yield id(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return $u._forOperation(n,"link",r)})}function Pj(n,e,t=!1){return b(this,null,function*(){let{auth:r}=n;if(Ar(r.app))return Promise.reject(Gi(r));let i="reauthenticate";try{let o=yield id(n,Cx(r,i,e,n),t);_e(o.idToken,r,"internal-error");let a=Zw(o.idToken);_e(a,r,"internal-error");let{sub:c}=a;return _e(n.uid===c,r,"user-mismatch"),$u._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&ai(r,"user-mismatch"),o}})}function Tx(n,e,t=!1){return b(this,null,function*(){if(Ar(n.app))return Promise.reject(Gi(n));let r="signIn",i=yield Cx(n,r,e),o=yield $u._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Xw(n,e){return b(this,null,function*(){return Tx(Zs(n),e)})}function Dx(n){return b(this,null,function*(){let e=Zs(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function eI(n,e,t){return b(this,null,function*(){if(Ar(n.app))return Promise.reject(Gi(n));let r=Zs(n),a=yield Ow(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xj).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&Dx(n),d}),c=yield $u._fromIdTokenResponse(r,"signIn",a);return yield r._updateCurrentUser(c.user),c})}function tI(n,e,t){return Ar(n.app)?Promise.reject(Gi(n)):Xw(kt(n),bx.credential(e,t)).catch(r=>b(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Dx(n),r}))}function nI(n,e,t,r){return kt(n).onIdTokenChanged(e,t,r)}function rI(n,e,t){return kt(n).beforeAuthStateChanged(e,t)}function hm(n,e,t,r){return kt(n).onAuthStateChanged(e,t,r)}function fm(n){return kt(n).signOut()}var am="__sak";var um=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(am,"1"),this.storage.removeItem(am),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Rj=1e3,Nj=10,kj=(()=>{class n extends um{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vx(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);hj()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,Nj):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},Rj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return b(this,null,function*(){yield po(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return b(this,null,function*(){let r=yield po(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return b(this,null,function*(){yield po(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Sx=kj;var Oj=(()=>{class n extends um{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),iI=Oj;function Lj(n){return Promise.all(n.map(e=>b(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Fj=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return b(this,null,function*(){let r=t,{eventId:i,eventType:o,data:a}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let d=Array.from(c).map(g=>b(this,null,function*(){return g(r.origin,a)})),f=yield Lj(d);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Ax(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Vw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return b(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((c,d)=>{let f=Ax("",20);i.port1.start();let g=setTimeout(()=>{d(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(y){let E=y;if(E.data.eventId===f)switch(E.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(E.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function si(){return window}function Vj(n){si().location.href=n}function xx(){return typeof si().WorkerGlobalScope<"u"&&typeof si().importScripts=="function"}function Bj(){return b(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Uj(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function jj(){return xx()?self:null}var Mx="firebaseLocalStorageDb",$j=1,cm="firebaseLocalStorage",Px="fbase_key",Ws=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function pm(n,e){return n.transaction([cm],e?"readwrite":"readonly").objectStore(cm)}function zj(){let n=indexedDB.deleteDatabase(Mx);return new Ws(n).toPromise()}function Bw(){let n=indexedDB.open(Mx,$j);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(cm,{keyPath:Px})}catch(i){t(i)}}),n.addEventListener("success",()=>b(this,null,function*(){let r=n.result;r.objectStoreNames.contains(cm)?e(r):(r.close(),yield zj(),e(yield Bw()))}))})}function KA(n,e,t){return b(this,null,function*(){let r=pm(n,!0).put({[Px]:e,value:t});return new Ws(r).toPromise()})}function Hj(n,e){return b(this,null,function*(){let t=pm(n,!1).get(e),r=yield new Ws(t).toPromise();return r===void 0?null:r.value})}function QA(n,e){let t=pm(n,!0).delete(e);return new Ws(t).toPromise()}var qj=800,Gj=3,Wj=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return b(this,null,function*(){return this.db?this.db:(this.db=yield Bw(),this.db)})}_withRetries(t){return b(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>Gj)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return b(this,null,function*(){return xx()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return b(this,null,function*(){this.receiver=Fj._getInstance(jj()),this.receiver._subscribe("keyChanged",(t,r)=>b(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>b(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return b(this,null,function*(){var t,r;if(this.activeServiceWorker=yield Bj(),!this.activeServiceWorker)return;this.sender=new Vw(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return b(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Uj()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return b(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Bw();return yield KA(t,am,"1"),yield QA(t,am),!0}catch{}return!1})}_withPendingWrite(t){return b(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(i=>KA(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return b(this,null,function*(){let r=yield this._withRetries(i=>Hj(i,t));return this.localCache[t]=r,r})}_remove(t){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(r=>QA(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return b(this,null,function*(){let t=yield this._withRetries(o=>{let a=pm(o,!1).getAll();return new Ws(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:a}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>b(this,null,function*(){return this._poll()}),qj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Rx=Wj;var GZ=Ix("rcb"),WZ=new Gs(3e4,6e4);function Zj(n,e){return e?qi(e):(_e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var ud=class extends sd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cw(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Cw(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Cw(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Kj(n){return Tx(n.auth,new ud(n),n.bypassAuthState)}function Qj(n){let{auth:e,user:t}=n;return _e(t,e,"internal-error"),Pj(t,new ud(n),n.bypassAuthState)}function Yj(n){return b(this,null,function*(){let{auth:e,user:t}=n;return _e(t,e,"internal-error"),Mj(t,new ud(n),n.bypassAuthState)})}var Uw=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>b(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return b(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:a,type:c}=e;if(a){this.reject(a);return}let d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(d))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Kj;case"linkViaPopup":case"linkViaRedirect":return Yj;case"reauthViaPopup":case"reauthViaRedirect":return Qj;default:ai(this.auth,"internal-error")}}resolve(e){Go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var ZZ=new Gs(2e3,1e4);var Jj="pendingRedirect",Jp=new Map,jw=class n extends Uw{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return b(this,null,function*(){let e=Jp.get(this.auth._key());if(!e){try{let r=(yield Xj(this.resolver,this.auth))?yield po(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Jp.set(this.auth._key(),e)}return this.bypassAuthState||Jp.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return b(this,null,function*(){if(e.type==="signInViaRedirect")return po(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,po(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return b(this,null,function*(){})}cleanUp(){}};function Xj(n,e){return b(this,null,function*(){let t=n$(e),r=t$(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function e$(n,e){Jp.set(n._key(),e)}function t$(n){return qi(n._redirectPersistence)}function n$(n){return Yp(Jj,n.config.apiKey,n.name)}function r$(n,e,t=!1){return b(this,null,function*(){if(Ar(n.app))return Promise.reject(Gi(n));let r=Zs(n),i=Zj(r,e),a=yield new jw(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var i$=10*60*1e3,$w=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!o$(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Nx(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(qs(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=i$&&this.cachedEventUids.clear(),this.cachedEventUids.has(YA(e))}saveEventToCache(e){this.cachedEventUids.add(YA(e)),this.lastProcessedEventTime=Date.now()}};function YA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Nx({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function o$(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nx(n);default:return!1}}function s$(t){return b(this,arguments,function*(n,e={}){return Zo(n,"GET","/v1/projects",e)})}var a$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,u$=/^https?/;function c$(n){return b(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield s$(n);for(let t of e)try{if(l$(t))return}catch{}ai(n,"unauthorized-domain")})}function l$(n){let e=Dw(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!u$.test(t))return!1;if(a$.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var d$=new Gs(3e4,6e4);function JA(){let n=si().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function h$(n){return new Promise((e,t)=>{var r,i,o;function a(){JA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JA(),t(qs(n,"network-request-failed"))},timeout:d$.get()})}if(!((i=(r=si().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=si().gapi)===null||o===void 0)&&o.load)a();else{let c=Ix("iframefcb");return si()[c]=()=>{gapi.load?a():t(qs(n,"network-request-failed"))},wx(`${_j()}?onload=${c}`).catch(d=>t(d))}}).catch(e=>{throw Xp=null,e})}var Xp=null;function f$(n){return Xp=Xp||h$(n),Xp}var p$=new Gs(5e3,15e3),m$="__/auth/iframe",g$="emulator/auth/iframe",_$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},v$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function y$(n){let e=n.config;_e(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Gw(e,g$):`https://${n.config.authDomain}/${m$}`,r={apiKey:e.apiKey,appName:n.name,v:Ho},i=v$.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Yl(r).slice(1)}`}function w$(n){return b(this,null,function*(){let e=yield f$(n),t=si().gapi;return _e(t,n,"internal-error"),e.open({where:document.body,url:y$(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_$,dontclear:!0},r=>new Promise((i,o)=>b(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=qs(n,"network-request-failed"),c=si().setTimeout(()=>{o(a)},p$.get());function d(){si().clearTimeout(c),i(r)}r.ping(d).then(d,()=>{o(a)})})))})}var I$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},E$=500,b$=600,C$="_blank",T$="http://localhost",lm=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function D$(n,e,t,r=E$,i=b$){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",d=Object.assign(Object.assign({},I$),{width:r.toString(),height:i.toString(),top:o,left:a}),f=tn().toLowerCase();t&&(c=fx(f)?C$:t),dx(f)&&(e=e||T$,d.scrollbars="yes");let g=Object.entries(d).reduce((E,[C,F])=>`${E}${C}=${F},`,"");if(dj(f)&&c!=="_self")return S$(e||"",c),new lm(null);let y=window.open(e||"",c,g);_e(y,n,"popup-blocked");try{y.focus()}catch{}return new lm(y)}function S$(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var A$="__/auth/handler",x$="emulator/auth/handler",M$=encodeURIComponent("fac");function XA(n,e,t,r,i,o){return b(this,null,function*(){_e(n.config.authDomain,n,"auth-domain-config-required"),_e(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ho,eventId:i};if(e instanceof sm){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",CA(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[g,y]of Object.entries(o||{}))a[g]=y}if(e instanceof Lw){let g=e.getScopes().filter(y=>y!=="");g.length>0&&(a.scopes=g.join(","))}n.tenantId&&(a.tid=n.tenantId);let c=a;for(let g of Object.keys(c))c[g]===void 0&&delete c[g];let d=yield n._getAppCheckToken(),f=d?`#${M$}=${encodeURIComponent(d)}`:"";return`${P$(n)}?${Yl(c).slice(1)}${f}`})}function P$({config:n}){return n.emulator?Gw(n,x$):`https://${n.authDomain}/${A$}`}var Tw="webStorageSupport",zw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iI,this._completeRedirectFn=r$,this._overrideRedirectResult=e$}_openPopup(e,t,r,i){return b(this,null,function*(){var o;Go((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let a=yield XA(e,t,r,Dw(),i);return D$(e,a,Ax())})}_openRedirect(e,t,r,i){return b(this,null,function*(){yield this._originValidation(e);let o=yield XA(e,t,r,Dw(),i);return Vj(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Go(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return b(this,null,function*(){let t=yield w$(e),r=new $w(e);return t.register("authEvent",i=>(_e(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tw,{type:Tw},i=>{var o;let a=(o=i?.[0])===null||o===void 0?void 0:o[Tw];a!==void 0&&t(!!a),ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=c$(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vx()||hx()||Qw()}},kx=zw;var ex="@firebase/auth",tx="1.7.9";var Hw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function R$(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function N$(n){zo(new dr("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;_e(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let d={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yx(n)},f=new Nw(r,i,o,d);return wj(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),zo(new dr("auth-internal",e=>{let t=Zs(e.getProvider("auth").getImmediate());return(r=>new Hw(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wt(ex,tx,R$(n)),Wt(ex,tx,"esm2017")}var k$=5*60,O$=ow("authIdTokenMaxAge")||k$,nx=null,L$=n=>e=>b(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>O$)return;let i=t?.token;nx!==i&&(nx=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function oI(n=Fu()){let e=ed(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Yw(n,{popupRedirectResolver:kx,persistence:[Rx,Sx,iI]}),r=ow("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let a=L$(o.toString());rI(t,a,()=>a(t.currentUser)),nI(t,c=>a(c))}}let i=rw("auth");return i&&Jw(t,`http://${i}`),t}function F$(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}mj({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=qs("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",F$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});N$("Browser");var Ox="auth",Ks=class{constructor(e){return e}},ld=class{constructor(){return td(Ox)}};var sI=new ae("angularfire2.auth-instances");function Dz(n,e){let t=Wp(Ox,n,e);return t&&new Ks(t)}function Sz(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ks(r)}}var Az={provide:ld,deps:[[new hn,sI]]},xz={provide:Ks,useFactory:Dz,deps:[[new hn,sI],zi]};function Lx(n,...e){return Wt("angularfire",zs.full,"auth"),Yr([xz,Az,{provide:sI,useFactory:Sz(n),multi:!0,deps:[et,un,Uu,Hs,[new hn,Bu],...e]}])}var Fx=nn(eI,!0);var Vx=nn(oI,!0);var Bx=nn(tI,!0);var Ux=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jx={};var Ko,aI;(function(){var n;function e(M,T){function D(){}D.prototype=T.prototype,M.D=T.prototype,M.prototype=new D,M.prototype.constructor=M,M.C=function(x,R,N){for(var A=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)A[Qe-2]=arguments[Qe];return T.prototype[R].apply(x,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,T,D){D||(D=0);var x=Array(16);if(typeof T=="string")for(var R=0;16>R;++R)x[R]=T.charCodeAt(D++)|T.charCodeAt(D++)<<8|T.charCodeAt(D++)<<16|T.charCodeAt(D++)<<24;else for(R=0;16>R;++R)x[R]=T[D++]|T[D++]<<8|T[D++]<<16|T[D++]<<24;T=M.g[0],D=M.g[1],R=M.g[2];var N=M.g[3],A=T+(N^D&(R^N))+x[0]+3614090360&4294967295;T=D+(A<<7&4294967295|A>>>25),A=N+(R^T&(D^R))+x[1]+3905402710&4294967295,N=T+(A<<12&4294967295|A>>>20),A=R+(D^N&(T^D))+x[2]+606105819&4294967295,R=N+(A<<17&4294967295|A>>>15),A=D+(T^R&(N^T))+x[3]+3250441966&4294967295,D=R+(A<<22&4294967295|A>>>10),A=T+(N^D&(R^N))+x[4]+4118548399&4294967295,T=D+(A<<7&4294967295|A>>>25),A=N+(R^T&(D^R))+x[5]+1200080426&4294967295,N=T+(A<<12&4294967295|A>>>20),A=R+(D^N&(T^D))+x[6]+2821735955&4294967295,R=N+(A<<17&4294967295|A>>>15),A=D+(T^R&(N^T))+x[7]+4249261313&4294967295,D=R+(A<<22&4294967295|A>>>10),A=T+(N^D&(R^N))+x[8]+1770035416&4294967295,T=D+(A<<7&4294967295|A>>>25),A=N+(R^T&(D^R))+x[9]+2336552879&4294967295,N=T+(A<<12&4294967295|A>>>20),A=R+(D^N&(T^D))+x[10]+4294925233&4294967295,R=N+(A<<17&4294967295|A>>>15),A=D+(T^R&(N^T))+x[11]+2304563134&4294967295,D=R+(A<<22&4294967295|A>>>10),A=T+(N^D&(R^N))+x[12]+1804603682&4294967295,T=D+(A<<7&4294967295|A>>>25),A=N+(R^T&(D^R))+x[13]+4254626195&4294967295,N=T+(A<<12&4294967295|A>>>20),A=R+(D^N&(T^D))+x[14]+2792965006&4294967295,R=N+(A<<17&4294967295|A>>>15),A=D+(T^R&(N^T))+x[15]+1236535329&4294967295,D=R+(A<<22&4294967295|A>>>10),A=T+(R^N&(D^R))+x[1]+4129170786&4294967295,T=D+(A<<5&4294967295|A>>>27),A=N+(D^R&(T^D))+x[6]+3225465664&4294967295,N=T+(A<<9&4294967295|A>>>23),A=R+(T^D&(N^T))+x[11]+643717713&4294967295,R=N+(A<<14&4294967295|A>>>18),A=D+(N^T&(R^N))+x[0]+3921069994&4294967295,D=R+(A<<20&4294967295|A>>>12),A=T+(R^N&(D^R))+x[5]+3593408605&4294967295,T=D+(A<<5&4294967295|A>>>27),A=N+(D^R&(T^D))+x[10]+38016083&4294967295,N=T+(A<<9&4294967295|A>>>23),A=R+(T^D&(N^T))+x[15]+3634488961&4294967295,R=N+(A<<14&4294967295|A>>>18),A=D+(N^T&(R^N))+x[4]+3889429448&4294967295,D=R+(A<<20&4294967295|A>>>12),A=T+(R^N&(D^R))+x[9]+568446438&4294967295,T=D+(A<<5&4294967295|A>>>27),A=N+(D^R&(T^D))+x[14]+3275163606&4294967295,N=T+(A<<9&4294967295|A>>>23),A=R+(T^D&(N^T))+x[3]+4107603335&4294967295,R=N+(A<<14&4294967295|A>>>18),A=D+(N^T&(R^N))+x[8]+1163531501&4294967295,D=R+(A<<20&4294967295|A>>>12),A=T+(R^N&(D^R))+x[13]+2850285829&4294967295,T=D+(A<<5&4294967295|A>>>27),A=N+(D^R&(T^D))+x[2]+4243563512&4294967295,N=T+(A<<9&4294967295|A>>>23),A=R+(T^D&(N^T))+x[7]+1735328473&4294967295,R=N+(A<<14&4294967295|A>>>18),A=D+(N^T&(R^N))+x[12]+2368359562&4294967295,D=R+(A<<20&4294967295|A>>>12),A=T+(D^R^N)+x[5]+4294588738&4294967295,T=D+(A<<4&4294967295|A>>>28),A=N+(T^D^R)+x[8]+2272392833&4294967295,N=T+(A<<11&4294967295|A>>>21),A=R+(N^T^D)+x[11]+1839030562&4294967295,R=N+(A<<16&4294967295|A>>>16),A=D+(R^N^T)+x[14]+4259657740&4294967295,D=R+(A<<23&4294967295|A>>>9),A=T+(D^R^N)+x[1]+2763975236&4294967295,T=D+(A<<4&4294967295|A>>>28),A=N+(T^D^R)+x[4]+1272893353&4294967295,N=T+(A<<11&4294967295|A>>>21),A=R+(N^T^D)+x[7]+4139469664&4294967295,R=N+(A<<16&4294967295|A>>>16),A=D+(R^N^T)+x[10]+3200236656&4294967295,D=R+(A<<23&4294967295|A>>>9),A=T+(D^R^N)+x[13]+681279174&4294967295,T=D+(A<<4&4294967295|A>>>28),A=N+(T^D^R)+x[0]+3936430074&4294967295,N=T+(A<<11&4294967295|A>>>21),A=R+(N^T^D)+x[3]+3572445317&4294967295,R=N+(A<<16&4294967295|A>>>16),A=D+(R^N^T)+x[6]+76029189&4294967295,D=R+(A<<23&4294967295|A>>>9),A=T+(D^R^N)+x[9]+3654602809&4294967295,T=D+(A<<4&4294967295|A>>>28),A=N+(T^D^R)+x[12]+3873151461&4294967295,N=T+(A<<11&4294967295|A>>>21),A=R+(N^T^D)+x[15]+530742520&4294967295,R=N+(A<<16&4294967295|A>>>16),A=D+(R^N^T)+x[2]+3299628645&4294967295,D=R+(A<<23&4294967295|A>>>9),A=T+(R^(D|~N))+x[0]+4096336452&4294967295,T=D+(A<<6&4294967295|A>>>26),A=N+(D^(T|~R))+x[7]+1126891415&4294967295,N=T+(A<<10&4294967295|A>>>22),A=R+(T^(N|~D))+x[14]+2878612391&4294967295,R=N+(A<<15&4294967295|A>>>17),A=D+(N^(R|~T))+x[5]+4237533241&4294967295,D=R+(A<<21&4294967295|A>>>11),A=T+(R^(D|~N))+x[12]+1700485571&4294967295,T=D+(A<<6&4294967295|A>>>26),A=N+(D^(T|~R))+x[3]+2399980690&4294967295,N=T+(A<<10&4294967295|A>>>22),A=R+(T^(N|~D))+x[10]+4293915773&4294967295,R=N+(A<<15&4294967295|A>>>17),A=D+(N^(R|~T))+x[1]+2240044497&4294967295,D=R+(A<<21&4294967295|A>>>11),A=T+(R^(D|~N))+x[8]+1873313359&4294967295,T=D+(A<<6&4294967295|A>>>26),A=N+(D^(T|~R))+x[15]+4264355552&4294967295,N=T+(A<<10&4294967295|A>>>22),A=R+(T^(N|~D))+x[6]+2734768916&4294967295,R=N+(A<<15&4294967295|A>>>17),A=D+(N^(R|~T))+x[13]+1309151649&4294967295,D=R+(A<<21&4294967295|A>>>11),A=T+(R^(D|~N))+x[4]+4149444226&4294967295,T=D+(A<<6&4294967295|A>>>26),A=N+(D^(T|~R))+x[11]+3174756917&4294967295,N=T+(A<<10&4294967295|A>>>22),A=R+(T^(N|~D))+x[2]+718787259&4294967295,R=N+(A<<15&4294967295|A>>>17),A=D+(N^(R|~T))+x[9]+3951481745&4294967295,M.g[0]=M.g[0]+T&4294967295,M.g[1]=M.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,M.g[2]=M.g[2]+R&4294967295,M.g[3]=M.g[3]+N&4294967295}r.prototype.u=function(M,T){T===void 0&&(T=M.length);for(var D=T-this.blockSize,x=this.B,R=this.h,N=0;N<T;){if(R==0)for(;N<=D;)i(this,M,N),N+=this.blockSize;if(typeof M=="string"){for(;N<T;)if(x[R++]=M.charCodeAt(N++),R==this.blockSize){i(this,x),R=0;break}}else for(;N<T;)if(x[R++]=M[N++],R==this.blockSize){i(this,x),R=0;break}}this.h=R,this.o+=T},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var T=1;T<M.length-8;++T)M[T]=0;var D=8*this.o;for(T=M.length-8;T<M.length;++T)M[T]=D&255,D/=256;for(this.u(M),M=Array(16),T=D=0;4>T;++T)for(var x=0;32>x;x+=8)M[D++]=this.g[T]>>>x&255;return M};function o(M,T){var D=c;return Object.prototype.hasOwnProperty.call(D,M)?D[M]:D[M]=T(M)}function a(M,T){this.h=T;for(var D=[],x=!0,R=M.length-1;0<=R;R--){var N=M[R]|0;x&&N==T||(D[R]=N,x=!1)}this.g=D}var c={};function d(M){return-128<=M&&128>M?o(M,function(T){return new a([T|0],0>T?-1:0)}):new a([M|0],0>M?-1:0)}function f(M){if(isNaN(M)||!isFinite(M))return y;if(0>M)return $(f(-M));for(var T=[],D=1,x=0;M>=D;x++)T[x]=M/D|0,D*=4294967296;return new a(T,0)}function g(M,T){if(M.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(M.charAt(0)=="-")return $(g(M.substring(1),T));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(T,8)),x=y,R=0;R<M.length;R+=8){var N=Math.min(8,M.length-R),A=parseInt(M.substring(R,R+N),T);8>N?(N=f(Math.pow(T,N)),x=x.j(N).add(f(A))):(x=x.j(D),x=x.add(f(A)))}return x}var y=d(0),E=d(1),C=d(16777216);n=a.prototype,n.m=function(){if(z(this))return-$(this).m();for(var M=0,T=1,D=0;D<this.g.length;D++){var x=this.i(D);M+=(0<=x?x:4294967296+x)*T,T*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(F(this))return"0";if(z(this))return"-"+$(this).toString(M);for(var T=f(Math.pow(M,6)),D=this,x="";;){var R=ce(D,T).g;D=Z(D,R.j(T));var N=((0<D.g.length?D.g[0]:D.h)>>>0).toString(M);if(D=R,F(D))return N+x;for(;6>N.length;)N="0"+N;x=N+x}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function F(M){if(M.h!=0)return!1;for(var T=0;T<M.g.length;T++)if(M.g[T]!=0)return!1;return!0}function z(M){return M.h==-1}n.l=function(M){return M=Z(this,M),z(M)?-1:F(M)?0:1};function $(M){for(var T=M.g.length,D=[],x=0;x<T;x++)D[x]=~M.g[x];return new a(D,~M.h).add(E)}n.abs=function(){return z(this)?$(this):this},n.add=function(M){for(var T=Math.max(this.g.length,M.g.length),D=[],x=0,R=0;R<=T;R++){var N=x+(this.i(R)&65535)+(M.i(R)&65535),A=(N>>>16)+(this.i(R)>>>16)+(M.i(R)>>>16);x=A>>>16,N&=65535,A&=65535,D[R]=A<<16|N}return new a(D,D[D.length-1]&-2147483648?-1:0)};function Z(M,T){return M.add($(T))}n.j=function(M){if(F(this)||F(M))return y;if(z(this))return z(M)?$(this).j($(M)):$($(this).j(M));if(z(M))return $(this.j($(M)));if(0>this.l(C)&&0>M.l(C))return f(this.m()*M.m());for(var T=this.g.length+M.g.length,D=[],x=0;x<2*T;x++)D[x]=0;for(x=0;x<this.g.length;x++)for(var R=0;R<M.g.length;R++){var N=this.i(x)>>>16,A=this.i(x)&65535,Qe=M.i(R)>>>16,In=M.i(R)&65535;D[2*x+2*R]+=A*In,te(D,2*x+2*R),D[2*x+2*R+1]+=N*In,te(D,2*x+2*R+1),D[2*x+2*R+1]+=A*Qe,te(D,2*x+2*R+1),D[2*x+2*R+2]+=N*Qe,te(D,2*x+2*R+2)}for(x=0;x<T;x++)D[x]=D[2*x+1]<<16|D[2*x];for(x=T;x<2*T;x++)D[x]=0;return new a(D,0)};function te(M,T){for(;(M[T]&65535)!=M[T];)M[T+1]+=M[T]>>>16,M[T]&=65535,T++}function oe(M,T){this.g=M,this.h=T}function ce(M,T){if(F(T))throw Error("division by zero");if(F(M))return new oe(y,y);if(z(M))return T=ce($(M),T),new oe($(T.g),$(T.h));if(z(T))return T=ce(M,$(T)),new oe($(T.g),T.h);if(30<M.g.length){if(z(M)||z(T))throw Error("slowDivide_ only works with positive integers.");for(var D=E,x=T;0>=x.l(M);)D=ot(D),x=ot(x);var R=he(D,1),N=he(x,1);for(x=he(x,2),D=he(D,2);!F(x);){var A=N.add(x);0>=A.l(M)&&(R=R.add(D),N=A),x=he(x,1),D=he(D,1)}return T=Z(M,R.j(T)),new oe(R,T)}for(R=y;0<=M.l(T);){for(D=Math.max(1,Math.floor(M.m()/T.m())),x=Math.ceil(Math.log(D)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),N=f(D),A=N.j(T);z(A)||0<A.l(M);)D-=x,N=f(D),A=N.j(T);F(N)&&(N=E),R=R.add(N),M=Z(M,A)}return new oe(R,M)}n.A=function(M){return ce(this,M).h},n.and=function(M){for(var T=Math.max(this.g.length,M.g.length),D=[],x=0;x<T;x++)D[x]=this.i(x)&M.i(x);return new a(D,this.h&M.h)},n.or=function(M){for(var T=Math.max(this.g.length,M.g.length),D=[],x=0;x<T;x++)D[x]=this.i(x)|M.i(x);return new a(D,this.h|M.h)},n.xor=function(M){for(var T=Math.max(this.g.length,M.g.length),D=[],x=0;x<T;x++)D[x]=this.i(x)^M.i(x);return new a(D,this.h^M.h)};function ot(M){for(var T=M.g.length+1,D=[],x=0;x<T;x++)D[x]=M.i(x)<<1|M.i(x-1)>>>31;return new a(D,M.h)}function he(M,T){var D=T>>5;T%=32;for(var x=M.g.length-D,R=[],N=0;N<x;N++)R[N]=0<T?M.i(N+D)>>>T|M.i(N+D+1)<<32-T:M.i(N+D);return new a(R,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,aI=jx.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=g,Ko=jx.Integer=a}).apply(typeof Ux<"u"?Ux:typeof self<"u"?self:typeof window<"u"?window:{});var mm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wi={};var uI,Mz,zu,cI,dd,gm,lI,dI,hI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,m,v){return l==Array.prototype||l==Object.prototype||(l[m]=v.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof mm=="object"&&mm];for(var m=0;m<l.length;++m){var v=l[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(l,m){if(m)e:{var v=r;l=l.split(".");for(var I=0;I<l.length-1;I++){var k=l[I];if(!(k in v))break e;v=v[k]}l=l[l.length-1],I=v[l],m=m(I),m!=I&&m!=null&&e(v,l,{configurable:!0,writable:!0,value:m})}}function o(l,m){l instanceof String&&(l+="");var v=0,I=!1,k={next:function(){if(!I&&v<l.length){var U=v++;return{value:m(U,l[U]),done:!1}}return I=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}i("Array.prototype.values",function(l){return l||function(){return o(this,function(m,v){return v})}});var a=a||{},c=this||self;function d(l){var m=typeof l;return m=m!="object"?m:l?Array.isArray(l)?"array":m:"null",m=="array"||m=="object"&&typeof l.length=="number"}function f(l){var m=typeof l;return m=="object"&&l!=null||m=="function"}function g(l,m,v){return l.call.apply(l.bind,arguments)}function y(l,m,v){if(!l)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,I),l.apply(m,k)}}return function(){return l.apply(m,arguments)}}function E(l,m,v){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,E.apply(null,arguments)}function C(l,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),l.apply(this,I)}}function F(l,m){function v(){}v.prototype=m.prototype,l.aa=m.prototype,l.prototype=new v,l.prototype.constructor=l,l.Qb=function(I,k,U){for(var Q=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)Q[Ne-2]=arguments[Ne];return m.prototype[k].apply(I,Q)}}function z(l){let m=l.length;if(0<m){let v=Array(m);for(let I=0;I<m;I++)v[I]=l[I];return v}return[]}function $(l,m){for(let v=1;v<arguments.length;v++){let I=arguments[v];if(d(I)){let k=l.length||0,U=I.length||0;l.length=k+U;for(let Q=0;Q<U;Q++)l[k+Q]=I[Q]}else l.push(I)}}class Z{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function te(l){return/^[\s\xa0]*$/.test(l)}function oe(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function ce(l){return ce[" "](l),l}ce[" "]=function(){};var ot=oe().indexOf("Gecko")!=-1&&!(oe().toLowerCase().indexOf("webkit")!=-1&&oe().indexOf("Edge")==-1)&&!(oe().indexOf("Trident")!=-1||oe().indexOf("MSIE")!=-1)&&oe().indexOf("Edge")==-1;function he(l,m,v){for(let I in l)m.call(v,l[I],I,l)}function M(l,m){for(let v in l)m.call(void 0,l[v],v,l)}function T(l){let m={};for(let v in l)m[v]=l[v];return m}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(l,m){let v,I;for(let k=1;k<arguments.length;k++){I=arguments[k];for(v in I)l[v]=I[v];for(let U=0;U<D.length;U++)v=D[U],Object.prototype.hasOwnProperty.call(I,v)&&(l[v]=I[v])}}function R(l){var m=1;l=l.split(":");let v=[];for(;0<m&&l.length;)v.push(l.shift()),m--;return l.length&&v.push(l.join(":")),v}function N(l){c.setTimeout(()=>{throw l},0)}function A(){var l=st;let m=null;return l.g&&(m=l.g,l.g=l.g.next,l.g||(l.h=null),m.next=null),m}class Qe{constructor(){this.h=this.g=null}add(m,v){let I=In.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var In=new Z(()=>new Ee,l=>l.reset());class Ee{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Xi,de=!1,st=new Qe,on=()=>{let l=c.Promise.resolve(void 0);Xi=()=>{l.then(ln)}};var ln=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(v){N(v)}var m=In;m.j(l),100>m.h&&(m.h++,l.next=m.g,m.g=l)}de=!1};function nt(){this.s=this.s,this.C=this.C}nt.prototype.s=!1,nt.prototype.ma=function(){this.s||(this.s=!0,this.N())},nt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(l,m){this.type=l,this.g=this.target=m,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,m=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let v=()=>{};c.addEventListener("test",v,m),c.removeEventListener("test",v,m)}catch{}return l}();function En(l,m){if(ye.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var v=this.type=l.type,I=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=m,m=l.relatedTarget){if(ot){e:{try{ce(m.nodeName);var k=!0;break e}catch{}k=!1}k||(m=null)}}else v=="mouseover"?m=l.fromElement:v=="mouseout"&&(m=l.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Nr[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&En.aa.h.call(this)}}F(En,ye);var Nr={2:"touch",3:"pen",4:"mouse"};En.prototype.h=function(){En.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var eo="closure_listenable_"+(1e6*Math.random()|0),Ec=0;function bc(l,m,v,I,k){this.listener=l,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=k,this.key=++Ec,this.da=this.fa=!1}function kr(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function to(l){this.src=l,this.g={},this.h=0}to.prototype.add=function(l,m,v,I,k){var U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);var Q=da(l,m,I,k);return-1<Q?(m=l[Q],v||(m.fa=!1)):(m=new bc(m,this.src,U,!!I,k),m.fa=v,l.push(m)),m};function Cc(l,m){var v=m.type;if(v in l.g){var I=l.g[v],k=Array.prototype.indexOf.call(I,m,void 0),U;(U=0<=k)&&Array.prototype.splice.call(I,k,1),U&&(kr(m),l.g[v].length==0&&(delete l.g[v],l.h--))}}function da(l,m,v,I){for(var k=0;k<l.length;++k){var U=l[k];if(!U.da&&U.listener==m&&U.capture==!!v&&U.ha==I)return k}return-1}var ha="closure_lm_"+(1e6*Math.random()|0),ns={};function rs(l,m,v,I,k){if(I&&I.once)return fa(l,m,v,I,k);if(Array.isArray(m)){for(var U=0;U<m.length;U++)rs(l,m[U],v,I,k);return null}return v=ga(v),l&&l[eo]?l.K(m,v,f(I)?!!I.capture:!!I,k):qd(l,m,v,!1,I,k)}function qd(l,m,v,I,k,U){if(!m)throw Error("Invalid event type");var Q=f(k)?!!k.capture:!!k,Ne=is(l);if(Ne||(l[ha]=Ne=new to(l)),v=Ne.add(m,v,I,Q,U),v.proxy)return v;if(I=Gd(),v.proxy=I,I.src=l,I.listener=v,l.addEventListener)Ve||(k=Q),k===void 0&&(k=!1),l.addEventListener(m.toString(),I,k);else if(l.attachEvent)l.attachEvent(Wd(m.toString()),I);else if(l.addListener&&l.removeListener)l.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Gd(){function l(v){return m.call(l.src,l.listener,v)}let m=Sg;return l}function fa(l,m,v,I,k){if(Array.isArray(m)){for(var U=0;U<m.length;U++)fa(l,m[U],v,I,k);return null}return v=ga(v),l&&l[eo]?l.L(m,v,f(I)?!!I.capture:!!I,k):qd(l,m,v,!0,I,k)}function Tc(l,m,v,I,k){if(Array.isArray(m))for(var U=0;U<m.length;U++)Tc(l,m[U],v,I,k);else I=f(I)?!!I.capture:!!I,v=ga(v),l&&l[eo]?(l=l.i,m=String(m).toString(),m in l.g&&(U=l.g[m],v=da(U,v,I,k),-1<v&&(kr(U[v]),Array.prototype.splice.call(U,v,1),U.length==0&&(delete l.g[m],l.h--)))):l&&(l=is(l))&&(m=l.g[m.toString()],l=-1,m&&(l=da(m,v,I,k)),(v=-1<l?m[l]:null)&&pa(v))}function pa(l){if(typeof l!="number"&&l&&!l.da){var m=l.src;if(m&&m[eo])Cc(m.i,l);else{var v=l.type,I=l.proxy;m.removeEventListener?m.removeEventListener(v,I,l.capture):m.detachEvent?m.detachEvent(Wd(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=is(m))?(Cc(v,l),v.h==0&&(v.src=null,m[ha]=null)):kr(l)}}}function Wd(l){return l in ns?ns[l]:ns[l]="on"+l}function Sg(l,m){if(l.da)l=!0;else{m=new En(m,this);var v=l.listener,I=l.ha||l.src;l.fa&&pa(l),l=v.call(I,m)}return l}function is(l){return l=l[ha],l instanceof to?l:null}var ma="__closure_events_fn_"+(1e9*Math.random()>>>0);function ga(l){return typeof l=="function"?l:(l[ma]||(l[ma]=function(m){return l.handleEvent(m)}),l[ma])}function Zt(){nt.call(this),this.i=new to(this),this.M=this,this.F=null}F(Zt,nt),Zt.prototype[eo]=!0,Zt.prototype.removeEventListener=function(l,m,v,I){Tc(this,l,m,v,I)};function Kt(l,m){var v,I=l.F;if(I)for(v=[];I;I=I.F)v.push(I);if(l=l.M,I=m.type||m,typeof m=="string")m=new ye(m,l);else if(m instanceof ye)m.target=m.target||l;else{var k=m;m=new ye(I,l),x(m,k)}if(k=!0,v)for(var U=v.length-1;0<=U;U--){var Q=m.g=v[U];k=os(Q,I,!0,m)&&k}if(Q=m.g=l,k=os(Q,I,!0,m)&&k,k=os(Q,I,!1,m)&&k,v)for(U=0;U<v.length;U++)Q=m.g=v[U],k=os(Q,I,!1,m)&&k}Zt.prototype.N=function(){if(Zt.aa.N.call(this),this.i){var l=this.i,m;for(m in l.g){for(var v=l.g[m],I=0;I<v.length;I++)kr(v[I]);delete l.g[m],l.h--}}this.F=null},Zt.prototype.K=function(l,m,v,I){return this.i.add(String(l),m,!1,v,I)},Zt.prototype.L=function(l,m,v,I){return this.i.add(String(l),m,!0,v,I)};function os(l,m,v,I){if(m=l.i.g[String(m)],!m)return!0;m=m.concat();for(var k=!0,U=0;U<m.length;++U){var Q=m[U];if(Q&&!Q.da&&Q.capture==v){var Ne=Q.listener,_t=Q.ha||Q.src;Q.fa&&Cc(l.i,Q),k=Ne.call(_t,I)!==!1&&k}}return k&&!I.defaultPrevented}function Zd(l,m,v){if(typeof l=="function")v&&(l=E(l,v));else if(l&&typeof l.handleEvent=="function")l=E(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:c.setTimeout(l,m||0)}function Dc(l){l.g=Zd(()=>{l.g=null,l.i&&(l.i=!1,Dc(l))},l.l);let m=l.h;l.h=null,l.m.apply(null,m)}class Sc extends nt{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Dc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function no(l){nt.call(this),this.h=l,this.g={}}F(no,nt);var Kd=[];function ro(l){he(l.g,function(m,v){this.g.hasOwnProperty(v)&&pa(m)},l),l.g={}}no.prototype.N=function(){no.aa.N.call(this),ro(this)},no.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ac=c.JSON.stringify,Ag=c.JSON.parse,Qd=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function _a(){}_a.prototype.h=null;function xc(l){return l.h||(l.h=l.i())}function Yd(){}var ss={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mc(){ye.call(this,"d")}F(Mc,ye);function Pc(){ye.call(this,"c")}F(Pc,ye);var vi={},Jd=null;function io(){return Jd=Jd||new Zt}vi.La="serverreachability";function Xd(l){ye.call(this,vi.La,l)}F(Xd,ye);function as(l){let m=io();Kt(m,new Xd(m))}vi.STAT_EVENT="statevent";function eh(l,m){ye.call(this,vi.STAT_EVENT,l),this.stat=m}F(eh,ye);function sn(l){let m=io();Kt(m,new eh(m,l))}vi.Ma="timingevent";function Fn(l,m){ye.call(this,vi.Ma,l),this.size=m}F(Fn,ye);function ne(l,m){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},m)}function oo(){this.g=!0}oo.prototype.xa=function(){this.g=!1};function th(l,m,v,I,k,U){l.info(function(){if(l.g)if(U)for(var Q="",Ne=U.split("&"),_t=0;_t<Ne.length;_t++){var Ge=Ne[_t].split("=");if(1<Ge.length){var dt=Ge[0];Ge=Ge[1];var Qt=dt.split("_");Q=2<=Qt.length&&Qt[1]=="type"?Q+(dt+"="+Ge+"&"):Q+(dt+"=redacted&")}}else Q=null;else Q=U;return"XMLHTTP REQ ("+I+") [attempt "+k+"]: "+m+`
`+v+`
`+Q})}function nh(l,m,v,I,k,U,Q){l.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+k+"]: "+m+`
`+v+`
`+U+" "+Q})}function yi(l,m,v,I){l.info(function(){return"XMLHTTP TEXT ("+m+"): "+rh(l,v)+(I?" "+I:"")})}function Rc(l,m){l.info(function(){return"TIMEOUT: "+m})}oo.prototype.info=function(){};function rh(l,m){if(!l.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(l=0;l<v.length;l++)if(Array.isArray(v[l])){var I=v[l];if(!(2>I.length)){var k=I[1];if(Array.isArray(k)&&!(1>k.length)){var U=k[0];if(U!="noop"&&U!="stop"&&U!="close")for(var Q=1;Q<k.length;Q++)k[Q]=""}}}}return Ac(v)}catch{return m}}var pr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kc;function va(){}F(va,_a),va.prototype.g=function(){return new XMLHttpRequest},va.prototype.i=function(){return{}},kc=new va;function Or(l,m,v,I){this.j=l,this.i=m,this.l=v,this.R=I||1,this.U=new no(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ih}function ih(){this.i=null,this.g="",this.h=!1}var Oc={},Lc={};function so(l,m,v){l.L=1,l.v=uo(an(m)),l.m=v,l.P=!0,oh(l,null)}function oh(l,m){l.F=Date.now(),ya(l),l.A=an(l.v);var v=l.A,I=l.R;Array.isArray(I)||(I=[String(I)]),rt(v.i,"t",I),l.C=0,v=l.j.J,l.h=new ih,l.g=ys(l.j,v?m:null,!l.m),0<l.O&&(l.M=new Sc(E(l.Y,l,l.g),l.O)),m=l.U,v=l.g,I=l.ca;var k="readystatechange";Array.isArray(k)||(k&&(Kd[0]=k.toString()),k=Kd);for(var U=0;U<k.length;U++){var Q=rs(v,k[U],I||m.handleEvent,!1,m.h||m);if(!Q)break;m.g[Q.key]=Q}m=l.H?T(l.H):{},l.m?(l.u||(l.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,m)):(l.u="GET",l.g.ea(l.A,l.u,null,m)),as(),th(l.i,l.u,l.A,l.l,l.R,l.m)}Or.prototype.ca=function(l){l=l.target;let m=this.M;m&&Bn(l)==3?m.j():this.Y(l)},Or.prototype.Y=function(l){try{if(l==this.g)e:{let Qt=Bn(this.g);var m=this.g.Ba();let jn=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||hh(this.g)))){this.J||Qt!=4||m==7||(m==8||0>=jn?as(3):as(2)),us(this);var v=this.g.Z();this.X=v;t:if(sh(this)){var I=hh(this.g);l="";var k=I.length,U=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Lr(this),mr(this);var Q="";break t}this.h.i=new c.TextDecoder}for(m=0;m<k;m++)this.h.h=!0,l+=this.h.i.decode(I[m],{stream:!(U&&m==k-1)});I.length=0,this.h.g+=l,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=v==200,nh(this.i,this.u,this.A,this.l,this.R,Qt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,_t=this.g;if((Ne=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(Ne)){var Ge=Ne;break t}}Ge=null}if(v=Ge)yi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wa(this,v);else{this.o=!1,this.s=3,sn(12),Lr(this),mr(this);break e}}if(this.P){v=!0;let $n;for(;!this.J&&this.C<Q.length;)if($n=xg(this,Q),$n==Lc){Qt==4&&(this.s=4,sn(14),v=!1),yi(this.i,this.l,null,"[Incomplete Response]");break}else if($n==Oc){this.s=4,sn(15),yi(this.i,this.l,Q,"[Invalid Chunk]"),v=!1;break}else yi(this.i,this.l,$n,null),wa(this,$n);if(sh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||Q.length!=0||this.h.h||(this.s=1,sn(16),v=!1),this.o=this.o&&v,!v)yi(this.i,this.l,Q,"[Invalid Chunked Response]"),Lr(this),mr(this);else if(0<Q.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),Da(dt),dt.M=!0,sn(11))}}else yi(this.i,this.l,Q,null),wa(this,Q);Qt==4&&Lr(this),this.o&&!this.J&&(Qt==4?gh(this.j,this):(this.o=!1,ya(this)))}else fh(this.g),v==400&&0<Q.indexOf("Unknown SID")?(this.s=3,sn(12)):(this.s=0,sn(13)),Lr(this),mr(this)}}}catch{}finally{}};function sh(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function xg(l,m){var v=l.C,I=m.indexOf(`
`,v);return I==-1?Lc:(v=Number(m.substring(v,I)),isNaN(v)?Oc:(I+=1,I+v>m.length?Lc:(m=m.slice(I,I+v),l.C=I+v,m)))}Or.prototype.cancel=function(){this.J=!0,Lr(this)};function ya(l){l.S=Date.now()+l.I,ah(l,l.I)}function ah(l,m){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ne(E(l.ba,l),m)}function us(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Or.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(Rc(this.i,this.A),this.L!=2&&(as(),sn(17)),Lr(this),this.s=2,mr(this)):ah(this,this.S-l)};function mr(l){l.j.G==0||l.J||gh(l.j,l)}function Lr(l){us(l);var m=l.M;m&&typeof m.ma=="function"&&m.ma(),l.M=null,ro(l.U),l.g&&(m=l.g,l.g=null,m.abort(),m.ma())}function wa(l,m){try{var v=l.j;if(v.G!=0&&(v.g==l||Fr(v.h,l))){if(!l.K&&Fr(v.h,l)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var k=I;if(k[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<l.F)Sa(v),ba(v);else break e;Zc(v),sn(18)}}else v.za=k[1],0<v.za-v.T&&37500>k[2]&&v.F&&v.v==0&&!v.C&&(v.C=ne(E(v.Za,v),6e3));if(1>=ls(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else bi(v,11)}else if((l.K||v.g==l)&&Sa(v),!te(m))for(k=v.Da.g.parse(m),m=0;m<k.length;m++){let Ge=k[m];if(v.T=Ge[0],Ge=Ge[1],v.G==2)if(Ge[0]=="c"){v.K=Ge[1],v.ia=Ge[2];let dt=Ge[3];dt!=null&&(v.la=dt,v.j.info("VER="+v.la));let Qt=Ge[4];Qt!=null&&(v.Aa=Qt,v.j.info("SVER="+v.Aa));let jn=Ge[5];jn!=null&&typeof jn=="number"&&0<jn&&(I=1.5*jn,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;let $n=l.g;if($n){let jr=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jr){var U=I.h;U.g||jr.indexOf("spdy")==-1&&jr.indexOf("quic")==-1&&jr.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Vr(U,U.h),U.h=null))}if(I.D){let Ma=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;Ma&&(I.ya=Ma,Je(I.I,I.D,Ma))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-l.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var Q=l;if(I.qa=Yc(I,I.J?I.ia:null,I.W),Q.K){Ia(I.h,Q);var Ne=Q,_t=I.L;_t&&(Ne.I=_t),Ne.B&&(us(Ne),ya(Ne)),I.g=Q}else Ta(I);0<v.i.length&&Ca(v)}else Ge[0]!="stop"&&Ge[0]!="close"||bi(v,7);else v.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?bi(v,7):vs(v):Ge[0]!="noop"&&v.l&&v.l.ta(Ge),v.v=0)}}as(4)}catch{}}var cs=class{constructor(l,m){this.g=l,this.map=m}};function qe(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lt(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ls(l){return l.h?1:l.g?l.g.size:0}function Fr(l,m){return l.h?l.h==m:l.g?l.g.has(m):!1}function Vr(l,m){l.g?l.g.add(m):l.h=m}function Ia(l,m){l.h&&l.h==m?l.h=null:l.g&&l.g.has(m)&&l.g.delete(m)}qe.prototype.cancel=function(){if(this.i=De(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function De(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let m=l.i;for(let v of l.g.values())m=m.concat(v.D);return m}return z(l.i)}function wt(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(d(l)){for(var m=[],v=l.length,I=0;I<v;I++)m.push(l[I]);return m}m=[],v=0;for(I in l)m[v++]=l[I];return m}function Fc(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(d(l)||typeof l=="string"){var m=[];l=l.length;for(var v=0;v<l;v++)m.push(v);return m}m=[],v=0;for(let I in l)m[v++]=I;return m}}}function ds(l,m){if(l.forEach&&typeof l.forEach=="function")l.forEach(m,void 0);else if(d(l)||typeof l=="string")Array.prototype.forEach.call(l,m,void 0);else for(var v=Fc(l),I=wt(l),k=I.length,U=0;U<k;U++)m.call(void 0,I[U],v&&v[U],l)}var bn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mg(l,m){if(l){l=l.split("&");for(var v=0;v<l.length;v++){var I=l[v].indexOf("="),k=null;if(0<=I){var U=l[v].substring(0,I);k=l[v].substring(I+1)}else U=l[v];m(U,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Xn(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Xn){this.h=l.h,pt(this,l.j),this.o=l.o,this.g=l.g,er(this,l.s),this.l=l.l;var m=l.i,v=new Ii;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),ao(this,v),this.m=l.m}else l&&(m=String(l).match(bn))?(this.h=!1,pt(this,m[1]||"",!0),this.o=gr(m[2]||""),this.g=gr(m[3]||"",!0),er(this,m[4]),this.l=gr(m[5]||"",!0),ao(this,m[6]||"",!0),this.m=gr(m[7]||"")):(this.h=!1,this.i=new Ii(null,this.h))}Xn.prototype.toString=function(){var l=[],m=this.j;m&&l.push(wi(m,hs,!0),":");var v=this.g;return(v||m=="file")&&(l.push("//"),(m=this.o)&&l.push(wi(m,hs,!0),"@"),l.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&l.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&l.push("/"),l.push(wi(v,v.charAt(0)=="/"?Uc:Bc,!0))),(v=this.i.toString())&&l.push("?",v),(v=this.m)&&l.push("#",wi(v,uh)),l.join("")};function an(l){return new Xn(l)}function pt(l,m,v){l.j=v?gr(m,!0):m,l.j&&(l.j=l.j.replace(/:$/,""))}function er(l,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);l.s=m}else l.s=null}function ao(l,m,v){m instanceof Ii?(l.i=m,jc(l.i,l.h)):(v||(m=wi(m,Ea)),l.i=new Ii(m,l.h))}function Je(l,m,v){l.i.set(m,v)}function uo(l){return Je(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function gr(l,m){return l?m?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function wi(l,m,v){return typeof l=="string"?(l=encodeURI(l).replace(m,Vc),v&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Vc(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var hs=/[#\/\?@]/g,Bc=/[#\?:]/g,Uc=/[#\?]/g,Ea=/[#\?@]/g,uh=/#/g;function Ii(l,m){this.h=this.g=null,this.i=l||null,this.j=!!m}function Br(l){l.g||(l.g=new Map,l.h=0,l.i&&Mg(l.i,function(m,v){l.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=Ii.prototype,n.add=function(l,m){Br(this),this.i=null,l=Ei(this,l);var v=this.g.get(l);return v||this.g.set(l,v=[]),v.push(m),this.h+=1,this};function we(l,m){Br(l),m=Ei(l,m),l.g.has(m)&&(l.i=null,l.h-=l.g.get(m).length,l.g.delete(m))}function Vn(l,m){return Br(l),m=Ei(l,m),l.g.has(m)}n.forEach=function(l,m){Br(this),this.g.forEach(function(v,I){v.forEach(function(k){l.call(m,k,I,this)},this)},this)},n.na=function(){Br(this);let l=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){let k=l[I];for(let U=0;U<k.length;U++)v.push(m[I])}return v},n.V=function(l){Br(this);let m=[];if(typeof l=="string")Vn(this,l)&&(m=m.concat(this.g.get(Ei(this,l))));else{l=Array.from(this.g.values());for(let v=0;v<l.length;v++)m=m.concat(l[v])}return m},n.set=function(l,m){return Br(this),this.i=null,l=Ei(this,l),Vn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[m]),this.h+=1,this},n.get=function(l,m){return l?(l=this.V(l),0<l.length?String(l[0]):m):m};function rt(l,m,v){we(l,m),0<v.length&&(l.i=null,l.g.set(Ei(l,m),z(v)),l.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];let U=encodeURIComponent(String(I)),Q=this.V(I);for(I=0;I<Q.length;I++){var k=U;Q[I]!==""&&(k+="="+encodeURIComponent(String(Q[I]))),l.push(k)}}return this.i=l.join("&")};function Ei(l,m){return m=String(m),l.j&&(m=m.toLowerCase()),m}function jc(l,m){m&&!l.j&&(Br(l),l.i=null,l.g.forEach(function(v,I){var k=I.toLowerCase();I!=k&&(we(this,I),rt(this,k,v))},l)),l.j=m}function $c(l,m){let v=new oo;if(c.Image){let I=new Image;I.onload=C(dn,v,"TestLoadImage: loaded",!0,m,I),I.onerror=C(dn,v,"TestLoadImage: error",!1,m,I),I.onabort=C(dn,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=C(dn,v,"TestLoadImage: timeout",!1,m,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=l}else m(!1)}function zc(l,m){let v=new oo,I=new AbortController,k=setTimeout(()=>{I.abort(),dn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(l,{signal:I.signal}).then(U=>{clearTimeout(k),U.ok?dn(v,"TestPingServer: ok",!0,m):dn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(k),dn(v,"TestPingServer: error",!1,m)})}function dn(l,m,v,I,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),I(v)}catch{}}function Hc(){this.g=new Qd}function fs(l,m,v){let I=v||"";try{ds(l,function(k,U){let Q=k;f(k)&&(Q=Ac(k)),m.push(I+U+"="+encodeURIComponent(Q))})}catch(k){throw m.push(I+"type="+encodeURIComponent("_badmap")),k}}function It(l){this.l=l.Ub||null,this.j=l.eb||!1}F(It,_a),It.prototype.g=function(){return new tr(this.l,this.j)},It.prototype.i=function(l){return function(){return l}}({});function tr(l,m){Zt.call(this),this.D=l,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(tr,Zt),n=tr.prototype,n.open=function(l,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=m,this.readyState=1,ps(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(m.body=l),(this.D||c).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,co(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ps(this)),this.g&&(this.readyState=3,ps(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qc(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function qc(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var m=l.value?l.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!l.done}))&&(this.response=this.responseText+=m)}l.done?co(this):ps(this),this.readyState==3&&qc(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,co(this))},n.Qa=function(l){this.g&&(this.response=l,co(this))},n.ga=function(){this.g&&co(this)};function co(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ps(l)}n.setRequestHeader=function(l,m){this.u.append(l,m)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,l.push(v[0]+": "+v[1]),v=m.next();return l.join(`\r
`)};function ps(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Gc(l){let m="";return he(l,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function ms(l,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=Gc(v),typeof l=="string"?v!=null&&encodeURIComponent(String(v)):Je(l,m,v))}function gt(l){Zt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(gt,Zt);var ch=/^https?$/i,Be=["POST","PUT"];n=gt.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);m=m?m.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kc.g(),this.v=this.o?xc(this.o):xc(kc),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(m,String(l),!0),this.B=!1}catch(U){lh(this,U);return}if(l=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var k in I)v.set(k,I[k]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(let U of I.keys())v.set(U,I.get(U));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(U=>U.toLowerCase()=="content-type"),k=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Be,m,void 0))||I||k||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[U,Q]of v)this.g.setRequestHeader(U,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{dh(this),this.u=!0,this.g.send(l),this.u=!1}catch(U){lh(this,U)}};function lh(l,m){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=m,l.m=5,Rn(l),gs(l)}function Rn(l){l.A||(l.A=!0,Kt(l,"complete"),Kt(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Kt(this,"complete"),Kt(this,"abort"),gs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gs(this,!0)),gt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?lo(this):this.bb())},n.bb=function(){lo(this)};function lo(l){if(l.h&&typeof a<"u"&&(!l.v[1]||Bn(l)!=4||l.Z()!=2)){if(l.u&&Bn(l)==4)Zd(l.Ea,0,l);else if(Kt(l,"readystatechange"),Bn(l)==4){l.h=!1;try{let Q=l.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=Q===0){var k=String(l.D).match(bn)[1]||null;!k&&c.self&&c.self.location&&(k=c.self.location.protocol.slice(0,-1)),I=!ch.test(k?k.toLowerCase():"")}v=I}if(v)Kt(l,"complete"),Kt(l,"success");else{l.m=6;try{var U=2<Bn(l)?l.g.statusText:""}catch{U=""}l.l=U+" ["+l.Z()+"]",Rn(l)}}finally{gs(l)}}}}function gs(l,m){if(l.g){dh(l);let v=l.g,I=l.v[0]?()=>{}:null;l.g=null,l.v=null,m||Kt(l,"ready");try{v.onreadystatechange=I}catch{}}}function dh(l){l.I&&(c.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Bn(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var m=this.g.responseText;return l&&m.indexOf(l)==0&&(m=m.substring(l.length)),Ag(m)}};function hh(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function fh(l){let m={};l=(l.g&&2<=Bn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<l.length;I++){if(te(l[I]))continue;var v=R(l[I]);let k=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let U=m[k]||[];m[k]=U,U.push(v)}M(m,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _s(l,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[l]||m}function ph(l){this.Aa=0,this.i=[],this.j=new oo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_s("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_s("baseRetryDelayMs",5e3,l),this.cb=_s("retryDelaySeedMs",1e4,l),this.Wa=_s("forwardChannelMaxRetries",2,l),this.wa=_s("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new qe(l&&l.concurrentRequestLimit),this.Da=new Hc,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ph.prototype,n.la=8,n.G=1,n.connect=function(l,m,v,I){sn(0),this.W=l,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=Yc(this,null,this.W),Ca(this)};function vs(l){if(Un(l),l.G==3){var m=l.U++,v=an(l.I);if(Je(v,"SID",l.K),Je(v,"RID",m),Je(v,"TYPE","terminate"),ho(l,v),m=new Or(l,l.j,m),m.L=2,m.v=uo(an(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&c.Image&&(new Image().src=m.v,v=!0),v||(m.g=ys(m.j,null),m.g.ea(m.v)),m.F=Date.now(),ya(m)}Qc(l)}function ba(l){l.g&&(Da(l),l.g.cancel(),l.g=null)}function Un(l){ba(l),l.u&&(c.clearTimeout(l.u),l.u=null),Sa(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Ca(l){if(!lt(l.h)&&!l.s){l.s=!0;var m=l.Ga;Xi||on(),de||(Xi(),de=!0),st.add(m,l),l.B=0}}function mh(l,m){return ls(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=m.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ne(E(l.Ga,l,m),Aa(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let k=new Or(this,this.j,l),U=this.o;if(this.S&&(U?(U=T(U),x(U,this.S)):U=this.S),this.m!==null||this.O||(k.H=U,U=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Wc(this,k,m),v=an(this.I),Je(v,"RID",l),Je(v,"CVER",22),this.D&&Je(v,"X-HTTP-Session-Id",this.D),ho(this,v),U&&(this.O?m="headers="+encodeURIComponent(String(Gc(U)))+"&"+m:this.m&&ms(v,this.m,U)),Vr(this.h,k),this.Ua&&Je(v,"TYPE","init"),this.P?(Je(v,"$req",m),Je(v,"SID","null"),k.T=!0,so(k,v,null)):so(k,v,m),this.G=2}}else this.G==3&&(l?_r(this,l):this.i.length==0||lt(this.h)||_r(this))};function _r(l,m){var v;m?v=m.l:v=l.U++;let I=an(l.I);Je(I,"SID",l.K),Je(I,"RID",v),Je(I,"AID",l.T),ho(l,I),l.m&&l.o&&ms(I,l.m,l.o),v=new Or(l,l.j,v,l.B+1),l.m===null&&(v.H=l.o),m&&(l.i=m.D.concat(l.i)),m=Wc(l,v,1e3),v.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Vr(l.h,v),so(v,I,m)}function ho(l,m){l.H&&he(l.H,function(v,I){Je(m,I,v)}),l.l&&ds({},function(v,I){Je(m,I,v)})}function Wc(l,m,v){v=Math.min(l.i.length,v);var I=l.l?E(l.l.Na,l.l,l):null;e:{var k=l.i;let U=-1;for(;;){let Q=["count="+v];U==-1?0<v?(U=k[0].g,Q.push("ofs="+U)):U=0:Q.push("ofs="+U);let Ne=!0;for(let _t=0;_t<v;_t++){let Ge=k[_t].g,dt=k[_t].map;if(Ge-=U,0>Ge)U=Math.max(0,k[_t].g-100),Ne=!1;else try{fs(dt,Q,"req"+Ge+"_")}catch{I&&I(dt)}}if(Ne){I=Q.join("&");break e}}}return l=l.i.splice(0,v),m.D=l,I}function Ta(l){if(!l.g&&!l.u){l.Y=1;var m=l.Fa;Xi||on(),de||(Xi(),de=!0),st.add(m,l),l.v=0}}function Zc(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ne(E(l.Fa,l),Aa(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,Kc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ne(E(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,sn(10),ba(this),Kc(this))};function Da(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function Kc(l){l.g=new Or(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var m=an(l.qa);Je(m,"RID","rpc"),Je(m,"SID",l.K),Je(m,"AID",l.T),Je(m,"CI",l.F?"0":"1"),!l.F&&l.ja&&Je(m,"TO",l.ja),Je(m,"TYPE","xmlhttp"),ho(l,m),l.m&&l.o&&ms(m,l.m,l.o),l.L&&(l.g.I=l.L);var v=l.g;l=l.ia,v.L=1,v.v=uo(an(m)),v.m=null,v.P=!0,oh(v,l)}n.Za=function(){this.C!=null&&(this.C=null,ba(this),Zc(this),sn(19))};function Sa(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function gh(l,m){var v=null;if(l.g==m){Sa(l),Da(l),l.g=null;var I=2}else if(Fr(l.h,m))v=m.D,Ia(l.h,m),I=1;else return;if(l.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var k=l.B;I=io(),Kt(I,new Fn(I,v)),Ca(l)}else Ta(l);else if(k=m.s,k==3||k==0&&0<m.X||!(I==1&&mh(l,m)||I==2&&Zc(l)))switch(v&&0<v.length&&(m=l.h,m.i=m.i.concat(v)),k){case 1:bi(l,5);break;case 4:bi(l,10);break;case 3:bi(l,6);break;default:bi(l,2)}}}function Aa(l,m){let v=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(v*=2),v*m}function bi(l,m){if(l.j.info("Error code "+m),m==2){var v=E(l.fb,l),I=l.Xa;let k=!I;I=new Xn(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||pt(I,"https"),uo(I),k?$c(I.toString(),v):zc(I.toString(),v)}else sn(2);l.G=0,l.l&&l.l.sa(m),Qc(l),Un(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function Qc(l){if(l.G=0,l.ka=[],l.l){let m=De(l.h);(m.length!=0||l.i.length!=0)&&($(l.ka,m),$(l.ka,l.i),l.h.i.length=0,z(l.i),l.i.length=0),l.l.ra()}}function Yc(l,m,v){var I=v instanceof Xn?an(v):new Xn(v);if(I.g!="")m&&(I.g=m+"."+I.g),er(I,I.s);else{var k=c.location;I=k.protocol,m=m?m+"."+k.hostname:k.hostname,k=+k.port;var U=new Xn(null);I&&pt(U,I),m&&(U.g=m),k&&er(U,k),v&&(U.l=v),I=U}return v=l.D,m=l.ya,v&&m&&Je(I,v,m),Je(I,"VER",l.la),ho(l,I),I}function ys(l,m,v){if(m&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=l.Ca&&!l.pa?new gt(new It({eb:v})):new gt(l.pa),m.Ha(l.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ur(){}n=Ur.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function xa(){}xa.prototype.g=function(l,m){return new Ht(l,m)};function Ht(l,m){Zt.call(this),this.g=new ph(m),this.l=l,this.h=m&&m.messageUrlParams||null,l=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(l?l["X-WebChannel-Content-Type"]=m.messageContentType:l={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(l?l["X-WebChannel-Client-Profile"]=m.va:l={"X-WebChannel-Client-Profile":m.va}),this.g.S=l,(l=m&&m.Sb)&&!te(l)&&(this.g.m=l),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!te(m)&&(this.g.D=m,l=this.h,l!==null&&m in l&&(l=this.h,m in l&&delete l[m])),this.j=new Ci(this)}F(Ht,Zt),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){vs(this.g)},Ht.prototype.o=function(l){var m=this.g;if(typeof l=="string"){var v={};v.__data__=l,l=v}else this.u&&(v={},v.__data__=Ac(l),l=v);m.i.push(new cs(m.Ya++,l)),m.G==3&&Ca(m)},Ht.prototype.N=function(){this.g.l=null,delete this.j,vs(this.g),delete this.g,Ht.aa.N.call(this)};function Cn(l){Mc.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var m=l.__sm__;if(m){e:{for(let v in m){l=v;break e}l=void 0}(this.i=l)&&(l=this.i,m=m!==null&&l in m?m[l]:void 0),this.data=m}else this.data=l}F(Cn,Mc);function Jc(){Pc.call(this),this.status=1}F(Jc,Pc);function Ci(l){this.g=l}F(Ci,Ur),Ci.prototype.ua=function(){Kt(this.g,"a")},Ci.prototype.ta=function(l){Kt(this.g,new Cn(l))},Ci.prototype.sa=function(l){Kt(this.g,new Jc)},Ci.prototype.ra=function(){Kt(this.g,"b")},xa.prototype.createWebChannel=xa.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,hI=Wi.createWebChannelTransport=function(){return new xa},dI=Wi.getStatEventTarget=function(){return io()},lI=Wi.Event=vi,gm=Wi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pr.NO_ERROR=0,pr.TIMEOUT=8,pr.HTTP_ERROR=6,dd=Wi.ErrorCode=pr,Nc.COMPLETE="complete",cI=Wi.EventType=Nc,Yd.EventType=ss,ss.OPEN="a",ss.CLOSE="b",ss.ERROR="c",ss.MESSAGE="d",Zt.prototype.listen=Zt.prototype.K,zu=Wi.WebChannel=Yd,Mz=Wi.FetchXmlHttpFactory=It,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,uI=Wi.XhrIo=gt}).apply(typeof mm<"u"?mm:typeof self<"u"?self:typeof window<"u"?window:{});var $x="@firebase/firestore";var rn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");var lc="10.14.0";var Xs=new jo("@firebase/firestore");function hd(){return Xs.logLevel}function re(n,...e){if(Xs.logLevel<=ze.DEBUG){let t=e.map(K0);Xs.debug(`Firestore (${lc}): ${n}`,...t)}}function Ki(n,...e){if(Xs.logLevel<=ze.ERROR){let t=e.map(K0);Xs.error(`Firestore (${lc}): ${n}`,...t)}}function Qu(n,...e){if(Xs.logLevel<=ze.WARN){let t=e.map(K0);Xs.warn(`Firestore (${lc}): ${n}`,...t)}}function K0(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ve(n="Unexpected state"){let e=`FIRESTORE (${lc}) INTERNAL ASSERTION FAILED: `+n;throw Ki(e),new Error(e)}function it(n,e){n||ve()}function Te(n,e){return n}var H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ee=class extends Kn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var xr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Im=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},_I=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rn.UNAUTHENTICATED))}shutdown(){}},vI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},yI=class{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0);let r=this.i,i=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve(),o=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xr,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let d=o;e.enqueueRetryable(()=>b(this,null,function*(){yield d.promise,yield i(this.currentUser)}))},c=d=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){let d=this.t.getImmediate({optional:!0});d?c(d):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xr)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string"),new Im(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string"),new rn(e)}},wI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},II=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new wI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},EI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},bI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){it(this.o===void 0);let r=o=>{o.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.R;return this.R=o.token,re("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(it(typeof t.token=="string"),this.R=t.token,new EI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Pz(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Em=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Pz(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function Ye(n,e){return n<e?-1:n>e?1:0}function Yu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var cn=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ee(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ee(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ee(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var xe=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new cn(0,0))}static max(){return new n(new cn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var bm=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ve(),r===void 0?r=e.length-t:r>e.length-t&&ve(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),a=t.get(i);if(o<a)return-1;if(o>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Tt=class n extends bm{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ee(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Rz=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Yn=class n extends bm{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Rz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new ee(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new ee(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ee(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(o(),i++)}if(o(),a)throw new ee(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var le=class n{constructor(e){this.path=e}static fromPath(e){return new n(Tt.fromString(e))}static fromName(e){return new n(Tt.fromString(e).popFirst(5))}static empty(){return new n(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Tt(e.slice()))}};var CI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};CI.UNKNOWN_ID=-1;function Nz(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(r===1e9?new cn(t+1,0):new cn(t,r));return new ea(i,le.empty(),e)}function kz(n){return new ea(n.readTime,n.key,-1)}var ea=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(xe.min(),le.empty(),-1)}static max(){return new n(xe.max(),le.empty(),-1)}};function Oz(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=le.comparator(n.documentKey,e.documentKey),t!==0?t:Ye(n.largestBatchId,e.largestBatchId))}var Lz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",TI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Rd(n){return b(this,null,function*(){if(n.code!==H.FAILED_PRECONDITION||n.message!==Lz)throw n;re("LocalStore","Unexpectedly lost primary lease")})}var K=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++o,a&&o===i&&t()},d=>r(d))}),a=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,a=new Array(o),c=0;for(let d=0;d<o;d++){let f=d;t(e[f]).next(g=>{a[f]=g,++c,c===o&&r(a)},g=>i(g))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function Fz(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Nd(n){return n.name==="IndexedDbTransactionError"}var bM=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function tg(n){return n==null}function vd(n){return n===0&&1/n==-1/0}function Vz(n){return typeof n=="number"&&Number.isInteger(n)&&!vd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Bz=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],HK=[...Bz,"documentOverlays"],Uz=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jz=Uz,$z=[...jz,"indexConfiguration","indexState","indexEntries"];var qK=[...$z,"globals"];function zx(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function sa(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var At=class n{constructor(e,t){this.comparator=e,this.root=t||ci.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wu(this.root,e,this.comparator,!0)}},Wu=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ci=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();let e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}};ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1;ci.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,t,r,i,o){return this}insert(e,t,r){return new ci(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var vn=class n{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cm(this.data.getIterator())}getIteratorFrom(e){return new Cm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Cm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var hr=class n{constructor(e){this.fields=e,e.sort(Yn.comparator)}static empty(){return new n([])}unionWith(e){let t=new vn(Yn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yu(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Tm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var wn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Tm("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};wn.EMPTY_BYTE_STRING=new wn("");var zz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qi(n){if(it(!!n),typeof n=="string"){let e=0,t=zz.exec(n);if(it(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(n.seconds),nanos:yt(n.nanos)}}function yt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Yo(n){return typeof n=="string"?wn.fromBase64String(n):wn.fromUint8Array(n)}function Q0(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Y0(n){let e=n.mapValue.fields.__previous_value__;return Q0(e)?Y0(e):e}function yd(n){let e=Qi(n.mapValue.fields.__local_write_time__.timestampValue);return new cn(e.seconds,e.nanos)}var DI=class{constructor(e,t,r,i,o,a,c,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f}},Dm=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var _m={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ta(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Q0(n)?4:DM(n)?9007199254740991:TM(n)?10:11:ve()}function hi(n,e){if(n===e)return!0;let t=ta(n);if(t!==ta(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yd(n).isEqual(yd(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let a=Qi(i.timestampValue),c=Qi(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Yo(i.bytesValue).isEqual(Yo(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return yt(i.geoPointValue.latitude)===yt(o.geoPointValue.latitude)&&yt(i.geoPointValue.longitude)===yt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return yt(i.integerValue)===yt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let a=yt(i.doubleValue),c=yt(o.doubleValue);return a===c?vd(a)===vd(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return Yu(n.arrayValue.values||[],e.arrayValue.values||[],hi);case 10:case 11:return function(i,o){let a=i.mapValue.fields||{},c=o.mapValue.fields||{};if(zx(a)!==zx(c))return!1;for(let d in a)if(a.hasOwnProperty(d)&&(c[d]===void 0||!hi(a[d],c[d])))return!1;return!0}(n,e);default:return ve()}}function wd(n,e){return(n.values||[]).find(t=>hi(t,e))!==void 0}function Ju(n,e){if(n===e)return 0;let t=ta(n),r=ta(e);if(t!==r)return Ye(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ye(n.booleanValue,e.booleanValue);case 2:return function(o,a){let c=yt(o.integerValue||o.doubleValue),d=yt(a.integerValue||a.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,e);case 3:return Hx(n.timestampValue,e.timestampValue);case 4:return Hx(yd(n),yd(e));case 5:return Ye(n.stringValue,e.stringValue);case 6:return function(o,a){let c=Yo(o),d=Yo(a);return c.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(o,a){let c=o.split("/"),d=a.split("/");for(let f=0;f<c.length&&f<d.length;f++){let g=Ye(c[f],d[f]);if(g!==0)return g}return Ye(c.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,a){let c=Ye(yt(o.latitude),yt(a.latitude));return c!==0?c:Ye(yt(o.longitude),yt(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return qx(n.arrayValue,e.arrayValue);case 10:return function(o,a){var c,d,f,g;let y=o.fields||{},E=a.fields||{},C=(c=y.value)===null||c===void 0?void 0:c.arrayValue,F=(d=E.value)===null||d===void 0?void 0:d.arrayValue,z=Ye(((f=C?.values)===null||f===void 0?void 0:f.length)||0,((g=F?.values)===null||g===void 0?void 0:g.length)||0);return z!==0?z:qx(C,F)}(n.mapValue,e.mapValue);case 11:return function(o,a){if(o===_m.mapValue&&a===_m.mapValue)return 0;if(o===_m.mapValue)return 1;if(a===_m.mapValue)return-1;let c=o.fields||{},d=Object.keys(c),f=a.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){let E=Ye(d[y],g[y]);if(E!==0)return E;let C=Ju(c[d[y]],f[g[y]]);if(C!==0)return C}return Ye(d.length,g.length)}(n.mapValue,e.mapValue);default:throw ve()}}function Hx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ye(n,e);let t=Qi(n),r=Qi(e),i=Ye(t.seconds,r.seconds);return i!==0?i:Ye(t.nanos,r.nanos)}function qx(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ju(t[i],r[i]);if(o)return o}return Ye(t.length,r.length)}function Xu(n){return SI(n)}function SI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Qi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Yo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return le.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=SI(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let a of r)o?o=!1:i+=",",i+=`${a}:${SI(t.fields[a])}`;return i+"}"}(n.mapValue):ve()}function Gx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function AI(n){return!!n&&"integerValue"in n}function J0(n){return!!n&&"arrayValue"in n}function Wx(n){return!!n&&"nullValue"in n}function Zx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ym(n){return!!n&&"mapValue"in n}function TM(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function pd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return sa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=pd(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Qn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ym(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pd(t)}setAll(e){let t=Yn.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){let d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=pd(a):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());ym(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ym(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){sa(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(pd(this.value))}};function SM(n){let e=[];return sa(n.fields,(t,r)=>{let i=new Yn([t]);if(ym(r)){let o=SM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let a of o)e.push(i.child(a))}else e.push(i)}),new hr(e)}var Mr=class n{constructor(e,t,r,i,o,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new n(e,0,xe.min(),xe.min(),xe.min(),Qn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,xe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,xe.min(),xe.min(),Qn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,xe.min(),xe.min(),Qn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ec=class{constructor(e,t){this.position=e,this.inclusive=t}};function Kx(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],a=n.position[i];if(o.field.isKeyField()?r=le.comparator(le.fromName(a.referenceValue),t.key):r=Ju(a,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Qx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hi(n.position[t],e.position[t]))return!1;return!0}var tc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Hz(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Sm=class{},zt=class n extends Sm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new MI(e,t,r):t==="array-contains"?new NI(e,r):t==="in"?new kI(e,r):t==="not-in"?new OI(e,r):t==="array-contains-any"?new LI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new PI(e,r):new RI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ju(t,this.value)):t!==null&&ta(this.value)===ta(t)&&this.matchesComparison(Ju(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Pr=class n extends Sm{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return AM(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function AM(n){return n.op==="and"}function xM(n){return qz(n)&&AM(n)}function qz(n){for(let e of n.filters)if(e instanceof Pr)return!1;return!0}function xI(n){if(n instanceof zt)return n.field.canonicalString()+n.op.toString()+Xu(n.value);if(xM(n))return n.filters.map(e=>xI(e)).join(",");{let e=n.filters.map(t=>xI(t)).join(",");return`${n.op}(${e})`}}function MM(n,e){return n instanceof zt?function(r,i){return i instanceof zt&&r.op===i.op&&r.field.isEqual(i.field)&&hi(r.value,i.value)}(n,e):n instanceof Pr?function(r,i){return i instanceof Pr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,c)=>o&&MM(a,i.filters[c]),!0):!1}(n,e):void ve()}function PM(n){return n instanceof zt?function(t){return`${t.field.canonicalString()} ${t.op} ${Xu(t.value)}`}(n):n instanceof Pr?function(t){return t.op.toString()+" {"+t.getFilters().map(PM).join(" ,")+"}"}(n):"Filter"}var MI=class extends zt{constructor(e,t,r){super(e,t,r),this.key=le.fromName(r.referenceValue)}matches(e){let t=le.comparator(e.key,this.key);return this.matchesComparison(t)}},PI=class extends zt{constructor(e,t){super(e,"in",t),this.keys=RM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},RI=class extends zt{constructor(e,t){super(e,"not-in",t),this.keys=RM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function RM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>le.fromName(r.referenceValue))}var NI=class extends zt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return J0(t)&&wd(t.arrayValue,this.value)}},kI=class extends zt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&wd(this.value.arrayValue,t)}},OI=class extends zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(wd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!wd(this.value.arrayValue,t)}},LI=class extends zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!J0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wd(this.value.arrayValue,r))}};var FI=class{constructor(e,t=null,r=[],i=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=c,this.ue=null}};function Yx(n,e=null,t=[],r=[],i=null,o=null,a=null){return new FI(n,e,t,r,i,o,a)}function X0(n){let e=Te(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>xI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),tg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Xu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Xu(r)).join(",")),e.ue=t}return e.ue}function eE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Hz(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!MM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Qx(n.startAt,e.startAt)&&Qx(n.endAt,e.endAt)}function VI(n){return le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var na=class{constructor(e,t=null,r=[],i=[],o=null,a="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Gz(n,e,t,r,i,o,a,c){return new na(n,e,t,r,i,o,a,c)}function ng(n){return new na(n)}function Jx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function NM(n){return n.collectionGroup!==null}function md(n){let e=Te(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new vn(Yn.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new tc(o,r))}),t.has(Yn.keyField().canonicalString())||e.ce.push(new tc(Yn.keyField(),r))}return e.ce}function li(n){let e=Te(n);return e.le||(e.le=Wz(e,md(n))),e.le}function Wz(n,e){if(n.limitType==="F")return Yx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new tc(i.field,o)});let t=n.endAt?new ec(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ec(n.startAt.position,n.startAt.inclusive):null;return Yx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function BI(n,e){let t=n.filters.concat([e]);return new na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function UI(n,e,t){return new na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rg(n,e){return eE(li(n),li(e))&&n.limitType===e.limitType}function kM(n){return`${X0(li(n))}|lt:${n.limitType}`}function Hu(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>PM(i)).join(", ")}]`),tg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Xu(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Xu(i)).join(",")),`Target(${r})`}(li(n))}; limitType=${n.limitType})`}function ig(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):le.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of md(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,c,d){let f=Kx(a,c,d);return a.inclusive?f<=0:f<0}(r.startAt,md(r),i)||r.endAt&&!function(a,c,d){let f=Kx(a,c,d);return a.inclusive?f>=0:f>0}(r.endAt,md(r),i))}(n,e)}function Zz(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function OM(n){return(e,t)=>{let r=!1;for(let i of md(n)){let o=Kz(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Kz(n,e,t){let r=n.field.isKeyField()?le.comparator(e.key,t.key):function(o,a,c){let d=a.data.field(o),f=c.data.field(o);return d!==null&&f!==null?Ju(d,f):ve()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ve()}}var Jo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return CM(this.inner)}size(){return this.innerSize}};var Qz=new At(le.comparator);function Yi(){return Qz}var LM=new At(le.comparator);function fd(...n){let e=LM;for(let t of n)e=e.insert(t.key,t);return e}function FM(n){let e=LM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qs(){return gd()}function VM(){return gd()}function gd(){return new Jo(n=>n.toString(),(n,e)=>n.isEqual(e))}var Yz=new At(le.comparator),Jz=new vn(le.comparator);function He(...n){let e=Jz;for(let t of n)e=e.add(t);return e}var Xz=new vn(Ye);function eH(){return Xz}function tE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vd(e)?"-0":e}}function BM(n){return{integerValue:""+n}}function tH(n,e){return Vz(e)?BM(e):tE(n,e)}var nc=class{constructor(){this._=void 0}};function nH(n,e,t){return n instanceof rc?function(i,o){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Q0(o)&&(o=Y0(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(t,e):n instanceof Xo?jM(n,e):n instanceof ra?$M(n,e):function(i,o){let a=UM(i,o),c=Xx(a)+Xx(i.Pe);return AI(a)&&AI(i.Pe)?BM(c):tE(i.serializer,c)}(n,e)}function rH(n,e,t){return n instanceof Xo?jM(n,e):n instanceof ra?$M(n,e):t}function UM(n,e){return n instanceof ic?function(r){return AI(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var rc=class extends nc{},Xo=class extends nc{constructor(e){super(),this.elements=e}};function jM(n,e){let t=zM(e);for(let r of n.elements)t.some(i=>hi(i,r))||t.push(r);return{arrayValue:{values:t}}}var ra=class extends nc{constructor(e){super(),this.elements=e}};function $M(n,e){let t=zM(e);for(let r of n.elements)t=t.filter(i=>!hi(i,r));return{arrayValue:{values:t}}}var ic=class extends nc{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Xx(n){return yt(n.integerValue||n.doubleValue)}function zM(n){return J0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var jI=class{constructor(e,t){this.field=e,this.transform=t}};function iH(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Xo&&i instanceof Xo||r instanceof ra&&i instanceof ra?Yu(r.elements,i.elements,hi):r instanceof ic&&i instanceof ic?hi(r.Pe,i.Pe):r instanceof rc&&i instanceof rc}(n.transform,e.transform)}var $I=class{constructor(e,t){this.version=e,this.transformResults=t}},Zi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function wm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var oc=class{};function HM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Am(n.key,Zi.none()):new ia(n.key,n.data,Zi.none());{let t=n.data,r=Qn.empty(),i=new vn(Yn.comparator);for(let o of e.fields)if(!i.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new fi(n.key,r,new hr(i.toArray()),Zi.none())}}function oH(n,e,t){n instanceof ia?function(i,o,a){let c=i.value.clone(),d=tM(i.fieldTransforms,o,a.transformResults);c.setAll(d),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof fi?function(i,o,a){if(!wm(i.precondition,o))return void o.convertToUnknownDocument(a.version);let c=tM(i.fieldTransforms,o,a.transformResults),d=o.data;d.setAll(qM(i)),d.setAll(c),o.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function _d(n,e,t,r){return n instanceof ia?function(o,a,c,d){if(!wm(o.precondition,a))return c;let f=o.value.clone(),g=nM(o.fieldTransforms,d,a);return f.setAll(g),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof fi?function(o,a,c,d){if(!wm(o.precondition,a))return c;let f=nM(o.fieldTransforms,d,a),g=a.data;return g.setAll(qM(o)),g.setAll(f),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(o,a,c){return wm(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,e,t)}function sH(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=UM(r.transform,i||null);o!=null&&(t===null&&(t=Qn.empty()),t.set(r.field,o))}return t||null}function eM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Yu(r,i,(o,a)=>iH(o,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ia=class extends oc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},fi=class extends oc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function qM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function tM(n,e,t){let r=new Map;it(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],a=o.transform,c=e.data.field(o.field);r.set(o.field,rH(a,c,t[i]))}return r}function nM(n,e,t){let r=new Map;for(let i of n){let o=i.transform,a=t.data.field(i.field);r.set(i.field,nH(o,a,e))}return r}var Am=class extends oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},zI=class extends oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var HI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&oH(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=_d(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=_d(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=VM();return this.mutations.forEach(i=>{let o=e.get(i.key),a=o.overlayedDocument,c=this.applyToLocalView(a,o.mutatedFields);c=t.has(i.key)?null:c;let d=HM(a,c);d!==null&&r.set(i.key,d),a.isValidDocument()||a.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),He())}isEqual(e){return this.batchId===e.batchId&&Yu(this.mutations,e.mutations,(t,r)=>eM(t,r))&&Yu(this.baseMutations,e.baseMutations,(t,r)=>eM(t,r))}},qI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){it(e.mutations.length===r.length);let i=function(){return Yz}(),o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new n(e,t,r,i)}};var GI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var WI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var jt,Ze;function aH(n){switch(n){default:return ve();case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0}}function GM(n){if(n===void 0)return Ki("GRPC error has no .code"),H.UNKNOWN;switch(n){case jt.OK:return H.OK;case jt.CANCELLED:return H.CANCELLED;case jt.UNKNOWN:return H.UNKNOWN;case jt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case jt.INTERNAL:return H.INTERNAL;case jt.UNAVAILABLE:return H.UNAVAILABLE;case jt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case jt.NOT_FOUND:return H.NOT_FOUND;case jt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case jt.ABORTED:return H.ABORTED;case jt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case jt.DATA_LOSS:return H.DATA_LOSS;default:return ve()}}(Ze=jt||(jt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";var rM=null;function uH(){return new TextEncoder}var cH=new Ko([4294967295,4294967295],0);function iM(n){let e=uH().encode(n),t=new aI;return t.update(e),new Uint8Array(t.digest())}function oM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ko([t,r],0),new Ko([i,o],0)]}var ZI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ys(`Invalid padding: ${t}`);if(r<0)throw new Ys(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ys(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ys(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ko.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Ko.fromNumber(r)));return i.compare(cH)===1&&(i=new Ko([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=iM(e),[r,i]=oM(t);for(let o=0;o<this.hashCount;o++){let a=this.Ee(r,i,o);if(!this.de(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new n(o,i,t);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;let t=iM(e),[r,i]=oM(t);for(let o=0;o<this.hashCount;o++){let a=this.Ee(r,i,o);this.Ae(a)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ys=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var xm=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Id.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(xe.min(),i,new At(Ye),Yi(),He())}},Id=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,He(),He(),He())}};var Zu=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Mm=class{constructor(e,t){this.targetId=e,this.me=t}},Pm=class{constructor(e,t,r=wn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Rm=class{constructor(){this.fe=0,this.ge=aM(),this.pe=wn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=He(),t=He(),r=He();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ve()}}),new Id(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=aM()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,it(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},KI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yi(),this.qe=sM(),this.Qe=new At(Ye)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ve()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(VI(o))if(r===0){let a=new le(o.path);this.Ue(t,a,Mr.newNoDocument(a,xe.min()))}else it(r===1);else{let a=this.Ye(t);if(a!==r){let c=this.Ze(e),d=c?this.Xe(c,e,a):1;if(d!==0){this.je(t);let f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,f)}rM?.et(function(g,y,E,C,F){var z,$,Z,te,oe,ce;let ot={localCacheCount:g,existenceFilterCount:y.count,databaseId:E.database,projectId:E.projectId},he=y.unchangedNames;return he&&(ot.bloomFilter={applied:F===0,hashCount:(z=he?.hashCount)!==null&&z!==void 0?z:0,bitmapLength:(te=(Z=($=he?.bits)===null||$===void 0?void 0:$.bitmap)===null||Z===void 0?void 0:Z.length)!==null&&te!==void 0?te:0,padding:(ce=(oe=he?.bits)===null||oe===void 0?void 0:oe.padding)!==null&&ce!==void 0?ce:0,mightContain:M=>{var T;return(T=C?.mightContain(M))!==null&&T!==void 0&&T}}),ot}(a,e.me,this.Le.tt(),c,d))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,a,c;try{a=Yo(r).toUint8Array()}catch(d){if(d instanceof Tm)return Qu("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new ZI(a,i,o)}catch(d){return Qu(d instanceof Ys?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,a)=>{let c=this.Je(a);if(c){if(o.current&&VI(c.target)){let d=new le(c.target.path);this.ke.get(d)!==null||this.it(a,d)||this.Ue(a,d,Mr.newNoDocument(d,e))}o.be&&(t.set(a,o.ve()),o.Ce())}});let r=He();this.qe.forEach((o,a)=>{let c=!0;a.forEachWhile(d=>{let f=this.Je(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));let i=new xm(e,t,this.Qe,this.ke,r);return this.ke=Yi(),this.qe=sM(),this.Qe=new At(Ye),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Rm,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new vn(Ye),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Rm),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function sM(){return new At(le.comparator)}function aM(){return new At(le.comparator)}var lH={asc:"ASCENDING",desc:"DESCENDING"},dH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hH={and:"AND",or:"OR"},QI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function YI(n,e){return n.useProto3Json||tg(e)?e:{value:e}}function Nm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function fH(n,e){return Nm(n,e.toTimestamp())}function di(n){return it(!!n),xe.fromTimestamp(function(t){let r=Qi(t);return new cn(r.seconds,r.nanos)}(n))}function nE(n,e){return JI(n,e).canonicalString()}function JI(n,e){let t=function(i){return new Tt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function ZM(n){let e=Tt.fromString(n);return it(XM(e)),e}function XI(n,e){return nE(n.databaseId,e.path)}function fI(n,e){let t=ZM(e);if(t.get(1)!==n.databaseId.projectId)throw new ee(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ee(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new le(QM(t))}function KM(n,e){return nE(n.databaseId,e)}function pH(n){let e=ZM(n);return e.length===4?Tt.emptyPath():QM(e)}function e0(n){return new Tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function QM(n){return it(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function uM(n,e,t){return{name:XI(n,e),fields:t.value.mapValue.fields}}function mH(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(f,g){return f.useProto3Json?(it(g===void 0||typeof g=="string"),wn.fromBase64String(g||"")):(it(g===void 0||g instanceof Buffer||g instanceof Uint8Array),wn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(f){let g=f.code===void 0?H.UNKNOWN:GM(f.code);return new ee(g,f.message||"")}(a);t=new Pm(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=fI(n,r.document.name),o=di(r.document.updateTime),a=r.document.createTime?di(r.document.createTime):xe.min(),c=new Qn({mapValue:{fields:r.document.fields}}),d=Mr.newFoundDocument(i,o,a,c),f=r.targetIds||[],g=r.removedTargetIds||[];t=new Zu(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=fI(n,r.document),o=r.readTime?di(r.readTime):xe.min(),a=Mr.newNoDocument(i,o),c=r.removedTargetIds||[];t=new Zu([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=fI(n,r.document),o=r.removedTargetIds||[];t=new Zu([],o,i,null)}else{if(!("filter"in e))return ve();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,a=new WI(i,o),c=r.targetId;t=new Mm(c,a)}}return t}function gH(n,e){let t;if(e instanceof ia)t={update:uM(n,e.key,e.value)};else if(e instanceof Am)t={delete:XI(n,e.key)};else if(e instanceof fi)t={update:uM(n,e.key,e.data),updateMask:TH(e.fieldMask)};else{if(!(e instanceof zI))return ve();t={verify:XI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,a){let c=a.transform;if(c instanceof rc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Xo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ra)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ic)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw ve()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:fH(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ve()}(n,e.precondition)),t}function _H(n,e){return n&&n.length>0?(it(e!==void 0),n.map(t=>function(i,o){let a=i.updateTime?di(i.updateTime):di(o);return a.isEqual(xe.min())&&(a=di(o)),new $I(a,i.transformResults||[])}(t,e))):[]}function vH(n,e){return{documents:[KM(n,e.path)]}}function yH(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=KM(n,i);let o=function(f){if(f.length!==0)return JM(Pr.create(f,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let a=function(f){if(f.length!==0)return f.map(g=>function(E){return{field:qu(E.field),direction:EH(E.dir)}}(g))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let c=YI(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:t,parent:i}}function wH(n){let e=pH(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){it(r===1);let g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=function(y){let E=YM(y);return E instanceof Pr&&xM(E)?E.getFilters():[E]}(t.where));let a=[];t.orderBy&&(a=function(y){return y.map(E=>function(F){return new tc(Gu(F.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction))}(E))}(t.orderBy));let c=null;t.limit&&(c=function(y){let E;return E=typeof y=="object"?y.value:y,tg(E)?null:E}(t.limit));let d=null;t.startAt&&(d=function(y){let E=!!y.before,C=y.values||[];return new ec(C,E)}(t.startAt));let f=null;return t.endAt&&(f=function(y){let E=!y.before,C=y.values||[];return new ec(C,E)}(t.endAt)),Gz(e,i,a,o,c,"F",d,f)}function IH(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function YM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Gu(t.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Gu(t.unaryFilter.field);return zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Gu(t.unaryFilter.field);return zt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=Gu(t.unaryFilter.field);return zt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(n):n.fieldFilter!==void 0?function(t){return zt.create(Gu(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Pr.create(t.compositeFilter.filters.map(r=>YM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ve()}}(t.compositeFilter.op))}(n):ve()}function EH(n){return lH[n]}function bH(n){return dH[n]}function CH(n){return hH[n]}function qu(n){return{fieldPath:n.canonicalString()}}function Gu(n){return Yn.fromServerFormat(n.fieldPath)}function JM(n){return n instanceof zt?function(t){if(t.op==="=="){if(Zx(t.value))return{unaryFilter:{field:qu(t.field),op:"IS_NAN"}};if(Wx(t.value))return{unaryFilter:{field:qu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Zx(t.value))return{unaryFilter:{field:qu(t.field),op:"IS_NOT_NAN"}};if(Wx(t.value))return{unaryFilter:{field:qu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qu(t.field),op:bH(t.op),value:t.value}}}(n):n instanceof Pr?function(t){let r=t.getFilters().map(i=>JM(i));return r.length===1?r[0]:{compositeFilter:{op:CH(t.op),filters:r}}}(n):ve()}function TH(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function XM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ed=class n{constructor(e,t,r,i,o=xe.min(),a=xe.min(),c=wn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var t0=class{constructor(e){this.ct=e}};function DH(n){let e=wH({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?UI(e,e.limit,"L"):e}var km=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(yt(e.integerValue));else if("doubleValue"in e){let r=yt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),vd(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Qi(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Yo(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?DM(e)?this.dt(t,Number.MAX_SAFE_INTEGER):TM(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ve()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let a="value",c=((i=(r=o[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(yt(c)),this.Vt(a,t),this.Tt(o[a],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),le.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};km.vt=new km;var n0=class{constructor(){this.un=new r0}addToCollectionParentIndex(e,t){return this.un.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(ea.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(ea.min())}updateCollectionGroup(e,t,r){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}},r0=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vn(Tt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vn(Tt.comparator)).toArray()}};var WK=new Uint8Array(0);var ui=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};ui.DEFAULT_COLLECTION_PERCENTILE=10,ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ui.DEFAULT=new ui(41943040,ui.DEFAULT_COLLECTION_PERCENTILE,ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ui.DISABLED=new ui(-1,0,0);var bd=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var i0=class{constructor(){this.changes=new Jo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?K.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var o0=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var s0=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&_d(r.mutation,i,hr.empty(),cn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,He()).next(()=>r))}getLocalViewOfDocuments(e,t,r=He()){let i=Qs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let a=fd();return o.forEach((c,d)=>{a=a.insert(c,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=Qs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,He()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,i){let o=Yi(),a=gd(),c=function(){return gd()}();return t.forEach((d,f)=>{let g=r.get(f.key);i.has(f.key)&&(g===void 0||g.mutation instanceof fi)?o=o.insert(f.key,f):g!==void 0?(a.set(f.key,g.mutation.getFieldMask()),_d(g.mutation,f,g.mutation.getFieldMask(),cn.now())):a.set(f.key,hr.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,g)=>a.set(f,g)),t.forEach((f,g)=>{var y;return c.set(f,new o0(g,(y=a.get(f))!==null&&y!==void 0?y:null))}),c))}recalculateAndSaveOverlays(e,t){let r=gd(),i=new At((a,c)=>a-c),o=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let c of a)c.keys().forEach(d=>{let f=t.get(d);if(f===null)return;let g=r.get(d)||hr.empty();g=c.applyToLocalView(f,g),r.set(d,g);let y=(i.get(c.batchId)||He()).add(d);i=i.insert(c.batchId,y)})}).next(()=>{let a=[],c=i.getReverseIterator();for(;c.hasNext();){let d=c.getNext(),f=d.key,g=d.value,y=VM();g.forEach(E=>{if(!o.has(E)){let C=HM(t.get(E),r.get(E));C!==null&&y.set(E,C),o=o.add(E)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,y))}return K.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return le.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):NM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):K.resolve(Qs()),c=-1,d=o;return a.next(f=>K.forEach(f,(g,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(g)?K.resolve():this.remoteDocumentCache.getEntry(e,g).next(E=>{d=d.insert(g,E)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,He())).next(g=>({batchId:c,changes:FM(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new le(t)).next(r=>{let i=fd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,a=fd();return this.indexManager.getCollectionParents(e,o).next(c=>K.forEach(c,d=>{let f=function(y,E){return new na(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(g=>{g.forEach((y,E)=>{a=a.insert(y,E)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(a=>{o.forEach((d,f)=>{let g=f.getKey();a.get(g)===null&&(a=a.insert(g,Mr.newInvalidDocument(g)))});let c=fd();return a.forEach((d,f)=>{let g=o.get(d);g!==void 0&&_d(g.mutation,f,hr.empty(),cn.now()),ig(t,f)&&(c=c.insert(d,f))}),c})}};var a0=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return K.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:di(i.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:DH(i.bundledQuery),readTime:di(i.readTime)}}(t)),K.resolve()}};var u0=class{constructor(){this.overlays=new At(le.comparator),this.Ir=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Qs();return K.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),K.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),K.resolve()}getOverlaysForCollection(e,t,r){let i=Qs(),o=t.length+1,a=new le(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let d=c.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>r&&i.set(d.getKey(),d)}return K.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new At((f,g)=>f-g),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let g=o.get(f.largestBatchId);g===null&&(g=Qs(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}let c=Qs(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,g)=>c.set(f,g)),!(c.size()>=i)););return K.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new GI(t,r));let o=this.Ir.get(t);o===void 0&&(o=He(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var c0=class{constructor(){this.sessionToken=wn.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}};var Cd=class{constructor(){this.Tr=new vn($t.Er),this.dr=new vn($t.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new $t(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new $t(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new le(new Tt([])),r=new $t(t,e),i=new $t(t,e+1),o=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new le(new Tt([])),r=new $t(t,e),i=new $t(t,e+1),o=He();return this.dr.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){let t=new $t(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},$t=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return le.comparator(e.key,t.key)||Ye(e.wr,t.wr)}static Ar(e,t){return Ye(e.wr,t.wr)||le.comparator(e.key,t.key)}};var l0=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new vn($t.Er)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new HI(o,t,r,i);this.mutationQueue.push(a);for(let c of i)this.br=this.br.add(new $t(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,t){return K.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new $t(t,0),i=new $t(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],a=>{let c=this.Dr(a.wr);o.push(c)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Ye);return t.forEach(i=>{let o=new $t(i,0),a=new $t(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],c=>{r=r.add(c.wr)})}),K.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;le.isDocumentKey(o)||(o=o.child(""));let a=new $t(new le(o),0),c=new vn(Ye);return this.br.forEachWhile(d=>{let f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(c=c.add(d.wr)),!0)},a),K.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){it(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return K.forEach(t.mutations,i=>{let o=new $t(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new $t(t,0),i=this.br.firstAfterOrEqual(r);return K.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var d0=class{constructor(e){this.Mr=e,this.docs=function(){return new At(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return K.resolve(r?r.document.mutableCopy():Mr.newInvalidDocument(t))}getEntries(e,t){let r=Yi();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Mr.newInvalidDocument(i))}),K.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Yi(),a=t.path,c=new le(a.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){let{key:f,value:{document:g}}=d.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||Oz(kz(g),r)<=0||(i.has(g.key)||ig(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ve()}Or(e,t){return K.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new h0(this)}getSize(e){return K.resolve(this.size)}},h0=class extends i0{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),K.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var f0=class{constructor(e){this.persistence=e,this.Nr=new Jo(t=>X0(t),eE),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Cd,this.targetCount=0,this.kr=bd.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),K.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new bd(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Kn(t),K.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),K.waitFor(o).next(()=>i)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return K.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),K.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),K.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return K.resolve(r)}containsKey(e,t){return K.resolve(this.Br.containsKey(t))}};var p0=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new bM(0),this.Kr=!1,this.Kr=!0,this.$r=new c0,this.referenceDelegate=e(this),this.Ur=new f0(this),this.indexManager=new n0,this.remoteDocumentCache=function(i){return new d0(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new t0(t),this.Gr=new a0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new u0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new l0(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){re("MemoryPersistence","Starting transaction:",e);let i=new m0(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return K.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},m0=class extends TI{constructor(e){super(),this.currentSequenceNumber=e}},g0=class n{constructor(e){this.persistence=e,this.Jr=new Cd,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ve()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),K.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),K.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Xr,r=>{let i=le.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,xe.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return K.or([()=>K.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var _0=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=He(),i=He();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var v0=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var y0=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return EA()?8:Fz(tn())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new v0;return this.Xi(e,t,a).next(c=>{if(o.result=c,this.zi)return this.es(e,t,a,c.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(hd()<=ze.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Hu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),K.resolve()):(hd()<=ze.DEBUG&&re("QueryEngine","Query:",Hu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(hd()<=ze.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Hu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,li(t))):K.resolve())}Yi(e,t){if(Jx(t))return K.resolve(null);let r=li(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=UI(t,null,"F"),r=li(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let a=He(...o);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(d=>{let f=this.ts(t,c);return this.ns(t,f,a,d.readTime)?this.Yi(e,UI(t,null,"F")):this.rs(e,f,t,d)}))})))}Zi(e,t,r,i){return Jx(t)||i.isEqual(xe.min())?K.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let a=this.ts(t,o);return this.ns(t,a,r,i)?K.resolve(null):(hd()<=ze.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hu(t)),this.rs(e,a,t,Nz(i,-1)).next(c=>c))})}ts(e,t){let r=new vn(OM(e));return t.forEach((i,o)=>{ig(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return hd()<=ze.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Hu(t)),this.Ji.getDocumentsMatchingQuery(e,t,ea.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}};var w0=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new At(Ye),this._s=new Jo(o=>X0(o),eE),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new s0(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function SH(n,e,t,r){return new w0(n,e,t,r)}function eP(n,e){return b(this,null,function*(){let t=Te(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let a=[],c=[],d=He();for(let f of i){a.push(f.batchId);for(let g of f.mutations)d=d.add(g.key)}for(let f of o){c.push(f.batchId);for(let g of f.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(r,d).next(f=>({hs:f,removedBatchIds:a,addedBatchIds:c}))})})})}function AH(n,e){let t=Te(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,d,f,g){let y=f.batch,E=y.keys(),C=K.resolve();return E.forEach(F=>{C=C.next(()=>g.getEntry(d,F)).next(z=>{let $=f.docVersions.get(F);it($!==null),z.version.compareTo($)<0&&(y.applyToRemoteDocument(z,f),z.isValidDocument()&&(z.setReadTime(f.commitVersion),g.addEntry(z)))})}),C.next(()=>c.mutationQueue.removeMutationBatch(d,y))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=He();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function tP(n){let e=Te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function xH(n,e){let t=Te(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let c=[];e.targetChanges.forEach((g,y)=>{let E=i.get(y);if(!E)return;c.push(t.Ur.removeMatchingKeys(o,g.removedDocuments,y).next(()=>t.Ur.addMatchingKeys(o,g.addedDocuments,y)));let C=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?C=C.withResumeToken(wn.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):g.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(g.resumeToken,r)),i=i.insert(y,C),function(z,$,Z){return z.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0}(E,C,g)&&c.push(t.Ur.updateTargetData(o,C))});let d=Yi(),f=He();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),c.push(MH(o,a,e.documentUpdates).next(g=>{d=g.Ps,f=g.Is})),!r.isEqual(xe.min())){let g=t.Ur.getLastRemoteSnapshotVersion(o).next(y=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(g)}return K.waitFor(c).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(t.os=i,o))}function MH(n,e,t){let r=He(),i=He();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let a=Yi();return t.forEach((c,d)=>{let f=o.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(xe.min())?(e.removeEntry(c,d.readTime),a=a.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),a=a.insert(c,d)):re("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)}),{Ps:a,Is:i}})}function PH(n,e){let t=Te(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function RH(n,e){let t=Te(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,K.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new Ed(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function I0(n,e,t){return b(this,null,function*(){let r=Te(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!Nd(a))throw a;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function cM(n,e,t){let r=Te(n),i=xe.min(),o=He();return r.persistence.runTransaction("Execute query","readwrite",a=>function(d,f,g){let y=Te(d),E=y._s.get(g);return E!==void 0?K.resolve(y.os.get(E)):y.Ur.getTargetData(f,g)}(r,a,li(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(d=>{o=d})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:xe.min(),t?o:He())).next(c=>(NH(r,Zz(e),c),{documents:c,Ts:o})))}function NH(n,e,t){let r=n.us.get(e)||xe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}var Om=class{constructor(){this.activeTargetIds=eH()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var E0=class{constructor(){this.so=new Om,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Om,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var b0=class{_o(e){}shutdown(){}};var Lm=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var vm=null;function pI(){return vm===null?vm=function(){return 268435456+Math.round(2147483648*Math.random())}():vm++,"0x"+vm.toString(16)}var kH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var C0=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var _n="WebChannelConnection",T0=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,a){let c=pI(),d=this.xo(t,r.toUriEncodedString());re("RestConnection",`Sending RPC '${t}' ${c}:`,d,i);let f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,o,a),this.No(t,d,f,i).then(g=>(re("RestConnection",`Received RPC '${t}' ${c}: `,g),g),g=>{throw Qu("RestConnection",`RPC '${t}' ${c} failed with error: `,g,"url: ",d,"request:",i),g})}Lo(t,r,i,o,a,c){return this.Mo(t,r,i,o,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,a)=>t[a]=o),i&&i.headers.forEach((o,a)=>t[a]=o)}xo(t,r){let i=kH[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=pI();return new Promise((a,c)=>{let d=new uI;d.setWithCredentials(!0),d.listenOnce(cI.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case dd.NO_ERROR:let g=d.getResponseJson();re(_n,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),a(g);break;case dd.TIMEOUT:re(_n,`RPC '${e}' ${o} timed out`),c(new ee(H.DEADLINE_EXCEEDED,"Request time out"));break;case dd.HTTP_ERROR:let y=d.getStatus();if(re(_n,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);let C=E?.error;if(C&&C.status&&C.message){let F=function($){let Z=$.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(Z)>=0?Z:H.UNKNOWN}(C.status);c(new ee(F,C.message))}else c(new ee(H.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ee(H.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{re(_n,`RPC '${e}' ${o} completed.`)}});let f=JSON.stringify(i);re(_n,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",f,r,15)})}Bo(e,t,r){let i=pI(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=hI(),c=dI(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;let g=o.join("");re(_n,`Creating RPC '${e}' stream ${i}: ${g}`,d);let y=a.createWebChannel(g,d),E=!1,C=!1,F=new C0({Io:$=>{C?re(_n,`Not sending because RPC '${e}' stream ${i} is closed:`,$):(E||(re(_n,`Opening RPC '${e}' stream ${i} transport.`),y.open(),E=!0),re(_n,`RPC '${e}' stream ${i} sending:`,$),y.send($))},To:()=>y.close()}),z=($,Z,te)=>{$.listen(Z,oe=>{try{te(oe)}catch(ce){setTimeout(()=>{throw ce},0)}})};return z(y,zu.EventType.OPEN,()=>{C||(re(_n,`RPC '${e}' stream ${i} transport opened.`),F.yo())}),z(y,zu.EventType.CLOSE,()=>{C||(C=!0,re(_n,`RPC '${e}' stream ${i} transport closed`),F.So())}),z(y,zu.EventType.ERROR,$=>{C||(C=!0,Qu(_n,`RPC '${e}' stream ${i} transport errored:`,$),F.So(new ee(H.UNAVAILABLE,"The operation could not be completed")))}),z(y,zu.EventType.MESSAGE,$=>{var Z;if(!C){let te=$.data[0];it(!!te);let oe=te,ce=oe.error||((Z=oe[0])===null||Z===void 0?void 0:Z.error);if(ce){re(_n,`RPC '${e}' stream ${i} received error:`,ce);let ot=ce.status,he=function(D){let x=jt[D];if(x!==void 0)return GM(x)}(ot),M=ce.message;he===void 0&&(he=H.INTERNAL,M="Unknown error status: "+ot+" with message "+ce.message),C=!0,F.So(new ee(he,M)),y.close()}else re(_n,`RPC '${e}' stream ${i} received:`,te),F.bo(te)}}),z(c,lI.STAT_EVENT,$=>{$.stat===gm.PROXY?re(_n,`RPC '${e}' stream ${i} detected buffering proxy`):$.stat===gm.NOPROXY&&re(_n,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{F.wo()},0),F}};function mI(){return typeof document<"u"?document:null}function og(n){return new QI(n,!0)}var Fm=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Vm=class{constructor(e,t,r,i,o,a,c,d){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Fm(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return b(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return b(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return b(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(Ki(t.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new ee(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>b(this,null,function*(){this.state=0,this.start()}))}I_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},D0=class extends Vm{constructor(e,t,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=mH(this.serializer,e),r=function(o){if(!("targetChange"in o))return xe.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?xe.min():a.readTime?di(a.readTime):xe.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=e0(this.serializer),t.addTarget=function(o,a){let c,d=a.target;if(c=VI(d)?{documents:vH(o,d)}:{query:yH(o,d)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=WM(o,a.resumeToken);let f=YI(o,a.expectedCount);f!==null&&(c.expectedCount=f)}else if(a.snapshotVersion.compareTo(xe.min())>0){c.readTime=Nm(o,a.snapshotVersion.toTimestamp());let f=YI(o,a.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);let r=IH(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=e0(this.serializer),t.removeTarget=e,this.a_(t)}},S0=class extends Vm{constructor(e,t,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return it(!!e.streamToken),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){it(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=_H(e.writeResults,e.commitTime),r=di(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=e0(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>gH(this.serializer,r))};this.a_(t)}};var A0=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ee(H.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,JI(t,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(H.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,JI(t,r),i,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ee(H.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},x0=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ki(t),this.D_=!1):re("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var M0=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{r.enqueueAndForget(()=>b(this,null,function*(){aa(this)&&(re("RemoteStore","Restarting streams for network reachability change."),yield function(d){return b(this,null,function*(){let f=Te(d);f.L_.add(4),yield kd(f),f.q_.set("Unknown"),f.L_.delete(4),yield sg(f)})}(this))}))}),this.q_=new x0(r,i)}};function sg(n){return b(this,null,function*(){if(aa(n))for(let e of n.B_)yield e(!0)})}function kd(n){return b(this,null,function*(){for(let e of n.B_)yield e(!1)})}function nP(n,e){let t=Te(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),sE(t)?oE(t):dc(t).r_()&&iE(t,e))}function rE(n,e){let t=Te(n),r=dc(t);t.N_.delete(e),r.r_()&&rP(t,e),t.N_.size===0&&(r.r_()?r.o_():aa(t)&&t.q_.set("Unknown"))}function iE(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}dc(n).A_(e)}function rP(n,e){n.Q_.xe(e),dc(n).R_(e)}function oE(n){n.Q_=new KI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),dc(n).start(),n.q_.v_()}function sE(n){return aa(n)&&!dc(n).n_()&&n.N_.size>0}function aa(n){return Te(n).L_.size===0}function iP(n){n.Q_=void 0}function OH(n){return b(this,null,function*(){n.q_.set("Online")})}function LH(n){return b(this,null,function*(){n.N_.forEach((e,t)=>{iE(n,e)})})}function FH(n,e){return b(this,null,function*(){iP(n),sE(n)?(n.q_.M_(e),oE(n)):n.q_.set("Unknown")})}function VH(n,e,t){return b(this,null,function*(){if(n.q_.set("Online"),e instanceof Pm&&e.state===2&&e.cause)try{yield function(i,o){return b(this,null,function*(){let a=o.cause;for(let c of o.targetIds)i.N_.has(c)&&(yield i.remoteSyncer.rejectListen(c,a),i.N_.delete(c),i.Q_.removeTarget(c))})}(n,e)}catch(r){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Bm(n,r)}else if(e instanceof Zu?n.Q_.Ke(e):e instanceof Mm?n.Q_.He(e):n.Q_.We(e),!t.isEqual(xe.min()))try{let r=yield tP(n.localStore);t.compareTo(r)>=0&&(yield function(o,a){let c=o.Q_.rt(a);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){let g=o.N_.get(f);g&&o.N_.set(f,g.withResumeToken(d.resumeToken,a))}}),c.targetMismatches.forEach((d,f)=>{let g=o.N_.get(d);if(!g)return;o.N_.set(d,g.withResumeToken(wn.EMPTY_BYTE_STRING,g.snapshotVersion)),rP(o,d);let y=new Ed(g.target,d,f,g.sequenceNumber);iE(o,y)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){re("RemoteStore","Failed to raise snapshot:",r),yield Bm(n,r)}})}function Bm(n,e,t){return b(this,null,function*(){if(!Nd(e))throw e;n.L_.add(1),yield kd(n),n.q_.set("Offline"),t||(t=()=>tP(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){re("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield sg(n)}))})}function oP(n,e){return e().catch(t=>Bm(n,t,e))}function ag(n){return b(this,null,function*(){let e=Te(n),t=es(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;BH(e);)try{let i=yield PH(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,UH(e,i)}catch(i){yield Bm(e,i)}sP(e)&&aP(e)})}function BH(n){return aa(n)&&n.O_.length<10}function UH(n,e){n.O_.push(e);let t=es(n);t.r_()&&t.V_&&t.m_(e.mutations)}function sP(n){return aa(n)&&!es(n).n_()&&n.O_.length>0}function aP(n){es(n).start()}function jH(n){return b(this,null,function*(){es(n).p_()})}function $H(n){return b(this,null,function*(){let e=es(n);for(let t of n.O_)e.m_(t.mutations)})}function zH(n,e,t){return b(this,null,function*(){let r=n.O_.shift(),i=qI.from(r,e,t);yield oP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ag(n)})}function HH(n,e){return b(this,null,function*(){e&&es(n).V_&&(yield function(r,i){return b(this,null,function*(){if(function(a){return aH(a)&&a!==H.ABORTED}(i.code)){let o=r.O_.shift();es(r).s_(),yield oP(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ag(r)}})}(n,e)),sP(n)&&aP(n)})}function lM(n,e){return b(this,null,function*(){let t=Te(n);t.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");let r=aa(t);t.L_.add(3),yield kd(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield sg(t)})}function qH(n,e){return b(this,null,function*(){let t=Te(n);e?(t.L_.delete(2),yield sg(t)):e||(t.L_.add(2),yield kd(t),t.q_.set("Unknown"))})}function dc(n){return n.K_||(n.K_=function(t,r,i){let o=Te(t);return o.w_(),new D0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:OH.bind(null,n),Ro:LH.bind(null,n),mo:FH.bind(null,n),d_:VH.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.K_.s_(),sE(n)?oE(n):n.q_.set("Unknown")):(yield n.K_.stop(),iP(n))}))),n.K_}function es(n){return n.U_||(n.U_=function(t,r,i){let o=Te(t);return o.w_(),new S0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:jH.bind(null,n),mo:HH.bind(null,n),f_:$H.bind(null,n),g_:zH.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.U_.s_(),yield ag(n)):(yield n.U_.stop(),n.O_.length>0&&(re("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var P0=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let a=Date.now()+r,c=new n(e,t,a,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function aE(n,e){if(Ki("AsyncQueue",`${e}: ${n}`),Nd(n))return new ee(H.UNAVAILABLE,`${e}: ${n}`);throw n}var Um=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||le.comparator(t.key,r.key):(t,r)=>le.comparator(t.key,r.key),this.keyedMap=fd(),this.sortedSet=new At(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var jm=class{constructor(){this.W_=new At(le.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ve():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},sc=class n{constructor(e,t,r,i,o,a,c,d,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,o){let a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new n(e,t,Um.emptySet(t),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var R0=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},N0=class{constructor(){this.queries=dM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=Te(t),o=i.queries;i.queries=dM(),o.forEach((a,c)=>{for(let d of c.j_)d.onError(r)})})(this,new ee(H.ABORTED,"Firestore shutting down"))}};function dM(){return new Jo(n=>kM(n),rg)}function uE(n,e){return b(this,null,function*(){let t=Te(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new R0,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let c=aE(a,`Initialization of query '${Hu(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&lE(t)})}function cE(n,e){return b(this,null,function*(){let t=Te(n),r=e.query,i=3,o=t.queries.get(r);if(o){let a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function GH(n,e){let t=Te(n),r=!1;for(let i of e){let o=i.query,a=t.queries.get(o);if(a){for(let c of a.j_)c.X_(i)&&(r=!0);a.z_=i}}r&&lE(t)}function WH(n,e,t){let r=Te(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function lE(n){n.Y_.forEach(e=>{e.next()})}var k0,hM;(hM=k0||(k0={})).ea="default",hM.Cache="cache";var Td=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new sc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=sc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==k0.Cache}};var $m=class{constructor(e){this.key=e}},zm=class{constructor(e){this.key=e}},O0=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=He(),this.mutatedKeys=He(),this.Aa=OM(e),this.Ra=new Um(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new jm,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1,d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,y)=>{let E=i.get(g),C=ig(this.query,y)?y:null,F=!!E&&this.mutatedKeys.has(E.key),z=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),$=!1;E&&C?E.data.isEqual(C.data)?F!==z&&(r.track({type:3,doc:C}),$=!0):this.ga(E,C)||(r.track({type:2,doc:C}),$=!0,(d&&this.Aa(C,d)>0||f&&this.Aa(C,f)<0)&&(c=!0)):!E&&C?(r.track({type:0,doc:C}),$=!0):E&&!C&&(r.track({type:1,doc:E}),$=!0,(d||f)&&(c=!0)),$&&(C?(a=a.add(C),o=z?o.add(g):o.delete(g)):(a=a.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{Ra:a,fa:r,ns:c,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let a=e.fa.G_();a.sort((g,y)=>function(C,F){let z=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return z(C)-z(F)}(g.type,y.type)||this.Aa(g.doc,y.doc)),this.pa(r),i=i!=null&&i;let c=t&&!i?this.ya():[],d=this.da.size===0&&this.current&&!i?1:0,f=d!==this.Ea;return this.Ea=d,a.length!==0||f?{snapshot:new sc(this.query,e.Ra,o,a,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new jm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=He(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new zm(r))}),this.da.forEach(r=>{e.has(r)||t.push(new $m(r))}),t}ba(e){this.Ta=e.Ts,this.da=He();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return sc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},L0=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},F0=class{constructor(e){this.key=e,this.va=!1}},V0=class{constructor(e,t,r,i,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Jo(c=>kM(c),rg),this.Ma=new Map,this.xa=new Set,this.Oa=new At(le.comparator),this.Na=new Map,this.La=new Cd,this.Ba={},this.ka=new Map,this.qa=bd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function ZH(n,e,t=!0){return b(this,null,function*(){let r=fP(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield uP(r,e,t,!0),i})}function KH(n,e){return b(this,null,function*(){let t=fP(n);yield uP(t,e,!0,!1)})}function uP(n,e,t,r){return b(this,null,function*(){let i=yield RH(n.localStore,li(e)),o=i.targetId,a=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=yield QH(n,e,o,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&nP(n.remoteStore,i),c})}function QH(n,e,t,r,i){return b(this,null,function*(){n.Ka=(y,E,C)=>function(z,$,Z,te){return b(this,null,function*(){let oe=$.view.ma(Z);oe.ns&&(oe=yield cM(z.localStore,$.query,!1).then(({documents:M})=>$.view.ma(M,oe)));let ce=te&&te.targetChanges.get($.targetId),ot=te&&te.targetMismatches.get($.targetId)!=null,he=$.view.applyChanges(oe,z.isPrimaryClient,ce,ot);return pM(z,$.targetId,he.wa),he.snapshot})}(n,y,E,C);let o=yield cM(n.localStore,e,!0),a=new O0(e,o.Ts),c=a.ma(o.documents),d=Id.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=a.applyChanges(c,n.isPrimaryClient,d);pM(n,t,f.wa);let g=new L0(e,t,a);return n.Fa.set(e,g),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),f.snapshot})}function YH(n,e,t){return b(this,null,function*(){let r=Te(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(a=>!rg(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield I0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&rE(r.remoteStore,i.targetId),B0(r,i.targetId)}).catch(Rd))):(B0(r,i.targetId),yield I0(r.localStore,i.targetId,!0))})}function JH(n,e){return b(this,null,function*(){let t=Te(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),rE(t.remoteStore,r.targetId))})}function XH(n,e,t){return b(this,null,function*(){let r=s4(n);try{let i=yield function(a,c){let d=Te(a),f=cn.now(),g=c.reduce((C,F)=>C.add(F.key),He()),y,E;return d.persistence.runTransaction("Locally write mutations","readwrite",C=>{let F=Yi(),z=He();return d.cs.getEntries(C,g).next($=>{F=$,F.forEach((Z,te)=>{te.isValidDocument()||(z=z.add(Z))})}).next(()=>d.localDocuments.getOverlayedDocuments(C,F)).next($=>{y=$;let Z=[];for(let te of c){let oe=sH(te,y.get(te.key).overlayedDocument);oe!=null&&Z.push(new fi(te.key,oe,SM(oe.value.mapValue),Zi.exists(!0)))}return d.mutationQueue.addMutationBatch(C,f,Z,c)}).next($=>{E=$;let Z=$.applyToLocalDocumentSet(y,z);return d.documentOverlayCache.saveOverlays(C,$.batchId,Z)})}).then(()=>({batchId:E.batchId,changes:FM(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,d){let f=a.Ba[a.currentUser.toKey()];f||(f=new At(Ye)),f=f.insert(c,d),a.Ba[a.currentUser.toKey()]=f}(r,i.batchId,t),yield Od(r,i.changes),yield ag(r.remoteStore)}catch(i){let o=aE(i,"Failed to persist write");t.reject(o)}})}function cP(n,e){return b(this,null,function*(){let t=Te(n);try{let r=yield xH(t.localStore,e);e.targetChanges.forEach((i,o)=>{let a=t.Na.get(o);a&&(it(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?it(a.va):i.removedDocuments.size>0&&(it(a.va),a.va=!1))}),yield Od(t,r,e)}catch(r){yield Rd(r)}})}function fM(n,e,t){let r=Te(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,a)=>{let c=a.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){let d=Te(a);d.onlineState=c;let f=!1;d.queries.forEach((g,y)=>{for(let E of y.j_)E.Z_(c)&&(f=!0)}),f&&lE(d)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function e4(n,e,t){return b(this,null,function*(){let r=Te(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let a=new At(le.comparator);a=a.insert(o,Mr.newNoDocument(o,xe.min()));let c=He().add(o),d=new xm(xe.min(),new Map,new At(Ye),a,c);yield cP(r,d),r.Oa=r.Oa.remove(o),r.Na.delete(e),dE(r)}else yield I0(r.localStore,e,!1).then(()=>B0(r,e,t)).catch(Rd)})}function t4(n,e){return b(this,null,function*(){let t=Te(n),r=e.batch.batchId;try{let i=yield AH(t.localStore,e);dP(t,r,null),lP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Od(t,i)}catch(i){yield Rd(i)}})}function n4(n,e,t){return b(this,null,function*(){let r=Te(n);try{let i=yield function(a,c){let d=Te(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return d.mutationQueue.lookupMutationBatch(f,c).next(y=>(it(y!==null),g=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>d.localDocuments.getDocuments(f,g))})}(r.localStore,e);dP(r,e,t),lP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Od(r,i)}catch(i){yield Rd(i)}})}function lP(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function dP(n,e,t){let r=Te(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function B0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||hP(n,r)})}function hP(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(rE(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),dE(n))}function pM(n,e,t){for(let r of t)r instanceof $m?(n.La.addReference(r.key,e),r4(n,r)):r instanceof zm?(re("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||hP(n,r.key)):ve()}function r4(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(re("SyncEngine","New document in limbo: "+t),n.xa.add(r),dE(n))}function dE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new le(Tt.fromString(e)),r=n.qa.next();n.Na.set(r,new F0(t)),n.Oa=n.Oa.insert(t,r),nP(n.remoteStore,new Ed(li(ng(t.path)),r,"TargetPurposeLimboResolution",bM.oe))}}function Od(n,e,t){return b(this,null,function*(){let r=Te(n),i=[],o=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,d)=>{a.push(r.Ka(d,e,t).then(f=>{var g;if((f||t)&&r.isPrimaryClient){let y=f?!f.fromCache:(g=t?.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(f){i.push(f);let y=_0.Wi(d.targetId,f);o.push(y)}}))}),yield Promise.all(a),r.Ca.d_(i),yield function(d,f){return b(this,null,function*(){let g=Te(d);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>K.forEach(f,E=>K.forEach(E.$i,C=>g.persistence.referenceDelegate.addReference(y,E.targetId,C)).next(()=>K.forEach(E.Ui,C=>g.persistence.referenceDelegate.removeReference(y,E.targetId,C)))))}catch(y){if(!Nd(y))throw y;re("LocalStore","Failed to update sequence numbers: "+y)}for(let y of f){let E=y.targetId;if(!y.fromCache){let C=g.os.get(E),F=C.snapshotVersion,z=C.withLastLimboFreeSnapshotVersion(F);g.os=g.os.insert(E,z)}}})}(r.localStore,o))})}function i4(n,e){return b(this,null,function*(){let t=Te(n);if(!t.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());let r=yield eP(t.localStore,e);t.currentUser=e,function(o,a){o.ka.forEach(c=>{c.forEach(d=>{d.reject(new ee(H.CANCELLED,a))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Od(t,r.hs)}})}function o4(n,e){let t=Te(n),r=t.Na.get(e);if(r&&r.va)return He().add(r.key);{let i=He(),o=t.Ma.get(e);if(!o)return i;for(let a of o){let c=t.Fa.get(a);i=i.unionWith(c.view.Va)}return i}}function fP(n){let e=Te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=cP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e4.bind(null,e),e.Ca.d_=GH.bind(null,e.eventManager),e.Ca.$a=WH.bind(null,e.eventManager),e}function s4(n){let e=Te(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=t4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=n4.bind(null,e),e}var mM=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return b(this,null,function*(){this.serializer=og(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return SH(this.persistence,new y0,t.initialUser,this.serializer)}Ga(t){return new p0(g0.Zr,this.serializer)}Wa(t){return new E0}terminate(){return b(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var a4=(()=>{class n{initialize(t,r){return b(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>fM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=i4.bind(null,this.syncEngine),yield qH(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new N0}()}createDatastore(t){let r=og(t.databaseInfo.databaseId),i=function(a){return new T0(a)}(t.databaseInfo);return function(a,c,d,f){return new A0(a,c,d,f)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,a,c,d){return new M0(i,o,a,c,d)}(this.localStore,this.datastore,t.asyncQueue,r=>fM(this.syncEngine,r,0),function(){return Lm.D()?new Lm:new b0}())}createSyncEngine(t,r){return function(o,a,c,d,f,g,y){let E=new V0(o,a,c,d,f,g);return y&&(E.Qa=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){var t,r;yield function(o){return b(this,null,function*(){let a=Te(o);re("RemoteStore","RemoteStore shutting down."),a.L_.add(5),yield kd(a),a.k_.shutdown(),a.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Dd=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ki("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var U0=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=rn.UNAUTHENTICATED,this.clientId=Em.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,a=>b(this,null,function*(){re("FirestoreClient","Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,a=>(re("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=aE(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function gI(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(this,null,function*(){r.isEqual(i)||(yield eP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function gM(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield u4(n);re("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>lM(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>lM(e.remoteStore,i)),n._onlineComponents=e})}function u4(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{yield gI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===H.FAILED_PRECONDITION||i.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Qu("Error using user provided cache. Falling back to memory cache: "+t),yield gI(n,new mM)}}else re("FirestoreClient","Using default OfflineComponentProvider"),yield gI(n,new mM);return n._offlineComponents})}function pP(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),yield gM(n,n._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),yield gM(n,new a4))),n._onlineComponents})}function c4(n){return pP(n).then(e=>e.syncEngine)}function Hm(n){return b(this,null,function*(){let e=yield pP(n),t=e.eventManager;return t.onListen=ZH.bind(null,e.syncEngine),t.onUnlisten=YH.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=KH.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=JH.bind(null,e.syncEngine),t})}function l4(n,e,t={}){let r=new xr;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(o,a,c,d,f){let g=new Dd({next:E=>{g.Za(),a.enqueueAndForget(()=>cE(o,y));let C=E.docs.has(c);!C&&E.fromCache?f.reject(new ee(H.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&E.fromCache&&d&&d.source==="server"?f.reject(new ee(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),y=new Td(ng(c.path),g,{includeMetadataChanges:!0,_a:!0});return uE(o,y)}(yield Hm(n),n.asyncQueue,e,t,r)})),r.promise}function d4(n,e,t={}){let r=new xr;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(o,a,c,d,f){let g=new Dd({next:E=>{g.Za(),a.enqueueAndForget(()=>cE(o,y)),E.fromCache&&d.source==="server"?f.reject(new ee(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),y=new Td(c,g,{includeMetadataChanges:!0,_a:!0});return uE(o,y)}(yield Hm(n),n.asyncQueue,e,t,r)})),r.promise}function mP(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var _M=new Map;function gP(n,e,t){if(!t)throw new ee(H.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function h4(n,e,t,r){if(e===!0&&r===!0)throw new ee(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vM(n){if(!le.isDocumentKey(n))throw new ee(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yM(n){if(le.isDocumentKey(n))throw new ee(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ug(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ve()}function Jn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ee(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ug(n);throw new ee(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var qm=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}h4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ee(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ee(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ee(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ac=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new _I;switch(r.type){case"firstParty":return new II(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=_M.get(t);r&&(re("ComponentProvider","Removing Datastore"),_M.delete(t),r.terminate())}(this),Promise.resolve()}};function _P(n,e,t,r={}){var i;let o=(n=Jn(n,ac))._getSettings(),a=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Qu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let c,d;if(typeof r.mockUserToken=="string")c=r.mockUserToken,d=rn.MOCK_USER;else{c=gA(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ee(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new rn(f)}n._authCredentials=new vI(new Im(c,d))}}var oa=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},yn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Qo=class n extends oa{constructor(e,t,r){super(e,t,ng(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new le(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function vP(n,e,...t){if(n=kt(n),gP("collection","path",e),n instanceof ac){let r=Tt.fromString(e,...t);return yM(r),new Qo(n,null,r)}{if(!(n instanceof yn||n instanceof Qo))throw new ee(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Tt.fromString(e,...t));return yM(r),new Qo(n.firestore,null,r)}}function hE(n,e,...t){if(n=kt(n),arguments.length===1&&(e=Em.newId()),gP("doc","path",e),n instanceof ac){let r=Tt.fromString(e,...t);return vM(r),new yn(n,null,new le(r))}{if(!(n instanceof yn||n instanceof Qo))throw new ee(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Tt.fromString(e,...t));return vM(r),new yn(n.firestore,n instanceof Qo?n.converter:null,new le(r))}}var Gm=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Fm(this,"async_queue_retry"),this.Vu=()=>{let r=mI();r&&re("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=mI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=mI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new xr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return b(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Nd(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw Ki("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=P0.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&ve()}verifyOperationInProgress(){}wu(){return b(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function wM(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var pi=class extends ac{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Gm,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Gm(e),this._firestoreClient=void 0,yield e}})}};function yP(n,e){let t=typeof n=="object"?n:Fu(),r=typeof n=="string"?n:e||"(default)",i=ed(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=mA("firestore");o&&_P(i,...o)}return i}function cg(n){if(n._terminated)throw new ee(H.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||f4(n),n._firestoreClient}function f4(n){var e,t,r;let i=n._freezeSettings(),o=function(c,d,f,g){return new DI(c,d,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,mP(g.experimentalLongPollingOptions),g.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new U0(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){let d=c?._online.build();return{_offline:c?._offline.build(d),_online:d}}(n._componentsProvider))}var Sd=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(wn.fromBase64String(e))}catch(t){throw new ee(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var uc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ee(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var cc=class{constructor(e){this._methodName=e}};var Ad=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ee(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ee(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}};var xd=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var p4=/^__.*__$/,j0=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new fi(e,this.data,this.fieldMask,t,this.fieldTransforms):new ia(e,this.data,t,this.fieldTransforms)}},Wm=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function wP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}var Zm=class n{constructor(e,t,r,i,o,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Qm(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(wP(this.Cu)&&p4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},$0=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||og(e)}Qu(e,t,r,i=!1){return new Zm({Cu:e,methodName:t,qu:r,path:Yn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function lg(n){let e=n._freezeSettings(),t=og(n._databaseId);return new $0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function IP(n,e,t,r,i,o={}){let a=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);fE("Data must be an object, but it was:",a,r);let c=EP(r,a),d,f;if(o.merge)d=new hr(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let g=[];for(let y of o.mergeFields){let E=H0(e,y,t);if(!a.contains(E))throw new ee(H.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);CP(g,E)||g.push(E)}d=new hr(g),f=a.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,f=a.fieldTransforms;return new j0(new Qn(c),d,f)}var Km=class n extends cc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function m4(n,e,t){return new Zm({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var z0=class n extends cc{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=m4(this,e,!0),r=this.Ku.map(o=>hc(o,t)),i=new Xo(r);return new jI(e.path,i)}isEqual(e){return e instanceof n&&Uo(this.Ku,e.Ku)}};function g4(n,e,t,r){let i=n.Qu(1,e,t);fE("Data must be an object, but it was:",i,r);let o=[],a=Qn.empty();sa(r,(d,f)=>{let g=pE(e,d,t);f=kt(f);let y=i.Nu(g);if(f instanceof Km)o.push(g);else{let E=hc(f,y);E!=null&&(o.push(g),a.set(g,E))}});let c=new hr(o);return new Wm(a,c,i.fieldTransforms)}function _4(n,e,t,r,i,o){let a=n.Qu(1,e,t),c=[H0(e,r,t)],d=[i];if(o.length%2!=0)throw new ee(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)c.push(H0(e,o[E])),d.push(o[E+1]);let f=[],g=Qn.empty();for(let E=c.length-1;E>=0;--E)if(!CP(f,c[E])){let C=c[E],F=d[E];F=kt(F);let z=a.Nu(C);if(F instanceof Km)f.push(C);else{let $=hc(F,z);$!=null&&(f.push(C),g.set(C,$))}}let y=new hr(f);return new Wm(g,y,a.fieldTransforms)}function v4(n,e,t,r=!1){return hc(t,n.Qu(r?4:3,e))}function hc(n,e){if(bP(n=kt(n)))return fE("Unsupported field value:",e,n),EP(n,e);if(n instanceof cc)return function(r,i){if(!wP(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],a=0;for(let c of r){let d=hc(c,i.Lu(a));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),a++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tH(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=cn.fromDate(r);return{timestampValue:Nm(i.serializer,o)}}if(r instanceof cn){let o=new cn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nm(i.serializer,o)}}if(r instanceof Ad)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Sd)return{bytesValue:WM(i.serializer,r._byteString)};if(r instanceof yn){let o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:nE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof xd)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return tE(c.serializer,d)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ug(r)}`)}(n,e)}function EP(n,e){let t={};return CM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sa(n,(r,i)=>{let o=hc(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function bP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof cn||n instanceof Ad||n instanceof Sd||n instanceof yn||n instanceof cc||n instanceof xd)}function fE(n,e,t){if(!bP(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=ug(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function H0(n,e,t){if((e=kt(e))instanceof uc)return e._internalPath;if(typeof e=="string")return pE(n,e);throw Qm("Field path arguments must be of type string or ",n,!1,void 0,t)}var y4=new RegExp("[~\\*/\\[\\]]");function pE(n,e,t){if(e.search(y4)>=0)throw Qm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new uc(...e.split("."))._internalPath}catch{throw Qm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qm(n,e,t,r,i){let o=r&&!r.isEmpty(),a=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(o||a)&&(d+=" (found",o&&(d+=` in field ${r}`),a&&(d+=` in document ${i}`),d+=")"),new ee(H.INVALID_ARGUMENT,c+n+d)}function CP(n,e){return n.some(t=>t.isEqual(e))}var Ym=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new q0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(mE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},q0=class extends Ym{data(){return super.data()}};function mE(n,e){return typeof e=="string"?pE(n,e):e instanceof uc?e._internalPath:e._delegate._internalPath}function TP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ee(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Md=class{},G0=class extends Md{};function DP(n,e,...t){let r=[];e instanceof Md&&r.push(e),r=r.concat(t),function(o){let a=o.filter(d=>d instanceof W0).length,c=o.filter(d=>d instanceof Jm).length;if(a>1||a>0&&c>0)throw new ee(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Jm=class n extends G0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return AP(e._query,t),new oa(e.firestore,e.converter,BI(e._query,t))}_parse(e){let t=lg(e.firestore);return function(o,a,c,d,f,g,y){let E;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ee(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){EM(y,g);let C=[];for(let F of y)C.push(IM(d,o,F));E={arrayValue:{values:C}}}else E=IM(d,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||EM(y,g),E=v4(c,a,y,g==="in"||g==="not-in");return zt.create(f,g,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function SP(n,e,t){let r=e,i=mE("where",n);return Jm._create(i,r,t)}var W0=class n extends Md{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Pr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let a=i,c=o.getFlattenedFilters();for(let d of c)AP(a,d),a=BI(a,d)}(e._query,t),new oa(e.firestore,e.converter,BI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function IM(n,e,t){if(typeof(t=kt(t))=="string"){if(t==="")throw new ee(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NM(e)&&t.indexOf("/")!==-1)throw new ee(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Tt.fromString(t));if(!le.isDocumentKey(r))throw new ee(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gx(n,new le(r))}if(t instanceof yn)return Gx(n,t._key);throw new ee(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ug(t)}.`)}function EM(n,e){if(!Array.isArray(n)||n.length===0)throw new ee(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AP(n,e){let t=function(i,o){for(let a of i)for(let c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ee(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Z0=class{convertValue(e,t="none"){switch(ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return sa(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>yt(a.doubleValue));return new xd(o)}convertGeoPoint(e){return new Ad(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Y0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(yd(e));default:return null}}convertTimestamp(e){let t=Qi(e);return new cn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Tt.fromString(e);it(XM(r));let i=new Dm(r.get(1),r.get(3)),o=new le(r.popFirst(5));return i.isEqual(t)||Ki(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function xP(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Js=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xm=class extends Ym{constructor(e,t,r,i,o,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ku(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(mE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ku=class extends Xm{data(e={}){return super.data(e)}},eg=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Js(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ku(this._firestore,this._userDataWriter,r.key,r,new Js(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ee(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{let d=new Ku(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Js(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let d=new Ku(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Js(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),f=-1,g=-1;return c.type!==0&&(f=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),g=a.indexOf(c.doc.key)),{type:w4(c.type),doc:d,oldIndex:f,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function w4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}function MP(n){n=Jn(n,yn);let e=Jn(n.firestore,pi);return l4(cg(e),n._key).then(t=>OP(e,n,t))}var Pd=class extends Z0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sd(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,t)}};function PP(n){n=Jn(n,oa);let e=Jn(n.firestore,pi),t=cg(e),r=new Pd(e);return TP(n._query),d4(t,n._query).then(i=>new eg(e,r,n,i))}function RP(n,e,t){n=Jn(n,yn);let r=Jn(n.firestore,pi),i=xP(n.converter,e,t);return _E(r,[IP(lg(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Zi.none())])}function NP(n,e,t,...r){n=Jn(n,yn);let i=Jn(n.firestore,pi),o=lg(i),a;return a=typeof(e=kt(e))=="string"||e instanceof uc?_4(o,"updateDoc",n._key,e,t,r):g4(o,"updateDoc",n._key,e),_E(i,[a.toMutation(n._key,Zi.exists(!0))])}function kP(n,e){let t=Jn(n.firestore,pi),r=hE(n),i=xP(n.converter,e);return _E(t,[IP(lg(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Zi.exists(!1))]).then(()=>r)}function gE(n,...e){var t,r,i;n=kt(n);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||wM(e[a])||(o=e[a],a++);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(wM(e[a])){let y=e[a];e[a]=(t=y.next)===null||t===void 0?void 0:t.bind(y),e[a+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[a+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let d,f,g;if(n instanceof yn)f=Jn(n.firestore,pi),g=ng(n._key.path),d={next:y=>{e[a]&&e[a](OP(f,n,y))},error:e[a+1],complete:e[a+2]};else{let y=Jn(n,oa);f=Jn(y.firestore,pi),g=y._query;let E=new Pd(f);d={next:C=>{e[a]&&e[a](new eg(f,E,y,C))},error:e[a+1],complete:e[a+2]},TP(n._query)}return function(E,C,F,z){let $=new Dd(z),Z=new Td(C,$,F);return E.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return uE(yield Hm(E),Z)})),()=>{$.Za(),E.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return cE(yield Hm(E),Z)}))}}(cg(f),g,c,d)}function _E(n,e){return function(r,i){let o=new xr;return r.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return XH(yield c4(r),i,o)})),o.promise}(cg(n),e)}function OP(n,e,t){let r=t.docs.get(e._key),i=new Pd(n);return new Xm(n,i,e._key,r,new Js(t.hasPendingWrites,t.fromCache),e.converter)}function LP(...n){return new z0("arrayUnion",n)}(function(e,t=!0){(function(i){lc=i})(Ho),zo(new dr("firestore",(r,{instanceIdentifier:i,options:o})=>{let a=r.getProvider("app").getImmediate(),c=new pi(new yI(r.getProvider("auth-internal")),new bI(r.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ee(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dm(f.options.projectId,g)}(a,i),a);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Wt($x,"4.7.3",e),Wt($x,"4.7.3","esm2017")})();var dg=function(){return dg=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},dg.apply(this,arguments)};var b4={includeMetadataChanges:!1};function FP(n,e){return e===void 0&&(e=b4),new Ue(function(t){var r=gE(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function VP(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:dg(dg({},r),(t={},t[e.idField]=n.id,t))}function BP(n){return FP(n,{includeMetadataChanges:!0}).pipe(me(function(e){return e.docs}))}function UP(n,e){return e===void 0&&(e={}),BP(n).pipe(me(function(t){return t.map(function(r){return VP(r,e)})}))}var Mn=class{constructor(e){return e}},jP="firestore",vE=class{constructor(){return td(jP)}};var yE=new ae("angularfire2.firestore-instances");function C4(n,e){let t=Wp(jP,n,e);return t&&new Mn(t)}function T4(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Mn(r)}}var D4={provide:vE,deps:[[new hn,yE]]},S4={provide:Mn,useFactory:C4,deps:[[new hn,yE],zi]};function $P(n,...e){return Wt("angularfire",zs.full,"fst"),Yr([S4,D4,{provide:yE,useFactory:T4(n),multi:!0,deps:[et,un,Uu,Hs,[new hn,ld],[new hn,Bu],...e]}])}var wE=nn(UP,!0);var zP=nn(kP,!0);var HP=nn(LP,!0);var ua=nn(vP,!0);var Ot=nn(hE,!0);var Pn=nn(MP,!0);var hg=nn(PP,!0);var qP=nn(yP,!0);var GP=nn(DP,!0);var Ji=nn(RP,!0);var IE=nn(NP,!0);var WP=nn(SP,!0);var fc=(()=>{class n{constructor(){this.firestore=W(Mn)}sendNotification(t,r,i){return b(this,null,function*(){let o=Ot(this.firestore,"users",t),a={type:r,message:i,read:!1,createdAt:new Date().toISOString()};yield IE(o,{notifications:HP(a)})})}markAsRead(t,r){return b(this,null,function*(){let i=Ot(this.firestore,"users",t),o=yield Pn(i);if(o.exists()){let a=o.data().notifications;a&&a[r]&&(a[r].read=!0,yield IE(i,{notifications:a}))}})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var mi=(()=>{class n{constructor(t){this.notificationService=t,this.firestore=W(Mn)}loadTour(t){return b(this,null,function*(){let r=yield Pn(Ot(this.firestore,"tours",t));if(r.exists()){let i=r.data();return Re(Y({},i),{id:r.id})}else console.error("Tour not found")})}getTours(){let t=ua(this.firestore,"tours");return wE(t,{idField:"id"}).pipe(Dn(i=>{if(i.length===0)return pe([]);let o=i.map(a=>Pn(Ot(this.firestore,"users",a.createdBy)).then(c=>Re(Y({},a),{createdByName:c.exists()?c.data()?.firstName:"Unknown"})));return Cs(o)}))}addTour(t){return b(this,null,function*(){return zP(ua(this.firestore,"tours"),t)})}applyForTour(t,r,i){return b(this,null,function*(){if(!t||!i)throw new Error("Invalid tourId or userId");let o=Ot(this.firestore,`tours/${t}/applications/${i}`);if(!(yield Pn(o)).exists())yield Ji(o,{status:"pending",appliedAt:new Date().toISOString()}),yield this.notificationService.sendNotification(r,"application","User applied for a tour!");else throw new Error("You have already applied for this tour.")})}updateApplicationStatus(t,r,i){return b(this,null,function*(){if(!t||!r)throw new Error("Invalid tourId or userId");let o=Ot(this.firestore,`tours/${t}/applications/${r}`);if((yield Pn(o)).exists())yield Ji(o,{status:i,updatedAt:new Date().toISOString()}),yield this.notificationService.sendNotification(r,"statusUpdate",`Your application for the tour has been ${i}`);else throw new Error("User has not applied for this tour.")})}hasUserApplied(t,r){return b(this,null,function*(){let i=Ot(this.firestore,`tours/${t}/applications/${r}`);return(yield Pn(i)).exists()})}loadAllApplications(t){return b(this,null,function*(){let r=ua(this.firestore,`tours/${t}/applications`);return(yield hg(r)).docs.map(a=>Y({id:a.id},a.data()))})}rejectApplication(t,r){let i=Ot(this.firestore,`tours/${t}/applications/${r}`);return Ji(i,{status:"rejected"},{merge:!0})}acceptApplication(t,r){let i=Ot(this.firestore,`tours/${t}/applications/${r}`);return Ji(i,{status:"accepted"},{merge:!0})}cancelApplication(t,r){let i=Ot(this.firestore,`tours/${t}/applications/${r}`);return Ji(i,{status:"canceled"},{merge:!0})}getToursUserAppliedFor(t){return b(this,null,function*(){let r=ua(this.firestore,"tours"),i=yield r_(wE(r,{idField:"id"})),o=[];for(let a of i){let c=Ot(this.firestore,`tours/${a.id}/applications/${t}`),d=yield Pn(c);d.exists()&&o.push(Re(Y({id:a.id},a),{application:d.data()}))}return o})}static{this.\u0275fac=function(r){return new(r||n)(ge(fc))}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var A4=n=>["/tour-details",n];function x4(n,e){if(n&1&&(V(0,"li",3)(1,"h2",4),j(2),P(),V(3,"p")(4,"strong"),j(5,"Date:"),P(),j(6),P(),V(7,"p")(8,"strong"),j(9,"Difficulty:"),P(),j(10),P(),V(11,"p")(12,"strong"),j(13,"Participants:"),P(),j(14),P(),V(15,"p")(16,"strong"),j(17,"Organized By:"),P(),j(18),P(),V(19,"button",5),j(20," View Details "),P()()),n&2){let t=e.$implicit;G(2),ut(t.name),G(4),mn(" ",t.date,""),G(4),mn(" ",t.difficulty,""),G(4),mn(" ",t.participants,""),G(4),mn(" ",t.createdByName,""),G(),ue("routerLink",vu(6,A4,t.id))}}var ZP=(()=>{class n{constructor(t){this.tourService=t,this.tours$=this.tourService.getTours()}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||n)(J(mi))}}static{this.\u0275cmp=ht({type:n,selectors:[["app-home"]],standalone:!0,features:[ft],decls:6,vars:3,consts:[[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],["class","mb-4 p-4 border rounded shadow",4,"ngFor","ngForOf"],[1,"mb-4","p-4","border","rounded","shadow"],[1,"text-xl","font-semibold"],[1,"mt-2","py-2","px-4","bg-blue-600","text-white","rounded","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"routerLink"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"h1",1),j(2,"Hiking Tours"),P(),V(3,"ul"),Ae(4,x4,21,8,"li",2),yu(5,"async"),P()()),r&2&&(G(4),ue("ngForOf",wu(5,1,i.tours$)))},dependencies:[Dr,ti,vp,ii]})}}return n})();var iR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(J(ei),J(Cr))}}static{this.\u0275dir=Et({type:n})}}return n})(),wg=(()=>{class n extends iR{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ki(n)))(i||n)}})()}static{this.\u0275dir=Et({type:n,features:[ur]})}}return n})(),zd=new ae("");var M4={provide:zd,useExisting:Qr(()=>fr),multi:!0};function P4(){let n=Fi()?Fi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var R4=new ae(""),fr=(()=>{class n extends iR{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!P4())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(J(ei),J(Cr),J(R4,8))}}static{this.\u0275dir=Et({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&$e("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},features:[ko([M4]),ur]})}}return n})();function N4(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var CE=new ae(""),oR=new ae("");function k4(n){return N4(n.value)?{required:!0}:null}function KP(n){return null}function sR(n){return n!=null}function aR(n){return Oo(n)?vt(n):n}function uR(n){let e={};return n.forEach(t=>{e=t!=null?Y(Y({},e),t):e}),Object.keys(e).length===0?null:e}function cR(n,e){return e.map(t=>t(n))}function O4(n){return!n.validate}function lR(n){return n.map(e=>O4(e)?e:t=>e.validate(t))}function L4(n){if(!n)return null;let e=n.filter(sR);return e.length==0?null:function(t){return uR(cR(t,e))}}function TE(n){return n!=null?L4(lR(n)):null}function F4(n){if(!n)return null;let e=n.filter(sR);return e.length==0?null:function(t){let r=cR(t,e).map(aR);return i_(r).pipe(me(uR))}}function DE(n){return n!=null?F4(lR(n)):null}function QP(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function V4(n){return n._rawValidators}function B4(n){return n._rawAsyncValidators}function bE(n){return n?Array.isArray(n)?n:[n]:[]}function pg(n,e){return Array.isArray(n)?n.includes(e):n===e}function YP(n,e){let t=bE(e);return bE(n).forEach(i=>{pg(t,i)||t.push(i)}),t}function JP(n,e){return bE(e).filter(t=>!pg(n,t))}var mg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=TE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=DE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},gc=class extends mg{get formDirective(){return null}get path(){return null}},$d=class extends mg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},gg=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},U4={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},KY=Re(Y({},U4),{"[class.ng-submitted]":"isSubmitted"}),gi=(()=>{class n extends gg{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(J($d,2))}}static{this.\u0275dir=Et({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&lp("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[ur]})}}return n})(),vc=(()=>{class n extends gg{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(J(gc,10))}}static{this.\u0275dir=Et({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&lp("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[ur]})}}return n})();var Fd="VALID",fg="INVALID",pc="PENDING",Vd="DISABLED",_c=class{},_g=class extends _c{constructor(e,t){super(),this.value=e,this.source=t}},Ud=class extends _c{constructor(e,t){super(),this.pristine=e,this.source=t}},jd=class extends _c{constructor(e,t){super(),this.touched=e,this.source=t}},mc=class extends _c{constructor(e,t){super(),this.status=e,this.source=t}};function dR(n){return(Ig(n)?n.validators:n)||null}function j4(n){return Array.isArray(n)?TE(n):n||null}function hR(n,e){return(Ig(e)?e.asyncValidators:n)||null}function $4(n){return Array.isArray(n)?DE(n):n||null}function Ig(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function z4(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new se(1e3,"");if(!r[t])throw new se(1001,"")}function H4(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new se(1002,"")})}var vg=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Cl(()=>this.statusReactive()),this.statusReactive=yl(void 0),this._pristine=Cl(()=>this.pristineReactive()),this.pristineReactive=yl(!0),this._touched=Cl(()=>this.touchedReactive()),this.touchedReactive=yl(!1),this._events=new Jt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Tr(this.statusReactive)}set status(e){Tr(()=>this.statusReactive.set(e))}get valid(){return this.status===Fd}get invalid(){return this.status===fg}get pending(){return this.status==pc}get disabled(){return this.status===Vd}get enabled(){return this.status!==Vd}get pristine(){return Tr(this.pristineReactive)}set pristine(e){Tr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Tr(this.touchedReactive)}set touched(e){Tr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(YP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(YP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(JP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(JP(e,this._rawAsyncValidators))}hasValidator(e){return pg(this._rawValidators,e)}hasAsyncValidator(e){return pg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Re(Y({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new jd(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new jd(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Re(Y({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ud(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ud(!0,r))}markAsPending(e={}){this.status=pc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new mc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Re(Y({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Vd,this.errors=null,this._forEachChild(i=>{i.disable(Re(Y({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _g(this.value,r)),this._events.next(new mc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Re(Y({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Fd,this._forEachChild(r=>{r.enable(Re(Y({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Re(Y({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fd||this.status===pc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _g(this.value,t)),this._events.next(new mc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Re(Y({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vd:Fd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=pc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=aR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new mc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Bt,this.statusChanges=new Bt}_calculateStatus(){return this._allControlsDisabled()?Vd:this.errors?fg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pc)?pc:this._anyControlsHaveStatus(fg)?fg:Fd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ud(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new jd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ig(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=j4(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=$4(this._rawAsyncValidators)}},yg=class extends vg{constructor(e,t,r){super(dR(t),hR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){H4(this,!0,e),Object.keys(e).forEach(r=>{z4(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var SE=new ae("CallSetDisabledState",{providedIn:"root",factory:()=>AE}),AE="always";function q4(n,e){return[...e.path,n]}function fR(n,e,t=AE){pR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),W4(n,e),K4(n,e),Z4(n,e),G4(n,e)}function XP(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function G4(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function pR(n,e){let t=V4(n);e.validator!==null?n.setValidators(QP(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=B4(n);e.asyncValidator!==null?n.setAsyncValidators(QP(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();XP(e._rawValidators,i),XP(e._rawAsyncValidators,i)}function W4(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&mR(n,e)})}function Z4(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&mR(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function mR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function K4(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Q4(n,e){n==null,pR(n,e)}function Y4(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function J4(n){return Object.getPrototypeOf(n.constructor)===wg}function X4(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function e3(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===fr?t=o:J4(o)?r=o:i=o}),i||r||t||null}var t3={provide:gc,useExisting:Qr(()=>ca)},Bd=Promise.resolve(),ca=(()=>{class n extends gc{get submitted(){return Tr(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Cl(()=>this.submittedReactive()),this.submittedReactive=yl(!1),this._directives=new Set,this.ngSubmit=new Bt,this.form=new yg({},TE(t),DE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Bd.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),fR(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Bd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Bd.then(()=>{let r=this._findContainer(t.path),i=new yg({});Q4(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Bd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Bd.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),X4(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(J(CE,10),J(oR,10),J(SE,8))}}static{this.\u0275dir=Et({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&$e("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ko([t3]),ur]})}}return n})();function eR(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function tR(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var n3=class extends vg{constructor(e=null,t,r){super(dR(t),hR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ig(t)&&(t.nonNullable||t.initialValueIsDefault)&&(tR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){eR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){eR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){tR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var r3={provide:$d,useExisting:Qr(()=>Rr)},nR=Promise.resolve(),Rr=(()=>{class n extends $d{constructor(t,r,i,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new n3,this._registered=!1,this.name="",this.update=new Bt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=e3(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Y4(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){fR(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){nR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Fo(r);nR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?q4(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(J(gc,9),J(CE,10),J(oR,10),J(zd,10),J(Lo,8),J(SE,8))}}static{this.\u0275dir=Et({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ko([r3]),ur,Ro]})}}return n})(),yc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Et({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),i3={provide:zd,useExisting:Qr(()=>xE),multi:!0},xE=(()=>{class n extends wg{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ki(n)))(i||n)}})()}static{this.\u0275dir=Et({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&$e("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},features:[ko([i3]),ur]})}}return n})();var o3={provide:zd,useExisting:Qr(()=>wc),multi:!0};function gR(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function s3(n){return n.split(":")[0]}var wc=(()=>{class n extends wg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=gR(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=s3(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ki(n)))(i||n)}})()}static{this.\u0275dir=Et({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&$e("change",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ko([o3]),ur]})}}return n})(),Eg=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(gR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(J(Cr),J(ei),J(wc,9))}}static{this.\u0275dir=Et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),a3={provide:zd,useExisting:Qr(()=>_R),multi:!0};function rR(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function u3(n){return n.split(":")[0]}var _R=(()=>{class n extends wg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,a)=>{o._setSelected(i.indexOf(a.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let d=a[c],f=this._getOptionValue(d.value);i.push(f)}}else{let a=r.options;for(let c=0;c<a.length;c++){let d=a[c];if(d.selected){let f=this._getOptionValue(d.value);i.push(f)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=u3(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ki(n)))(i||n)}})()}static{this.\u0275dir=Et({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&$e("change",function(a){return i.onChange(a.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ko([a3]),ur]})}}return n})(),bg=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(rR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(rR(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(J(Cr),J(ei),J(_R,9))}}static{this.\u0275dir=Et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var c3=(()=>{class n{constructor(){this._validator=KP}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):KP,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Et({type:n,features:[Ro]})}}return n})();var l3={provide:CE,useExisting:Qr(()=>la),multi:!0};var la=(()=>{class n extends c3{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Fo,this.createValidator=t=>k4}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ki(n)))(i||n)}})()}static{this.\u0275dir=Et({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&wl("required",i._enabled?"":null)},inputs:{required:"required"},features:[ko([l3]),ur]})}}return n})();var d3=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Po({type:n})}static{this.\u0275inj=Mo({})}}return n})();var _i=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:SE,useValue:t.callSetDisabledState??AE}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Po({type:n})}static{this.\u0275inj=Mo({imports:[d3]})}}return n})();var xt=(()=>{class n{constructor(){this.auth=W(Ks),this.firestore=W(Mn),this.userSubject=new Mt(null),this.userTypeSubject=new Mt(null),this.userDataSubject=new Mt(null),hm(this.auth,t=>b(this,null,function*(){if(t){let i=(yield Pn(Ot(this.firestore,"users",t.uid))).data();this.userDataSubject.next(i);let o=i?.type??null;this.userTypeSubject.next(o)}else this.userTypeSubject.next(null);this.userSubject.next(t)}))}get user$(){return this.userSubject.asObservable()}get userType$(){return this.userTypeSubject.asObservable()}get userData$(){return this.userDataSubject.asObservable()}get currentUser(){return this.auth.currentUser}register(t,r,i,o,a){return b(this,null,function*(){let c=yield Fx(this.auth,t,r),d=c.user;return yield Ji(Ot(this.firestore,"users",d.uid),{firstName:i,lastName:o,email:t,type:a}),c})}login(t,r){return b(this,null,function*(){return yield Bx(this.auth,t,r)})}logout(){return b(this,null,function*(){return yield fm(this.auth)})}updateUserData(t){if(this.currentUser)return Ji(Ot(this.firestore,"users",this.currentUser.uid),t);throw new Error("User is not logged in")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function h3(n,e){n&1&&(V(0,"div",16),j(1," Email is required. "),P())}function f3(n,e){n&1&&(V(0,"div",16),j(1," Password is required. "),P())}var vR=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.authService.user$.subscribe(i=>{i&&this.router.navigate(["/"])})}onLogin(t){return b(this,null,function*(){t.invalid||(yield this.authService.login(this.email,this.password),this.router.navigate(["/"]))})}static{this.\u0275fac=function(r){return new(r||n)(J(xt),J(ct))}}static{this.\u0275cmp=ht({type:n,selectors:[["app-login"]],standalone:!0,features:[ft],decls:25,vars:4,consts:[["loginForm","ngForm"],["emailInput","ngModel"],["passwordInput","ngModel"],[1,"flex","min-h-screen","items-center","justify-center","bg-gray-100"],[1,"w-full","max-w-md","p-8","bg-white","rounded-lg","shadow-lg"],[1,"text-2xl","font-bold","text-center","text-gray-800"],[1,"mt-6","space-y-6",3,"ngSubmit"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","name","email","placeholder","Enter your email","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["class","text-red-500 text-sm",4,"ngIf"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","placeholder","Enter your password","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","py-3","px-4","mt-4","text-white","bg-blue-600","rounded-lg","hover:bg-blue-700","transition-colors","duration-200"],[1,"my-6","border-t","border-gray-300"],[1,"mt-6","text-center","text-sm","text-gray-600"],["routerLink","/register",1,"text-blue-600","hover:underline"],[1,"text-red-500","text-sm"]],template:function(r,i){if(r&1){let o=mt();V(0,"div",3)(1,"div",4)(2,"h2",5),j(3,"Login to Your Account"),P(),V(4,"form",6,0),$e("ngSubmit",function(){be(o);let c=Rt(5);return Ce(i.onLogin(c))}),V(6,"div")(7,"label",7),j(8,"Email"),P(),V(9,"input",8,1),Ct("ngModelChange",function(c){return be(o),St(i.email,c)||(i.email=c),Ce(c)}),P(),Ae(11,h3,2,0,"div",9),P(),V(12,"div")(13,"label",10),j(14,"Password"),P(),V(15,"input",11,2),Ct("ngModelChange",function(c){return be(o),St(i.password,c)||(i.password=c),Ce(c)}),P(),Ae(17,f3,2,0,"div",9),P(),V(18,"button",12),j(19," Login "),P()(),Pt(20,"div",13),V(21,"p",14),j(22," Don't have an account? "),V(23,"a",15),j(24,"Sign up"),P()()()()}if(r&2){let o=Rt(10),a=Rt(16);G(9),bt("ngModel",i.email),G(2),ue("ngIf",o.invalid&&o.touched),G(4),bt("ngModel",i.password),G(2),ue("ngIf",a.invalid&&a.touched)}},dependencies:[Nu,ii,_i,yc,fr,gi,vc,la,Rr,ca,Dr,gn]})}}return n})();function p3(n,e){n&1&&(V(0,"div",32),j(1," Email is required. "),P())}function m3(n,e){n&1&&(V(0,"div",32),j(1," First name is required. "),P())}function g3(n,e){n&1&&(V(0,"div",32),j(1," Last name is required. "),P())}function _3(n,e){n&1&&(V(0,"div",32),j(1," Password is required. "),P())}function v3(n,e){n&1&&(V(0,"div",32),j(1," Confirm password is required. "),P())}function y3(n,e){n&1&&(V(0,"div",32),j(1," Passwords do not match. "),P())}function w3(n,e){n&1&&(V(0,"div",32),j(1," User type is required. "),P())}function I3(n,e){n&1&&(V(0,"div",33),Pt(1,"div",34),P())}var yR=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isLoading=!1,this.authService.user$.subscribe(i=>{i&&this.router.navigate(["/"])})}onRegister(t){return b(this,null,function*(){t.invalid||(this.isLoading=!0,yield this.authService.register(this.email,this.password,this.firstName,this.lastName,this.userType),this.isLoading=!1,this.router.navigate(["/"]))})}static{this.\u0275fac=function(r){return new(r||n)(J(xt),J(ct))}}static{this.\u0275cmp=ht({type:n,selectors:[["app-register"]],standalone:!0,features:[ft],decls:57,vars:14,consts:[["registerForm","ngForm"],["emailInput","ngModel"],["firstNameInput","ngModel"],["lastNameInput","ngModel"],["passwordInput","ngModel"],["confirmPasswordInput","ngModel"],["userTypeInput","ngModel"],[1,"flex","min-h-screen","items-center","justify-center","bg-gray-100"],[1,"w-full","max-w-md","p-8","bg-white","rounded-lg","shadow-lg"],[1,"text-2xl","font-bold","text-center","text-gray-800"],[3,"ngSubmit"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","name","email","placeholder","Enter your email","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["class","text-red-500 text-sm",4,"ngIf"],["for","firstName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","firstName","name","firstName","placeholder","Enter your first name","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","lastName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","lastName","name","lastName","placeholder","Enter your last name","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","placeholder","Enter your password","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Confirm your password","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","userType",1,"block","text-sm","font-medium","text-gray-700"],["id","userType","name","userType","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],["value","hiker"],["value","hikingClub"],["type","submit",1,"w-full","py-3","px-4","mt-4","text-white","bg-blue-600","rounded-lg","hover:bg-blue-700","transition-colors","duration-200"],["class","fixed inset-0 flex items-center justify-center bg-gray-100 bg-opacity-75 z-50",4,"ngIf"],[1,"my-6","border-t","border-gray-300"],[1,"text-center","text-sm","text-gray-600"],["routerLink","/login",1,"text-blue-600","hover:underline"],[1,"text-red-500","text-sm"],[1,"fixed","inset-0","flex","items-center","justify-center","bg-gray-100","bg-opacity-75","z-50"],[1,"animate-spin","rounded-full","h-32","w-32","border-t-2","border-b-2","border-blue-500"]],template:function(r,i){if(r&1){let o=mt();V(0,"div",7)(1,"div",8)(2,"h2",9),j(3,"Create an Account"),P(),V(4,"form",10,0),$e("ngSubmit",function(){be(o);let c=Rt(5);return Ce(i.onRegister(c))}),V(6,"div")(7,"label",11),j(8,"Email"),P(),V(9,"input",12,1),Ct("ngModelChange",function(c){return be(o),St(i.email,c)||(i.email=c),Ce(c)}),P(),Ae(11,p3,2,0,"div",13),P(),V(12,"div")(13,"label",14),j(14,"First Name"),P(),V(15,"input",15,2),Ct("ngModelChange",function(c){return be(o),St(i.firstName,c)||(i.firstName=c),Ce(c)}),P(),Ae(17,m3,2,0,"div",13),P(),V(18,"div")(19,"label",16),j(20,"Last Name"),P(),V(21,"input",17,3),Ct("ngModelChange",function(c){return be(o),St(i.lastName,c)||(i.lastName=c),Ce(c)}),P(),Ae(23,g3,2,0,"div",13),P(),V(24,"div")(25,"label",18),j(26,"Password"),P(),V(27,"input",19,4),Ct("ngModelChange",function(c){return be(o),St(i.password,c)||(i.password=c),Ce(c)}),P(),Ae(29,_3,2,0,"div",13),P(),V(30,"div")(31,"label",20),j(32,"Confirm Password"),P(),V(33,"input",21,5),Ct("ngModelChange",function(c){return be(o),St(i.confirmPassword,c)||(i.confirmPassword=c),Ce(c)}),P(),Ae(35,v3,2,0,"div",13)(36,y3,2,0,"div",13),P(),V(37,"div")(38,"label",22),j(39,"User Type"),P(),V(40,"select",23,6),Ct("ngModelChange",function(c){return be(o),St(i.userType,c)||(i.userType=c),Ce(c)}),V(42,"option",24),j(43,"Select user type"),P(),V(44,"option",25),j(45,"Hiker"),P(),V(46,"option",26),j(47,"Hiking Club"),P()(),Ae(48,w3,2,0,"div",13),P(),V(49,"button",27),j(50," Register "),P()(),Ae(51,I3,2,0,"div",28),Pt(52,"div",29),V(53,"p",30),j(54," Already have an account? "),V(55,"a",31),j(56,"Login"),P()()()()}if(r&2){let o=Rt(10),a=Rt(16),c=Rt(22),d=Rt(28),f=Rt(34),g=Rt(41);G(9),bt("ngModel",i.email),G(2),ue("ngIf",o.invalid&&o.touched),G(4),bt("ngModel",i.firstName),G(2),ue("ngIf",a.invalid&&a.touched),G(4),bt("ngModel",i.lastName),G(2),ue("ngIf",c.invalid&&c.touched),G(4),bt("ngModel",i.password),G(2),ue("ngIf",d.invalid&&d.touched),G(4),bt("ngModel",i.confirmPassword),G(2),ue("ngIf",f.invalid&&f.touched),G(),ue("ngIf",i.password!==i.confirmPassword&&f.touched),G(4),bt("ngModel",i.userType),G(8),ue("ngIf",g.invalid&&g.touched),G(3),ue("ngIf",i.isLoading)}},dependencies:[_i,yc,Eg,bg,fr,wc,gi,vc,la,Rr,ca,Nu,ii,Dr,gn]})}}return n})();var E3=n=>["/tour-participants",n];function b3(n,e){if(n&1&&(V(0,"div",9),j(1),P()),n&2){let t=Le(2);G(),bl("",t.clubProfile.firstName," ",t.clubProfile.lastName,"")}}function C3(n,e){if(n&1){let t=mt();V(0,"div",15)(1,"input",16),Ct("ngModelChange",function(i){be(t);let o=Le(2);return St(o.firstName,i)||(o.firstName=i),Ce(i)}),P(),V(2,"input",17),Ct("ngModelChange",function(i){be(t);let o=Le(2);return St(o.lastName,i)||(o.lastName=i),Ce(i)}),P()()}if(n&2){let t=Le(2);G(),bt("ngModel",t.firstName),G(),bt("ngModel",t.lastName)}}function T3(n,e){if(n&1){let t=mt();V(0,"button",18),$e("click",function(){be(t);let i=Le(2);return Ce(i.toggleEditMode())}),j(1,"Edit"),P()}}function D3(n,e){if(n&1){let t=mt();V(0,"button",19),$e("click",function(){be(t);let i=Le(2);return Ce(i.saveProfile())}),j(1,"Save"),P()}}function S3(n,e){if(n&1){let t=mt();V(0,"button",20),$e("click",function(){be(t);let i=Le(2);return Ce(i.toggleEditMode())}),j(1,"Cancel"),P()}}function A3(n,e){if(n&1&&(V(0,"li",22)(1,"h3",23),j(2),P(),V(3,"p")(4,"strong"),j(5,"Date:"),P(),j(6),P(),V(7,"p")(8,"strong"),j(9,"Difficulty:"),P(),j(10),P(),V(11,"p")(12,"strong"),j(13,"Participants:"),P(),j(14),P(),V(15,"button",24),j(16,"View Participants"),P()()),n&2){let t=e.$implicit;G(2),ut(t.name),G(4),mn(" ",t.date,""),G(4),mn(" ",t.difficulty,""),G(4),mn(" ",t.participants,""),G(),ue("routerLink",vu(5,E3,t.id))}}function x3(n,e){if(n&1&&(V(0,"ul"),Ae(1,A3,17,7,"li",21),P()),n&2){let t=Le(2);G(),ue("ngForOf",t.tours)}}function M3(n,e){n&1&&(V(0,"p"),j(1,"No tours organized by this club."),P())}function P3(n,e){if(n&1&&(V(0,"div")(1,"div",5)(2,"div",6),j(3,"Name:"),P(),Ae(4,b3,2,2,"div",7)(5,C3,3,2,"div",8),P(),V(6,"div",5)(7,"div",6),j(8,"Email:"),P(),V(9,"div",9),j(10),P()(),V(11,"div",5)(12,"div",6),j(13,"Type:"),P(),V(14,"div",9),j(15),P()(),V(16,"div",10),Ae(17,T3,2,0,"button",11)(18,D3,2,0,"button",12)(19,S3,2,0,"button",13),P(),V(20,"h2",14),j(21,"Organized Tours"),P(),Ae(22,x3,2,1,"ul",4)(23,M3,2,0,"ng-template",null,1,Ls),P()),n&2){let t=Rt(24),r=Le();G(4),ue("ngIf",!r.editMode),G(),ue("ngIf",r.editMode),G(5),ut(r.clubProfile.email),G(5),ut(r.clubProfile.type),G(2),ue("ngIf",!r.editMode),G(),ue("ngIf",r.editMode),G(),ue("ngIf",r.editMode),G(3),ue("ngIf",r.tours.length>0)("ngIfElse",t)}}function R3(n,e){n&1&&(V(0,"p"),j(1,"No profile data available."),P())}var wR=(()=>{class n{constructor(t){this.authService=t,this.clubProfile=null,this.firestore=W(Mn),this.editMode=!1,this.firstName="",this.lastName=""}ngOnInit(){return b(this,null,function*(){let t=this.authService.currentUser;if(t){let r=yield Pn(Ot(this.firestore,"users",t.uid));r.exists()?(this.clubProfile=r.data(),this.firstName=this.clubProfile.firstName,this.lastName=this.clubProfile.lastName,yield this.loadTours(t.uid)):console.error("User not found")}else console.error("User is not authenticated")})}toggleEditMode(){this.editMode=!this.editMode}loadTours(t){return b(this,null,function*(){let r=ua(this.firestore,"tours"),i=GP(r,WP("createdBy","==",t)),o=yield hg(i);this.tours=o.docs.map(a=>{let c=a.data();return c.id=a.id,c})})}saveProfile(){return b(this,null,function*(){this.clubProfile&&(this.clubProfile.firstName=this.firstName,this.clubProfile.lastName=this.lastName,this.authService.updateUserData(this.clubProfile),this.toggleEditMode())})}static{this.\u0275fac=function(r){return new(r||n)(J(xt))}}static{this.\u0275cmp=ht({type:n,selectors:[["app-profile-club"]],standalone:!0,features:[ft],decls:6,vars:2,consts:[["noProfile",""],["noTours",""],[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],[4,"ngIf","ngIfElse"],[1,"flex","items-center","space-x-4"],[1,"text-lg","font-semibold","text-gray-700"],["class","text-lg text-gray-900",4,"ngIf"],["class","flex space-x-2",4,"ngIf"],[1,"text-lg","text-gray-900"],[1,"flex","justify-end","space-x-4","mt-4"],["class","bg-blue-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-green-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-red-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],[1,"text-xl","font-bold","mt-4"],[1,"flex","space-x-2"],["placeholder","First Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],["placeholder","Last Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],[1,"bg-blue-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-green-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-red-500","text-white","px-4","py-2","rounded",3,"click"],["class","mb-4 p-4 border rounded shadow",4,"ngFor","ngForOf"],[1,"mb-4","p-4","border","rounded","shadow"],[1,"text-lg","font-semibold"],[1,"bg-blue-500","text-white","px-4","py-2","rounded","mt-2",3,"routerLink"]],template:function(r,i){if(r&1&&(V(0,"div",2)(1,"h1",3),j(2,"Club Profile"),P(),Ae(3,P3,25,9,"div",4)(4,R3,2,0,"ng-template",null,0,Ls),P()),r&2){let o=Rt(5);G(3),ue("ngIf",i.clubProfile)("ngIfElse",o)}},dependencies:[gn,ti,_i,fr,gi,Rr,ii]})}}return n})();function N3(n,e){if(n&1&&(V(0,"div",9),j(1),P()),n&2){let t=Le(2);G(),bl("",t.userProfile.firstName," ",t.userProfile.lastName,"")}}function k3(n,e){if(n&1){let t=mt();V(0,"div",14)(1,"input",15),Ct("ngModelChange",function(i){be(t);let o=Le(2);return St(o.firstName,i)||(o.firstName=i),Ce(i)}),P(),V(2,"input",16),Ct("ngModelChange",function(i){be(t);let o=Le(2);return St(o.lastName,i)||(o.lastName=i),Ce(i)}),P()()}if(n&2){let t=Le(2);G(),bt("ngModel",t.firstName),G(),bt("ngModel",t.lastName)}}function O3(n,e){if(n&1){let t=mt();V(0,"button",17),$e("click",function(){be(t);let i=Le(2);return Ce(i.toggleEditMode())}),j(1,"Edit"),P()}}function L3(n,e){if(n&1){let t=mt();V(0,"button",18),$e("click",function(){be(t);let i=Le(2);return Ce(i.saveProfile())}),j(1,"Save"),P()}}function F3(n,e){if(n&1){let t=mt();V(0,"button",19),$e("click",function(){be(t);let i=Le(2);return Ce(i.toggleEditMode())}),j(1,"Cancel"),P()}}function V3(n,e){if(n&1&&(V(0,"div",4)(1,"div",5)(2,"div",6),j(3,"Name:"),P(),Ae(4,N3,2,2,"div",7)(5,k3,3,2,"div",8),P(),V(6,"div",5)(7,"div",6),j(8,"Email:"),P(),V(9,"div",9),j(10),P()(),V(11,"div",5)(12,"div",6),j(13,"Type:"),P(),V(14,"div",9),j(15),P()(),V(16,"div",10),Ae(17,O3,2,0,"button",11)(18,L3,2,0,"button",12)(19,F3,2,0,"button",13),P()()),n&2){let t=Le();G(4),ue("ngIf",!t.editMode),G(),ue("ngIf",t.editMode),G(5),ut(t.userProfile.email),G(5),ut(t.userProfile.type),G(2),ue("ngIf",!t.editMode),G(),ue("ngIf",t.editMode),G(),ue("ngIf",t.editMode)}}function B3(n,e){n&1&&(V(0,"p",20),j(1,"No profile data available."),P())}var IR=(()=>{class n{constructor(t){this.authService=t,this.editMode=!1,this.firstName="",this.lastName=""}ngOnInit(){return b(this,null,function*(){this.authService.userData$.subscribe(t=>{let r=t;r&&(this.userProfile=r),this.firstName=this.userProfile.firstName,this.lastName=this.userProfile.lastName})})}toggleEditMode(){this.editMode=!this.editMode}saveProfile(){return b(this,null,function*(){this.userProfile.firstName=this.firstName,this.userProfile.lastName=this.lastName,this.authService.updateUserData(this.userProfile),this.toggleEditMode()})}static{this.\u0275fac=function(r){return new(r||n)(J(xt))}}static{this.\u0275cmp=ht({type:n,selectors:[["app-profile-hiker"]],standalone:!0,features:[ft],decls:6,vars:2,consts:[["noProfile",""],[1,"container","mx-auto","p-6","bg-white","shadow-lg","rounded-lg"],[1,"text-3xl","font-bold","text-gray-800","mb-6","text-center"],["class","space-y-4",4,"ngIf","ngIfElse"],[1,"space-y-4"],[1,"flex","items-center","space-x-4"],[1,"text-lg","font-semibold","text-gray-700"],["class","text-lg text-gray-900",4,"ngIf"],["class","flex space-x-2",4,"ngIf"],[1,"text-lg","text-gray-900"],[1,"flex","justify-end","space-x-4"],["class","bg-blue-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-green-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-red-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],[1,"flex","space-x-2"],["placeholder","First Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],["placeholder","Last Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],[1,"bg-blue-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-green-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-red-500","text-white","px-4","py-2","rounded",3,"click"],[1,"text-center","text-gray-500"]],template:function(r,i){if(r&1&&(V(0,"div",1)(1,"h1",2),j(2,"Profile"),P(),Ae(3,V3,20,7,"div",3)(4,B3,2,0,"ng-template",null,0,Ls),P()),r&2){let o=Rt(5);G(3),ue("ngIf",i.userProfile)("ngIfElse",o)}},dependencies:[gn,_i,fr,gi,Rr]})}}return n})();var ME=(n,e)=>{let t=W(xt),r=W(ct);return t.user$.pipe(Xt(1),me(i=>i?!0:(r.navigate(["/login"]),!1)))};var ER=(()=>{class n{constructor(t,r,i){this.authService=t,this.tourService=r,this.router=i,this.tour={name:"",date:"",description:"",gpxContent:"",difficulty:"easy",participants:0,createdBy:"",createdAt:""},this.gpxFile=null}onFileChange(t){let r=t.target.files[0];r&&(this.gpxFile=r)}onSubmit(){return b(this,null,function*(){if(this.gpxFile){let t=this.authService.currentUser;if(t){let r=new FileReader;r.onload=()=>b(this,null,function*(){let i=r.result;this.tour.gpxContent=i,this.tour.createdBy=t.uid,this.tour.createdAt=new Date().toISOString();try{let o=yield this.tourService.addTour(this.tour);console.log("Tour created with ID:",o.id),this.router.navigate(["/"])}catch(o){console.error("Error adding document:",o)}}),r.readAsText(this.gpxFile)}else console.error("User is not authenticated")}else console.error("GPX file is required")})}static{this.\u0275fac=function(r){return new(r||n)(J(xt),J(mi),J(ct))}}static{this.\u0275cmp=ht({type:n,selectors:[["app-create-hiking-tour"]],standalone:!0,features:[ft],decls:38,vars:6,consts:[["tourForm","ngForm"],[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],[3,"ngSubmit"],[1,"mb-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","name","name","name","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","date",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","date","name","date","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","description",1,"block","text-sm","font-medium","text-gray-700"],["id","description","name","description","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","gpxFile",1,"block","text-sm","font-medium","text-gray-700"],["type","file","id","gpxFile","name","gpxFile","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"change"],["for","difficulty",1,"block","text-sm","font-medium","text-gray-700"],["id","difficulty","name","difficulty","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["value","easy"],["value","moderate"],["value","hard"],["for","participants",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","participants","name","participants","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"mt-4"],["type","submit",1,"w-full","py-2","px-4","bg-blue-600","text-white","rounded-md","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"disabled"]],template:function(r,i){if(r&1){let o=mt();V(0,"div",1)(1,"h1",2),j(2,"Create Hiking Tour"),P(),V(3,"form",3,0),$e("ngSubmit",function(){return be(o),Ce(i.onSubmit())}),V(5,"div",4)(6,"label",5),j(7,"Tour Name"),P(),V(8,"input",6),Ct("ngModelChange",function(c){return be(o),St(i.tour.name,c)||(i.tour.name=c),Ce(c)}),P()(),V(9,"div",4)(10,"label",7),j(11,"Date"),P(),V(12,"input",8),Ct("ngModelChange",function(c){return be(o),St(i.tour.date,c)||(i.tour.date=c),Ce(c)}),P()(),V(13,"div",4)(14,"label",9),j(15,"Description"),P(),V(16,"textarea",10),Ct("ngModelChange",function(c){return be(o),St(i.tour.description,c)||(i.tour.description=c),Ce(c)}),P()(),V(17,"div",4)(18,"label",11),j(19,"GPX File"),P(),V(20,"input",12),$e("change",function(c){return be(o),Ce(i.onFileChange(c))}),P()(),V(21,"div",4)(22,"label",13),j(23,"Difficulty Level"),P(),V(24,"select",14),Ct("ngModelChange",function(c){return be(o),St(i.tour.difficulty,c)||(i.tour.difficulty=c),Ce(c)}),V(25,"option",15),j(26,"Easy"),P(),V(27,"option",16),j(28,"Moderate"),P(),V(29,"option",17),j(30,"Hard"),P()()(),V(31,"div",4)(32,"label",18),j(33,"Number of Participants"),P(),V(34,"input",19),Ct("ngModelChange",function(c){return be(o),St(i.tour.participants,c)||(i.tour.participants=c),Ce(c)}),P()(),V(35,"div",20)(36,"button",21),j(37," Create Tour "),P()()()()}if(r&2){let o=Rt(4);G(8),bt("ngModel",i.tour.name),G(4),bt("ngModel",i.tour.date),G(4),bt("ngModel",i.tour.description),G(8),bt("ngModel",i.tour.difficulty),G(10),bt("ngModel",i.tour.participants),G(2),ue("disabled",o.invalid)}},dependencies:[Dr,_i,yc,Eg,bg,fr,xE,wc,gi,vc,la,Rr,ca]})}}return n})();var PE=(n,e)=>{let t=W(xt),r=W(ct);return t.userType$.pipe(Xt(1),me(i=>i==="hikingClub"?!0:(r.navigate(["/"]),!1)))};var Ic=_N(CR());var U3=15e3,NE=1e3,kE=60*NE,Dg=60*kE,RE=24*Dg,j3="http://www.topografix.com/GPX/gpx_style/0/2",Tg=new L.Icon.Default,$3={startIcon:Tg,endIcon:Tg,wptIcons:{"":Tg},wptTypeIcons:{"":Tg},pointMatchers:[]},z3={iconSize:[33,45],iconAnchor:[16,45],clickable:!1},H3={color:"blue"},q3={parseElements:["track","route","waypoint"],joinTrackSegments:!0};L.GPX=L.FeatureGroup.extend({initialize:function(n,e){e.max_point_interval=e.max_point_interval||U3,e.markers=this._merge_objs($3,e.markers||{}),e.marker_options=this._merge_objs(z3,e.marker_options||{}),e.polyline_options=e.polyline_options||[],e.gpx_options=this._merge_objs(q3,e.gpx_options||{}),L.Util.setOptions(this,e),L.GPXTrackIcon=L.Icon.extend({options:e.marker_options}),this._gpx=n,this._layers={},this._prepare_markers(e.markers),this._init_info(),n&&this._parse(n,e,this.options.async)},get_duration_string:function(n,e){var t="";n>=RE&&(t+=Math.floor(n/RE)+"d ",n=n%RE),n>=Dg&&(t+=Math.floor(n/Dg)+":",n=n%Dg);var r=Math.floor(n/kE);n=n%kE,r<10&&(t+="0"),t+=r+"'";var i=Math.floor(n/NE);return n=n%NE,i<10&&(t+="0"),t+=i,!e&&n>0?t+="."+Math.round(Math.floor(n)*1e3)/1e3:t+='"',t},get_duration_string_iso:function(n,e){var t=this.get_duration_string(n,e);return t.replace("'",":").replace('"',"")},to_miles:function(n){return n/1.60934},to_ft:function(n){return n*3.28084},m_to_km:function(n){return n/1e3},m_to_mi:function(n){return n/1609.34},ms_to_kmh:function(n){return n*3.6},ms_to_mih:function(n){return n/1609.34*3600},get_name:function(){return this._info.name},get_desc:function(){return this._info.desc},get_author:function(){return this._info.author},get_copyright:function(){return this._info.copyright},get_distance:function(){return this._info.length},get_distance_imp:function(){return this.to_miles(this.m_to_km(this.get_distance()))},get_start_time:function(){return this._info.duration.start},get_end_time:function(){return this._info.duration.end},get_moving_time:function(){return this._info.duration.moving},get_total_time:function(){return this._info.duration.total},get_moving_pace:function(){return this.get_moving_time()/this.m_to_km(this.get_distance())},get_moving_pace_imp:function(){return this.get_moving_time()/this.get_distance_imp()},get_moving_speed:function(){return this.m_to_km(this.get_distance())/(this.get_moving_time()/(3600*1e3))},get_moving_speed_imp:function(){return this.to_miles(this.m_to_km(this.get_distance()))/(this.get_moving_time()/(3600*1e3))},get_total_speed:function(){return this.m_to_km(this.get_distance())/(this.get_total_time()/(3600*1e3))},get_total_speed_imp:function(){return this.to_miles(this.m_to_km(this.get_distance()))/(this.get_total_time()/(3600*1e3))},get_elevation_gain:function(){return this._info.elevation.gain},get_elevation_loss:function(){return this._info.elevation.loss},get_elevation_gain_imp:function(){return this.to_ft(this.get_elevation_gain())},get_elevation_loss_imp:function(){return this.to_ft(this.get_elevation_loss())},get_elevation_data:function(){var n=this;return this._info.elevation._points.map(function(e){return n._prepare_data_point(e,n.m_to_km,null,function(t,r){return t.toFixed(2)+" km, "+r.toFixed(0)+" m"})})},get_elevation_data_imp:function(){var n=this;return this._info.elevation._points.map(function(e){return n._prepare_data_point(e,n.m_to_mi,n.to_ft,function(t,r){return t.toFixed(2)+" mi, "+r.toFixed(0)+" ft"})})},get_elevation_max:function(){return this._info.elevation.max},get_elevation_min:function(){return this._info.elevation.min},get_elevation_max_imp:function(){return this.to_ft(this.get_elevation_max())},get_elevation_min_imp:function(){return this.to_ft(this.get_elevation_min())},get_speed_data:function(){var n=this;return this._info.speed._points.map(function(e){return n._prepare_data_point(e,n.m_to_km,n.ms_to_kmh,function(t,r){return t.toFixed(2)+" km, "+r.toFixed(2)+" km/h"})})},get_speed_data_imp:function(){var n=this;return this._info.speed._points.map(function(e){return n._prepare_data_point(e,n.m_to_mi,n.ms_to_mih,function(t,r){return t.toFixed(2)+" mi, "+r.toFixed(2)+" mi/h"})})},get_speed_max:function(){return this.m_to_km(this._info.speed.max)*3600},get_speed_max_imp:function(){return this.to_miles(this.get_speed_max())},get_average_hr:function(){return this._info.hr.avg},get_average_temp:function(){return this._info.atemp.avg},get_average_cadence:function(){return this._info.cad.avg},get_heartrate_data:function(){var n=this;return this._info.hr._points.map(function(e){return n._prepare_data_point(e,n.m_to_km,null,function(t,r){return t.toFixed(2)+" km, "+r.toFixed(0)+" bpm"})})},get_heartrate_data_imp:function(){var n=this;return this._info.hr._points.map(function(e){return n._prepare_data_point(e,n.m_to_mi,null,function(t,r){return t.toFixed(2)+" mi, "+r.toFixed(0)+" bpm"})})},get_cadence_data:function(){var n=this;return this._info.cad._points.map(function(e){return n._prepare_data_point(e,n.m_to_km,null,function(t,r){return t.toFixed(2)+" km, "+r.toFixed(0)+" rpm"})})},get_temp_data:function(){var n=this;return this._info.atemp._points.map(function(e){return n._prepare_data_point(e,n.m_to_km,null,function(t,r){return t.toFixed(2)+" km, "+r.toFixed(0)+" degrees"})})},get_cadence_data_imp:function(){var n=this;return this._info.cad._points.map(function(e){return n._prepare_data_point(e,n.m_to_mi,null,function(t,r){return t.toFixed(2)+" mi, "+r.toFixed(0)+" rpm"})})},get_temp_data_imp:function(){var n=this;return this._info.atemp._points.map(function(e){return n._prepare_data_point(e,n.m_to_mi,null,function(t,r){return t.toFixed(2)+" mi, "+r.toFixed(0)+" degrees"})})},reload:function(){this._init_info(),this.clearLayers(),this._parse(this._gpx,this.options,this.options.async)},_merge_objs:function(n,e){var t={};for(var r in n)t[r]=n[r];for(var r in e)t[r]=e[r];return t},_prepare_data_point:function(n,e,t,r){var i=[e&&e(n[0])||n[0],t&&t(n[1])||n[1]];return i.push(r&&r(i[0],i[1])||i[0]+": "+i[1]),i},_prepare_markers:function(n){function e(t){return new L.GPXTrackIcon({iconUrl:t})}return Object.entries(n).forEach(([t,r])=>{t==="wptIcons"||t==="wptTypeIcons"?n[t]=this._prepare_markers(r):t==="pointMatchers"?n[t]=r.map(i=>(typeof i.icon=="string"&&(i.icon=e(i.icon)),i)):typeof r=="string"?n[t]=e(r):typeof r=="object"&&r!==null&&(n[t]=this._prepare_markers(r))}),n},_init_info:function(){this._info={name:null,length:0,elevation:{gain:0,loss:0,max:0,min:1/0,_points:[]},speed:{max:0,_points:[]},hr:{avg:0,_total:0,_points:[]},duration:{start:null,end:null,moving:0,total:0},atemp:{avg:0,_total:0,_points:[]},cad:{avg:0,_total:0,_points:[]}}},_load_xml:function(n,e,t,r){r==null&&(r=this.options.async),t==null&&(t=this.options);var i=this,o=new window.XMLHttpRequest;o.open("GET",n,r);try{o.overrideMimeType("text/xml")}catch{}o.onloadend=function(){o.status==200?e(o.responseXML,t):i.fire("error",{err:"Error fetching resource: "+n})},o.send(null)},_parse:function(n,e,t){var r=this,i=function(a,c){var d=r._parse_gpx_data(a,c);if(!d){r.fire("error",{err:"No parseable layers of type(s) "+JSON.stringify(c.gpx_options.parseElements)});return}r.addLayer(d),r.fire("loaded",{layers:d,element:a})};if(n.substr(0,1)==="<"){var o=new DOMParser;t?setTimeout(function(){i(o.parseFromString(n,"text/xml"),e)}):i(o.parseFromString(n,"text/xml"),e)}else this._load_xml(n,i,e,t)},_parse_gpx_data:function(n,e){var t,r,i,o,a=[],c=n.getElementsByTagName("name");c.length>0&&(this._info.name=c[0].textContent);var d=n.getElementsByTagName("desc");d.length>0&&(this._info.desc=d[0].textContent);var f=n.getElementsByTagName("author");f.length>0&&(this._info.author=f[0].textContent);var g=n.getElementsByTagName("copyright");g.length>0&&(this._info.copyright=g[0].textContent);var y=e.gpx_options.parseElements;if(y.indexOf("route")>-1){var E=n.getElementsByTagName("rte");for(t=0;t<E.length;t++){var C=E[t],F=this._extract_styling(C),z=this._get_polyline_options(e.polyline_options,t);a=a.concat(this._parse_segment(E[t],e,F,z,"rtept"))}}if(y.indexOf("track")>-1){var $=n.getElementsByTagName("trk");for(t=0;t<$.length;t++){var Z=$[t],F=this._extract_styling(Z),z=this._get_polyline_options(e.polyline_options,t);if(e.gpx_options.joinTrackSegments)a=a.concat(this._parse_segment(Z,e,F,z,"trkpt"));else{var te=Z.getElementsByTagName("trkseg");for(Qe=0;Qe<te.length;Qe++)a=a.concat(this._parse_segment(te[Qe],e,F,z,"trkpt"))}}}if(this._info.hr.avg=Math.round(this._info.hr._total/this._info.hr._points.length),this._info.cad.avg=Math.round(this._info.cad._total/this._info.cad._points.length),this._info.atemp.avg=Math.round(this._info.atemp._total/this._info.atemp._points.length),y.indexOf("waypoint")>-1)for(o=n.getElementsByTagName("wpt"),t=0;t<o.length;t++){var oe=new L.LatLng(o[t].getAttribute("lat"),o[t].getAttribute("lon")),ce=o[t].getElementsByTagName("name"),c=ce.length>0?ce[0].textContent:"",ot=o[t].getElementsByTagName("desc"),d=ot.length>0?ot[0].textContent:"",he=o[t].getElementsByTagName("sym"),M=he.length>0?he[0].textContent:null,T=o[t].getElementsByTagName("type"),D=T.length>0?T[0].textContent:null,x=e.markers.wptIcons,R=e.markers.wptTypeIcons,N=e.markers.pointMatchers||[],A;if(x&&M&&x[M])A=x[M];else if(R&&D&&R[D])A=R[D];else if(N.length>0){for(var Qe=0;Qe<N.length;Qe++)if(N[Qe].regex.test(c)){A=N[Qe].icon;break}}else x&&x[""]&&(A=x[""]);if(!A){console.log("No waypoint icon could be matched for symKey=%s,typeKey=%s,name=%s on waypoint %o",M,D,c,o[t]);continue}var In=new L.Marker(oe,{clickable:e.marker_options.clickable,title:c,icon:A,type:"waypoint"});In.bindPopup("<b>"+c+"</b>"+(d.length>0?"<br>"+d:"")).openPopup(),this.fire("addpoint",{point:In,point_type:"waypoint",element:o[t]}),a.push(In)}if(a.length>1)return new L.FeatureGroup(a);if(a.length==1)return a[0]},_parse_segment:function(n,e,t,r,i){var o=n.getElementsByTagName(i);if(!o.length)return[];for(var a=[],c=[],d=[],f=null,g=0;g<o.length;g++){var y,E=new L.LatLng(o[g].getAttribute("lat"),o[g].getAttribute("lon"));E.meta={time:null,ele:null,hr:null,cad:null,atemp:null,speed:null},y=o[g].getElementsByTagName("time"),y.length>0?E.meta.time=new Date(Date.parse(y[0].textContent)):E.meta.time=new Date("1970-01-01T00:00:00");var C=f!=null?Math.abs(E.meta.time-f.meta.time):0;y=o[g].getElementsByTagName("ele"),y.length>0?E.meta.ele=parseFloat(y[0].textContent):E.meta.ele=f!=null?f.meta.ele:null;var F=f!=null?E.meta.ele-f.meta.ele:0,z=f!=null?this._dist3d(f,E):0;if(y=o[g].getElementsByTagName("speed"),y.length>0?E.meta.speed=parseFloat(y[0].textContent):E.meta.speed=C>0?1e3*z/C:0,y=o[g].getElementsByTagName("name"),y.length>0){for(var $=y[0].textContent,Z=e.markers.pointMatchers||[],te=0;te<Z.length;te++)if(Z[te].regex.test($)){c.push({label:$,coords:E,icon:Z[te].icon,element:o[g]});break}}this._info.length+=z,y=o[g].getElementsByTagNameNS("*","hr"),y.length>0&&(E.meta.hr=parseInt(y[0].textContent),this._info.hr._points.push([this._info.length,E.meta.hr]),this._info.hr._total+=E.meta.hr),y=o[g].getElementsByTagNameNS("*","cad"),y.length>0&&(E.meta.cad=parseInt(y[0].textContent),this._info.cad._points.push([this._info.length,E.meta.cad]),this._info.cad._total+=E.meta.cad),y=o[g].getElementsByTagNameNS("*","atemp"),y.length>0&&(E.meta.atemp=parseInt(y[0].textContent),this._info.atemp._points.push([this._info.length,E.meta.atemp]),this._info.atemp._total+=E.meta.atemp),E.meta.ele>this._info.elevation.max&&(this._info.elevation.max=E.meta.ele),E.meta.ele<this._info.elevation.min&&(this._info.elevation.min=E.meta.ele),this._info.elevation._points.push([this._info.length,E.meta.ele]),E.meta.speed>this._info.speed.max&&(this._info.speed.max=E.meta.speed),this._info.speed._points.push([this._info.length,E.meta.speed]),f==null&&this._info.duration.start==null&&(this._info.duration.start=E.meta.time),this._info.duration.end=E.meta.time,this._info.duration.total+=C,C<e.max_point_interval&&(this._info.duration.moving+=C),F>0?this._info.elevation.gain+=F:this._info.elevation.loss+=Math.abs(F),f=E,a.push(E)}var oe=new L.Polyline(a,this._extract_styling(n,t,r));if(this.fire("addline",{line:oe,element:n}),d.push(oe),e.markers.startIcon){var ce=new L.Marker(a[0],{clickable:e.marker_options.clickable,icon:e.markers.startIcon});this.fire("addpoint",{point:ce,point_type:"start",element:o[0]}),d.push(ce)}if(e.markers.endIcon){var ce=new L.Marker(a[a.length-1],{clickable:e.marker_options.clickable,icon:e.markers.endIcon});this.fire("addpoint",{point:ce,point_type:"end",element:o[o.length-1]}),d.push(ce)}for(var g=0;g<c.length;g++){var ce=new L.Marker(c[g].coords,{clickable:e.marker_options.clickable,title:c[g].label,icon:c[g].icon});this.fire("addpoint",{point:ce,point_type:"label",element:c[g].element}),d.push(ce)}return d},_get_polyline_options:function(n,e){return Array.isArray(n)?n[e]||{}:n},_extract_styling:function(n,e,t){var r=this._merge_objs(H3,e),i=n.getElementsByTagNameNS(j3,"line");if(i.length>0){var o=i[0].getElementsByTagName("color");o.length>0&&(r.color="#"+o[0].textContent);var o=i[0].getElementsByTagName("opacity");o.length>0&&(r.opacity=o[0].textContent);var o=i[0].getElementsByTagName("weight");o.length>0&&(r.weight=o[0].textContent);var o=i[0].getElementsByTagName("linecap");o.length>0&&(r.lineCap=o[0].textContent);var o=i[0].getElementsByTagName("linejoin");o.length>0&&(r.lineJoin=o[0].textContent);var o=i[0].getElementsByTagName("dasharray");o.length>0&&(r.dashArray=o[0].textContent);var o=i[0].getElementsByTagName("dashoffset");o.length>0&&(r.dashOffset=o[0].textContent)}return this._merge_objs(r,t)},_dist2d:function(n,e){var t=6371e3,r=this._deg2rad(e.lat-n.lat),i=this._deg2rad(e.lng-n.lng),o=Math.sin(r/2)*Math.sin(r/2)+Math.cos(this._deg2rad(n.lat))*Math.cos(this._deg2rad(e.lat))*Math.sin(i/2)*Math.sin(i/2),a=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),c=t*a;return c},_dist3d:function(n,e){var t=this._dist2d(n,e),r=Math.abs(e.meta.ele-n.meta.ele);return Math.sqrt(Math.pow(t,2)+Math.pow(r,2))},_deg2rad:function(n){return n*Math.PI/180}});var TR=(()=>{class n{constructor(){}ngOnInit(){return b(this,null,function*(){})}ngAfterViewInit(){this.initializeMap(),this.loadGpxContent(this.gpxContent)}initializeMap(){this.map=Ic.map("map",{center:[39.8282,-98.5795],zoom:3}),Ic.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,minZoom:3,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(this.map)}loadGpxContent(t){let r=new Ic.GPX(t,{async:!0,marker_options:void 0}).on("loaded",i=>{this.map.fitBounds(i.target.getBounds())}).addTo(this.map)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ht({type:n,selectors:[["app-map"]],inputs:{gpxContent:"gpxContent"},standalone:!0,features:[ft],decls:1,vars:0,consts:[["id","map"]],template:function(r,i){r&1&&Pt(0,"div",0)},styles:["#map[_ngcontent-%COMP%]{height:600px;width:800px}"]})}}return n})();var G3=(n,e)=>({"bg-gray-400 cursor-not-allowed":n,"bg-blue-600 hover:bg-blue-700":e});function W3(n,e){if(n&1){let t=mt();V(0,"button",6),$e("click",function(){be(t);let i=Le(2);return Ce(i.applyForTour())}),j(1," Apply for the Tour "),P()}if(n&2){let t=Le(2);ue("disabled",t.hasApplied)("ngClass",jD(2,G3,t.hasApplied,!t.hasApplied))}}function Z3(n,e){if(n&1&&(V(0,"div")(1,"h2",3),j(2),P(),V(3,"p")(4,"strong"),j(5,"Date:"),P(),j(6),P(),V(7,"p")(8,"strong"),j(9,"Description:"),P(),j(10),P(),V(11,"p")(12,"strong"),j(13,"Difficulty:"),P(),j(14),P(),V(15,"p")(16,"strong"),j(17,"Participants:"),P(),j(18),P(),Ae(19,W3,2,5,"button",4),Pt(20,"app-map",5),P()),n&2){let t=Le();G(2),ut(t.tour.name),G(4),mn(" ",t.tour.date,""),G(4),mn(" ",t.tour.description,""),G(4),mn(" ",t.tour.difficulty,""),G(4),mn(" ",t.tour.participants,""),G(),ue("ngIf",t.isHiker),G(),ue("gpxContent",t.tour.gpxContent)}}var DR=(()=>{class n{constructor(t,r,i,o){this.route=t,this.tourService=r,this.authService=i,this.router=o,this.isHiker=!1,this.hasApplied=!1}ngOnInit(){return b(this,null,function*(){let t=this.route.snapshot.paramMap.get("id");t?yield this.loadTour(t):this.router.navigate(["/"]),this.authService.user$.subscribe(r=>b(this,null,function*(){let i=r?.uid;i&&(this.userId=i,this.hasApplied=yield this.checkIfUserHasApplied(this.tour.id,this.userId))})),this.authService.userType$.subscribe(r=>{r==="hiker"&&(this.isHiker=!0)})})}loadTour(t){return b(this,null,function*(){let r=(yield this.tourService.loadTour(t))??null;r?this.tour=r:this.router.navigate(["/"])})}applyForTour(){return b(this,null,function*(){let t=this.authService.currentUser;t?(yield this.tourService.applyForTour(this.tour.id,this.tour.createdBy,t.uid),this.hasApplied=!0):this.router.navigate(["/"])})}checkIfUserHasApplied(t,r){return b(this,null,function*(){return this.tourService.hasUserApplied(t,r)})}static{this.\u0275fac=function(r){return new(r||n)(J(lr),J(mi),J(xt),J(ct))}}static{this.\u0275cmp=ht({type:n,selectors:[["app-tour-details"]],standalone:!0,features:[ft],decls:4,vars:1,consts:[[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],[4,"ngIf"],[1,"text-xl","font-semibold"],["class","mt-2 mb-2 py-2 px-4 text-white rounded focus:outline-none focus:ring-2 focus:ring-blue-500",3,"disabled","ngClass","click",4,"ngIf"],[3,"gpxContent"],[1,"mt-2","mb-2","py-2","px-4","text-white","rounded","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"click","disabled","ngClass"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"h1",1),j(2,"Tour Details"),P(),Ae(3,Z3,21,7,"div",2),P()),r&2&&(G(3),ue("ngIf",i.tour))},dependencies:[gn,_p,TR]})}}return n})();var SR=(()=>{class n{constructor(){this.firestore=W(Mn)}loadUserData(t){let r=Ot(this.firestore,`users/${t}`);return Pn(r).then(i=>{if(i.exists())return i.data();throw new Error("User not found")})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Q3(n,e){if(n&1){let t=mt();V(0,"td",8)(1,"button",10),$e("click",function(){be(t);let i=Le().$implicit,o=Le();return Ce(o.acceptApplication(i))}),j(2,"Accept"),P(),V(3,"button",11),$e("click",function(){be(t);let i=Le().$implicit,o=Le();return Ce(o.rejectApplication(i))}),j(4,"Reject"),P()()}}function Y3(n,e){if(n&1&&(V(0,"tr")(1,"td",8),j(2),P(),V(3,"td",8),j(4),P(),V(5,"td",8),j(6),P(),V(7,"td",8),j(8),P(),Ae(9,Q3,5,0,"td",9),P()),n&2){let t=e.$implicit;G(2),ut(t.userData.firstName),G(2),ut(t.userData.lastName),G(2),ut(t.userData.email),G(2),ut(t.status),G(),ue("ngIf",t.status!="canceled")}}var AR=(()=>{class n{constructor(t,r,i,o,a){this.route=t,this.tourService=r,this.userService=i,this.notificationService=o,this.router=a}ngOnInit(){return b(this,null,function*(){let t=this.route.snapshot.paramMap.get("id");t?(this.tourId=t,yield this.loadTour(t),this.applications=yield this.loadApplications()):this.router.navigate(["/"])})}loadTour(t){return b(this,null,function*(){let r=(yield this.tourService.loadTour(t))??null;r?this.tour=r:this.router.navigate(["/"])})}loadApplications(){return b(this,null,function*(){if(this.tour.id){let t=yield this.tourService.loadAllApplications(this.tour.id);return t=yield this.processApplication(t),t}else throw new Error("Tour ID is missing")})}processApplication(t){return b(this,null,function*(){for(let r of t){let i=yield this.userService.loadUserData(r.id);r.userData=i}return t})}rejectApplication(t){return b(this,null,function*(){yield this.tourService.rejectApplication(this.tourId,t.id),this.notificationService.sendNotification(t.id,"statusUpdate",`Your application for ${this.tour.name} has been rejected`),this.applications=yield this.loadApplications()})}acceptApplication(t){return b(this,null,function*(){yield this.tourService.acceptApplication(this.tourId,t.id),this.notificationService.sendNotification(t.id,"statusUpdate",`Your application for ${this.tour.name} has been accepted`),this.applications=yield this.loadApplications()})}static{this.\u0275fac=function(r){return new(r||n)(J(lr),J(mi),J(SR),J(fc),J(ct))}}static{this.\u0275cmp=ht({type:n,selectors:[["app-tour-participants"]],standalone:!0,features:[ft],decls:36,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-6","mb-6","m-6"],[1,"text-3xl","font-bold","mb-4"],[1,"text-xl","font-semibold","mb-1"],[1,"text-gray-700"],[1,"text-2xl","font-bold","mb-4"],[1,"min-w-full","bg-white"],[1,"py-2","px-4","border-b","border-gray-200","text-left"],[4,"ngFor","ngForOf"],[1,"py-2","px-4","border-b","border-gray-200"],["class","py-2 px-4 border-b border-gray-200",4,"ngIf"],[1,"bg-green-500","text-white","px-4","py-2","rounded","mr-2",3,"click"],[1,"bg-red-500","text-white","px-4","py-2","rounded",3,"click"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"h2",1),j(2),P(),V(3,"div")(4,"h3",2),j(5,"Description"),P(),V(6,"p",3),j(7),P()(),V(8,"div")(9,"h3",2),j(10,"Difficulty"),P(),V(11,"p",3),j(12),P()(),V(13,"div")(14,"h3",2),j(15,"Date"),P(),V(16,"p",3),j(17),P()()(),V(18,"div",0)(19,"h3",4),j(20,"Application Status"),P(),V(21,"table",5)(22,"thead")(23,"tr")(24,"th",6),j(25,"First Name"),P(),V(26,"th",6),j(27,"Last Name"),P(),V(28,"th",6),j(29,"E-mail"),P(),V(30,"th",6),j(31,"Status"),P(),V(32,"th",6),j(33,"Actions"),P()()(),V(34,"tbody"),Ae(35,Y3,10,5,"tr",7),P()()()),r&2&&(G(2),ut(i.tour.name),G(5),ut(i.tour.description),G(5),ut(i.tour.difficulty),G(5),ut(i.tour.date),G(18),ue("ngForOf",i.applications))},dependencies:[ti,gn]})}}return n})();function J3(n,e){if(n&1){let t=mt();V(0,"button",12),$e("click",function(){be(t);let i=Le().$implicit,o=Le();return Ce(o.cancelApplication(i.id))}),j(1," Cancel "),P()}}function X3(n,e){if(n&1&&(V(0,"tr")(1,"td",10),j(2),P(),V(3,"td",10),j(4),P(),V(5,"td",10),j(6),P(),V(7,"td",10),Ae(8,J3,2,0,"button",11),P()()),n&2){let t=e.$implicit;G(2),ut(t.name),G(2),ut(t.date),G(2),ut(t.application.status),G(2),ue("ngIf",t.application.status==="accepted")}}var xR=(()=>{class n{constructor(t,r){this.tourService=t,this.authService=r,this.tours=[]}ngOnInit(){return b(this,null,function*(){this.authService.user$.subscribe(t=>b(this,null,function*(){t&&this.loadToursUserAppliedFor()}))})}cancelApplication(t){this.tourService.cancelApplication(t,this.authService.currentUser?.uid),this.loadToursUserAppliedFor()}loadToursUserAppliedFor(){return b(this,null,function*(){this.authService.currentUser&&(this.tours=yield this.tourService.getToursUserAppliedFor(this.authService.currentUser.uid))})}static{this.\u0275fac=function(r){return new(r||n)(J(mi),J(xt))}}static{this.\u0275cmp=ht({type:n,selectors:[["app-my-tours"]],standalone:!0,features:[ft],decls:18,vars:1,consts:[[1,"p-4"],[1,"bg-white","shadow","overflow-hidden","sm:rounded-lg"],[1,"px-4","py-5","sm:px-6"],[1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"border-t","border-gray-200"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],[1,"px-6","py-4","whitespace-nowrap"],["class","mt-2 py-2 px-4 bg-red-600 text-white rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",3,"click",4,"ngIf"],[1,"mt-2","py-2","px-4","bg-red-600","text-white","rounded","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500",3,"click"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),j(4,"My Tours"),P()(),V(5,"div",4)(6,"table",5)(7,"thead",6)(8,"tr")(9,"th",7),j(10,"Tour Name"),P(),V(11,"th",7),j(12,"Date"),P(),V(13,"th",7),j(14,"Status"),P(),Pt(15,"th",7),P()(),V(16,"tbody",8),Ae(17,X3,9,4,"tr",9),P()()()()()),r&2&&(G(17),ue("ngForOf",i.tours))},dependencies:[ti,gn]})}}return n})();var MR=(n,e)=>{let t=W(xt),r=W(ct);return t.userType$.pipe(Xt(1),me(i=>i==="hiker"?!0:(r.navigate(["/"]),!1)))};var PR=[{path:"",component:ZP},{path:"login",component:vR},{path:"register",component:yR},{path:"profile-club",component:wR,canActivate:[ME]},{path:"profile-hiker",component:IR,canActivate:[ME]},{path:"create-hiking-tour",component:ER,canActivate:[PE]},{path:"tour-details/:id",component:DR},{path:"tour-participants/:id",component:AR,canActivate:[PE]},{path:"my-tours",component:xR,canActivate:[MR]}];var RR={apiKey:"AIzaSyCu5CPQCRQ7_qsOst9yUHo9_VXxDZ7RQv0",authDomain:"master-b6858.firebaseapp.com",projectId:"master-b6858",storageBucket:"master-b6858.firebasestorage.app",messagingSenderId:"21300314672",appId:"1:21300314672:web:8cd1730aa552dff5f3e3f5"};var NR={providers:[UA(()=>Hp(RR)),Lx(()=>Vx()),$P(()=>qP()),ZD({eventCoalescing:!0}),aA(PR)]};var eq=n=>({"font-bold":n});function tq(n,e){n&1&&(V(0,"li")(1,"a",15),j(2,"Create Hiking Tour"),P()())}function nq(n,e){if(n&1&&(Il(0),Ae(1,tq,3,0,"li",6),El()),n&2){let t=e.ngIf;G(),ue("ngIf",t==="hikingClub")}}function rq(n,e){n&1&&(V(0,"li")(1,"a",16),j(2,"My Tours"),P()())}function iq(n,e){if(n&1&&(Il(0),Ae(1,rq,3,0,"li",6),El()),n&2){let t=e.ngIf;G(),ue("ngIf",t==="hiker")}}function oq(n,e){n&1&&Pt(0,"span",17)}function sq(n,e){if(n&1){let t=mt();V(0,"li",20)(1,"p",21),$e("click",function(){let i=be(t).$implicit,o=Le(3);return Ce(o.markAsRead(i))}),j(2),P()()}if(n&2){let t=e.$implicit;G(),ue("ngClass",vu(2,eq,!t.read)),G(),ut(t.message)}}function aq(n,e){if(n&1&&(V(0,"div",18)(1,"ul"),Ae(2,sq,3,4,"li",19),P()()),n&2){let t=Le(2);G(2),ue("ngForOf",t.notifications)}}function uq(n,e){if(n&1){let t=mt();Il(0),Ae(1,nq,2,1,"ng-container",6),yu(2,"async"),Ae(3,iq,2,1,"ng-container",6),yu(4,"async"),V(5,"li")(6,"a",7),$e("click",function(){be(t);let i=Le();return Ce(i.goToProfile())}),j(7,"Profile"),P()(),V(8,"li",8)(9,"button",7),$e("click",function(){be(t);let i=Le();return Ce(i.toggleNotifications())}),AT(),V(10,"svg",9),Pt(11,"path",10),P(),Ae(12,oq,1,0,"span",11),P(),xT(),Pt(13,"i",12),Ae(14,aq,3,1,"div",13),P(),V(15,"li")(16,"a",14),$e("click",function(){be(t);let i=Le();return Ce(i.logout())}),j(17,"Logout"),P()(),El()}if(n&2){let t=Le();G(),ue("ngIf",wu(2,4,t.userType$)),G(2),ue("ngIf",wu(4,6,t.userType$)),G(9),ue("ngIf",t.unreadNotficationsMarker),G(2),ue("ngIf",t.showNotifications)}}function cq(n,e){n&1&&(V(0,"li")(1,"a",22),j(2,"Login"),P()(),V(3,"li")(4,"a",23),j(5,"Register"),P()())}var kR=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.notificationService=i,this.user=null,this.notifications=[],this.showNotifications=!1,this.unreadNotficationsMarker=!1,this.user$=this.authService.user$,this.user$.subscribe(o=>{o&&(this.user=o)}),this.userType$=this.authService.userType$,this.userData$=this.authService.userData$,this.userData$.subscribe(o=>{o&&o.notifications&&(this.notifications=o.notifications,this.unreadNotficationsMarker=this.notifications.some(a=>!a.read))})}ngOnInit(){}logout(){return b(this,null,function*(){yield this.authService.logout(),this.router.navigate(["/"])})}goToProfile(){this.userType$.pipe(Xt(1)).subscribe(t=>{t==="hiker"?this.router.navigate(["/profile-hiker"]):t==="hikingClub"&&this.router.navigate(["/profile-club"])})}toggleNotifications(){this.showNotifications=!this.showNotifications}markAsRead(t){return b(this,null,function*(){let r=this.notifications.findIndex(i=>i.createdAt===t.createdAt);yield this.notificationService.markAsRead(this.user.uid,r),t.read=!0,this.unreadNotficationsMarker=this.notifications.some(i=>!i.read)})}static{this.\u0275fac=function(r){return new(r||n)(J(xt),J(ct),J(fc))}}static{this.\u0275cmp=ht({type:n,selectors:[["app-navbar"]],standalone:!0,features:[ft],decls:10,vars:4,consts:[["loggedOut",""],[1,"bg-gray-800","p-4"],[1,"flex","items-center","space-x-4","w-full"],["routerLink","/",1,"text-white","text-lg","hover:text-gray-400"],[1,"flex-grow"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"text-white","hover:text-gray-400",3,"click"],[1,"relative"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],["class","animate-ping absolute top-1 right-0.5 block h-1 w-1 rounded-full ring-2 ring-green-400 bg-green-600",4,"ngIf"],[1,"fa-solid","fa-bell"],["class","absolute right-0 mt-2 w-64 bg-white shadow-lg rounded-lg",4,"ngIf"],[1,"text-white","hover:text-gray-400","cursor-pointer",3,"click"],["routerLink","/create-hiking-tour",1,"text-white","hover:text-gray-400"],["routerLink","/my-tours",1,"text-white","hover:text-gray-400"],[1,"animate-ping","absolute","top-1","right-0.5","block","h-1","w-1","rounded-full","ring-2","ring-green-400","bg-green-600"],[1,"absolute","right-0","mt-2","w-64","bg-white","shadow-lg","rounded-lg"],["class","p-4 border-b",4,"ngFor","ngForOf"],[1,"p-4","border-b"],[3,"click","ngClass"],["routerLink","/login",1,"text-white","hover:text-gray-400"],["routerLink","/register",1,"text-white","hover:text-gray-400"]],template:function(r,i){if(r&1&&(V(0,"nav",1)(1,"ul",2)(2,"li")(3,"a",3),j(4,"Hiking Platform"),P()(),Pt(5,"li",4),Ae(6,uq,18,8,"ng-container",5),yu(7,"async"),Ae(8,cq,6,0,"ng-template",null,0,Ls),P()()),r&2){let o=Rt(9);G(6),ue("ngIf",wu(7,2,i.user$))("ngIfElse",o)}},dependencies:[Nu,ii,Dr,_p,ti,gn,vp]})}}return n})();var OR=(()=>{class n{constructor(){this.title="master"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ht({type:n,selectors:[["app-root"]],standalone:!0,features:[ft],decls:2,vars:0,template:function(r,i){r&1&&Pt(0,"app-navbar")(1,"router-outlet")},dependencies:[Wy,kR]})}}return n})();_S(OR,NR).catch(n=>console.error(n));
