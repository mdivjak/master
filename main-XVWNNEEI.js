var oM=Object.defineProperty,sM=Object.defineProperties;var aM=Object.getOwnPropertyDescriptors;var ZI=Object.getOwnPropertySymbols,cM=Object.getPrototypeOf,uM=Object.prototype.hasOwnProperty,lM=Object.prototype.propertyIsEnumerable,dM=Reflect.get;var JI=(n,e,t)=>e in n?oM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,j=(n,e)=>{for(var t in e||={})uM.call(e,t)&&JI(n,t,e[t]);if(ZI)for(var t of ZI(e))lM.call(e,t)&&JI(n,t,e[t]);return n},ue=(n,e)=>sM(n,aM(e));var kr=(n,e,t)=>dM(cM(n),t,e);var y=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});function XI(n,e){return Object.is(n,e)}var ot=null,Pu=!1,Ou=1,sr=Symbol("SIGNAL");function Ee(n){let e=ot;return ot=n,e}function eE(){return ot}var xa={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function op(n){if(Pu)throw new Error("");if(ot===null)return;ot.consumerOnSignalRead(n);let e=ot.nextProducerIndex++;if(Lu(ot),e<ot.producerNode.length&&ot.producerNode[e]!==n&&Aa(ot)){let t=ot.producerNode[e];Vu(t,ot.producerIndexOfThis[e])}ot.producerNode[e]!==n&&(ot.producerNode[e]=n,ot.producerIndexOfThis[e]=Aa(ot)?iE(n,ot,e):0),ot.producerLastReadVersion[e]=n.version}function hM(){Ou++}function tE(n){if(!(Aa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ou)){if(!n.producerMustRecompute(n)&&!ap(n)){n.dirty=!1,n.lastCleanEpoch=Ou;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Ou}}function nE(n){if(n.liveConsumerNode===void 0)return;let e=Pu;Pu=!0;try{for(let t of n.liveConsumerNode)t.dirty||fM(t)}finally{Pu=e}}function rE(){return ot?.consumerAllowSignalWrites!==!1}function fM(n){n.dirty=!0,nE(n),n.consumerMarkedDirty?.(n)}function Fu(n){return n&&(n.nextProducerIndex=0),Ee(n)}function sp(n,e){if(Ee(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Aa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Vu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function ap(n){Lu(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(tE(t),r!==t.version))return!0}return!1}function cp(n){if(Lu(n),Aa(n))for(let e=0;e<n.producerNode.length;e++)Vu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function iE(n,e,t){if(oE(n),n.liveConsumerNode.length===0&&sE(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=iE(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Vu(n,e){if(oE(n),n.liveConsumerNode.length===1&&sE(n))for(let r=0;r<n.producerNode.length;r++)Vu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Lu(i),i.producerIndexOfThis[r]=e}}function Aa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Lu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function oE(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function sE(n){return n.producerNode!==void 0}function aE(n){let e=Object.create(pM);e.computation=n;let t=()=>{if(tE(e),op(e),e.value===ku)throw e.error;return e.value};return t[sr]=e,t}var rp=Symbol("UNSET"),ip=Symbol("COMPUTING"),ku=Symbol("ERRORED"),pM=ue(j({},xa),{value:rp,dirty:!0,error:null,equal:XI,producerMustRecompute(n){return n.value===rp||n.value===ip},producerRecomputeValue(n){if(n.value===ip)throw new Error("Detected cycle in computations.");let e=n.value;n.value=ip;let t=Fu(n),r;try{r=n.computation()}catch(i){r=ku,n.error=i}finally{sp(n,t)}if(e!==rp&&e!==ku&&r!==ku&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function gM(){throw new Error}var cE=gM;function uE(){cE()}function lE(n){cE=n}var mM=null;function dE(n){let e=Object.create(fE);e.value=n;let t=()=>(op(e),e.value);return t[sr]=e,t}function up(n,e){rE()||uE(),n.equal(n.value,e)||(n.value=e,yM(n))}function hE(n,e){rE()||uE(),up(n,e(n.value))}var fE=ue(j({},xa),{equal:XI,value:void 0});function yM(n){n.version++,hM(),nE(n),mM?.()}function oe(n){return typeof n=="function"}function Eo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ju=Eo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ti(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var He=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(oe(r))try{r()}catch(o){e=o instanceof ju?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{pE(o)}catch(s){e=e??[],s instanceof ju?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ju(e)}}add(e){var t;if(e&&e!==this)if(this.closed)pE(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ti(t,e)}remove(e){let{_finalizers:t}=this;t&&Ti(t,e),e instanceof n&&e._removeParent(this)}};He.EMPTY=(()=>{let n=new He;return n.closed=!0,n})();var lp=He.EMPTY;function Uu(n){return n instanceof He||n&&"closed"in n&&oe(n.remove)&&oe(n.add)&&oe(n.unsubscribe)}function pE(n){oe(n)?n():n.unsubscribe()}var mn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Do={setTimeout(n,e,...t){let{delegate:r}=Do;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Do;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Bu(n){Do.setTimeout(()=>{let{onUnhandledError:e}=mn;if(e)e(n);else throw n})}function Ra(){}var gE=dp("C",void 0,void 0);function mE(n){return dp("E",void 0,n)}function yE(n){return dp("N",n,void 0)}function dp(n,e,t){return{kind:n,value:e,error:t}}var Si=null;function Co(n){if(mn.useDeprecatedSynchronousErrorHandling){let e=!Si;if(e&&(Si={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Si;if(Si=null,t)throw r}}else n()}function vE(n){mn.useDeprecatedSynchronousErrorHandling&&Si&&(Si.errorThrown=!0,Si.error=n)}var Ai=class extends He{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Uu(e)&&e.add(this)):this.destination=wM}static create(e,t,r){return new bo(e,t,r)}next(e){this.isStopped?fp(yE(e),this):this._next(e)}error(e){this.isStopped?fp(mE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?fp(gE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},vM=Function.prototype.bind;function hp(n,e){return vM.call(n,e)}var pp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){$u(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){$u(r)}else $u(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){$u(t)}}},bo=class extends Ai{constructor(e,t,r){super();let i;if(oe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&mn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&hp(e.next,o),error:e.error&&hp(e.error,o),complete:e.complete&&hp(e.complete,o)}):i=e}this.destination=new pp(i)}};function $u(n){mn.useDeprecatedSynchronousErrorHandling?vE(n):Bu(n)}function _M(n){throw n}function fp(n,e){let{onStoppedNotification:t}=mn;t&&Do.setTimeout(()=>t(n,e))}var wM={closed:!0,next:Ra,error:_M,complete:Ra};var To=typeof Symbol=="function"&&Symbol.observable||"@@observable";function qt(n){return n}function Hu(...n){return gp(n)}function gp(n){return n.length===0?qt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ge=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=EM(t)?t:new bo(t,r,i);return Co(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=_E(r),new r((i,o)=>{let s=new bo({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[To](){return this}pipe(...t){return gp(t)(this)}toPromise(t){return t=_E(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function _E(n){var e;return(e=n??mn.Promise)!==null&&e!==void 0?e:Promise}function IM(n){return n&&oe(n.next)&&oe(n.error)&&oe(n.complete)}function EM(n){return n&&n instanceof Ai||IM(n)&&Uu(n)}function mp(n){return oe(n?.lift)}function we(n){return e=>{if(mp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function me(n,e,t,r,i){return new yp(n,e,t,r,i)}var yp=class extends Ai{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function So(){return we((n,e)=>{let t=null;n._refCount++;let r=me(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ao=class extends ge{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,mp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new He;let t=this.getSubject();e.add(this.source.subscribe(me(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=He.EMPTY)}return e}refCount(){return So()(this)}};var wE=Eo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ut=(()=>{class n extends ge{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new qu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new wE}next(t){Co(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Co(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Co(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?lp:(this.currentObservers=null,o.push(t),new He(()=>{this.currentObservers=null,Ti(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ge;return t.source=this,t}}return n.create=(e,t)=>new qu(e,t),n})(),qu=class extends ut{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:lp}};var Ke=class extends ut{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var vp={now(){return(vp.delegate||Date).now()},delegate:void 0};var zu=class extends He{constructor(e,t){super()}schedule(e,t=0){return this}};var Ma={setInterval(n,e,...t){let{delegate:r}=Ma;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ma;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var xo=class extends zu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ma.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ma.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ti(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ro=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ro.now=vp.now;var Mo=class extends Ro{constructor(e,t=Ro.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var _p=new Mo(xo);var Gu=class extends xo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Wu=class extends Mo{};var wp=new Wu(Gu);var zt=new ge(n=>n.complete());function IE(n){return n&&oe(n.schedule)}function EE(n){return n[n.length-1]}function Ku(n){return oe(EE(n))?n.pop():void 0}function Fr(n){return IE(EE(n))?n.pop():void 0}function Ip(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function CE(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function DE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xi(n){return this instanceof xi?(this.v=n,this):new xi(n)}function bE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(_){return function(A){return Promise.resolve(A).then(_,p)}}function a(_,A){r[_]&&(i[_]=function(O){return new Promise(function(N,B){o.push([_,O,N,B])>1||u(_,O)})},A&&(i[_]=A(i[_])))}function u(_,A){try{l(r[_](A))}catch(O){m(o[0][3],O)}}function l(_){_.value instanceof xi?Promise.resolve(_.value.v).then(h,p):m(o[0][2],_)}function h(_){u("next",_)}function p(_){u("throw",_)}function m(_,A){_(A),o.shift(),o.length&&u(o[0][0],o[0][1])}}function TE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof DE=="function"?DE(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Qu=n=>n&&typeof n.length=="number"&&typeof n!="function";function Yu(n){return oe(n?.then)}function Zu(n){return oe(n[To])}function Ju(n){return Symbol.asyncIterator&&oe(n?.[Symbol.asyncIterator])}function Xu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function DM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var el=DM();function tl(n){return oe(n?.[el])}function nl(n){return bE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield xi(t.read());if(i)return yield xi(void 0);yield yield xi(r)}}finally{t.releaseLock()}})}function rl(n){return oe(n?.getReader)}function Je(n){if(n instanceof ge)return n;if(n!=null){if(Zu(n))return CM(n);if(Qu(n))return bM(n);if(Yu(n))return TM(n);if(Ju(n))return SE(n);if(tl(n))return SM(n);if(rl(n))return AM(n)}throw Xu(n)}function CM(n){return new ge(e=>{let t=n[To]();if(oe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function bM(n){return new ge(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function TM(n){return new ge(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Bu)})}function SM(n){return new ge(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function SE(n){return new ge(e=>{xM(n,e).catch(t=>e.error(t))})}function AM(n){return SE(nl(n))}function xM(n,e){var t,r,i,o;return CE(this,void 0,void 0,function*(){try{for(t=TE(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ut(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Vr(n,e=0){return we((t,r)=>{t.subscribe(me(r,i=>Ut(r,n,()=>r.next(i),e),()=>Ut(r,n,()=>r.complete(),e),i=>Ut(r,n,()=>r.error(i),e)))})}function Lr(n,e=0){return we((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function AE(n,e){return Je(n).pipe(Lr(e),Vr(e))}function xE(n,e){return Je(n).pipe(Lr(e),Vr(e))}function RE(n,e){return new ge(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function ME(n,e){return new ge(t=>{let r;return Ut(t,e,()=>{r=n[el](),Ut(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>oe(r?.return)&&r.return()})}function il(n,e){if(!n)throw new Error("Iterable cannot be null");return new ge(t=>{Ut(t,e,()=>{let r=n[Symbol.asyncIterator]();Ut(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function NE(n,e){return il(nl(n),e)}function PE(n,e){if(n!=null){if(Zu(n))return AE(n,e);if(Qu(n))return RE(n,e);if(Yu(n))return xE(n,e);if(Ju(n))return il(n,e);if(tl(n))return ME(n,e);if(rl(n))return NE(n,e)}throw Xu(n)}function ke(n,e){return e?PE(n,e):Je(n)}function Y(...n){let e=Fr(n);return ke(n,e)}function No(n,e){let t=oe(n)?n:()=>n,r=i=>i.error(t());return new ge(e?i=>e.schedule(r,0,i):r)}function Ep(n){return!!n&&(n instanceof ge||oe(n.lift)&&oe(n.subscribe))}var ar=Eo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Z(n,e){return we((t,r)=>{let i=0;t.subscribe(me(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:RM}=Array;function MM(n,e){return RM(e)?n(...e):n(e)}function ol(n){return Z(e=>MM(n,e))}var{isArray:NM}=Array,{getPrototypeOf:PM,prototype:OM,keys:kM}=Object;function sl(n){if(n.length===1){let e=n[0];if(NM(e))return{args:e,keys:null};if(FM(e)){let t=kM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function FM(n){return n&&typeof n=="object"&&PM(n)===OM}function al(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ri(...n){let e=Fr(n),t=Ku(n),{args:r,keys:i}=sl(n);if(r.length===0)return ke([],e);let o=new ge(VM(r,e,i?s=>al(i,s):qt));return t?o.pipe(ol(t)):o}function VM(n,e,t=qt){return r=>{OE(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)OE(e,()=>{let l=ke(n[u],e),h=!1;l.subscribe(me(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function OE(n,e,t){n?Ut(t,n,e):e()}function kE(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},_=O=>l<r?A(O):u.push(O),A=O=>{o&&e.next(O),l++;let N=!1;Je(t(O,h++)).subscribe(me(e,B=>{i?.(B),o?_(B):e.next(B)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let B=u.shift();s?Ut(e,s,()=>A(B)):A(B)}m()}catch(B){e.error(B)}}))};return n.subscribe(me(e,_,()=>{p=!0,m()})),()=>{a?.()}}function Xe(n,e,t=1/0){return oe(e)?Xe((r,i)=>Z((o,s)=>e(r,o,i,s))(Je(n(r,i))),t):(typeof e=="number"&&(t=e),we((r,i)=>kE(r,i,n,t)))}function Po(n=1/0){return Xe(qt,n)}function FE(){return Po(1)}function Oo(...n){return FE()(ke(n,Fr(n)))}function cl(n){return new ge(e=>{Je(n()).subscribe(e)})}function Dp(...n){let e=Ku(n),{args:t,keys:r}=sl(n),i=new ge(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Je(t[h]).subscribe(me(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?al(r,a):a),o.complete())}))}});return e?i.pipe(ol(e)):i}function Gt(n,e){return we((t,r)=>{let i=0;t.subscribe(me(r,o=>n.call(e,o,i++)&&r.next(o)))})}function jr(n){return we((e,t)=>{let r=null,i=!1,o;r=e.subscribe(me(t,void 0,void 0,s=>{o=Je(n(s,jr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function VE(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(me(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Mi(n,e){return oe(e)?Xe(n,e,1):Xe(n,1)}function Ur(n){return we((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Dt(n){return n<=0?()=>zt:we((e,t)=>{let r=0;e.subscribe(me(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Cp(n){return Z(()=>n)}function ul(n=LM){return we((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function LM(){return new ar}function Na(n){return we((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Rn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Gt((i,o)=>n(i,o,r)):qt,Dt(1),t?Ur(e):ul(()=>new ar))}function ko(n){return n<=0?()=>zt:we((e,t)=>{let r=[];e.subscribe(me(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function bp(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Gt((i,o)=>n(i,o,r)):qt,ko(1),t?Ur(e):ul(()=>new ar))}function ll(n,e){return we(VE(n,e,arguments.length>=2,!0))}function dl(...n){let e=Fr(n);return we((t,r)=>{(e?Oo(n,t,e):Oo(n,t)).subscribe(r)})}function Ot(n,e){return we((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(me(r,u=>{i?.unsubscribe();let l=0,h=o++;Je(n(u,h)).subscribe(i=me(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Tp(n){return we((e,t)=>{Je(n).subscribe(me(t,()=>t.complete(),Ra)),!t.closed&&e.subscribe(t)})}function st(n,e,t){let r=oe(n)||e||t?{next:n,error:e,complete:t}:n;return r?we((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(me(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):qt}var E0="https://g.co/ng/security#xss",z=class extends Error{constructor(e,t){super(Rg(e,t)),this.code=e}};function Rg(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ba(n){return{toString:n}.toString()}var hl="__parameters__";function jM(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function D0(n,e,t){return Ba(()=>{let r=jM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(hl)?u[hl]:Object.defineProperty(u,hl,{value:[]})[hl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Up=globalThis;function Ne(n){for(let e in n)if(n[e]===Ne)return e;throw Error("Could not find renamed property on target object.")}function UM(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ft(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Ft).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function LE(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var BM=Ne({__forward_ref__:Ne});function Vn(n){return n.__forward_ref__=Vn,n.toString=function(){return Ft(this())},n}function kt(n){return C0(n)?n():n}function C0(n){return typeof n=="function"&&n.hasOwnProperty(BM)&&n.__forward_ref__===Vn}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Yr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Wl(n){return jE(n,T0)||jE(n,S0)}function b0(n){return Wl(n)!==null}function jE(n,e){return n.hasOwnProperty(e)?n[e]:null}function $M(n){let e=n&&(n[T0]||n[S0]);return e||null}function UE(n){return n&&(n.hasOwnProperty(BE)||n.hasOwnProperty(HM))?n[BE]:null}var T0=Ne({\u0275prov:Ne}),BE=Ne({\u0275inj:Ne}),S0=Ne({ngInjectableDef:Ne}),HM=Ne({ngInjectorDef:Ne}),G=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function A0(n){return n&&!!n.\u0275providers}var qM=Ne({\u0275cmp:Ne}),zM=Ne({\u0275dir:Ne}),GM=Ne({\u0275pipe:Ne}),WM=Ne({\u0275mod:Ne}),El=Ne({\u0275fac:Ne}),Oa=Ne({__NG_ELEMENT_ID__:Ne}),$E=Ne({__NG_ENV_ID__:Ne});function $o(n){return typeof n=="string"?n:n==null?"":String(n)}function KM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():$o(n)}function QM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new z(-200,n)}function Mg(n,e){throw new z(-201,!1)}var le=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(le||{}),Bp;function x0(){return Bp}function Bt(n){let e=Bp;return Bp=n,e}function R0(n,e,t){let r=Wl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&le.Optional)return null;if(e!==void 0)return e;Mg(n,"Injector")}var YM={},ka=YM,$p="__NG_DI_FLAG__",Dl="ngTempTokenPath",ZM="ngTokenPath",JM=/\n/gm,XM="\u0275",HE="__source",Uo;function eN(){return Uo}function Br(n){let e=Uo;return Uo=n,e}function tN(n,e=le.Default){if(Uo===void 0)throw new z(-203,!1);return Uo===null?R0(n,void 0,e):Uo.get(n,e&le.Optional?null:void 0,e)}function J(n,e=le.Default){return(x0()||tN)(kt(n),e)}function k(n,e=le.Default){return J(n,Kl(e))}function Kl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Hp(n){let e=[];for(let t=0;t<n.length;t++){let r=kt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new z(900,!1);let i,o=le.Default;for(let s=0;s<r.length;s++){let a=r[s],u=nN(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(J(i,o))}else e.push(J(r))}return e}function M0(n,e){return n[$p]=e,n.prototype[$p]=e,n}function nN(n){return n[$p]}function rN(n,e,t,r){let i=n[Dl];throw e[HE]&&i.unshift(e[HE]),n.message=iN(`
`+n.message,i,t,r),n[ZM]=i,n[Dl]=null,n}function iN(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==XM?n.slice(2):n;let i=Ft(e);if(Array.isArray(e))i=e.map(Ft).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ft(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(JM,`
  `)}`}var Ct=M0(D0("Optional"),8);var Ng=M0(D0("SkipSelf"),4);function Pi(n,e){let t=n.hasOwnProperty(El);return t?n[El]:null}function Pg(n,e){n.forEach(t=>Array.isArray(t)?Pg(t,e):e(t))}function N0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Cl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function oN(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function sN(n,e,t){let r=$a(n,e);return r>=0?n[r|1]=t:(r=~r,oN(n,r,e,t)),r}function Sp(n,e){let t=$a(n,e);if(t>=0)return n[t|1]}function $a(n,e){return aN(n,e,1)}function aN(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ho={},tn=[],qo=new G(""),P0=new G("",-1),O0=new G(""),bl=class{get(e,t=ka){if(t===ka){let r=new Error(`NullInjectorError: No provider for ${Ft(e)}!`);throw r.name="NullInjectorError",r}return t}},k0=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(k0||{}),Pn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Pn||{}),qr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(qr||{});function cN(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function qp(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];uN(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function F0(n){return n===3||n===4||n===6}function uN(n){return n.charCodeAt(0)===64}function Fa(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?qE(n,t,i,null,e[++r]):qE(n,t,i,null,null))}}return n}function qE(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var V0="ng-template";function lN(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&cN(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Og(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Og(n){return n.type===4&&n.value!==V0}function dN(n,e,t){let r=n.type===4&&!t?V0:n.value;return e===r}function hN(n,e,t){let r=4,i=n.attrs,o=i!==null?gN(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!yn(r)&&!yn(u))return!1;if(s&&yn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!dN(n,u,t)||u===""&&e.length===1){if(yn(r))return!1;s=!0}}else if(r&8){if(i===null||!lN(n,i,u,t)){if(yn(r))return!1;s=!0}}else{let l=e[++a],h=fN(u,i,Og(n),t);if(h===-1){if(yn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(yn(r))return!1;s=!0}}}}return yn(r)||s}function yn(n){return(n&1)===0}function fN(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return mN(e,n)}function pN(n,e,t=!1){for(let r=0;r<e.length;r++)if(hN(n,e[r],t))return!0;return!1}function gN(n){for(let e=0;e<n.length;e++){let t=n[e];if(F0(t))return e}return n.length}function mN(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function zE(n,e){return n?":not("+e.trim()+")":e}function yN(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!yn(s)&&(e+=zE(o,i),i=""),r=s,o=o||!yn(r);t++}return i!==""&&(e+=zE(o,i)),e}function vN(n){return n.map(yN).join(",")}function _N(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!yn(i))break;i=o}r++}return{attrs:e,classes:t}}function qe(n){return Ba(()=>{let e=H0(n),t=ue(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===k0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Pn.Emulated,styles:n.styles||tn,_:null,schemas:n.schemas||null,tView:null,id:""});q0(t);let r=n.dependencies;return t.directiveDefs=WE(r,!1),t.pipeDefs=WE(r,!0),t.id=EN(t),t})}function wN(n){return zr(n)||j0(n)}function IN(n){return n!==null}function Zr(n){return Ba(()=>({type:n.type,bootstrap:n.bootstrap||tn,declarations:n.declarations||tn,imports:n.imports||tn,exports:n.exports||tn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function GE(n,e){if(n==null)return Ho;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=qr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==qr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Ve(n){return Ba(()=>{let e=H0(n);return q0(e),e})}function L0(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function zr(n){return n[qM]||null}function j0(n){return n[zM]||null}function U0(n){return n[GM]||null}function B0(n){let e=zr(n)||j0(n)||U0(n);return e!==null?e.standalone:!1}function $0(n,e){let t=n[WM]||null;if(!t&&e===!0)throw new Error(`Type ${Ft(n)} does not have '\u0275mod' property.`);return t}function H0(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ho,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||tn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:GE(n.inputs,e),outputs:GE(n.outputs),debugInfo:null}}function q0(n){n.features?.forEach(e=>e(n))}function WE(n,e){if(!n)return null;let t=e?U0:wN;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(IN)}function EN(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ln(n){return{\u0275providers:n}}function DN(...n){return{\u0275providers:z0(!0,n),\u0275fromNgModule:!0}}function z0(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Pg(e,s=>{let a=s;zp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&G0(i,o),t}function G0(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];kg(i,o=>{e(o,r)})}}function zp(n,e,t,r){if(n=kt(n),!n)return!1;let i=null,o=UE(n),s=!o&&zr(n);if(!o&&!s){let u=n.ngModule;if(o=UE(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)zp(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Pg(o.imports,h=>{zp(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&G0(l,e)}if(!a){let l=Pi(i)||(()=>new i);e({provide:i,useFactory:l,deps:tn},i),e({provide:O0,useValue:i,multi:!0},i),e({provide:qo,useValue:()=>J(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;kg(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function kg(n,e){for(let t of n)A0(t)&&(t=t.\u0275providers),Array.isArray(t)?kg(t,e):e(t)}var CN=Ne({provide:String,useValue:Ne});function W0(n){return n!==null&&typeof n=="object"&&CN in n}function bN(n){return!!(n&&n.useExisting)}function TN(n){return!!(n&&n.useFactory)}function zo(n){return typeof n=="function"}function SN(n){return!!n.useClass}var Ql=new G(""),yl={},AN={},Ap;function Fg(){return Ap===void 0&&(Ap=new bl),Ap}var Wt=class{},Va=class extends Wt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wp(e,s=>this.processProvider(s)),this.records.set(P0,Fo(void 0,this)),i.has("environment")&&this.records.set(Wt,Fo(void 0,this));let o=this.records.get(Ql);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(O0,tn,le.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ee(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ee(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Br(this),r=Bt(void 0),i;try{return e()}finally{Br(t),Bt(r)}}get(e,t=ka,r=le.Default){if(this.assertNotDestroyed(),e.hasOwnProperty($E))return e[$E](this);r=Kl(r);let i,o=Br(this),s=Bt(void 0);try{if(!(r&le.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=PN(e)&&Wl(e);l&&this.injectableDefInScope(l)?u=Fo(Gp(e),yl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&le.Self?Fg():this.parent;return t=r&le.Optional&&t===ka?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Dl]=a[Dl]||[]).unshift(Ft(e)),o)throw a;return rN(a,e,"R3InjectorError",this.source)}else throw a}finally{Bt(s),Br(o)}}resolveInjectorInitializers(){let e=Ee(null),t=Br(this),r=Bt(void 0),i;try{let o=this.get(qo,tn,le.Self);for(let s of o)s()}finally{Br(t),Bt(r),Ee(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ft(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new z(205,!1)}processProvider(e){e=kt(e);let t=zo(e)?e:kt(e&&e.provide),r=RN(e);if(!zo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Fo(void 0,yl,!0),i.factory=()=>Hp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ee(null);try{return t.value===yl&&(t.value=AN,t.value=t.factory()),typeof t.value=="object"&&t.value&&NN(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ee(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=kt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Gp(n){let e=Wl(n),t=e!==null?e.factory:Pi(n);if(t!==null)return t;if(n instanceof G)throw new z(204,!1);if(n instanceof Function)return xN(n);throw new z(204,!1)}function xN(n){if(n.length>0)throw new z(204,!1);let t=$M(n);return t!==null?()=>t.factory(n):()=>new n}function RN(n){if(W0(n))return Fo(void 0,n.useValue);{let e=K0(n);return Fo(e,yl)}}function K0(n,e,t){let r;if(zo(n)){let i=kt(n);return Pi(i)||Gp(i)}else if(W0(n))r=()=>kt(n.useValue);else if(TN(n))r=()=>n.useFactory(...Hp(n.deps||[]));else if(bN(n))r=()=>J(kt(n.useExisting));else{let i=kt(n&&(n.useClass||n.provide));if(MN(n))r=()=>new i(...Hp(n.deps));else return Pi(i)||Gp(i)}return r}function Fo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function MN(n){return!!n.deps}function NN(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function PN(n){return typeof n=="function"||typeof n=="object"&&n instanceof G}function Wp(n,e){for(let t of n)Array.isArray(t)?Wp(t,e):t&&A0(t)?Wp(t.\u0275providers,e):e(t)}function jn(n,e){n instanceof Va&&n.assertNotDestroyed();let t,r=Br(n),i=Bt(void 0);try{return e()}finally{Br(r),Bt(i)}}function Q0(){return x0()!==void 0||eN()!=null}function ON(n){if(!Q0())throw new z(-203,!1)}function kN(n){return typeof n=="function"}var dr=0,pe=1,ne=2,Vt=3,vn=4,wn=5,Tl=6,Sl=7,_n=8,Go=9,On=10,tt=11,La=12,KE=13,ns=14,kn=15,Wo=16,Vo=17,Ko=18,Yl=19,Y0=20,$r=21,xp=22,nn=23,on=25,Z0=1;var Oi=7,Al=8,xl=9,rn=10,Rl=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Rl||{});function Hr(n){return Array.isArray(n)&&typeof n[Z0]=="object"}function hr(n){return Array.isArray(n)&&n[Z0]===!0}function Vg(n){return(n.flags&4)!==0}function Zl(n){return n.componentOffset>-1}function Jl(n){return(n.flags&1)===1}function Gr(n){return!!n.template}function Kp(n){return(n[ne]&512)!==0}var Qp=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function J0(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Jr(){return X0}function X0(n){return n.type.prototype.ngOnChanges&&(n.setInput=VN),FN}Jr.ngInherit=!0;function FN(){let n=tD(this),e=n?.current;if(e){let t=n.previous;if(t===Ho)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function VN(n,e,t,r,i){let o=this.declaredInputs[r],s=tD(n)||LN(n,{previous:Ho,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Qp(l&&l.currentValue,t,u===Ho),J0(n,e,i,t)}var eD="__ngSimpleChanges__";function tD(n){return n[eD]||null}function LN(n,e){return n[eD]=e}var QE=null;var Mn=function(n,e,t){QE?.(n,e,t)},nD="svg",jN="math";function Fn(n){for(;Array.isArray(n);)n=n[dr];return n}function rD(n,e){return Fn(e[n])}function sn(n,e){return Fn(e[n.index])}function iD(n,e){return n.data[e]}function oD(n,e){return n[e]}function Xr(n,e){let t=e[n];return Hr(t)?t:t[dr]}function Lg(n){return(n[ne]&128)===128}function UN(n){return hr(n[Vt])}function Qo(n,e){return e==null?null:n[e]}function sD(n){n[Vo]=0}function aD(n){n[ne]&1024||(n[ne]|=1024,Lg(n)&&ed(n))}function BN(n,e){for(;n>0;)e=e[ns],n--;return e}function Xl(n){return!!(n[ne]&9216||n[nn]?.dirty)}function Yp(n){n[On].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),Xl(n)&&ed(n)}function ed(n){n[On].changeDetectionScheduler?.notify(0);let e=ki(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!Lg(e)));)e=ki(e)}function cD(n,e){if((n[ne]&256)===256)throw new z(911,!1);n[$r]===null&&(n[$r]=[]),n[$r].push(e)}function $N(n,e){if(n[$r]===null)return;let t=n[$r].indexOf(e);t!==-1&&n[$r].splice(t,1)}function ki(n){let e=n[Vt];return hr(e)?e[Vt]:e}var ae={lFrame:vD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var uD=!1;function HN(){return ae.lFrame.elementDepthCount}function qN(){ae.lFrame.elementDepthCount++}function zN(){ae.lFrame.elementDepthCount--}function lD(){return ae.bindingsEnabled}function GN(){return ae.skipHydrationRootTNode!==null}function WN(n){return ae.skipHydrationRootTNode===n}function KN(){ae.skipHydrationRootTNode=null}function be(){return ae.lFrame.lView}function bt(){return ae.lFrame.tView}function de(n){return ae.lFrame.contextLView=n,n[_n]}function he(n){return ae.lFrame.contextLView=null,n}function Tt(){let n=dD();for(;n!==null&&n.type===64;)n=n.parent;return n}function dD(){return ae.lFrame.currentTNode}function QN(){let n=ae.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ui(n,e){let t=ae.lFrame;t.currentTNode=n,t.isParent=e}function jg(){return ae.lFrame.isParent}function hD(){ae.lFrame.isParent=!1}function YN(){return ae.lFrame.contextLView}function fD(){return uD}function YE(n){uD=n}function Ug(){let n=ae.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function ZN(){return ae.lFrame.bindingIndex}function JN(n){return ae.lFrame.bindingIndex=n}function td(){return ae.lFrame.bindingIndex++}function pD(n){let e=ae.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function XN(){return ae.lFrame.inI18n}function eP(n,e){let t=ae.lFrame;t.bindingIndex=t.bindingRootIndex=n,Zp(e)}function tP(){return ae.lFrame.currentDirectiveIndex}function Zp(n){ae.lFrame.currentDirectiveIndex=n}function nP(n){let e=ae.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function gD(n){ae.lFrame.currentQueryIndex=n}function rP(n){let e=n[pe];return e.type===2?e.declTNode:e.type===1?n[wn]:null}function mD(n,e,t){if(t&le.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&le.Host);)if(i=rP(o),i===null||(o=o[ns],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ae.lFrame=yD();return r.currentTNode=e,r.lView=n,!0}function Bg(n){let e=yD(),t=n[pe];ae.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function yD(){let n=ae.lFrame,e=n===null?null:n.child;return e===null?vD(n):e}function vD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function _D(){let n=ae.lFrame;return ae.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var wD=_D;function $g(){let n=_D();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function iP(n){return(ae.lFrame.contextLView=BN(n,ae.lFrame.contextLView))[_n]}function Bi(){return ae.lFrame.selectedIndex}function Fi(n){ae.lFrame.selectedIndex=n}function Hg(){let n=ae.lFrame;return iD(n.tView,n.selectedIndex)}function ID(){ae.lFrame.currentNamespace=nD}function ED(){oP()}function oP(){ae.lFrame.currentNamespace=null}function sP(){return ae.lFrame.currentNamespace}var DD=!0;function nd(){return DD}function rd(n){DD=n}function aP(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=X0(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function id(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function vl(n,e,t){CD(n,e,3,t)}function _l(n,e,t,r){(n[ne]&3)===t&&CD(n,e,t,r)}function Rp(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function CD(n,e,t,r){let i=r!==void 0?n[Vo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Vo]+=65536),(a<o||o==-1)&&(cP(n,t,e,u),n[Vo]=(n[Vo]&4294901760)+u+2),u++}function ZE(n,e){Mn(4,n,e);let t=Ee(null);try{e.call(n)}finally{Ee(t),Mn(5,n,e)}}function cP(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[Vo]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,ZE(a,o)):ZE(a,o)}var Bo=-1,Vi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function uP(n){return n instanceof Vi}function lP(n){return(n.flags&8)!==0}function dP(n){return(n.flags&16)!==0}var Mp={},Jp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Kl(r);let i=this.injector.get(e,Mp,r);return i!==Mp||t===Mp?i:this.parentInjector.get(e,t,r)}};function bD(n){return n!==Bo}function Ml(n){return n&32767}function hP(n){return n>>16}function Nl(n,e){let t=hP(n),r=e;for(;t>0;)r=r[ns],t--;return r}var Xp=!0;function Pl(n){let e=Xp;return Xp=n,e}var fP=256,TD=fP-1,SD=5,pP=0,Nn={};function gP(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Oa)&&(r=t[Oa]),r==null&&(r=t[Oa]=pP++);let i=r&TD,o=1<<i;e.data[n+(i>>SD)]|=o}function Ol(n,e){let t=AD(n,e);if(t!==-1)return t;let r=e[pe];r.firstCreatePass&&(n.injectorIndex=e.length,Np(r.data,n),Np(e,null),Np(r.blueprint,null));let i=qg(n,e),o=n.injectorIndex;if(bD(i)){let s=Ml(i),a=Nl(i,e),u=a[pe].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Np(n,e){n.push(0,0,0,0,0,0,0,0,e)}function AD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function qg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=PD(i),r===null)return Bo;if(t++,i=i[ns],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Bo}function eg(n,e,t){gP(n,e,t)}function mP(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(F0(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function xD(n,e,t){if(t&le.Optional||n!==void 0)return n;Mg(e,"NodeInjector")}function RD(n,e,t,r){if(t&le.Optional&&r===void 0&&(r=null),!(t&(le.Self|le.Host))){let i=n[Go],o=Bt(void 0);try{return i?i.get(e,r,t&le.Optional):R0(e,r,t&le.Optional)}finally{Bt(o)}}return xD(r,e,t)}function MD(n,e,t,r=le.Default,i){if(n!==null){if(e[ne]&2048&&!(r&le.Self)){let s=IP(n,e,t,r,Nn);if(s!==Nn)return s}let o=ND(n,e,t,r,Nn);if(o!==Nn)return o}return RD(e,t,r,i)}function ND(n,e,t,r,i){let o=_P(t);if(typeof o=="function"){if(!mD(e,n,r))return r&le.Host?xD(i,t,r):RD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&le.Optional))Mg(t);else return s}finally{wD()}}else if(typeof o=="number"){let s=null,a=AD(n,e),u=Bo,l=r&le.Host?e[kn][wn]:null;for((a===-1||r&le.SkipSelf)&&(u=a===-1?qg(n,e):e[a+8],u===Bo||!XE(r,!1)?a=-1:(s=e[pe],a=Ml(u),e=Nl(u,e)));a!==-1;){let h=e[pe];if(JE(o,a,h.data)){let p=yP(a,e,t,s,r,l);if(p!==Nn)return p}u=e[a+8],u!==Bo&&XE(r,e[pe].data[a+8]===l)&&JE(o,a,e)?(s=h,a=Ml(u),e=Nl(u,e)):a=-1}}return i}function yP(n,e,t,r,i,o){let s=e[pe],a=s.data[n+8],u=r==null?Zl(a)&&Xp:r!=s&&(a.type&3)!==0,l=i&le.Host&&o===a,h=vP(a,s,t,u,l);return h!==null?Yo(e,s,h,a):Nn}function vP(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let _=p;_<m;_++){let A=s[_];if(_<u&&t===A||_>=u&&A.type===t)return _}if(i){let _=s[u];if(_&&Gr(_)&&_.type===t)return u}return null}function Yo(n,e,t,r){let i=n[t],o=e.data;if(uP(i)){let s=i;s.resolving&&QM(KM(o[t]));let a=Pl(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Bt(s.injectImpl):null,h=mD(n,r,le.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&aP(t,o[t],e)}finally{l!==null&&Bt(l),Pl(a),s.resolving=!1,wD()}}return i}function _P(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Oa)?n[Oa]:void 0;return typeof e=="number"?e>=0?e&TD:wP:e}function JE(n,e,t){let r=1<<n;return!!(t[e+(n>>SD)]&r)}function XE(n,e){return!(n&le.Self)&&!(n&le.Host&&e)}var Ni=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return MD(this._tNode,this._lView,e,Kl(r),t)}};function wP(){return new Ni(Tt(),be())}function fr(n){return Ba(()=>{let e=n.prototype.constructor,t=e[El]||tg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[El]||tg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function tg(n){return C0(n)?()=>{let e=tg(kt(n));return e&&e()}:Pi(n)}function IP(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!(s[ne]&512);){let a=ND(o,s,t,r|le.Self,Nn);if(a!==Nn)return a;let u=o.parent;if(!u){let l=s[Y0];if(l){let h=l.get(t,Nn,r);if(h!==Nn)return h}u=PD(s),s=s[ns]}o=u}return i}function PD(n){let e=n[pe],t=e.type;return t===2?e.declTNode:t===1?n[wn]:null}function zg(n){return mP(Tt(),n)}function e0(n,e=null,t=null,r){let i=OD(n,e,t,r);return i.resolveInjectorInitializers(),i}function OD(n,e=null,t=null,r,i=new Set){let o=[t||tn,DN(n)];return r=r||(typeof n=="object"?void 0:Ft(n)),new Va(o,e||Fg(),r||null,i)}var yt=class n{static{this.THROW_IF_NOT_FOUND=ka}static{this.NULL=new bl}static create(e,t){if(Array.isArray(e))return e0({name:""},t,e,"");{let r=e.name??"";return e0({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=q({token:n,providedIn:"any",factory:()=>J(P0)})}static{this.__NG_ELEMENT_ID__=-1}};var EP=new G("");EP.__NG_ELEMENT_ID__=n=>{let e=Tt();if(e===null)throw new z(204,!1);if(e.type&2)return e.value;if(n&le.Optional)return null;throw new z(204,!1)};var DP="ngOriginalError";function Pp(n){return n[DP]}var kD=!0,Gg=(()=>{class n{static{this.__NG_ELEMENT_ID__=CP}static{this.__NG_ENV_ID__=t=>t}}return n})(),ng=class extends Gg{constructor(e){super(),this._lView=e}onDestroy(e){return cD(this._lView,e),()=>$N(this._lView,e)}};function CP(){return new ng(be())}var rs=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ke(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}}return n})();var rg=class extends ut{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,Q0()&&(this.destroyRef=k(Gg,{optional:!0})??void 0,this.pendingTasks=k(rs,{optional:!0})??void 0)}emit(e){let t=Ee(null);try{super.next(e)}finally{Ee(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof He&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},et=rg;function kl(...n){}function FD(n){let e,t;function r(){n=kl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function t0(n){return queueMicrotask(()=>n()),()=>{n=kl}}var Wg="isAngularZone",Fl=Wg+"_ID",bP=0,Se=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new et(!1),this.onMicrotaskEmpty=new et(!1),this.onStable=new et(!1),this.onError=new et(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=kD}=e;if(typeof Zone>"u")throw new z(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,AP(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Wg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new z(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new z(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,TP,kl,kl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},TP={};function Kg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function SP(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){FD(()=>{n.callbackScheduled=!1,ig(n),n.isCheckStableRunning=!0,Kg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),ig(n)}function AP(n){let e=()=>{SP(n)},t=bP++;n._inner=n._inner.fork({name:"angular",properties:{[Wg]:!0,[Fl]:t,[Fl+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(xP(u))return r.invokeTask(o,s,a,u);try{return n0(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),r0(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return n0(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!RP(u)&&e(),r0(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,ig(n),Kg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function ig(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function n0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function r0(n){n._nesting--,Kg(n)}var og=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new et,this.onMicrotaskEmpty=new et,this.onStable=new et,this.onError=new et}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function xP(n){return VD(n,"__ignore_ng_zone__")}function RP(n){return VD(n,"__scheduler_tick__")}function VD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var cr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Pp(e);for(;t&&Pp(t);)t=Pp(t);return t||null}},MP=new G("",{providedIn:"root",factory:()=>{let n=k(Se),e=k(cr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function NP(){return od(Tt(),be())}function od(n,e){return new In(sn(n,e))}var In=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=NP}}return n})();function LD(n){return(n.flags&128)===128}var jD=new Map,PP=0;function OP(){return PP++}function kP(n){jD.set(n[Yl],n)}function sg(n){jD.delete(n[Yl])}var i0="__ngContext__";function Wr(n,e){Hr(e)?(n[i0]=e[Yl],kP(e)):n[i0]=e}function UD(n){return $D(n[La])}function BD(n){return $D(n[vn])}function $D(n){for(;n!==null&&!hr(n);)n=n[vn];return n}var ag;function HD(n){ag=n}function FP(){if(ag!==void 0)return ag;if(typeof document<"u")return document;throw new z(210,!1)}var Qg=new G("",{providedIn:"root",factory:()=>VP}),VP="ng",Yg=new G(""),Un=new G("",{providedIn:"platform",factory:()=>"unknown"});var Zg=new G("",{providedIn:"root",factory:()=>FP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var LP="h",jP="b";var UP=()=>null;function Jg(n,e,t=!1){return UP(n,e,t)}var qD=!1,BP=new G("",{providedIn:"root",factory:()=>qD});var fl;function $P(){if(fl===void 0&&(fl=null,Up.trustedTypes))try{fl=Up.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return fl}function o0(n){return $P()?.createScriptURL(n)||n}var Vl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${E0})`}};function Ha(n){return n instanceof Vl?n.changingThisBreaksApplicationSecurity:n}function Xg(n,e){let t=HP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${E0})`)}return t===e}function HP(n){return n instanceof Vl&&n.getTypeName()||null}var qP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function zD(n){return n=String(n),n.match(qP)?n:"unsafe:"+n}var sd=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(sd||{});function zP(n){let e=WD();return e?e.sanitize(sd.URL,n)||"":Xg(n,"URL")?Ha(n):zD($o(n))}function GP(n){let e=WD();if(e)return o0(e.sanitize(sd.RESOURCE_URL,n)||"");if(Xg(n,"ResourceURL"))return o0(Ha(n));throw new z(904,!1)}function WP(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?GP:zP}function GD(n,e,t){return WP(e,t)(n)}function WD(){let n=be();return n&&n[On].sanitizer}var KP=/^>|^->|<!--|-->|--!>|<!-$/g,QP=/(<|>)/g,YP="\u200B$1\u200B";function ZP(n){return n.replace(KP,e=>e.replace(QP,YP))}function KD(n){return n instanceof Function?n():n}function JP(n){return(n??k(yt)).get(Un)==="browser"}var ur=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ur||{}),XP;function em(n,e){return XP(n,e)}function Lo(n,e,t,r,i){if(r!=null){let o,s=!1;hr(r)?o=r:Hr(r)&&(s=!0,r=r[dr]);let a=Fn(r);n===0&&t!==null?i==null?XD(e,t,a):Ll(e,t,a,i||null,!0):n===1&&t!==null?Ll(e,t,a,i||null,!0):n===2?g1(e,a,s):n===3&&e.destroyNode(a),o!=null&&y1(e,n,o,t,i)}}function e1(n,e){return n.createText(e)}function t1(n,e,t){n.setValue(e,t)}function n1(n,e){return n.createComment(ZP(e))}function QD(n,e,t){return n.createElement(e,t)}function r1(n,e){YD(n,e),e[dr]=null,e[wn]=null}function i1(n,e,t,r,i,o){r[dr]=i,r[wn]=e,cd(n,r,t,1,i,o)}function YD(n,e){e[On].changeDetectionScheduler?.notify(9),cd(n,e,e[tt],2,null,null)}function o1(n){let e=n[La];if(!e)return Op(n[pe],n);for(;e;){let t=null;if(Hr(e))t=e[La];else{let r=e[rn];r&&(t=r)}if(!t){for(;e&&!e[vn]&&e!==n;)Hr(e)&&Op(e[pe],e),e=e[Vt];e===null&&(e=n),Hr(e)&&Op(e[pe],e),t=e&&e[vn]}e=t}}function s1(n,e,t,r){let i=rn+r,o=t.length;r>0&&(t[i-1][vn]=e),r<o-rn?(e[vn]=t[i],N0(t,rn+r,e)):(t.push(e),e[vn]=null),e[Vt]=t;let s=e[Wo];s!==null&&t!==s&&ZD(s,e);let a=e[Ko];a!==null&&a.insertView(n),Yp(e),e[ne]|=128}function ZD(n,e){let t=n[xl],r=e[Vt];if(Hr(r))n[ne]|=Rl.HasTransplantedViews;else{let i=r[Vt][kn];e[kn]!==i&&(n[ne]|=Rl.HasTransplantedViews)}t===null?n[xl]=[e]:t.push(e)}function tm(n,e){let t=n[xl],r=t.indexOf(e);t.splice(r,1)}function cg(n,e){if(n.length<=rn)return;let t=rn+e,r=n[t];if(r){let i=r[Wo];i!==null&&i!==n&&tm(i,r),e>0&&(n[t-1][vn]=r[vn]);let o=Cl(n,rn+e);r1(r[pe],r);let s=o[Ko];s!==null&&s.detachView(o[pe]),r[Vt]=null,r[vn]=null,r[ne]&=-129}return r}function JD(n,e){if(!(e[ne]&256)){let t=e[tt];t.destroyNode&&cd(n,e,t,3,null,null),o1(e)}}function Op(n,e){if(e[ne]&256)return;let t=Ee(null);try{e[ne]&=-129,e[ne]|=256,e[nn]&&cp(e[nn]),c1(n,e),a1(n,e),e[pe].type===1&&e[tt].destroy();let r=e[Wo];if(r!==null&&hr(e[Vt])){r!==e[Vt]&&tm(r,e);let i=e[Ko];i!==null&&i.detachView(n)}sg(e)}finally{Ee(t)}}function a1(n,e){let t=n.cleanup,r=e[Sl];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[Sl]=null);let i=e[$r];if(i!==null){e[$r]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function c1(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Vi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Mn(4,a,u);try{u.call(a)}finally{Mn(5,a,u)}}else{Mn(4,i,o);try{o.call(i)}finally{Mn(5,i,o)}}}}}function u1(n,e,t){return l1(n,e.parent,t)}function l1(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[dr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Pn.None||o===Pn.Emulated)return null}return sn(r,t)}}function Ll(n,e,t,r,i){n.insertBefore(e,t,r,i)}function XD(n,e,t){n.appendChild(e,t)}function s0(n,e,t,r,i){r!==null?Ll(n,e,t,r,i):XD(n,e,t)}function eC(n,e){return n.parentNode(e)}function d1(n,e){return n.nextSibling(e)}function h1(n,e,t){return p1(n,e,t)}function f1(n,e,t){return n.type&40?sn(n,t):null}var p1=f1,a0;function ad(n,e,t,r){let i=u1(n,r,e),o=e[tt],s=r.parent||e[wn],a=h1(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)s0(o,i,t[u],a,!1);else s0(o,i,t,a,!1);a0!==void 0&&a0(o,r,e,t,i)}function Pa(n,e){if(e!==null){let t=e.type;if(t&3)return sn(e,n);if(t&4)return ug(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Pa(n,r);{let i=n[e.index];return hr(i)?ug(-1,i):Fn(i)}}else{if(t&128)return Pa(n,e.next);if(t&32)return em(e,n)()||Fn(n[e.index]);{let r=tC(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ki(n[kn]);return Pa(i,r)}else return Pa(n,e.next)}}}return null}function tC(n,e){if(e!==null){let r=n[kn][wn],i=e.projection;return r.projection[i]}return null}function ug(n,e){let t=rn+n+1;if(t<e.length){let r=e[t],i=r[pe].firstChild;if(i!==null)return Pa(r,i)}return e[Oi]}function g1(n,e,t){n.removeChild(null,e,t)}function nm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Wr(Fn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)nm(n,e,t.child,r,i,o,!1),Lo(e,n,i,a,o);else if(u&32){let l=em(t,r),h;for(;h=l();)Lo(e,n,i,h,o);Lo(e,n,i,a,o)}else u&16?m1(n,e,r,t,i,o):Lo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function cd(n,e,t,r,i,o){nm(t,r,n.firstChild,e,i,o,!1)}function m1(n,e,t,r,i,o){let s=t[kn],u=s[wn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Lo(e,n,i,h,o)}else{let l=u,h=s[Vt];LD(r)&&(l.flags|=128),nm(n,e,l,h,i,o,!0)}}function y1(n,e,t,r,i){let o=t[Oi],s=Fn(t);o!==s&&Lo(e,n,r,o,i);for(let a=rn;a<t.length;a++){let u=t[a];cd(u[pe],u,n,e,r,o)}}function v1(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:ur.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ur.Important),n.setStyle(t,r,i,o))}}function _1(n,e,t){n.setAttribute(e,"style",t)}function nC(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function rC(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&qp(n,e,r),i!==null&&nC(n,e,i),o!==null&&_1(n,e,o)}var pr={};function F(n=1){iC(bt(),be(),Bi()+n,!1)}function iC(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&vl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&_l(e,o,0,t)}Fi(t)}function U(n,e=le.Default){let t=be();if(t===null)return J(n,e);let r=Tt();return MD(r,t,kt(n),e)}function oC(){let n="invalid";throw new Error(n)}function sC(n,e,t,r,i,o){let s=Ee(null);try{let a=null;i&qr.SignalBased&&(a=e[r][sr]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&qr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):J0(e,a,r,o)}finally{Ee(s)}}function w1(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Fi(~i);else{let o=i,s=t[++r],a=t[++r];eP(s,o);let u=e[o];a(2,u)}}}finally{Fi(-1)}}function ud(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[dr]=i,p[ne]=r|4|128|8|64,(l!==null||n&&n[ne]&2048)&&(p[ne]|=2048),sD(p),p[Vt]=p[ns]=n,p[_n]=t,p[On]=s||n&&n[On],p[tt]=a||n&&n[tt],p[Go]=u||n&&n[Go]||null,p[wn]=o,p[Yl]=OP(),p[Tl]=h,p[Y0]=l,p[kn]=e.type==2?n[kn]:p,p}function qa(n,e,t,r,i){let o=n.data[e];if(o===null)o=I1(n,e,t,r,i),XN()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=QN();o.injectorIndex=s===null?-1:s.injectorIndex}return Ui(o,!0),o}function I1(n,e,t,r,i){let o=dD(),s=jg(),a=s?o:o&&o.parent,u=n.data[e]=T1(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function aC(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function cC(n,e,t,r,i){let o=Bi(),s=r&2;try{Fi(-1),s&&e.length>on&&iC(n,e,on,!1),Mn(s?2:0,i),t(r,i)}finally{Fi(o),Mn(s?3:1,i)}}function rm(n,e,t){if(Vg(e)){let r=Ee(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{Ee(r)}}}function im(n,e,t){lD()&&(N1(n,e,t,sn(t,e)),(t.flags&64)===64&&hC(n,e,t))}function om(n,e,t=sn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function uC(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=sm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function sm(n,e,t,r,i,o,s,a,u,l,h){let p=on+r,m=p+i,_=E1(p,m),A=typeof l=="function"?l():l;return _[pe]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:h}}function E1(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:pr);return t}function D1(n,e,t,r){let o=r.get(BP,qD)||t===Pn.ShadowDom,s=n.selectRootElement(e,o);return C1(s),s}function C1(n){b1(n)}var b1=()=>null;function T1(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return GN()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function c0(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=qr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?u0(r,t,l,a,u):u0(r,t,l,a)}return r}function u0(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function S1(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,_=m?m.inputs:null,A=m?m.outputs:null;u=c0(0,p.inputs,h,u,_),l=c0(1,p.outputs,h,l,A);let O=u!==null&&s!==null&&!Og(e)?H1(u,h,s):null;a.push(O)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function A1(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function lC(n,e,t,r,i,o,s,a){let u=sn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(cm(n,t,h,r,i),Zl(e)&&x1(t,e.index)):e.type&3?(r=A1(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function x1(n,e){let t=Xr(e,n);t[ne]&16||(t[ne]|=64)}function am(n,e,t,r){if(lD()){let i=r===null?null:{"":-1},o=O1(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&dC(n,e,t,s,i,a),i&&k1(t,r,i)}t.mergedAttrs=Fa(t.mergedAttrs,t.attrs)}function dC(n,e,t,r,i,o){for(let l=0;l<r.length;l++)eg(Ol(t,e),n,r[l].type);V1(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=aC(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Fa(t.mergedAttrs,h.hostAttrs),L1(n,t,e,u,h),F1(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}S1(n,t,o)}function R1(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;M1(s)!=a&&s.push(a),s.push(t,r,o)}}function M1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function N1(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Zl(t)&&j1(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Ol(t,e),Wr(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Yo(e,n,a,t);if(Wr(l,e),s!==null&&$1(e,a-i,l,u,t,s),Gr(u)){let h=Xr(t.index,e);h[_n]=Yo(e,n,a,t)}}}function hC(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=tP();try{Fi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Zp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&P1(u,l)}}finally{Fi(-1),Zp(s)}}function P1(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function O1(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(pN(e,s.selectors,!1))if(r||(r=[]),Gr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;lg(n,e,u)}else r.unshift(s),lg(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function lg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function k1(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new z(-301,!1);r.push(e[i],o)}}}function F1(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Gr(e)&&(t[""]=n)}}function V1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function L1(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Pi(i.type,!0)),s=new Vi(o,Gr(i),U);n.blueprint[r]=s,t[r]=s,R1(n,e,r,aC(n,t,i.hostVars,pr),i)}function j1(n,e,t){let r=sn(e,n),i=uC(t),o=n[On].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=ld(n,ud(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function U1(n,e,t,r,i,o){let s=sn(n,e);B1(e[tt],s,o,n.value,t,r,i)}function B1(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?$o(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function $1(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];sC(r,t,u,l,h,p)}}function H1(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function fC(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function pC(n,e){let t=n.contentQueries;if(t!==null){let r=Ee(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];gD(o),a.contentQueries(2,e[s],s)}}}finally{Ee(r)}}}function ld(n,e){return n[La]?n[KE][vn]=e:n[La]=e,n[KE]=e,e}function dg(n,e,t){gD(0);let r=Ee(null);try{e(n,t)}finally{Ee(r)}}function q1(n){return n[Sl]??=[]}function z1(n){return n.cleanup??=[]}function gC(n,e){let t=n[Go],r=t?t.get(cr,null):null;r&&r.handleError(e)}function cm(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];sC(h,l,r,a,u,i)}}function mC(n,e,t){let r=rD(e,n);t1(n[tt],r,t)}function G1(n,e){let t=Xr(e,n),r=t[pe];W1(r,t);let i=t[dr];i!==null&&t[Tl]===null&&(t[Tl]=Jg(i,t[Go])),um(r,t,t[_n])}function W1(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function um(n,e,t){Bg(e);try{let r=n.viewQuery;r!==null&&dg(1,r,t);let i=n.template;i!==null&&cC(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ko]?.finishViewCreation(n),n.staticContentQueries&&pC(n,e),n.staticViewQueries&&dg(2,n.viewQuery,t);let o=n.components;o!==null&&K1(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,$g()}}function K1(n,e){for(let t=0;t<e.length;t++)G1(n,e[t])}function Q1(n,e,t,r){let i=Ee(null);try{let o=e.tView,a=n[ne]&4096?4096:16,u=ud(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Wo]=l;let h=n[Ko];return h!==null&&(u[Ko]=h.createEmbeddedView(o)),um(o,u,t),u}finally{Ee(i)}}function l0(n,e){return!e||e.firstChild===null||LD(n)}function Y1(n,e,t,r=!0){let i=e[pe];if(s1(i,e,n,t),r){let s=ug(t,n),a=e[tt],u=eC(a,n[Oi]);u!==null&&i1(i,n[wn],a,e,u,s)}let o=e[Tl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function jl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Fn(o)),hr(o)&&Z1(o,r);let s=t.type;if(s&8)jl(n,e,t.child,r);else if(s&32){let a=em(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=tC(e,t);if(Array.isArray(a))r.push(...a);else{let u=ki(e[kn]);jl(u[pe],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Z1(n,e){for(let t=rn;t<n.length;t++){let r=n[t],i=r[pe].firstChild;i!==null&&jl(r[pe],r,i,e)}n[Oi]!==n[dr]&&e.push(n[Oi])}var yC=[];function J1(n){return n[nn]??X1(n)}function X1(n){let e=yC.pop()??Object.create(tO);return e.lView=n,e}function eO(n){n.lView[nn]!==n&&(n.lView=null,yC.push(n))}var tO=ue(j({},xa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{ed(n.lView)},consumerOnSignalRead(){this.lView[nn]=this}});function nO(n){let e=n[nn]??Object.create(rO);return e.lView=n,e}var rO=ue(j({},xa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ki(n.lView);for(;e&&!vC(e[pe]);)e=ki(e);e&&aD(e)},consumerOnSignalRead(){this.lView[nn]=this}});function vC(n){return n.type!==2}var iO=100;function _C(n,e=!0,t=0){let r=n[On],i=r.rendererFactory,o=!1;o||i.begin?.();try{oO(n,t)}catch(s){throw e&&gC(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function oO(n,e){let t=fD();try{YE(!0),hg(n,e);let r=0;for(;Xl(n);){if(r===iO)throw new z(103,!1);r++,hg(n,1)}}finally{YE(t)}}function sO(n,e,t,r){let i=e[ne];if((i&256)===256)return;let o=!1,s=!1;!o&&e[On].inlineEffectRunner?.flush(),Bg(e);let a=!0,u=null,l=null;o||(vC(n)?(l=J1(e),u=Fu(l)):eE()===null?(a=!1,l=nO(e),u=Fu(l)):e[nn]&&(cp(e[nn]),e[nn]=null));try{sD(e),JN(n.bindingStartIndex),t!==null&&cC(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let _=n.preOrderCheckHooks;_!==null&&vl(e,_,null)}else{let _=n.preOrderHooks;_!==null&&_l(e,_,0,null),Rp(e,0)}if(s||aO(e),wC(e,0),n.contentQueries!==null&&pC(n,e),!o)if(h){let _=n.contentCheckHooks;_!==null&&vl(e,_)}else{let _=n.contentHooks;_!==null&&_l(e,_,1),Rp(e,1)}w1(n,e);let p=n.components;p!==null&&EC(e,p,0);let m=n.viewQuery;if(m!==null&&dg(2,m,r),!o)if(h){let _=n.viewCheckHooks;_!==null&&vl(e,_)}else{let _=n.viewHooks;_!==null&&_l(e,_,2),Rp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[xp]){for(let _ of e[xp])_();e[xp]=null}o||(e[ne]&=-73)}catch(h){throw o||ed(e),h}finally{l!==null&&(sp(l,u),a&&eO(l)),$g()}}function wC(n,e){for(let t=UD(n);t!==null;t=BD(t))for(let r=rn;r<t.length;r++){let i=t[r];IC(i,e)}}function aO(n){for(let e=UD(n);e!==null;e=BD(e)){if(!(e[ne]&Rl.HasTransplantedViews))continue;let t=e[xl];for(let r=0;r<t.length;r++){let i=t[r];aD(i)}}}function cO(n,e,t){let r=Xr(e,n);IC(r,t)}function IC(n,e){Lg(n)&&hg(n,e)}function hg(n,e){let r=n[pe],i=n[ne],o=n[nn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ap(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)sO(r,n,r.template,n[_n]);else if(i&8192){wC(n,1);let a=r.components;a!==null&&EC(n,a,1)}}function EC(n,e,t){for(let r=0;r<e.length;r++)cO(n,e[r],t)}function lm(n,e){let t=fD()?64:1088;for(n[On].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=ki(n);if(Kp(n)&&!r)return n;n=r}return null}var Li=class{get rootNodes(){let e=this._lView,t=e[pe];return jl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[_n]}set context(e){this._lView[_n]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Vt];if(hr(e)){let t=e[Al],r=t?t.indexOf(this):-1;r>-1&&(cg(e,r),Cl(t,r))}this._attachedToViewContainer=!1}JD(this._lView[pe],this._lView)}onDestroy(e){cD(this._lView,e)}markForCheck(){lm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){Yp(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,_C(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Kp(this._lView),t=this._lView[Wo];t!==null&&!e&&tm(t,this._lView),YD(this._lView[pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new z(902,!1);this._appRef=e;let t=Kp(this._lView),r=this._lView[Wo];r!==null&&!t&&ZD(r,this._lView),Yp(this._lView)}},dd=(()=>{class n{static{this.__NG_ELEMENT_ID__=dO}}return n})(),uO=dd,lO=class extends uO{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Q1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Li(i)}};function dO(){return DC(Tt(),be())}function DC(n,e){return n.type&4?new lO(e,n,od(n,e)):null}var h5=new RegExp(`^(\\d+)*(${jP}|${LP})*(.*)`);var hO=()=>null;function d0(n,e){return hO(n,e)}var Zo=class{},hd=new G("",{providedIn:"root",factory:()=>!1});var CC=new G(""),bC=new G(""),fg=class{},Ul=class{};function fO(n){let e=Error(`No component factory found for ${Ft(n)}.`);return e[pO]=n,e}var pO="ngComponent";var pg=class{resolveComponentFactory(e){throw fO(e)}},Jo=class{static{this.NULL=new pg}},Xo=class{},Bn=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>gO()}}return n})();function gO(){let n=be(),e=Tt(),t=Xr(e.index,n);return(Hr(t)?t:n)[tt]}var mO=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>null})}}return n})();function Bl(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=LE(i,a);else if(o==2){let u=a,l=e[++s];r=LE(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var $l=class extends Jo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=zr(e);return new es(t,this.ngModule)}};function h0(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:qr.None;e?t.push({propName:s,templateName:r,isSignal:(a&qr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function yO(n){let e=n.toLowerCase();return e==="svg"?nD:e==="math"?jN:null}var es=class extends Ul{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=h0(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return h0(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=vN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Ee(null);try{i=i||this.ngModule;let s=i instanceof Wt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Jp(e,s):e,u=a.get(Xo,null);if(u===null)throw new z(407,!1);let l=a.get(mO,null),h=a.get(Zo,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",A=r?D1(m,r,this.componentDef.encapsulation,a):QD(m,_,yO(_)),O=512;this.componentDef.signals?O|=4096:this.componentDef.onPush||(O|=16);let N=null;A!==null&&(N=Jg(A,a,!0));let B=sm(0,null,null,1,0,null,null,null,null,null,null),K=ud(null,B,null,O,null,null,p,m,a,null,N);Bg(K);let Q,fe,Be=null;try{let ie=this.componentDef,D,v=null;ie.findHostDirectiveDefs?(D=[],v=new Map,ie.findHostDirectiveDefs(ie,D,v),D.push(ie)):D=[ie];let w=vO(K,A);Be=_O(w,A,ie,D,K,p,m),fe=iD(B,on),A&&EO(m,ie,A,r),t!==void 0&&DO(fe,this.ngContentSelectors,t),Q=IO(Be,ie,D,v,K,[CO]),um(B,K,null)}catch(ie){throw Be!==null&&sg(Be),sg(K),ie}finally{$g()}return new gg(this.componentType,Q,od(fe,K),K,fe)}finally{Ee(o)}}},gg=class extends fg{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Li(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;cm(o[pe],o,i,e,t),this.previousInputValues.set(e,t);let s=Xr(this._tNode.index,o);lm(s,1)}}get injector(){return new Ni(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function vO(n,e){let t=n[pe],r=on;return n[r]=e,qa(t,r,2,"#host",null)}function _O(n,e,t,r,i,o,s){let a=i[pe];wO(r,n,e,s);let u=null;e!==null&&(u=Jg(e,i[Go]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=ud(i,uC(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&lg(a,n,r.length-1),ld(i,p),i[n.index]=p}function wO(n,e,t,r){for(let i of n)e.mergedAttrs=Fa(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Bl(e,e.mergedAttrs,!0),t!==null&&rC(r,t,e))}function IO(n,e,t,r,i,o){let s=Tt(),a=i[pe],u=sn(s,i);dC(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=Yo(i,a,p,s);Wr(m,i)}hC(a,i,s),u&&Wr(u,i);let l=Yo(i,a,s.directiveStart+s.componentOffset,s);if(n[_n]=i[_n]=l,o!==null)for(let h of o)h(l,e);return rm(a,s,i),l}function EO(n,e,t,r){if(r)qp(n,t,["ng-version","18.2.10"]);else{let{attrs:i,classes:o}=_N(e.selectors[0]);i&&qp(n,t,i),o&&o.length>0&&nC(n,t,o.join(" "))}}function DO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function CO(){let n=Tt();id(be()[pe],n)}var is=(()=>{class n{static{this.__NG_ELEMENT_ID__=bO}}return n})();function bO(){let n=Tt();return SO(n,be())}var TO=is,TC=class extends TO{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return od(this._hostTNode,this._hostLView)}get injector(){return new Ni(this._hostTNode,this._hostLView)}get parentInjector(){let e=qg(this._hostTNode,this._hostLView);if(bD(e)){let t=Nl(e,this._hostLView),r=Ml(e),i=t[pe].data[r+8];return new Ni(i,t)}else return new Ni(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=f0(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-rn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=d0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,l0(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!kN(e),a;if(s)a=t;else{let A=t||{};a=A.index,r=A.injector,i=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef}let u=s?e:new es(zr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let O=(s?l:this.parentInjector).get(Wt,null);O&&(o=O)}let h=zr(u.componentType??{}),p=d0(this._lContainer,h?.id??null),m=p?.firstChild??null,_=u.create(l,i,m,o);return this.insertImpl(_.hostView,a,l0(this._hostTNode,p)),_}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(UN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Vt],l=new TC(u,u[wn],u[Vt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Y1(s,i,o,r),e.attachToViewContainerRef(),N0(kp(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=f0(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=cg(this._lContainer,t);r&&(Cl(kp(this._lContainer),t),JD(r[pe],r))}detach(e){let t=this._adjustIndex(e,-1),r=cg(this._lContainer,t);return r&&Cl(kp(this._lContainer),t)!=null?new Li(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function f0(n){return n[Al]}function kp(n){return n[Al]||(n[Al]=[])}function SO(n,e){let t,r=e[n.index];return hr(r)?t=r:(t=fC(r,e,null,n),e[n.index]=t,ld(e,t)),xO(t,e,n,r),new TC(t,n,e)}function AO(n,e){let t=n[tt],r=t.createComment(""),i=sn(e,n),o=eC(t,i);return Ll(t,o,r,d1(t,i),!1),r}var xO=NO,RO=()=>!1;function MO(n,e,t){return RO(n,e,t)}function NO(n,e,t,r){if(n[Oi])return;let i;t.type&8?i=Fn(r):i=AO(e,t),n[Oi]=i}var p0=new Set;function os(n){p0.has(n)||(p0.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function PO(n){return typeof n=="function"&&n[sr]!==void 0}function za(n,e){os("NgSignals");let t=dE(n),r=t[sr];return e?.equal&&(r.equal=e.equal),t.set=i=>up(r,i),t.update=i=>hE(r,i),t.asReadonly=OO.bind(t),t}function OO(){let n=this[sr];if(n.readonlyFn===void 0){let e=()=>this();e[sr]=n,n.readonlyFn=e}return n.readonlyFn}function SC(n){return PO(n)&&typeof n.set=="function"}function kO(n){return Object.getPrototypeOf(n.prototype).constructor}function an(n){let e=kO(n.type),t=!0,r=[n];for(;e;){let i;if(Gr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new z(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=pl(n.inputs),s.inputTransforms=pl(n.inputTransforms),s.declaredInputs=pl(n.declaredInputs),s.outputs=pl(n.outputs);let a=i.hostBindings;a&&UO(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&LO(n,u),l&&jO(n,l),FO(n,i),UM(n.outputs,i.outputs),Gr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===an&&(t=!1)}}e=Object.getPrototypeOf(e)}VO(r)}function FO(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function VO(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Fa(i.hostAttrs,t=Fa(t,i.hostAttrs))}}function pl(n){return n===Ho?{}:n===tn?[]:n}function LO(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function jO(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function UO(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function dm(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Kr=class{},ja=class{};var mg=class extends Kr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $l(this);let o=$0(e);this._bootstrapComponents=KD(o.bootstrap),this._r3Injector=OD(e,t,[{provide:Kr,useValue:this},{provide:Jo,useValue:this.componentFactoryResolver},...r],Ft(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},yg=class extends ja{constructor(e){super(),this.moduleType=e}create(e){return new mg(this.moduleType,e,[])}};var Hl=class extends Kr{constructor(e){super(),this.componentFactoryResolver=new $l(this),this.instance=null;let t=new Va([...e.providers,{provide:Kr,useValue:this},{provide:Jo,useValue:this.componentFactoryResolver}],e.parent||Fg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function fd(n,e,t=null){return new Hl({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function AC(n){return $O(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function BO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function $O(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function xC(n,e,t){return n[e]=t}function Qr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function RC(n,e,t,r){let i=Qr(n,e,t);return Qr(n,e+1,r)||i}function HO(n){return(n.flags&32)===32}function qO(n,e,t,r,i,o,s,a,u){let l=e.consts,h=qa(e,n,4,s||null,a||null);am(e,t,h,Qo(l,u)),id(e,h);let p=h.tView=sm(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function zO(n,e,t,r,i,o,s,a,u,l){let h=t+on,p=e.firstCreatePass?qO(h,e,n,r,i,o,s,a,u):e.data[h];Ui(p,!1);let m=GO(e,n,p,t);nd()&&ad(e,n,m,p),Wr(m,n);let _=fC(m,n,m,p);return n[h]=_,ld(n,_),MO(_,p,n),Jl(p)&&im(e,n,p),u!=null&&om(n,p,l),p}function _e(n,e,t,r,i,o,s,a){let u=be(),l=bt(),h=Qo(l.consts,o);return zO(u,l,n,e,t,r,i,h,s,a),_e}var GO=WO;function WO(n,e,t,r){return rd(!0),e[tt].createComment("")}var jo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(jo||{}),MC=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}}return n})(),vg=class n{constructor(){this.ngZone=k(Se),this.scheduler=k(Zo),this.errorHandler=k(cr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[jo.EarlyRead,jo.Write,jo.MixedReadWrite,jo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}},_g=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function hm(n,e){!e?.injector&&ON(hm);let t=e?.injector??k(yt);return JP(t)?(os("NgAfterNextRender"),QO(n,t,e,!0)):YO}function KO(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function QO(n,e,t,r){let i=e.get(MC);i.impl??=e.get(vg);let o=t?.phase??jo.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Gg):null,a=new _g(i.impl,KO(n,o),r,s);return i.impl.register(a),a}var YO={destroy(){}};function Ga(n,e,t,r){let i=be(),o=td();if(Qr(i,o,e)){let s=bt(),a=Hg();U1(a,i,n,e,t,r)}return Ga}function ZO(n,e,t,r){return Qr(n,td(),t)?e+$o(t)+r:pr}function JO(n,e,t,r,i,o){let s=ZN(),a=RC(n,s,t,i);return pD(2),a?e+$o(t)+r+$o(i)+o:pr}function gl(n,e){return n<<17|e<<2}function ji(n){return n>>17&32767}function XO(n){return(n&2)==2}function ek(n,e){return n&131071|e<<17}function wg(n){return n|2}function ts(n){return(n&131068)>>2}function Fp(n,e){return n&-131069|e<<2}function tk(n){return(n&1)===1}function Ig(n){return n|1}function nk(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ji(s),u=ts(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||$a(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=ji(n[a+1]);n[r+1]=gl(m,a),m!==0&&(n[m+1]=Fp(n[m+1],r)),n[a+1]=ek(n[a+1],r)}else n[r+1]=gl(a,0),a!==0&&(n[a+1]=Fp(n[a+1],r)),a=r;else n[r+1]=gl(u,0),a===0?a=r:n[u+1]=Fp(n[u+1],r),u=r;l&&(n[r+1]=wg(n[r+1])),g0(n,h,r,!0),g0(n,h,r,!1),rk(e,h,n,r,o),s=gl(a,u),o?e.classBindings=s:e.styleBindings=s}function rk(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&$a(o,e)>=0&&(t[r+1]=Ig(t[r+1]))}function g0(n,e,t,r){let i=n[t+1],o=e===null,s=r?ji(i):ts(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];ik(u,e)&&(a=!0,n[s+1]=r?Ig(l):wg(l)),s=r?ji(l):ts(l)}a&&(n[t+1]=r?wg(i):Ig(i))}function ik(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?$a(n,e)>=0:!1}function X(n,e,t){let r=be(),i=td();if(Qr(r,i,e)){let o=bt(),s=Hg();lC(o,s,r,n,e,r[tt],t,!1)}return X}function m0(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";cm(n,t,o[s],s,r)}function pd(n,e){return ok(n,e,null,!0),pd}function ok(n,e,t,r){let i=be(),o=bt(),s=pD(2);if(o.firstUpdatePass&&ak(o,n,s,r),e!==pr&&Qr(i,s,e)){let a=o.data[Bi()];hk(o,a,i,i[tt],n,i[s+1]=fk(e,t),r,s)}}function sk(n,e){return e>=n.expandoStartIndex}function ak(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Bi()],s=sk(n,t);pk(o,r)&&e===null&&!s&&(e=!1),e=ck(i,o,e,r),nk(i,o,e,t,s,r)}}function ck(n,e,t,r){let i=nP(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Vp(null,n,e,t,r),t=Ua(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Vp(i,n,e,t,r),o===null){let u=uk(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Vp(null,n,e,u[1],r),u=Ua(u,e.attrs,r),lk(n,e,r,u))}else o=dk(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function uk(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ts(r)!==0)return n[ji(r)]}function lk(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ji(i)]=r}function dk(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ua(r,s,t)}return Ua(r,e.attrs,t)}function Vp(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ua(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ua(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),sN(n,s,t?!0:e[++o]))}return n===void 0?null:n}function hk(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=tk(l)?y0(u,e,t,i,ts(l),s):void 0;if(!ql(h)){ql(o)||XO(l)&&(o=y0(u,null,t,i,a,s));let p=rD(Bi(),t);v1(r,s,p,i,o)}}function y0(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===pr&&(m=p?tn:void 0);let _=p?Sp(m,r):h===r?m:void 0;if(l&&!ql(_)&&(_=Sp(u,r)),ql(_)&&(a=_,s))return a;let A=n[i+1];i=s?ji(A):ts(A)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Sp(u,r))}return a}function ql(n){return n!==void 0}function fk(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ft(Ha(n)))),n}function pk(n,e){return(n.flags&(e?8:16))!==0}function gk(n,e,t,r,i,o){let s=e.consts,a=Qo(s,i),u=qa(e,n,2,r,a);return am(e,t,u,Qo(s,o)),u.attrs!==null&&Bl(u,u.attrs,!1),u.mergedAttrs!==null&&Bl(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function R(n,e,t,r){let i=be(),o=bt(),s=on+n,a=i[tt],u=o.firstCreatePass?gk(s,o,i,e,t,r):o.data[s],l=mk(o,i,u,a,e,n);i[s]=l;let h=Jl(u);return Ui(u,!0),rC(a,l,u),!HO(u)&&nd()&&ad(o,i,l,u),HN()===0&&Wr(l,i),qN(),h&&(im(o,i,u),rm(o,u,i)),r!==null&&om(i,u),R}function T(){let n=Tt();jg()?hD():(n=n.parent,Ui(n,!1));let e=n;WN(e)&&KN(),zN();let t=bt();return t.firstCreatePass&&(id(t,n),Vg(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&lP(e)&&m0(t,e,be(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&dP(e)&&m0(t,e,be(),e.stylesWithoutHost,!1),T}function Lt(n,e,t,r){return R(n,e,t,r),T(),Lt}var mk=(n,e,t,r,i,o)=>(rd(!0),QD(r,i,sP()));function yk(n,e,t,r,i){let o=e.consts,s=Qo(o,r),a=qa(e,n,8,"ng-container",s);s!==null&&Bl(a,s,!0);let u=Qo(o,i);return am(e,t,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function gd(n,e,t){let r=be(),i=bt(),o=n+on,s=i.firstCreatePass?yk(o,i,r,e,t):i.data[o];Ui(s,!0);let a=vk(i,r,s,n);return r[o]=a,nd()&&ad(i,r,a,s),Wr(a,r),Jl(s)&&(im(i,r,s),rm(i,s,r)),t!=null&&om(r,s),gd}function md(){let n=Tt(),e=bt();return jg()?hD():(n=n.parent,Ui(n,!1)),e.firstCreatePass&&(id(e,n),Vg(n)&&e.queries.elementEnd(n)),md}var vk=(n,e,t,r)=>(rd(!0),n1(e[tt],""));function Qe(){return be()}var zl="en-US";var _k=zl;function wk(n){typeof n=="string"&&(_k=n.toLowerCase().replace(/_/g,"-"))}var Ik=(n,e,t)=>{};function Te(n,e,t,r){let i=be(),o=bt(),s=Tt();return NC(o,i,i[tt],s,n,e,r),Te}function Ek(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Sl],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function NC(n,e,t,r,i,o,s){let a=Jl(r),l=n.firstCreatePass&&z1(n),h=e[_n],p=q1(e),m=!0;if(r.type&3||s){let O=sn(r,e),N=s?s(O):O,B=p.length,K=s?fe=>s(Fn(fe[r.index])):r.index,Q=null;if(!s&&a&&(Q=Ek(n,e,i,r.index)),Q!==null){let fe=Q.__ngLastListenerFn__||Q;fe.__ngNextListenerFn__=o,Q.__ngLastListenerFn__=o,m=!1}else{o=_0(r,e,h,o),Ik(O,i,o);let fe=t.listen(N,i,o);p.push(o,fe),l&&l.push(i,K,B,B+1)}}else o=_0(r,e,h,o);let _=r.outputs,A;if(m&&_!==null&&(A=_[i])){let O=A.length;if(O)for(let N=0;N<O;N+=2){let B=A[N],K=A[N+1],Be=e[B][K].subscribe(o),ie=p.length;p.push(o,Be),l&&l.push(i,r.index,ie,-(ie+1))}}}function v0(n,e,t,r){let i=Ee(null);try{return Mn(6,e,t),t(r)!==!1}catch(o){return gC(n,o),!1}finally{Mn(7,e,t),Ee(i)}}function _0(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?Xr(n.index,e):e;lm(s,5);let a=v0(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=v0(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function Ae(n=1){return iP(n)}function Dk(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Ye(n){let e=YN();return oD(e,on+n)}function M(n,e=""){let t=be(),r=bt(),i=n+on,o=r.firstCreatePass?qa(r,i,1,e,null):r.data[i],s=Ck(r,t,o,e,n);t[i]=s,nd()&&ad(r,t,s,o),Ui(o,!1)}var Ck=(n,e,t,r,i)=>(rd(!0),e1(e[tt],r));function at(n){return St("",n,""),at}function St(n,e,t){let r=be(),i=ZO(r,n,e,t);return i!==pr&&mC(r,Bi(),i),St}function Wa(n,e,t,r,i){let o=be(),s=JO(o,n,e,t,r,i);return s!==pr&&mC(o,Bi(),s),Wa}function Le(n,e,t){SC(e)&&(e=e());let r=be(),i=td();if(Qr(r,i,e)){let o=bt(),s=Hg();lC(o,s,r,n,e,r[tt],t,!1)}return Le}function ze(n,e){let t=SC(n);return t&&n.set(e),t}function je(n,e){let t=be(),r=bt(),i=Tt();return NC(r,t,t[tt],i,n,e),je}function bk(n,e,t){let r=bt();if(r.firstCreatePass){let i=Gr(n);Eg(t,r.data,r.blueprint,i,!0),Eg(e,r.data,r.blueprint,i,!1)}}function Eg(n,e,t,r,i){if(n=kt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Eg(n[o],e,t,r,i);else{let o=bt(),s=be(),a=Tt(),u=zo(n)?n:kt(n.provide),l=K0(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(zo(n)||!n.multi){let _=new Vi(l,i,U),A=jp(u,e,i?h:h+m,p);A===-1?(eg(Ol(a,s),o,u),Lp(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(_),s.push(_)):(t[A]=_,s[A]=_)}else{let _=jp(u,e,h+m,p),A=jp(u,e,h,h+m),O=_>=0&&t[_],N=A>=0&&t[A];if(i&&!N||!i&&!O){eg(Ol(a,s),o,u);let B=Ak(i?Sk:Tk,t.length,i,r,l);!i&&N&&(t[A].providerFactory=B),Lp(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(B),s.push(B)}else{let B=PC(t[i?A:_],l,!i&&r);Lp(o,n,_>-1?_:A,B)}!i&&r&&N&&t[A].componentProviders++}}}function Lp(n,e,t,r){let i=zo(e),o=SN(e);if(i||o){let u=(o?kt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function PC(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function jp(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Tk(n,e,t,r){return Dg(this.multi,[])}function Sk(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Yo(t,t[pe],this.providerFactory.index,r);o=a.slice(0,s),Dg(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Dg(i,o);return o}function Dg(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Ak(n,e,t,r,i){let o=new Vi(n,t,U);return o.multi=[],o.index=e,o.componentProviders=0,PC(o,i,r&&!t),o}function ei(n,e=[]){return t=>{t.providersResolver=(r,i)=>bk(r,i?i(n):n,e)}}var xk=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=z0(!1,t.type),i=r.length>0?fd([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(J(Wt))})}}return n})();function Ge(n){os("NgStandalone"),n.getStandaloneInjector=e=>e.get(xk).getOrCreateStandaloneInjector(n)}function ss(n,e,t,r){return FC(be(),Ug(),n,e,t,r)}function OC(n,e,t,r,i){return Rk(be(),Ug(),n,e,t,r,i)}function kC(n,e){let t=n[e];return t===pr?void 0:t}function FC(n,e,t,r,i,o){let s=e+t;return Qr(n,s,i)?xC(n,s+1,o?r.call(o,i):r(i)):kC(n,s+1)}function Rk(n,e,t,r,i,o,s){let a=e+t;return RC(n,a,i,o)?xC(n,a+2,s?r.call(s,i,o):r(i,o)):kC(n,a+2)}function Ka(n,e){let t=bt(),r,i=n+on;t.firstCreatePass?(r=Mk(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Pi(r.type,!0)),s,a=Bt(U);try{let u=Pl(!1),l=o();return Pl(u),Dk(t,be(),i,l),l}finally{Bt(a)}}function Mk(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Qa(n,e,t){let r=n+on,i=be(),o=oD(i,r);return Nk(i,r)?FC(i,Ug(),e,o.transform,t,o):o.transform(t)}function Nk(n,e){return n[pe].data[e].pure}function $i(n,e){return DC(n,e)}var lr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},VC=new lr("18.2.10");var yd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var LC=new G("");function ti(n){return!!n&&typeof n.then=="function"}function fm(n){return!!n&&typeof n.subscribe=="function"}var vd=new G(""),jC=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=k(vd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(ti(o))t.push(o);else if(fm(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_d=new G("");function Pk(){lE(()=>{throw new z(600,!1)})}function Ok(n){return n.isBoundToModule}var kk=10;function Fk(n,e,t){try{let r=t();return ti(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Hi=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(MP),this.afterRenderManager=k(MC),this.zonelessEnabled=k(hd),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ut,this.afterTick=new ut,this.componentTypes=[],this.components=[],this.isStable=k(rs).hasPendingTasks.pipe(Z(t=>!t)),this._injector=k(Wt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Ul;if(!this._injector.get(jC).done){let m=!i&&B0(t),_=!1;throw new z(405,_)}let s;i?s=t:s=this._injector.get(Jo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=Ok(s)?void 0:this._injector.get(Kr),u=r||s.selector,l=s.create(yt.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(LC,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),wl(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new z(101,!1);let t=Ee(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ee(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Xo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<kk;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)Vk(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Xl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;wl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(_d,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>wl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new z(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function wl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Vk(n,e,t,r){if(!t&&!Xl(n))return;_C(n,e,t&&!r?0:1)}var Cg=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},wd=(()=>{class n{compileModuleSync(t){return new yg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=$0(t),o=KD(i.declarations).reduce((s,a)=>{let u=zr(a);return u&&s.push(new es(u)),s},[]);return new Cg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Lk=(()=>{class n{constructor(){this.zone=k(Se),this.changeDetectionScheduler=k(Zo),this.applicationRef=k(Hi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jk=new G("",{factory:()=>!1});function UC({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Se(ue(j({},$C()),{scheduleInRootZone:t})),[{provide:Se,useFactory:n},{provide:qo,multi:!0,useFactory:()=>{let r=k(Lk,{optional:!0});return()=>r.initialize()}},{provide:qo,multi:!0,useFactory:()=>{let r=k(Uk);return()=>{r.initialize()}}},e===!0?{provide:CC,useValue:!0}:[],{provide:bC,useValue:t??kD}]}function BC(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=UC({ngZoneFactory:()=>{let i=$C(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&os("NgZone_CoalesceEvent"),new Se(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Ln([{provide:jk,useValue:!0},{provide:hd,useValue:!1},r])}function $C(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Uk=(()=>{class n{constructor(){this.subscription=new He,this.initialized=!1,this.zone=k(Se),this.pendingTasks=k(rs)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Se.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Se.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Bk=(()=>{class n{constructor(){this.appRef=k(Hi),this.taskService=k(rs),this.ngZone=k(Se),this.zonelessEnabled=k(hd),this.disableScheduling=k(CC,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new He,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Fl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(bC,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof og||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?t0:FD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Fl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,t0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $k(){return typeof $localize<"u"&&$localize.locale||zl}var pm=new G("",{providedIn:"root",factory:()=>k(pm,le.Optional|le.SkipSelf)||$k()});var bg=new G("");function ml(n){return!n.moduleRef}function Hk(n){let e=ml(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Se);return t.run(()=>{ml(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(cr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),ml(n)){let o=()=>e.destroy(),s=n.platformInjector.get(bg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(bg);s.add(o),n.moduleRef.onDestroy(()=>{wl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return Fk(r,t,()=>{let o=e.get(jC);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(pm,zl);if(wk(s||zl),ml(n)){let a=e.get(Hi);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return qk(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function qk(n,e){let t=n.injector.get(Hi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new z(-403,!1);e.push(n)}var Il=null;function zk(n=[],e){return yt.create({name:e,providers:[{provide:Ql,useValue:"platform"},{provide:bg,useValue:new Set([()=>Il=null])},...n]})}function Gk(n=[]){if(Il)return Il;let e=zk(n);return Il=e,Pk(),Wk(e),e}function Wk(n){n.get(Yg,null)?.forEach(t=>t())}var ni=(()=>{class n{static{this.__NG_ELEMENT_ID__=Kk}}return n})();function Kk(n){return Qk(Tt(),be(),(n&16)===16)}function Qk(n,e,t){if(Zl(n)&&!t){let r=Xr(n.index,e);return new Li(r,r)}else if(n.type&175){let r=e[kn];return new Li(r,e)}return null}var Tg=class{constructor(){}supports(e){return AC(e)}create(e){return new Sg(e)}},Yk=(n,e)=>e,Sg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Yk}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<w0(r,i,o)?t:r,a=w0(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let _=m<o.length?o[m]:o[m]=0,A=_+m;h<=A&&A<l&&(o[m]=_+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!AC(e))throw new z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,BO(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Ag(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Gl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Gl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Ag=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},xg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Gl=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new xg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function w0(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function I0(){return new gm([new Tg])}var gm=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:I0})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||I0()),deps:[[n,new Ng,new Ct]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new z(901,!1)}}return n})();function HC(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=Gk(r),o=[UC({}),{provide:Zo,useExisting:Bk},...t||[]],s=new Hl({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return Hk({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function ri(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Ya(n,e){os("NgSignals");let t=aE(n);return e?.equal&&(t[sr].equal=e.equal),t}function En(n){let e=Ee(null);try{return n()}finally{Ee(e)}}function qC(n){let e=zr(n);if(!e)return null;let t=new es(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var YC=null;function mr(){return YC}function ZC(n){YC??=n}var Id=class{};var $t=new G(""),Dm=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>k(Zk),providedIn:"platform"})}}return n})(),JC=new G(""),Zk=(()=>{class n extends Dm{constructor(){super(),this._doc=k($t),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return mr().getBaseHref(this._doc)}onPopState(t){let r=mr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=mr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Cm(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function zC(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function gr(n){return n&&n[0]!=="?"?"?"+n:n}var yr=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>k(bm),providedIn:"root"})}}return n})(),XC=new G(""),bm=(()=>{class n extends yr{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k($t).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Cm(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+gr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+gr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+gr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(J(Dm),J(XC,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),eb=(()=>{class n extends yr{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Cm(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+gr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+gr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(J(Dm),J(XC,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),as=(()=>{class n{constructor(t){this._subject=new et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=eF(zC(GC(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+gr(r))}normalize(t){return n.stripTrailingSlash(Xk(this._basePath,GC(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=gr}static{this.joinWithSlash=Cm}static{this.stripTrailingSlash=zC}static{this.\u0275fac=function(r){return new(r||n)(J(yr))}}static{this.\u0275prov=q({token:n,factory:()=>Jk(),providedIn:"root"})}}return n})();function Jk(){return new as(J(yr))}function Xk(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function GC(n){return n.replace(/\/index.html$/,"")}function eF(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function tb(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var mm=/\s+/,WC=[],Dd=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=WC,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(mm):WC}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(mm):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(mm).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(U(In),U(Bn))}}static{this.\u0275dir=Ve({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var ym=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},cs=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new ym(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),KC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);KC(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(U(is),U(dd),U(gm))}}static{this.\u0275dir=Ve({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function KC(n,e){n.context.$implicit=e.item}var cn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new vm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){QC("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){QC("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(U(is),U(dd))}}static{this.\u0275dir=Ve({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),vm=class{constructor(){this.$implicit=null,this.ngIf=null}};function QC(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Ft(e)}'.`)}function tF(n,e){return new z(2100,!1)}var _m=class{createSubscription(e,t){return En(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){En(()=>e.unsubscribe())}},wm=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},nF=new wm,rF=new _m,Cd=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(ti(t))return nF;if(fm(t))return rF;throw tF(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(U(ni,16))}}static{this.\u0275pipe=L0({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var Dn=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Zr({type:n})}static{this.\u0275inj=Yr({})}}return n})(),Tm="browser",iF="server";function oF(n){return n===Tm}function Sm(n){return n===iF}var nb=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>oF(k(Un))?new Im(k($t),window):new Em})}}return n})(),Im=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=sF(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function sF(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Em=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ed=class{};var Rm=class extends Id{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Mm=class n extends Rm{static makeCurrent(){ZC(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=aF();return t==null?null:cF(t)}resetBaseElement(){Ja=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return tb(document.cookie,e)}},Ja=null;function aF(){return Ja=Ja||document.querySelector("base"),Ja?Ja.getAttribute("href"):null}function cF(n){return new URL(n,document.baseURI).pathname}var uF=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Nm=new G(""),sb=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new z(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(J(Nm),J(Se))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),bd=class{constructor(e){this._doc=e}},Am="ng-app-id",ab=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Sm(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Am}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Am),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Am,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(J($t),J(Qg),J(Zg,8),J(Un))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),xm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Om=/%COMP%/g,cb="%COMP%",lF=`_nghost-${cb}`,dF=`_ngcontent-${cb}`,hF=!0,fF=new G("",{providedIn:"root",factory:()=>hF});function pF(n){return dF.replace(Om,n)}function gF(n){return lF.replace(Om,n)}function ub(n,e){return e.map(t=>t.replace(Om,n))}var rb=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Sm(a),this.defaultRenderer=new Xa(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Pn.ShadowDom&&(r=ue(j({},r),{encapsulation:Pn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Td?i.applyToHost(t):i instanceof ec&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Pn.Emulated:o=new Td(u,l,r,this.appId,h,s,a,p);break;case Pn.ShadowDom:return new Pm(u,l,t,r,s,a,this.nonce,p);default:o=new ec(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(J(sb),J(ab),J(Qg),J(fF),J($t),J(Un),J(Se),J(Zg))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Xa=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(xm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(ib(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ib(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new z(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=xm[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=xm[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ur.DashCase|ur.Important)?e.style.setProperty(t,r,i&ur.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ur.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=mr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function ib(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Pm=class extends Xa{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=ub(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ec=class extends Xa{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?ub(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Td=class extends ec{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=pF(l),this.hostAttr=gF(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},mF=(()=>{class n extends bd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(J($t))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),ob=["alt","control","meta","shift"],yF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vF={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},_F=(()=>{class n extends bd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>mr().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),ob.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=yF[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),ob.forEach(s=>{if(s!==i){let a=vF[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(J($t))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function lb(n,e){return HC(j({rootComponent:n},wF(e)))}function wF(n){return{appProviders:[...bF,...n?.providers??[]],platformProviders:CF}}function IF(){Mm.makeCurrent()}function EF(){return new cr}function DF(){return HD(document),document}var CF=[{provide:Un,useValue:Tm},{provide:Yg,useValue:IF,multi:!0},{provide:$t,useFactory:DF,deps:[]}];var bF=[{provide:Ql,useValue:"root"},{provide:cr,useFactory:EF,deps:[]},{provide:Nm,useClass:mF,multi:!0,deps:[$t,Se,Un]},{provide:Nm,useClass:_F,multi:!0,deps:[$t]},rb,ab,sb,{provide:Xo,useExisting:rb},{provide:Ed,useClass:uF,deps:[]},[]];var db=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(J($t))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ce="primary",gc=Symbol("RouteTitle"),jm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ps(n){return new jm(n)}function SF(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function AF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!$n(n[t],e[t]))return!1;return!0}function $n(n,e){let t=n?Um(n):void 0,r=e?Um(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Eb(n[i],e[i]))return!1;return!0}function Um(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Eb(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function Db(n){return n.length>0?n[n.length-1]:null}function oi(n){return Ep(n)?n:ti(n)?ke(Promise.resolve(n)):Y(n)}var xF={exact:bb,subset:Tb},Cb={exact:RF,subset:MF,ignored:()=>!0};function hb(n,e,t){return xF[t.paths](n.root,e.root,t.matrixParams)&&Cb[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function RF(n,e){return $n(n,e)}function bb(n,e,t){if(!zi(n.segments,e.segments)||!xd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!bb(n.children[r],e.children[r],t))return!1;return!0}function MF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Eb(n[t],e[t]))}function Tb(n,e,t){return Sb(n,e,e.segments,t)}function Sb(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!zi(i,t)||e.hasChildren()||!xd(i,t,r))}else if(n.segments.length===t.length){if(!zi(n.segments,t)||!xd(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Tb(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!zi(n.segments,i)||!xd(n.segments,i,r)||!n.children[ce]?!1:Sb(n.children[ce],e,o,r)}}function xd(n,e,t){return e.every((r,i)=>Cb[t](n[i].parameters,r.parameters))}var _r=class{constructor(e=new xe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ps(this.queryParams),this._queryParamMap}toString(){return OF.serialize(this)}},xe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rd(this)}},qi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ps(this.parameters),this._parameterMap}toString(){return xb(this)}};function NF(n,e){return zi(n,e)&&n.every((t,r)=>$n(t.parameters,e[r].parameters))}function zi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function PF(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ce&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ce&&(t=t.concat(e(i,r)))}),t}var mc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new gs,providedIn:"root"})}}return n})(),gs=class{parse(e){let t=new $m(e);return new _r(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${tc(e.root,!0)}`,r=VF(e.queryParams),i=typeof e.fragment=="string"?`#${kF(e.fragment)}`:"";return`${t}${r}${i}`}},OF=new gs;function Rd(n){return n.segments.map(e=>xb(e)).join("/")}function tc(n,e){if(!n.hasChildren())return Rd(n);if(e){let t=n.children[ce]?tc(n.children[ce],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ce&&r.push(`${i}:${tc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=PF(n,(r,i)=>i===ce?[tc(n.children[ce],!1)]:[`${i}:${tc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ce]!=null?`${Rd(n)}/${t[0]}`:`${Rd(n)}/(${t.join("//")})`}}function Ab(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sd(n){return Ab(n).replace(/%3B/gi,";")}function kF(n){return encodeURI(n)}function Bm(n){return Ab(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Md(n){return decodeURIComponent(n)}function fb(n){return Md(n.replace(/\+/g,"%20"))}function xb(n){return`${Bm(n.path)}${FF(n.parameters)}`}function FF(n){return Object.entries(n).map(([e,t])=>`;${Bm(e)}=${Bm(t)}`).join("")}function VF(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Sd(t)}=${Sd(i)}`).join("&"):`${Sd(t)}=${Sd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var LF=/^[^\/()?;#]+/;function km(n){let e=n.match(LF);return e?e[0]:""}var jF=/^[^\/()?;=#]+/;function UF(n){let e=n.match(jF);return e?e[0]:""}var BF=/^[^=?&#]+/;function $F(n){let e=n.match(BF);return e?e[0]:""}var HF=/^[^&#]+/;function qF(n){let e=n.match(HF);return e?e[0]:""}var $m=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ce]=new xe(e,t)),r}parseSegment(){let e=km(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new z(4009,!1);return this.capture(e),new qi(Md(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=UF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=km(this.remaining);i&&(r=i,this.capture(r))}e[Md(t)]=Md(r)}parseQueryParam(e){let t=$F(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=qF(this.remaining);s&&(r=s,this.capture(r))}let i=fb(t),o=fb(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=km(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ce);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ce]:new xe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new z(4011,!1)}};function Rb(n){return n.segments.length>0?new xe([],{[ce]:n}):n}function Mb(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=Mb(i);if(r===ce&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new xe(n.segments,e);return zF(t)}function zF(n){if(n.numberOfChildren===1&&n.children[ce]){let e=n.children[ce];return new xe(n.segments.concat(e.segments),e.children)}return n}function Gi(n){return n instanceof _r}function GF(n,e,t=null,r=null){let i=Nb(n);return Pb(i,e,t,r)}function Nb(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new xe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=Rb(r);return e??i}function Pb(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Fm(i,i,i,t,r);let o=WF(e);if(o.toRoot())return Fm(i,i,new xe([],{}),t,r);let s=KF(o,i,n),a=s.processChildren?ic(s.segmentGroup,s.index,o.commands):kb(s.segmentGroup,s.index,o.commands);return Fm(i,s.segmentGroup,a,t,r)}function Nd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ac(n){return typeof n=="object"&&n!=null&&n.outlets}function Fm(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=Ob(n,e,t);let a=Rb(Mb(s));return new _r(a,o,i)}function Ob(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=Ob(o,e,t)}),new xe(n.segments,r)}var Pd=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Nd(r[0]))throw new z(4003,!1);let i=r.find(ac);if(i&&i!==Db(r))throw new z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function WF(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Pd(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Pd(t,e,r)}var ds=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function KF(n,e,t){if(n.isAbsolute)return new ds(e,!0,0);if(!t)return new ds(e,!1,NaN);if(t.parent===null)return new ds(t,!0,0);let r=Nd(n.commands[0])?0:1,i=t.segments.length-1+r;return QF(t,i,n.numberOfDoubleDots)}function QF(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new z(4005,!1);i=r.segments.length}return new ds(r,!1,i-o)}function YF(n){return ac(n[0])?n[0].outlets:{[ce]:n}}function kb(n,e,t){if(n??=new xe([],{}),n.segments.length===0&&n.hasChildren())return ic(n,e,t);let r=ZF(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new xe(n.segments.slice(0,r.pathIndex),{});return o.children[ce]=new xe(n.segments.slice(r.pathIndex),n.children),ic(o,0,i)}else return r.match&&i.length===0?new xe(n.segments,{}):r.match&&!n.hasChildren()?Hm(n,e,t):r.match?ic(n,0,i):Hm(n,e,t)}function ic(n,e,t){if(t.length===0)return new xe(n.segments,{});{let r=YF(t),i={};if(Object.keys(r).some(o=>o!==ce)&&n.children[ce]&&n.numberOfChildren===1&&n.children[ce].segments.length===0){let o=ic(n.children[ce],e,t);return new xe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=kb(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new xe(n.segments,i)}}function ZF(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(ac(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!gb(u,l,s))return o;r+=2}else{if(!gb(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Hm(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(ac(o)){let u=JF(o.outlets);return new xe(r,u)}if(i===0&&Nd(t[0])){let u=n.segments[e];r.push(new qi(u.path,pb(t[0]))),i++;continue}let s=ac(o)?o.outlets[ce]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Nd(a)?(r.push(new qi(s,pb(a))),i+=2):(r.push(new qi(s,{})),i++)}return new xe(r,{})}function JF(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Hm(new xe([],{}),0,r))}),e}function pb(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function gb(n,e,t){return n==t.path&&$n(e,t.parameters)}var oc="imperative",dt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(dt||{}),un=class{constructor(e,t){this.id=e,this.url=t}},ms=class extends un{constructor(e,t,r="imperative",i=null){super(e,t),this.type=dt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Hn=class extends un{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=dt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Qt||{}),Od=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Od||{}),vr=class extends un{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=dt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ii=class extends un{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=dt.NavigationSkipped}},cc=class extends un{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=dt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},kd=class extends un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qm=class extends un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zm=class extends un{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=dt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Gm=class extends un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wm=class extends un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Km=class{constructor(e){this.route=e,this.type=dt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Qm=class{constructor(e){this.route=e,this.type=dt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ym=class{constructor(e){this.snapshot=e,this.type=dt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zm=class{constructor(e){this.snapshot=e,this.type=dt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jm=class{constructor(e){this.snapshot=e,this.type=dt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xm=class{constructor(e){this.snapshot=e,this.type=dt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fd=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=dt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},uc=class{},ys=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function XF(n,e){return n.providers&&!n._injector&&(n._injector=fd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Cn(n){return n.outlet||ce}function eV(n,e){let t=n.filter(r=>Cn(r)===e);return t.push(...n.filter(r=>Cn(r)!==e)),t}function yc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var ey=class{get injector(){return yc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new vc(this.rootInjector),this.attachRef=null}},vc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ey(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(J(Wt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Vd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=ty(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=ty(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=ny(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ny(e,this._root).map(t=>t.value)}};function ty(n,e){if(n===e.value)return e;for(let t of e.children){let r=ty(n,t);if(r)return r}return null}function ny(n,e){if(n===e.value)return[e];for(let t of e.children){let r=ny(n,t);if(r.length)return r.unshift(e),r}return[]}var Kt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ls(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ld=class extends Vd{constructor(e,t){super(e),this.snapshot=t,dy(this,e)}toString(){return this.snapshot.toString()}};function Fb(n){let e=tV(n),t=new Ke([new qi("",{})]),r=new Ke({}),i=new Ke({}),o=new Ke({}),s=new Ke(""),a=new ln(t,r,o,s,i,ce,n,e.root);return a.snapshot=e.root,new Ld(new Kt(a,[]),e)}function tV(n){let e={},t={},r={},i="",o=new hs([],e,r,i,t,ce,n,null,{});return new Ud("",new Kt(o,[]))}var ln=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Z(l=>l[gc]))??Y(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Z(e=>ps(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Z(e=>ps(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function jd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),n.params),data:j(j({},e.data),n.data),resolve:j(j(j(j({},n.data),e.data),i?.data),n._resolvedData)}:r={params:j({},n.params),data:j({},n.data),resolve:j(j({},n.data),n._resolvedData??{})},i&&Lb(i)&&(r.resolve[gc]=i.title),r}var hs=class{get title(){return this.data?.[gc]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ps(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ps(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ud=class extends Vd{constructor(e,t){super(t),this.url=e,dy(this,t)}toString(){return Vb(this._root)}};function dy(n,e){e.value._routerState=n,e.children.forEach(t=>dy(n,t))}function Vb(n){let e=n.children.length>0?` { ${n.children.map(Vb).join(", ")} } `:"";return`${n.value}${e}`}function Vm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,$n(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),$n(e.params,t.params)||n.paramsSubject.next(t.params),AF(e.url,t.url)||n.urlSubject.next(t.url),$n(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ry(n,e){let t=$n(n.params,e.params)&&NF(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||ry(n.parent,e.parent))}function Lb(n){return typeof n.title=="string"||n.title===null}var hy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ce,this.activateEvents=new et,this.deactivateEvents=new et,this.attachEvents=new et,this.detachEvents=new et,this.parentContexts=k(vc),this.location=k(is),this.changeDetector=k(ni),this.inputBinder=k(qd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new z(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new z(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new iy(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ve({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Jr]})}}return n})(),iy=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ln?this.route:e===vc?this.childContexts:this.parent.get(e,t)}},qd=new G(""),mb=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Ri([r.queryParams,r.params,r.data]).pipe(Ot(([o,s,a],u)=>(a=j(j(j({},o),s),a),u===0?Y(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=qC(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function nV(n,e,t){let r=lc(n,e._root,t?t._root:void 0);return new Ld(r,e)}function lc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=rV(n,e,t);return new Kt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>lc(n,a)),s}}let r=iV(e.value),i=e.children.map(o=>lc(n,o));return new Kt(r,i)}}function rV(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return lc(n,r,i);return lc(n,r)})}function iV(n){return new ln(new Ke(n.url),new Ke(n.params),new Ke(n.queryParams),new Ke(n.fragment),new Ke(n.data),n.outlet,n.component,n)}var dc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},jb="ngNavigationCancelingError";function Bd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Gi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Ub(!1,Qt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Ub(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[jb]=!0,t.cancellationCode=e,t}function oV(n){return Bb(n)&&Gi(n.url)}function Bb(n){return!!n&&n[jb]}var sV=(n,e,t,r)=>Z(i=>(new oy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),oy=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Vm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ls(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ls(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ls(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ls(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Xm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Zm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Vm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Vm(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},$d=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},fs=class{constructor(e,t){this.component=e,this.route=t}};function aV(n,e,t){let r=n._root,i=e?e._root:null;return nc(r,i,t,[r.value])}function cV(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function _s(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!b0(n)?n:e.get(n):r}function nc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ls(e);return n.children.forEach(s=>{uV(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>sc(a,t.getContext(s),i)),i}function uV(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=lV(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new $d(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?nc(n,e,a?a.children:null,r,i):nc(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new fs(a.outlet.component,s))}else s&&sc(e,a,i),i.canActivateChecks.push(new $d(r)),o.component?nc(n,null,a?a.children:null,r,i):nc(n,null,t,r,i);return i}function lV(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!zi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!zi(n.url,e.url)||!$n(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ry(n,e)||!$n(n.queryParams,e.queryParams);case"paramsChange":default:return!ry(n,e)}}function sc(n,e,t){let r=ls(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?sc(s,e.children.getContext(o),t):sc(s,null,t):sc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new fs(e.outlet.component,i)):t.canDeactivateChecks.push(new fs(null,i)):t.canDeactivateChecks.push(new fs(null,i))}function _c(n){return typeof n=="function"}function dV(n){return typeof n=="boolean"}function hV(n){return n&&_c(n.canLoad)}function fV(n){return n&&_c(n.canActivate)}function pV(n){return n&&_c(n.canActivateChild)}function gV(n){return n&&_c(n.canDeactivate)}function mV(n){return n&&_c(n.canMatch)}function $b(n){return n instanceof ar||n?.name==="EmptyError"}var Ad=Symbol("INITIAL_VALUE");function vs(){return Ot(n=>Ri(n.map(e=>e.pipe(Dt(1),dl(Ad)))).pipe(Z(e=>{for(let t of e)if(t!==!0){if(t===Ad)return Ad;if(t===!1||yV(t))return t}return!0}),Gt(e=>e!==Ad),Dt(1)))}function yV(n){return Gi(n)||n instanceof dc}function vV(n,e){return Xe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Y(ue(j({},t),{guardsResult:!0})):_V(s,r,i,n).pipe(Xe(a=>a&&dV(a)?wV(r,o,n,e):Y(a)),Z(a=>ue(j({},t),{guardsResult:a})))})}function _V(n,e,t,r){return ke(n).pipe(Xe(i=>bV(i.component,i.route,t,e,r)),Rn(i=>i!==!0,!0))}function wV(n,e,t,r){return ke(e).pipe(Mi(i=>Oo(EV(i.route.parent,r),IV(i.route,r),CV(n,i.path,t),DV(n,i.route,t))),Rn(i=>i!==!0,!0))}function IV(n,e){return n!==null&&e&&e(new Jm(n)),Y(!0)}function EV(n,e){return n!==null&&e&&e(new Ym(n)),Y(!0)}function DV(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(o=>cl(()=>{let s=yc(e)??t,a=_s(o,s),u=fV(a)?a.canActivate(e,n):jn(s,()=>a(e,n));return oi(u).pipe(Rn())}));return Y(i).pipe(vs())}function CV(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>cV(s)).filter(s=>s!==null).map(s=>cl(()=>{let a=s.guards.map(u=>{let l=yc(s.node)??t,h=_s(u,l),p=pV(h)?h.canActivateChild(r,n):jn(l,()=>h(r,n));return oi(p).pipe(Rn())});return Y(a).pipe(vs())}));return Y(o).pipe(vs())}function bV(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let u=yc(e)??i,l=_s(a,u),h=gV(l)?l.canDeactivate(n,e,t,r):jn(u,()=>l(n,e,t,r));return oi(h).pipe(Rn())});return Y(s).pipe(vs())}function TV(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let o=i.map(s=>{let a=_s(s,n),u=hV(a)?a.canLoad(e,t):jn(n,()=>a(e,t));return oi(u)});return Y(o).pipe(vs(),Hb(r))}function Hb(n){return Hu(st(e=>{if(typeof e!="boolean")throw Bd(n,e)}),Z(e=>e===!0))}function SV(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let o=i.map(s=>{let a=_s(s,n),u=mV(a)?a.canMatch(e,t):jn(n,()=>a(e,t));return oi(u)});return Y(o).pipe(vs(),Hb(r))}var hc=class{constructor(e){this.segmentGroup=e||null}},fc=class extends Error{constructor(e){super(),this.urlTree=e}};function us(n){return No(new hc(n))}function AV(n){return No(new z(4e3,!1))}function xV(n){return No(Ub(!1,Qt.GuardRejected))}var sy=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[ce])return AV(`${e.redirectTo}`);i=i.children[ce]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:_,data:A,title:O}=i,N=jn(o,()=>a({params:_,data:A,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:O}));if(N instanceof _r)throw new fc(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new fc(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new _r(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new xe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new z(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},ay={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function RV(n,e,t,r,i){let o=qb(n,e,t);return o.matched?(r=XF(e,r),SV(r,e,t,i).pipe(Z(s=>s===!0?o:j({},ay)))):Y(o)}function qb(n,e,t){if(e.path==="**")return MV(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?j({},ay):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||SF)(t,n,e);if(!i)return j({},ay);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?j(j({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function MV(n){return{matched:!0,parameters:n.length>0?Db(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function yb(n,e,t,r){return t.length>0&&OV(n,t,r)?{segmentGroup:new xe(e,PV(r,new xe(t,n.children))),slicedSegments:[]}:t.length===0&&kV(n,t,r)?{segmentGroup:new xe(n.segments,NV(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new xe(n.segments,n.children),slicedSegments:t}}function NV(n,e,t,r){let i={};for(let o of t)if(zd(n,e,o)&&!r[Cn(o)]){let s=new xe([],{});i[Cn(o)]=s}return j(j({},r),i)}function PV(n,e){let t={};t[ce]=e;for(let r of n)if(r.path===""&&Cn(r)!==ce){let i=new xe([],{});t[Cn(r)]=i}return t}function OV(n,e,t){return t.some(r=>zd(n,e,r)&&Cn(r)!==ce)}function kV(n,e,t){return t.some(r=>zd(n,e,r))}function zd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function FV(n,e,t){return e.length===0&&!n.children[t]}var cy=class{};function VV(n,e,t,r,i,o,s="emptyOnly"){return new uy(n,e,t,r,i,s,o).recognize()}var LV=31,uy=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new sy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new z(4002,`'${e.segmentGroup}'`)}recognize(){let e=yb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Z(({children:t,rootSnapshot:r})=>{let i=new Kt(r,t),o=new Ud("",i),s=GF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new hs([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ce,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ce,t).pipe(Z(r=>({children:r,rootSnapshot:t})),jr(r=>{if(r instanceof fc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof hc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Z(s=>s instanceof Kt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ke(o).pipe(Mi(s=>{let a=r.children[s],u=eV(t,s);return this.processSegmentGroup(e,u,a,s,i)}),ll((s,a)=>(s.push(...a),s)),Ur(null),bp(),Xe(s=>{if(s===null)return us(r);let a=zb(s);return jV(a),Y(a)}))}processSegment(e,t,r,i,o,s,a){return ke(t).pipe(Mi(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(jr(l=>{if(l instanceof hc)return Y(null);throw l}))),Rn(u=>!!u),jr(u=>{if($b(u))return FV(r,i,o)?Y(new cy):us(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return Cn(r)!==s&&(s===ce||!zd(i,o,r))?us(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):us(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=qb(t,i,o);if(!u)return us(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>LV&&(this.allowRedirects=!1));let _=new hs(o,l,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,vb(i),Cn(i),i.component??i._loadedComponent??null,i,_b(i)),A=jd(_,a,this.paramsInheritanceStrategy);_.params=Object.freeze(A.params),_.data=Object.freeze(A.data);let O=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,_,e);return this.applyRedirects.lineralizeSegments(i,O).pipe(Xe(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=RV(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ot(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ot(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:_}=u,A=new hs(m,p,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,vb(r),Cn(r),r.component??r._loadedComponent??null,r,_b(r)),O=jd(A,s,this.paramsInheritanceStrategy);A.params=Object.freeze(O.params),A.data=Object.freeze(O.data);let{segmentGroup:N,slicedSegments:B}=yb(t,m,_,l);if(B.length===0&&N.hasChildren())return this.processChildren(h,l,N,A).pipe(Z(Q=>new Kt(A,Q)));if(l.length===0&&B.length===0)return Y(new Kt(A,[]));let K=Cn(r)===o;return this.processSegment(h,l,N,B,K?ce:o,!0,A).pipe(Z(Q=>new Kt(A,Q instanceof Kt?[Q]:[])))}))):us(t)))}getChildConfig(e,t,r){return t.children?Y({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Y({routes:t._loadedRoutes,injector:t._loadedInjector}):TV(e,t,r,this.urlSerializer).pipe(Xe(i=>i?this.configLoader.loadChildren(e,t).pipe(st(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):xV(t))):Y({routes:[],injector:e})}};function jV(n){n.sort((e,t)=>e.value.outlet===ce?-1:t.value.outlet===ce?1:e.value.outlet.localeCompare(t.value.outlet))}function UV(n){let e=n.value.routeConfig;return e&&e.path===""}function zb(n){let e=[],t=new Set;for(let r of n){if(!UV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=zb(r.children);e.push(new Kt(r.value,i))}return e.filter(r=>!t.has(r))}function vb(n){return n.data||{}}function _b(n){return n.resolve||{}}function BV(n,e,t,r,i,o){return Xe(s=>VV(n,e,t,r,s.extractedUrl,i,o).pipe(Z(({state:a,tree:u})=>ue(j({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function $V(n,e){return Xe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Y(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of Gb(u))s.add(l);let a=0;return ke(s).pipe(Mi(u=>o.has(u)?HV(u,r,n,e):(u.data=jd(u,u.parent,n).resolve,Y(void 0))),st(()=>a++),ko(1),Xe(u=>a===s.size?Y(t):zt))})}function Gb(n){let e=n.children.map(t=>Gb(t)).flat();return[n,...e]}function HV(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!Lb(i)&&(o[gc]=i.title),qV(o,n,e,r).pipe(Z(s=>(n._resolvedData=s,n.data=jd(n,n.parent,t).resolve,null)))}function qV(n,e,t,r){let i=Um(n);if(i.length===0)return Y({});let o={};return ke(i).pipe(Xe(s=>zV(n[s],e,t,r).pipe(Rn(),st(a=>{if(a instanceof dc)throw Bd(new gs,a);o[s]=a}))),ko(1),Cp(o),jr(s=>$b(s)?zt:No(s)))}function zV(n,e,t,r){let i=yc(e)??r,o=_s(n,i),s=o.resolve?o.resolve(e,t):jn(i,()=>o(e,t));return oi(s)}function Lm(n){return Ot(e=>{let t=n(e);return t?ke(t).pipe(Z(()=>e)):Y(e)})}var Wb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ce);return r}getResolvedTitleForRoute(t){return t.data[gc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>k(GV),providedIn:"root"})}}return n})(),GV=(()=>{class n extends Wb{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(J(db))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wc=new G("",{providedIn:"root",factory:()=>({})}),WV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=qe({type:n,selectors:[["ng-component"]],standalone:!0,features:[Ge],decls:1,vars:0,template:function(r,i){r&1&&Lt(0,"router-outlet")},dependencies:[hy],encapsulation:2})}}return n})();function fy(n){let e=n.children&&n.children.map(fy),t=e?ue(j({},n),{children:e}):j({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ce&&(t.component=WV),t}var pc=new G(""),py=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k(wd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Y(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=oi(t.loadComponent()).pipe(Z(Kb),st(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Na(()=>{this.componentLoaders.delete(t)})),i=new Ao(r,()=>new ut).pipe(So());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=KV(r,this.compiler,t,this.onLoadEndListener).pipe(Na(()=>{this.childrenLoaders.delete(r)})),s=new Ao(o,()=>new ut).pipe(So());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function KV(n,e,t,r){return oi(n.loadChildren()).pipe(Z(Kb),Xe(i=>i instanceof ja||Array.isArray(i)?Y(i):ke(e.compileModuleAsync(i))),Z(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(pc,[],{optional:!0,self:!0}).flat()),{routes:s.map(fy),injector:o}}))}function QV(n){return n&&typeof n=="object"&&"default"in n}function Kb(n){return QV(n)?n.default:n}var gy=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>k(YV),providedIn:"root"})}}return n})(),YV=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Qb=new G(""),Yb=new G("");function ZV(n,e,t){let r=n.get(Yb),i=n.get($t);return n.get(Se).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),JV(n))),{onViewTransitionCreated:u}=r;return u&&jn(n,()=>u({transition:a,from:e,to:t})),s})}function JV(n){return new Promise(e=>{hm({read:()=>setTimeout(e)},{injector:n})})}var XV=new G(""),my=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ut,this.transitionAbortSubject=new ut,this.configLoader=k(py),this.environmentInjector=k(Wt),this.urlSerializer=k(mc),this.rootContexts=k(vc),this.location=k(as),this.inputBindingEnabled=k(qd,{optional:!0})!==null,this.titleStrategy=k(Wb),this.options=k(wc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=k(gy),this.createViewTransition=k(Qb,{optional:!0}),this.navigationErrorHandler=k(XV,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Y(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Km(i)),r=i=>this.events.next(new Qm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ue(j(j({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Ke({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:oc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Gt(o=>o.id!==0),Z(o=>ue(j({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ot(o=>{let s=!1,a=!1;return Y(o).pipe(Ot(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Qt.SupersededByNewNavigation),zt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ue(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new ii(u.id,this.urlSerializer.serialize(u.rawUrl),p,Od.IgnoredSameUrlNavigation)),u.resolve(!1),zt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Y(u).pipe(Ot(p=>{let m=this.transitions?.getValue();return this.events.next(new ms(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?zt:Promise.resolve(p)}),BV(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),st(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ue(j({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new kd(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:_,restoredState:A,extras:O}=u,N=new ms(p,this.urlSerializer.serialize(m),_,A);this.events.next(N);let B=Fb(this.rootComponentType).snapshot;return this.currentTransition=o=ue(j({},u),{targetSnapshot:B,urlAfterRedirects:m,extras:ue(j({},O),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Y(o)}else{let p="";return this.events.next(new ii(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Od.IgnoredByUrlHandlingStrategy)),u.resolve(!1),zt}}),st(u=>{let l=new qm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Z(u=>(this.currentTransition=o=ue(j({},u),{guards:aV(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),vV(this.environmentInjector,u=>this.events.next(u)),st(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Bd(this.urlSerializer,u.guardsResult);let l=new zm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Gt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Qt.GuardRejected),!1)),Lm(u=>{if(u.guards.canActivateChecks.length)return Y(u).pipe(st(l=>{let h=new Gm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Ot(l=>{let h=!1;return Y(l).pipe($V(this.paramsInheritanceStrategy,this.environmentInjector),st({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Qt.NoDataFromResolver)}}))}),st(l=>{let h=new Wm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Lm(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(st(m=>{h.component=m}),Z(()=>{})));for(let m of h.children)p.push(...l(m));return p};return Ri(l(u.targetSnapshot.root)).pipe(Ur(null),Dt(1))}),Lm(()=>this.afterPreactivation()),Ot(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?ke(h).pipe(Z(()=>o)):Y(o)}),Z(u=>{let l=nV(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ue(j({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),st(()=>{this.events.next(new uc)}),sV(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Dt(1),st({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Hn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),Tp(this.transitionAbortSubject.pipe(st(u=>{throw u}))),Na(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Qt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),jr(u=>{if(a=!0,Bb(u))this.events.next(new vr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),oV(u)?this.events.next(new ys(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new cc(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=jn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof dc){let{message:p,cancellationCode:m}=Bd(this.urlSerializer,h);this.events.next(new vr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new ys(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return zt}))}))}cancelNavigationTransition(t,r,i){let o=new vr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function eL(n){return n!==oc}var tL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>k(nL),providedIn:"root"})}}return n})(),ly=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},nL=(()=>{class n extends ly{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=fr(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Zb=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>k(rL),providedIn:"root"})}}return n})(),rL=(()=>{class n extends Zb{constructor(){super(...arguments),this.location=k(as),this.urlSerializer=k(mc),this.options=k(wc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=k(gy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new _r,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Fb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof ms)this.stateMemento=this.createStateMemento();else if(t instanceof ii)this.rawUrlTree=r.initialUrl;else if(t instanceof kd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof uc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof vr&&(t.code===Qt.GuardRejected||t.code===Qt.NoDataFromResolver)?this.restoreHistory(r):t instanceof cc?this.restoreHistory(r,!0):t instanceof Hn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof _r?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=j(j({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=j(j({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=fr(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(rc||{});function Jb(n,e){n.events.pipe(Gt(t=>t instanceof Hn||t instanceof vr||t instanceof cc||t instanceof ii),Z(t=>t instanceof Hn||t instanceof ii?rc.COMPLETE:(t instanceof vr?t.code===Qt.Redirect||t.code===Qt.SupersededByNewNavigation:!1)?rc.REDIRECTING:rc.FAILED),Gt(t=>t!==rc.REDIRECTING),Dt(1)).subscribe(()=>{e()})}function iL(n){throw n}var oL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},sL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Oe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=k(yd),this.stateManager=k(Zb),this.options=k(wc,{optional:!0})||{},this.pendingTasks=k(rs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=k(my),this.urlSerializer=k(mc),this.location=k(as),this.urlHandlingStrategy=k(gy),this._events=new ut,this.errorHandler=this.options.errorHandler||iL,this.navigated=!1,this.routeReuseStrategy=k(tL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=k(pc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!k(qd,{optional:!0}),this.eventsSubscription=new He,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof vr&&r.code!==Qt.Redirect&&r.code!==Qt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Hn)this.navigated=!0;else if(r instanceof ys){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=j({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||eL(i.source)},s);this.scheduleNavigation(a,oc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}cL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),oc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=j({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(fy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=j(j({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=Nb(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return Pb(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Gi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,oc,null,r)}navigate(t,r={skipLocationChange:!1}){return aL(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=j({},oL):r===!1?i=j({},sL):i=r,Gi(t))return hb(this.currentUrlTree,t,i);let o=this.parseUrl(t);return hb(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return Jb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function aL(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new z(4008,!1)}function cL(n){return!(n instanceof uc)&&!(n instanceof ys)}var qn=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new ut,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Hn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Gi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:GD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Gi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(U(Oe),U(ln),zg("tabindex"),U(Bn),U(In),U(yr))}}static{this.\u0275dir=Ve({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Te("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ga("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ri],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ri],replaceUrl:[2,"replaceUrl","replaceUrl",ri],routerLink:"routerLink"},standalone:!0,features:[dm,Jr]})}}return n})();var Hd=class{};var uL=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Gt(t=>t instanceof Hn),Mi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=fd(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ke(i).pipe(Po())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Y(null);let o=i.pipe(Xe(s=>s===null?Y(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return ke([o,s]).pipe(Po())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(J(Oe),J(wd),J(Wt),J(Hd),J(py))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Xb=new G(""),lL=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ms?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Hn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ii&&t.code===Od.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Fd&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Fd(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){oC()}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function eT(n,...e){return Ln([{provide:pc,multi:!0,useValue:n},[],{provide:ln,useFactory:tT,deps:[Oe]},{provide:_d,multi:!0,useFactory:nT},e.map(t=>t.\u0275providers)])}function tT(n){return n.routerState.root}function Ic(n,e){return{\u0275kind:n,\u0275providers:e}}function nT(){let n=k(yt);return e=>{let t=n.get(Hi);if(e!==t.components[0])return;let r=n.get(Oe),i=n.get(rT);n.get(yy)===1&&r.initialNavigation(),n.get(iT,null,le.Optional)?.setUpPreloading(),n.get(Xb,null,le.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var rT=new G("",{factory:()=>new ut}),yy=new G("",{providedIn:"root",factory:()=>1});function dL(){return Ic(2,[{provide:yy,useValue:0},{provide:vd,multi:!0,deps:[yt],useFactory:e=>{let t=e.get(JC,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Oe),o=e.get(rT);Jb(i,()=>{r(!0)}),e.get(my).afterPreactivation=()=>(r(!0),o.closed?Y(void 0):o),i.initialNavigation()}))}}])}function hL(){return Ic(3,[{provide:vd,multi:!0,useFactory:()=>{let e=k(Oe);return()=>{e.setUpLocationChangeListener()}}},{provide:yy,useValue:2}])}var iT=new G("");function fL(n){return Ic(0,[{provide:iT,useExisting:uL},{provide:Hd,useExisting:n}])}function pL(){return Ic(8,[mb,{provide:qd,useExisting:mb}])}function gL(n){let e=[{provide:Qb,useValue:ZV},{provide:Yb,useValue:j({skipNextTransition:!!n?.skipInitialTransition},n)}];return Ic(9,e)}var wb=new G("ROUTER_FORROOT_GUARD"),mL=[as,{provide:mc,useClass:gs},Oe,vc,{provide:ln,useFactory:tT,deps:[Oe]},py,[]],ws=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[mL,[],{provide:pc,multi:!0,useValue:t},{provide:wb,useFactory:wL,deps:[[Oe,new Ct,new Ng]]},{provide:wc,useValue:r||{}},r?.useHash?vL():_L(),yL(),r?.preloadingStrategy?fL(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?IL(r):[],r?.bindToComponentInputs?pL().\u0275providers:[],r?.enableViewTransitions?gL().\u0275providers:[],EL()]}}static forChild(t){return{ngModule:n,providers:[{provide:pc,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(J(wb,8))}}static{this.\u0275mod=Zr({type:n})}static{this.\u0275inj=Yr({})}}return n})();function yL(){return{provide:Xb,useFactory:()=>{let n=k(nb),e=k(Se),t=k(wc),r=k(my),i=k(mc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new lL(i,r,n,e,t)}}}function vL(){return{provide:yr,useClass:eb}}function _L(){return{provide:yr,useClass:bm}}function wL(n){return"guarded"}function IL(n){return[n.initialNavigation==="disabled"?hL().\u0275providers:[],n.initialNavigation==="enabledBlocking"?dL().\u0275providers:[]]}var Ib=new G("");function EL(){return[{provide:Ib,useFactory:nT},{provide:_d,multi:!0,useExisting:Ib}]}var sT=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},DL=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},aT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,_=l&63;u||(_=64,s||(m=64)),r.push(t[h],t[p],t[m],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(sT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):DL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new _y;let m=o<<2|a>>4;if(r.push(m),l!==64){let _=a<<4&240|l>>2;if(r.push(_),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},_y=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},CL=function(n){let e=sT(n);return aT.encodeByteArray(e,!0)},Ec=function(n){return CL(n).replace(/\./g,"")},Iy=function(n){try{return aT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function bL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var TL=()=>bL().__FIREBASE_DEFAULTS__,SL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},AL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Iy(n[1]);return e&&JSON.parse(e)},Wd=()=>{try{return TL()||SL()||AL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ey=n=>{var e,t;return(t=(e=Wd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},cT=n=>{let e=Ey(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Dy=()=>{var n;return(n=Wd())===null||n===void 0?void 0:n.config},Cy=n=>{var e;return(e=Wd())===null||e===void 0?void 0:e[`_${n}`]};var Gd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function uT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ec(JSON.stringify(t)),Ec(JSON.stringify(s)),""].join(".")}function ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())}function xL(){var n;let e=(n=Wd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hT(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function fT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pT(){let n=ht();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function gT(){return!xL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function by(){try{return typeof indexedDB=="object"}catch{return!1}}function mT(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var RL="FirebaseError",Yt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=RL,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wr.prototype.create)}},wr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?ML(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Yt(i,a,r)}};function ML(n,e){return n.replace(NL,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var NL=/\{\$([^}]+)}/g;function yT(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function si(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(oT(o)&&oT(s)){if(!si(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function oT(n){return n!==null&&typeof n=="object"}function Dc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Es(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ds(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function vT(n,e){let t=new wy(n,e);return t.subscribe.bind(t)}var wy=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");PL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=vy),i.error===void 0&&(i.error=vy),i.complete===void 0&&(i.complete=vy);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function PL(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function vy(){}var R6=4*60*60*1e3;function Ze(n){return n&&n._delegate?n._delegate:n}var dn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Wi="[DEFAULT]";var Ty=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Gd;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kL(e))try{this.getOrInitializeService({instanceIdentifier:Wi})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return y(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Wi){return this.instances.has(e)}getOptions(e=Wi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:OL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wi){return this.component?this.component.multipleInstances?e:Wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function OL(n){return n===Wi?void 0:n}function kL(n){return n.instantiationMode==="EAGER"}var Kd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Ty(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var FL=[],ye=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ye||{}),VL={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},LL=ye.INFO,jL={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},UL=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=jL[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ai=class{constructor(e){this.name=e,this._logLevel=LL,this._logHandler=UL,this._userLogHandler=null,FL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}};var BL=(n,e)=>e.some(t=>n instanceof t),_T,wT;function $L(){return _T||(_T=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HL(){return wT||(wT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var IT=new WeakMap,Ay=new WeakMap,ET=new WeakMap,Sy=new WeakMap,Ry=new WeakMap;function qL(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(zn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&IT.set(t,n)}).catch(()=>{}),Ry.set(e,n),e}function zL(n){if(Ay.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Ay.set(n,e)}var xy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ay.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ET.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function DT(n){xy=n(xy)}function GL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Qd(this),e,...t);return ET.set(r,e.sort?e.sort():[e]),zn(r)}:HL().includes(n)?function(...e){return n.apply(Qd(this),e),zn(IT.get(this))}:function(...e){return zn(n.apply(Qd(this),e))}}function WL(n){return typeof n=="function"?GL(n):(n instanceof IDBTransaction&&zL(n),BL(n,$L())?new Proxy(n,xy):n)}function zn(n){if(n instanceof IDBRequest)return qL(n);if(Sy.has(n))return Sy.get(n);let e=WL(n);return e!==n&&(Sy.set(n,e),Ry.set(e,n)),e}var Qd=n=>Ry.get(n);function bT(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=zn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(zn(s.result),u.oldVersion,u.newVersion,zn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var KL=["get","getKey","getAll","getAllKeys","count"],QL=["put","add","delete","clear"],My=new Map;function CT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(My.get(e))return My.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=QL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||KL.includes(t)))return;let o=function(s,...a){return y(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return My.set(e,o),o}DT(n=>ue(j({},n),{get:(e,t,r)=>CT(e,t)||n.get(e,t,r),has:(e,t)=>!!CT(e,t)||n.has(e,t)}));var Py=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(YL(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function YL(n){let e=n.getComponent();return e?.type==="VERSION"}var Oy="@firebase/app",TT="0.10.13";var Ir=new ai("@firebase/app"),ZL="@firebase/app-compat",JL="@firebase/analytics-compat",XL="@firebase/analytics",e2="@firebase/app-check-compat",t2="@firebase/app-check",n2="@firebase/auth",r2="@firebase/auth-compat",i2="@firebase/database",o2="@firebase/data-connect",s2="@firebase/database-compat",a2="@firebase/functions",c2="@firebase/functions-compat",u2="@firebase/installations",l2="@firebase/installations-compat",d2="@firebase/messaging",h2="@firebase/messaging-compat",f2="@firebase/performance",p2="@firebase/performance-compat",g2="@firebase/remote-config",m2="@firebase/remote-config-compat",y2="@firebase/storage",v2="@firebase/storage-compat",_2="@firebase/firestore",w2="@firebase/vertexai-preview",I2="@firebase/firestore-compat",E2="firebase",D2="10.14.1";var ky="[DEFAULT]",C2={[Oy]:"fire-core",[ZL]:"fire-core-compat",[XL]:"fire-analytics",[JL]:"fire-analytics-compat",[t2]:"fire-app-check",[e2]:"fire-app-check-compat",[n2]:"fire-auth",[r2]:"fire-auth-compat",[i2]:"fire-rtdb",[o2]:"fire-data-connect",[s2]:"fire-rtdb-compat",[a2]:"fire-fn",[c2]:"fire-fn-compat",[u2]:"fire-iid",[l2]:"fire-iid-compat",[d2]:"fire-fcm",[h2]:"fire-fcm-compat",[f2]:"fire-perf",[p2]:"fire-perf-compat",[g2]:"fire-rc",[m2]:"fire-rc-compat",[y2]:"fire-gcs",[v2]:"fire-gcs-compat",[_2]:"fire-fst",[I2]:"fire-fst-compat",[w2]:"fire-vertex","fire-js":"fire-js",[E2]:"fire-js-all"};var Cc=new Map,b2=new Map,Fy=new Map;function ST(n,e){try{n.container.addComponent(e)}catch(t){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ui(n){let e=n.name;if(Fy.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;Fy.set(e,n);for(let t of Cc.values())ST(t,n);for(let t of b2.values())ST(t,n);return!0}function Tc(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bn(n){return n.settings!==void 0}var T2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ci=new wr("app","Firebase",T2);var Vy=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new dn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ci.create("app-deleted",{appName:this._name})}};var li=D2;function Yd(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:ky,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ci.create("bad-app-name",{appName:String(i)});if(t||(t=Dy()),!t)throw ci.create("no-options");let o=Cc.get(i);if(o){if(si(t,o.options)&&si(r,o.config))return o;throw ci.create("duplicate-app",{appName:i})}let s=new Kd(i);for(let u of Fy.values())s.addComponent(u);let a=new Vy(t,r,s);return Cc.set(i,a),a}function Cs(n=ky){let e=Cc.get(n);if(!e&&n===ky&&Dy())return Yd();if(!e)throw ci.create("no-app",{appName:n});return e}function Zd(){return Array.from(Cc.values())}function ct(n,e,t){var r;let i=(r=C2[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(a.join(" "));return}ui(new dn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var S2="firebase-heartbeat-database",A2=1,bc="firebase-heartbeat-store",Ny=null;function MT(){return Ny||(Ny=bT(S2,A2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(bc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ci.create("idb-open",{originalErrorMessage:n.message})})),Ny}function x2(n){return y(this,null,function*(){try{let t=(yield MT()).transaction(bc),r=yield t.objectStore(bc).get(NT(n));return yield t.done,r}catch(e){if(e instanceof Yt)Ir.warn(e.message);else{let t=ci.create("idb-get",{originalErrorMessage:e?.message});Ir.warn(t.message)}}})}function AT(n,e){return y(this,null,function*(){try{let r=(yield MT()).transaction(bc,"readwrite");yield r.objectStore(bc).put(e,NT(n)),yield r.done}catch(t){if(t instanceof Yt)Ir.warn(t.message);else{let r=ci.create("idb-set",{originalErrorMessage:t?.message});Ir.warn(r.message)}}})}function NT(n){return`${n.name}!${n.options.appId}`}var R2=1024,M2=30*24*60*60*1e3,Ly=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new jy(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return y(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=xT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=M2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ir.warn(r)}})}getHeartbeatsHeader(){return y(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=xT(),{heartbeatsToSend:r,unsentEntries:i}=N2(this._heartbeatsCache.heartbeats),o=Ec(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ir.warn(t),""}})}};function xT(){return new Date().toISOString().substring(0,10)}function N2(n,e=R2){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),RT(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),RT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var jy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return y(this,null,function*(){return by()?mT().then(()=>!0).catch(()=>!1):!1})}read(){return y(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield x2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return y(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return AT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return y(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return AT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function RT(n){return Ec(JSON.stringify({version:2,heartbeats:n})).length}function P2(n){ui(new dn("platform-logger",e=>new Py(e),"PRIVATE")),ui(new dn("heartbeat",e=>new Ly(e),"PRIVATE")),ct(Oy,TT,n),ct(Oy,TT,"esm2017"),ct("fire-js","")}P2("");var O2="firebase",k2="10.14.1";ct(O2,k2,"app");var Qi=new lr("ANGULARFIRE2_VERSION");function Xd(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Sc=(n,e)=>{let t=e?[e]:Zd(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ts=class{constructor(){return Sc(F2)}},F2="app-check";function bs(){}var Jd=class{zone;delegate;constructor(e,t=wp){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Uy=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bs,{},bs,bs)),t.pipe(st({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ss=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Jd(Zone.current)),this.insideAngular=t.run(()=>new Jd(Zone.current,_p)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(J(Se))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eh(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function V2(n){return eh().ngZone.runOutsideAngular(()=>n())}function Ki(n){return eh().ngZone.run(()=>n())}function L2(n){return j2(eh())(n)}function j2(n){return function(t){return t=t.lift(new Uy(n.ngZone)),t.pipe(Lr(n.outsideAngular),Vr(n.insideAngular))}}var U2=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ki(()=>n.apply(void 0,r))},ft=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=Ki(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bs,{},bs,bs))),r[o]=U2(r[o],t));let i=V2(()=>n.apply(this,r));if(!e)if(i instanceof ge){let o=eh();return i.pipe(Lr(o.outsideAngular),Vr(o.insideAngular))}else return Ki(()=>i);return i instanceof ge?i.pipe(L2):i instanceof Promise?Ki(()=>new Promise((o,s)=>i.then(a=>Ki(()=>o(a)),a=>Ki(()=>s(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Ki(()=>i)};var Er=class{constructor(e){return e}},Yi=class{constructor(){return Zd()}};function B2(n){return n&&n.length===1?n[0]:new Er(Cs())}var By=new G("angularfire2._apps"),$2={provide:Er,useFactory:B2,deps:[[new Ct,By]]},H2={provide:Yi,deps:[[new Ct,By]]};function q2(n){return(e,t)=>{let r=t.get(Un);ct("angularfire",Qi.full,"core"),ct("angularfire",Qi.full,"app"),ct("angular",VC.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Er(i)}}function PT(n,...e){return Ln([$2,H2,{provide:By,useFactory:q2(n),multi:!0,deps:[Se,yt,Ss,...e]}])}function YT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ZT=YT,JT=new wr("auth","Firebase",YT());var sh=new ai("@firebase/auth");function z2(n,...e){sh.logLevel<=ye.WARN&&sh.warn(`Auth (${li}): ${n}`,...e)}function nh(n,...e){sh.logLevel<=ye.ERROR&&sh.error(`Auth (${li}): ${n}`,...e)}function Wn(n,...e){throw lv(n,...e)}function Zi(n,...e){return lv(n,...e)}function XT(n,e,t){let r=Object.assign(Object.assign({},ZT()),{[e]:t});return new wr("auth","Firebase",r).create(e,{appName:n.name})}function br(n){return XT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lv(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return JT.create(n,...e)}function ee(n,e,...t){if(!n)throw lv(e,...t)}function Dr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw nh(e),new Error(e)}function hi(n,e){n||Dr(e)}function zy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function G2(){return OT()==="http:"||OT()==="https:"}function OT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function W2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(G2()||hT()||"connection"in navigator)?navigator.onLine:!0}function K2(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ji=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,hi(t>e,"Short delay should be less than long delay!"),this.isMobile=lT()||fT()}get(){return W2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function dv(n,e){hi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ah=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Q2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Y2=new Ji(3e4,6e4);function fi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function pi(o,s,a,u){return y(this,arguments,function*(n,e,t,r,i={}){return eS(n,i,()=>y(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Dc(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let _=Object.assign({method:e,headers:m},l);return dT()||(_.referrerPolicy="no-referrer"),ah.fetch()(tS(n,n.config.apiHost,t,p),_)}))})}function eS(n,e,t){return y(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},Q2),e);try{let i=new Gy(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw th(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw th(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw th(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw th(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw XT(n,h,l);Wn(n,h)}}catch(i){if(i instanceof Yt)throw i;Wn(n,"network-request-failed",{message:String(i)})}})}function kc(o,s,a,u){return y(this,arguments,function*(n,e,t,r,i={}){let l=yield pi(n,e,t,r,i);return"mfaPendingCredential"in l&&Wn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function tS(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?dv(n.config,i):`${n.config.apiScheme}://${i}`}function Z2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Gy=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Zi(this.auth,"network-request-failed")),Y2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function th(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Zi(n,e,r);return i.customData._tokenResponse=t,i}function kT(n){return n!==void 0&&n.enterprise!==void 0}var Wy=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Z2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function J2(n,e){return y(this,null,function*(){return pi(n,"GET","/v2/recaptchaConfig",fi(n,e))})}function X2(n,e){return y(this,null,function*(){return pi(n,"POST","/v1/accounts:delete",e)})}function nS(n,e){return y(this,null,function*(){return pi(n,"POST","/v1/accounts:lookup",e)})}function Ac(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function hv(n,e=!1){return y(this,null,function*(){let t=Ze(n),r=yield t.getIdToken(e),i=fv(r);ee(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ac($y(i.auth_time)),issuedAtTime:Ac($y(i.iat)),expirationTime:Ac($y(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function $y(n){return Number(n)*1e3}function fv(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return nh("JWT malformed, contained fewer than 3 sections"),null;try{let i=Iy(t);return i?JSON.parse(i):(nh("Failed to decode base64 JWT payload"),null)}catch(i){return nh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function FT(n){let e=fv(n);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Rc(n,e,t=!1){return y(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Yt&&ej(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function ej({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Ky=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),t)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Mc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ac(this.lastLoginAt),this.creationTime=Ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ch(n){return y(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Rc(n,nS(t,{idToken:r}));ee(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?rS(o.providerUserInfo):[],a=tj(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Mc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function pv(n){return y(this,null,function*(){let e=Ze(n);yield ch(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function tj(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function rS(n){return n.map(e=>{var{providerId:t}=e,r=Ip(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function nj(n,e){return y(this,null,function*(){let t=yield eS(n,{},()=>y(this,null,function*(){let r=Dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=tS(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ah.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function rj(n,e){return y(this,null,function*(){return pi(n,"POST","/v2/accounts:revokeToken",fi(n,e))})}var xc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ee(e.length!==0,"internal-error");let t=FT(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return y(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield nj(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(ee(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ee(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ee(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Dr("not implemented")}};function di(n,e){ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var As=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Ip(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ky(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Mc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let t=yield Rc(this,this.stsTokenManager.getToken(this.auth,e));return ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return hv(this,e)}reload(){return pv(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ch(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(bn(this.auth.app))return Promise.reject(br(this.auth));let e=yield this.getIdToken();return yield Rc(this,X2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,_=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,A=(s=t.photoURL)!==null&&s!==void 0?s:void 0,O=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,B=(l=t.createdAt)!==null&&l!==void 0?l:void 0,K=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Q,emailVerified:fe,isAnonymous:Be,providerData:ie,stsTokenManager:D}=t;ee(Q&&D,e,"internal-error");let v=xc.fromJSON(this.name,D);ee(typeof Q=="string",e,"internal-error"),di(p,e.name),di(m,e.name),ee(typeof fe=="boolean",e,"internal-error"),ee(typeof Be=="boolean",e,"internal-error"),di(_,e.name),di(A,e.name),di(O,e.name),di(N,e.name),di(B,e.name),di(K,e.name);let w=new n({uid:Q,auth:e,email:m,emailVerified:fe,displayName:p,isAnonymous:Be,photoURL:A,phoneNumber:_,tenantId:O,stsTokenManager:v,createdAt:B,lastLoginAt:K});return ie&&Array.isArray(ie)&&(w.providerData=ie.map(E=>Object.assign({},E))),N&&(w._redirectEventId=N),w}static _fromIdTokenResponse(e,t,r=!1){return y(this,null,function*(){let i=new xc;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ch(o),o})}static _fromGetAccountInfoResponse(e,t,r){return y(this,null,function*(){let i=t.users[0];ee(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?rS(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new xc;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Mc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var VT=new Map;function Cr(n){hi(n instanceof Function,"Expected a class definition");let e=VT.get(n);return e?(hi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,VT.set(n,e),e)}var ij=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(t,r){return y(this,null,function*(){this.storage[t]=r})}_get(t){return y(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return y(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Qy=ij;function rh(n,e,t){return`firebase:${n}:${e}:${t}`}var uh=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=rh(this.userKey,i.apiKey,o),this.fullPersistenceKey=rh("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?As._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return y(this,null,function*(){if(!t.length)return new n(Cr(Qy),e,r);let i=(yield Promise.all(t.map(l=>y(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Cr(Qy),s=rh(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p=As._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>y(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function LT(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uS(e))return"Blackberry";if(lS(e))return"Webos";if(oS(e))return"Safari";if((e.includes("chrome/")||sS(e))&&!e.includes("edge/"))return"Chrome";if(cS(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function iS(n=ht()){return/firefox\//i.test(n)}function oS(n=ht()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sS(n=ht()){return/crios\//i.test(n)}function aS(n=ht()){return/iemobile/i.test(n)}function cS(n=ht()){return/android/i.test(n)}function uS(n=ht()){return/blackberry/i.test(n)}function lS(n=ht()){return/webos/i.test(n)}function gv(n=ht()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function oj(n=ht()){var e;return gv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function sj(){return pT()&&document.documentMode===10}function dS(n=ht()){return gv(n)||cS(n)||lS(n)||uS(n)||/windows phone/i.test(n)||aS(n)}function hS(n,e=[]){let t;switch(n){case"Browser":t=LT(ht());break;case"Worker":t=`${LT(ht())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${li}/${r}`}var Yy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function aj(t){return y(this,arguments,function*(n,e={}){return pi(n,"GET","/v2/passwordPolicy",fi(n,e))})}var cj=6,Zy=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:cj,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Jy=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lh(this),this.idTokenSubscription=new lh(this),this.beforeStateQueue=new Yy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Cr(t)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield uh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let t=yield nS(this,{idToken:e}),r=yield As._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var t;if(bn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield ch(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=K2()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(bn(this.app))return Promise.reject(br(this));let t=e?Ze(e):null;return t&&ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return y(this,null,function*(){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return bn(this.app)?Promise.reject(br(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return bn(this.app)?Promise.reject(br(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(Cr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield aj(this),t=new Zy(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield rj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Cr(e)||this._popupRedirectResolver;ee(t,this,"argument-error"),this.redirectPersistenceManager=yield uh.create(this,[Cr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return y(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&z2(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function eo(n){return Ze(n)}var lh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=vT(t=>this.observer=t)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var yh={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uj(n){yh=n}function fS(n){return yh.loadJS(n)}function lj(){return yh.recaptchaEnterpriseScript}function dj(){return yh.gapiScript}function pS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var hj="recaptcha-enterprise",fj="NO_RECAPTCHA",Xy=class{constructor(e){this.type=hj,this.auth=eo(e)}verify(e="verify",t=!1){return y(this,null,function*(){function r(o){return y(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>y(this,null,function*(){J2(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Wy(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;kT(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(fj)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&kT(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=lj();u.length!==0&&(u+=a),fS(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function jT(n,e,t,r=!1){return y(this,null,function*(){let i=new Xy(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function ev(n,e,t,r){return y(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield jT(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>y(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield jT(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)}))})}function mv(n,e){let t=Tc(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(si(o,e??{}))return i;Wn(i,"already-initialized")}return t.initialize({options:e})}function pj(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Cr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function yv(n,e,t){let r=eo(n);ee(r._canInitEmulator,r,"emulator-config-failed"),ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=gS(e),{host:s,port:a}=gj(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||mj()}function gS(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function gj(n){let e=gS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:UT(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:UT(s)}}}function UT(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function mj(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Nc=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Dr("not implemented")}_getIdTokenResponse(e){return Dr("not implemented")}_linkToIdToken(e,t){return Dr("not implemented")}_getReauthenticationResolver(e){return Dr("not implemented")}};function yj(n,e){return y(this,null,function*(){return pi(n,"POST","/v1/accounts:signUp",e)})}function vj(n,e){return y(this,null,function*(){return kc(n,"POST","/v1/accounts:signInWithPassword",fi(n,e))})}function _j(n,e){return y(this,null,function*(){return kc(n,"POST","/v1/accounts:signInWithEmailLink",fi(n,e))})}function wj(n,e){return y(this,null,function*(){return kc(n,"POST","/v1/accounts:signInWithEmailLink",fi(n,e))})}var Pc=class n extends Nc{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return y(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ev(e,t,"signInWithPassword",vj);case"emailLink":return _j(e,{email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}})}_linkToIdToken(e,t){return y(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ev(e,r,"signUpPassword",yj);case"emailLink":return wj(e,{idToken:t,email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Hy(n,e){return y(this,null,function*(){return kc(n,"POST","/v1/accounts:signInWithIdp",fi(n,e))})}function Ij(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ej(n){let e=Es(Ds(n)).link,t=e?Es(Ds(e)).deep_link_id:null,r=Es(Ds(n)).deep_link_id;return(r?Es(Ds(r)).link:null)||r||t||e||n}var dh=class n{constructor(e){var t,r,i,o,s,a;let u=Es(Ds(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=Ij((i=u.mode)!==null&&i!==void 0?i:null);ee(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=Ej(e);try{return new n(t)}catch{return null}}};var mS=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Pc._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=dh.parseLink(r);return ee(i,"argument-error"),Pc._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),hh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var tv=class extends hh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Dj(n,e){return y(this,null,function*(){return kc(n,"POST","/v1/accounts:signUp",fi(n,e))})}var xs=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return y(this,null,function*(){let o=yield As._fromIdTokenResponse(e,r,i),s=BT(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=BT(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function BT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var nv=class n extends Yt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function yS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?nv._fromErrorAndOperation(n,o,e,r):o})}function Cj(n,e,t=!1){return y(this,null,function*(){let r=yield Rc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return xs._forOperation(n,"link",r)})}function bj(n,e,t=!1){return y(this,null,function*(){let{auth:r}=n;if(bn(r.app))return Promise.reject(br(r));let i="reauthenticate";try{let o=yield Rc(n,yS(r,i,e,n),t);ee(o.idToken,r,"internal-error");let s=fv(o.idToken);ee(s,r,"internal-error");let{sub:a}=s;return ee(n.uid===a,r,"user-mismatch"),xs._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Wn(r,"user-mismatch"),o}})}function vS(n,e,t=!1){return y(this,null,function*(){if(bn(n.app))return Promise.reject(br(n));let r="signIn",i=yield yS(n,r,e),o=yield xs._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function vv(n,e){return y(this,null,function*(){return vS(eo(n),e)})}function _S(n){return y(this,null,function*(){let e=eo(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function _v(n,e,t){return y(this,null,function*(){if(bn(n.app))return Promise.reject(br(n));let r=eo(n),s=yield ev(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dj).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&_S(n),u}),a=yield xs._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function wv(n,e,t){return bn(n.app)?Promise.reject(br(n)):vv(Ze(n),mS.credential(e,t)).catch(r=>y(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&_S(n),r}))}function Iv(n,e,t,r){return Ze(n).onIdTokenChanged(e,t,r)}function Ev(n,e,t){return Ze(n).beforeAuthStateChanged(e,t)}function vh(n,e,t,r){return Ze(n).onAuthStateChanged(e,t,r)}function _h(n){return Ze(n).signOut()}var fh="__sak";var ph=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(fh,"1"),this.storage.removeItem(fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Tj=1e3,Sj=10,Aj=(()=>{class n extends ph{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);sj()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,Sj):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},Tj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return y(this,null,function*(){yield kr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return y(this,null,function*(){let r=yield kr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return y(this,null,function*(){yield kr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),wS=Aj;var xj=(()=>{class n extends ph{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Dv=xj;function Rj(n){return Promise.all(n.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Mj=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return y(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>y(this,null,function*(){return h(r.origin,s)})),l=yield Rj(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function IS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var rv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=IS("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Gn(){return window}function Nj(n){Gn().location.href=n}function ES(){return typeof Gn().WorkerGlobalScope<"u"&&typeof Gn().importScripts=="function"}function Pj(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Oj(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function kj(){return ES()?self:null}var DS="firebaseLocalStorageDb",Fj=1,gh="firebaseLocalStorage",CS="fbase_key",Xi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function wh(n,e){return n.transaction([gh],e?"readwrite":"readonly").objectStore(gh)}function Vj(){let n=indexedDB.deleteDatabase(DS);return new Xi(n).toPromise()}function iv(){let n=indexedDB.open(DS,Fj);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(gh,{keyPath:CS})}catch(i){t(i)}}),n.addEventListener("success",()=>y(this,null,function*(){let r=n.result;r.objectStoreNames.contains(gh)?e(r):(r.close(),yield Vj(),e(yield iv()))}))})}function $T(n,e,t){return y(this,null,function*(){let r=wh(n,!0).put({[CS]:e,value:t});return new Xi(r).toPromise()})}function Lj(n,e){return y(this,null,function*(){let t=wh(n,!1).get(e),r=yield new Xi(t).toPromise();return r===void 0?null:r.value})}function HT(n,e){let t=wh(n,!0).delete(e);return new Xi(t).toPromise()}var jj=800,Uj=3,Bj=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield iv(),this.db)})}_withRetries(t){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>Uj)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return ES()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=Mj._getInstance(kj()),this.receiver._subscribe("keyChanged",(t,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var t,r;if(this.activeServiceWorker=yield Pj(),!this.activeServiceWorker)return;this.sender=new rv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Oj()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let t=yield iv();return yield $T(t,fh,"1"),yield HT(t,fh),!0}catch{}return!1})}_withPendingWrite(t){return y(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>$T(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return y(this,null,function*(){let r=yield this._withRetries(i=>Lj(i,t));return this.localCache[t]=r,r})}_remove(t){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>HT(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return y(this,null,function*(){let t=yield this._withRetries(o=>{let s=wh(o,!1).getAll();return new Xi(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),jj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),bS=Bj;var D8=pS("rcb"),C8=new Ji(3e4,6e4);function $j(n,e){return e?Cr(e):(ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Oc=class extends Nc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hy(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Hy(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Hy(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Hj(n){return vS(n.auth,new Oc(n),n.bypassAuthState)}function qj(n){let{auth:e,user:t}=n;return ee(t,e,"internal-error"),bj(t,new Oc(n),n.bypassAuthState)}function zj(n){return y(this,null,function*(){let{auth:e,user:t}=n;return ee(t,e,"internal-error"),Cj(t,new Oc(n),n.bypassAuthState)})}var ov=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Hj;case"linkViaPopup":case"linkViaRedirect":return zj;case"reauthViaPopup":case"reauthViaRedirect":return qj;default:Wn(this.auth,"internal-error")}}resolve(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var b8=new Ji(2e3,1e4);var Gj="pendingRedirect",ih=new Map,sv=class n extends ov{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=ih.get(this.auth._key());if(!e){try{let r=(yield Wj(this.resolver,this.auth))?yield kr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ih.set(this.auth._key(),e)}return this.bypassAuthState||ih.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return kr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,kr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function Wj(n,e){return y(this,null,function*(){let t=Yj(e),r=Qj(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function Kj(n,e){ih.set(n._key(),e)}function Qj(n){return Cr(n._redirectPersistence)}function Yj(n){return rh(Gj,n.config.apiKey,n.name)}function Zj(n,e,t=!1){return y(this,null,function*(){if(bn(n.app))return Promise.reject(br(n));let r=eo(n),i=$j(r,e),s=yield new sv(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var Jj=10*60*1e3,av=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Xj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!TS(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Zi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Jj&&this.cachedEventUids.clear(),this.cachedEventUids.has(qT(e))}saveEventToCache(e){this.cachedEventUids.add(qT(e)),this.lastProcessedEventTime=Date.now()}};function qT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function TS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Xj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TS(n);default:return!1}}function eU(t){return y(this,arguments,function*(n,e={}){return pi(n,"GET","/v1/projects",e)})}var tU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nU=/^https?/;function rU(n){return y(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield eU(n);for(let t of e)try{if(iU(t))return}catch{}Wn(n,"unauthorized-domain")})}function iU(n){let e=zy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!nU.test(t))return!1;if(tU.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var oU=new Ji(3e4,6e4);function zT(){let n=Gn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function sU(n){return new Promise((e,t)=>{var r,i,o;function s(){zT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zT(),t(Zi(n,"network-request-failed"))},timeout:oU.get()})}if(!((i=(r=Gn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Gn().gapi)===null||o===void 0)&&o.load)s();else{let a=pS("iframefcb");return Gn()[a]=()=>{gapi.load?s():t(Zi(n,"network-request-failed"))},fS(`${dj()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw oh=null,e})}var oh=null;function aU(n){return oh=oh||sU(n),oh}var cU=new Ji(5e3,15e3),uU="__/auth/iframe",lU="emulator/auth/iframe",dU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fU(n){let e=n.config;ee(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?dv(e,lU):`https://${n.config.authDomain}/${uU}`,r={apiKey:e.apiKey,appName:n.name,v:li},i=hU.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Dc(r).slice(1)}`}function pU(n){return y(this,null,function*(){let e=yield aU(n),t=Gn().gapi;return ee(t,n,"internal-error"),e.open({where:document.body,url:fU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dU,dontclear:!0},r=>new Promise((i,o)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Zi(n,"network-request-failed"),a=Gn().setTimeout(()=>{o(s)},cU.get());function u(){Gn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var gU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mU=500,yU=600,vU="_blank",_U="http://localhost",mh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function wU(n,e,t,r=mU,i=yU){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},gU),{width:r.toString(),height:i.toString(),top:o,left:s}),l=ht().toLowerCase();t&&(a=sS(l)?vU:t),iS(l)&&(e=e||_U,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[_,A])=>`${m}${_}=${A},`,"");if(oj(l)&&a!=="_self")return IU(e||"",a),new mh(null);let p=window.open(e||"",a,h);ee(p,n,"popup-blocked");try{p.focus()}catch{}return new mh(p)}function IU(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var EU="__/auth/handler",DU="emulator/auth/handler",CU=encodeURIComponent("fac");function GT(n,e,t,r,i,o){return y(this,null,function*(){ee(n.config.authDomain,n,"auth-domain-config-required"),ee(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:li,eventId:i};if(e instanceof hh){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",yT(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof tv){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${CU}=${encodeURIComponent(u)}`:"";return`${bU(n)}?${Dc(a).slice(1)}${l}`})}function bU({config:n}){return n.emulator?dv(n,DU):`https://${n.authDomain}/${EU}`}var qy="webStorageSupport",cv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dv,this._completeRedirectFn=Zj,this._overrideRedirectResult=Kj}_openPopup(e,t,r,i){return y(this,null,function*(){var o;hi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield GT(e,t,r,zy(),i);return wU(e,s,IS())})}_openRedirect(e,t,r,i){return y(this,null,function*(){yield this._originValidation(e);let o=yield GT(e,t,r,zy(),i);return Nj(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(hi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return y(this,null,function*(){let t=yield pU(e),r=new av(e);return t.register("authEvent",i=>(ee(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qy,{type:qy},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[qy];s!==void 0&&t(!!s),Wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=rU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return dS()||oS()||gv()}},SS=cv;var WT="@firebase/auth",KT="1.7.9";var uv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function TU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SU(n){ui(new dn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ee(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hS(n)},l=new Jy(r,i,o,u);return pj(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ui(new dn("auth-internal",e=>{let t=eo(e.getProvider("auth").getImmediate());return(r=>new uv(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ct(WT,KT,TU(n)),ct(WT,KT,"esm2017")}var AU=5*60,xU=Cy("authIdTokenMaxAge")||AU,QT=null,RU=n=>e=>y(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>xU)return;let i=t?.token;QT!==i&&(QT=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Cv(n=Cs()){let e=Tc(n,"auth");if(e.isInitialized())return e.getImmediate();let t=mv(n,{popupRedirectResolver:SS,persistence:[bS,wS,Dv]}),r=Cy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=RU(o.toString());Ev(t,s,()=>s(t.currentUser)),Iv(t,a=>s(a))}}let i=Ey("auth");return i&&yv(t,`http://${i}`),t}function MU(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}uj({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Zi("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",MU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SU("Browser");var AS="auth",to=class{constructor(e){return e}},Fc=class{constructor(){return Sc(AS)}};var bv=new G("angularfire2.auth-instances");function wB(n,e){let t=Xd(AS,n,e);return t&&new to(t)}function IB(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new to(r)}}var EB={provide:Fc,deps:[[new Ct,bv]]},DB={provide:to,useFactory:wB,deps:[[new Ct,bv],Er]};function xS(n,...e){return ct("angularfire",Qi.full,"auth"),Ln([DB,EB,{provide:bv,useFactory:IB(n),multi:!0,deps:[Se,yt,Ss,Yi,[new Ct,Ts],...e]}])}var RS=ft(_v,!0);var MS=ft(Cv,!0);var NS=ft(wv,!0);var PS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},OS={};var gi,Tv;(function(){var n;function e(D,v){function w(){}w.prototype=v.prototype,D.D=v.prototype,D.prototype=new w,D.prototype.constructor=D,D.C=function(E,C,S){for(var I=Array(arguments.length-2),rr=2;rr<arguments.length;rr++)I[rr-2]=arguments[rr];return v.prototype[C].apply(E,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,w){w||(w=0);var E=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)E[C]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(C=0;16>C;++C)E[C]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=D.g[0],w=D.g[1],C=D.g[2];var S=D.g[3],I=v+(S^w&(C^S))+E[0]+3614090360&4294967295;v=w+(I<<7&4294967295|I>>>25),I=S+(C^v&(w^C))+E[1]+3905402710&4294967295,S=v+(I<<12&4294967295|I>>>20),I=C+(w^S&(v^w))+E[2]+606105819&4294967295,C=S+(I<<17&4294967295|I>>>15),I=w+(v^C&(S^v))+E[3]+3250441966&4294967295,w=C+(I<<22&4294967295|I>>>10),I=v+(S^w&(C^S))+E[4]+4118548399&4294967295,v=w+(I<<7&4294967295|I>>>25),I=S+(C^v&(w^C))+E[5]+1200080426&4294967295,S=v+(I<<12&4294967295|I>>>20),I=C+(w^S&(v^w))+E[6]+2821735955&4294967295,C=S+(I<<17&4294967295|I>>>15),I=w+(v^C&(S^v))+E[7]+4249261313&4294967295,w=C+(I<<22&4294967295|I>>>10),I=v+(S^w&(C^S))+E[8]+1770035416&4294967295,v=w+(I<<7&4294967295|I>>>25),I=S+(C^v&(w^C))+E[9]+2336552879&4294967295,S=v+(I<<12&4294967295|I>>>20),I=C+(w^S&(v^w))+E[10]+4294925233&4294967295,C=S+(I<<17&4294967295|I>>>15),I=w+(v^C&(S^v))+E[11]+2304563134&4294967295,w=C+(I<<22&4294967295|I>>>10),I=v+(S^w&(C^S))+E[12]+1804603682&4294967295,v=w+(I<<7&4294967295|I>>>25),I=S+(C^v&(w^C))+E[13]+4254626195&4294967295,S=v+(I<<12&4294967295|I>>>20),I=C+(w^S&(v^w))+E[14]+2792965006&4294967295,C=S+(I<<17&4294967295|I>>>15),I=w+(v^C&(S^v))+E[15]+1236535329&4294967295,w=C+(I<<22&4294967295|I>>>10),I=v+(C^S&(w^C))+E[1]+4129170786&4294967295,v=w+(I<<5&4294967295|I>>>27),I=S+(w^C&(v^w))+E[6]+3225465664&4294967295,S=v+(I<<9&4294967295|I>>>23),I=C+(v^w&(S^v))+E[11]+643717713&4294967295,C=S+(I<<14&4294967295|I>>>18),I=w+(S^v&(C^S))+E[0]+3921069994&4294967295,w=C+(I<<20&4294967295|I>>>12),I=v+(C^S&(w^C))+E[5]+3593408605&4294967295,v=w+(I<<5&4294967295|I>>>27),I=S+(w^C&(v^w))+E[10]+38016083&4294967295,S=v+(I<<9&4294967295|I>>>23),I=C+(v^w&(S^v))+E[15]+3634488961&4294967295,C=S+(I<<14&4294967295|I>>>18),I=w+(S^v&(C^S))+E[4]+3889429448&4294967295,w=C+(I<<20&4294967295|I>>>12),I=v+(C^S&(w^C))+E[9]+568446438&4294967295,v=w+(I<<5&4294967295|I>>>27),I=S+(w^C&(v^w))+E[14]+3275163606&4294967295,S=v+(I<<9&4294967295|I>>>23),I=C+(v^w&(S^v))+E[3]+4107603335&4294967295,C=S+(I<<14&4294967295|I>>>18),I=w+(S^v&(C^S))+E[8]+1163531501&4294967295,w=C+(I<<20&4294967295|I>>>12),I=v+(C^S&(w^C))+E[13]+2850285829&4294967295,v=w+(I<<5&4294967295|I>>>27),I=S+(w^C&(v^w))+E[2]+4243563512&4294967295,S=v+(I<<9&4294967295|I>>>23),I=C+(v^w&(S^v))+E[7]+1735328473&4294967295,C=S+(I<<14&4294967295|I>>>18),I=w+(S^v&(C^S))+E[12]+2368359562&4294967295,w=C+(I<<20&4294967295|I>>>12),I=v+(w^C^S)+E[5]+4294588738&4294967295,v=w+(I<<4&4294967295|I>>>28),I=S+(v^w^C)+E[8]+2272392833&4294967295,S=v+(I<<11&4294967295|I>>>21),I=C+(S^v^w)+E[11]+1839030562&4294967295,C=S+(I<<16&4294967295|I>>>16),I=w+(C^S^v)+E[14]+4259657740&4294967295,w=C+(I<<23&4294967295|I>>>9),I=v+(w^C^S)+E[1]+2763975236&4294967295,v=w+(I<<4&4294967295|I>>>28),I=S+(v^w^C)+E[4]+1272893353&4294967295,S=v+(I<<11&4294967295|I>>>21),I=C+(S^v^w)+E[7]+4139469664&4294967295,C=S+(I<<16&4294967295|I>>>16),I=w+(C^S^v)+E[10]+3200236656&4294967295,w=C+(I<<23&4294967295|I>>>9),I=v+(w^C^S)+E[13]+681279174&4294967295,v=w+(I<<4&4294967295|I>>>28),I=S+(v^w^C)+E[0]+3936430074&4294967295,S=v+(I<<11&4294967295|I>>>21),I=C+(S^v^w)+E[3]+3572445317&4294967295,C=S+(I<<16&4294967295|I>>>16),I=w+(C^S^v)+E[6]+76029189&4294967295,w=C+(I<<23&4294967295|I>>>9),I=v+(w^C^S)+E[9]+3654602809&4294967295,v=w+(I<<4&4294967295|I>>>28),I=S+(v^w^C)+E[12]+3873151461&4294967295,S=v+(I<<11&4294967295|I>>>21),I=C+(S^v^w)+E[15]+530742520&4294967295,C=S+(I<<16&4294967295|I>>>16),I=w+(C^S^v)+E[2]+3299628645&4294967295,w=C+(I<<23&4294967295|I>>>9),I=v+(C^(w|~S))+E[0]+4096336452&4294967295,v=w+(I<<6&4294967295|I>>>26),I=S+(w^(v|~C))+E[7]+1126891415&4294967295,S=v+(I<<10&4294967295|I>>>22),I=C+(v^(S|~w))+E[14]+2878612391&4294967295,C=S+(I<<15&4294967295|I>>>17),I=w+(S^(C|~v))+E[5]+4237533241&4294967295,w=C+(I<<21&4294967295|I>>>11),I=v+(C^(w|~S))+E[12]+1700485571&4294967295,v=w+(I<<6&4294967295|I>>>26),I=S+(w^(v|~C))+E[3]+2399980690&4294967295,S=v+(I<<10&4294967295|I>>>22),I=C+(v^(S|~w))+E[10]+4293915773&4294967295,C=S+(I<<15&4294967295|I>>>17),I=w+(S^(C|~v))+E[1]+2240044497&4294967295,w=C+(I<<21&4294967295|I>>>11),I=v+(C^(w|~S))+E[8]+1873313359&4294967295,v=w+(I<<6&4294967295|I>>>26),I=S+(w^(v|~C))+E[15]+4264355552&4294967295,S=v+(I<<10&4294967295|I>>>22),I=C+(v^(S|~w))+E[6]+2734768916&4294967295,C=S+(I<<15&4294967295|I>>>17),I=w+(S^(C|~v))+E[13]+1309151649&4294967295,w=C+(I<<21&4294967295|I>>>11),I=v+(C^(w|~S))+E[4]+4149444226&4294967295,v=w+(I<<6&4294967295|I>>>26),I=S+(w^(v|~C))+E[11]+3174756917&4294967295,S=v+(I<<10&4294967295|I>>>22),I=C+(v^(S|~w))+E[2]+718787259&4294967295,C=S+(I<<15&4294967295|I>>>17),I=w+(S^(C|~v))+E[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+C&4294967295,D.g[3]=D.g[3]+S&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var w=v-this.blockSize,E=this.B,C=this.h,S=0;S<v;){if(C==0)for(;S<=w;)i(this,D,S),S+=this.blockSize;if(typeof D=="string"){for(;S<v;)if(E[C++]=D.charCodeAt(S++),C==this.blockSize){i(this,E),C=0;break}}else for(;S<v;)if(E[C++]=D[S++],C==this.blockSize){i(this,E),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var w=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=w&255,w/=256;for(this.u(D),D=Array(16),v=w=0;4>v;++v)for(var E=0;32>E;E+=8)D[w++]=this.g[v]>>>E&255;return D};function o(D,v){var w=a;return Object.prototype.hasOwnProperty.call(w,D)?w[D]:w[D]=v(D)}function s(D,v){this.h=v;for(var w=[],E=!0,C=D.length-1;0<=C;C--){var S=D[C]|0;E&&S==v||(w[C]=S,E=!1)}this.g=w}var a={};function u(D){return-128<=D&&128>D?o(D,function(v){return new s([v|0],0>v?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return N(l(-D));for(var v=[],w=1,E=0;D>=w;E++)v[E]=D/w|0,w*=4294967296;return new s(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return N(h(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),E=p,C=0;C<D.length;C+=8){var S=Math.min(8,D.length-C),I=parseInt(D.substring(C,C+S),v);8>S?(S=l(Math.pow(v,S)),E=E.j(S).add(l(I))):(E=E.j(w),E=E.add(l(I)))}return E}var p=u(0),m=u(1),_=u(16777216);n=s.prototype,n.m=function(){if(O(this))return-N(this).m();for(var D=0,v=1,w=0;w<this.g.length;w++){var E=this.i(w);D+=(0<=E?E:4294967296+E)*v,v*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(A(this))return"0";if(O(this))return"-"+N(this).toString(D);for(var v=l(Math.pow(D,6)),w=this,E="";;){var C=fe(w,v).g;w=B(w,C.j(v));var S=((0<w.g.length?w.g[0]:w.h)>>>0).toString(D);if(w=C,A(w))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function A(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function O(D){return D.h==-1}n.l=function(D){return D=B(this,D),O(D)?-1:A(D)?0:1};function N(D){for(var v=D.g.length,w=[],E=0;E<v;E++)w[E]=~D.g[E];return new s(w,~D.h).add(m)}n.abs=function(){return O(this)?N(this):this},n.add=function(D){for(var v=Math.max(this.g.length,D.g.length),w=[],E=0,C=0;C<=v;C++){var S=E+(this.i(C)&65535)+(D.i(C)&65535),I=(S>>>16)+(this.i(C)>>>16)+(D.i(C)>>>16);E=I>>>16,S&=65535,I&=65535,w[C]=I<<16|S}return new s(w,w[w.length-1]&-2147483648?-1:0)};function B(D,v){return D.add(N(v))}n.j=function(D){if(A(this)||A(D))return p;if(O(this))return O(D)?N(this).j(N(D)):N(N(this).j(D));if(O(D))return N(this.j(N(D)));if(0>this.l(_)&&0>D.l(_))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,w=[],E=0;E<2*v;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<D.g.length;C++){var S=this.i(E)>>>16,I=this.i(E)&65535,rr=D.i(C)>>>16,ua=D.i(C)&65535;w[2*E+2*C]+=I*ua,K(w,2*E+2*C),w[2*E+2*C+1]+=S*ua,K(w,2*E+2*C+1),w[2*E+2*C+1]+=I*rr,K(w,2*E+2*C+1),w[2*E+2*C+2]+=S*rr,K(w,2*E+2*C+2)}for(E=0;E<v;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=v;E<2*v;E++)w[E]=0;return new s(w,0)};function K(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function Q(D,v){this.g=D,this.h=v}function fe(D,v){if(A(v))throw Error("division by zero");if(A(D))return new Q(p,p);if(O(D))return v=fe(N(D),v),new Q(N(v.g),N(v.h));if(O(v))return v=fe(D,N(v)),new Q(N(v.g),v.h);if(30<D.g.length){if(O(D)||O(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=v;0>=E.l(D);)w=Be(w),E=Be(E);var C=ie(w,1),S=ie(E,1);for(E=ie(E,2),w=ie(w,2);!A(E);){var I=S.add(E);0>=I.l(D)&&(C=C.add(w),S=I),E=ie(E,1),w=ie(w,1)}return v=B(D,C.j(v)),new Q(C,v)}for(C=p;0<=D.l(v);){for(w=Math.max(1,Math.floor(D.m()/v.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=l(w),I=S.j(v);O(I)||0<I.l(D);)w-=E,S=l(w),I=S.j(v);A(S)&&(S=m),C=C.add(S),D=B(D,I)}return new Q(C,D)}n.A=function(D){return fe(this,D).h},n.and=function(D){for(var v=Math.max(this.g.length,D.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)&D.i(E);return new s(w,this.h&D.h)},n.or=function(D){for(var v=Math.max(this.g.length,D.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)|D.i(E);return new s(w,this.h|D.h)},n.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)^D.i(E);return new s(w,this.h^D.h)};function Be(D){for(var v=D.g.length+1,w=[],E=0;E<v;E++)w[E]=D.i(E)<<1|D.i(E-1)>>>31;return new s(w,D.h)}function ie(D,v){var w=v>>5;v%=32;for(var E=D.g.length-w,C=[],S=0;S<E;S++)C[S]=0<v?D.i(S+w)>>>v|D.i(S+w+1)<<32-v:D.i(S+w);return new s(C,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Tv=OS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,gi=OS.Integer=s}).apply(typeof PS<"u"?PS:typeof self<"u"?self:typeof window<"u"?window:{});var Ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tr={};var Sv,CB,Rs,Av,Vc,Eh,xv,Rv,Mv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ih=="object"&&Ih];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var x=f++;return{value:d(x,c[x]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function _(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function A(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,x){for(var L=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)L[Me-2]=arguments[Me];return d.prototype[b].apply(g,L)}}function O(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function N(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,x=g.length||0;c.length=b+x;for(let L=0;L<x;L++)c[b+L]=g[L]}else c.push(g)}}class B{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function K(c){return/^[\s\xa0]*$/.test(c)}function Q(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function fe(c){return fe[" "](c),c}fe[" "]=function(){};var Be=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function ie(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let x=0;x<w.length;x++)f=w[x],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function C(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function I(){var c=Nf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class rr{constructor(){this.h=this.g=null}add(d,f){let g=ua.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ua=new B(()=>new bR,c=>c.reset());class bR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let la,da=!1,Nf=new rr,Yw=()=>{let c=a.Promise.resolve(void 0);la=()=>{c.then(TR)}};var TR=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){S(f)}var d=ua;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}da=!1};function Mr(){this.s=this.s,this.C=this.C}Mr.prototype.s=!1,Mr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Mr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _t(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}_t.prototype.h=function(){this.defaultPrevented=!0};var SR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function ha(c,d){if(_t.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Be){e:{try{fe(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:AR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ha.aa.h.call(this)}}A(ha,_t);var AR={2:"touch",3:"pen",4:"mouse"};ha.prototype.h=function(){ha.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var fa="closure_listenable_"+(1e6*Math.random()|0),xR=0;function RR(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++xR,this.da=this.fa=!1}function mu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function yu(c){this.src=c,this.g={},this.h=0}yu.prototype.add=function(c,d,f,g,b){var x=c.toString();c=this.g[x],c||(c=this.g[x]=[],this.h++);var L=Of(c,d,g,b);return-1<L?(d=c[L],f||(d.fa=!1)):(d=new RR(d,this.src,x,!!g,b),d.fa=f,c.push(d)),d};function Pf(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),x;(x=0<=b)&&Array.prototype.splice.call(g,b,1),x&&(mu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Of(c,d,f,g){for(var b=0;b<c.length;++b){var x=c[b];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==g)return b}return-1}var kf="closure_lm_"+(1e6*Math.random()|0),Ff={};function Zw(c,d,f,g,b){if(g&&g.once)return Xw(c,d,f,g,b);if(Array.isArray(d)){for(var x=0;x<d.length;x++)Zw(c,d[x],f,g,b);return null}return f=Uf(f),c&&c[fa]?c.K(d,f,l(g)?!!g.capture:!!g,b):Jw(c,d,f,!1,g,b)}function Jw(c,d,f,g,b,x){if(!d)throw Error("Invalid event type");var L=l(b)?!!b.capture:!!b,Me=Lf(c);if(Me||(c[kf]=Me=new yu(c)),f=Me.add(d,f,g,L,x),f.proxy)return f;if(g=MR(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)SR||(b=L),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(tI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function MR(){function c(f){return d.call(c.src,c.listener,f)}let d=NR;return c}function Xw(c,d,f,g,b){if(Array.isArray(d)){for(var x=0;x<d.length;x++)Xw(c,d[x],f,g,b);return null}return f=Uf(f),c&&c[fa]?c.L(d,f,l(g)?!!g.capture:!!g,b):Jw(c,d,f,!0,g,b)}function eI(c,d,f,g,b){if(Array.isArray(d))for(var x=0;x<d.length;x++)eI(c,d[x],f,g,b);else g=l(g)?!!g.capture:!!g,f=Uf(f),c&&c[fa]?(c=c.i,d=String(d).toString(),d in c.g&&(x=c.g[d],f=Of(x,f,g,b),-1<f&&(mu(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete c.g[d],c.h--)))):c&&(c=Lf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Of(d,f,g,b)),(f=-1<c?d[c]:null)&&Vf(f))}function Vf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[fa])Pf(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(tI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Lf(d))?(Pf(f,c),f.h==0&&(f.src=null,d[kf]=null)):mu(c)}}}function tI(c){return c in Ff?Ff[c]:Ff[c]="on"+c}function NR(c,d){if(c.da)c=!0;else{d=new ha(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Vf(c),c=f.call(g,d)}return c}function Lf(c){return c=c[kf],c instanceof yu?c:null}var jf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uf(c){return typeof c=="function"?c:(c[jf]||(c[jf]=function(d){return c.handleEvent(d)}),c[jf])}function wt(){Mr.call(this),this.i=new yu(this),this.M=this,this.F=null}A(wt,Mr),wt.prototype[fa]=!0,wt.prototype.removeEventListener=function(c,d,f,g){eI(this,c,d,f,g)};function Nt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new _t(d,c);else if(d instanceof _t)d.target=d.target||c;else{var b=d;d=new _t(g,c),E(d,b)}if(b=!0,f)for(var x=f.length-1;0<=x;x--){var L=d.g=f[x];b=vu(L,g,!0,d)&&b}if(L=d.g=c,b=vu(L,g,!0,d)&&b,b=vu(L,g,!1,d)&&b,f)for(x=0;x<f.length;x++)L=d.g=f[x],b=vu(L,g,!1,d)&&b}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)mu(f[g]);delete c.g[d],c.h--}}this.F=null},wt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},wt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function vu(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,x=0;x<d.length;++x){var L=d[x];if(L&&!L.da&&L.capture==f){var Me=L.listener,mt=L.ha||L.src;L.fa&&Pf(c.i,L),b=Me.call(mt,g)!==!1&&b}}return b&&!g.defaultPrevented}function nI(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function rI(c){c.g=nI(()=>{c.g=null,c.i&&(c.i=!1,rI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class PR extends Mr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:rI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pa(c){Mr.call(this),this.h=c,this.g={}}A(pa,Mr);var iI=[];function oI(c){ie(c.g,function(d,f){this.g.hasOwnProperty(f)&&Vf(d)},c),c.g={}}pa.prototype.N=function(){pa.aa.N.call(this),oI(this)},pa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bf=a.JSON.stringify,OR=a.JSON.parse,kR=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function $f(){}$f.prototype.h=null;function sI(c){return c.h||(c.h=c.i())}function aI(){}var ga={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hf(){_t.call(this,"d")}A(Hf,_t);function qf(){_t.call(this,"c")}A(qf,_t);var Ei={},cI=null;function _u(){return cI=cI||new wt}Ei.La="serverreachability";function uI(c){_t.call(this,Ei.La,c)}A(uI,_t);function ma(c){let d=_u();Nt(d,new uI(d))}Ei.STAT_EVENT="statevent";function lI(c,d){_t.call(this,Ei.STAT_EVENT,c),this.stat=d}A(lI,_t);function Pt(c){let d=_u();Nt(d,new lI(d,c))}Ei.Ma="timingevent";function dI(c,d){_t.call(this,Ei.Ma,c),this.size=d}A(dI,_t);function ya(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function va(){this.g=!0}va.prototype.xa=function(){this.g=!1};function FR(c,d,f,g,b,x){c.info(function(){if(c.g)if(x)for(var L="",Me=x.split("&"),mt=0;mt<Me.length;mt++){var De=Me[mt].split("=");if(1<De.length){var It=De[0];De=De[1];var Et=It.split("_");L=2<=Et.length&&Et[1]=="type"?L+(It+"="+De+"&"):L+(It+"=redacted&")}}else L=null;else L=x;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+L})}function VR(c,d,f,g,b,x,L){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+x+" "+L})}function vo(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+jR(c,f)+(g?" "+g:"")})}function LR(c,d){c.info(function(){return"TIMEOUT: "+d})}va.prototype.info=function(){};function jR(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var x=b[0];if(x!="noop"&&x!="stop"&&x!="close")for(var L=1;L<b.length;L++)b[L]=""}}}}return Bf(f)}catch{return d}}var wu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zf;function Iu(){}A(Iu,$f),Iu.prototype.g=function(){return new XMLHttpRequest},Iu.prototype.i=function(){return{}},zf=new Iu;function Nr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new pa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fI}function fI(){this.i=null,this.g="",this.h=!1}var pI={},Gf={};function Wf(c,d,f){c.L=1,c.v=bu(ir(d)),c.m=f,c.P=!0,gI(c,null)}function gI(c,d){c.F=Date.now(),Eu(c),c.A=ir(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),xI(f.i,"t",g),c.C=0,f=c.j.J,c.h=new fI,c.g=WI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new PR(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(iI[0]=b.toString()),b=iI);for(var x=0;x<b.length;x++){var L=Zw(f,b[x],g||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ma(),FR(c.i,c.u,c.A,c.l,c.R,c.m)}Nr.prototype.ca=function(c){c=c.target;let d=this.M;d&&or(c)==3?d.j():this.Y(c)},Nr.prototype.Y=function(c){try{if(c==this.g)e:{let Et=or(this.g);var d=this.g.Ba();let Io=this.g.Z();if(!(3>Et)&&(Et!=3||this.g&&(this.h.h||this.g.oa()||FI(this.g)))){this.J||Et!=4||d==7||(d==8||0>=Io?ma(3):ma(2)),Kf(this);var f=this.g.Z();this.X=f;t:if(mI(this)){var g=FI(this.g);c="";var b=g.length,x=or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Di(this),_a(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(x&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,VR(this.i,this.u,this.A,this.l,this.R,Et,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Me,mt=this.g;if((Me=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(Me)){var De=Me;break t}}De=null}if(f=De)vo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qf(this,f);else{this.o=!1,this.s=3,Pt(12),Di(this),_a(this);break e}}if(this.P){f=!0;let gn;for(;!this.J&&this.C<L.length;)if(gn=UR(this,L),gn==Gf){Et==4&&(this.s=4,Pt(14),f=!1),vo(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==pI){this.s=4,Pt(15),vo(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else vo(this.i,this.l,gn,null),Qf(this,gn);if(mI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||L.length!=0||this.h.h||(this.s=1,Pt(16),f=!1),this.o=this.o&&f,!f)vo(this.i,this.l,L,"[Invalid Chunked Response]"),Di(this),_a(this);else if(0<L.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),tp(It),It.M=!0,Pt(11))}}else vo(this.i,this.l,L,null),Qf(this,L);Et==4&&Di(this),this.o&&!this.J&&(Et==4?HI(this.j,this):(this.o=!1,Eu(this)))}else rM(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,Pt(12)):(this.s=0,Pt(13)),Di(this),_a(this)}}}catch{}finally{}};function mI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function UR(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Gf:(f=Number(d.substring(f,g)),isNaN(f)?pI:(g+=1,g+f>d.length?Gf:(d=d.slice(g,g+f),c.C=g+f,d)))}Nr.prototype.cancel=function(){this.J=!0,Di(this)};function Eu(c){c.S=Date.now()+c.I,yI(c,c.I)}function yI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ya(m(c.ba,c),d)}function Kf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Nr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(LR(this.i,this.A),this.L!=2&&(ma(),Pt(17)),Di(this),this.s=2,_a(this)):yI(this,this.S-c)};function _a(c){c.j.G==0||c.J||HI(c.j,c)}function Di(c){Kf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,oI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Qf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Yf(f.h,c))){if(!c.K&&Yf(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Ru(f),Au(f);else break e;ep(f),Pt(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=ya(m(f.Za,f),6e3));if(1>=wI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else bi(f,11)}else if((c.K||f.g==c)&&Ru(f),!K(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let De=b[d];if(f.T=De[0],De=De[1],f.G==2)if(De[0]=="c"){f.K=De[1],f.ia=De[2];let It=De[3];It!=null&&(f.la=It,f.j.info("VER="+f.la));let Et=De[4];Et!=null&&(f.Aa=Et,f.j.info("SVER="+f.Aa));let Io=De[5];Io!=null&&typeof Io=="number"&&0<Io&&(g=1.5*Io,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let gn=c.g;if(gn){let Nu=gn.g?gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nu){var x=g.h;x.g||Nu.indexOf("spdy")==-1&&Nu.indexOf("quic")==-1&&Nu.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Zf(x,x.h),x.h=null))}if(g.D){let np=gn.g?gn.g.getResponseHeader("X-HTTP-Session-Id"):null;np&&(g.ya=np,Pe(g.I,g.D,np))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var L=c;if(g.qa=GI(g,g.J?g.ia:null,g.W),L.K){II(g.h,L);var Me=L,mt=g.L;mt&&(Me.I=mt),Me.B&&(Kf(Me),Eu(Me)),g.g=L}else BI(g);0<f.i.length&&xu(f)}else De[0]!="stop"&&De[0]!="close"||bi(f,7);else f.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?bi(f,7):Xf(f):De[0]!="noop"&&f.l&&f.l.ta(De),f.v=0)}}ma(4)}catch{}}var BR=class{constructor(c,d){this.g=c,this.map=d}};function vI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _I(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function wI(c){return c.h?1:c.g?c.g.size:0}function Yf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Zf(c,d){c.g?c.g.add(d):c.h=d}function II(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}vI.prototype.cancel=function(){if(this.i=EI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function EI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return O(c.i)}function $R(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function HR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function DI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=HR(c),g=$R(c),b=g.length,x=0;x<b;x++)d.call(void 0,g[x],f&&f[x],c)}var CI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qR(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var x=c[f].substring(0,g);b=c[f].substring(g+1)}else x=c[f];d(x,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Ci(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ci){this.h=c.h,Du(this,c.j),this.o=c.o,this.g=c.g,Cu(this,c.s),this.l=c.l;var d=c.i,f=new Ea;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),bI(this,f),this.m=c.m}else c&&(d=String(c).match(CI))?(this.h=!1,Du(this,d[1]||"",!0),this.o=wa(d[2]||""),this.g=wa(d[3]||"",!0),Cu(this,d[4]),this.l=wa(d[5]||"",!0),bI(this,d[6]||"",!0),this.m=wa(d[7]||"")):(this.h=!1,this.i=new Ea(null,this.h))}Ci.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ia(d,TI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ia(d,TI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Ia(f,f.charAt(0)=="/"?WR:GR,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Ia(f,QR)),c.join("")};function ir(c){return new Ci(c)}function Du(c,d,f){c.j=f?wa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Cu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function bI(c,d,f){d instanceof Ea?(c.i=d,YR(c.i,c.h)):(f||(d=Ia(d,KR)),c.i=new Ea(d,c.h))}function Pe(c,d,f){c.i.set(d,f)}function bu(c){return Pe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function wa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ia(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,zR),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function zR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var TI=/[#\/\?@]/g,GR=/[#\?:]/g,WR=/[#\?]/g,KR=/[#\?@]/g,QR=/#/g;function Ea(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Pr(c){c.g||(c.g=new Map,c.h=0,c.i&&qR(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Ea.prototype,n.add=function(c,d){Pr(this),this.i=null,c=_o(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function SI(c,d){Pr(c),d=_o(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function AI(c,d){return Pr(c),d=_o(c,d),c.g.has(d)}n.forEach=function(c,d){Pr(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},n.na=function(){Pr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let x=0;x<b.length;x++)f.push(d[g])}return f},n.V=function(c){Pr(this);let d=[];if(typeof c=="string")AI(this,c)&&(d=d.concat(this.g.get(_o(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Pr(this),this.i=null,c=_o(this,c),AI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function xI(c,d,f){SI(c,d),0<f.length&&(c.i=null,c.g.set(_o(c,d),O(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let x=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var b=x;L[g]!==""&&(b+="="+encodeURIComponent(String(L[g]))),c.push(b)}}return this.i=c.join("&")};function _o(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function YR(c,d){d&&!c.j&&(Pr(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(SI(this,g),xI(this,b,f))},c)),c.j=d}function ZR(c,d){let f=new va;if(a.Image){let g=new Image;g.onload=_(Or,f,"TestLoadImage: loaded",!0,d,g),g.onerror=_(Or,f,"TestLoadImage: error",!1,d,g),g.onabort=_(Or,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=_(Or,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function JR(c,d){let f=new va,g=new AbortController,b=setTimeout(()=>{g.abort(),Or(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(x=>{clearTimeout(b),x.ok?Or(f,"TestPingServer: ok",!0,d):Or(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Or(f,"TestPingServer: error",!1,d)})}function Or(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function XR(){this.g=new kR}function eM(c,d,f){let g=f||"";try{DI(c,function(b,x){let L=b;l(b)&&(L=Bf(b)),d.push(g+x+"="+encodeURIComponent(L))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function Da(c){this.l=c.Ub||null,this.j=c.eb||!1}A(Da,$f),Da.prototype.g=function(){return new Tu(this.l,this.j)},Da.prototype.i=function(c){return function(){return c}}({});function Tu(c,d){wt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Tu,wt),n=Tu.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,ba(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ca(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ba(this)),this.g&&(this.readyState=3,ba(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;RI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function RI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ca(this):ba(this),this.readyState==3&&RI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ca(this))},n.Qa=function(c){this.g&&(this.response=c,Ca(this))},n.ga=function(){this.g&&Ca(this)};function Ca(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ba(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function ba(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Tu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function MI(c){let d="";return ie(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Jf(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=MI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Pe(c,d,f))}function $e(c){wt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A($e,wt);var tM=/^https?$/i,nM=["POST","PUT"];n=$e.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zf.g(),this.v=this.o?sI(this.o):sI(zf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(x){NI(this,x);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let x of g.keys())f.set(x,g.get(x));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(nM,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,L]of f)this.g.setRequestHeader(x,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kI(this),this.u=!0,this.g.send(c),this.u=!1}catch(x){NI(this,x)}};function NI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,PI(c),Su(c)}function PI(c){c.A||(c.A=!0,Nt(c,"complete"),Nt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Nt(this,"complete"),Nt(this,"abort"),Su(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Su(this,!0)),$e.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?OI(this):this.bb())},n.bb=function(){OI(this)};function OI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||or(c)!=4||c.Z()!=2)){if(c.u&&or(c)==4)nI(c.Ea,0,c);else if(Nt(c,"readystatechange"),or(c)==4){c.h=!1;try{let L=c.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=L===0){var b=String(c.D).match(CI)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!tM.test(b?b.toLowerCase():"")}f=g}if(f)Nt(c,"complete"),Nt(c,"success");else{c.m=6;try{var x=2<or(c)?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.Z()+"]",PI(c)}}finally{Su(c)}}}}function Su(c,d){if(c.g){kI(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Nt(c,"ready");try{f.onreadystatechange=g}catch{}}}function kI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function or(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<or(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),OR(d)}};function FI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function rM(c){let d={};c=(c.g&&2<=or(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(K(c[g]))continue;var f=C(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[b]||[];d[b]=x,x.push(f)}D(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ta(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function VI(c){this.Aa=0,this.i=[],this.j=new va,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ta("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ta("baseRetryDelayMs",5e3,c),this.cb=Ta("retryDelaySeedMs",1e4,c),this.Wa=Ta("forwardChannelMaxRetries",2,c),this.wa=Ta("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new vI(c&&c.concurrentRequestLimit),this.Da=new XR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=VI.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){Pt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=GI(this,null,this.W),xu(this)};function Xf(c){if(LI(c),c.G==3){var d=c.U++,f=ir(c.I);if(Pe(f,"SID",c.K),Pe(f,"RID",d),Pe(f,"TYPE","terminate"),Sa(c,f),d=new Nr(c,c.j,d),d.L=2,d.v=bu(ir(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=WI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Eu(d)}zI(c)}function Au(c){c.g&&(tp(c),c.g.cancel(),c.g=null)}function LI(c){Au(c),c.u&&(a.clearTimeout(c.u),c.u=null),Ru(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function xu(c){if(!_I(c.h)&&!c.s){c.s=!0;var d=c.Ga;la||Yw(),da||(la(),da=!0),Nf.add(d,c),c.B=0}}function iM(c,d){return wI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ya(m(c.Ga,c,d),qI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Nr(this,this.j,c),x=this.o;if(this.S&&(x?(x=v(x),E(x,this.S)):x=this.S),this.m!==null||this.O||(b.H=x,x=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=UI(this,b,d),f=ir(this.I),Pe(f,"RID",c),Pe(f,"CVER",22),this.D&&Pe(f,"X-HTTP-Session-Id",this.D),Sa(this,f),x&&(this.O?d="headers="+encodeURIComponent(String(MI(x)))+"&"+d:this.m&&Jf(f,this.m,x)),Zf(this.h,b),this.Ua&&Pe(f,"TYPE","init"),this.P?(Pe(f,"$req",d),Pe(f,"SID","null"),b.T=!0,Wf(b,f,null)):Wf(b,f,d),this.G=2}}else this.G==3&&(c?jI(this,c):this.i.length==0||_I(this.h)||jI(this))};function jI(c,d){var f;d?f=d.l:f=c.U++;let g=ir(c.I);Pe(g,"SID",c.K),Pe(g,"RID",f),Pe(g,"AID",c.T),Sa(c,g),c.m&&c.o&&Jf(g,c.m,c.o),f=new Nr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=UI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Zf(c.h,f),Wf(f,g,d)}function Sa(c,d){c.H&&ie(c.H,function(f,g){Pe(d,g,f)}),c.l&&DI({},function(f,g){Pe(d,g,f)})}function UI(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let x=-1;for(;;){let L=["count="+f];x==-1?0<f?(x=b[0].g,L.push("ofs="+x)):x=0:L.push("ofs="+x);let Me=!0;for(let mt=0;mt<f;mt++){let De=b[mt].g,It=b[mt].map;if(De-=x,0>De)x=Math.max(0,b[mt].g-100),Me=!1;else try{eM(It,L,"req"+De+"_")}catch{g&&g(It)}}if(Me){g=L.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function BI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;la||Yw(),da||(la(),da=!0),Nf.add(d,c),c.v=0}}function ep(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ya(m(c.Fa,c),qI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,$I(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ya(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pt(10),Au(this),$I(this))};function tp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function $I(c){c.g=new Nr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=ir(c.qa);Pe(d,"RID","rpc"),Pe(d,"SID",c.K),Pe(d,"AID",c.T),Pe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Pe(d,"TO",c.ja),Pe(d,"TYPE","xmlhttp"),Sa(c,d),c.m&&c.o&&Jf(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=bu(ir(d)),f.m=null,f.P=!0,gI(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Au(this),ep(this),Pt(19))};function Ru(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function HI(c,d){var f=null;if(c.g==d){Ru(c),tp(c),c.g=null;var g=2}else if(Yf(c.h,d))f=d.D,II(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=_u(),Nt(g,new dI(g,f)),xu(c)}else BI(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&iM(c,d)||g==2&&ep(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:bi(c,5);break;case 4:bi(c,10);break;case 3:bi(c,6);break;default:bi(c,2)}}}function qI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function bi(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let b=!g;g=new Ci(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Du(g,"https"),bu(g),b?ZR(g.toString(),f):JR(g.toString(),f)}else Pt(2);c.G=0,c.l&&c.l.sa(d),zI(c),LI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function zI(c){if(c.G=0,c.ka=[],c.l){let d=EI(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,O(c.i),c.i.length=0),c.l.ra()}}function GI(c,d,f){var g=f instanceof Ci?ir(f):new Ci(f);if(g.g!="")d&&(g.g=d+"."+g.g),Cu(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var x=new Ci(null);g&&Du(x,g),d&&(x.g=d),b&&Cu(x,b),f&&(x.l=f),g=x}return f=c.D,d=c.ya,f&&d&&Pe(g,f,d),Pe(g,"VER",c.la),Sa(c,g),g}function WI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new $e(new Da({eb:f})):new $e(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function KI(){}n=KI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Mu(){}Mu.prototype.g=function(c,d){return new Ht(c,d)};function Ht(c,d){wt.call(this),this.g=new VI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!K(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!K(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new wo(this)}A(Ht,wt),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Xf(this.g)},Ht.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Bf(c),c=f);d.i.push(new BR(d.Ya++,c)),d.G==3&&xu(d)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Xf(this.g),delete this.g,Ht.aa.N.call(this)};function QI(c){Hf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}A(QI,Hf);function YI(){qf.call(this),this.status=1}A(YI,qf);function wo(c){this.g=c}A(wo,KI),wo.prototype.ua=function(){Nt(this.g,"a")},wo.prototype.ta=function(c){Nt(this.g,new QI(c))},wo.prototype.sa=function(c){Nt(this.g,new YI)},wo.prototype.ra=function(){Nt(this.g,"b")},Mu.prototype.createWebChannel=Mu.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,Mv=Tr.createWebChannelTransport=function(){return new Mu},Rv=Tr.getStatEventTarget=function(){return _u()},xv=Tr.Event=Ei,Eh=Tr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wu.NO_ERROR=0,wu.TIMEOUT=8,wu.HTTP_ERROR=6,Vc=Tr.ErrorCode=wu,hI.COMPLETE="complete",Av=Tr.EventType=hI,aI.EventType=ga,ga.OPEN="a",ga.CLOSE="b",ga.ERROR="c",ga.MESSAGE="d",wt.prototype.listen=wt.prototype.K,Rs=Tr.WebChannel=aI,CB=Tr.FetchXmlHttpFactory=Da,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,Sv=Tr.XhrIo=$e}).apply(typeof Ih<"u"?Ih:typeof self<"u"?self:typeof window<"u"?window:{});var kS="@firebase/firestore";var pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");var Zs="10.14.0";var oo=new ai("@firebase/firestore");function Lc(){return oo.logLevel}function H(n,...e){if(oo.logLevel<=ye.DEBUG){let t=e.map(pw);oo.debug(`Firestore (${Zs}): ${n}`,...t)}}function Ar(n,...e){if(oo.logLevel<=ye.ERROR){let t=e.map(pw);oo.error(`Firestore (${Zs}): ${n}`,...t)}}function Vs(n,...e){if(oo.logLevel<=ye.WARN){let t=e.map(pw);oo.warn(`Firestore (${Zs}): ${n}`,...t)}}function pw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function te(n="Unexpected state"){let e=`FIRESTORE (${Zs}) INTERNAL ASSERTION FAILED: `+n;throw Ar(e),new Error(e)}function Re(n,e){n||te()}function re(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends Yt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Tn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Sh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Fv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pt.UNAUTHENTICATED))}shutdown(){}},Vv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Lv=class{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Re(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Tn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Tn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>y(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Tn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string"),new Sh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string"),new pt(e)}},jv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Uv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new jv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Bv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},$v=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Re(this.o===void 0);let r=o=>{o.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,H("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Re(typeof t.token=="string"),this.R=t.token,new Bv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function bB(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Ah=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=bB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function Ce(n,e){return n<e?-1:n>e?1:0}function Ls(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var vt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new $(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var se=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new vt(0,0))}static max(){return new n(new vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var xh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&te(),r===void 0?r=e.length-t:r>e.length-t&&te(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ue=class n extends xh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},TB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Jt=class n extends xh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return TB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new $(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new $(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var W=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ue.fromString(e))}static fromName(e){return new n(Ue.fromString(e).popFirst(5))}static empty(){return new n(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ue.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ue(e.slice()))}};var Hv=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Hv.UNKNOWN_ID=-1;function SB(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new vt(t+1,0):new vt(t,r));return new so(i,W.empty(),e)}function AB(n){return new so(n.readTime,n.key,-1)}var so=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(se.min(),W.empty(),-1)}static max(){return new n(se.max(),W.empty(),-1)}};function xB(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=W.comparator(n.documentKey,e.documentKey),t!==0?t:Ce(n.largestBatchId,e.largestBatchId))}var RB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",qv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function iu(n){return y(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==RB)throw n;H("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function MB(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ou(n){return n.name==="IndexedDbTransactionError"}var mA=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function cf(n){return n==null}function qc(n){return n===0&&1/n==-1/0}function NB(n){return typeof n=="number"&&Number.isInteger(n)&&!qc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var PB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],IK=[...PB,"documentOverlays"],OB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kB=OB,FB=[...kB,"indexConfiguration","indexState","indexEntries"];var EK=[...FB,"globals"];function FS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var We=class n{constructor(e,t){this.comparator=e,this.root=t||Qn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Os(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Os(this.root,e,this.comparator,!1)}getReverseIterator(){return new Os(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Os(this.root,e,this.comparator,!0)}},Os=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Qn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();let e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}};Qn.EMPTY=null,Qn.RED=!0,Qn.BLACK=!1;Qn.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Qn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var xt=class n{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Rh(this.data.getIterator())}getIteratorFrom(e){return new Rh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Rh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var hn=class n{constructor(e){this.fields=e,e.sort(Jt.comparator)}static empty(){return new n([])}unionWith(e){let t=new xt(Jt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ls(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Mh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Mt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Mh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Mt.EMPTY_BYTE_STRING=new Mt("");var VB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(n){if(Re(!!n),typeof n=="string"){let e=0,t=VB.exec(n);if(Re(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(n.seconds),nanos:Fe(n.nanos)}}function Fe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function yi(n){return typeof n=="string"?Mt.fromBase64String(n):Mt.fromUint8Array(n)}function gw(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function mw(n){let e=n.mapValue.fields.__previous_value__;return gw(e)?mw(e):e}function zc(n){let e=xr(n.mapValue.fields.__local_write_time__.timestampValue);return new vt(e.seconds,e.nanos)}var zv=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Nh=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Dh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ao(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gw(n)?4:_A(n)?9007199254740991:vA(n)?10:11:te()}function Jn(n,e){if(n===e)return!0;let t=ao(n);if(t!==ao(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zc(n).isEqual(zc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=xr(i.timestampValue),a=xr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return yi(i.bytesValue).isEqual(yi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Fe(i.geoPointValue.latitude)===Fe(o.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Fe(i.integerValue)===Fe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Fe(i.doubleValue),a=Fe(o.doubleValue);return s===a?qc(s)===qc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Ls(n.arrayValue.values||[],e.arrayValue.values||[],Jn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(FS(s)!==FS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Jn(s[u],a[u])))return!1;return!0}(n,e);default:return te()}}function Gc(n,e){return(n.values||[]).find(t=>Jn(t,e))!==void 0}function js(n,e){if(n===e)return 0;let t=ao(n),r=ao(e);if(t!==r)return Ce(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ce(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Fe(o.integerValue||o.doubleValue),u=Fe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return VS(n.timestampValue,e.timestampValue);case 4:return VS(zc(n),zc(e));case 5:return Ce(n.stringValue,e.stringValue);case 6:return function(o,s){let a=yi(o),u=yi(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=Ce(a[l],u[l]);if(h!==0)return h}return Ce(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Ce(Fe(o.latitude),Fe(s.latitude));return a!==0?a:Ce(Fe(o.longitude),Fe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return LS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},_=(a=p.value)===null||a===void 0?void 0:a.arrayValue,A=(u=m.value)===null||u===void 0?void 0:u.arrayValue,O=Ce(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((h=A?.values)===null||h===void 0?void 0:h.length)||0);return O!==0?O:LS(_,A)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Dh.mapValue&&s===Dh.mapValue)return 0;if(o===Dh.mapValue)return 1;if(s===Dh.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=Ce(u[p],h[p]);if(m!==0)return m;let _=js(a[u[p]],l[h[p]]);if(_!==0)return _}return Ce(u.length,h.length)}(n.mapValue,e.mapValue);default:throw te()}}function VS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ce(n,e);let t=xr(n),r=xr(e),i=Ce(t.seconds,r.seconds);return i!==0?i:Ce(t.nanos,r.nanos)}function LS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=js(t[i],r[i]);if(o)return o}return Ce(t.length,r.length)}function Us(n){return Gv(n)}function Gv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=xr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return yi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return W.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Gv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Gv(t.fields[s])}`;return i+"}"}(n.mapValue):te()}function jS(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Wv(n){return!!n&&"integerValue"in n}function yw(n){return!!n&&"arrayValue"in n}function US(n){return!!n&&"nullValue"in n}function BS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bh(n){return!!n&&"mapValue"in n}function vA(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Uc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return fo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Uc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Uc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _A(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Zt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!bh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uc(t)}setAll(e){let t=Jt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Uc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());bh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];bh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){fo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Uc(this.value))}};function wA(n){let e=[];return fo(n.fields,(t,r)=>{let i=new Jt([t]);if(bh(r)){let o=wA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new hn(e)}var Sn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,se.min(),se.min(),se.min(),Zt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,se.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,se.min(),se.min(),Zt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,se.min(),se.min(),Zt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Bs=class{constructor(e,t){this.position=e,this.inclusive=t}};function $S(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=W.comparator(W.fromName(s.referenceValue),t.key):r=js(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function HS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jn(n.position[t],e.position[t]))return!1;return!0}var $s=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function LB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ph=class{},it=class n extends Ph{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Qv(e,t,r):t==="array-contains"?new Jv(e,r):t==="in"?new Xv(e,r):t==="not-in"?new e_(e,r):t==="array-contains-any"?new t_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Yv(e,r):new Zv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(js(t,this.value)):t!==null&&ao(this.value)===ao(t)&&this.matchesComparison(js(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},An=class n extends Ph{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return IA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function IA(n){return n.op==="and"}function EA(n){return jB(n)&&IA(n)}function jB(n){for(let e of n.filters)if(e instanceof An)return!1;return!0}function Kv(n){if(n instanceof it)return n.field.canonicalString()+n.op.toString()+Us(n.value);if(EA(n))return n.filters.map(e=>Kv(e)).join(",");{let e=n.filters.map(t=>Kv(t)).join(",");return`${n.op}(${e})`}}function DA(n,e){return n instanceof it?function(r,i){return i instanceof it&&r.op===i.op&&r.field.isEqual(i.field)&&Jn(r.value,i.value)}(n,e):n instanceof An?function(r,i){return i instanceof An&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&DA(s,i.filters[a]),!0):!1}(n,e):void te()}function CA(n){return n instanceof it?function(t){return`${t.field.canonicalString()} ${t.op} ${Us(t.value)}`}(n):n instanceof An?function(t){return t.op.toString()+" {"+t.getFilters().map(CA).join(" ,")+"}"}(n):"Filter"}var Qv=class extends it{constructor(e,t,r){super(e,t,r),this.key=W.fromName(r.referenceValue)}matches(e){let t=W.comparator(e.key,this.key);return this.matchesComparison(t)}},Yv=class extends it{constructor(e,t){super(e,"in",t),this.keys=bA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Zv=class extends it{constructor(e,t){super(e,"not-in",t),this.keys=bA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function bA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>W.fromName(r.referenceValue))}var Jv=class extends it{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return yw(t)&&Gc(t.arrayValue,this.value)}},Xv=class extends it{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Gc(this.value.arrayValue,t)}},e_=class extends it{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Gc(this.value.arrayValue,t)}},t_=class extends it{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!yw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Gc(this.value.arrayValue,r))}};var n_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function qS(n,e=null,t=[],r=[],i=null,o=null,s=null){return new n_(n,e,t,r,i,o,s)}function vw(n){let e=re(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Kv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),cf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Us(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Us(r)).join(",")),e.ue=t}return e.ue}function _w(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!LB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!DA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HS(n.startAt,e.startAt)&&HS(n.endAt,e.endAt)}function r_(n){return W.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var co=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function UB(n,e,t,r,i,o,s,a){return new co(n,e,t,r,i,o,s,a)}function uf(n){return new co(n)}function zS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function TA(n){return n.collectionGroup!==null}function Bc(n){let e=re(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new xt(Jt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new $s(o,r))}),t.has(Jt.keyField().canonicalString())||e.ce.push(new $s(Jt.keyField(),r))}return e.ce}function Yn(n){let e=re(n);return e.le||(e.le=BB(e,Bc(n))),e.le}function BB(n,e){if(n.limitType==="F")return qS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new $s(i.field,o)});let t=n.endAt?new Bs(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Bs(n.startAt.position,n.startAt.inclusive):null;return qS(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function i_(n,e){let t=n.filters.concat([e]);return new co(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function o_(n,e,t){return new co(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lf(n,e){return _w(Yn(n),Yn(e))&&n.limitType===e.limitType}function SA(n){return`${vw(Yn(n))}|lt:${n.limitType}`}function Ms(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>CA(i)).join(", ")}]`),cf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Us(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Us(i)).join(",")),`Target(${r})`}(Yn(n))}; limitType=${n.limitType})`}function df(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):W.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Bc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=$S(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Bc(r),i)||r.endAt&&!function(s,a,u){let l=$S(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Bc(r),i))}(n,e)}function $B(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AA(n){return(e,t)=>{let r=!1;for(let i of Bc(n)){let o=HB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function HB(n,e,t){let r=n.field.isKeyField()?W.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?js(u,l):te()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}var vi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return yA(this.inner)}size(){return this.innerSize}};var qB=new We(W.comparator);function Rr(){return qB}var xA=new We(W.comparator);function jc(...n){let e=xA;for(let t of n)e=e.insert(t.key,t);return e}function RA(n){let e=xA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function no(){return $c()}function MA(){return $c()}function $c(){return new vi(n=>n.toString(),(n,e)=>n.isEqual(e))}var zB=new We(W.comparator),GB=new xt(W.comparator);function ve(...n){let e=GB;for(let t of n)e=e.add(t);return e}var WB=new xt(Ce);function KB(){return WB}function ww(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qc(e)?"-0":e}}function NA(n){return{integerValue:""+n}}function QB(n,e){return NB(e)?NA(e):ww(n,e)}var Hs=class{constructor(){this._=void 0}};function YB(n,e,t){return n instanceof qs?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&gw(o)&&(o=mw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof _i?OA(n,e):n instanceof uo?kA(n,e):function(i,o){let s=PA(i,o),a=GS(s)+GS(i.Pe);return Wv(s)&&Wv(i.Pe)?NA(a):ww(i.serializer,a)}(n,e)}function ZB(n,e,t){return n instanceof _i?OA(n,e):n instanceof uo?kA(n,e):t}function PA(n,e){return n instanceof zs?function(r){return Wv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var qs=class extends Hs{},_i=class extends Hs{constructor(e){super(),this.elements=e}};function OA(n,e){let t=FA(e);for(let r of n.elements)t.some(i=>Jn(i,r))||t.push(r);return{arrayValue:{values:t}}}var uo=class extends Hs{constructor(e){super(),this.elements=e}};function kA(n,e){let t=FA(e);for(let r of n.elements)t=t.filter(i=>!Jn(i,r));return{arrayValue:{values:t}}}var zs=class extends Hs{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function GS(n){return Fe(n.integerValue||n.doubleValue)}function FA(n){return yw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var s_=class{constructor(e,t){this.field=e,this.transform=t}};function JB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof _i&&i instanceof _i||r instanceof uo&&i instanceof uo?Ls(r.elements,i.elements,Jn):r instanceof zs&&i instanceof zs?Jn(r.Pe,i.Pe):r instanceof qs&&i instanceof qs}(n.transform,e.transform)}var a_=class{constructor(e,t){this.version=e,this.transformResults=t}},Sr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Th(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Gs=class{};function VA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Oh(n.key,Sr.none()):new lo(n.key,n.data,Sr.none());{let t=n.data,r=Zt.empty(),i=new xt(Jt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Xn(n.key,r,new hn(i.toArray()),Sr.none())}}function XB(n,e,t){n instanceof lo?function(i,o,s){let a=i.value.clone(),u=KS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Xn?function(i,o,s){if(!Th(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=KS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(LA(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Hc(n,e,t,r){return n instanceof lo?function(o,s,a,u){if(!Th(o.precondition,s))return a;let l=o.value.clone(),h=QS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Xn?function(o,s,a,u){if(!Th(o.precondition,s))return a;let l=QS(o.fieldTransforms,u,s),h=s.data;return h.setAll(LA(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Th(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function e$(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=PA(r.transform,i||null);o!=null&&(t===null&&(t=Zt.empty()),t.set(r.field,o))}return t||null}function WS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ls(r,i,(o,s)=>JB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var lo=class extends Gs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Xn=class extends Gs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function LA(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function KS(n,e,t){let r=new Map;Re(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,ZB(s,a,t[i]))}return r}function QS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,YB(o,s,e))}return r}var Oh=class extends Gs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},c_=class extends Gs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var u_=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&XB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Hc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Hc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=MA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=VA(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ve())}isEqual(e){return this.batchId===e.batchId&&Ls(this.mutations,e.mutations,(t,r)=>WS(t,r))&&Ls(this.baseMutations,e.baseMutations,(t,r)=>WS(t,r))}},l_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Re(e.mutations.length===r.length);let i=function(){return zB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var d_=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var h_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var nt,Ie;function t$(n){switch(n){default:return te();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function jA(n){if(n===void 0)return Ar("GRPC error has no .code"),P.UNKNOWN;switch(n){case nt.OK:return P.OK;case nt.CANCELLED:return P.CANCELLED;case nt.UNKNOWN:return P.UNKNOWN;case nt.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case nt.INTERNAL:return P.INTERNAL;case nt.UNAVAILABLE:return P.UNAVAILABLE;case nt.UNAUTHENTICATED:return P.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case nt.NOT_FOUND:return P.NOT_FOUND;case nt.ALREADY_EXISTS:return P.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return P.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case nt.ABORTED:return P.ABORTED;case nt.OUT_OF_RANGE:return P.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return P.UNIMPLEMENTED;case nt.DATA_LOSS:return P.DATA_LOSS;default:return te()}}(Ie=nt||(nt={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";var YS=null;function n$(){return new TextEncoder}var r$=new gi([4294967295,4294967295],0);function ZS(n){let e=n$().encode(n),t=new Tv;return t.update(e),new Uint8Array(t.digest())}function JS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new gi([t,r],0),new gi([i,o],0)]}var f_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ro(`Invalid padding: ${t}`);if(r<0)throw new ro(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ro(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ro(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=gi.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(gi.fromNumber(r)));return i.compare(r$)===1&&(i=new gi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=ZS(e),[r,i]=JS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=ZS(e),[r,i]=JS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ro=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var kh=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Wc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(se.min(),i,new We(Ce),Rr(),ve())}},Wc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ve(),ve(),ve())}};var ks=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Fh=class{constructor(e,t){this.targetId=e,this.me=t}},Vh=class{constructor(e,t,r=Mt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Lh=class{constructor(){this.fe=0,this.ge=eA(),this.pe=Mt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ve(),t=ve(),r=ve();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:te()}}),new Wc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=eA()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Re(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},p_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Rr(),this.qe=XS(),this.Qe=new We(Ce)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:te()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(r_(o))if(r===0){let s=new W(o.path);this.Ue(t,s,Sn.newNoDocument(s,se.min()))}else Re(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}YS?.et(function(h,p,m,_,A){var O,N,B,K,Q,fe;let Be={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},ie=p.unchangedNames;return ie&&(Be.bloomFilter={applied:A===0,hashCount:(O=ie?.hashCount)!==null&&O!==void 0?O:0,bitmapLength:(K=(B=(N=ie?.bits)===null||N===void 0?void 0:N.bitmap)===null||B===void 0?void 0:B.length)!==null&&K!==void 0?K:0,padding:(fe=(Q=ie?.bits)===null||Q===void 0?void 0:Q.padding)!==null&&fe!==void 0?fe:0,mightContain:D=>{var v;return(v=_?.mightContain(D))!==null&&v!==void 0&&v}}),Be}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=yi(r).toUint8Array()}catch(u){if(u instanceof Mh)return Vs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new f_(s,i,o)}catch(u){return Vs(u instanceof ro?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&r_(a.target)){let u=new W(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,Sn.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ve();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new kh(e,t,this.Qe,this.ke,r);return this.ke=Rr(),this.qe=XS(),this.Qe=new We(Ce),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Lh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new xt(Ce),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||H("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Lh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function XS(){return new We(W.comparator)}function eA(){return new We(W.comparator)}var i$={asc:"ASCENDING",desc:"DESCENDING"},o$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},s$={and:"AND",or:"OR"},g_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function m_(n,e){return n.useProto3Json||cf(e)?e:{value:e}}function jh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function a$(n,e){return jh(n,e.toTimestamp())}function Zn(n){return Re(!!n),se.fromTimestamp(function(t){let r=xr(t);return new vt(r.seconds,r.nanos)}(n))}function Iw(n,e){return y_(n,e).canonicalString()}function y_(n,e){let t=function(i){return new Ue(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function BA(n){let e=Ue.fromString(n);return Re(GA(e)),e}function v_(n,e){return Iw(n.databaseId,e.path)}function Nv(n,e){let t=BA(e);if(t.get(1)!==n.databaseId.projectId)throw new $(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new W(HA(t))}function $A(n,e){return Iw(n.databaseId,e)}function c$(n){let e=BA(n);return e.length===4?Ue.emptyPath():HA(e)}function __(n){return new Ue(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function HA(n){return Re(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function tA(n,e,t){return{name:v_(n,e),fields:t.value.mapValue.fields}}function u$(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Re(h===void 0||typeof h=="string"),Mt.fromBase64String(h||"")):(Re(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Mt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?P.UNKNOWN:jA(l.code);return new $(h,l.message||"")}(s);t=new Vh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Nv(n,r.document.name),o=Zn(r.document.updateTime),s=r.document.createTime?Zn(r.document.createTime):se.min(),a=new Zt({mapValue:{fields:r.document.fields}}),u=Sn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ks(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Nv(n,r.document),o=r.readTime?Zn(r.readTime):se.min(),s=Sn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ks([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Nv(n,r.document),o=r.removedTargetIds||[];t=new ks([],o,i,null)}else{if(!("filter"in e))return te();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new h_(i,o),a=r.targetId;t=new Fh(a,s)}}return t}function l$(n,e){let t;if(e instanceof lo)t={update:tA(n,e.key,e.value)};else if(e instanceof Oh)t={delete:v_(n,e.key)};else if(e instanceof Xn)t={update:tA(n,e.key,e.data),updateMask:_$(e.fieldMask)};else{if(!(e instanceof c_))return te();t={verify:v_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof qs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof _i)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof uo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof zs)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw te()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:a$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:te()}(n,e.precondition)),t}function d$(n,e){return n&&n.length>0?(Re(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Zn(i.updateTime):Zn(o);return s.isEqual(se.min())&&(s=Zn(o)),new a_(s,i.transformResults||[])}(t,e))):[]}function h$(n,e){return{documents:[$A(n,e.path)]}}function f$(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=$A(n,i);let o=function(l){if(l.length!==0)return zA(An.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Ns(m.field),direction:m$(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=m_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function p$(n){let e=c$(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Re(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=qA(p);return m instanceof An&&EA(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(A){return new $s(Ps(A.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,cf(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,_=p.values||[];return new Bs(_,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,_=p.values||[];return new Bs(_,m)}(t.endAt)),UB(e,i,s,o,a,"F",u,l)}function g$(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function qA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ps(t.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ps(t.unaryFilter.field);return it.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ps(t.unaryFilter.field);return it.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ps(t.unaryFilter.field);return it.create(s,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(n):n.fieldFilter!==void 0?function(t){return it.create(Ps(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return An.create(t.compositeFilter.filters.map(r=>qA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te()}}(t.compositeFilter.op))}(n):te()}function m$(n){return i$[n]}function y$(n){return o$[n]}function v$(n){return s$[n]}function Ns(n){return{fieldPath:n.canonicalString()}}function Ps(n){return Jt.fromServerFormat(n.fieldPath)}function zA(n){return n instanceof it?function(t){if(t.op==="=="){if(BS(t.value))return{unaryFilter:{field:Ns(t.field),op:"IS_NAN"}};if(US(t.value))return{unaryFilter:{field:Ns(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(BS(t.value))return{unaryFilter:{field:Ns(t.field),op:"IS_NOT_NAN"}};if(US(t.value))return{unaryFilter:{field:Ns(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ns(t.field),op:y$(t.op),value:t.value}}}(n):n instanceof An?function(t){let r=t.getFilters().map(i=>zA(i));return r.length===1?r[0]:{compositeFilter:{op:v$(t.op),filters:r}}}(n):te()}function _$(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function GA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Kc=class n{constructor(e,t,r,i,o=se.min(),s=se.min(),a=Mt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var w_=class{constructor(e){this.ct=e}};function w$(n){let e=p$({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?o_(e,e.limit,"L"):e}var Uh=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Fe(e.integerValue));else if("doubleValue"in e){let r=Fe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),qc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=xr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(yi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?_A(e)?this.dt(t,Number.MAX_SAFE_INTEGER):vA(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):te()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Fe(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),W.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Uh.vt=new Uh;var I_=class{constructor(){this.un=new E_}addToCollectionParentIndex(e,t){return this.un.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(so.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(so.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},E_=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new xt(Ue.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xt(Ue.comparator)).toArray()}};var CK=new Uint8Array(0);var Kn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Kn.DEFAULT_COLLECTION_PERCENTILE=10,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kn.DEFAULT=new Kn(41943040,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kn.DISABLED=new Kn(-1,0,0);var Qc=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var D_=class{constructor(){this.changes=new vi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var C_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var b_=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Hc(r.mutation,i,hn.empty(),vt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ve()){let i=no();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=jc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=no();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ve()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Rr(),s=$c(),a=function(){return $c()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Xn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Hc(h.mutation,l,h.mutation.getFieldMask(),vt.now())):s.set(l.key,hn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new C_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=$c(),i=new We((s,a)=>s-a),o=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||hn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ve()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=MA();h.forEach(m=>{if(!o.has(m)){let _=VA(t.get(m),r.get(m));_!==null&&p.set(m,_),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return W.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):TA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):V.resolve(no()),a=-1,u=o;return s.next(l=>V.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?V.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ve())).next(h=>({batchId:a,changes:RA(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new W(t)).next(r=>{let i=jc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=jc();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,u=>{let l=function(p,m){return new co(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Sn.newInvalidDocument(h)))});let a=jc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Hc(h.mutation,l,hn.empty(),vt.now()),df(t,l)&&(a=a.insert(u,l))}),a})}};var T_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return V.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Zn(i.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:w$(i.bundledQuery),readTime:Zn(i.readTime)}}(t)),V.resolve()}};var S_=class{constructor(){this.overlays=new We(W.comparator),this.Ir=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let r=no();return V.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),V.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){let i=no(),o=t.length+1,s=new W(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new We((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=no(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=no(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return V.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new d_(t,r));let o=this.Ir.get(t);o===void 0&&(o=ve(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var A_=class{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}};var Yc=class{constructor(){this.Tr=new xt(rt.Er),this.dr=new xt(rt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new rt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new rt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new W(new Ue([])),r=new rt(t,e),i=new rt(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new W(new Ue([])),r=new rt(t,e),i=new rt(t,e+1),o=ve();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new rt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},rt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return W.comparator(e.key,t.key)||Ce(e.wr,t.wr)}static Ar(e,t){return Ce(e.wr,t.wr)||W.comparator(e.key,t.key)}};var x_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new xt(rt.Er)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new u_(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new rt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,t){return V.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new rt(t,0),i=new rt(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xt(Ce);return t.forEach(i=>{let o=new rt(i,0),s=new rt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),V.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;W.isDocumentKey(o)||(o=o.child(""));let s=new rt(new W(o),0),a=new xt(Ce);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),V.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Re(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return V.forEach(t.mutations,i=>{let o=new rt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new rt(t,0),i=this.br.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var R_=class{constructor(e){this.Mr=e,this.docs=function(){return new We(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():Sn.newInvalidDocument(t))}getEntries(e,t){let r=Rr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Sn.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Rr(),s=t.path,a=new W(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||xB(AB(h),r)<=0||(i.has(h.key)||df(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,t,r,i){te()}Or(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new M_(this)}getSize(e){return V.resolve(this.size)}},M_=class extends D_{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var N_=class{constructor(e){this.persistence=e,this.Nr=new vi(t=>vw(t),_w),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Yc,this.targetCount=0,this.kr=Qc.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),V.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Qc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.Kn(t),V.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),V.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this.Br.containsKey(t))}};var P_=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new mA(0),this.Kr=!1,this.Kr=!0,this.$r=new A_,this.referenceDelegate=e(this),this.Ur=new N_(this),this.indexManager=new I_,this.remoteDocumentCache=function(i){return new R_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new w_(t),this.Gr=new T_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new S_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new x_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){H("MemoryPersistence","Starting transaction:",e);let i=new O_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return V.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},O_=class extends qv{constructor(e){super(),this.currentSequenceNumber=e}},k_=class n{constructor(e){this.persistence=e,this.Jr=new Yc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),V.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,r=>{let i=W.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,se.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return V.or([()=>V.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var F_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ve(),i=ve();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var V_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var L_=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return gT()?8:MB(ht())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new V_;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Lc()<=ye.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Ms(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(Lc()<=ye.DEBUG&&H("QueryEngine","Query:",Ms(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Lc()<=ye.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Ms(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yn(t))):V.resolve())}Yi(e,t){if(zS(t))return V.resolve(null);let r=Yn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=o_(t,null,"F"),r=Yn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ve(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,o_(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return zS(t)||i.isEqual(se.min())?V.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?V.resolve(null):(Lc()<=ye.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ms(t)),this.rs(e,s,t,SB(i,-1)).next(a=>a))})}ts(e,t){let r=new xt(AA(e));return t.forEach((i,o)=>{df(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Lc()<=ye.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Ms(t)),this.Ji.getDocumentsMatchingQuery(e,t,so.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var j_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new We(Ce),this._s=new vi(o=>vw(o),_w),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new b_(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function I$(n,e,t,r){return new j_(n,e,t,r)}function WA(n,e){return y(this,null,function*(){let t=re(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ve();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function E$(n,e){let t=re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),_=V.resolve();return m.forEach(A=>{_=_.next(()=>h.getEntry(u,A)).next(O=>{let N=l.docVersions.get(A);Re(N!==null),O.version.compareTo(N)<0&&(p.applyToRemoteDocument(O,l),O.isValidDocument()&&(O.setReadTime(l.commitVersion),h.addEntry(O)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ve();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function KA(n){let e=re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function D$(n,e){let t=re(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let _=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(Mt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(O,N,B){return O.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(m,_,h)&&a.push(t.Ur.updateTargetData(o,_))});let u=Rr(),l=ve();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(C$(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(se.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function C$(n,e,t){let r=ve(),i=ve();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Rr();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(se.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function b$(n,e){let t=re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function T$(n,e){let t=re(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Kc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function U_(n,e,t){return y(this,null,function*(){let r=re(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ou(s))throw s;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function nA(n,e,t){let r=re(n),i=se.min(),o=ve();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=re(u),m=p._s.get(h);return m!==void 0?V.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,Yn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:se.min(),t?o:ve())).next(a=>(S$(r,$B(e),a),{documents:a,Ts:o})))}function S$(n,e,t){let r=n.us.get(e)||se.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}var Bh=class{constructor(){this.activeTargetIds=KB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var B_=class{constructor(){this.so=new Bh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Bh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var $_=class{_o(e){}shutdown(){}};var $h=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ch=null;function Pv(){return Ch===null?Ch=function(){return 268435456+Math.round(2147483648*Math.random())}():Ch++,"0x"+Ch.toString(16)}var A$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var H_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var At="WebChannelConnection",q_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Pv(),u=this.xo(t,r.toUriEncodedString());H("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(H("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Vs("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zs}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=A$[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Pv();return new Promise((s,a)=>{let u=new Sv;u.setWithCredentials(!0),u.listenOnce(Av.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Vc.NO_ERROR:let h=u.getResponseJson();H(At,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Vc.TIMEOUT:H(At,`RPC '${e}' ${o} timed out`),a(new $(P.DEADLINE_EXCEEDED,"Request time out"));break;case Vc.HTTP_ERROR:let p=u.getStatus();if(H(At,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let _=m?.error;if(_&&_.status&&_.message){let A=function(N){let B=N.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(B)>=0?B:P.UNKNOWN}(_.status);a(new $(A,_.message))}else a(new $(P.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new $(P.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{H(At,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);H(At,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Pv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Mv(),a=Rv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");H(At,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,_=!1,A=new H_({Io:N=>{_?H(At,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(H(At,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),H(At,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),O=(N,B,K)=>{N.listen(B,Q=>{try{K(Q)}catch(fe){setTimeout(()=>{throw fe},0)}})};return O(p,Rs.EventType.OPEN,()=>{_||(H(At,`RPC '${e}' stream ${i} transport opened.`),A.yo())}),O(p,Rs.EventType.CLOSE,()=>{_||(_=!0,H(At,`RPC '${e}' stream ${i} transport closed`),A.So())}),O(p,Rs.EventType.ERROR,N=>{_||(_=!0,Vs(At,`RPC '${e}' stream ${i} transport errored:`,N),A.So(new $(P.UNAVAILABLE,"The operation could not be completed")))}),O(p,Rs.EventType.MESSAGE,N=>{var B;if(!_){let K=N.data[0];Re(!!K);let Q=K,fe=Q.error||((B=Q[0])===null||B===void 0?void 0:B.error);if(fe){H(At,`RPC '${e}' stream ${i} received error:`,fe);let Be=fe.status,ie=function(w){let E=nt[w];if(E!==void 0)return jA(E)}(Be),D=fe.message;ie===void 0&&(ie=P.INTERNAL,D="Unknown error status: "+Be+" with message "+fe.message),_=!0,A.So(new $(ie,D)),p.close()}else H(At,`RPC '${e}' stream ${i} received:`,K),A.bo(K)}}),O(a,xv.STAT_EVENT,N=>{N.stat===Eh.PROXY?H(At,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Eh.NOPROXY&&H(At,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}};function Ov(){return typeof document<"u"?document:null}function hf(n){return new g_(n,!0)}var Hh=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var qh=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Hh(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return y(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return y(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return y(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(Ar(t.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new $(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>y(this,null,function*(){this.state=0,this.start()}))}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},z_=class extends qh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=u$(this.serializer,e),r=function(o){if(!("targetChange"in o))return se.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?se.min():s.readTime?Zn(s.readTime):se.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=__(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=r_(u)?{documents:h$(o,u)}:{query:f$(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=UA(o,s.resumeToken);let l=m_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(se.min())>0){a.readTime=jh(o,s.snapshotVersion.toTimestamp());let l=m_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=g$(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=__(this.serializer),t.removeTarget=e,this.a_(t)}},G_=class extends qh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Re(!!e.streamToken),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=d$(e.writeResults,e.commitTime),r=Zn(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=__(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>l$(this.serializer,r))};this.a_(t)}};var W_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new $(P.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,y_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(P.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,y_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(P.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},K_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ar(t),this.D_=!1):H("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Q_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>y(this,null,function*(){po(this)&&(H("RemoteStore","Restarting streams for network reachability change."),yield function(u){return y(this,null,function*(){let l=re(u);l.L_.add(4),yield su(l),l.q_.set("Unknown"),l.L_.delete(4),yield ff(l)})}(this))}))}),this.q_=new K_(r,i)}};function ff(n){return y(this,null,function*(){if(po(n))for(let e of n.B_)yield e(!0)})}function su(n){return y(this,null,function*(){for(let e of n.B_)yield e(!1)})}function QA(n,e){let t=re(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),bw(t)?Cw(t):Js(t).r_()&&Dw(t,e))}function Ew(n,e){let t=re(n),r=Js(t);t.N_.delete(e),r.r_()&&YA(t,e),t.N_.size===0&&(r.r_()?r.o_():po(t)&&t.q_.set("Unknown"))}function Dw(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Js(n).A_(e)}function YA(n,e){n.Q_.xe(e),Js(n).R_(e)}function Cw(n){n.Q_=new p_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Js(n).start(),n.q_.v_()}function bw(n){return po(n)&&!Js(n).n_()&&n.N_.size>0}function po(n){return re(n).L_.size===0}function ZA(n){n.Q_=void 0}function x$(n){return y(this,null,function*(){n.q_.set("Online")})}function R$(n){return y(this,null,function*(){n.N_.forEach((e,t)=>{Dw(n,e)})})}function M$(n,e){return y(this,null,function*(){ZA(n),bw(n)?(n.q_.M_(e),Cw(n)):n.q_.set("Unknown")})}function N$(n,e,t){return y(this,null,function*(){if(n.q_.set("Online"),e instanceof Vh&&e.state===2&&e.cause)try{yield function(i,o){return y(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield zh(n,r)}else if(e instanceof ks?n.Q_.Ke(e):e instanceof Fh?n.Q_.He(e):n.Q_.We(e),!t.isEqual(se.min()))try{let r=yield KA(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(Mt.EMPTY_BYTE_STRING,h.snapshotVersion)),YA(o,u);let p=new Kc(h.target,u,l,h.sequenceNumber);Dw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){H("RemoteStore","Failed to raise snapshot:",r),yield zh(n,r)}})}function zh(n,e,t){return y(this,null,function*(){if(!ou(e))throw e;n.L_.add(1),yield su(n),n.q_.set("Offline"),t||(t=()=>KA(n.localStore)),n.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){H("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield ff(n)}))})}function JA(n,e){return e().catch(t=>zh(n,t,e))}function pf(n){return y(this,null,function*(){let e=re(n),t=wi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;P$(e);)try{let i=yield b$(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,O$(e,i)}catch(i){yield zh(e,i)}XA(e)&&ex(e)})}function P$(n){return po(n)&&n.O_.length<10}function O$(n,e){n.O_.push(e);let t=wi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function XA(n){return po(n)&&!wi(n).n_()&&n.O_.length>0}function ex(n){wi(n).start()}function k$(n){return y(this,null,function*(){wi(n).p_()})}function F$(n){return y(this,null,function*(){let e=wi(n);for(let t of n.O_)e.m_(t.mutations)})}function V$(n,e,t){return y(this,null,function*(){let r=n.O_.shift(),i=l_.from(r,e,t);yield JA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield pf(n)})}function L$(n,e){return y(this,null,function*(){e&&wi(n).V_&&(yield function(r,i){return y(this,null,function*(){if(function(s){return t$(s)&&s!==P.ABORTED}(i.code)){let o=r.O_.shift();wi(r).s_(),yield JA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield pf(r)}})}(n,e)),XA(n)&&ex(n)})}function rA(n,e){return y(this,null,function*(){let t=re(n);t.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");let r=po(t);t.L_.add(3),yield su(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield ff(t)})}function j$(n,e){return y(this,null,function*(){let t=re(n);e?(t.L_.delete(2),yield ff(t)):e||(t.L_.add(2),yield su(t),t.q_.set("Unknown"))})}function Js(n){return n.K_||(n.K_=function(t,r,i){let o=re(t);return o.w_(),new z_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:x$.bind(null,n),Ro:R$.bind(null,n),mo:M$.bind(null,n),d_:N$.bind(null,n)}),n.B_.push(e=>y(this,null,function*(){e?(n.K_.s_(),bw(n)?Cw(n):n.q_.set("Unknown")):(yield n.K_.stop(),ZA(n))}))),n.K_}function wi(n){return n.U_||(n.U_=function(t,r,i){let o=re(t);return o.w_(),new G_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:k$.bind(null,n),mo:L$.bind(null,n),f_:F$.bind(null,n),g_:V$.bind(null,n)}),n.B_.push(e=>y(this,null,function*(){e?(n.U_.s_(),yield pf(n)):(yield n.U_.stop(),n.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Y_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Tn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Tw(n,e){if(Ar("AsyncQueue",`${e}: ${n}`),ou(n))return new $(P.UNAVAILABLE,`${e}: ${n}`);throw n}var Gh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||W.comparator(t.key,r.key):(t,r)=>W.comparator(t.key,r.key),this.keyedMap=jc(),this.sortedSet=new We(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Wh=class{constructor(){this.W_=new We(W.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ws=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Gh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Z_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},J_=class{constructor(){this.queries=iA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=re(t),o=i.queries;i.queries=iA(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new $(P.ABORTED,"Firestore shutting down"))}};function iA(){return new vi(n=>SA(n),lf)}function Sw(n,e){return y(this,null,function*(){let t=re(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Z_,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Tw(s,`Initialization of query '${Ms(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&xw(t)})}function Aw(n,e){return y(this,null,function*(){let t=re(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function U$(n,e){let t=re(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&xw(t)}function B$(n,e,t){let r=re(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function xw(n){n.Y_.forEach(e=>{e.next()})}var X_,oA;(oA=X_||(X_={})).ea="default",oA.Cache="cache";var Zc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ws(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ws.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==X_.Cache}};var Kh=class{constructor(e){this.key=e}},Qh=class{constructor(e){this.key=e}},ew=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ve(),this.mutatedKeys=ve(),this.Aa=AA(e),this.Ra=new Gh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Wh,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),_=df(this.query,p)?p:null,A=!!m&&this.mutatedKeys.has(m.key),O=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),N=!1;m&&_?m.data.isEqual(_.data)?A!==O&&(r.track({type:3,doc:_}),N=!0):this.ga(m,_)||(r.track({type:2,doc:_}),N=!0,(u&&this.Aa(_,u)>0||l&&this.Aa(_,l)<0)&&(a=!0)):!m&&_?(r.track({type:0,doc:_}),N=!0):m&&!_&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(a=!0)),N&&(_?(s=s.add(_),o=O?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(_,A){let O=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return O(_)-O(A)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new Ws(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Wh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ve(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Qh(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Kh(r))}),t}ba(e){this.Ta=e.Ts,this.da=ve();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ws.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},tw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},nw=class{constructor(e){this.key=e,this.va=!1}},rw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new vi(a=>SA(a),lf),this.Ma=new Map,this.xa=new Set,this.Oa=new We(W.comparator),this.Na=new Map,this.La=new Yc,this.Ba={},this.ka=new Map,this.qa=Qc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function $$(n,e,t=!0){return y(this,null,function*(){let r=sx(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield tx(r,e,t,!0),i})}function H$(n,e){return y(this,null,function*(){let t=sx(n);yield tx(t,e,!0,!1)})}function tx(n,e,t,r){return y(this,null,function*(){let i=yield T$(n.localStore,Yn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield q$(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&QA(n.remoteStore,i),a})}function q$(n,e,t,r,i){return y(this,null,function*(){n.Ka=(p,m,_)=>function(O,N,B,K){return y(this,null,function*(){let Q=N.view.ma(B);Q.ns&&(Q=yield nA(O.localStore,N.query,!1).then(({documents:D})=>N.view.ma(D,Q)));let fe=K&&K.targetChanges.get(N.targetId),Be=K&&K.targetMismatches.get(N.targetId)!=null,ie=N.view.applyChanges(Q,O.isPrimaryClient,fe,Be);return aA(O,N.targetId,ie.wa),ie.snapshot})}(n,p,m,_);let o=yield nA(n.localStore,e,!0),s=new ew(e,o.Ts),a=s.ma(o.documents),u=Wc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);aA(n,t,l.wa);let h=new tw(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function z$(n,e,t){return y(this,null,function*(){let r=re(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!lf(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield U_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ew(r.remoteStore,i.targetId),iw(r,i.targetId)}).catch(iu))):(iw(r,i.targetId),yield U_(r.localStore,i.targetId,!0))})}function G$(n,e){return y(this,null,function*(){let t=re(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ew(t.remoteStore,r.targetId))})}function W$(n,e,t){return y(this,null,function*(){let r=eH(n);try{let i=yield function(s,a){let u=re(s),l=vt.now(),h=a.reduce((_,A)=>_.add(A.key),ve()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let A=Rr(),O=ve();return u.cs.getEntries(_,h).next(N=>{A=N,A.forEach((B,K)=>{K.isValidDocument()||(O=O.add(B))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,A)).next(N=>{p=N;let B=[];for(let K of a){let Q=e$(K,p.get(K.key).overlayedDocument);Q!=null&&B.push(new Xn(K.key,Q,wA(Q.value.mapValue),Sr.exists(!0)))}return u.mutationQueue.addMutationBatch(_,l,B,a)}).next(N=>{m=N;let B=N.applyToLocalDocumentSet(p,O);return u.documentOverlayCache.saveOverlays(_,N.batchId,B)})}).then(()=>({batchId:m.batchId,changes:RA(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new We(Ce)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield au(r,i.changes),yield pf(r.remoteStore)}catch(i){let o=Tw(i,"Failed to persist write");t.reject(o)}})}function nx(n,e){return y(this,null,function*(){let t=re(n);try{let r=yield D$(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Re(s.va):i.removedDocuments.size>0&&(Re(s.va),s.va=!1))}),yield au(t,r,e)}catch(r){yield iu(r)}})}function sA(n,e,t){let r=re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=re(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&xw(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function K$(n,e,t){return y(this,null,function*(){let r=re(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new We(W.comparator);s=s.insert(o,Sn.newNoDocument(o,se.min()));let a=ve().add(o),u=new kh(se.min(),new Map,new We(Ce),s,a);yield nx(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),Rw(r)}else yield U_(r.localStore,e,!1).then(()=>iw(r,e,t)).catch(iu)})}function Q$(n,e){return y(this,null,function*(){let t=re(n),r=e.batch.batchId;try{let i=yield E$(t.localStore,e);ix(t,r,null),rx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield au(t,i)}catch(i){yield iu(i)}})}function Y$(n,e,t){return y(this,null,function*(){let r=re(n);try{let i=yield function(s,a){let u=re(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Re(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);ix(r,e,t),rx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield au(r,i)}catch(i){yield iu(i)}})}function rx(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function ix(n,e,t){let r=re(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function iw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||ox(n,r)})}function ox(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Ew(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Rw(n))}function aA(n,e,t){for(let r of t)r instanceof Kh?(n.La.addReference(r.key,e),Z$(n,r)):r instanceof Qh?(H("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||ox(n,r.key)):te()}function Z$(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(H("SyncEngine","New document in limbo: "+t),n.xa.add(r),Rw(n))}function Rw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new W(Ue.fromString(e)),r=n.qa.next();n.Na.set(r,new nw(t)),n.Oa=n.Oa.insert(t,r),QA(n.remoteStore,new Kc(Yn(uf(t.path)),r,"TargetPurposeLimboResolution",mA.oe))}}function au(n,e,t){return y(this,null,function*(){let r=re(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=F_.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return y(this,null,function*(){let h=re(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>V.forEach(l,m=>V.forEach(m.$i,_=>h.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>V.forEach(m.Ui,_=>h.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!ou(p))throw p;H("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let _=h.os.get(m),A=_.snapshotVersion,O=_.withLastLimboFreeSnapshotVersion(A);h.os=h.os.insert(m,O)}}})}(r.localStore,o))})}function J$(n,e){return y(this,null,function*(){let t=re(n);if(!t.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());let r=yield WA(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new $(P.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield au(t,r.hs)}})}function X$(n,e){let t=re(n),r=t.Na.get(e);if(r&&r.va)return ve().add(r.key);{let i=ve(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function sx(n){let e=re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=X$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K$.bind(null,e),e.Ca.d_=U$.bind(null,e.eventManager),e.Ca.$a=B$.bind(null,e.eventManager),e}function eH(n){let e=re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Q$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Y$.bind(null,e),e}var cA=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return y(this,null,function*(){this.serializer=hf(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return I$(this.persistence,new L_,t.initialUser,this.serializer)}Ga(t){return new P_(k_.Zr,this.serializer)}Wa(t){return new B_}terminate(){return y(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var tH=(()=>{class n{initialize(t,r){return y(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>sA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=J$.bind(null,this.syncEngine),yield j$(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new J_}()}createDatastore(t){let r=hf(t.databaseInfo.databaseId),i=function(s){return new q_(s)}(t.databaseInfo);return function(s,a,u,l){return new W_(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new Q_(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>sA(this.syncEngine,r,0),function(){return $h.D()?new $h:new $_}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new rw(o,s,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return y(this,null,function*(){var t,r;yield function(o){return y(this,null,function*(){let s=re(o);H("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield su(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Jc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ar("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ow=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=pt.UNAUTHENTICATED,this.clientId=Ah.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>y(this,null,function*(){H("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(H("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Tn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Tw(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function kv(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield WA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function uA(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield nH(n);H("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>rA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>rA(e.remoteStore,i)),n._onlineComponents=e})}function nH(n){return y(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{yield kv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Vs("Error using user provided cache. Falling back to memory cache: "+t),yield kv(n,new cA)}}else H("FirestoreClient","Using default OfflineComponentProvider"),yield kv(n,new cA);return n._offlineComponents})}function ax(n){return y(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),yield uA(n,n._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),yield uA(n,new tH))),n._onlineComponents})}function rH(n){return ax(n).then(e=>e.syncEngine)}function Yh(n){return y(this,null,function*(){let e=yield ax(n),t=e.eventManager;return t.onListen=$$.bind(null,e.syncEngine),t.onUnlisten=z$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=H$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=G$.bind(null,e.syncEngine),t})}function iH(n,e,t={}){let r=new Tn;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,u,l){let h=new Jc({next:m=>{h.Za(),s.enqueueAndForget(()=>Aw(o,p));let _=m.docs.has(a);!_&&m.fromCache?l.reject(new $(P.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?l.reject(new $(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Zc(uf(a.path),h,{includeMetadataChanges:!0,_a:!0});return Sw(o,p)}(yield Yh(n),n.asyncQueue,e,t,r)})),r.promise}function oH(n,e,t={}){let r=new Tn;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,u,l){let h=new Jc({next:m=>{h.Za(),s.enqueueAndForget(()=>Aw(o,p)),m.fromCache&&u.source==="server"?l.reject(new $(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Zc(a,h,{includeMetadataChanges:!0,_a:!0});return Sw(o,p)}(yield Yh(n),n.asyncQueue,e,t,r)})),r.promise}function cx(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var lA=new Map;function ux(n,e,t){if(!t)throw new $(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sH(n,e,t,r){if(e===!0&&r===!0)throw new $(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dA(n){if(!W.isDocumentKey(n))throw new $(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hA(n){if(W.isDocumentKey(n))throw new $(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":te()}function Xt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=gf(n);throw new $(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Zh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new $(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new $(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new $(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ks=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Fv;switch(r.type){case"firstParty":return new Uv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return y(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=lA.get(t);r&&(H("ComponentProvider","Removing Datastore"),lA.delete(t),r.terminate())}(this),Promise.resolve()}};function lx(n,e,t,r={}){var i;let o=(n=Xt(n,Ks))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Vs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=pt.MOCK_USER;else{a=uT(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new $(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new pt(l)}n._authCredentials=new Vv(new Sh(a,u))}}var ho=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Rt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},mi=class n extends ho{constructor(e,t,r){super(e,t,uf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new W(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function dx(n,e,...t){if(n=Ze(n),ux("collection","path",e),n instanceof Ks){let r=Ue.fromString(e,...t);return hA(r),new mi(n,null,r)}{if(!(n instanceof Rt||n instanceof mi))throw new $(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ue.fromString(e,...t));return hA(r),new mi(n.firestore,null,r)}}function Mw(n,e,...t){if(n=Ze(n),arguments.length===1&&(e=Ah.newId()),ux("doc","path",e),n instanceof Ks){let r=Ue.fromString(e,...t);return dA(r),new Rt(n,null,new W(r))}{if(!(n instanceof Rt||n instanceof mi))throw new $(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ue.fromString(e,...t));return dA(r),new Rt(n.firestore,n instanceof mi?n.converter:null,new W(r))}}var Jh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Hh(this,"async_queue_retry"),this.Vu=()=>{let r=Ov();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Ov();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Ov();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Tn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return y(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ou(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ar("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Y_.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&te()}verifyOperationInProgress(){}wu(){return y(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function fA(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var er=class extends Ks{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Jh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return y(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Jh(e),this._firestoreClient=void 0,yield e}})}};function hx(n,e){let t=typeof n=="object"?n:Cs(),r=typeof n=="string"?n:e||"(default)",i=Tc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=cT("firestore");o&&lx(i,...o)}return i}function mf(n){if(n._terminated)throw new $(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||aH(n),n._firestoreClient}function aH(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new zv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,cx(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new ow(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var Xc=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Mt.fromBase64String(e))}catch(t){throw new $(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Qs=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new $(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ys=class{constructor(e){this._methodName=e}};var eu=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}};var tu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var cH=/^__.*__$/,sw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Xn(e,this.data,this.fieldMask,t,this.fieldTransforms):new lo(e,this.data,t,this.fieldTransforms)}},Xh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function fx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}var ef=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return nf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(fx(this.Cu)&&cH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},aw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||hf(e)}Qu(e,t,r,i=!1){return new ef({Cu:e,methodName:t,qu:r,path:Jt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function yf(n){let e=n._freezeSettings(),t=hf(n._databaseId);return new aw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function px(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);Nw("Data must be an object, but it was:",s,r);let a=gx(r,s),u,l;if(o.merge)u=new hn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=uw(e,p,t);if(!s.contains(m))throw new $(P.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);yx(h,m)||h.push(m)}u=new hn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new sw(new Zt(a),u,l)}var tf=class n extends Ys{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function uH(n,e,t){return new ef({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var cw=class n extends Ys{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=uH(this,e,!0),r=this.Ku.map(o=>Xs(o,t)),i=new _i(r);return new s_(e.path,i)}isEqual(e){return e instanceof n&&si(this.Ku,e.Ku)}};function lH(n,e,t,r){let i=n.Qu(1,e,t);Nw("Data must be an object, but it was:",i,r);let o=[],s=Zt.empty();fo(r,(u,l)=>{let h=Pw(e,u,t);l=Ze(l);let p=i.Nu(h);if(l instanceof tf)o.push(h);else{let m=Xs(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new hn(o);return new Xh(s,a,i.fieldTransforms)}function dH(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[uw(e,r,t)],u=[i];if(o.length%2!=0)throw new $(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(uw(e,o[m])),u.push(o[m+1]);let l=[],h=Zt.empty();for(let m=a.length-1;m>=0;--m)if(!yx(l,a[m])){let _=a[m],A=u[m];A=Ze(A);let O=s.Nu(_);if(A instanceof tf)l.push(_);else{let N=Xs(A,O);N!=null&&(l.push(_),h.set(_,N))}}let p=new hn(l);return new Xh(h,p,s.fieldTransforms)}function hH(n,e,t,r=!1){return Xs(t,n.Qu(r?4:3,e))}function Xs(n,e){if(mx(n=Ze(n)))return Nw("Unsupported field value:",e,n),gx(n,e);if(n instanceof Ys)return function(r,i){if(!fx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Xs(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=vt.fromDate(r);return{timestampValue:jh(i.serializer,o)}}if(r instanceof vt){let o=new vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jh(i.serializer,o)}}if(r instanceof eu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xc)return{bytesValue:UA(i.serializer,r._byteString)};if(r instanceof Rt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Iw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof tu)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return ww(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${gf(r)}`)}(n,e)}function gx(n,e){let t={};return yA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fo(n,(r,i)=>{let o=Xs(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function mx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vt||n instanceof eu||n instanceof Xc||n instanceof Rt||n instanceof Ys||n instanceof tu)}function Nw(n,e,t){if(!mx(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=gf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function uw(n,e,t){if((e=Ze(e))instanceof Qs)return e._internalPath;if(typeof e=="string")return Pw(n,e);throw nf("Field path arguments must be of type string or ",n,!1,void 0,t)}var fH=new RegExp("[~\\*/\\[\\]]");function Pw(n,e,t){if(e.search(fH)>=0)throw nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qs(...e.split("."))._internalPath}catch{throw nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function nf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new $(P.INVALID_ARGUMENT,a+n+u)}function yx(n,e){return n.some(t=>t.isEqual(e))}var rf=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new lw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Ow("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},lw=class extends rf{data(){return super.data()}};function Ow(n,e){return typeof e=="string"?Pw(n,e):e instanceof Qs?e._internalPath:e._delegate._internalPath}function vx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new $(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var nu=class{},dw=class extends nu{};function _x(n,e,...t){let r=[];e instanceof nu&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof hw).length,a=o.filter(u=>u instanceof of).length;if(s>1||s>0&&a>0)throw new $(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var of=class n extends dw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Ix(e._query,t),new ho(e.firestore,e.converter,i_(e._query,t))}_parse(e){let t=yf(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){gA(p,h);let _=[];for(let A of p)_.push(pA(u,o,A));m={arrayValue:{values:_}}}else m=pA(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||gA(p,h),m=hH(a,s,p,h==="in"||h==="not-in");return it.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function wx(n,e,t){let r=e,i=Ow("where",n);return of._create(i,r,t)}var hw=class n extends nu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:An.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)Ix(s,u),s=i_(s,u)}(e._query,t),new ho(e.firestore,e.converter,i_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function pA(n,e,t){if(typeof(t=Ze(t))=="string"){if(t==="")throw new $(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TA(e)&&t.indexOf("/")!==-1)throw new $(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ue.fromString(t));if(!W.isDocumentKey(r))throw new $(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jS(n,new W(r))}if(t instanceof Rt)return jS(n,t._key);throw new $(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gf(t)}.`)}function gA(n,e){if(!Array.isArray(n)||n.length===0)throw new $(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ix(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new $(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var fw=class{convertValue(e,t="none"){switch(ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return fo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Fe(s.doubleValue));return new tu(o)}convertGeoPoint(e){return new eu(Fe(e.latitude),Fe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=mw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(zc(e));default:return null}}convertTimestamp(e){let t=xr(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ue.fromString(e);Re(GA(r));let i=new Nh(r.get(1),r.get(3)),o=new W(r.popFirst(5));return i.isEqual(t)||Ar(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Ex(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var io=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},sf=class extends rf{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Fs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Ow("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Fs=class extends sf{data(e={}){return super.data(e)}},af=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new io(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Fs(this._firestore,this._userDataWriter,r.key,r,new io(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Fs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new io(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Fs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new io(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:pH(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function pH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}function Dx(n){n=Xt(n,Rt);let e=Xt(n.firestore,er);return iH(mf(e),n._key).then(t=>Ax(e,n,t))}var ru=class extends fw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,t)}};function Cx(n){n=Xt(n,ho);let e=Xt(n.firestore,er),t=mf(e),r=new ru(e);return vx(n._query),oH(t,n._query).then(i=>new af(e,r,n,i))}function bx(n,e,t){n=Xt(n,Rt);let r=Xt(n.firestore,er),i=Ex(n.converter,e,t);return Fw(r,[px(yf(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Sr.none())])}function Tx(n,e,t,...r){n=Xt(n,Rt);let i=Xt(n.firestore,er),o=yf(i),s;return s=typeof(e=Ze(e))=="string"||e instanceof Qs?dH(o,"updateDoc",n._key,e,t,r):lH(o,"updateDoc",n._key,e),Fw(i,[s.toMutation(n._key,Sr.exists(!0))])}function Sx(n,e){let t=Xt(n.firestore,er),r=Mw(n),i=Ex(n.converter,e);return Fw(t,[px(yf(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Sr.exists(!1))]).then(()=>r)}function kw(n,...e){var t,r,i;n=Ze(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||fA(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(fA(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Rt)l=Xt(n.firestore,er),h=uf(n._key.path),u={next:p=>{e[s]&&e[s](Ax(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Xt(n,ho);l=Xt(p.firestore,er),h=p._query;let m=new ru(l);u={next:_=>{e[s]&&e[s](new af(l,m,p,_))},error:e[s+1],complete:e[s+2]},vx(n._query)}return function(m,_,A,O){let N=new Jc(O),B=new Zc(_,N,A);return m.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Sw(yield Yh(m),B)})),()=>{N.Za(),m.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Aw(yield Yh(m),B)}))}}(mf(l),h,a,u)}function Fw(n,e){return function(r,i){let o=new Tn;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return W$(yield rH(r),i,o)})),o.promise}(mf(n),e)}function Ax(n,e,t){let r=t.docs.get(e._key),i=new ru(n);return new sf(n,i,e._key,r,new io(t.hasPendingWrites,t.fromCache),e.converter)}function xx(...n){return new cw("arrayUnion",n)}(function(e,t=!0){(function(i){Zs=i})(li),ui(new dn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new er(new Lv(r.getProvider("auth-internal")),new $v(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new $(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nh(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ct(kS,"4.7.3",e),ct(kS,"4.7.3","esm2017")})();var vf=function(){return vf=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},vf.apply(this,arguments)};var yH={includeMetadataChanges:!1};function Rx(n,e){return e===void 0&&(e=yH),new ge(function(t){var r=kw(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Mx(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:vf(vf({},r),(t={},t[e.idField]=n.id,t))}function Nx(n){return Rx(n,{includeMetadataChanges:!0}).pipe(Z(function(e){return e.docs}))}function Px(n,e){return e===void 0&&(e={}),Nx(n).pipe(Z(function(t){return t.map(function(r){return Mx(r,e)})}))}var en=class{constructor(e){return e}},Ox="firestore",Vw=class{constructor(){return Sc(Ox)}};var Lw=new G("angularfire2.firestore-instances");function vH(n,e){let t=Xd(Ox,n,e);return t&&new en(t)}function _H(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new en(r)}}var wH={provide:Vw,deps:[[new Ct,Lw]]},IH={provide:en,useFactory:vH,deps:[[new Ct,Lw],Er]};function kx(n,...e){return ct("angularfire",Qi.full,"fst"),Ln([IH,wH,{provide:Lw,useFactory:_H(n),multi:!0,deps:[Se,yt,Ss,Yi,[new Ct,Fc],[new Ct,Ts],...e]}])}var jw=ft(Px,!0);var Fx=ft(Sx,!0);var Vx=ft(xx,!0);var ea=ft(dx,!0);var jt=ft(Mw,!0);var fn=ft(Dx,!0);var Lx=ft(Cx,!0);var jx=ft(hx,!0);var Ux=ft(_x,!0);var ta=ft(bx,!0);var Uw=ft(Tx,!0);var Bx=ft(wx,!0);var _f=(()=>{class n{constructor(){this.firestore=k(en)}sendNotification(t,r,i){return y(this,null,function*(){let o=jt(this.firestore,"users",t),s={type:r,message:i,read:!1,createdAt:new Date().toISOString()};yield Uw(o,{notifications:Vx(s)})})}markAsRead(t,r){return y(this,null,function*(){let i=jt(this.firestore,"users",t),o=yield fn(i);if(o.exists()){let s=o.data().notifications;s&&s[r]&&(s[r].read=!0,yield Uw(i,{notifications:s}))}})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ii=(()=>{class n{constructor(t){this.notificationService=t,this.firestore=k(en)}loadTour(t){return y(this,null,function*(){let r=yield fn(jt(this.firestore,"tours",t));if(r.exists()){let i=r.data();return ue(j({},i),{id:r.id})}else console.error("Tour not found")})}getTours(){let t=ea(this.firestore,"tours");return jw(t,{idField:"id"}).pipe(Ot(i=>{if(i.length===0)return Y([]);let o=i.map(s=>fn(jt(this.firestore,"users",s.createdBy)).then(a=>ue(j({},s),{createdByName:a.exists()?a.data()?.firstName:"Unknown"})));return Ri(o)}))}addTour(t){return y(this,null,function*(){return Fx(ea(this.firestore,"tours"),t)})}applyForTour(t,r,i){return y(this,null,function*(){if(!t||!i)throw new Error("Invalid tourId or userId");let o=jt(this.firestore,`tours/${t}/applications/${i}`);if(!(yield fn(o)).exists())yield ta(o,{status:"pending",appliedAt:new Date().toISOString()}),yield this.notificationService.sendNotification(r,"application","User applied for a tour!");else throw new Error("You have already applied for this tour.")})}updateApplicationStatus(t,r,i){return y(this,null,function*(){if(!t||!r)throw new Error("Invalid tourId or userId");let o=jt(this.firestore,`tours/${t}/applications/${r}`);if((yield fn(o)).exists())yield ta(o,{status:i,updatedAt:new Date().toISOString()}),yield this.notificationService.sendNotification(r,"statusUpdate",`Your application for the tour has been ${i}`);else throw new Error("User has not applied for this tour.")})}hasUserApplied(t,r){return y(this,null,function*(){let i=jt(this.firestore,`tours/${t}/applications/${r}`);return(yield fn(i)).exists()})}loadParticipants(t){let r=ea(this.firestore,`tours/${t}/applications`);return jw(r,{idField:"id"}).pipe(Z(i=>i.map(o=>ue(j({},o),{id:o.id}))))}static{this.\u0275fac=function(r){return new(r||n)(J(_f))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var EH=n=>["/tour-details",n];function DH(n,e){if(n&1&&(R(0,"li",3)(1,"h2",4),M(2),T(),R(3,"p")(4,"strong"),M(5,"Date:"),T(),M(6),T(),R(7,"p")(8,"strong"),M(9,"Difficulty:"),T(),M(10),T(),R(11,"p")(12,"strong"),M(13,"Participants:"),T(),M(14),T(),R(15,"p")(16,"strong"),M(17,"Organized By:"),T(),M(18),T(),R(19,"button",5),M(20," View Details "),T()()),n&2){let t=e.$implicit;F(2),at(t.name),F(4),St(" ",t.date,""),F(4),St(" ",t.difficulty,""),F(4),St(" ",t.participants,""),F(4),St(" ",t.createdByName,""),F(),X("routerLink",ss(6,EH,t.id))}}var Hx=(()=>{class n{constructor(t){this.tourService=t,this.tours$=this.tourService.getTours()}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||n)(U(Ii))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-home"]],standalone:!0,features:[Ge],decls:6,vars:3,consts:[[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],["class","mb-4 p-4 border rounded shadow",4,"ngFor","ngForOf"],[1,"mb-4","p-4","border","rounded","shadow"],[1,"text-xl","font-semibold"],[1,"mt-2","py-2","px-4","bg-blue-600","text-white","rounded","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"routerLink"]],template:function(r,i){r&1&&(R(0,"div",0)(1,"h1",1),M(2,"Hiking Tours"),T(),R(3,"ul"),_e(4,DH,21,8,"li",2),Ka(5,"async"),T()()),r&2&&(F(4),X("ngForOf",Qa(5,1,i.tours$)))},dependencies:[Dn,cs,Cd,qn]})}}return n})();var Xx=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(U(Bn),U(In))}}static{this.\u0275dir=Ve({type:n})}}return n})(),Af=(()=>{class n extends Xx{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=fr(n)))(i||n)}})()}static{this.\u0275dir=Ve({type:n,features:[an]})}}return n})(),pu=new G("");var CH={provide:pu,useExisting:Vn(()=>pn),multi:!0};function bH(){let n=mr()?mr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var TH=new G(""),pn=(()=>{class n extends Xx{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!bH())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(U(Bn),U(In),U(TH,8))}}static{this.\u0275dir=Ve({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Te("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[ei([CH]),an]})}}return n})();function SH(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var $w=new G(""),eR=new G("");function AH(n){return SH(n.value)?{required:!0}:null}function qx(n){return null}function tR(n){return n!=null}function nR(n){return ti(n)?ke(n):n}function rR(n){let e={};return n.forEach(t=>{e=t!=null?j(j({},e),t):e}),Object.keys(e).length===0?null:e}function iR(n,e){return e.map(t=>t(n))}function xH(n){return!n.validate}function oR(n){return n.map(e=>xH(e)?e:t=>e.validate(t))}function RH(n){if(!n)return null;let e=n.filter(tR);return e.length==0?null:function(t){return rR(iR(t,e))}}function Hw(n){return n!=null?RH(oR(n)):null}function MH(n){if(!n)return null;let e=n.filter(tR);return e.length==0?null:function(t){let r=iR(t,e).map(nR);return Dp(r).pipe(Z(rR))}}function qw(n){return n!=null?MH(oR(n)):null}function zx(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function NH(n){return n._rawValidators}function PH(n){return n._rawAsyncValidators}function Bw(n){return n?Array.isArray(n)?n:[n]:[]}function Ef(n,e){return Array.isArray(n)?n.includes(e):n===e}function Gx(n,e){let t=Bw(e);return Bw(n).forEach(i=>{Ef(t,i)||t.push(i)}),t}function Wx(n,e){return Bw(e).filter(t=>!Ef(n,t))}var Df=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Hw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=qw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ia=class extends Df{get formDirective(){return null}get path(){return null}},fu=class extends Df{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Cf=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},OH={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},SQ=ue(j({},OH),{"[class.ng-submitted]":"isSubmitted"}),tr=(()=>{class n extends Cf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(U(fu,2))}}static{this.\u0275dir=Ve({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&pd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[an]})}}return n})(),sa=(()=>{class n extends Cf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(U(ia,10))}}static{this.\u0275dir=Ve({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&pd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[an]})}}return n})();var cu="VALID",If="INVALID",na="PENDING",uu="DISABLED",oa=class{},bf=class extends oa{constructor(e,t){super(),this.value=e,this.source=t}},du=class extends oa{constructor(e,t){super(),this.pristine=e,this.source=t}},hu=class extends oa{constructor(e,t){super(),this.touched=e,this.source=t}},ra=class extends oa{constructor(e,t){super(),this.status=e,this.source=t}};function sR(n){return(xf(n)?n.validators:n)||null}function kH(n){return Array.isArray(n)?Hw(n):n||null}function aR(n,e){return(xf(e)?e.asyncValidators:n)||null}function FH(n){return Array.isArray(n)?qw(n):n||null}function xf(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function VH(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new z(1e3,"");if(!r[t])throw new z(1001,"")}function LH(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new z(1002,"")})}var Tf=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ya(()=>this.statusReactive()),this.statusReactive=za(void 0),this._pristine=Ya(()=>this.pristineReactive()),this.pristineReactive=za(!0),this._touched=Ya(()=>this.touchedReactive()),this.touchedReactive=za(!1),this._events=new ut,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return En(this.statusReactive)}set status(e){En(()=>this.statusReactive.set(e))}get valid(){return this.status===cu}get invalid(){return this.status===If}get pending(){return this.status==na}get disabled(){return this.status===uu}get enabled(){return this.status!==uu}get pristine(){return En(this.pristineReactive)}set pristine(e){En(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return En(this.touchedReactive)}set touched(e){En(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Gx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Gx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Wx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Wx(e,this._rawAsyncValidators))}hasValidator(e){return Ef(this._rawValidators,e)}hasAsyncValidator(e){return Ef(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ue(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new hu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new hu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ue(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new du(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new du(!0,r))}markAsPending(e={}){this.status=na;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ra(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ue(j({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=uu,this.errors=null,this._forEachChild(i=>{i.disable(ue(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bf(this.value,r)),this._events.next(new ra(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ue(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=cu,this._forEachChild(r=>{r.enable(ue(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ue(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cu||this.status===na)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bf(this.value,t)),this._events.next(new ra(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ue(j({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?uu:cu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=na,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=nR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ra(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new et,this.statusChanges=new et}_calculateStatus(){return this._allControlsDisabled()?uu:this.errors?If:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(na)?na:this._anyControlsHaveStatus(If)?If:cu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new du(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new hu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){xf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=kH(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=FH(this._rawAsyncValidators)}},Sf=class extends Tf{constructor(e,t,r){super(sR(t),aR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){LH(this,!0,e),Object.keys(e).forEach(r=>{VH(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var zw=new G("CallSetDisabledState",{providedIn:"root",factory:()=>Gw}),Gw="always";function jH(n,e){return[...e.path,n]}function cR(n,e,t=Gw){uR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),BH(n,e),HH(n,e),$H(n,e),UH(n,e)}function Kx(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function UH(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function uR(n,e){let t=NH(n);e.validator!==null?n.setValidators(zx(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=PH(n);e.asyncValidator!==null?n.setAsyncValidators(zx(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Kx(e._rawValidators,i),Kx(e._rawAsyncValidators,i)}function BH(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&lR(n,e)})}function $H(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&lR(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function lR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function HH(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function qH(n,e){n==null,uR(n,e)}function zH(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function GH(n){return Object.getPrototypeOf(n.constructor)===Af}function WH(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function KH(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===pn?t=o:GH(o)?r=o:i=o}),i||r||t||null}var QH={provide:ia,useExisting:Vn(()=>go)},lu=Promise.resolve(),go=(()=>{class n extends ia{get submitted(){return En(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Ya(()=>this.submittedReactive()),this.submittedReactive=za(!1),this._directives=new Set,this.ngSubmit=new et,this.form=new Sf({},Hw(t),qw(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){lu.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),cR(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){lu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){lu.then(()=>{let r=this._findContainer(t.path),i=new Sf({});qH(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){lu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){lu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),WH(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(U($w,10),U(eR,10),U(zw,8))}}static{this.\u0275dir=Ve({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Te("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ei([QH]),an]})}}return n})();function Qx(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Yx(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var YH=class extends Tf{constructor(e=null,t,r){super(sR(t),aR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),xf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Yx(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Qx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Qx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Yx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var ZH={provide:fu,useExisting:Vn(()=>xn)},Zx=Promise.resolve(),xn=(()=>{class n extends fu{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new YH,this._registered=!1,this.name="",this.update=new et,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=KH(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),zH(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){cR(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Zx.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ri(r);Zx.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?jH(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(U(ia,9),U($w,10),U(eR,10),U(pu,10),U(ni,8),U(zw,8))}}static{this.\u0275dir=Ve({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ei([ZH]),an,Jr]})}}return n})(),aa=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ve({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),JH={provide:pu,useExisting:Vn(()=>Ww),multi:!0},Ww=(()=>{class n extends Af{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=fr(n)))(i||n)}})()}static{this.\u0275dir=Ve({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Te("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[ei([JH]),an]})}}return n})();var XH={provide:pu,useExisting:Vn(()=>ca),multi:!0};function dR(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function e4(n){return n.split(":")[0]}var ca=(()=>{class n extends Af{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=dR(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=e4(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=fr(n)))(i||n)}})()}static{this.\u0275dir=Ve({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Te("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ei([XH]),an]})}}return n})(),Rf=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(dR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(U(In),U(Bn),U(ca,9))}}static{this.\u0275dir=Ve({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),t4={provide:pu,useExisting:Vn(()=>hR),multi:!0};function Jx(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function n4(n){return n.split(":")[0]}var hR=(()=>{class n extends Af{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=n4(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=fr(n)))(i||n)}})()}static{this.\u0275dir=Ve({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Te("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ei([t4]),an]})}}return n})(),Mf=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Jx(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Jx(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(U(In),U(Bn),U(hR,9))}}static{this.\u0275dir=Ve({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var r4=(()=>{class n{constructor(){this._validator=qx}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):qx,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ve({type:n,features:[Jr]})}}return n})();var i4={provide:$w,useExisting:Vn(()=>mo),multi:!0};var mo=(()=>{class n extends r4{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ri,this.createValidator=t=>AH}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=fr(n)))(i||n)}})()}static{this.\u0275dir=Ve({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ga("required",i._enabled?"":null)},inputs:{required:"required"},features:[ei([i4]),an]})}}return n})();var o4=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Zr({type:n})}static{this.\u0275inj=Yr({})}}return n})();var nr=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:zw,useValue:t.callSetDisabledState??Gw}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Zr({type:n})}static{this.\u0275inj=Yr({imports:[o4]})}}return n})();var gt=(()=>{class n{constructor(){this.auth=k(to),this.firestore=k(en),this.userSubject=new Ke(null),this.userTypeSubject=new Ke(null),this.userDataSubject=new Ke(null),vh(this.auth,t=>y(this,null,function*(){if(t){let i=(yield fn(jt(this.firestore,"users",t.uid))).data();this.userDataSubject.next(i);let o=i?.type??null;this.userTypeSubject.next(o)}else this.userTypeSubject.next(null);this.userSubject.next(t)}))}get user$(){return this.userSubject.asObservable()}get userType$(){return this.userTypeSubject.asObservable()}get userData$(){return this.userDataSubject.asObservable()}get currentUser(){return this.auth.currentUser}register(t,r,i,o,s){return y(this,null,function*(){let a=yield RS(this.auth,t,r),u=a.user;return yield ta(jt(this.firestore,"users",u.uid),{firstName:i,lastName:o,email:t,type:s}),a})}login(t,r){return y(this,null,function*(){return yield NS(this.auth,t,r)})}logout(){return y(this,null,function*(){return yield _h(this.auth)})}updateUserData(t){if(this.currentUser)return ta(jt(this.firestore,"users",this.currentUser.uid),t);throw new Error("User is not logged in")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function s4(n,e){n&1&&(R(0,"div",16),M(1," Email is required. "),T())}function a4(n,e){n&1&&(R(0,"div",16),M(1," Password is required. "),T())}var fR=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}onLogin(t){return y(this,null,function*(){t.invalid||(yield this.authService.login(this.email,this.password),this.router.navigate(["/"]))})}static{this.\u0275fac=function(r){return new(r||n)(U(gt),U(Oe))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-login"]],standalone:!0,features:[Ge],decls:25,vars:4,consts:[["loginForm","ngForm"],["emailInput","ngModel"],["passwordInput","ngModel"],[1,"flex","min-h-screen","items-center","justify-center","bg-gray-100"],[1,"w-full","max-w-md","p-8","bg-white","rounded-lg","shadow-lg"],[1,"text-2xl","font-bold","text-center","text-gray-800"],[1,"mt-6","space-y-6",3,"ngSubmit"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","name","email","placeholder","Enter your email","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["class","text-red-500 text-sm",4,"ngIf"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","placeholder","Enter your password","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","py-3","px-4","mt-4","text-white","bg-blue-600","rounded-lg","hover:bg-blue-700","transition-colors","duration-200"],[1,"my-6","border-t","border-gray-300"],[1,"mt-6","text-center","text-sm","text-gray-600"],["routerLink","/register",1,"text-blue-600","hover:underline"],[1,"text-red-500","text-sm"]],template:function(r,i){if(r&1){let o=Qe();R(0,"div",3)(1,"div",4)(2,"h2",5),M(3,"Login to Your Account"),T(),R(4,"form",6,0),Te("ngSubmit",function(){de(o);let a=Ye(5);return he(i.onLogin(a))}),R(6,"div")(7,"label",7),M(8,"Email"),T(),R(9,"input",8,1),je("ngModelChange",function(a){return de(o),ze(i.email,a)||(i.email=a),he(a)}),T(),_e(11,s4,2,0,"div",9),T(),R(12,"div")(13,"label",10),M(14,"Password"),T(),R(15,"input",11,2),je("ngModelChange",function(a){return de(o),ze(i.password,a)||(i.password=a),he(a)}),T(),_e(17,a4,2,0,"div",9),T(),R(18,"button",12),M(19," Login "),T()(),Lt(20,"div",13),R(21,"p",14),M(22," Don't have an account? "),R(23,"a",15),M(24,"Sign up"),T()()()()}if(r&2){let o=Ye(10),s=Ye(16);F(9),Le("ngModel",i.email),F(2),X("ngIf",o.invalid&&o.touched),F(4),Le("ngModel",i.password),F(2),X("ngIf",s.invalid&&s.touched)}},dependencies:[ws,qn,nr,aa,pn,tr,sa,mo,xn,go,Dn,cn]})}}return n})();function c4(n,e){n&1&&(R(0,"div",32),M(1," Email is required. "),T())}function u4(n,e){n&1&&(R(0,"div",32),M(1," First name is required. "),T())}function l4(n,e){n&1&&(R(0,"div",32),M(1," Last name is required. "),T())}function d4(n,e){n&1&&(R(0,"div",32),M(1," Password is required. "),T())}function h4(n,e){n&1&&(R(0,"div",32),M(1," Confirm password is required. "),T())}function f4(n,e){n&1&&(R(0,"div",32),M(1," Passwords do not match. "),T())}function p4(n,e){n&1&&(R(0,"div",32),M(1," User type is required. "),T())}function g4(n,e){n&1&&(R(0,"div",33),Lt(1,"div",34),T())}var pR=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isLoading=!1}onRegister(t){return y(this,null,function*(){t.invalid||(this.isLoading=!0,yield this.authService.register(this.email,this.password,this.firstName,this.lastName,this.userType),this.isLoading=!1,this.router.navigate(["/"]))})}static{this.\u0275fac=function(r){return new(r||n)(U(gt),U(Oe))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-register"]],standalone:!0,features:[Ge],decls:57,vars:14,consts:[["registerForm","ngForm"],["emailInput","ngModel"],["firstNameInput","ngModel"],["lastNameInput","ngModel"],["passwordInput","ngModel"],["confirmPasswordInput","ngModel"],["userTypeInput","ngModel"],[1,"flex","min-h-screen","items-center","justify-center","bg-gray-100"],[1,"w-full","max-w-md","p-8","bg-white","rounded-lg","shadow-lg"],[1,"text-2xl","font-bold","text-center","text-gray-800"],[3,"ngSubmit"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","name","email","placeholder","Enter your email","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["class","text-red-500 text-sm",4,"ngIf"],["for","firstName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","firstName","name","firstName","placeholder","Enter your first name","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","lastName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","lastName","name","lastName","placeholder","Enter your last name","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","placeholder","Enter your password","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Confirm your password","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","userType",1,"block","text-sm","font-medium","text-gray-700"],["id","userType","name","userType","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],["value","hiker"],["value","hikingClub"],["type","submit",1,"w-full","py-3","px-4","mt-4","text-white","bg-blue-600","rounded-lg","hover:bg-blue-700","transition-colors","duration-200"],["class","fixed inset-0 flex items-center justify-center bg-gray-100 bg-opacity-75 z-50",4,"ngIf"],[1,"my-6","border-t","border-gray-300"],[1,"text-center","text-sm","text-gray-600"],["routerLink","/login",1,"text-blue-600","hover:underline"],[1,"text-red-500","text-sm"],[1,"fixed","inset-0","flex","items-center","justify-center","bg-gray-100","bg-opacity-75","z-50"],[1,"animate-spin","rounded-full","h-32","w-32","border-t-2","border-b-2","border-blue-500"]],template:function(r,i){if(r&1){let o=Qe();R(0,"div",7)(1,"div",8)(2,"h2",9),M(3,"Create an Account"),T(),R(4,"form",10,0),Te("ngSubmit",function(){de(o);let a=Ye(5);return he(i.onRegister(a))}),R(6,"div")(7,"label",11),M(8,"Email"),T(),R(9,"input",12,1),je("ngModelChange",function(a){return de(o),ze(i.email,a)||(i.email=a),he(a)}),T(),_e(11,c4,2,0,"div",13),T(),R(12,"div")(13,"label",14),M(14,"First Name"),T(),R(15,"input",15,2),je("ngModelChange",function(a){return de(o),ze(i.firstName,a)||(i.firstName=a),he(a)}),T(),_e(17,u4,2,0,"div",13),T(),R(18,"div")(19,"label",16),M(20,"Last Name"),T(),R(21,"input",17,3),je("ngModelChange",function(a){return de(o),ze(i.lastName,a)||(i.lastName=a),he(a)}),T(),_e(23,l4,2,0,"div",13),T(),R(24,"div")(25,"label",18),M(26,"Password"),T(),R(27,"input",19,4),je("ngModelChange",function(a){return de(o),ze(i.password,a)||(i.password=a),he(a)}),T(),_e(29,d4,2,0,"div",13),T(),R(30,"div")(31,"label",20),M(32,"Confirm Password"),T(),R(33,"input",21,5),je("ngModelChange",function(a){return de(o),ze(i.confirmPassword,a)||(i.confirmPassword=a),he(a)}),T(),_e(35,h4,2,0,"div",13)(36,f4,2,0,"div",13),T(),R(37,"div")(38,"label",22),M(39,"User Type"),T(),R(40,"select",23,6),je("ngModelChange",function(a){return de(o),ze(i.userType,a)||(i.userType=a),he(a)}),R(42,"option",24),M(43,"Select user type"),T(),R(44,"option",25),M(45,"Hiker"),T(),R(46,"option",26),M(47,"Hiking Club"),T()(),_e(48,p4,2,0,"div",13),T(),R(49,"button",27),M(50," Register "),T()(),_e(51,g4,2,0,"div",28),Lt(52,"div",29),R(53,"p",30),M(54," Already have an account? "),R(55,"a",31),M(56,"Login"),T()()()()}if(r&2){let o=Ye(10),s=Ye(16),a=Ye(22),u=Ye(28),l=Ye(34),h=Ye(41);F(9),Le("ngModel",i.email),F(2),X("ngIf",o.invalid&&o.touched),F(4),Le("ngModel",i.firstName),F(2),X("ngIf",s.invalid&&s.touched),F(4),Le("ngModel",i.lastName),F(2),X("ngIf",a.invalid&&a.touched),F(4),Le("ngModel",i.password),F(2),X("ngIf",u.invalid&&u.touched),F(4),Le("ngModel",i.confirmPassword),F(2),X("ngIf",l.invalid&&l.touched),F(),X("ngIf",i.password!==i.confirmPassword&&l.touched),F(4),Le("ngModel",i.userType),F(8),X("ngIf",h.invalid&&h.touched),F(3),X("ngIf",i.isLoading)}},dependencies:[nr,aa,Rf,Mf,pn,ca,tr,sa,mo,xn,go,ws,qn,Dn,cn]})}}return n})();var m4=n=>["/tour-participants",n];function y4(n,e){if(n&1&&(R(0,"div",9),M(1),T()),n&2){let t=Ae(2);F(),Wa("",t.clubProfile.firstName," ",t.clubProfile.lastName,"")}}function v4(n,e){if(n&1){let t=Qe();R(0,"div",15)(1,"input",16),je("ngModelChange",function(i){de(t);let o=Ae(2);return ze(o.firstName,i)||(o.firstName=i),he(i)}),T(),R(2,"input",17),je("ngModelChange",function(i){de(t);let o=Ae(2);return ze(o.lastName,i)||(o.lastName=i),he(i)}),T()()}if(n&2){let t=Ae(2);F(),Le("ngModel",t.firstName),F(),Le("ngModel",t.lastName)}}function _4(n,e){if(n&1){let t=Qe();R(0,"button",18),Te("click",function(){de(t);let i=Ae(2);return he(i.toggleEditMode())}),M(1,"Edit"),T()}}function w4(n,e){if(n&1){let t=Qe();R(0,"button",19),Te("click",function(){de(t);let i=Ae(2);return he(i.saveProfile())}),M(1,"Save"),T()}}function I4(n,e){if(n&1){let t=Qe();R(0,"button",20),Te("click",function(){de(t);let i=Ae(2);return he(i.toggleEditMode())}),M(1,"Cancel"),T()}}function E4(n,e){if(n&1&&(R(0,"li",22)(1,"h3",23),M(2),T(),R(3,"p")(4,"strong"),M(5,"Date:"),T(),M(6),T(),R(7,"p")(8,"strong"),M(9,"Difficulty:"),T(),M(10),T(),R(11,"p")(12,"strong"),M(13,"Participants:"),T(),M(14),T(),R(15,"button",24),M(16,"View Participants"),T()()),n&2){let t=e.$implicit;F(2),at(t.name),F(4),St(" ",t.date,""),F(4),St(" ",t.difficulty,""),F(4),St(" ",t.participants,""),F(),X("routerLink",ss(5,m4,t.id))}}function D4(n,e){if(n&1&&(R(0,"ul"),_e(1,E4,17,7,"li",21),T()),n&2){let t=Ae(2);F(),X("ngForOf",t.tours)}}function C4(n,e){n&1&&(R(0,"p"),M(1,"No tours organized by this club."),T())}function b4(n,e){if(n&1&&(R(0,"div")(1,"div",5)(2,"div",6),M(3,"Name:"),T(),_e(4,y4,2,2,"div",7)(5,v4,3,2,"div",8),T(),R(6,"div",5)(7,"div",6),M(8,"Email:"),T(),R(9,"div",9),M(10),T()(),R(11,"div",5)(12,"div",6),M(13,"Type:"),T(),R(14,"div",9),M(15),T()(),R(16,"div",10),_e(17,_4,2,0,"button",11)(18,w4,2,0,"button",12)(19,I4,2,0,"button",13),T(),R(20,"h2",14),M(21,"Organized Tours"),T(),_e(22,D4,2,1,"ul",4)(23,C4,2,0,"ng-template",null,1,$i),T()),n&2){let t=Ye(24),r=Ae();F(4),X("ngIf",!r.editMode),F(),X("ngIf",r.editMode),F(5),at(r.clubProfile.email),F(5),at(r.clubProfile.type),F(2),X("ngIf",!r.editMode),F(),X("ngIf",r.editMode),F(),X("ngIf",r.editMode),F(3),X("ngIf",r.tours.length>0)("ngIfElse",t)}}function T4(n,e){n&1&&(R(0,"p"),M(1,"No profile data available."),T())}var gR=(()=>{class n{constructor(t){this.authService=t,this.clubProfile=null,this.firestore=k(en),this.editMode=!1,this.firstName="",this.lastName=""}ngOnInit(){return y(this,null,function*(){let t=this.authService.currentUser;if(t){let r=yield fn(jt(this.firestore,"users",t.uid));r.exists()?(this.clubProfile=r.data(),this.firstName=this.clubProfile.firstName,this.lastName=this.clubProfile.lastName,yield this.loadTours(t.uid)):console.error("User not found")}else console.error("User is not authenticated")})}toggleEditMode(){this.editMode=!this.editMode}loadTours(t){return y(this,null,function*(){let r=ea(this.firestore,"tours"),i=Ux(r,Bx("createdBy","==",t)),o=yield Lx(i);this.tours=o.docs.map(s=>{let a=s.data();return a.id=s.id,a})})}saveProfile(){return y(this,null,function*(){this.clubProfile&&(this.clubProfile.firstName=this.firstName,this.clubProfile.lastName=this.lastName,this.authService.updateUserData(this.clubProfile),this.toggleEditMode())})}static{this.\u0275fac=function(r){return new(r||n)(U(gt))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-profile-club"]],standalone:!0,features:[Ge],decls:6,vars:2,consts:[["noProfile",""],["noTours",""],[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],[4,"ngIf","ngIfElse"],[1,"flex","items-center","space-x-4"],[1,"text-lg","font-semibold","text-gray-700"],["class","text-lg text-gray-900",4,"ngIf"],["class","flex space-x-2",4,"ngIf"],[1,"text-lg","text-gray-900"],[1,"flex","justify-end","space-x-4","mt-4"],["class","bg-blue-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-green-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-red-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],[1,"text-xl","font-bold","mt-4"],[1,"flex","space-x-2"],["placeholder","First Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],["placeholder","Last Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],[1,"bg-blue-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-green-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-red-500","text-white","px-4","py-2","rounded",3,"click"],["class","mb-4 p-4 border rounded shadow",4,"ngFor","ngForOf"],[1,"mb-4","p-4","border","rounded","shadow"],[1,"text-lg","font-semibold"],[1,"bg-blue-500","text-white","px-4","py-2","rounded","mt-2",3,"routerLink"]],template:function(r,i){if(r&1&&(R(0,"div",2)(1,"h1",3),M(2,"Club Profile"),T(),_e(3,b4,25,9,"div",4)(4,T4,2,0,"ng-template",null,0,$i),T()),r&2){let o=Ye(5);F(3),X("ngIf",i.clubProfile)("ngIfElse",o)}},dependencies:[cn,cs,nr,pn,tr,xn,qn]})}}return n})();function S4(n,e){if(n&1&&(R(0,"div",9),M(1),T()),n&2){let t=Ae(2);F(),Wa("",t.userProfile.firstName," ",t.userProfile.lastName,"")}}function A4(n,e){if(n&1){let t=Qe();R(0,"div",14)(1,"input",15),je("ngModelChange",function(i){de(t);let o=Ae(2);return ze(o.firstName,i)||(o.firstName=i),he(i)}),T(),R(2,"input",16),je("ngModelChange",function(i){de(t);let o=Ae(2);return ze(o.lastName,i)||(o.lastName=i),he(i)}),T()()}if(n&2){let t=Ae(2);F(),Le("ngModel",t.firstName),F(),Le("ngModel",t.lastName)}}function x4(n,e){if(n&1){let t=Qe();R(0,"button",17),Te("click",function(){de(t);let i=Ae(2);return he(i.toggleEditMode())}),M(1,"Edit"),T()}}function R4(n,e){if(n&1){let t=Qe();R(0,"button",18),Te("click",function(){de(t);let i=Ae(2);return he(i.saveProfile())}),M(1,"Save"),T()}}function M4(n,e){if(n&1){let t=Qe();R(0,"button",19),Te("click",function(){de(t);let i=Ae(2);return he(i.toggleEditMode())}),M(1,"Cancel"),T()}}function N4(n,e){if(n&1&&(R(0,"div",4)(1,"div",5)(2,"div",6),M(3,"Name:"),T(),_e(4,S4,2,2,"div",7)(5,A4,3,2,"div",8),T(),R(6,"div",5)(7,"div",6),M(8,"Email:"),T(),R(9,"div",9),M(10),T()(),R(11,"div",5)(12,"div",6),M(13,"Type:"),T(),R(14,"div",9),M(15),T()(),R(16,"div",10),_e(17,x4,2,0,"button",11)(18,R4,2,0,"button",12)(19,M4,2,0,"button",13),T()()),n&2){let t=Ae();F(4),X("ngIf",!t.editMode),F(),X("ngIf",t.editMode),F(5),at(t.userProfile.email),F(5),at(t.userProfile.type),F(2),X("ngIf",!t.editMode),F(),X("ngIf",t.editMode),F(),X("ngIf",t.editMode)}}function P4(n,e){n&1&&(R(0,"p",20),M(1,"No profile data available."),T())}var mR=(()=>{class n{constructor(t){this.authService=t,this.editMode=!1,this.firstName="",this.lastName=""}ngOnInit(){return y(this,null,function*(){this.authService.userData$.subscribe(t=>{let r=t;r&&(this.userProfile=r),this.firstName=this.userProfile.firstName,this.lastName=this.userProfile.lastName})})}toggleEditMode(){this.editMode=!this.editMode}saveProfile(){return y(this,null,function*(){this.userProfile.firstName=this.firstName,this.userProfile.lastName=this.lastName,this.authService.updateUserData(this.userProfile),this.toggleEditMode()})}static{this.\u0275fac=function(r){return new(r||n)(U(gt))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-profile-hiker"]],standalone:!0,features:[Ge],decls:6,vars:2,consts:[["noProfile",""],[1,"container","mx-auto","p-6","bg-white","shadow-lg","rounded-lg"],[1,"text-3xl","font-bold","text-gray-800","mb-6","text-center"],["class","space-y-4",4,"ngIf","ngIfElse"],[1,"space-y-4"],[1,"flex","items-center","space-x-4"],[1,"text-lg","font-semibold","text-gray-700"],["class","text-lg text-gray-900",4,"ngIf"],["class","flex space-x-2",4,"ngIf"],[1,"text-lg","text-gray-900"],[1,"flex","justify-end","space-x-4"],["class","bg-blue-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-green-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-red-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],[1,"flex","space-x-2"],["placeholder","First Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],["placeholder","Last Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],[1,"bg-blue-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-green-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-red-500","text-white","px-4","py-2","rounded",3,"click"],[1,"text-center","text-gray-500"]],template:function(r,i){if(r&1&&(R(0,"div",1)(1,"h1",2),M(2,"Profile"),T(),_e(3,N4,20,7,"div",3)(4,P4,2,0,"ng-template",null,0,$i),T()),r&2){let o=Ye(5);F(3),X("ngIf",i.userProfile)("ngIfElse",o)}},dependencies:[cn,nr,pn,tr,xn]})}}return n})();var Kw=(n,e)=>{let t=k(gt),r=k(Oe);return t.user$.pipe(Dt(1),Z(i=>i?!0:(r.navigate(["/login"]),!1)))};var yR=(()=>{class n{constructor(t,r,i){this.authService=t,this.tourService=r,this.router=i,this.tour={name:"",date:"",description:"",gpxContent:"",difficulty:"easy",participants:0,createdBy:"",createdAt:""},this.gpxFile=null}onFileChange(t){let r=t.target.files[0];r&&(this.gpxFile=r)}onSubmit(){return y(this,null,function*(){if(this.gpxFile){let t=this.authService.currentUser;if(t){let r=new FileReader;r.onload=()=>y(this,null,function*(){let i=r.result;this.tour.gpxContent=i,this.tour.createdBy=t.uid,this.tour.createdAt=new Date().toISOString();try{let o=yield this.tourService.addTour(this.tour);console.log("Tour created with ID:",o.id),this.router.navigate(["/"])}catch(o){console.error("Error adding document:",o)}}),r.readAsText(this.gpxFile)}else console.error("User is not authenticated")}else console.error("GPX file is required")})}static{this.\u0275fac=function(r){return new(r||n)(U(gt),U(Ii),U(Oe))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-create-hiking-tour"]],standalone:!0,features:[Ge],decls:38,vars:6,consts:[["tourForm","ngForm"],[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],[3,"ngSubmit"],[1,"mb-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","name","name","name","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","date",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","date","name","date","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","description",1,"block","text-sm","font-medium","text-gray-700"],["id","description","name","description","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","gpxFile",1,"block","text-sm","font-medium","text-gray-700"],["type","file","id","gpxFile","name","gpxFile","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"change"],["for","difficulty",1,"block","text-sm","font-medium","text-gray-700"],["id","difficulty","name","difficulty","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["value","easy"],["value","moderate"],["value","hard"],["for","participants",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","participants","name","participants","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"mt-4"],["type","submit",1,"w-full","py-2","px-4","bg-blue-600","text-white","rounded-md","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"disabled"]],template:function(r,i){if(r&1){let o=Qe();R(0,"div",1)(1,"h1",2),M(2,"Create Hiking Tour"),T(),R(3,"form",3,0),Te("ngSubmit",function(){return de(o),he(i.onSubmit())}),R(5,"div",4)(6,"label",5),M(7,"Tour Name"),T(),R(8,"input",6),je("ngModelChange",function(a){return de(o),ze(i.tour.name,a)||(i.tour.name=a),he(a)}),T()(),R(9,"div",4)(10,"label",7),M(11,"Date"),T(),R(12,"input",8),je("ngModelChange",function(a){return de(o),ze(i.tour.date,a)||(i.tour.date=a),he(a)}),T()(),R(13,"div",4)(14,"label",9),M(15,"Description"),T(),R(16,"textarea",10),je("ngModelChange",function(a){return de(o),ze(i.tour.description,a)||(i.tour.description=a),he(a)}),T()(),R(17,"div",4)(18,"label",11),M(19,"GPX File"),T(),R(20,"input",12),Te("change",function(a){return de(o),he(i.onFileChange(a))}),T()(),R(21,"div",4)(22,"label",13),M(23,"Difficulty Level"),T(),R(24,"select",14),je("ngModelChange",function(a){return de(o),ze(i.tour.difficulty,a)||(i.tour.difficulty=a),he(a)}),R(25,"option",15),M(26,"Easy"),T(),R(27,"option",16),M(28,"Moderate"),T(),R(29,"option",17),M(30,"Hard"),T()()(),R(31,"div",4)(32,"label",18),M(33,"Number of Participants"),T(),R(34,"input",19),je("ngModelChange",function(a){return de(o),ze(i.tour.participants,a)||(i.tour.participants=a),he(a)}),T()(),R(35,"div",20)(36,"button",21),M(37," Create Tour "),T()()()()}if(r&2){let o=Ye(4);F(8),Le("ngModel",i.tour.name),F(4),Le("ngModel",i.tour.date),F(4),Le("ngModel",i.tour.description),F(8),Le("ngModel",i.tour.difficulty),F(10),Le("ngModel",i.tour.participants),F(2),X("disabled",o.invalid)}},dependencies:[Dn,nr,aa,Rf,Mf,pn,Ww,ca,tr,sa,mo,xn,go]})}}return n})();var Qw=(n,e)=>{let t=k(gt),r=k(Oe);return t.userType$.pipe(Dt(1),Z(i=>i==="hikingClub"?!0:(r.navigate(["/"]),!1)))};var O4=(n,e)=>({"bg-gray-400 cursor-not-allowed":n,"bg-blue-600 hover:bg-blue-700":e});function k4(n,e){if(n&1){let t=Qe();R(0,"button",5),Te("click",function(){de(t);let i=Ae(2);return he(i.applyForTour())}),M(1," Apply for the Tour "),T()}if(n&2){let t=Ae(2);X("disabled",t.hasApplied)("ngClass",OC(2,O4,t.hasApplied,!t.hasApplied))}}function F4(n,e){if(n&1&&(R(0,"div")(1,"h2",3),M(2),T(),R(3,"p")(4,"strong"),M(5,"Date:"),T(),M(6),T(),R(7,"p")(8,"strong"),M(9,"Description:"),T(),M(10),T(),R(11,"p")(12,"strong"),M(13,"Difficulty:"),T(),M(14),T(),R(15,"p")(16,"strong"),M(17,"Participants:"),T(),M(18),T(),_e(19,k4,2,5,"button",4),T()),n&2){let t=Ae();F(2),at(t.tour.name),F(4),St(" ",t.tour.date,""),F(4),St(" ",t.tour.description,""),F(4),St(" ",t.tour.difficulty,""),F(4),St(" ",t.tour.participants,""),F(),X("ngIf",t.isHiker)}}var vR=(()=>{class n{constructor(t,r,i,o){this.route=t,this.tourService=r,this.authService=i,this.router=o,this.isHiker=!1,this.hasApplied=!1}ngOnInit(){return y(this,null,function*(){let t=this.route.snapshot.paramMap.get("id");t?yield this.loadTour(t):this.router.navigate(["/"]),this.authService.user$.subscribe(r=>y(this,null,function*(){let i=r?.uid;i&&(this.userId=i,this.hasApplied=yield this.checkIfUserHasApplied(this.tour.id,this.userId))})),this.authService.userType$.subscribe(r=>{r==="hiker"&&(this.isHiker=!0)})})}loadTour(t){return y(this,null,function*(){let r=(yield this.tourService.loadTour(t))??null;r?this.tour=r:this.router.navigate(["/"])})}applyForTour(){return y(this,null,function*(){let t=this.authService.currentUser;t?(yield this.tourService.applyForTour(this.tour.id,this.tour.createdBy,t.uid),this.hasApplied=!0):this.router.navigate(["/"])})}checkIfUserHasApplied(t,r){return y(this,null,function*(){return this.tourService.hasUserApplied(t,r)})}static{this.\u0275fac=function(r){return new(r||n)(U(ln),U(Ii),U(gt),U(Oe))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-tour-details"]],standalone:!0,features:[Ge],decls:4,vars:1,consts:[[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],[4,"ngIf"],[1,"text-xl","font-semibold"],["class","mt-2 py-2 px-4 text-white rounded focus:outline-none focus:ring-2 focus:ring-blue-500",3,"disabled","ngClass","click",4,"ngIf"],[1,"mt-2","py-2","px-4","text-white","rounded","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"click","disabled","ngClass"]],template:function(r,i){r&1&&(R(0,"div",0)(1,"h1",1),M(2,"Tour Details"),T(),_e(3,F4,20,6,"div",2),T()),r&2&&(F(3),X("ngIf",i.tour))},dependencies:[cn,Dd]})}}return n})();var _R=(()=>{class n{constructor(t,r,i){this.route=t,this.tourService=r,this.router=i}ngOnInit(){return y(this,null,function*(){let t=this.route.snapshot.paramMap.get("id");console.log(t),t?yield this.loadTour(t):this.router.navigate(["/"])})}loadTour(t){return y(this,null,function*(){let r=(yield this.tourService.loadTour(t))??null;r?this.tour=r:this.router.navigate(["/"])})}loadParticipants(){return y(this,null,function*(){if(this.tour.id){let t=yield this.tourService.loadParticipants(this.tour.id);console.log(t)}else throw new Error("Tour ID is missing")})}static{this.\u0275fac=function(r){return new(r||n)(U(ln),U(Ii),U(Oe))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-tour-participants"]],standalone:!0,features:[Ge],decls:18,vars:4,consts:[[1,"bg-white","shadow-md","rounded-lg","p-6","mb-6","m-6"],[1,"text-3xl","font-bold","mb-4"],[1,"text-xl","font-semibold","mb-1"],[1,"text-gray-700"]],template:function(r,i){r&1&&(R(0,"div",0)(1,"h2",1),M(2),T(),R(3,"div")(4,"h3",2),M(5,"Description"),T(),R(6,"p",3),M(7),T()(),R(8,"div")(9,"h3",2),M(10,"Difficulty"),T(),R(11,"p",3),M(12),T()(),R(13,"div")(14,"h3",2),M(15,"Date"),T(),R(16,"p",3),M(17),T()()()),r&2&&(F(2),at(i.tour.name),F(5),at(i.tour.description),F(5),at(i.tour.difficulty),F(5),at(i.tour.date))}})}}return n})();var wR=[{path:"",component:Hx},{path:"login",component:fR},{path:"register",component:pR},{path:"profile-club",component:gR,canActivate:[Kw]},{path:"profile-hiker",component:mR,canActivate:[Kw]},{path:"create-hiking-tour",component:yR,canActivate:[Qw]},{path:"tour-details/:id",component:vR},{path:"tour-participants/:id",component:_R,canActivate:[Qw]}];var IR={apiKey:"AIzaSyCu5CPQCRQ7_qsOst9yUHo9_VXxDZ7RQv0",authDomain:"master-b6858.firebaseapp.com",projectId:"master-b6858",storageBucket:"master-b6858.firebasestorage.app",messagingSenderId:"21300314672",appId:"1:21300314672:web:8cd1730aa552dff5f3e3f5"};var ER={providers:[PT(()=>Yd(IR)),xS(()=>MS()),kx(()=>jx()),BC({eventCoalescing:!0}),eT(wR)]};var V4=n=>({"font-bold":n});function L4(n,e){n&1&&(R(0,"li")(1,"a",15),M(2,"Create Hiking Tour"),T()())}function j4(n,e){if(n&1&&(gd(0),_e(1,L4,3,0,"li",6),md()),n&2){let t=e.ngIf;F(),X("ngIf",t==="hikingClub")}}function U4(n,e){n&1&&Lt(0,"span",16)}function B4(n,e){if(n&1){let t=Qe();R(0,"li",19)(1,"p",20),Te("click",function(){let i=de(t).$implicit,o=Ae(3);return he(o.markAsRead(i))}),M(2),T()()}if(n&2){let t=e.$implicit;F(),X("ngClass",ss(2,V4,!t.read)),F(),at(t.message)}}function $4(n,e){if(n&1&&(R(0,"div",17)(1,"ul"),_e(2,B4,3,4,"li",18),T()()),n&2){let t=Ae(2);F(2),X("ngForOf",t.notifications)}}function H4(n,e){if(n&1){let t=Qe();gd(0),_e(1,j4,2,1,"ng-container",6),Ka(2,"async"),R(3,"li")(4,"a",7),Te("click",function(){de(t);let i=Ae();return he(i.goToProfile())}),M(5,"Profile"),T()(),R(6,"li",8)(7,"button",7),Te("click",function(){de(t);let i=Ae();return he(i.toggleNotifications())}),ID(),R(8,"svg",9),Lt(9,"path",10),T(),_e(10,U4,1,0,"span",11),T(),ED(),Lt(11,"i",12),_e(12,$4,3,1,"div",13),T(),R(13,"li")(14,"a",14),Te("click",function(){de(t);let i=Ae();return he(i.logout())}),M(15,"Logout"),T()(),md()}if(n&2){let t=Ae();F(),X("ngIf",Qa(2,3,t.userType$)),F(9),X("ngIf",t.unreadNotficationsMarker),F(2),X("ngIf",t.showNotifications)}}function q4(n,e){n&1&&(R(0,"li")(1,"a",21),M(2,"Login"),T()(),R(3,"li")(4,"a",22),M(5,"Register"),T()())}var DR=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.notificationService=i,this.user=null,this.notifications=[],this.showNotifications=!1,this.unreadNotficationsMarker=!1,this.user$=this.authService.user$,this.user$.subscribe(o=>{o&&(this.user=o)}),this.userType$=this.authService.userType$,this.userData$=this.authService.userData$,this.userData$.subscribe(o=>{o&&o.notifications&&(this.notifications=o.notifications,this.unreadNotficationsMarker=this.notifications.some(s=>!s.read))})}ngOnInit(){}logout(){return y(this,null,function*(){yield this.authService.logout(),this.router.navigate(["/"])})}goToProfile(){this.userType$.pipe(Dt(1)).subscribe(t=>{t==="hiker"?this.router.navigate(["/profile-hiker"]):t==="hikingClub"&&this.router.navigate(["/profile-club"])})}toggleNotifications(){this.showNotifications=!this.showNotifications}markAsRead(t){return y(this,null,function*(){let r=this.notifications.findIndex(i=>i.date===t.date);yield this.notificationService.markAsRead(this.user.uid,r),t.read=!0,this.unreadNotficationsMarker=this.notifications.some(i=>!i.read)})}static{this.\u0275fac=function(r){return new(r||n)(U(gt),U(Oe),U(_f))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-navbar"]],standalone:!0,features:[Ge],decls:10,vars:4,consts:[["loggedOut",""],[1,"bg-gray-800","p-4"],[1,"flex","items-center","space-x-4","w-full"],["routerLink","/",1,"text-white","text-lg","hover:text-gray-400"],[1,"flex-grow"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"text-white","hover:text-gray-400",3,"click"],[1,"relative"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],["class","animate-ping absolute top-1 right-0.5 block h-1 w-1 rounded-full ring-2 ring-green-400 bg-green-600",4,"ngIf"],[1,"fa-solid","fa-bell"],["class","absolute right-0 mt-2 w-64 bg-white shadow-lg rounded-lg",4,"ngIf"],[1,"text-white","hover:text-gray-400","cursor-pointer",3,"click"],["routerLink","/create-hiking-tour",1,"text-white","hover:text-gray-400"],[1,"animate-ping","absolute","top-1","right-0.5","block","h-1","w-1","rounded-full","ring-2","ring-green-400","bg-green-600"],[1,"absolute","right-0","mt-2","w-64","bg-white","shadow-lg","rounded-lg"],["class","p-4 border-b",4,"ngFor","ngForOf"],[1,"p-4","border-b"],[3,"click","ngClass"],["routerLink","/login",1,"text-white","hover:text-gray-400"],["routerLink","/register",1,"text-white","hover:text-gray-400"]],template:function(r,i){if(r&1&&(R(0,"nav",1)(1,"ul",2)(2,"li")(3,"a",3),M(4,"Hiking Platform"),T()(),Lt(5,"li",4),_e(6,H4,16,5,"ng-container",5),Ka(7,"async"),_e(8,q4,6,0,"ng-template",null,0,$i),T()()),r&2){let o=Ye(9);F(6),X("ngIf",Qa(7,2,i.user$))("ngIfElse",o)}},dependencies:[ws,qn,Dn,Dd,cs,cn,Cd]})}}return n})();var CR=(()=>{class n{constructor(){this.title="master"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=qe({type:n,selectors:[["app-root"]],standalone:!0,features:[Ge],decls:2,vars:0,template:function(r,i){r&1&&Lt(0,"app-navbar")(1,"router-outlet")},dependencies:[hy,DR]})}}return n})();lb(CR,ER).catch(n=>console.error(n));
