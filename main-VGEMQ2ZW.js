var uM=Object.defineProperty,lM=Object.defineProperties;var dM=Object.getOwnPropertyDescriptors;var eE=Object.getOwnPropertySymbols,hM=Object.getPrototypeOf,fM=Object.prototype.hasOwnProperty,pM=Object.prototype.propertyIsEnumerable,mM=Reflect.get;var tE=(n,e,t)=>e in n?uM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L=(n,e)=>{for(var t in e||={})fM.call(e,t)&&tE(n,t,e[t]);if(eE)for(var t of eE(e))pM.call(e,t)&&tE(n,t,e[t]);return n},he=(n,e)=>lM(n,dM(e));var Lr=(n,e,t)=>mM(hM(n),t,e);var g=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});function nE(n,e){return Object.is(n,e)}var ut=null,Vu=!1,Lu=1,ur=Symbol("SIGNAL");function be(n){let e=ut;return ut=n,e}function rE(){return ut}var Na={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function sp(n){if(Vu)throw new Error("");if(ut===null)return;ut.consumerOnSignalRead(n);let e=ut.nextProducerIndex++;if($u(ut),e<ut.producerNode.length&&ut.producerNode[e]!==n&&Ma(ut)){let t=ut.producerNode[e];Bu(t,ut.producerIndexOfThis[e])}ut.producerNode[e]!==n&&(ut.producerNode[e]=n,ut.producerIndexOfThis[e]=Ma(ut)?aE(n,ut,e):0),ut.producerLastReadVersion[e]=n.version}function gM(){Lu++}function iE(n){if(!(Ma(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Lu)){if(!n.producerMustRecompute(n)&&!cp(n)){n.dirty=!1,n.lastCleanEpoch=Lu;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Lu}}function oE(n){if(n.liveConsumerNode===void 0)return;let e=Vu;Vu=!0;try{for(let t of n.liveConsumerNode)t.dirty||yM(t)}finally{Vu=e}}function sE(){return ut?.consumerAllowSignalWrites!==!1}function yM(n){n.dirty=!0,oE(n),n.consumerMarkedDirty?.(n)}function Uu(n){return n&&(n.nextProducerIndex=0),be(n)}function ap(n,e){if(be(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ma(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Bu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function cp(n){$u(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(iE(t),r!==t.version))return!0}return!1}function up(n){if($u(n),Ma(n))for(let e=0;e<n.producerNode.length;e++)Bu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function aE(n,e,t){if(cE(n),n.liveConsumerNode.length===0&&uE(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=aE(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Bu(n,e){if(cE(n),n.liveConsumerNode.length===1&&uE(n))for(let r=0;r<n.producerNode.length;r++)Bu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];$u(i),i.producerIndexOfThis[r]=e}}function Ma(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function $u(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function cE(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function uE(n){return n.producerNode!==void 0}function lE(n){let e=Object.create(vM);e.computation=n;let t=()=>{if(iE(e),sp(e),e.value===ju)throw e.error;return e.value};return t[ur]=e,t}var ip=Symbol("UNSET"),op=Symbol("COMPUTING"),ju=Symbol("ERRORED"),vM=he(L({},Na),{value:ip,dirty:!0,error:null,equal:nE,producerMustRecompute(n){return n.value===ip||n.value===op},producerRecomputeValue(n){if(n.value===op)throw new Error("Detected cycle in computations.");let e=n.value;n.value=op;let t=Uu(n),r;try{r=n.computation()}catch(i){r=ju,n.error=i}finally{ap(n,t)}if(e!==ip&&e!==ju&&r!==ju&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function _M(){throw new Error}var dE=_M;function hE(){dE()}function fE(n){dE=n}var wM=null;function pE(n){let e=Object.create(gE);e.value=n;let t=()=>(sp(e),e.value);return t[ur]=e,t}function lp(n,e){sE()||hE(),n.equal(n.value,e)||(n.value=e,IM(n))}function mE(n,e){sE()||hE(),lp(n,e(n.value))}var gE=he(L({},Na),{equal:nE,value:void 0});function IM(n){n.version++,gM(),oE(n),wM?.()}function ae(n){return typeof n=="function"}function To(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Hu=To(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ri(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var We=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ae(r))try{r()}catch(o){e=o instanceof Hu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{yE(o)}catch(s){e=e??[],s instanceof Hu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Hu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)yE(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ri(t,e)}remove(e){let{_finalizers:t}=this;t&&Ri(t,e),e instanceof n&&e._removeParent(this)}};We.EMPTY=(()=>{let n=new We;return n.closed=!0,n})();var dp=We.EMPTY;function qu(n){return n instanceof We||n&&"closed"in n&&ae(n.remove)&&ae(n.add)&&ae(n.unsubscribe)}function yE(n){ae(n)?n():n.unsubscribe()}var gn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var So={setTimeout(n,e,...t){let{delegate:r}=So;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=So;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function zu(n){So.setTimeout(()=>{let{onUnhandledError:e}=gn;if(e)e(n);else throw n})}function Pa(){}var vE=hp("C",void 0,void 0);function _E(n){return hp("E",void 0,n)}function wE(n){return hp("N",n,void 0)}function hp(n,e,t){return{kind:n,value:e,error:t}}var Mi=null;function Ao(n){if(gn.useDeprecatedSynchronousErrorHandling){let e=!Mi;if(e&&(Mi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Mi;if(Mi=null,t)throw r}}else n()}function IE(n){gn.useDeprecatedSynchronousErrorHandling&&Mi&&(Mi.errorThrown=!0,Mi.error=n)}var Ni=class extends We{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qu(e)&&e.add(this)):this.destination=bM}static create(e,t,r){return new jr(e,t,r)}next(e){this.isStopped?pp(wE(e),this):this._next(e)}error(e){this.isStopped?pp(_E(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?pp(vE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},EM=Function.prototype.bind;function fp(n,e){return EM.call(n,e)}var mp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Gu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Gu(r)}else Gu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Gu(t)}}},jr=class extends Ni{constructor(e,t,r){super();let i;if(ae(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&gn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&fp(e.next,o),error:e.error&&fp(e.error,o),complete:e.complete&&fp(e.complete,o)}):i=e}this.destination=new mp(i)}};function Gu(n){gn.useDeprecatedSynchronousErrorHandling?IE(n):zu(n)}function DM(n){throw n}function pp(n,e){let{onStoppedNotification:t}=gn;t&&So.setTimeout(()=>t(n,e))}var bM={closed:!0,next:Pa,error:DM,complete:Pa};var xo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Wt(n){return n}function Wu(...n){return gp(n)}function gp(n){return n.length===0?Wt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ye=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=TM(t)?t:new jr(t,r,i);return Ao(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=EE(r),new r((i,o)=>{let s=new jr({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[xo](){return this}pipe(...t){return gp(t)(this)}toPromise(t){return t=EE(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function EE(n){var e;return(e=n??gn.Promise)!==null&&e!==void 0?e:Promise}function CM(n){return n&&ae(n.next)&&ae(n.error)&&ae(n.complete)}function TM(n){return n&&n instanceof Ni||CM(n)&&qu(n)}function yp(n){return ae(n?.lift)}function Ee(n){return e=>{if(yp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ve(n,e,t,r,i){return new vp(n,e,t,r,i)}var vp=class extends Ni{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ro(){return Ee((n,e)=>{let t=null;n._refCount++;let r=ve(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Mo=class extends ye{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,yp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new We;let t=this.getSubject();e.add(this.source.subscribe(ve(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=We.EMPTY)}return e}refCount(){return Ro()(this)}};var DE=To(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ht=(()=>{class n extends ye{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ku(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new DE}next(t){Ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?dp:(this.currentObservers=null,o.push(t),new We(()=>{this.currentObservers=null,Ri(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ye;return t.source=this,t}}return n.create=(e,t)=>new Ku(e,t),n})(),Ku=class extends ht{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:dp}};var Ze=class extends ht{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var _p={now(){return(_p.delegate||Date).now()},delegate:void 0};var Qu=class extends We{constructor(e,t){super()}schedule(e,t=0){return this}};var Oa={setInterval(n,e,...t){let{delegate:r}=Oa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Oa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var No=class extends Qu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Oa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Oa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ri(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Po=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Po.now=_p.now;var Oo=class extends Po{constructor(e,t=Po.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var wp=new Oo(No);var Yu=class extends No{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Zu=class extends Oo{};var Ip=new Zu(Yu);var Kt=new ye(n=>n.complete());function bE(n){return n&&ae(n.schedule)}function CE(n){return n[n.length-1]}function Ju(n){return ae(CE(n))?n.pop():void 0}function Ur(n){return bE(CE(n))?n.pop():void 0}function Ep(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function SE(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function TE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pi(n){return this instanceof Pi?(this.v=n,this):new Pi(n)}function AE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(_){return function(x){return Promise.resolve(x).then(_,p)}}function a(_,x){r[_]&&(i[_]=function(O){return new Promise(function(N,B){o.push([_,O,N,B])>1||u(_,O)})},x&&(i[_]=x(i[_])))}function u(_,x){try{l(r[_](x))}catch(O){y(o[0][3],O)}}function l(_){_.value instanceof Pi?Promise.resolve(_.value.v).then(h,p):y(o[0][2],_)}function h(_){u("next",_)}function p(_){u("throw",_)}function y(_,x){_(x),o.shift(),o.length&&u(o[0][0],o[0][1])}}function xE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof TE=="function"?TE(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Xu=n=>n&&typeof n.length=="number"&&typeof n!="function";function el(n){return ae(n?.then)}function tl(n){return ae(n[xo])}function nl(n){return Symbol.asyncIterator&&ae(n?.[Symbol.asyncIterator])}function rl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function SM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var il=SM();function ol(n){return ae(n?.[il])}function sl(n){return AE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Pi(t.read());if(i)return yield Pi(void 0);yield yield Pi(r)}}finally{t.releaseLock()}})}function al(n){return ae(n?.getReader)}function tt(n){if(n instanceof ye)return n;if(n!=null){if(tl(n))return AM(n);if(Xu(n))return xM(n);if(el(n))return RM(n);if(nl(n))return RE(n);if(ol(n))return MM(n);if(al(n))return NM(n)}throw rl(n)}function AM(n){return new ye(e=>{let t=n[xo]();if(ae(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function xM(n){return new ye(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function RM(n){return new ye(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,zu)})}function MM(n){return new ye(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function RE(n){return new ye(e=>{PM(n,e).catch(t=>e.error(t))})}function NM(n){return RE(sl(n))}function PM(n,e){var t,r,i,o;return SE(this,void 0,void 0,function*(){try{for(t=xE(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ht(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Br(n,e=0){return Ee((t,r)=>{t.subscribe(ve(r,i=>Ht(r,n,()=>r.next(i),e),()=>Ht(r,n,()=>r.complete(),e),i=>Ht(r,n,()=>r.error(i),e)))})}function $r(n,e=0){return Ee((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function ME(n,e){return tt(n).pipe($r(e),Br(e))}function NE(n,e){return tt(n).pipe($r(e),Br(e))}function PE(n,e){return new ye(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function OE(n,e){return new ye(t=>{let r;return Ht(t,e,()=>{r=n[il](),Ht(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ae(r?.return)&&r.return()})}function cl(n,e){if(!n)throw new Error("Iterable cannot be null");return new ye(t=>{Ht(t,e,()=>{let r=n[Symbol.asyncIterator]();Ht(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function kE(n,e){return cl(sl(n),e)}function FE(n,e){if(n!=null){if(tl(n))return ME(n,e);if(Xu(n))return PE(n,e);if(el(n))return NE(n,e);if(nl(n))return cl(n,e);if(ol(n))return OE(n,e);if(al(n))return kE(n,e)}throw rl(n)}function Ve(n,e){return e?FE(n,e):tt(n)}function Z(...n){let e=Ur(n);return Ve(n,e)}function ko(n,e){let t=ae(n)?n:()=>n,r=i=>i.error(t());return new ye(e?i=>e.schedule(r,0,i):r)}function Dp(n){return!!n&&(n instanceof ye||ae(n.lift)&&ae(n.subscribe))}var yn=To(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function bp(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new jr({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new yn)}});n.subscribe(o)})}function J(n,e){return Ee((t,r)=>{let i=0;t.subscribe(ve(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:OM}=Array;function kM(n,e){return OM(e)?n(...e):n(e)}function ul(n){return J(e=>kM(n,e))}var{isArray:FM}=Array,{getPrototypeOf:VM,prototype:LM,keys:jM}=Object;function ll(n){if(n.length===1){let e=n[0];if(FM(e))return{args:e,keys:null};if(UM(e)){let t=jM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function UM(n){return n&&typeof n=="object"&&VM(n)===LM}function dl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Oi(...n){let e=Ur(n),t=Ju(n),{args:r,keys:i}=ll(n);if(r.length===0)return Ve([],e);let o=new ye(BM(r,e,i?s=>dl(i,s):Wt));return t?o.pipe(ul(t)):o}function BM(n,e,t=Wt){return r=>{VE(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)VE(e,()=>{let l=Ve(n[u],e),h=!1;l.subscribe(ve(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function VE(n,e,t){n?Ht(t,n,e):e()}function LE(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},_=O=>l<r?x(O):u.push(O),x=O=>{o&&e.next(O),l++;let N=!1;tt(t(O,h++)).subscribe(ve(e,B=>{i?.(B),o?_(B):e.next(B)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let B=u.shift();s?Ht(e,s,()=>x(B)):x(B)}y()}catch(B){e.error(B)}}))};return n.subscribe(ve(e,_,()=>{p=!0,y()})),()=>{a?.()}}function nt(n,e,t=1/0){return ae(e)?nt((r,i)=>J((o,s)=>e(r,o,i,s))(tt(n(r,i))),t):(typeof e=="number"&&(t=e),Ee((r,i)=>LE(r,i,n,t)))}function Fo(n=1/0){return nt(Wt,n)}function jE(){return Fo(1)}function Vo(...n){return jE()(Ve(n,Ur(n)))}function hl(n){return new ye(e=>{tt(n()).subscribe(e)})}function Cp(...n){let e=Ju(n),{args:t,keys:r}=ll(n),i=new ye(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;tt(t[h]).subscribe(ve(o,y=>{p||(p=!0,l--),a[h]=y},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?dl(r,a):a),o.complete())}))}});return e?i.pipe(ul(e)):i}function Qt(n,e){return Ee((t,r)=>{let i=0;t.subscribe(ve(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Hr(n){return Ee((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ve(t,void 0,void 0,s=>{o=tt(n(s,Hr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function UE(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(ve(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function ki(n,e){return ae(e)?nt(n,e,1):nt(n,1)}function qr(n){return Ee((e,t)=>{let r=!1;e.subscribe(ve(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ft(n){return n<=0?()=>Kt:Ee((e,t)=>{let r=0;e.subscribe(ve(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Tp(n){return J(()=>n)}function fl(n=$M){return Ee((e,t)=>{let r=!1;e.subscribe(ve(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function $M(){return new yn}function ka(n){return Ee((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Mn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Qt((i,o)=>n(i,o,r)):Wt,ft(1),t?qr(e):fl(()=>new yn))}function Lo(n){return n<=0?()=>Kt:Ee((e,t)=>{let r=[];e.subscribe(ve(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Sp(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Qt((i,o)=>n(i,o,r)):Wt,Lo(1),t?qr(e):fl(()=>new yn))}function pl(n,e){return Ee(UE(n,e,arguments.length>=2,!0))}function ml(...n){let e=Ur(n);return Ee((t,r)=>{(e?Vo(n,t,e):Vo(n,t)).subscribe(r)})}function Vt(n,e){return Ee((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ve(r,u=>{i?.unsubscribe();let l=0,h=o++;tt(n(u,h)).subscribe(i=ve(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ap(n){return Ee((e,t)=>{tt(n).subscribe(ve(t,()=>t.complete(),Pa)),!t.closed&&e.subscribe(t)})}function lt(n,e,t){let r=ae(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ee((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ve(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Wt}var C0="https://g.co/ng/security#xss",z=class extends Error{constructor(e,t){super(Nm(e,t)),this.code=e}};function Nm(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function qa(n){return{toString:n}.toString()}var gl="__parameters__";function HM(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function T0(n,e,t){return qa(()=>{let r=HM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(gl)?u[gl]:Object.defineProperty(u,gl,{value:[]})[gl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var $p=globalThis;function Ne(n){for(let e in n)if(n[e]===Ne)return e;throw Error("Could not find renamed property on target object.")}function qM(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function jt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(jt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function BE(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var zM=Ne({__forward_ref__:Ne});function Ln(n){return n.__forward_ref__=Ln,n.toString=function(){return jt(this())},n}function Lt(n){return S0(n)?n():n}function S0(n){return typeof n=="function"&&n.hasOwnProperty(zM)&&n.__forward_ref__===Ln}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ei(n){return{providers:n.providers||[],imports:n.imports||[]}}function Zl(n){return $E(n,x0)||$E(n,R0)}function A0(n){return Zl(n)!==null}function $E(n,e){return n.hasOwnProperty(e)?n[e]:null}function GM(n){let e=n&&(n[x0]||n[R0]);return e||null}function HE(n){return n&&(n.hasOwnProperty(qE)||n.hasOwnProperty(WM))?n[qE]:null}var x0=Ne({\u0275prov:Ne}),qE=Ne({\u0275inj:Ne}),R0=Ne({ngInjectableDef:Ne}),WM=Ne({ngInjectorDef:Ne}),G=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function M0(n){return n&&!!n.\u0275providers}var KM=Ne({\u0275cmp:Ne}),QM=Ne({\u0275dir:Ne}),YM=Ne({\u0275pipe:Ne}),ZM=Ne({\u0275mod:Ne}),Tl=Ne({\u0275fac:Ne}),Va=Ne({__NG_ELEMENT_ID__:Ne}),zE=Ne({__NG_ENV_ID__:Ne});function zo(n){return typeof n=="string"?n:n==null?"":String(n)}function JM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():zo(n)}function XM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new z(-200,n)}function Pm(n,e){throw new z(-201,!1)}var fe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(fe||{}),Hp;function N0(){return Hp}function qt(n){let e=Hp;return Hp=n,e}function P0(n,e,t){let r=Zl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&fe.Optional)return null;if(e!==void 0)return e;Pm(n,"Injector")}var eN={},La=eN,qp="__NG_DI_FLAG__",Sl="ngTempTokenPath",tN="ngTokenPath",nN=/\n/gm,rN="\u0275",GE="__source",Ho;function iN(){return Ho}function zr(n){let e=Ho;return Ho=n,e}function oN(n,e=fe.Default){if(Ho===void 0)throw new z(-203,!1);return Ho===null?P0(n,void 0,e):Ho.get(n,e&fe.Optional?null:void 0,e)}function X(n,e=fe.Default){return(N0()||oN)(Lt(n),e)}function F(n,e=fe.Default){return X(n,Jl(e))}function Jl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function zp(n){let e=[];for(let t=0;t<n.length;t++){let r=Lt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new z(900,!1);let i,o=fe.Default;for(let s=0;s<r.length;s++){let a=r[s],u=sN(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(X(i,o))}else e.push(X(r))}return e}function O0(n,e){return n[qp]=e,n.prototype[qp]=e,n}function sN(n){return n[qp]}function aN(n,e,t,r){let i=n[Sl];throw e[GE]&&i.unshift(e[GE]),n.message=cN(`
`+n.message,i,t,r),n[tN]=i,n[Sl]=null,n}function cN(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==rN?n.slice(2):n;let i=jt(e);if(Array.isArray(e))i=e.map(jt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):jt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(nN,`
  `)}`}var Tt=O0(T0("Optional"),8);var Om=O0(T0("SkipSelf"),4);function Vi(n,e){let t=n.hasOwnProperty(Tl);return t?n[Tl]:null}function km(n,e){n.forEach(t=>Array.isArray(t)?km(t,e):e(t))}function k0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Al(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function uN(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function lN(n,e,t){let r=za(n,e);return r>=0?n[r|1]=t:(r=~r,uN(n,r,e,t)),r}function xp(n,e){let t=za(n,e);if(t>=0)return n[t|1]}function za(n,e){return dN(n,e,1)}function dN(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Go={},rn=[],Wo=new G(""),F0=new G("",-1),V0=new G(""),xl=class{get(e,t=La){if(t===La){let r=new Error(`NullInjectorError: No provider for ${jt(e)}!`);throw r.name="NullInjectorError",r}return t}},L0=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(L0||{}),On=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(On||{}),Kr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Kr||{});function hN(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Gp(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];fN(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function j0(n){return n===3||n===4||n===6}function fN(n){return n.charCodeAt(0)===64}function ja(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?WE(n,t,i,null,e[++r]):WE(n,t,i,null,null))}}return n}function WE(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var U0="ng-template";function pN(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&hN(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Fm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Fm(n){return n.type===4&&n.value!==U0}function mN(n,e,t){let r=n.type===4&&!t?U0:n.value;return e===r}function gN(n,e,t){let r=4,i=n.attrs,o=i!==null?_N(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!vn(r)&&!vn(u))return!1;if(s&&vn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!mN(n,u,t)||u===""&&e.length===1){if(vn(r))return!1;s=!0}}else if(r&8){if(i===null||!pN(n,i,u,t)){if(vn(r))return!1;s=!0}}else{let l=e[++a],h=yN(u,i,Fm(n),t);if(h===-1){if(vn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(vn(r))return!1;s=!0}}}}return vn(r)||s}function vn(n){return(n&1)===0}function yN(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return wN(e,n)}function vN(n,e,t=!1){for(let r=0;r<e.length;r++)if(gN(n,e[r],t))return!0;return!1}function _N(n){for(let e=0;e<n.length;e++){let t=n[e];if(j0(t))return e}return n.length}function wN(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function KE(n,e){return n?":not("+e.trim()+")":e}function IN(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!vn(s)&&(e+=KE(o,i),i=""),r=s,o=o||!vn(r);t++}return i!==""&&(e+=KE(o,i)),e}function EN(n){return n.map(IN).join(",")}function DN(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!vn(i))break;i=o}r++}return{attrs:e,classes:t}}function Le(n){return qa(()=>{let e=G0(n),t=he(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===L0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||On.Emulated,styles:n.styles||rn,_:null,schemas:n.schemas||null,tView:null,id:""});W0(t);let r=n.dependencies;return t.directiveDefs=YE(r,!1),t.pipeDefs=YE(r,!0),t.id=TN(t),t})}function bN(n){return Qr(n)||$0(n)}function CN(n){return n!==null}function ti(n){return qa(()=>({type:n.type,bootstrap:n.bootstrap||rn,declarations:n.declarations||rn,imports:n.imports||rn,exports:n.exports||rn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function QE(n,e){if(n==null)return Go;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Kr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Kr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Be(n){return qa(()=>{let e=G0(n);return W0(e),e})}function B0(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Qr(n){return n[KM]||null}function $0(n){return n[QM]||null}function H0(n){return n[YM]||null}function q0(n){let e=Qr(n)||$0(n)||H0(n);return e!==null?e.standalone:!1}function z0(n,e){let t=n[ZM]||null;if(!t&&e===!0)throw new Error(`Type ${jt(n)} does not have '\u0275mod' property.`);return t}function G0(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Go,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||rn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:QE(n.inputs,e),outputs:QE(n.outputs),debugInfo:null}}function W0(n){n.features?.forEach(e=>e(n))}function YE(n,e){if(!n)return null;let t=e?H0:bN;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(CN)}function TN(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function jn(n){return{\u0275providers:n}}function SN(...n){return{\u0275providers:K0(!0,n),\u0275fromNgModule:!0}}function K0(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return km(e,s=>{let a=s;Wp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Q0(i,o),t}function Q0(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Vm(i,o=>{e(o,r)})}}function Wp(n,e,t,r){if(n=Lt(n),!n)return!1;let i=null,o=HE(n),s=!o&&Qr(n);if(!o&&!s){let u=n.ngModule;if(o=HE(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Wp(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{km(o.imports,h=>{Wp(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Q0(l,e)}if(!a){let l=Vi(i)||(()=>new i);e({provide:i,useFactory:l,deps:rn},i),e({provide:V0,useValue:i,multi:!0},i),e({provide:Wo,useValue:()=>X(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Vm(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Vm(n,e){for(let t of n)M0(t)&&(t=t.\u0275providers),Array.isArray(t)?Vm(t,e):e(t)}var AN=Ne({provide:String,useValue:Ne});function Y0(n){return n!==null&&typeof n=="object"&&AN in n}function xN(n){return!!(n&&n.useExisting)}function RN(n){return!!(n&&n.useFactory)}function Ko(n){return typeof n=="function"}function MN(n){return!!n.useClass}var Xl=new G(""),Il={},NN={},Rp;function Lm(){return Rp===void 0&&(Rp=new xl),Rp}var Yt=class{},Ua=class extends Yt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Qp(e,s=>this.processProvider(s)),this.records.set(F0,jo(void 0,this)),i.has("environment")&&this.records.set(Yt,jo(void 0,this));let o=this.records.get(Xl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(V0,rn,fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=be(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),be(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=zr(this),r=qt(void 0),i;try{return e()}finally{zr(t),qt(r)}}get(e,t=La,r=fe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(zE))return e[zE](this);r=Jl(r);let i,o=zr(this),s=qt(void 0);try{if(!(r&fe.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=VN(e)&&Zl(e);l&&this.injectableDefInScope(l)?u=jo(Kp(e),Il):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&fe.Self?Lm():this.parent;return t=r&fe.Optional&&t===La?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Sl]=a[Sl]||[]).unshift(jt(e)),o)throw a;return aN(a,e,"R3InjectorError",this.source)}else throw a}finally{qt(s),zr(o)}}resolveInjectorInitializers(){let e=be(null),t=zr(this),r=qt(void 0),i;try{let o=this.get(Wo,rn,fe.Self);for(let s of o)s()}finally{zr(t),qt(r),be(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(jt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new z(205,!1)}processProvider(e){e=Lt(e);let t=Ko(e)?e:Lt(e&&e.provide),r=ON(e);if(!Ko(e)&&e.multi===!0){let i=this.records.get(t);i||(i=jo(void 0,Il,!0),i.factory=()=>zp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=be(null);try{return t.value===Il&&(t.value=NN,t.value=t.factory()),typeof t.value=="object"&&t.value&&FN(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{be(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Lt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Kp(n){let e=Zl(n),t=e!==null?e.factory:Vi(n);if(t!==null)return t;if(n instanceof G)throw new z(204,!1);if(n instanceof Function)return PN(n);throw new z(204,!1)}function PN(n){if(n.length>0)throw new z(204,!1);let t=GM(n);return t!==null?()=>t.factory(n):()=>new n}function ON(n){if(Y0(n))return jo(void 0,n.useValue);{let e=Z0(n);return jo(e,Il)}}function Z0(n,e,t){let r;if(Ko(n)){let i=Lt(n);return Vi(i)||Kp(i)}else if(Y0(n))r=()=>Lt(n.useValue);else if(RN(n))r=()=>n.useFactory(...zp(n.deps||[]));else if(xN(n))r=()=>X(Lt(n.useExisting));else{let i=Lt(n&&(n.useClass||n.provide));if(kN(n))r=()=>new i(...zp(n.deps));else return Vi(i)||Kp(i)}return r}function jo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function kN(n){return!!n.deps}function FN(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function VN(n){return typeof n=="function"||typeof n=="object"&&n instanceof G}function Qp(n,e){for(let t of n)Array.isArray(t)?Qp(t,e):t&&M0(t)?Qp(t.\u0275providers,e):e(t)}function Un(n,e){n instanceof Ua&&n.assertNotDestroyed();let t,r=zr(n),i=qt(void 0);try{return e()}finally{zr(r),qt(i)}}function J0(){return N0()!==void 0||iN()!=null}function LN(n){if(!J0())throw new z(-203,!1)}function jN(n){return typeof n=="function"}var fr=0,ge=1,ne=2,Ut=3,_n=4,In=5,Rl=6,Ml=7,wn=8,Qo=9,kn=10,it=11,Ba=12,ZE=13,os=14,Fn=15,Yo=16,Uo=17,Zo=18,ed=19,X0=20,Gr=21,Mp=22,on=23,an=25,eD=1;var Li=7,Nl=8,Pl=9,sn=10,Ol=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Ol||{});function Wr(n){return Array.isArray(n)&&typeof n[eD]=="object"}function pr(n){return Array.isArray(n)&&n[eD]===!0}function jm(n){return(n.flags&4)!==0}function td(n){return n.componentOffset>-1}function nd(n){return(n.flags&1)===1}function Yr(n){return!!n.template}function Yp(n){return(n[ne]&512)!==0}var Zp=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function tD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function ni(){return nD}function nD(n){return n.type.prototype.ngOnChanges&&(n.setInput=BN),UN}ni.ngInherit=!0;function UN(){let n=iD(this),e=n?.current;if(e){let t=n.previous;if(t===Go)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function BN(n,e,t,r,i){let o=this.declaredInputs[r],s=iD(n)||$N(n,{previous:Go,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Zp(l&&l.currentValue,t,u===Go),tD(n,e,i,t)}var rD="__ngSimpleChanges__";function iD(n){return n[rD]||null}function $N(n,e){return n[rD]=e}var JE=null;var Nn=function(n,e,t){JE?.(n,e,t)},oD="svg",HN="math";function Vn(n){for(;Array.isArray(n);)n=n[fr];return n}function sD(n,e){return Vn(e[n])}function cn(n,e){return Vn(e[n.index])}function aD(n,e){return n.data[e]}function cD(n,e){return n[e]}function ri(n,e){let t=e[n];return Wr(t)?t:t[fr]}function Um(n){return(n[ne]&128)===128}function qN(n){return pr(n[Ut])}function Jo(n,e){return e==null?null:n[e]}function uD(n){n[Uo]=0}function lD(n){n[ne]&1024||(n[ne]|=1024,Um(n)&&id(n))}function zN(n,e){for(;n>0;)e=e[os],n--;return e}function rd(n){return!!(n[ne]&9216||n[on]?.dirty)}function Jp(n){n[kn].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),rd(n)&&id(n)}function id(n){n[kn].changeDetectionScheduler?.notify(0);let e=ji(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!Um(e)));)e=ji(e)}function dD(n,e){if((n[ne]&256)===256)throw new z(911,!1);n[Gr]===null&&(n[Gr]=[]),n[Gr].push(e)}function GN(n,e){if(n[Gr]===null)return;let t=n[Gr].indexOf(e);t!==-1&&n[Gr].splice(t,1)}function ji(n){let e=n[Ut];return pr(e)?e[Ut]:e}var le={lFrame:ID(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var hD=!1;function WN(){return le.lFrame.elementDepthCount}function KN(){le.lFrame.elementDepthCount++}function QN(){le.lFrame.elementDepthCount--}function fD(){return le.bindingsEnabled}function YN(){return le.skipHydrationRootTNode!==null}function ZN(n){return le.skipHydrationRootTNode===n}function JN(){le.skipHydrationRootTNode=null}function Se(){return le.lFrame.lView}function St(){return le.lFrame.tView}function re(n){return le.lFrame.contextLView=n,n[wn]}function ie(n){return le.lFrame.contextLView=null,n}function At(){let n=pD();for(;n!==null&&n.type===64;)n=n.parent;return n}function pD(){return le.lFrame.currentTNode}function XN(){let n=le.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function qi(n,e){let t=le.lFrame;t.currentTNode=n,t.isParent=e}function Bm(){return le.lFrame.isParent}function mD(){le.lFrame.isParent=!1}function eP(){return le.lFrame.contextLView}function gD(){return hD}function XE(n){hD=n}function $m(){let n=le.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function tP(){return le.lFrame.bindingIndex}function nP(n){return le.lFrame.bindingIndex=n}function od(){return le.lFrame.bindingIndex++}function yD(n){let e=le.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function rP(){return le.lFrame.inI18n}function iP(n,e){let t=le.lFrame;t.bindingIndex=t.bindingRootIndex=n,Xp(e)}function oP(){return le.lFrame.currentDirectiveIndex}function Xp(n){le.lFrame.currentDirectiveIndex=n}function sP(n){let e=le.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function vD(n){le.lFrame.currentQueryIndex=n}function aP(n){let e=n[ge];return e.type===2?e.declTNode:e.type===1?n[In]:null}function _D(n,e,t){if(t&fe.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&fe.Host);)if(i=aP(o),i===null||(o=o[os],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=le.lFrame=wD();return r.currentTNode=e,r.lView=n,!0}function Hm(n){let e=wD(),t=n[ge];le.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function wD(){let n=le.lFrame,e=n===null?null:n.child;return e===null?ID(n):e}function ID(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function ED(){let n=le.lFrame;return le.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var DD=ED;function qm(){let n=ED();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function cP(n){return(le.lFrame.contextLView=zN(n,le.lFrame.contextLView))[wn]}function zi(){return le.lFrame.selectedIndex}function Ui(n){le.lFrame.selectedIndex=n}function zm(){let n=le.lFrame;return aD(n.tView,n.selectedIndex)}function bD(){le.lFrame.currentNamespace=oD}function CD(){uP()}function uP(){le.lFrame.currentNamespace=null}function lP(){return le.lFrame.currentNamespace}var TD=!0;function sd(){return TD}function ad(n){TD=n}function dP(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=nD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function cd(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function El(n,e,t){SD(n,e,3,t)}function Dl(n,e,t,r){(n[ne]&3)===t&&SD(n,e,t,r)}function Np(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function SD(n,e,t,r){let i=r!==void 0?n[Uo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Uo]+=65536),(a<o||o==-1)&&(hP(n,t,e,u),n[Uo]=(n[Uo]&4294901760)+u+2),u++}function e0(n,e){Nn(4,n,e);let t=be(null);try{e.call(n)}finally{be(t),Nn(5,n,e)}}function hP(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[Uo]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,e0(a,o)):e0(a,o)}var qo=-1,Bi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function fP(n){return n instanceof Bi}function pP(n){return(n.flags&8)!==0}function mP(n){return(n.flags&16)!==0}var Pp={},em=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Jl(r);let i=this.injector.get(e,Pp,r);return i!==Pp||t===Pp?i:this.parentInjector.get(e,t,r)}};function AD(n){return n!==qo}function kl(n){return n&32767}function gP(n){return n>>16}function Fl(n,e){let t=gP(n),r=e;for(;t>0;)r=r[os],t--;return r}var tm=!0;function Vl(n){let e=tm;return tm=n,e}var yP=256,xD=yP-1,RD=5,vP=0,Pn={};function _P(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Va)&&(r=t[Va]),r==null&&(r=t[Va]=vP++);let i=r&xD,o=1<<i;e.data[n+(i>>RD)]|=o}function Ll(n,e){let t=MD(n,e);if(t!==-1)return t;let r=e[ge];r.firstCreatePass&&(n.injectorIndex=e.length,Op(r.data,n),Op(e,null),Op(r.blueprint,null));let i=Gm(n,e),o=n.injectorIndex;if(AD(i)){let s=kl(i),a=Fl(i,e),u=a[ge].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Op(n,e){n.push(0,0,0,0,0,0,0,0,e)}function MD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Gm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=FD(i),r===null)return qo;if(t++,i=i[os],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return qo}function nm(n,e,t){_P(n,e,t)}function wP(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(j0(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function ND(n,e,t){if(t&fe.Optional||n!==void 0)return n;Pm(e,"NodeInjector")}function PD(n,e,t,r){if(t&fe.Optional&&r===void 0&&(r=null),!(t&(fe.Self|fe.Host))){let i=n[Qo],o=qt(void 0);try{return i?i.get(e,r,t&fe.Optional):P0(e,r,t&fe.Optional)}finally{qt(o)}}return ND(r,e,t)}function OD(n,e,t,r=fe.Default,i){if(n!==null){if(e[ne]&2048&&!(r&fe.Self)){let s=CP(n,e,t,r,Pn);if(s!==Pn)return s}let o=kD(n,e,t,r,Pn);if(o!==Pn)return o}return PD(e,t,r,i)}function kD(n,e,t,r,i){let o=DP(t);if(typeof o=="function"){if(!_D(e,n,r))return r&fe.Host?ND(i,t,r):PD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&fe.Optional))Pm(t);else return s}finally{DD()}}else if(typeof o=="number"){let s=null,a=MD(n,e),u=qo,l=r&fe.Host?e[Fn][In]:null;for((a===-1||r&fe.SkipSelf)&&(u=a===-1?Gm(n,e):e[a+8],u===qo||!n0(r,!1)?a=-1:(s=e[ge],a=kl(u),e=Fl(u,e)));a!==-1;){let h=e[ge];if(t0(o,a,h.data)){let p=IP(a,e,t,s,r,l);if(p!==Pn)return p}u=e[a+8],u!==qo&&n0(r,e[ge].data[a+8]===l)&&t0(o,a,e)?(s=h,a=kl(u),e=Fl(u,e)):a=-1}}return i}function IP(n,e,t,r,i,o){let s=e[ge],a=s.data[n+8],u=r==null?td(a)&&tm:r!=s&&(a.type&3)!==0,l=i&fe.Host&&o===a,h=EP(a,s,t,u,l);return h!==null?Xo(e,s,h,a):Pn}function EP(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,y=i?a+h:l;for(let _=p;_<y;_++){let x=s[_];if(_<u&&t===x||_>=u&&x.type===t)return _}if(i){let _=s[u];if(_&&Yr(_)&&_.type===t)return u}return null}function Xo(n,e,t,r){let i=n[t],o=e.data;if(fP(i)){let s=i;s.resolving&&XM(JM(o[t]));let a=Vl(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?qt(s.injectImpl):null,h=_D(n,r,fe.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&dP(t,o[t],e)}finally{l!==null&&qt(l),Vl(a),s.resolving=!1,DD()}}return i}function DP(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Va)?n[Va]:void 0;return typeof e=="number"?e>=0?e&xD:bP:e}function t0(n,e,t){let r=1<<n;return!!(t[e+(n>>RD)]&r)}function n0(n,e){return!(n&fe.Self)&&!(n&fe.Host&&e)}var Fi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return OD(this._tNode,this._lView,e,Jl(r),t)}};function bP(){return new Fi(At(),Se())}function mr(n){return qa(()=>{let e=n.prototype.constructor,t=e[Tl]||rm(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Tl]||rm(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function rm(n){return S0(n)?()=>{let e=rm(Lt(n));return e&&e()}:Vi(n)}function CP(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!(s[ne]&512);){let a=kD(o,s,t,r|fe.Self,Pn);if(a!==Pn)return a;let u=o.parent;if(!u){let l=s[X0];if(l){let h=l.get(t,Pn,r);if(h!==Pn)return h}u=FD(s),s=s[os]}o=u}return i}function FD(n){let e=n[ge],t=e.type;return t===2?e.declTNode:t===1?n[In]:null}function Wm(n){return wP(At(),n)}function r0(n,e=null,t=null,r){let i=VD(n,e,t,r);return i.resolveInjectorInitializers(),i}function VD(n,e=null,t=null,r,i=new Set){let o=[t||rn,SN(n)];return r=r||(typeof n=="object"?void 0:jt(n)),new Ua(o,e||Lm(),r||null,i)}var _t=class n{static{this.THROW_IF_NOT_FOUND=La}static{this.NULL=new xl}static create(e,t){if(Array.isArray(e))return r0({name:""},t,e,"");{let r=e.name??"";return r0({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=q({token:n,providedIn:"any",factory:()=>X(F0)})}static{this.__NG_ELEMENT_ID__=-1}};var TP=new G("");TP.__NG_ELEMENT_ID__=n=>{let e=At();if(e===null)throw new z(204,!1);if(e.type&2)return e.value;if(n&fe.Optional)return null;throw new z(204,!1)};var SP="ngOriginalError";function kp(n){return n[SP]}var LD=!0,Km=(()=>{class n{static{this.__NG_ELEMENT_ID__=AP}static{this.__NG_ENV_ID__=t=>t}}return n})(),im=class extends Km{constructor(e){super(),this._lView=e}onDestroy(e){return dD(this._lView,e),()=>GN(this._lView,e)}};function AP(){return new im(Se())}var ss=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ze(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}}return n})();var om=class extends ht{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,J0()&&(this.destroyRef=F(Km,{optional:!0})??void 0,this.pendingTasks=F(ss,{optional:!0})??void 0)}emit(e){let t=be(null);try{super.next(e)}finally{be(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof We&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},rt=om;function jl(...n){}function jD(n){let e,t;function r(){n=jl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function i0(n){return queueMicrotask(()=>n()),()=>{n=jl}}var Qm="isAngularZone",Ul=Qm+"_ID",xP=0,Ae=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rt(!1),this.onMicrotaskEmpty=new rt(!1),this.onStable=new rt(!1),this.onError=new rt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=LD}=e;if(typeof Zone>"u")throw new z(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,NP(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Qm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new z(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new z(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,RP,jl,jl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},RP={};function Ym(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function MP(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){jD(()=>{n.callbackScheduled=!1,sm(n),n.isCheckStableRunning=!0,Ym(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),sm(n)}function NP(n){let e=()=>{MP(n)},t=xP++;n._inner=n._inner.fork({name:"angular",properties:{[Qm]:!0,[Ul]:t,[Ul+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(PP(u))return r.invokeTask(o,s,a,u);try{return o0(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),s0(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return o0(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!OP(u)&&e(),s0(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,sm(n),Ym(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function sm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function o0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function s0(n){n._nesting--,Ym(n)}var am=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rt,this.onMicrotaskEmpty=new rt,this.onStable=new rt,this.onError=new rt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function PP(n){return UD(n,"__ignore_ng_zone__")}function OP(n){return UD(n,"__scheduler_tick__")}function UD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var lr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&kp(e);for(;t&&kp(t);)t=kp(t);return t||null}},kP=new G("",{providedIn:"root",factory:()=>{let n=F(Ae),e=F(lr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function FP(){return ud(At(),Se())}function ud(n,e){return new En(cn(n,e))}var En=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=FP}}return n})();function BD(n){return(n.flags&128)===128}var $D=new Map,VP=0;function LP(){return VP++}function jP(n){$D.set(n[ed],n)}function cm(n){$D.delete(n[ed])}var a0="__ngContext__";function Zr(n,e){Wr(e)?(n[a0]=e[ed],jP(e)):n[a0]=e}function HD(n){return zD(n[Ba])}function qD(n){return zD(n[_n])}function zD(n){for(;n!==null&&!pr(n);)n=n[_n];return n}var um;function GD(n){um=n}function UP(){if(um!==void 0)return um;if(typeof document<"u")return document;throw new z(210,!1)}var Zm=new G("",{providedIn:"root",factory:()=>BP}),BP="ng",Jm=new G(""),Bn=new G("",{providedIn:"platform",factory:()=>"unknown"});var Xm=new G("",{providedIn:"root",factory:()=>UP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var $P="h",HP="b";var qP=()=>null;function eg(n,e,t=!1){return qP(n,e,t)}var WD=!1,zP=new G("",{providedIn:"root",factory:()=>WD});var yl;function GP(){if(yl===void 0&&(yl=null,$p.trustedTypes))try{yl=$p.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return yl}function c0(n){return GP()?.createScriptURL(n)||n}var Bl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${C0})`}};function Ga(n){return n instanceof Bl?n.changingThisBreaksApplicationSecurity:n}function tg(n,e){let t=WP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${C0})`)}return t===e}function WP(n){return n instanceof Bl&&n.getTypeName()||null}var KP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function KD(n){return n=String(n),n.match(KP)?n:"unsafe:"+n}var ld=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ld||{});function QP(n){let e=YD();return e?e.sanitize(ld.URL,n)||"":tg(n,"URL")?Ga(n):KD(zo(n))}function YP(n){let e=YD();if(e)return c0(e.sanitize(ld.RESOURCE_URL,n)||"");if(tg(n,"ResourceURL"))return c0(Ga(n));throw new z(904,!1)}function ZP(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?YP:QP}function QD(n,e,t){return ZP(e,t)(n)}function YD(){let n=Se();return n&&n[kn].sanitizer}var JP=/^>|^->|<!--|-->|--!>|<!-$/g,XP=/(<|>)/g,e1="\u200B$1\u200B";function t1(n){return n.replace(JP,e=>e.replace(XP,e1))}function ZD(n){return n instanceof Function?n():n}function n1(n){return(n??F(_t)).get(Bn)==="browser"}var dr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(dr||{}),r1;function ng(n,e){return r1(n,e)}function Bo(n,e,t,r,i){if(r!=null){let o,s=!1;pr(r)?o=r:Wr(r)&&(s=!0,r=r[fr]);let a=Vn(r);n===0&&t!==null?i==null?nb(e,t,a):$l(e,t,a,i||null,!0):n===1&&t!==null?$l(e,t,a,i||null,!0):n===2?_1(e,a,s):n===3&&e.destroyNode(a),o!=null&&I1(e,n,o,t,i)}}function i1(n,e){return n.createText(e)}function o1(n,e,t){n.setValue(e,t)}function s1(n,e){return n.createComment(t1(e))}function JD(n,e,t){return n.createElement(e,t)}function a1(n,e){XD(n,e),e[fr]=null,e[In]=null}function c1(n,e,t,r,i,o){r[fr]=i,r[In]=e,hd(n,r,t,1,i,o)}function XD(n,e){e[kn].changeDetectionScheduler?.notify(9),hd(n,e,e[it],2,null,null)}function u1(n){let e=n[Ba];if(!e)return Fp(n[ge],n);for(;e;){let t=null;if(Wr(e))t=e[Ba];else{let r=e[sn];r&&(t=r)}if(!t){for(;e&&!e[_n]&&e!==n;)Wr(e)&&Fp(e[ge],e),e=e[Ut];e===null&&(e=n),Wr(e)&&Fp(e[ge],e),t=e&&e[_n]}e=t}}function l1(n,e,t,r){let i=sn+r,o=t.length;r>0&&(t[i-1][_n]=e),r<o-sn?(e[_n]=t[i],k0(t,sn+r,e)):(t.push(e),e[_n]=null),e[Ut]=t;let s=e[Yo];s!==null&&t!==s&&eb(s,e);let a=e[Zo];a!==null&&a.insertView(n),Jp(e),e[ne]|=128}function eb(n,e){let t=n[Pl],r=e[Ut];if(Wr(r))n[ne]|=Ol.HasTransplantedViews;else{let i=r[Ut][Fn];e[Fn]!==i&&(n[ne]|=Ol.HasTransplantedViews)}t===null?n[Pl]=[e]:t.push(e)}function rg(n,e){let t=n[Pl],r=t.indexOf(e);t.splice(r,1)}function lm(n,e){if(n.length<=sn)return;let t=sn+e,r=n[t];if(r){let i=r[Yo];i!==null&&i!==n&&rg(i,r),e>0&&(n[t-1][_n]=r[_n]);let o=Al(n,sn+e);a1(r[ge],r);let s=o[Zo];s!==null&&s.detachView(o[ge]),r[Ut]=null,r[_n]=null,r[ne]&=-129}return r}function tb(n,e){if(!(e[ne]&256)){let t=e[it];t.destroyNode&&hd(n,e,t,3,null,null),u1(e)}}function Fp(n,e){if(e[ne]&256)return;let t=be(null);try{e[ne]&=-129,e[ne]|=256,e[on]&&up(e[on]),h1(n,e),d1(n,e),e[ge].type===1&&e[it].destroy();let r=e[Yo];if(r!==null&&pr(e[Ut])){r!==e[Ut]&&rg(r,e);let i=e[Zo];i!==null&&i.detachView(n)}cm(e)}finally{be(t)}}function d1(n,e){let t=n.cleanup,r=e[Ml];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[Ml]=null);let i=e[Gr];if(i!==null){e[Gr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function h1(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Bi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Nn(4,a,u);try{u.call(a)}finally{Nn(5,a,u)}}else{Nn(4,i,o);try{o.call(i)}finally{Nn(5,i,o)}}}}}function f1(n,e,t){return p1(n,e.parent,t)}function p1(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[fr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===On.None||o===On.Emulated)return null}return cn(r,t)}}function $l(n,e,t,r,i){n.insertBefore(e,t,r,i)}function nb(n,e,t){n.appendChild(e,t)}function u0(n,e,t,r,i){r!==null?$l(n,e,t,r,i):nb(n,e,t)}function rb(n,e){return n.parentNode(e)}function m1(n,e){return n.nextSibling(e)}function g1(n,e,t){return v1(n,e,t)}function y1(n,e,t){return n.type&40?cn(n,t):null}var v1=y1,l0;function dd(n,e,t,r){let i=f1(n,r,e),o=e[it],s=r.parent||e[In],a=g1(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)u0(o,i,t[u],a,!1);else u0(o,i,t,a,!1);l0!==void 0&&l0(o,r,e,t,i)}function Fa(n,e){if(e!==null){let t=e.type;if(t&3)return cn(e,n);if(t&4)return dm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Fa(n,r);{let i=n[e.index];return pr(i)?dm(-1,i):Vn(i)}}else{if(t&128)return Fa(n,e.next);if(t&32)return ng(e,n)()||Vn(n[e.index]);{let r=ib(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ji(n[Fn]);return Fa(i,r)}else return Fa(n,e.next)}}}return null}function ib(n,e){if(e!==null){let r=n[Fn][In],i=e.projection;return r.projection[i]}return null}function dm(n,e){let t=sn+n+1;if(t<e.length){let r=e[t],i=r[ge].firstChild;if(i!==null)return Fa(r,i)}return e[Li]}function _1(n,e,t){n.removeChild(null,e,t)}function ig(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Zr(Vn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)ig(n,e,t.child,r,i,o,!1),Bo(e,n,i,a,o);else if(u&32){let l=ng(t,r),h;for(;h=l();)Bo(e,n,i,h,o);Bo(e,n,i,a,o)}else u&16?w1(n,e,r,t,i,o):Bo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function hd(n,e,t,r,i,o){ig(t,r,n.firstChild,e,i,o,!1)}function w1(n,e,t,r,i,o){let s=t[Fn],u=s[In].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Bo(e,n,i,h,o)}else{let l=u,h=s[Ut];BD(r)&&(l.flags|=128),ig(n,e,l,h,i,o,!0)}}function I1(n,e,t,r,i){let o=t[Li],s=Vn(t);o!==s&&Bo(e,n,r,o,i);for(let a=sn;a<t.length;a++){let u=t[a];hd(u[ge],u,n,e,r,o)}}function E1(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:dr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=dr.Important),n.setStyle(t,r,i,o))}}function D1(n,e,t){n.setAttribute(e,"style",t)}function ob(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function sb(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Gp(n,e,r),i!==null&&ob(n,e,i),o!==null&&D1(n,e,o)}var gr={};function k(n=1){ab(St(),Se(),zi()+n,!1)}function ab(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&El(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Dl(e,o,0,t)}Ui(t)}function U(n,e=fe.Default){let t=Se();if(t===null)return X(n,e);let r=At();return OD(r,t,Lt(n),e)}function cb(){let n="invalid";throw new Error(n)}function ub(n,e,t,r,i,o){let s=be(null);try{let a=null;i&Kr.SignalBased&&(a=e[r][ur]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Kr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):tD(e,a,r,o)}finally{be(s)}}function b1(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ui(~i);else{let o=i,s=t[++r],a=t[++r];iP(s,o);let u=e[o];a(2,u)}}}finally{Ui(-1)}}function fd(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[fr]=i,p[ne]=r|4|128|8|64,(l!==null||n&&n[ne]&2048)&&(p[ne]|=2048),uD(p),p[Ut]=p[os]=n,p[wn]=t,p[kn]=s||n&&n[kn],p[it]=a||n&&n[it],p[Qo]=u||n&&n[Qo]||null,p[In]=o,p[ed]=LP(),p[Rl]=h,p[X0]=l,p[Fn]=e.type==2?n[Fn]:p,p}function Wa(n,e,t,r,i){let o=n.data[e];if(o===null)o=C1(n,e,t,r,i),rP()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=XN();o.injectorIndex=s===null?-1:s.injectorIndex}return qi(o,!0),o}function C1(n,e,t,r,i){let o=pD(),s=Bm(),a=s?o:o&&o.parent,u=n.data[e]=R1(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function lb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function db(n,e,t,r,i){let o=zi(),s=r&2;try{Ui(-1),s&&e.length>an&&ab(n,e,an,!1),Nn(s?2:0,i),t(r,i)}finally{Ui(o),Nn(s?3:1,i)}}function og(n,e,t){if(jm(e)){let r=be(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{be(r)}}}function sg(n,e,t){fD()&&(F1(n,e,t,cn(t,e)),(t.flags&64)===64&&mb(n,e,t))}function ag(n,e,t=cn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function hb(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=cg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function cg(n,e,t,r,i,o,s,a,u,l,h){let p=an+r,y=p+i,_=T1(p,y),x=typeof l=="function"?l():l;return _[ge]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:x,incompleteFirstPass:!1,ssrId:h}}function T1(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:gr);return t}function S1(n,e,t,r){let o=r.get(zP,WD)||t===On.ShadowDom,s=n.selectRootElement(e,o);return A1(s),s}function A1(n){x1(n)}var x1=()=>null;function R1(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return YN()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function d0(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Kr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?h0(r,t,l,a,u):h0(r,t,l,a)}return r}function h0(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function M1(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],y=t?t.get(p):null,_=y?y.inputs:null,x=y?y.outputs:null;u=d0(0,p.inputs,h,u,_),l=d0(1,p.outputs,h,l,x);let O=u!==null&&s!==null&&!Fm(e)?W1(u,h,s):null;a.push(O)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function N1(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function fb(n,e,t,r,i,o,s,a){let u=cn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(lg(n,t,h,r,i),td(e)&&P1(t,e.index)):e.type&3?(r=N1(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function P1(n,e){let t=ri(e,n);t[ne]&16||(t[ne]|=64)}function ug(n,e,t,r){if(fD()){let i=r===null?null:{"":-1},o=L1(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&pb(n,e,t,s,i,a),i&&j1(t,r,i)}t.mergedAttrs=ja(t.mergedAttrs,t.attrs)}function pb(n,e,t,r,i,o){for(let l=0;l<r.length;l++)nm(Ll(t,e),n,r[l].type);B1(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=lb(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=ja(t.mergedAttrs,h.hostAttrs),$1(n,t,e,u,h),U1(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}M1(n,t,o)}function O1(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;k1(s)!=a&&s.push(a),s.push(t,r,o)}}function k1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function F1(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;td(t)&&H1(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Ll(t,e),Zr(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Xo(e,n,a,t);if(Zr(l,e),s!==null&&G1(e,a-i,l,u,t,s),Yr(u)){let h=ri(t.index,e);h[wn]=Xo(e,n,a,t)}}}function mb(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=oP();try{Ui(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Xp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&V1(u,l)}}finally{Ui(-1),Xp(s)}}function V1(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function L1(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(vN(e,s.selectors,!1))if(r||(r=[]),Yr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;hm(n,e,u)}else r.unshift(s),hm(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function hm(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function j1(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new z(-301,!1);r.push(e[i],o)}}}function U1(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Yr(e)&&(t[""]=n)}}function B1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function $1(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Vi(i.type,!0)),s=new Bi(o,Yr(i),U);n.blueprint[r]=s,t[r]=s,O1(n,e,r,lb(n,t,i.hostVars,gr),i)}function H1(n,e,t){let r=cn(e,n),i=hb(t),o=n[kn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=pd(n,fd(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function q1(n,e,t,r,i,o){let s=cn(n,e);z1(e[it],s,o,n.value,t,r,i)}function z1(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?zo(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function G1(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];ub(r,t,u,l,h,p)}}function W1(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function gb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function yb(n,e){let t=n.contentQueries;if(t!==null){let r=be(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];vD(o),a.contentQueries(2,e[s],s)}}}finally{be(r)}}}function pd(n,e){return n[Ba]?n[ZE][_n]=e:n[Ba]=e,n[ZE]=e,e}function fm(n,e,t){vD(0);let r=be(null);try{e(n,t)}finally{be(r)}}function K1(n){return n[Ml]??=[]}function Q1(n){return n.cleanup??=[]}function vb(n,e){let t=n[Qo],r=t?t.get(lr,null):null;r&&r.handleError(e)}function lg(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];ub(h,l,r,a,u,i)}}function _b(n,e,t){let r=sD(e,n);o1(n[it],r,t)}function Y1(n,e){let t=ri(e,n),r=t[ge];Z1(r,t);let i=t[fr];i!==null&&t[Rl]===null&&(t[Rl]=eg(i,t[Qo])),dg(r,t,t[wn])}function Z1(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function dg(n,e,t){Hm(e);try{let r=n.viewQuery;r!==null&&fm(1,r,t);let i=n.template;i!==null&&db(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Zo]?.finishViewCreation(n),n.staticContentQueries&&yb(n,e),n.staticViewQueries&&fm(2,n.viewQuery,t);let o=n.components;o!==null&&J1(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,qm()}}function J1(n,e){for(let t=0;t<e.length;t++)Y1(n,e[t])}function X1(n,e,t,r){let i=be(null);try{let o=e.tView,a=n[ne]&4096?4096:16,u=fd(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Yo]=l;let h=n[Zo];return h!==null&&(u[Zo]=h.createEmbeddedView(o)),dg(o,u,t),u}finally{be(i)}}function f0(n,e){return!e||e.firstChild===null||BD(n)}function eO(n,e,t,r=!0){let i=e[ge];if(l1(i,e,n,t),r){let s=dm(t,n),a=e[it],u=rb(a,n[Li]);u!==null&&c1(i,n[In],a,e,u,s)}let o=e[Rl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Hl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Vn(o)),pr(o)&&tO(o,r);let s=t.type;if(s&8)Hl(n,e,t.child,r);else if(s&32){let a=ng(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=ib(e,t);if(Array.isArray(a))r.push(...a);else{let u=ji(e[Fn]);Hl(u[ge],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function tO(n,e){for(let t=sn;t<n.length;t++){let r=n[t],i=r[ge].firstChild;i!==null&&Hl(r[ge],r,i,e)}n[Li]!==n[fr]&&e.push(n[Li])}var wb=[];function nO(n){return n[on]??rO(n)}function rO(n){let e=wb.pop()??Object.create(oO);return e.lView=n,e}function iO(n){n.lView[on]!==n&&(n.lView=null,wb.push(n))}var oO=he(L({},Na),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{id(n.lView)},consumerOnSignalRead(){this.lView[on]=this}});function sO(n){let e=n[on]??Object.create(aO);return e.lView=n,e}var aO=he(L({},Na),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ji(n.lView);for(;e&&!Ib(e[ge]);)e=ji(e);e&&lD(e)},consumerOnSignalRead(){this.lView[on]=this}});function Ib(n){return n.type!==2}var cO=100;function Eb(n,e=!0,t=0){let r=n[kn],i=r.rendererFactory,o=!1;o||i.begin?.();try{uO(n,t)}catch(s){throw e&&vb(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function uO(n,e){let t=gD();try{XE(!0),pm(n,e);let r=0;for(;rd(n);){if(r===cO)throw new z(103,!1);r++,pm(n,1)}}finally{XE(t)}}function lO(n,e,t,r){let i=e[ne];if((i&256)===256)return;let o=!1,s=!1;!o&&e[kn].inlineEffectRunner?.flush(),Hm(e);let a=!0,u=null,l=null;o||(Ib(n)?(l=nO(e),u=Uu(l)):rE()===null?(a=!1,l=sO(e),u=Uu(l)):e[on]&&(up(e[on]),e[on]=null));try{uD(e),nP(n.bindingStartIndex),t!==null&&db(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let _=n.preOrderCheckHooks;_!==null&&El(e,_,null)}else{let _=n.preOrderHooks;_!==null&&Dl(e,_,0,null),Np(e,0)}if(s||dO(e),Db(e,0),n.contentQueries!==null&&yb(n,e),!o)if(h){let _=n.contentCheckHooks;_!==null&&El(e,_)}else{let _=n.contentHooks;_!==null&&Dl(e,_,1),Np(e,1)}b1(n,e);let p=n.components;p!==null&&Cb(e,p,0);let y=n.viewQuery;if(y!==null&&fm(2,y,r),!o)if(h){let _=n.viewCheckHooks;_!==null&&El(e,_)}else{let _=n.viewHooks;_!==null&&Dl(e,_,2),Np(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Mp]){for(let _ of e[Mp])_();e[Mp]=null}o||(e[ne]&=-73)}catch(h){throw o||id(e),h}finally{l!==null&&(ap(l,u),a&&iO(l)),qm()}}function Db(n,e){for(let t=HD(n);t!==null;t=qD(t))for(let r=sn;r<t.length;r++){let i=t[r];bb(i,e)}}function dO(n){for(let e=HD(n);e!==null;e=qD(e)){if(!(e[ne]&Ol.HasTransplantedViews))continue;let t=e[Pl];for(let r=0;r<t.length;r++){let i=t[r];lD(i)}}}function hO(n,e,t){let r=ri(e,n);bb(r,t)}function bb(n,e){Um(n)&&pm(n,e)}function pm(n,e){let r=n[ge],i=n[ne],o=n[on],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&cp(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)lO(r,n,r.template,n[wn]);else if(i&8192){Db(n,1);let a=r.components;a!==null&&Cb(n,a,1)}}function Cb(n,e,t){for(let r=0;r<e.length;r++)hO(n,e[r],t)}function hg(n,e){let t=gD()?64:1088;for(n[kn].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=ji(n);if(Yp(n)&&!r)return n;n=r}return null}var $i=class{get rootNodes(){let e=this._lView,t=e[ge];return Hl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[wn]}set context(e){this._lView[wn]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ut];if(pr(e)){let t=e[Nl],r=t?t.indexOf(this):-1;r>-1&&(lm(e,r),Al(t,r))}this._attachedToViewContainer=!1}tb(this._lView[ge],this._lView)}onDestroy(e){dD(this._lView,e)}markForCheck(){hg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){Jp(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,Eb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Yp(this._lView),t=this._lView[Yo];t!==null&&!e&&rg(t,this._lView),XD(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new z(902,!1);this._appRef=e;let t=Yp(this._lView),r=this._lView[Yo];r!==null&&!t&&eb(r,this._lView),Jp(this._lView)}},md=(()=>{class n{static{this.__NG_ELEMENT_ID__=mO}}return n})(),fO=md,pO=class extends fO{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=X1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new $i(i)}};function mO(){return Tb(At(),Se())}function Tb(n,e){return n.type&4?new pO(e,n,ud(n,e)):null}var S5=new RegExp(`^(\\d+)*(${HP}|${$P})*(.*)`);var gO=()=>null;function p0(n,e){return gO(n,e)}var es=class{},gd=new G("",{providedIn:"root",factory:()=>!1});var Sb=new G(""),Ab=new G(""),mm=class{},ql=class{};function yO(n){let e=Error(`No component factory found for ${jt(n)}.`);return e[vO]=n,e}var vO="ngComponent";var gm=class{resolveComponentFactory(e){throw yO(e)}},ts=class{static{this.NULL=new gm}},ns=class{},$n=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>_O()}}return n})();function _O(){let n=Se(),e=At(),t=ri(e.index,n);return(Wr(t)?t:n)[it]}var wO=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>null})}}return n})();function zl(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=BE(i,a);else if(o==2){let u=a,l=e[++s];r=BE(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Gl=class extends ts{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Qr(e);return new rs(t,this.ngModule)}};function m0(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Kr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Kr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function IO(n){let e=n.toLowerCase();return e==="svg"?oD:e==="math"?HN:null}var rs=class extends ql{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=m0(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return m0(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=EN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=be(null);try{i=i||this.ngModule;let s=i instanceof Yt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new em(e,s):e,u=a.get(ns,null);if(u===null)throw new z(407,!1);let l=a.get(wO,null),h=a.get(es,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},y=u.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",x=r?S1(y,r,this.componentDef.encapsulation,a):JD(y,_,IO(_)),O=512;this.componentDef.signals?O|=4096:this.componentDef.onPush||(O|=16);let N=null;x!==null&&(N=eg(x,a,!0));let B=cg(0,null,null,1,0,null,null,null,null,null,null),Q=fd(null,B,null,O,null,null,p,y,a,null,N);Hm(Q);let Y,me,ze=null;try{let se=this.componentDef,b,v=null;se.findHostDirectiveDefs?(b=[],v=new Map,se.findHostDirectiveDefs(se,b,v),b.push(se)):b=[se];let w=EO(Q,x);ze=DO(w,x,se,b,Q,p,y),me=aD(B,an),x&&TO(y,se,x,r),t!==void 0&&SO(me,this.ngContentSelectors,t),Y=CO(ze,se,b,v,Q,[AO]),dg(B,Q,null)}catch(se){throw ze!==null&&cm(ze),cm(Q),se}finally{qm()}return new ym(this.componentType,Y,ud(me,Q),Q,me)}finally{be(o)}}},ym=class extends mm{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new $i(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;lg(o[ge],o,i,e,t),this.previousInputValues.set(e,t);let s=ri(this._tNode.index,o);hg(s,1)}}get injector(){return new Fi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function EO(n,e){let t=n[ge],r=an;return n[r]=e,Wa(t,r,2,"#host",null)}function DO(n,e,t,r,i,o,s){let a=i[ge];bO(r,n,e,s);let u=null;e!==null&&(u=eg(e,i[Qo]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=fd(i,hb(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&hm(a,n,r.length-1),pd(i,p),i[n.index]=p}function bO(n,e,t,r){for(let i of n)e.mergedAttrs=ja(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(zl(e,e.mergedAttrs,!0),t!==null&&sb(r,t,e))}function CO(n,e,t,r,i,o){let s=At(),a=i[ge],u=cn(s,i);pb(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,y=Xo(i,a,p,s);Zr(y,i)}mb(a,i,s),u&&Zr(u,i);let l=Xo(i,a,s.directiveStart+s.componentOffset,s);if(n[wn]=i[wn]=l,o!==null)for(let h of o)h(l,e);return og(a,s,i),l}function TO(n,e,t,r){if(r)Gp(n,t,["ng-version","18.2.10"]);else{let{attrs:i,classes:o}=DN(e.selectors[0]);i&&Gp(n,t,i),o&&o.length>0&&ob(n,t,o.join(" "))}}function SO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function AO(){let n=At();cd(Se()[ge],n)}var as=(()=>{class n{static{this.__NG_ELEMENT_ID__=xO}}return n})();function xO(){let n=At();return MO(n,Se())}var RO=as,xb=class extends RO{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ud(this._hostTNode,this._hostLView)}get injector(){return new Fi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Gm(this._hostTNode,this._hostLView);if(AD(e)){let t=Fl(e,this._hostLView),r=kl(e),i=t[ge].data[r+8];return new Fi(i,t)}else return new Fi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=g0(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-sn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=p0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,f0(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!jN(e),a;if(s)a=t;else{let x=t||{};a=x.index,r=x.injector,i=x.projectableNodes,o=x.environmentInjector||x.ngModuleRef}let u=s?e:new rs(Qr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let O=(s?l:this.parentInjector).get(Yt,null);O&&(o=O)}let h=Qr(u.componentType??{}),p=p0(this._lContainer,h?.id??null),y=p?.firstChild??null,_=u.create(l,i,y,o);return this.insertImpl(_.hostView,a,f0(this._hostTNode,p)),_}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(qN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ut],l=new xb(u,u[In],u[Ut]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return eO(s,i,o,r),e.attachToViewContainerRef(),k0(Vp(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=g0(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=lm(this._lContainer,t);r&&(Al(Vp(this._lContainer),t),tb(r[ge],r))}detach(e){let t=this._adjustIndex(e,-1),r=lm(this._lContainer,t);return r&&Al(Vp(this._lContainer),t)!=null?new $i(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function g0(n){return n[Nl]}function Vp(n){return n[Nl]||(n[Nl]=[])}function MO(n,e){let t,r=e[n.index];return pr(r)?t=r:(t=gb(r,e,null,n),e[n.index]=t,pd(e,t)),PO(t,e,n,r),new xb(t,n,e)}function NO(n,e){let t=n[it],r=t.createComment(""),i=cn(e,n),o=rb(t,i);return $l(t,o,r,m1(t,i),!1),r}var PO=FO,OO=()=>!1;function kO(n,e,t){return OO(n,e,t)}function FO(n,e,t,r){if(n[Li])return;let i;t.type&8?i=Vn(r):i=NO(e,t),n[Li]=i}var y0=new Set;function cs(n){y0.has(n)||(y0.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function VO(n){return typeof n=="function"&&n[ur]!==void 0}function Ka(n,e){cs("NgSignals");let t=pE(n),r=t[ur];return e?.equal&&(r.equal=e.equal),t.set=i=>lp(r,i),t.update=i=>mE(r,i),t.asReadonly=LO.bind(t),t}function LO(){let n=this[ur];if(n.readonlyFn===void 0){let e=()=>this();e[ur]=n,n.readonlyFn=e}return n.readonlyFn}function Rb(n){return VO(n)&&typeof n.set=="function"}function jO(n){return Object.getPrototypeOf(n.prototype).constructor}function un(n){let e=jO(n.type),t=!0,r=[n];for(;e;){let i;if(Yr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new z(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=vl(n.inputs),s.inputTransforms=vl(n.inputTransforms),s.declaredInputs=vl(n.declaredInputs),s.outputs=vl(n.outputs);let a=i.hostBindings;a&&qO(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&$O(n,u),l&&HO(n,l),UO(n,i),qM(n.outputs,i.outputs),Yr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===un&&(t=!1)}}e=Object.getPrototypeOf(e)}BO(r)}function UO(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function BO(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ja(i.hostAttrs,t=ja(t,i.hostAttrs))}}function vl(n){return n===Go?{}:n===rn?[]:n}function $O(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function HO(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function qO(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function fg(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Jr=class{},$a=class{};var vm=class extends Jr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Gl(this);let o=z0(e);this._bootstrapComponents=ZD(o.bootstrap),this._r3Injector=VD(e,t,[{provide:Jr,useValue:this},{provide:ts,useValue:this.componentFactoryResolver},...r],jt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},_m=class extends $a{constructor(e){super(),this.moduleType=e}create(e){return new vm(this.moduleType,e,[])}};var Wl=class extends Jr{constructor(e){super(),this.componentFactoryResolver=new Gl(this),this.instance=null;let t=new Ua([...e.providers,{provide:Jr,useValue:this},{provide:ts,useValue:this.componentFactoryResolver}],e.parent||Lm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function yd(n,e,t=null){return new Wl({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function Mb(n){return GO(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function zO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function GO(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Nb(n,e,t){return n[e]=t}function Xr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Pb(n,e,t,r){let i=Xr(n,e,t);return Xr(n,e+1,r)||i}function WO(n){return(n.flags&32)===32}function KO(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Wa(e,n,4,s||null,a||null);ug(e,t,h,Jo(l,u)),cd(e,h);let p=h.tView=cg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function QO(n,e,t,r,i,o,s,a,u,l){let h=t+an,p=e.firstCreatePass?KO(h,e,n,r,i,o,s,a,u):e.data[h];qi(p,!1);let y=YO(e,n,p,t);sd()&&dd(e,n,y,p),Zr(y,n);let _=gb(y,n,y,p);return n[h]=_,pd(n,_),kO(_,p,n),nd(p)&&sg(e,n,p),u!=null&&ag(n,p,l),p}function ce(n,e,t,r,i,o,s,a){let u=Se(),l=St(),h=Jo(l.consts,o);return QO(u,l,n,e,t,r,i,h,s,a),ce}var YO=ZO;function ZO(n,e,t,r){return ad(!0),e[it].createComment("")}var $o=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}($o||{}),Ob=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}}return n})(),wm=class n{constructor(){this.ngZone=F(Ae),this.scheduler=F(es),this.errorHandler=F(lr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[$o.EarlyRead,$o.Write,$o.MixedReadWrite,$o.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}},Im=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function pg(n,e){!e?.injector&&LN(pg);let t=e?.injector??F(_t);return n1(t)?(cs("NgAfterNextRender"),XO(n,t,e,!0)):ek}function JO(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function XO(n,e,t,r){let i=e.get(Ob);i.impl??=e.get(wm);let o=t?.phase??$o.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Km):null,a=new Im(i.impl,JO(n,o),r,s);return i.impl.register(a),a}var ek={destroy(){}};function Qa(n,e,t,r){let i=Se(),o=od();if(Xr(i,o,e)){let s=St(),a=zm();q1(a,i,n,e,t,r)}return Qa}function tk(n,e,t,r){return Xr(n,od(),t)?e+zo(t)+r:gr}function nk(n,e,t,r,i,o){let s=tP(),a=Pb(n,s,t,i);return yD(2),a?e+zo(t)+r+zo(i)+o:gr}function _l(n,e){return n<<17|e<<2}function Hi(n){return n>>17&32767}function rk(n){return(n&2)==2}function ik(n,e){return n&131071|e<<17}function Em(n){return n|2}function is(n){return(n&131068)>>2}function Lp(n,e){return n&-131069|e<<2}function ok(n){return(n&1)===1}function Dm(n){return n|1}function sk(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Hi(s),u=is(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||za(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let y=Hi(n[a+1]);n[r+1]=_l(y,a),y!==0&&(n[y+1]=Lp(n[y+1],r)),n[a+1]=ik(n[a+1],r)}else n[r+1]=_l(a,0),a!==0&&(n[a+1]=Lp(n[a+1],r)),a=r;else n[r+1]=_l(u,0),a===0?a=r:n[u+1]=Lp(n[u+1],r),u=r;l&&(n[r+1]=Em(n[r+1])),v0(n,h,r,!0),v0(n,h,r,!1),ak(e,h,n,r,o),s=_l(a,u),o?e.classBindings=s:e.styleBindings=s}function ak(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&za(o,e)>=0&&(t[r+1]=Dm(t[r+1]))}function v0(n,e,t,r){let i=n[t+1],o=e===null,s=r?Hi(i):is(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];ck(u,e)&&(a=!0,n[s+1]=r?Dm(l):Em(l)),s=r?Hi(l):is(l)}a&&(n[t+1]=r?Em(i):Dm(i))}function ck(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?za(n,e)>=0:!1}function W(n,e,t){let r=Se(),i=od();if(Xr(r,i,e)){let o=St(),s=zm();fb(o,s,r,n,e,r[it],t,!1)}return W}function _0(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";lg(n,t,o[s],s,r)}function vd(n,e){return uk(n,e,null,!0),vd}function uk(n,e,t,r){let i=Se(),o=St(),s=yD(2);if(o.firstUpdatePass&&dk(o,n,s,r),e!==gr&&Xr(i,s,e)){let a=o.data[zi()];gk(o,a,i,i[it],n,i[s+1]=yk(e,t),r,s)}}function lk(n,e){return e>=n.expandoStartIndex}function dk(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[zi()],s=lk(n,t);vk(o,r)&&e===null&&!s&&(e=!1),e=hk(i,o,e,r),sk(i,o,e,t,s,r)}}function hk(n,e,t,r){let i=sP(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=jp(null,n,e,t,r),t=Ha(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=jp(i,n,e,t,r),o===null){let u=fk(n,e,r);u!==void 0&&Array.isArray(u)&&(u=jp(null,n,e,u[1],r),u=Ha(u,e.attrs,r),pk(n,e,r,u))}else o=mk(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function fk(n,e,t){let r=t?e.classBindings:e.styleBindings;if(is(r)!==0)return n[Hi(r)]}function pk(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Hi(i)]=r}function mk(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ha(r,s,t)}return Ha(r,e.attrs,t)}function jp(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ha(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ha(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),lN(n,s,t?!0:e[++o]))}return n===void 0?null:n}function gk(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=ok(l)?w0(u,e,t,i,is(l),s):void 0;if(!Kl(h)){Kl(o)||rk(l)&&(o=w0(u,null,t,i,a,s));let p=sD(zi(),t);E1(r,s,p,i,o)}}function w0(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,y=t[i+1];y===gr&&(y=p?rn:void 0);let _=p?xp(y,r):h===r?y:void 0;if(l&&!Kl(_)&&(_=xp(u,r)),Kl(_)&&(a=_,s))return a;let x=n[i+1];i=s?Hi(x):is(x)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=xp(u,r))}return a}function Kl(n){return n!==void 0}function yk(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=jt(Ga(n)))),n}function vk(n,e){return(n.flags&(e?8:16))!==0}function _k(n,e,t,r,i,o){let s=e.consts,a=Jo(s,i),u=Wa(e,n,2,r,a);return ug(e,t,u,Jo(s,o)),u.attrs!==null&&zl(u,u.attrs,!1),u.mergedAttrs!==null&&zl(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function S(n,e,t,r){let i=Se(),o=St(),s=an+n,a=i[it],u=o.firstCreatePass?_k(s,o,i,e,t,r):o.data[s],l=wk(o,i,u,a,e,n);i[s]=l;let h=nd(u);return qi(u,!0),sb(a,l,u),!WO(u)&&sd()&&dd(o,i,l,u),WN()===0&&Zr(l,i),KN(),h&&(sg(o,i,u),og(o,u,i)),r!==null&&ag(i,u),S}function D(){let n=At();Bm()?mD():(n=n.parent,qi(n,!1));let e=n;ZN(e)&&JN(),QN();let t=St();return t.firstCreatePass&&(cd(t,n),jm(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&pP(e)&&_0(t,e,Se(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&mP(e)&&_0(t,e,Se(),e.stylesWithoutHost,!1),D}function wt(n,e,t,r){return S(n,e,t,r),D(),wt}var wk=(n,e,t,r,i,o)=>(ad(!0),JD(r,i,lP()));function Ik(n,e,t,r,i){let o=e.consts,s=Jo(o,r),a=Wa(e,n,8,"ng-container",s);s!==null&&zl(a,s,!0);let u=Jo(o,i);return ug(e,t,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function Ya(n,e,t){let r=Se(),i=St(),o=n+an,s=i.firstCreatePass?Ik(o,i,r,e,t):i.data[o];qi(s,!0);let a=Ek(i,r,s,n);return r[o]=a,sd()&&dd(i,r,a,s),Zr(a,r),nd(s)&&(sg(i,r,s),og(i,s,r)),t!=null&&ag(r,s),Ya}function Za(){let n=At(),e=St();return Bm()?mD():(n=n.parent,qi(n,!1)),e.firstCreatePass&&(cd(e,n),jm(n)&&e.queries.elementEnd(n)),Za}var Ek=(n,e,t,r)=>(ad(!0),s1(e[it],""));function Fe(){return Se()}var Ql="en-US";var Dk=Ql;function bk(n){typeof n=="string"&&(Dk=n.toLowerCase().replace(/_/g,"-"))}var Ck=(n,e,t)=>{};function _e(n,e,t,r){let i=Se(),o=St(),s=At();return kb(o,i,i[it],s,n,e,r),_e}function Tk(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Ml],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function kb(n,e,t,r,i,o,s){let a=nd(r),l=n.firstCreatePass&&Q1(n),h=e[wn],p=K1(e),y=!0;if(r.type&3||s){let O=cn(r,e),N=s?s(O):O,B=p.length,Q=s?me=>s(Vn(me[r.index])):r.index,Y=null;if(!s&&a&&(Y=Tk(n,e,i,r.index)),Y!==null){let me=Y.__ngLastListenerFn__||Y;me.__ngNextListenerFn__=o,Y.__ngLastListenerFn__=o,y=!1}else{o=E0(r,e,h,o),Ck(O,i,o);let me=t.listen(N,i,o);p.push(o,me),l&&l.push(i,Q,B,B+1)}}else o=E0(r,e,h,o);let _=r.outputs,x;if(y&&_!==null&&(x=_[i])){let O=x.length;if(O)for(let N=0;N<O;N+=2){let B=x[N],Q=x[N+1],ze=e[B][Q].subscribe(o),se=p.length;p.push(o,ze),l&&l.push(i,r.index,se,-(se+1))}}}function I0(n,e,t,r){let i=be(null);try{return Nn(6,e,t),t(r)!==!1}catch(o){return vb(n,o),!1}finally{Nn(7,e,t),be(i)}}function E0(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?ri(n.index,e):e;hg(s,5);let a=I0(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=I0(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function pe(n=1){return cP(n)}function Sk(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Je(n){let e=eP();return cD(e,an+n)}function M(n,e=""){let t=Se(),r=St(),i=n+an,o=r.firstCreatePass?Wa(r,i,1,e,null):r.data[i],s=Ak(r,t,o,e,n);t[i]=s,sd()&&dd(r,t,s,o),qi(o,!1)}var Ak=(n,e,t,r,i)=>(ad(!0),i1(e[it],r));function Pe(n){return xt("",n,""),Pe}function xt(n,e,t){let r=Se(),i=tk(r,n,e,t);return i!==gr&&_b(r,zi(),i),xt}function Ja(n,e,t,r,i){let o=Se(),s=nk(o,n,e,t,r,i);return s!==gr&&_b(o,zi(),s),Ja}function $e(n,e,t){Rb(e)&&(e=e());let r=Se(),i=od();if(Xr(r,i,e)){let o=St(),s=zm();fb(o,s,r,n,e,r[it],t,!1)}return $e}function Ke(n,e){let t=Rb(n);return t&&n.set(e),t}function He(n,e){let t=Se(),r=St(),i=At();return kb(r,t,t[it],i,n,e),He}function xk(n,e,t){let r=St();if(r.firstCreatePass){let i=Yr(n);bm(t,r.data,r.blueprint,i,!0),bm(e,r.data,r.blueprint,i,!1)}}function bm(n,e,t,r,i){if(n=Lt(n),Array.isArray(n))for(let o=0;o<n.length;o++)bm(n[o],e,t,r,i);else{let o=St(),s=Se(),a=At(),u=Ko(n)?n:Lt(n.provide),l=Z0(n),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(Ko(n)||!n.multi){let _=new Bi(l,i,U),x=Bp(u,e,i?h:h+y,p);x===-1?(nm(Ll(a,s),o,u),Up(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(_),s.push(_)):(t[x]=_,s[x]=_)}else{let _=Bp(u,e,h+y,p),x=Bp(u,e,h,h+y),O=_>=0&&t[_],N=x>=0&&t[x];if(i&&!N||!i&&!O){nm(Ll(a,s),o,u);let B=Nk(i?Mk:Rk,t.length,i,r,l);!i&&N&&(t[x].providerFactory=B),Up(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(B),s.push(B)}else{let B=Fb(t[i?x:_],l,!i&&r);Up(o,n,_>-1?_:x,B)}!i&&r&&N&&t[x].componentProviders++}}}function Up(n,e,t,r){let i=Ko(e),o=MN(e);if(i||o){let u=(o?Lt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function Fb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Bp(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Rk(n,e,t,r){return Cm(this.multi,[])}function Mk(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Xo(t,t[ge],this.providerFactory.index,r);o=a.slice(0,s),Cm(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Cm(i,o);return o}function Cm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Nk(n,e,t,r,i){let o=new Bi(n,t,U);return o.multi=[],o.index=e,o.componentProviders=0,Fb(o,i,r&&!t),o}function ii(n,e=[]){return t=>{t.providersResolver=(r,i)=>xk(r,i?i(n):n,e)}}var Pk=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=K0(!1,t.type),i=r.length>0?yd([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(X(Yt))})}}return n})();function je(n){cs("NgStandalone"),n.getStandaloneInjector=e=>e.get(Pk).getOrCreateStandaloneInjector(n)}function us(n,e,t,r){return jb(Se(),$m(),n,e,t,r)}function Vb(n,e,t,r,i){return Ok(Se(),$m(),n,e,t,r,i)}function Lb(n,e){let t=n[e];return t===gr?void 0:t}function jb(n,e,t,r,i,o){let s=e+t;return Xr(n,s,i)?Nb(n,s+1,o?r.call(o,i):r(i)):Lb(n,s+1)}function Ok(n,e,t,r,i,o,s){let a=e+t;return Pb(n,a,i,o)?Nb(n,a+2,s?r.call(s,i,o):r(i,o)):Lb(n,a+2)}function ls(n,e){let t=St(),r,i=n+an;t.firstCreatePass?(r=kk(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Vi(r.type,!0)),s,a=qt(U);try{let u=Vl(!1),l=o();return Vl(u),Sk(t,Se(),i,l),l}finally{qt(a)}}function kk(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function ds(n,e,t){let r=n+an,i=Se(),o=cD(i,r);return Fk(i,r)?jb(i,$m(),e,o.transform,t,o):o.transform(t)}function Fk(n,e){return n[ge].data[e].pure}function Gi(n,e){return Tb(n,e)}var hr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Ub=new hr("18.2.10");var _d=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Bb=new G("");function oi(n){return!!n&&typeof n.then=="function"}function mg(n){return!!n&&typeof n.subscribe=="function"}var wd=new G(""),$b=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=F(wd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(oi(o))t.push(o);else if(mg(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Id=new G("");function Vk(){fE(()=>{throw new z(600,!1)})}function Lk(n){return n.isBoundToModule}var jk=10;function Uk(n,e,t){try{let r=t();return oi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Wi=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=F(kP),this.afterRenderManager=F(Ob),this.zonelessEnabled=F(gd),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ht,this.afterTick=new ht,this.componentTypes=[],this.components=[],this.isStable=F(ss).hasPendingTasks.pipe(J(t=>!t)),this._injector=F(Yt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof ql;if(!this._injector.get($b).done){let y=!i&&q0(t),_=!1;throw new z(405,_)}let s;i?s=t:s=this._injector.get(ts).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=Lk(s)?void 0:this._injector.get(Jr),u=r||s.selector,l=s.create(_t.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(Bb,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),bl(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new z(101,!1);let t=be(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,be(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ns,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<jk;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)Bk(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>rd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;bl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Id,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>bl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new z(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function bl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Bk(n,e,t,r){if(!t&&!rd(n))return;Eb(n,e,t&&!r?0:1)}var Tm=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Ed=(()=>{class n{compileModuleSync(t){return new _m(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=z0(t),o=ZD(i.declarations).reduce((s,a)=>{let u=Qr(a);return u&&s.push(new rs(u)),s},[]);return new Tm(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var $k=(()=>{class n{constructor(){this.zone=F(Ae),this.changeDetectionScheduler=F(es),this.applicationRef=F(Wi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hk=new G("",{factory:()=>!1});function Hb({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ae(he(L({},zb()),{scheduleInRootZone:t})),[{provide:Ae,useFactory:n},{provide:Wo,multi:!0,useFactory:()=>{let r=F($k,{optional:!0});return()=>r.initialize()}},{provide:Wo,multi:!0,useFactory:()=>{let r=F(qk);return()=>{r.initialize()}}},e===!0?{provide:Sb,useValue:!0}:[],{provide:Ab,useValue:t??LD}]}function qb(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=Hb({ngZoneFactory:()=>{let i=zb(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&cs("NgZone_CoalesceEvent"),new Ae(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return jn([{provide:Hk,useValue:!0},{provide:gd,useValue:!1},r])}function zb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var qk=(()=>{class n{constructor(){this.subscription=new We,this.initialized=!1,this.zone=F(Ae),this.pendingTasks=F(ss)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ae.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ae.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var zk=(()=>{class n{constructor(){this.appRef=F(Wi),this.taskService=F(ss),this.ngZone=F(Ae),this.zonelessEnabled=F(gd),this.disableScheduling=F(Sb,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new We,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ul):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(Ab,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof am||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?i0:jD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ul+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,i0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Gk(){return typeof $localize<"u"&&$localize.locale||Ql}var gg=new G("",{providedIn:"root",factory:()=>F(gg,fe.Optional|fe.SkipSelf)||Gk()});var Sm=new G("");function wl(n){return!n.moduleRef}function Wk(n){let e=wl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ae);return t.run(()=>{wl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(lr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),wl(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Sm);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Sm);s.add(o),n.moduleRef.onDestroy(()=>{bl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return Uk(r,t,()=>{let o=e.get($b);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(gg,Ql);if(bk(s||Ql),wl(n)){let a=e.get(Wi);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return Kk(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function Kk(n,e){let t=n.injector.get(Wi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new z(-403,!1);e.push(n)}var Cl=null;function Qk(n=[],e){return _t.create({name:e,providers:[{provide:Xl,useValue:"platform"},{provide:Sm,useValue:new Set([()=>Cl=null])},...n]})}function Yk(n=[]){if(Cl)return Cl;let e=Qk(n);return Cl=e,Vk(),Zk(e),e}function Zk(n){n.get(Jm,null)?.forEach(t=>t())}var si=(()=>{class n{static{this.__NG_ELEMENT_ID__=Jk}}return n})();function Jk(n){return Xk(At(),Se(),(n&16)===16)}function Xk(n,e,t){if(td(n)&&!t){let r=ri(n.index,e);return new $i(r,r)}else if(n.type&175){let r=e[Fn];return new $i(r,e)}return null}var Am=class{constructor(){}supports(e){return Mb(e)}create(e){return new xm(e)}},eF=(n,e)=>e,xm=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||eF}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<D0(r,i,o)?t:r,a=D0(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let y=0;y<l;y++){let _=y<o.length?o[y]:o[y]=0,x=_+y;h<=x&&x<l&&(o[y]=_+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Mb(e))throw new z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,zO(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Rm(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Yl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Yl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Rm=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Mm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Yl=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Mm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function D0(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function b0(){return new yg([new Am])}var yg=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:b0})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||b0()),deps:[[n,new Om,new Tt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new z(901,!1)}}return n})();function Gb(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=Yk(r),o=[Hb({}),{provide:es,useExisting:zk},...t||[]],s=new Wl({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return Wk({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function ai(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Xa(n,e){cs("NgSignals");let t=lE(n);return e?.equal&&(t[ur].equal=e.equal),t}function Dn(n){let e=be(null);try{return n()}finally{be(e)}}function Wb(n){let e=Qr(n);if(!e)return null;let t=new rs(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Xb=null;function vr(){return Xb}function eC(n){Xb??=n}var Dd=class{};var zt=new G(""),Cg=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>F(tF),providedIn:"platform"})}}return n})(),tC=new G(""),tF=(()=>{class n extends Cg{constructor(){super(),this._doc=F(zt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return vr().getBaseHref(this._doc)}onPopState(t){let r=vr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=vr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Tg(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function Kb(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function yr(n){return n&&n[0]!=="?"?"?"+n:n}var _r=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>F(Sg),providedIn:"root"})}}return n})(),nC=new G(""),Sg=(()=>{class n extends _r{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??F(zt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Tg(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+yr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+yr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+yr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(X(Cg),X(nC,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rC=(()=>{class n extends _r{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Tg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+yr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+yr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(X(Cg),X(nC,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),hs=(()=>{class n{constructor(t){this._subject=new rt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=iF(Kb(Qb(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+yr(r))}normalize(t){return n.stripTrailingSlash(rF(this._basePath,Qb(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+yr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+yr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=yr}static{this.joinWithSlash=Tg}static{this.stripTrailingSlash=Kb}static{this.\u0275fac=function(r){return new(r||n)(X(_r))}}static{this.\u0275prov=q({token:n,factory:()=>nF(),providedIn:"root"})}}return n})();function nF(){return new hs(X(_r))}function rF(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Qb(n){return n.replace(/\/index.html$/,"")}function iF(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function iC(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var vg=/\s+/,Yb=[],Cd=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=Yb,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(vg):Yb}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(vg):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(vg).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(U(En),U($n))}}static{this.\u0275dir=Be({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var _g=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Hn=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new _g(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Zb(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Zb(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(U(as),U(md),U(yg))}}static{this.\u0275dir=Be({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function Zb(n,e){n.context.$implicit=e.item}var Rt=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new wg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Jb("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Jb("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(U(as),U(md))}}static{this.\u0275dir=Be({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),wg=class{constructor(){this.$implicit=null,this.ngIf=null}};function Jb(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${jt(e)}'.`)}function oF(n,e){return new z(2100,!1)}var Ig=class{createSubscription(e,t){return Dn(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Dn(()=>e.unsubscribe())}},Eg=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},sF=new Eg,aF=new Ig,Td=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(oi(t))return sF;if(mg(t))return aF;throw oF(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(U(si,16))}}static{this.\u0275pipe=B0({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var bn=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ti({type:n})}static{this.\u0275inj=ei({})}}return n})(),Ag="browser",cF="server";function uF(n){return n===Ag}function xg(n){return n===cF}var oC=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>uF(F(Bn))?new Dg(F(zt),window):new bg})}}return n})(),Dg=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=lF(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function lF(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var bg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},bd=class{};var Ng=class extends Dd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Pg=class n extends Ng{static makeCurrent(){eC(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=dF();return t==null?null:hF(t)}resetBaseElement(){tc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return iC(document.cookie,e)}},tc=null;function dF(){return tc=tc||document.querySelector("base"),tc?tc.getAttribute("href"):null}function hF(n){return new URL(n,document.baseURI).pathname}var fF=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Og=new G(""),uC=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new z(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(X(Og),X(Ae))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Sd=class{constructor(e){this._doc=e}},Rg="ng-app-id",lC=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xg(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Rg}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Rg),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Rg,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(X(zt),X(Zm),X(Xm,8),X(Bn))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Mg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Fg=/%COMP%/g,dC="%COMP%",pF=`_nghost-${dC}`,mF=`_ngcontent-${dC}`,gF=!0,yF=new G("",{providedIn:"root",factory:()=>gF});function vF(n){return mF.replace(Fg,n)}function _F(n){return pF.replace(Fg,n)}function hC(n,e){return e.map(t=>t.replace(Fg,n))}var sC=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=xg(a),this.defaultRenderer=new nc(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===On.ShadowDom&&(r=he(L({},r),{encapsulation:On.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Ad?i.applyToHost(t):i instanceof rc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case On.Emulated:o=new Ad(u,l,r,this.appId,h,s,a,p);break;case On.ShadowDom:return new kg(u,l,t,r,s,a,this.nonce,p);default:o=new rc(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(X(uC),X(lC),X(Zm),X(yF),X(zt),X(Bn),X(Ae),X(Xm))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),nc=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Mg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(aC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(aC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new z(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Mg[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Mg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(dr.DashCase|dr.Important)?e.style.setProperty(t,r,i&dr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&dr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=vr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function aC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var kg=class extends nc{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=hC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},rc=class extends nc{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?hC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ad=class extends rc{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=vF(l),this.hostAttr=_F(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},wF=(()=>{class n extends Sd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(X(zt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),cC=["alt","control","meta","shift"],IF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},EF={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},DF=(()=>{class n extends Sd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vr().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),cC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=IF[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),cC.forEach(s=>{if(s!==i){let a=EF[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(X(zt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function fC(n,e){return Gb(L({rootComponent:n},bF(e)))}function bF(n){return{appProviders:[...xF,...n?.providers??[]],platformProviders:AF}}function CF(){Pg.makeCurrent()}function TF(){return new lr}function SF(){return GD(document),document}var AF=[{provide:Bn,useValue:Ag},{provide:Jm,useValue:CF,multi:!0},{provide:zt,useFactory:SF,deps:[]}];var xF=[{provide:Xl,useValue:"root"},{provide:lr,useFactory:TF,deps:[]},{provide:Og,useClass:wF,multi:!0,deps:[zt,Ae,Bn]},{provide:Og,useClass:DF,multi:!0,deps:[zt]},sC,lC,uC,{provide:ns,useExisting:sC},{provide:bd,useClass:fF,deps:[]},[]];var pC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(X(zt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var de="primary",vc=Symbol("RouteTitle"),Bg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function vs(n){return new Bg(n)}function MF(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function NF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!qn(n[t],e[t]))return!1;return!0}function qn(n,e){let t=n?$g(n):void 0,r=e?$g(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!CC(n[i],e[i]))return!1;return!0}function $g(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function CC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function TC(n){return n.length>0?n[n.length-1]:null}function ui(n){return Dp(n)?n:oi(n)?Ve(Promise.resolve(n)):Z(n)}var PF={exact:AC,subset:xC},SC={exact:OF,subset:kF,ignored:()=>!0};function mC(n,e,t){return PF[t.paths](n.root,e.root,t.matrixParams)&&SC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function OF(n,e){return qn(n,e)}function AC(n,e,t){if(!Qi(n.segments,e.segments)||!Md(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!AC(n.children[r],e.children[r],t))return!1;return!0}function kF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>CC(n[t],e[t]))}function xC(n,e,t){return RC(n,e,e.segments,t)}function RC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Qi(i,t)||e.hasChildren()||!Md(i,t,r))}else if(n.segments.length===t.length){if(!Qi(n.segments,t)||!Md(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!xC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Qi(n.segments,i)||!Md(n.segments,i,r)||!n.children[de]?!1:RC(n.children[de],e,o,r)}}function Md(n,e,t){return e.every((r,i)=>SC[t](n[i].parameters,r.parameters))}var Ir=class{constructor(e=new xe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=vs(this.queryParams),this._queryParamMap}toString(){return LF.serialize(this)}},xe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nd(this)}},Ki=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=vs(this.parameters),this._parameterMap}toString(){return NC(this)}};function FF(n,e){return Qi(n,e)&&n.every((t,r)=>qn(t.parameters,e[r].parameters))}function Qi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function VF(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===de&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==de&&(t=t.concat(e(i,r)))}),t}var _c=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new _s,providedIn:"root"})}}return n})(),_s=class{parse(e){let t=new qg(e);return new Ir(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ic(e.root,!0)}`,r=BF(e.queryParams),i=typeof e.fragment=="string"?`#${jF(e.fragment)}`:"";return`${t}${r}${i}`}},LF=new _s;function Nd(n){return n.segments.map(e=>NC(e)).join("/")}function ic(n,e){if(!n.hasChildren())return Nd(n);if(e){let t=n.children[de]?ic(n.children[de],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==de&&r.push(`${i}:${ic(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=VF(n,(r,i)=>i===de?[ic(n.children[de],!1)]:[`${i}:${ic(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[de]!=null?`${Nd(n)}/${t[0]}`:`${Nd(n)}/(${t.join("//")})`}}function MC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xd(n){return MC(n).replace(/%3B/gi,";")}function jF(n){return encodeURI(n)}function Hg(n){return MC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Pd(n){return decodeURIComponent(n)}function gC(n){return Pd(n.replace(/\+/g,"%20"))}function NC(n){return`${Hg(n.path)}${UF(n.parameters)}`}function UF(n){return Object.entries(n).map(([e,t])=>`;${Hg(e)}=${Hg(t)}`).join("")}function BF(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${xd(t)}=${xd(i)}`).join("&"):`${xd(t)}=${xd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var $F=/^[^\/()?;#]+/;function Vg(n){let e=n.match($F);return e?e[0]:""}var HF=/^[^\/()?;=#]+/;function qF(n){let e=n.match(HF);return e?e[0]:""}var zF=/^[^=?&#]+/;function GF(n){let e=n.match(zF);return e?e[0]:""}var WF=/^[^&#]+/;function KF(n){let e=n.match(WF);return e?e[0]:""}var qg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[de]=new xe(e,t)),r}parseSegment(){let e=Vg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new z(4009,!1);return this.capture(e),new Ki(Pd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=qF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Vg(this.remaining);i&&(r=i,this.capture(r))}e[Pd(t)]=Pd(r)}parseQueryParam(e){let t=GF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=KF(this.remaining);s&&(r=s,this.capture(r))}let i=gC(t),o=gC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Vg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=de);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[de]:new xe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new z(4011,!1)}};function PC(n){return n.segments.length>0?new xe([],{[de]:n}):n}function OC(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=OC(i);if(r===de&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new xe(n.segments,e);return QF(t)}function QF(n){if(n.numberOfChildren===1&&n.children[de]){let e=n.children[de];return new xe(n.segments.concat(e.segments),e.children)}return n}function Yi(n){return n instanceof Ir}function YF(n,e,t=null,r=null){let i=kC(n);return FC(i,e,t,r)}function kC(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new xe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=PC(r);return e??i}function FC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Lg(i,i,i,t,r);let o=ZF(e);if(o.toRoot())return Lg(i,i,new xe([],{}),t,r);let s=JF(o,i,n),a=s.processChildren?ac(s.segmentGroup,s.index,o.commands):LC(s.segmentGroup,s.index,o.commands);return Lg(i,s.segmentGroup,a,t,r)}function Od(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function lc(n){return typeof n=="object"&&n!=null&&n.outlets}function Lg(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=VC(n,e,t);let a=PC(OC(s));return new Ir(a,o,i)}function VC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=VC(o,e,t)}),new xe(n.segments,r)}var kd=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Od(r[0]))throw new z(4003,!1);let i=r.find(lc);if(i&&i!==TC(r))throw new z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ZF(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new kd(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new kd(t,e,r)}var ms=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function JF(n,e,t){if(n.isAbsolute)return new ms(e,!0,0);if(!t)return new ms(e,!1,NaN);if(t.parent===null)return new ms(t,!0,0);let r=Od(n.commands[0])?0:1,i=t.segments.length-1+r;return XF(t,i,n.numberOfDoubleDots)}function XF(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new z(4005,!1);i=r.segments.length}return new ms(r,!1,i-o)}function eV(n){return lc(n[0])?n[0].outlets:{[de]:n}}function LC(n,e,t){if(n??=new xe([],{}),n.segments.length===0&&n.hasChildren())return ac(n,e,t);let r=tV(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new xe(n.segments.slice(0,r.pathIndex),{});return o.children[de]=new xe(n.segments.slice(r.pathIndex),n.children),ac(o,0,i)}else return r.match&&i.length===0?new xe(n.segments,{}):r.match&&!n.hasChildren()?zg(n,e,t):r.match?ac(n,0,i):zg(n,e,t)}function ac(n,e,t){if(t.length===0)return new xe(n.segments,{});{let r=eV(t),i={};if(Object.keys(r).some(o=>o!==de)&&n.children[de]&&n.numberOfChildren===1&&n.children[de].segments.length===0){let o=ac(n.children[de],e,t);return new xe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=LC(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new xe(n.segments,i)}}function tV(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(lc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!vC(u,l,s))return o;r+=2}else{if(!vC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function zg(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(lc(o)){let u=nV(o.outlets);return new xe(r,u)}if(i===0&&Od(t[0])){let u=n.segments[e];r.push(new Ki(u.path,yC(t[0]))),i++;continue}let s=lc(o)?o.outlets[de]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Od(a)?(r.push(new Ki(s,yC(a))),i+=2):(r.push(new Ki(s,{})),i++)}return new xe(r,{})}function nV(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=zg(new xe([],{}),0,r))}),e}function yC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function vC(n,e,t){return n==t.path&&qn(e,t.parameters)}var cc="imperative",pt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(pt||{}),ln=class{constructor(e,t){this.id=e,this.url=t}},ws=class extends ln{constructor(e,t,r="imperative",i=null){super(e,t),this.type=pt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},zn=class extends ln{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=pt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Jt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Jt||{}),Fd=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Fd||{}),wr=class extends ln{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=pt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ci=class extends ln{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=pt.NavigationSkipped}},dc=class extends ln{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=pt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Vd=class extends ln{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=pt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gg=class extends ln{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=pt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wg=class extends ln{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=pt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Kg=class extends ln{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=pt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qg=class extends ln{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=pt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yg=class{constructor(e){this.route=e,this.type=pt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Zg=class{constructor(e){this.route=e,this.type=pt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Jg=class{constructor(e){this.snapshot=e,this.type=pt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xg=class{constructor(e){this.snapshot=e,this.type=pt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ey=class{constructor(e){this.snapshot=e,this.type=pt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ty=class{constructor(e){this.snapshot=e,this.type=pt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ld=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=pt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},hc=class{},Is=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function rV(n,e){return n.providers&&!n._injector&&(n._injector=yd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Cn(n){return n.outlet||de}function iV(n,e){let t=n.filter(r=>Cn(r)===e);return t.push(...n.filter(r=>Cn(r)!==e)),t}function wc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var ny=class{get injector(){return wc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ic(this.rootInjector),this.attachRef=null}},Ic=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ny(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(X(Yt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=ry(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=ry(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=iy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return iy(e,this._root).map(t=>t.value)}};function ry(n,e){if(n===e.value)return e;for(let t of e.children){let r=ry(n,t);if(r)return r}return null}function iy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=iy(n,t);if(r.length)return r.unshift(e),r}return[]}var Zt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ps(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ud=class extends jd{constructor(e,t){super(e),this.snapshot=t,fy(this,e)}toString(){return this.snapshot.toString()}};function jC(n){let e=oV(n),t=new Ze([new Ki("",{})]),r=new Ze({}),i=new Ze({}),o=new Ze({}),s=new Ze(""),a=new dn(t,r,o,s,i,de,n,e.root);return a.snapshot=e.root,new Ud(new Zt(a,[]),e)}function oV(n){let e={},t={},r={},i="",o=new gs([],e,r,i,t,de,n,null,{});return new $d("",new Zt(o,[]))}var dn=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(J(l=>l[vc]))??Z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(e=>vs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(e=>vs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Bd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&BC(i)&&(r.resolve[vc]=i.title),r}var gs=class{get title(){return this.data?.[vc]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=vs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=vs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},$d=class extends jd{constructor(e,t){super(t),this.url=e,fy(this,t)}toString(){return UC(this._root)}};function fy(n,e){e.value._routerState=n,e.children.forEach(t=>fy(n,t))}function UC(n){let e=n.children.length>0?` { ${n.children.map(UC).join(", ")} } `:"";return`${n.value}${e}`}function jg(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,qn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),qn(e.params,t.params)||n.paramsSubject.next(t.params),NF(e.url,t.url)||n.urlSubject.next(t.url),qn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function oy(n,e){let t=qn(n.params,e.params)&&FF(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||oy(n.parent,e.parent))}function BC(n){return typeof n.title=="string"||n.title===null}var py=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=de,this.activateEvents=new rt,this.deactivateEvents=new rt,this.attachEvents=new rt,this.detachEvents=new rt,this.parentContexts=F(Ic),this.location=F(as),this.changeDetector=F(si),this.inputBinder=F(Gd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new z(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new z(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new sy(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Be({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ni]})}}return n})(),sy=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===dn?this.route:e===Ic?this.childContexts:this.parent.get(e,t)}},Gd=new G(""),_C=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Oi([r.queryParams,r.params,r.data]).pipe(Vt(([o,s,a],u)=>(a=L(L(L({},o),s),a),u===0?Z(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=Wb(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function sV(n,e,t){let r=fc(n,e._root,t?t._root:void 0);return new Ud(r,e)}function fc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=aV(n,e,t);return new Zt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>fc(n,a)),s}}let r=cV(e.value),i=e.children.map(o=>fc(n,o));return new Zt(r,i)}}function aV(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return fc(n,r,i);return fc(n,r)})}function cV(n){return new dn(new Ze(n.url),new Ze(n.params),new Ze(n.queryParams),new Ze(n.fragment),new Ze(n.data),n.outlet,n.component,n)}var pc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},$C="ngNavigationCancelingError";function Hd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Yi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=HC(!1,Jt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function HC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[$C]=!0,t.cancellationCode=e,t}function uV(n){return qC(n)&&Yi(n.url)}function qC(n){return!!n&&n[$C]}var lV=(n,e,t,r)=>J(i=>(new ay(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),ay=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),jg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ps(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ps(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ps(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ps(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ty(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Xg(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(jg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),jg(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},qd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ys=class{constructor(e,t){this.component=e,this.route=t}};function dV(n,e,t){let r=n._root,i=e?e._root:null;return oc(r,i,t,[r.value])}function hV(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ds(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!A0(n)?n:e.get(n):r}function oc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ps(e);return n.children.forEach(s=>{fV(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>uc(a,t.getContext(s),i)),i}function fV(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=pV(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new qd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?oc(n,e,a?a.children:null,r,i):oc(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ys(a.outlet.component,s))}else s&&uc(e,a,i),i.canActivateChecks.push(new qd(r)),o.component?oc(n,null,a?a.children:null,r,i):oc(n,null,t,r,i);return i}function pV(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Qi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Qi(n.url,e.url)||!qn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oy(n,e)||!qn(n.queryParams,e.queryParams);case"paramsChange":default:return!oy(n,e)}}function uc(n,e,t){let r=ps(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?uc(s,e.children.getContext(o),t):uc(s,null,t):uc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ys(e.outlet.component,i)):t.canDeactivateChecks.push(new ys(null,i)):t.canDeactivateChecks.push(new ys(null,i))}function Ec(n){return typeof n=="function"}function mV(n){return typeof n=="boolean"}function gV(n){return n&&Ec(n.canLoad)}function yV(n){return n&&Ec(n.canActivate)}function vV(n){return n&&Ec(n.canActivateChild)}function _V(n){return n&&Ec(n.canDeactivate)}function wV(n){return n&&Ec(n.canMatch)}function zC(n){return n instanceof yn||n?.name==="EmptyError"}var Rd=Symbol("INITIAL_VALUE");function Es(){return Vt(n=>Oi(n.map(e=>e.pipe(ft(1),ml(Rd)))).pipe(J(e=>{for(let t of e)if(t!==!0){if(t===Rd)return Rd;if(t===!1||IV(t))return t}return!0}),Qt(e=>e!==Rd),ft(1)))}function IV(n){return Yi(n)||n instanceof pc}function EV(n,e){return nt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Z(he(L({},t),{guardsResult:!0})):DV(s,r,i,n).pipe(nt(a=>a&&mV(a)?bV(r,o,n,e):Z(a)),J(a=>he(L({},t),{guardsResult:a})))})}function DV(n,e,t,r){return Ve(n).pipe(nt(i=>xV(i.component,i.route,t,e,r)),Mn(i=>i!==!0,!0))}function bV(n,e,t,r){return Ve(e).pipe(ki(i=>Vo(TV(i.route.parent,r),CV(i.route,r),AV(n,i.path,t),SV(n,i.route,t))),Mn(i=>i!==!0,!0))}function CV(n,e){return n!==null&&e&&e(new ey(n)),Z(!0)}function TV(n,e){return n!==null&&e&&e(new Jg(n)),Z(!0)}function SV(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>hl(()=>{let s=wc(e)??t,a=Ds(o,s),u=yV(a)?a.canActivate(e,n):Un(s,()=>a(e,n));return ui(u).pipe(Mn())}));return Z(i).pipe(Es())}function AV(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>hV(s)).filter(s=>s!==null).map(s=>hl(()=>{let a=s.guards.map(u=>{let l=wc(s.node)??t,h=Ds(u,l),p=vV(h)?h.canActivateChild(r,n):Un(l,()=>h(r,n));return ui(p).pipe(Mn())});return Z(a).pipe(Es())}));return Z(o).pipe(Es())}function xV(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let u=wc(e)??i,l=Ds(a,u),h=_V(l)?l.canDeactivate(n,e,t,r):Un(u,()=>l(n,e,t,r));return ui(h).pipe(Mn())});return Z(s).pipe(Es())}function RV(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=Ds(s,n),u=gV(a)?a.canLoad(e,t):Un(n,()=>a(e,t));return ui(u)});return Z(o).pipe(Es(),GC(r))}function GC(n){return Wu(lt(e=>{if(typeof e!="boolean")throw Hd(n,e)}),J(e=>e===!0))}function MV(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=Ds(s,n),u=wV(a)?a.canMatch(e,t):Un(n,()=>a(e,t));return ui(u)});return Z(o).pipe(Es(),GC(r))}var mc=class{constructor(e){this.segmentGroup=e||null}},gc=class extends Error{constructor(e){super(),this.urlTree=e}};function fs(n){return ko(new mc(n))}function NV(n){return ko(new z(4e3,!1))}function PV(n){return ko(HC(!1,Jt.GuardRejected))}var cy=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[de])return NV(`${e.redirectTo}`);i=i.children[de]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:y,params:_,data:x,title:O}=i,N=Un(o,()=>a({params:_,data:x,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:y,title:O}));if(N instanceof Ir)throw new gc(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new gc(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Ir(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new xe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new z(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},uy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function OV(n,e,t,r,i){let o=WC(n,e,t);return o.matched?(r=rV(e,r),MV(r,e,t,i).pipe(J(s=>s===!0?o:L({},uy)))):Z(o)}function WC(n,e,t){if(e.path==="**")return kV(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},uy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||MF)(t,n,e);if(!i)return L({},uy);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function kV(n){return{matched:!0,parameters:n.length>0?TC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function wC(n,e,t,r){return t.length>0&&LV(n,t,r)?{segmentGroup:new xe(e,VV(r,new xe(t,n.children))),slicedSegments:[]}:t.length===0&&jV(n,t,r)?{segmentGroup:new xe(n.segments,FV(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new xe(n.segments,n.children),slicedSegments:t}}function FV(n,e,t,r){let i={};for(let o of t)if(Wd(n,e,o)&&!r[Cn(o)]){let s=new xe([],{});i[Cn(o)]=s}return L(L({},r),i)}function VV(n,e){let t={};t[de]=e;for(let r of n)if(r.path===""&&Cn(r)!==de){let i=new xe([],{});t[Cn(r)]=i}return t}function LV(n,e,t){return t.some(r=>Wd(n,e,r)&&Cn(r)!==de)}function jV(n,e,t){return t.some(r=>Wd(n,e,r))}function Wd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function UV(n,e,t){return e.length===0&&!n.children[t]}var ly=class{};function BV(n,e,t,r,i,o,s="emptyOnly"){return new dy(n,e,t,r,i,s,o).recognize()}var $V=31,dy=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new cy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new z(4002,`'${e.segmentGroup}'`)}recognize(){let e=wC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(({children:t,rootSnapshot:r})=>{let i=new Zt(r,t),o=new $d("",i),s=YF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new gs([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),de,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,de,t).pipe(J(r=>({children:r,rootSnapshot:t})),Hr(r=>{if(r instanceof gc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof mc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(J(s=>s instanceof Zt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ve(o).pipe(ki(s=>{let a=r.children[s],u=iV(t,s);return this.processSegmentGroup(e,u,a,s,i)}),pl((s,a)=>(s.push(...a),s)),qr(null),Sp(),nt(s=>{if(s===null)return fs(r);let a=KC(s);return HV(a),Z(a)}))}processSegment(e,t,r,i,o,s,a){return Ve(t).pipe(ki(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Hr(l=>{if(l instanceof mc)return Z(null);throw l}))),Mn(u=>!!u),Hr(u=>{if(zC(u))return UV(r,i,o)?Z(new ly):fs(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return Cn(r)!==s&&(s===de||!Wd(i,o,r))?fs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):fs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:y}=WC(t,i,o);if(!u)return fs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>$V&&(this.allowRedirects=!1));let _=new gs(o,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,IC(i),Cn(i),i.component??i._loadedComponent??null,i,EC(i)),x=Bd(_,a,this.paramsInheritanceStrategy);_.params=Object.freeze(x.params),_.data=Object.freeze(x.data);let O=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,_,e);return this.applyRedirects.lineralizeSegments(i,O).pipe(nt(N=>this.processSegment(e,r,t,N.concat(y),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=OV(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Vt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Vt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:y,remainingSegments:_}=u,x=new gs(y,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,IC(r),Cn(r),r.component??r._loadedComponent??null,r,EC(r)),O=Bd(x,s,this.paramsInheritanceStrategy);x.params=Object.freeze(O.params),x.data=Object.freeze(O.data);let{segmentGroup:N,slicedSegments:B}=wC(t,y,_,l);if(B.length===0&&N.hasChildren())return this.processChildren(h,l,N,x).pipe(J(Y=>new Zt(x,Y)));if(l.length===0&&B.length===0)return Z(new Zt(x,[]));let Q=Cn(r)===o;return this.processSegment(h,l,N,B,Q?de:o,!0,x).pipe(J(Y=>new Zt(x,Y instanceof Zt?[Y]:[])))}))):fs(t)))}getChildConfig(e,t,r){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):RV(e,t,r,this.urlSerializer).pipe(nt(i=>i?this.configLoader.loadChildren(e,t).pipe(lt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):PV(t))):Z({routes:[],injector:e})}};function HV(n){n.sort((e,t)=>e.value.outlet===de?-1:t.value.outlet===de?1:e.value.outlet.localeCompare(t.value.outlet))}function qV(n){let e=n.value.routeConfig;return e&&e.path===""}function KC(n){let e=[],t=new Set;for(let r of n){if(!qV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=KC(r.children);e.push(new Zt(r.value,i))}return e.filter(r=>!t.has(r))}function IC(n){return n.data||{}}function EC(n){return n.resolve||{}}function zV(n,e,t,r,i,o){return nt(s=>BV(n,e,t,r,s.extractedUrl,i,o).pipe(J(({state:a,tree:u})=>he(L({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function GV(n,e){return nt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Z(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of QC(u))s.add(l);let a=0;return Ve(s).pipe(ki(u=>o.has(u)?WV(u,r,n,e):(u.data=Bd(u,u.parent,n).resolve,Z(void 0))),lt(()=>a++),Lo(1),nt(u=>a===s.size?Z(t):Kt))})}function QC(n){let e=n.children.map(t=>QC(t)).flat();return[n,...e]}function WV(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!BC(i)&&(o[vc]=i.title),KV(o,n,e,r).pipe(J(s=>(n._resolvedData=s,n.data=Bd(n,n.parent,t).resolve,null)))}function KV(n,e,t,r){let i=$g(n);if(i.length===0)return Z({});let o={};return Ve(i).pipe(nt(s=>QV(n[s],e,t,r).pipe(Mn(),lt(a=>{if(a instanceof pc)throw Hd(new _s,a);o[s]=a}))),Lo(1),Tp(o),Hr(s=>zC(s)?Kt:ko(s)))}function QV(n,e,t,r){let i=wc(e)??r,o=Ds(n,i),s=o.resolve?o.resolve(e,t):Un(i,()=>o(e,t));return ui(s)}function Ug(n){return Vt(e=>{let t=n(e);return t?Ve(t).pipe(J(()=>e)):Z(e)})}var YC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===de);return r}getResolvedTitleForRoute(t){return t.data[vc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>F(YV),providedIn:"root"})}}return n})(),YV=(()=>{class n extends YC{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(X(pC))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Dc=new G("",{providedIn:"root",factory:()=>({})}),ZV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Le({type:n,selectors:[["ng-component"]],standalone:!0,features:[je],decls:1,vars:0,template:function(r,i){r&1&&wt(0,"router-outlet")},dependencies:[py],encapsulation:2})}}return n})();function my(n){let e=n.children&&n.children.map(my),t=e?he(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==de&&(t.component=ZV),t}var yc=new G(""),gy=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F(Ed)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ui(t.loadComponent()).pipe(J(ZC),lt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ka(()=>{this.componentLoaders.delete(t)})),i=new Mo(r,()=>new ht).pipe(Ro());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=JV(r,this.compiler,t,this.onLoadEndListener).pipe(ka(()=>{this.childrenLoaders.delete(r)})),s=new Mo(o,()=>new ht).pipe(Ro());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function JV(n,e,t,r){return ui(n.loadChildren()).pipe(J(ZC),nt(i=>i instanceof $a||Array.isArray(i)?Z(i):Ve(e.compileModuleAsync(i))),J(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(yc,[],{optional:!0,self:!0}).flat()),{routes:s.map(my),injector:o}}))}function XV(n){return n&&typeof n=="object"&&"default"in n}function ZC(n){return XV(n)?n.default:n}var yy=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>F(eL),providedIn:"root"})}}return n})(),eL=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),JC=new G(""),XC=new G("");function tL(n,e,t){let r=n.get(XC),i=n.get(zt);return n.get(Ae).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),nL(n))),{onViewTransitionCreated:u}=r;return u&&Un(n,()=>u({transition:a,from:e,to:t})),s})}function nL(n){return new Promise(e=>{pg({read:()=>setTimeout(e)},{injector:n})})}var rL=new G(""),vy=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ht,this.transitionAbortSubject=new ht,this.configLoader=F(gy),this.environmentInjector=F(Yt),this.urlSerializer=F(_c),this.rootContexts=F(Ic),this.location=F(hs),this.inputBindingEnabled=F(Gd,{optional:!0})!==null,this.titleStrategy=F(YC),this.options=F(Dc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(yy),this.createViewTransition=F(JC,{optional:!0}),this.navigationErrorHandler=F(rL,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Yg(i)),r=i=>this.events.next(new Zg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(he(L(L({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Ze({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:cc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Qt(o=>o.id!==0),J(o=>he(L({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Vt(o=>{let s=!1,a=!1;return Z(o).pipe(Vt(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Jt.SupersededByNewNavigation),Kt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?he(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new ci(u.id,this.urlSerializer.serialize(u.rawUrl),p,Fd.IgnoredSameUrlNavigation)),u.resolve(!1),Kt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Z(u).pipe(Vt(p=>{let y=this.transitions?.getValue();return this.events.next(new ws(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),y!==this.transitions?.getValue()?Kt:Promise.resolve(p)}),zV(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),lt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=he(L({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let y=new Vd(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(y)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:y,source:_,restoredState:x,extras:O}=u,N=new ws(p,this.urlSerializer.serialize(y),_,x);this.events.next(N);let B=jC(this.rootComponentType).snapshot;return this.currentTransition=o=he(L({},u),{targetSnapshot:B,urlAfterRedirects:y,extras:he(L({},O),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,Z(o)}else{let p="";return this.events.next(new ci(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Fd.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Kt}}),lt(u=>{let l=new Gg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),J(u=>(this.currentTransition=o=he(L({},u),{guards:dV(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),EV(this.environmentInjector,u=>this.events.next(u)),lt(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Hd(this.urlSerializer,u.guardsResult);let l=new Wg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Qt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Jt.GuardRejected),!1)),Ug(u=>{if(u.guards.canActivateChecks.length)return Z(u).pipe(lt(l=>{let h=new Kg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Vt(l=>{let h=!1;return Z(l).pipe(GV(this.paramsInheritanceStrategy,this.environmentInjector),lt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Jt.NoDataFromResolver)}}))}),lt(l=>{let h=new Qg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Ug(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(lt(y=>{h.component=y}),J(()=>{})));for(let y of h.children)p.push(...l(y));return p};return Oi(l(u.targetSnapshot.root)).pipe(qr(null),ft(1))}),Ug(()=>this.afterPreactivation()),Vt(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Ve(h).pipe(J(()=>o)):Z(o)}),J(u=>{let l=sV(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=he(L({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),lt(()=>{this.events.next(new hc)}),lV(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),ft(1),lt({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new zn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),Ap(this.transitionAbortSubject.pipe(lt(u=>{throw u}))),ka(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Jt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Hr(u=>{if(a=!0,qC(u))this.events.next(new wr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),uV(u)?this.events.next(new Is(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new dc(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=Un(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof pc){let{message:p,cancellationCode:y}=Hd(this.urlSerializer,h);this.events.next(new wr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,y)),this.events.next(new Is(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Kt}))}))}cancelNavigationTransition(t,r,i){let o=new wr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function iL(n){return n!==cc}var oL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>F(sL),providedIn:"root"})}}return n})(),hy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},sL=(()=>{class n extends hy{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mr(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),eT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>F(aL),providedIn:"root"})}}return n})(),aL=(()=>{class n extends eT{constructor(){super(...arguments),this.location=F(hs),this.urlSerializer=F(_c),this.options=F(Dc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(yy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ir,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=jC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof ws)this.stateMemento=this.createStateMemento();else if(t instanceof ci)this.rawUrlTree=r.initialUrl;else if(t instanceof Vd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof hc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof wr&&(t.code===Jt.GuardRejected||t.code===Jt.NoDataFromResolver)?this.restoreHistory(r):t instanceof dc?this.restoreHistory(r,!0):t instanceof zn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Ir?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=L(L({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mr(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(sc||{});function tT(n,e){n.events.pipe(Qt(t=>t instanceof zn||t instanceof wr||t instanceof dc||t instanceof ci),J(t=>t instanceof zn||t instanceof ci?sc.COMPLETE:(t instanceof wr?t.code===Jt.Redirect||t.code===Jt.SupersededByNewNavigation:!1)?sc.REDIRECTING:sc.FAILED),Qt(t=>t!==sc.REDIRECTING),ft(1)).subscribe(()=>{e()})}function cL(n){throw n}var uL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Oe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=F(_d),this.stateManager=F(eT),this.options=F(Dc,{optional:!0})||{},this.pendingTasks=F(ss),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(vy),this.urlSerializer=F(_c),this.location=F(hs),this.urlHandlingStrategy=F(yy),this._events=new ht,this.errorHandler=this.options.errorHandler||cL,this.navigated=!1,this.routeReuseStrategy=F(oL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(yc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F(Gd,{optional:!0}),this.eventsSubscription=new We,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof wr&&r.code!==Jt.Redirect&&r.code!==Jt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof zn)this.navigated=!0;else if(r instanceof Is){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||iL(i.source)},s);this.scheduleNavigation(a,cc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}hL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),cc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(my),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=kC(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return FC(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Yi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,cc,null,r)}navigate(t,r={skipLocationChange:!1}){return dL(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},uL):r===!1?i=L({},lL):i=r,Yi(t))return mC(this.currentUrlTree,t,i);let o=this.parseUrl(t);return mC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,y)=>{a=p,u=y});let h=this.pendingTasks.add();return tT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function dL(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new z(4008,!1)}function hL(n){return!(n instanceof hc)&&!(n instanceof Is)}var Gn=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new ht,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof zn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Yi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:QD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Yi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(U(Oe),U(dn),Wm("tabindex"),U($n),U(En),U(_r))}}static{this.\u0275dir=Be({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&_e("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Qa("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ai],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ai],replaceUrl:[2,"replaceUrl","replaceUrl",ai],routerLink:"routerLink"},standalone:!0,features:[fg,ni]})}}return n})();var zd=class{};var fL=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Qt(t=>t instanceof zn),ki(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=yd(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ve(i).pipe(Fo())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Z(null);let o=i.pipe(nt(s=>s===null?Z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ve([o,s]).pipe(Fo())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(X(Oe),X(Ed),X(Yt),X(zd),X(gy))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),nT=new G(""),pL=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ws?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof zn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ci&&t.code===Fd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ld&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ld(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){cb()}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function rT(n,...e){return jn([{provide:yc,multi:!0,useValue:n},[],{provide:dn,useFactory:iT,deps:[Oe]},{provide:Id,multi:!0,useFactory:oT},e.map(t=>t.\u0275providers)])}function iT(n){return n.routerState.root}function bc(n,e){return{\u0275kind:n,\u0275providers:e}}function oT(){let n=F(_t);return e=>{let t=n.get(Wi);if(e!==t.components[0])return;let r=n.get(Oe),i=n.get(sT);n.get(_y)===1&&r.initialNavigation(),n.get(aT,null,fe.Optional)?.setUpPreloading(),n.get(nT,null,fe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var sT=new G("",{factory:()=>new ht}),_y=new G("",{providedIn:"root",factory:()=>1});function mL(){return bc(2,[{provide:_y,useValue:0},{provide:wd,multi:!0,deps:[_t],useFactory:e=>{let t=e.get(tC,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Oe),o=e.get(sT);tT(i,()=>{r(!0)}),e.get(vy).afterPreactivation=()=>(r(!0),o.closed?Z(void 0):o),i.initialNavigation()}))}}])}function gL(){return bc(3,[{provide:wd,multi:!0,useFactory:()=>{let e=F(Oe);return()=>{e.setUpLocationChangeListener()}}},{provide:_y,useValue:2}])}var aT=new G("");function yL(n){return bc(0,[{provide:aT,useExisting:fL},{provide:zd,useExisting:n}])}function vL(){return bc(8,[_C,{provide:Gd,useExisting:_C}])}function _L(n){let e=[{provide:JC,useValue:tL},{provide:XC,useValue:L({skipNextTransition:!!n?.skipInitialTransition},n)}];return bc(9,e)}var DC=new G("ROUTER_FORROOT_GUARD"),wL=[hs,{provide:_c,useClass:_s},Oe,Ic,{provide:dn,useFactory:iT,deps:[Oe]},gy,[]],bs=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[wL,[],{provide:yc,multi:!0,useValue:t},{provide:DC,useFactory:bL,deps:[[Oe,new Tt,new Om]]},{provide:Dc,useValue:r||{}},r?.useHash?EL():DL(),IL(),r?.preloadingStrategy?yL(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?CL(r):[],r?.bindToComponentInputs?vL().\u0275providers:[],r?.enableViewTransitions?_L().\u0275providers:[],TL()]}}static forChild(t){return{ngModule:n,providers:[{provide:yc,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(X(DC,8))}}static{this.\u0275mod=ti({type:n})}static{this.\u0275inj=ei({})}}return n})();function IL(){return{provide:nT,useFactory:()=>{let n=F(oC),e=F(Ae),t=F(Dc),r=F(vy),i=F(_c);return t.scrollOffset&&n.setOffset(t.scrollOffset),new pL(i,r,n,e,t)}}}function EL(){return{provide:_r,useClass:rC}}function DL(){return{provide:_r,useClass:Sg}}function bL(n){return"guarded"}function CL(n){return[n.initialNavigation==="disabled"?gL().\u0275providers:[],n.initialNavigation==="enabledBlocking"?mL().\u0275providers:[]]}var bC=new G("");function TL(){return[{provide:bC,useFactory:oT},{provide:Id,multi:!0,useExisting:bC}]}var uT=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},SL=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},lT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,y=(a&15)<<2|l>>6,_=l&63;u||(_=64,s||(y=64)),r.push(t[h],t[p],t[y],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(uT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):SL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Iy;let y=o<<2|a>>4;if(r.push(y),l!==64){let _=a<<4&240|l>>2;if(r.push(_),p!==64){let x=l<<6&192|p;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Iy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},AL=function(n){let e=uT(n);return lT.encodeByteArray(e,!0)},Cc=function(n){return AL(n).replace(/\./g,"")},Dy=function(n){try{return lT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function xL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var RL=()=>xL().__FIREBASE_DEFAULTS__,ML=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},NL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Dy(n[1]);return e&&JSON.parse(e)},Qd=()=>{try{return RL()||ML()||NL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},by=n=>{var e,t;return(t=(e=Qd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},dT=n=>{let e=by(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Cy=()=>{var n;return(n=Qd())===null||n===void 0?void 0:n.config},Ty=n=>{var e;return(e=Qd())===null||e===void 0?void 0:e[`_${n}`]};var Kd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function hT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Cc(JSON.stringify(t)),Cc(JSON.stringify(s)),""].join(".")}function mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function PL(){var n;let e=(n=Qd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mT(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function gT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yT(){let n=mt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function vT(){return!PL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sy(){try{return typeof indexedDB=="object"}catch{return!1}}function _T(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var OL="FirebaseError",Xt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=OL,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Er.prototype.create)}},Er=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?kL(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Xt(i,a,r)}};function kL(n,e){return n.replace(FL,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var FL=/\{\$([^}]+)}/g;function wT(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function li(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(cT(o)&&cT(s)){if(!li(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function cT(n){return n!==null&&typeof n=="object"}function Tc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ts(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ss(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function IT(n,e){let t=new Ey(n,e);return t.subscribe.bind(t)}var Ey=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");VL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=wy),i.error===void 0&&(i.error=wy),i.complete===void 0&&(i.complete=wy);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function VL(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function wy(){}var zW=4*60*60*1e3;function Xe(n){return n&&n._delegate?n._delegate:n}var hn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Zi="[DEFAULT]";var Ay=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Kd;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jL(e))try{this.getOrInitializeService({instanceIdentifier:Zi})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Zi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return g(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Zi){return this.instances.has(e)}getOptions(e=Zi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zi){return this.component?this.component.multipleInstances?e:Zi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function LL(n){return n===Zi?void 0:n}function jL(n){return n.instantiationMode==="EAGER"}var Yd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Ay(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var UL=[],we=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(we||{}),BL={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},$L=we.INFO,HL={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},qL=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=HL[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},di=class{constructor(e){this.name=e,this._logLevel=$L,this._logHandler=qL,this._userLogHandler=null,UL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}};var zL=(n,e)=>e.some(t=>n instanceof t),ET,DT;function GL(){return ET||(ET=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WL(){return DT||(DT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var bT=new WeakMap,Ry=new WeakMap,CT=new WeakMap,xy=new WeakMap,Ny=new WeakMap;function KL(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Wn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&bT.set(t,n)}).catch(()=>{}),Ny.set(e,n),e}function QL(n){if(Ry.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Ry.set(n,e)}var My={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ry.get(n);if(e==="objectStoreNames")return n.objectStoreNames||CT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function TT(n){My=n(My)}function YL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Zd(this),e,...t);return CT.set(r,e.sort?e.sort():[e]),Wn(r)}:WL().includes(n)?function(...e){return n.apply(Zd(this),e),Wn(bT.get(this))}:function(...e){return Wn(n.apply(Zd(this),e))}}function ZL(n){return typeof n=="function"?YL(n):(n instanceof IDBTransaction&&QL(n),zL(n,GL())?new Proxy(n,My):n)}function Wn(n){if(n instanceof IDBRequest)return KL(n);if(xy.has(n))return xy.get(n);let e=ZL(n);return e!==n&&(xy.set(n,e),Ny.set(e,n)),e}var Zd=n=>Ny.get(n);function AT(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Wn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Wn(s.result),u.oldVersion,u.newVersion,Wn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var JL=["get","getKey","getAll","getAllKeys","count"],XL=["put","add","delete","clear"],Py=new Map;function ST(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Py.get(e))return Py.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=XL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||JL.includes(t)))return;let o=function(s,...a){return g(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return Py.set(e,o),o}TT(n=>he(L({},n),{get:(e,t,r)=>ST(e,t)||n.get(e,t,r),has:(e,t)=>!!ST(e,t)||n.has(e,t)}));var ky=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(e2(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function e2(n){let e=n.getComponent();return e?.type==="VERSION"}var Fy="@firebase/app",xT="0.10.13";var Dr=new di("@firebase/app"),t2="@firebase/app-compat",n2="@firebase/analytics-compat",r2="@firebase/analytics",i2="@firebase/app-check-compat",o2="@firebase/app-check",s2="@firebase/auth",a2="@firebase/auth-compat",c2="@firebase/database",u2="@firebase/data-connect",l2="@firebase/database-compat",d2="@firebase/functions",h2="@firebase/functions-compat",f2="@firebase/installations",p2="@firebase/installations-compat",m2="@firebase/messaging",g2="@firebase/messaging-compat",y2="@firebase/performance",v2="@firebase/performance-compat",_2="@firebase/remote-config",w2="@firebase/remote-config-compat",I2="@firebase/storage",E2="@firebase/storage-compat",D2="@firebase/firestore",b2="@firebase/vertexai-preview",C2="@firebase/firestore-compat",T2="firebase",S2="10.14.1";var Vy="[DEFAULT]",A2={[Fy]:"fire-core",[t2]:"fire-core-compat",[r2]:"fire-analytics",[n2]:"fire-analytics-compat",[o2]:"fire-app-check",[i2]:"fire-app-check-compat",[s2]:"fire-auth",[a2]:"fire-auth-compat",[c2]:"fire-rtdb",[u2]:"fire-data-connect",[l2]:"fire-rtdb-compat",[d2]:"fire-fn",[h2]:"fire-fn-compat",[f2]:"fire-iid",[p2]:"fire-iid-compat",[m2]:"fire-fcm",[g2]:"fire-fcm-compat",[y2]:"fire-perf",[v2]:"fire-perf-compat",[_2]:"fire-rc",[w2]:"fire-rc-compat",[I2]:"fire-gcs",[E2]:"fire-gcs-compat",[D2]:"fire-fst",[C2]:"fire-fst-compat",[b2]:"fire-vertex","fire-js":"fire-js",[T2]:"fire-js-all"};var Sc=new Map,x2=new Map,Ly=new Map;function RT(n,e){try{n.container.addComponent(e)}catch(t){Dr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function fi(n){let e=n.name;if(Ly.has(e))return Dr.debug(`There were multiple attempts to register component ${e}.`),!1;Ly.set(e,n);for(let t of Sc.values())RT(t,n);for(let t of x2.values())RT(t,n);return!0}function xc(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Tn(n){return n.settings!==void 0}var R2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hi=new Er("app","Firebase",R2);var jy=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hi.create("app-deleted",{appName:this._name})}};var pi=S2;function Jd(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Vy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw hi.create("bad-app-name",{appName:String(i)});if(t||(t=Cy()),!t)throw hi.create("no-options");let o=Sc.get(i);if(o){if(li(t,o.options)&&li(r,o.config))return o;throw hi.create("duplicate-app",{appName:i})}let s=new Yd(i);for(let u of Ly.values())s.addComponent(u);let a=new jy(t,r,s);return Sc.set(i,a),a}function As(n=Vy){let e=Sc.get(n);if(!e&&n===Vy&&Cy())return Jd();if(!e)throw hi.create("no-app",{appName:n});return e}function Xd(){return Array.from(Sc.values())}function dt(n,e,t){var r;let i=(r=A2[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dr.warn(a.join(" "));return}fi(new hn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var M2="firebase-heartbeat-database",N2=1,Ac="firebase-heartbeat-store",Oy=null;function OT(){return Oy||(Oy=AT(M2,N2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ac)}catch(t){console.warn(t)}}}}).catch(n=>{throw hi.create("idb-open",{originalErrorMessage:n.message})})),Oy}function P2(n){return g(this,null,function*(){try{let t=(yield OT()).transaction(Ac),r=yield t.objectStore(Ac).get(kT(n));return yield t.done,r}catch(e){if(e instanceof Xt)Dr.warn(e.message);else{let t=hi.create("idb-get",{originalErrorMessage:e?.message});Dr.warn(t.message)}}})}function MT(n,e){return g(this,null,function*(){try{let r=(yield OT()).transaction(Ac,"readwrite");yield r.objectStore(Ac).put(e,kT(n)),yield r.done}catch(t){if(t instanceof Xt)Dr.warn(t.message);else{let r=hi.create("idb-set",{originalErrorMessage:t?.message});Dr.warn(r.message)}}})}function kT(n){return`${n.name}!${n.options.appId}`}var O2=1024,k2=30*24*60*60*1e3,Uy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new By(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return g(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=NT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=k2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Dr.warn(r)}})}getHeartbeatsHeader(){return g(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=NT(),{heartbeatsToSend:r,unsentEntries:i}=F2(this._heartbeatsCache.heartbeats),o=Cc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Dr.warn(t),""}})}};function NT(){return new Date().toISOString().substring(0,10)}function F2(n,e=O2){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),PT(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),PT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var By=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return g(this,null,function*(){return Sy()?_T().then(()=>!0).catch(()=>!1):!1})}read(){return g(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield P2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return g(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return MT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return g(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return MT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function PT(n){return Cc(JSON.stringify({version:2,heartbeats:n})).length}function V2(n){fi(new hn("platform-logger",e=>new ky(e),"PRIVATE")),fi(new hn("heartbeat",e=>new Uy(e),"PRIVATE")),dt(Fy,xT,n),dt(Fy,xT,"esm2017"),dt("fire-js","")}V2("");var L2="firebase",j2="10.14.1";dt(L2,j2,"app");var Xi=new hr("ANGULARFIRE2_VERSION");function th(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Rc=(n,e)=>{let t=e?[e]:Xd(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Rs=class{constructor(){return Rc(U2)}},U2="app-check";function xs(){}var eh=class{zone;delegate;constructor(e,t=Ip){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},$y=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xs,{},xs,xs)),t.pipe(lt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ms=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new eh(Zone.current)),this.insideAngular=t.run(()=>new eh(Zone.current,wp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(X(Ae))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nh(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function B2(n){return nh().ngZone.runOutsideAngular(()=>n())}function Ji(n){return nh().ngZone.run(()=>n())}function $2(n){return H2(nh())(n)}function H2(n){return function(t){return t=t.lift(new $y(n.ngZone)),t.pipe($r(n.outsideAngular),Br(n.insideAngular))}}var q2=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ji(()=>n.apply(void 0,r))},gt=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=Ji(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xs,{},xs,xs))),r[o]=q2(r[o],t));let i=B2(()=>n.apply(this,r));if(!e)if(i instanceof ye){let o=nh();return i.pipe($r(o.outsideAngular),Br(o.insideAngular))}else return Ji(()=>i);return i instanceof ye?i.pipe($2):i instanceof Promise?Ji(()=>new Promise((o,s)=>i.then(a=>Ji(()=>o(a)),a=>Ji(()=>s(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Ji(()=>i)};var br=class{constructor(e){return e}},eo=class{constructor(){return Xd()}};function z2(n){return n&&n.length===1?n[0]:new br(As())}var Hy=new G("angularfire2._apps"),G2={provide:br,useFactory:z2,deps:[[new Tt,Hy]]},W2={provide:eo,deps:[[new Tt,Hy]]};function K2(n){return(e,t)=>{let r=t.get(Bn);dt("angularfire",Xi.full,"core"),dt("angularfire",Xi.full,"app"),dt("angular",Ub.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new br(i)}}function FT(n,...e){return jn([G2,W2,{provide:Hy,useFactory:K2(n),multi:!0,deps:[Ae,_t,Ms,...e]}])}function XT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var eS=XT,tS=new Er("auth","Firebase",XT());var ch=new di("@firebase/auth");function Q2(n,...e){ch.logLevel<=we.WARN&&ch.warn(`Auth (${pi}): ${n}`,...e)}function ih(n,...e){ch.logLevel<=we.ERROR&&ch.error(`Auth (${pi}): ${n}`,...e)}function Qn(n,...e){throw hv(n,...e)}function to(n,...e){return hv(n,...e)}function nS(n,e,t){let r=Object.assign(Object.assign({},eS()),{[e]:t});return new Er("auth","Firebase",r).create(e,{appName:n.name})}function Sr(n){return nS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hv(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return tS.create(n,...e)}function ee(n,e,...t){if(!n)throw hv(e,...t)}function Cr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw ih(e),new Error(e)}function gi(n,e){n||Cr(e)}function Wy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Y2(){return VT()==="http:"||VT()==="https:"}function VT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Z2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Y2()||mT()||"connection"in navigator)?navigator.onLine:!0}function J2(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var no=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,gi(t>e,"Short delay should be less than long delay!"),this.isMobile=fT()||gT()}get(){return Z2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function fv(n,e){gi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var uh=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var X2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var ej=new no(3e4,6e4);function yi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function vi(o,s,a,u){return g(this,arguments,function*(n,e,t,r,i={}){return rS(n,i,()=>g(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Tc(Object.assign({key:n.config.apiKey},h)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let _=Object.assign({method:e,headers:y},l);return pT()||(_.referrerPolicy="no-referrer"),uh.fetch()(iS(n,n.config.apiHost,t,p),_)}))})}function rS(n,e,t){return g(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},X2),e);try{let i=new Ky(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw rh(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw rh(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw rh(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw rh(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw nS(n,h,l);Qn(n,h)}}catch(i){if(i instanceof Xt)throw i;Qn(n,"network-request-failed",{message:String(i)})}})}function Lc(o,s,a,u){return g(this,arguments,function*(n,e,t,r,i={}){let l=yield vi(n,e,t,r,i);return"mfaPendingCredential"in l&&Qn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function iS(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?fv(n.config,i):`${n.config.apiScheme}://${i}`}function tj(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Ky=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(to(this.auth,"network-request-failed")),ej.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function rh(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=to(n,e,r);return i.customData._tokenResponse=t,i}function LT(n){return n!==void 0&&n.enterprise!==void 0}var Qy=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return tj(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function nj(n,e){return g(this,null,function*(){return vi(n,"GET","/v2/recaptchaConfig",yi(n,e))})}function rj(n,e){return g(this,null,function*(){return vi(n,"POST","/v1/accounts:delete",e)})}function oS(n,e){return g(this,null,function*(){return vi(n,"POST","/v1/accounts:lookup",e)})}function Mc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function pv(n,e=!1){return g(this,null,function*(){let t=Xe(n),r=yield t.getIdToken(e),i=mv(r);ee(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Mc(qy(i.auth_time)),issuedAtTime:Mc(qy(i.iat)),expirationTime:Mc(qy(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function qy(n){return Number(n)*1e3}function mv(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ih("JWT malformed, contained fewer than 3 sections"),null;try{let i=Dy(t);return i?JSON.parse(i):(ih("Failed to decode base64 JWT payload"),null)}catch(i){return ih("Caught error parsing JWT payload as JSON",i?.toString()),null}}function jT(n){let e=mv(n);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Pc(n,e,t=!1){return g(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Xt&&ij(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function ij({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Yy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>g(this,null,function*(){yield this.iteration()}),t)}iteration(){return g(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Oc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mc(this.lastLoginAt),this.creationTime=Mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function lh(n){return g(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Pc(n,oS(t,{idToken:r}));ee(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?sS(o.providerUserInfo):[],a=oj(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Oc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function gv(n){return g(this,null,function*(){let e=Xe(n);yield lh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function oj(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function sS(n){return n.map(e=>{var{providerId:t}=e,r=Ep(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function sj(n,e){return g(this,null,function*(){let t=yield rS(n,{},()=>g(this,null,function*(){let r=Tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=iS(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",uh.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function aj(n,e){return g(this,null,function*(){return vi(n,"POST","/v2/accounts:revokeToken",yi(n,e))})}var Nc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ee(e.length!==0,"internal-error");let t=jT(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return g(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return g(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield sj(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(ee(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ee(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ee(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Cr("not implemented")}};function mi(n,e){ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ns=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Ep(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Oc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return g(this,null,function*(){let t=yield Pc(this,this.stsTokenManager.getToken(this.auth,e));return ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return pv(this,e)}reload(){return gv(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return g(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield lh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return g(this,null,function*(){if(Tn(this.auth.app))return Promise.reject(Sr(this.auth));let e=yield this.getIdToken();return yield Pc(this,rj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,_=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,x=(s=t.photoURL)!==null&&s!==void 0?s:void 0,O=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,B=(l=t.createdAt)!==null&&l!==void 0?l:void 0,Q=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Y,emailVerified:me,isAnonymous:ze,providerData:se,stsTokenManager:b}=t;ee(Y&&b,e,"internal-error");let v=Nc.fromJSON(this.name,b);ee(typeof Y=="string",e,"internal-error"),mi(p,e.name),mi(y,e.name),ee(typeof me=="boolean",e,"internal-error"),ee(typeof ze=="boolean",e,"internal-error"),mi(_,e.name),mi(x,e.name),mi(O,e.name),mi(N,e.name),mi(B,e.name),mi(Q,e.name);let w=new n({uid:Y,auth:e,email:y,emailVerified:me,displayName:p,isAnonymous:ze,photoURL:x,phoneNumber:_,tenantId:O,stsTokenManager:v,createdAt:B,lastLoginAt:Q});return se&&Array.isArray(se)&&(w.providerData=se.map(E=>Object.assign({},E))),N&&(w._redirectEventId=N),w}static _fromIdTokenResponse(e,t,r=!1){return g(this,null,function*(){let i=new Nc;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield lh(o),o})}static _fromGetAccountInfoResponse(e,t,r){return g(this,null,function*(){let i=t.users[0];ee(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?sS(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Nc;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Oc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var UT=new Map;function Tr(n){gi(n instanceof Function,"Expected a class definition");let e=UT.get(n);return e?(gi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,UT.set(n,e),e)}var cj=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return g(this,null,function*(){return!0})}_set(t,r){return g(this,null,function*(){this.storage[t]=r})}_get(t){return g(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return g(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Zy=cj;function oh(n,e,t){return`firebase:${n}:${e}:${t}`}var dh=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=oh(this.userKey,i.apiKey,o),this.fullPersistenceKey=oh("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return g(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ns._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return g(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return g(this,null,function*(){if(!t.length)return new n(Tr(Zy),e,r);let i=(yield Promise.all(t.map(l=>g(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Tr(Zy),s=oh(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p=Ns._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>g(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function BT(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hS(e))return"Blackberry";if(fS(e))return"Webos";if(cS(e))return"Safari";if((e.includes("chrome/")||uS(e))&&!e.includes("edge/"))return"Chrome";if(dS(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function aS(n=mt()){return/firefox\//i.test(n)}function cS(n=mt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uS(n=mt()){return/crios\//i.test(n)}function lS(n=mt()){return/iemobile/i.test(n)}function dS(n=mt()){return/android/i.test(n)}function hS(n=mt()){return/blackberry/i.test(n)}function fS(n=mt()){return/webos/i.test(n)}function yv(n=mt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function uj(n=mt()){var e;return yv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lj(){return yT()&&document.documentMode===10}function pS(n=mt()){return yv(n)||dS(n)||fS(n)||hS(n)||/windows phone/i.test(n)||lS(n)}function mS(n,e=[]){let t;switch(n){case"Browser":t=BT(mt());break;case"Worker":t=`${BT(mt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${pi}/${r}`}var Jy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return g(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function dj(t){return g(this,arguments,function*(n,e={}){return vi(n,"GET","/v2/passwordPolicy",yi(n,e))})}var hj=6,Xy=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:hj,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var ev=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hh(this),this.idTokenSubscription=new hh(this),this.beforeStateQueue=new Jy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Tr(t)),this._initializationPromise=this.queue(()=>g(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield dh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return g(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return g(this,null,function*(){try{let t=yield oS(this,{idToken:e}),r=yield Ns._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return g(this,null,function*(){var t;if(Tn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return g(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return g(this,null,function*(){try{yield lh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=J2()}_delete(){return g(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return g(this,null,function*(){if(Tn(this.app))return Promise.reject(Sr(this));let t=e?Xe(e):null;return t&&ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return g(this,null,function*(){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>g(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return g(this,null,function*(){return Tn(this.app)?Promise.reject(Sr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Tn(this.app)?Promise.reject(Sr(this)):this.queue(()=>g(this,null,function*(){yield this.assertedPersistence.setPersistence(Tr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return g(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return g(this,null,function*(){let e=yield dj(this),t=new Xy(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Er("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return g(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield aj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return g(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return g(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Tr(e)||this._popupRedirectResolver;ee(t,this,"argument-error"),this.redirectPersistenceManager=yield dh.create(this,[Tr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return g(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>g(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return g(this,null,function*(){if(e===this.currentUser)return this.queue(()=>g(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return g(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return g(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return g(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Q2(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function io(n){return Xe(n)}var hh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=IT(t=>this.observer=t)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var _h={loadJS(){return g(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fj(n){_h=n}function gS(n){return _h.loadJS(n)}function pj(){return _h.recaptchaEnterpriseScript}function mj(){return _h.gapiScript}function yS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var gj="recaptcha-enterprise",yj="NO_RECAPTCHA",tv=class{constructor(e){this.type=gj,this.auth=io(e)}verify(e="verify",t=!1){return g(this,null,function*(){function r(o){return g(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>g(this,null,function*(){nj(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Qy(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;LT(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(yj)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&LT(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=pj();u.length!==0&&(u+=a),gS(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function $T(n,e,t,r=!1){return g(this,null,function*(){let i=new tv(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function nv(n,e,t,r){return g(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield $T(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>g(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield $T(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)}))})}function vv(n,e){let t=xc(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(li(o,e??{}))return i;Qn(i,"already-initialized")}return t.initialize({options:e})}function vj(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Tr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function _v(n,e,t){let r=io(n);ee(r._canInitEmulator,r,"emulator-config-failed"),ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=vS(e),{host:s,port:a}=_j(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||wj()}function vS(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function _j(n){let e=vS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:HT(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:HT(s)}}}function HT(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function wj(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var kc=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Cr("not implemented")}_getIdTokenResponse(e){return Cr("not implemented")}_linkToIdToken(e,t){return Cr("not implemented")}_getReauthenticationResolver(e){return Cr("not implemented")}};function Ij(n,e){return g(this,null,function*(){return vi(n,"POST","/v1/accounts:signUp",e)})}function Ej(n,e){return g(this,null,function*(){return Lc(n,"POST","/v1/accounts:signInWithPassword",yi(n,e))})}function Dj(n,e){return g(this,null,function*(){return Lc(n,"POST","/v1/accounts:signInWithEmailLink",yi(n,e))})}function bj(n,e){return g(this,null,function*(){return Lc(n,"POST","/v1/accounts:signInWithEmailLink",yi(n,e))})}var Fc=class n extends kc{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return g(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nv(e,t,"signInWithPassword",Ej);case"emailLink":return Dj(e,{email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}})}_linkToIdToken(e,t){return g(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nv(e,r,"signUpPassword",Ij);case"emailLink":return bj(e,{idToken:t,email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function zy(n,e){return g(this,null,function*(){return Lc(n,"POST","/v1/accounts:signInWithIdp",yi(n,e))})}function Cj(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Tj(n){let e=Ts(Ss(n)).link,t=e?Ts(Ss(e)).deep_link_id:null,r=Ts(Ss(n)).deep_link_id;return(r?Ts(Ss(r)).link:null)||r||t||e||n}var fh=class n{constructor(e){var t,r,i,o,s,a;let u=Ts(Ss(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=Cj((i=u.mode)!==null&&i!==void 0?i:null);ee(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=Tj(e);try{return new n(t)}catch{return null}}};var _S=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Fc._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=fh.parseLink(r);return ee(i,"argument-error"),Fc._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),ph=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var rv=class extends ph{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Sj(n,e){return g(this,null,function*(){return Lc(n,"POST","/v1/accounts:signUp",yi(n,e))})}var Ps=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return g(this,null,function*(){let o=yield Ns._fromIdTokenResponse(e,r,i),s=qT(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return g(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=qT(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function qT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var iv=class n extends Xt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function wS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?iv._fromErrorAndOperation(n,o,e,r):o})}function Aj(n,e,t=!1){return g(this,null,function*(){let r=yield Pc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ps._forOperation(n,"link",r)})}function xj(n,e,t=!1){return g(this,null,function*(){let{auth:r}=n;if(Tn(r.app))return Promise.reject(Sr(r));let i="reauthenticate";try{let o=yield Pc(n,wS(r,i,e,n),t);ee(o.idToken,r,"internal-error");let s=mv(o.idToken);ee(s,r,"internal-error");let{sub:a}=s;return ee(n.uid===a,r,"user-mismatch"),Ps._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Qn(r,"user-mismatch"),o}})}function IS(n,e,t=!1){return g(this,null,function*(){if(Tn(n.app))return Promise.reject(Sr(n));let r="signIn",i=yield wS(n,r,e),o=yield Ps._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function wv(n,e){return g(this,null,function*(){return IS(io(n),e)})}function ES(n){return g(this,null,function*(){let e=io(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Iv(n,e,t){return g(this,null,function*(){if(Tn(n.app))return Promise.reject(Sr(n));let r=io(n),s=yield nv(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Sj).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&ES(n),u}),a=yield Ps._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function Ev(n,e,t){return Tn(n.app)?Promise.reject(Sr(n)):wv(Xe(n),_S.credential(e,t)).catch(r=>g(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&ES(n),r}))}function Dv(n,e,t,r){return Xe(n).onIdTokenChanged(e,t,r)}function bv(n,e,t){return Xe(n).beforeAuthStateChanged(e,t)}function wh(n,e,t,r){return Xe(n).onAuthStateChanged(e,t,r)}function Ih(n){return Xe(n).signOut()}var mh="__sak";var gh=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(mh,"1"),this.storage.removeItem(mh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Rj=1e3,Mj=10,Nj=(()=>{class n extends gh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);lj()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,Mj):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},Rj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return g(this,null,function*(){yield Lr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return g(this,null,function*(){let r=yield Lr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return g(this,null,function*(){yield Lr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),DS=Nj;var Pj=(()=>{class n extends gh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Cv=Pj;function Oj(n){return Promise.all(n.map(e=>g(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var kj=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return g(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>g(this,null,function*(){return h(r.origin,s)})),l=yield Oj(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function bS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var ov=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return g(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=bS("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(y.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Kn(){return window}function Fj(n){Kn().location.href=n}function CS(){return typeof Kn().WorkerGlobalScope<"u"&&typeof Kn().importScripts=="function"}function Vj(){return g(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Lj(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function jj(){return CS()?self:null}var TS="firebaseLocalStorageDb",Uj=1,yh="firebaseLocalStorage",SS="fbase_key",ro=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Eh(n,e){return n.transaction([yh],e?"readwrite":"readonly").objectStore(yh)}function Bj(){let n=indexedDB.deleteDatabase(TS);return new ro(n).toPromise()}function sv(){let n=indexedDB.open(TS,Uj);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(yh,{keyPath:SS})}catch(i){t(i)}}),n.addEventListener("success",()=>g(this,null,function*(){let r=n.result;r.objectStoreNames.contains(yh)?e(r):(r.close(),yield Bj(),e(yield sv()))}))})}function zT(n,e,t){return g(this,null,function*(){let r=Eh(n,!0).put({[SS]:e,value:t});return new ro(r).toPromise()})}function $j(n,e){return g(this,null,function*(){let t=Eh(n,!1).get(e),r=yield new ro(t).toPromise();return r===void 0?null:r.value})}function GT(n,e){let t=Eh(n,!0).delete(e);return new ro(t).toPromise()}var Hj=800,qj=3,zj=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return g(this,null,function*(){return this.db?this.db:(this.db=yield sv(),this.db)})}_withRetries(t){return g(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>qj)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return g(this,null,function*(){return CS()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return g(this,null,function*(){this.receiver=kj._getInstance(jj()),this.receiver._subscribe("keyChanged",(t,r)=>g(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>g(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return g(this,null,function*(){var t,r;if(this.activeServiceWorker=yield Vj(),!this.activeServiceWorker)return;this.sender=new ov(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return g(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Lj()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return g(this,null,function*(){try{if(!indexedDB)return!1;let t=yield sv();return yield zT(t,mh,"1"),yield GT(t,mh),!0}catch{}return!1})}_withPendingWrite(t){return g(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(i=>zT(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return g(this,null,function*(){let r=yield this._withRetries(i=>$j(i,t));return this.localCache[t]=r,r})}_remove(t){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(r=>GT(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return g(this,null,function*(){let t=yield this._withRetries(o=>{let s=Eh(o,!1).getAll();return new ro(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>g(this,null,function*(){return this._poll()}),Hj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),AS=zj;var L8=yS("rcb"),j8=new no(3e4,6e4);function Gj(n,e){return e?Tr(e):(ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Vc=class extends kc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zy(e,this._buildIdpRequest())}_linkToIdToken(e,t){return zy(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return zy(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Wj(n){return IS(n.auth,new Vc(n),n.bypassAuthState)}function Kj(n){let{auth:e,user:t}=n;return ee(t,e,"internal-error"),xj(t,new Vc(n),n.bypassAuthState)}function Qj(n){return g(this,null,function*(){let{auth:e,user:t}=n;return ee(t,e,"internal-error"),Aj(t,new Vc(n),n.bypassAuthState)})}var av=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>g(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return g(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Wj;case"linkViaPopup":case"linkViaRedirect":return Qj;case"reauthViaPopup":case"reauthViaRedirect":return Kj;default:Qn(this.auth,"internal-error")}}resolve(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var U8=new no(2e3,1e4);var Yj="pendingRedirect",sh=new Map,cv=class n extends av{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return g(this,null,function*(){let e=sh.get(this.auth._key());if(!e){try{let r=(yield Zj(this.resolver,this.auth))?yield Lr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}sh.set(this.auth._key(),e)}return this.bypassAuthState||sh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return g(this,null,function*(){if(e.type==="signInViaRedirect")return Lr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Lr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return g(this,null,function*(){})}cleanUp(){}};function Zj(n,e){return g(this,null,function*(){let t=eU(e),r=Xj(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function Jj(n,e){sh.set(n._key(),e)}function Xj(n){return Tr(n._redirectPersistence)}function eU(n){return oh(Yj,n.config.apiKey,n.name)}function tU(n,e,t=!1){return g(this,null,function*(){if(Tn(n.app))return Promise.reject(Sr(n));let r=io(n),i=Gj(r,e),s=yield new cv(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var nU=10*60*1e3,uv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!xS(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(to(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nU&&this.cachedEventUids.clear(),this.cachedEventUids.has(WT(e))}saveEventToCache(e){this.cachedEventUids.add(WT(e)),this.lastProcessedEventTime=Date.now()}};function WT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function xS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function rU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xS(n);default:return!1}}function iU(t){return g(this,arguments,function*(n,e={}){return vi(n,"GET","/v1/projects",e)})}var oU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sU=/^https?/;function aU(n){return g(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield iU(n);for(let t of e)try{if(cU(t))return}catch{}Qn(n,"unauthorized-domain")})}function cU(n){let e=Wy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!sU.test(t))return!1;if(oU.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var uU=new no(3e4,6e4);function KT(){let n=Kn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function lU(n){return new Promise((e,t)=>{var r,i,o;function s(){KT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KT(),t(to(n,"network-request-failed"))},timeout:uU.get()})}if(!((i=(r=Kn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Kn().gapi)===null||o===void 0)&&o.load)s();else{let a=yS("iframefcb");return Kn()[a]=()=>{gapi.load?s():t(to(n,"network-request-failed"))},gS(`${mj()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw ah=null,e})}var ah=null;function dU(n){return ah=ah||lU(n),ah}var hU=new no(5e3,15e3),fU="__/auth/iframe",pU="emulator/auth/iframe",mU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yU(n){let e=n.config;ee(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?fv(e,pU):`https://${n.config.authDomain}/${fU}`,r={apiKey:e.apiKey,appName:n.name,v:pi},i=gU.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Tc(r).slice(1)}`}function vU(n){return g(this,null,function*(){let e=yield dU(n),t=Kn().gapi;return ee(t,n,"internal-error"),e.open({where:document.body,url:yU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mU,dontclear:!0},r=>new Promise((i,o)=>g(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=to(n,"network-request-failed"),a=Kn().setTimeout(()=>{o(s)},hU.get());function u(){Kn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var _U={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wU=500,IU=600,EU="_blank",DU="http://localhost",vh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function bU(n,e,t,r=wU,i=IU){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},_U),{width:r.toString(),height:i.toString(),top:o,left:s}),l=mt().toLowerCase();t&&(a=uS(l)?EU:t),aS(l)&&(e=e||DU,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[_,x])=>`${y}${_}=${x},`,"");if(uj(l)&&a!=="_self")return CU(e||"",a),new vh(null);let p=window.open(e||"",a,h);ee(p,n,"popup-blocked");try{p.focus()}catch{}return new vh(p)}function CU(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var TU="__/auth/handler",SU="emulator/auth/handler",AU=encodeURIComponent("fac");function QT(n,e,t,r,i,o){return g(this,null,function*(){ee(n.config.authDomain,n,"auth-domain-config-required"),ee(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:pi,eventId:i};if(e instanceof ph){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",wT(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof rv){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${AU}=${encodeURIComponent(u)}`:"";return`${xU(n)}?${Tc(a).slice(1)}${l}`})}function xU({config:n}){return n.emulator?fv(n,SU):`https://${n.authDomain}/${TU}`}var Gy="webStorageSupport",lv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cv,this._completeRedirectFn=tU,this._overrideRedirectResult=Jj}_openPopup(e,t,r,i){return g(this,null,function*(){var o;gi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield QT(e,t,r,Wy(),i);return bU(e,s,bS())})}_openRedirect(e,t,r,i){return g(this,null,function*(){yield this._originValidation(e);let o=yield QT(e,t,r,Wy(),i);return Fj(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(gi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return g(this,null,function*(){let t=yield vU(e),r=new uv(e);return t.register("authEvent",i=>(ee(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Gy,{type:Gy},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Gy];s!==void 0&&t(!!s),Qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=aU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pS()||cS()||yv()}},RS=lv;var YT="@firebase/auth",ZT="1.7.9";var dv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return g(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function RU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MU(n){fi(new hn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ee(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mS(n)},l=new ev(r,i,o,u);return vj(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),fi(new hn("auth-internal",e=>{let t=io(e.getProvider("auth").getImmediate());return(r=>new dv(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),dt(YT,ZT,RU(n)),dt(YT,ZT,"esm2017")}var NU=5*60,PU=Ty("authIdTokenMaxAge")||NU,JT=null,OU=n=>e=>g(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>PU)return;let i=t?.token;JT!==i&&(JT=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Tv(n=As()){let e=xc(n,"auth");if(e.isInitialized())return e.getImmediate();let t=vv(n,{popupRedirectResolver:RS,persistence:[AS,DS,Cv]}),r=Ty("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=OU(o.toString());bv(t,s,()=>s(t.currentUser)),Dv(t,a=>s(a))}}let i=by("auth");return i&&_v(t,`http://${i}`),t}function kU(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}fj({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=to("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",kU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MU("Browser");var MS="auth",oo=class{constructor(e){return e}},jc=class{constructor(){return Rc(MS)}};var Sv=new G("angularfire2.auth-instances");function bB(n,e){let t=th(MS,n,e);return t&&new oo(t)}function CB(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new oo(r)}}var TB={provide:jc,deps:[[new Tt,Sv]]},SB={provide:oo,useFactory:bB,deps:[[new Tt,Sv],br]};function NS(n,...e){return dt("angularfire",Xi.full,"auth"),jn([SB,TB,{provide:Sv,useFactory:CB(n),multi:!0,deps:[Ae,_t,Ms,eo,[new Tt,Rs],...e]}])}var PS=gt(Iv,!0);var OS=gt(Tv,!0);var kS=gt(Ev,!0);var FS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},VS={};var _i,Av;(function(){var n;function e(b,v){function w(){}w.prototype=v.prototype,b.D=v.prototype,b.prototype=new w,b.prototype.constructor=b,b.C=function(E,C,A){for(var I=Array(arguments.length-2),sr=2;sr<arguments.length;sr++)I[sr-2]=arguments[sr];return v.prototype[C].apply(E,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,v,w){w||(w=0);var E=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)E[C]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(C=0;16>C;++C)E[C]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=b.g[0],w=b.g[1],C=b.g[2];var A=b.g[3],I=v+(A^w&(C^A))+E[0]+3614090360&4294967295;v=w+(I<<7&4294967295|I>>>25),I=A+(C^v&(w^C))+E[1]+3905402710&4294967295,A=v+(I<<12&4294967295|I>>>20),I=C+(w^A&(v^w))+E[2]+606105819&4294967295,C=A+(I<<17&4294967295|I>>>15),I=w+(v^C&(A^v))+E[3]+3250441966&4294967295,w=C+(I<<22&4294967295|I>>>10),I=v+(A^w&(C^A))+E[4]+4118548399&4294967295,v=w+(I<<7&4294967295|I>>>25),I=A+(C^v&(w^C))+E[5]+1200080426&4294967295,A=v+(I<<12&4294967295|I>>>20),I=C+(w^A&(v^w))+E[6]+2821735955&4294967295,C=A+(I<<17&4294967295|I>>>15),I=w+(v^C&(A^v))+E[7]+4249261313&4294967295,w=C+(I<<22&4294967295|I>>>10),I=v+(A^w&(C^A))+E[8]+1770035416&4294967295,v=w+(I<<7&4294967295|I>>>25),I=A+(C^v&(w^C))+E[9]+2336552879&4294967295,A=v+(I<<12&4294967295|I>>>20),I=C+(w^A&(v^w))+E[10]+4294925233&4294967295,C=A+(I<<17&4294967295|I>>>15),I=w+(v^C&(A^v))+E[11]+2304563134&4294967295,w=C+(I<<22&4294967295|I>>>10),I=v+(A^w&(C^A))+E[12]+1804603682&4294967295,v=w+(I<<7&4294967295|I>>>25),I=A+(C^v&(w^C))+E[13]+4254626195&4294967295,A=v+(I<<12&4294967295|I>>>20),I=C+(w^A&(v^w))+E[14]+2792965006&4294967295,C=A+(I<<17&4294967295|I>>>15),I=w+(v^C&(A^v))+E[15]+1236535329&4294967295,w=C+(I<<22&4294967295|I>>>10),I=v+(C^A&(w^C))+E[1]+4129170786&4294967295,v=w+(I<<5&4294967295|I>>>27),I=A+(w^C&(v^w))+E[6]+3225465664&4294967295,A=v+(I<<9&4294967295|I>>>23),I=C+(v^w&(A^v))+E[11]+643717713&4294967295,C=A+(I<<14&4294967295|I>>>18),I=w+(A^v&(C^A))+E[0]+3921069994&4294967295,w=C+(I<<20&4294967295|I>>>12),I=v+(C^A&(w^C))+E[5]+3593408605&4294967295,v=w+(I<<5&4294967295|I>>>27),I=A+(w^C&(v^w))+E[10]+38016083&4294967295,A=v+(I<<9&4294967295|I>>>23),I=C+(v^w&(A^v))+E[15]+3634488961&4294967295,C=A+(I<<14&4294967295|I>>>18),I=w+(A^v&(C^A))+E[4]+3889429448&4294967295,w=C+(I<<20&4294967295|I>>>12),I=v+(C^A&(w^C))+E[9]+568446438&4294967295,v=w+(I<<5&4294967295|I>>>27),I=A+(w^C&(v^w))+E[14]+3275163606&4294967295,A=v+(I<<9&4294967295|I>>>23),I=C+(v^w&(A^v))+E[3]+4107603335&4294967295,C=A+(I<<14&4294967295|I>>>18),I=w+(A^v&(C^A))+E[8]+1163531501&4294967295,w=C+(I<<20&4294967295|I>>>12),I=v+(C^A&(w^C))+E[13]+2850285829&4294967295,v=w+(I<<5&4294967295|I>>>27),I=A+(w^C&(v^w))+E[2]+4243563512&4294967295,A=v+(I<<9&4294967295|I>>>23),I=C+(v^w&(A^v))+E[7]+1735328473&4294967295,C=A+(I<<14&4294967295|I>>>18),I=w+(A^v&(C^A))+E[12]+2368359562&4294967295,w=C+(I<<20&4294967295|I>>>12),I=v+(w^C^A)+E[5]+4294588738&4294967295,v=w+(I<<4&4294967295|I>>>28),I=A+(v^w^C)+E[8]+2272392833&4294967295,A=v+(I<<11&4294967295|I>>>21),I=C+(A^v^w)+E[11]+1839030562&4294967295,C=A+(I<<16&4294967295|I>>>16),I=w+(C^A^v)+E[14]+4259657740&4294967295,w=C+(I<<23&4294967295|I>>>9),I=v+(w^C^A)+E[1]+2763975236&4294967295,v=w+(I<<4&4294967295|I>>>28),I=A+(v^w^C)+E[4]+1272893353&4294967295,A=v+(I<<11&4294967295|I>>>21),I=C+(A^v^w)+E[7]+4139469664&4294967295,C=A+(I<<16&4294967295|I>>>16),I=w+(C^A^v)+E[10]+3200236656&4294967295,w=C+(I<<23&4294967295|I>>>9),I=v+(w^C^A)+E[13]+681279174&4294967295,v=w+(I<<4&4294967295|I>>>28),I=A+(v^w^C)+E[0]+3936430074&4294967295,A=v+(I<<11&4294967295|I>>>21),I=C+(A^v^w)+E[3]+3572445317&4294967295,C=A+(I<<16&4294967295|I>>>16),I=w+(C^A^v)+E[6]+76029189&4294967295,w=C+(I<<23&4294967295|I>>>9),I=v+(w^C^A)+E[9]+3654602809&4294967295,v=w+(I<<4&4294967295|I>>>28),I=A+(v^w^C)+E[12]+3873151461&4294967295,A=v+(I<<11&4294967295|I>>>21),I=C+(A^v^w)+E[15]+530742520&4294967295,C=A+(I<<16&4294967295|I>>>16),I=w+(C^A^v)+E[2]+3299628645&4294967295,w=C+(I<<23&4294967295|I>>>9),I=v+(C^(w|~A))+E[0]+4096336452&4294967295,v=w+(I<<6&4294967295|I>>>26),I=A+(w^(v|~C))+E[7]+1126891415&4294967295,A=v+(I<<10&4294967295|I>>>22),I=C+(v^(A|~w))+E[14]+2878612391&4294967295,C=A+(I<<15&4294967295|I>>>17),I=w+(A^(C|~v))+E[5]+4237533241&4294967295,w=C+(I<<21&4294967295|I>>>11),I=v+(C^(w|~A))+E[12]+1700485571&4294967295,v=w+(I<<6&4294967295|I>>>26),I=A+(w^(v|~C))+E[3]+2399980690&4294967295,A=v+(I<<10&4294967295|I>>>22),I=C+(v^(A|~w))+E[10]+4293915773&4294967295,C=A+(I<<15&4294967295|I>>>17),I=w+(A^(C|~v))+E[1]+2240044497&4294967295,w=C+(I<<21&4294967295|I>>>11),I=v+(C^(w|~A))+E[8]+1873313359&4294967295,v=w+(I<<6&4294967295|I>>>26),I=A+(w^(v|~C))+E[15]+4264355552&4294967295,A=v+(I<<10&4294967295|I>>>22),I=C+(v^(A|~w))+E[6]+2734768916&4294967295,C=A+(I<<15&4294967295|I>>>17),I=w+(A^(C|~v))+E[13]+1309151649&4294967295,w=C+(I<<21&4294967295|I>>>11),I=v+(C^(w|~A))+E[4]+4149444226&4294967295,v=w+(I<<6&4294967295|I>>>26),I=A+(w^(v|~C))+E[11]+3174756917&4294967295,A=v+(I<<10&4294967295|I>>>22),I=C+(v^(A|~w))+E[2]+718787259&4294967295,C=A+(I<<15&4294967295|I>>>17),I=w+(A^(C|~v))+E[9]+3951481745&4294967295,b.g[0]=b.g[0]+v&4294967295,b.g[1]=b.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,b.g[2]=b.g[2]+C&4294967295,b.g[3]=b.g[3]+A&4294967295}r.prototype.u=function(b,v){v===void 0&&(v=b.length);for(var w=v-this.blockSize,E=this.B,C=this.h,A=0;A<v;){if(C==0)for(;A<=w;)i(this,b,A),A+=this.blockSize;if(typeof b=="string"){for(;A<v;)if(E[C++]=b.charCodeAt(A++),C==this.blockSize){i(this,E),C=0;break}}else for(;A<v;)if(E[C++]=b[A++],C==this.blockSize){i(this,E),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var v=1;v<b.length-8;++v)b[v]=0;var w=8*this.o;for(v=b.length-8;v<b.length;++v)b[v]=w&255,w/=256;for(this.u(b),b=Array(16),v=w=0;4>v;++v)for(var E=0;32>E;E+=8)b[w++]=this.g[v]>>>E&255;return b};function o(b,v){var w=a;return Object.prototype.hasOwnProperty.call(w,b)?w[b]:w[b]=v(b)}function s(b,v){this.h=v;for(var w=[],E=!0,C=b.length-1;0<=C;C--){var A=b[C]|0;E&&A==v||(w[C]=A,E=!1)}this.g=w}var a={};function u(b){return-128<=b&&128>b?o(b,function(v){return new s([v|0],0>v?-1:0)}):new s([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return N(l(-b));for(var v=[],w=1,E=0;b>=w;E++)v[E]=b/w|0,w*=4294967296;return new s(v,0)}function h(b,v){if(b.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b.charAt(0)=="-")return N(h(b.substring(1),v));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),E=p,C=0;C<b.length;C+=8){var A=Math.min(8,b.length-C),I=parseInt(b.substring(C,C+A),v);8>A?(A=l(Math.pow(v,A)),E=E.j(A).add(l(I))):(E=E.j(w),E=E.add(l(I)))}return E}var p=u(0),y=u(1),_=u(16777216);n=s.prototype,n.m=function(){if(O(this))return-N(this).m();for(var b=0,v=1,w=0;w<this.g.length;w++){var E=this.i(w);b+=(0<=E?E:4294967296+E)*v,v*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(x(this))return"0";if(O(this))return"-"+N(this).toString(b);for(var v=l(Math.pow(b,6)),w=this,E="";;){var C=me(w,v).g;w=B(w,C.j(v));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(b);if(w=C,x(w))return A+E;for(;6>A.length;)A="0"+A;E=A+E}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function x(b){if(b.h!=0)return!1;for(var v=0;v<b.g.length;v++)if(b.g[v]!=0)return!1;return!0}function O(b){return b.h==-1}n.l=function(b){return b=B(this,b),O(b)?-1:x(b)?0:1};function N(b){for(var v=b.g.length,w=[],E=0;E<v;E++)w[E]=~b.g[E];return new s(w,~b.h).add(y)}n.abs=function(){return O(this)?N(this):this},n.add=function(b){for(var v=Math.max(this.g.length,b.g.length),w=[],E=0,C=0;C<=v;C++){var A=E+(this.i(C)&65535)+(b.i(C)&65535),I=(A>>>16)+(this.i(C)>>>16)+(b.i(C)>>>16);E=I>>>16,A&=65535,I&=65535,w[C]=I<<16|A}return new s(w,w[w.length-1]&-2147483648?-1:0)};function B(b,v){return b.add(N(v))}n.j=function(b){if(x(this)||x(b))return p;if(O(this))return O(b)?N(this).j(N(b)):N(N(this).j(b));if(O(b))return N(this.j(N(b)));if(0>this.l(_)&&0>b.l(_))return l(this.m()*b.m());for(var v=this.g.length+b.g.length,w=[],E=0;E<2*v;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<b.g.length;C++){var A=this.i(E)>>>16,I=this.i(E)&65535,sr=b.i(C)>>>16,ha=b.i(C)&65535;w[2*E+2*C]+=I*ha,Q(w,2*E+2*C),w[2*E+2*C+1]+=A*ha,Q(w,2*E+2*C+1),w[2*E+2*C+1]+=I*sr,Q(w,2*E+2*C+1),w[2*E+2*C+2]+=A*sr,Q(w,2*E+2*C+2)}for(E=0;E<v;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=v;E<2*v;E++)w[E]=0;return new s(w,0)};function Q(b,v){for(;(b[v]&65535)!=b[v];)b[v+1]+=b[v]>>>16,b[v]&=65535,v++}function Y(b,v){this.g=b,this.h=v}function me(b,v){if(x(v))throw Error("division by zero");if(x(b))return new Y(p,p);if(O(b))return v=me(N(b),v),new Y(N(v.g),N(v.h));if(O(v))return v=me(b,N(v)),new Y(N(v.g),v.h);if(30<b.g.length){if(O(b)||O(v))throw Error("slowDivide_ only works with positive integers.");for(var w=y,E=v;0>=E.l(b);)w=ze(w),E=ze(E);var C=se(w,1),A=se(E,1);for(E=se(E,2),w=se(w,2);!x(E);){var I=A.add(E);0>=I.l(b)&&(C=C.add(w),A=I),E=se(E,1),w=se(w,1)}return v=B(b,C.j(v)),new Y(C,v)}for(C=p;0<=b.l(v);){for(w=Math.max(1,Math.floor(b.m()/v.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),A=l(w),I=A.j(v);O(I)||0<I.l(b);)w-=E,A=l(w),I=A.j(v);x(A)&&(A=y),C=C.add(A),b=B(b,I)}return new Y(C,b)}n.A=function(b){return me(this,b).h},n.and=function(b){for(var v=Math.max(this.g.length,b.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)&b.i(E);return new s(w,this.h&b.h)},n.or=function(b){for(var v=Math.max(this.g.length,b.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)|b.i(E);return new s(w,this.h|b.h)},n.xor=function(b){for(var v=Math.max(this.g.length,b.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)^b.i(E);return new s(w,this.h^b.h)};function ze(b){for(var v=b.g.length+1,w=[],E=0;E<v;E++)w[E]=b.i(E)<<1|b.i(E-1)>>>31;return new s(w,b.h)}function se(b,v){var w=v>>5;v%=32;for(var E=b.g.length-w,C=[],A=0;A<E;A++)C[A]=0<v?b.i(A+w)>>>v|b.i(A+w+1)<<32-v:b.i(A+w);return new s(C,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Av=VS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,_i=VS.Integer=s}).apply(typeof FS<"u"?FS:typeof self<"u"?self:typeof window<"u"?window:{});var Dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ar={};var xv,AB,Os,Rv,Uc,bh,Mv,Nv,Pv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dh=="object"&&Dh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var T=c[m];if(!(T in f))break e;f=f[T]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,T={next:function(){if(!m&&f<c.length){var R=f++;return{value:d(R,c[R]),done:!1}}return m=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,m),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function y(c,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function _(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function x(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,T,R){for(var j=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)j[Me-2]=arguments[Me];return d.prototype[T].apply(m,j)}}function O(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function N(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let T=c.length||0,R=m.length||0;c.length=T+R;for(let j=0;j<R;j++)c[T+j]=m[j]}else c.push(m)}}class B{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function Q(c){return/^[\s\xa0]*$/.test(c)}function Y(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function me(c){return me[" "](c),c}me[" "]=function(){};var ze=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function se(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function b(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(f in m)c[f]=m[f];for(let R=0;R<w.length;R++)f=w[R],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function C(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function A(c){a.setTimeout(()=>{throw c},0)}function I(){var c=Pf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class sr{constructor(){this.h=this.g=null}add(d,f){let m=ha.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var ha=new B(()=>new xR,c=>c.reset());class xR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let fa,pa=!1,Pf=new sr,Xw=()=>{let c=a.Promise.resolve(void 0);fa=()=>{c.then(RR)}};var RR=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){A(f)}var d=ha;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}pa=!1};function Or(){this.s=this.s,this.C=this.C}Or.prototype.s=!1,Or.prototype.ma=function(){this.s||(this.s=!0,this.N())},Or.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Et(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Et.prototype.h=function(){this.defaultPrevented=!0};var MR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function ma(c,d){if(Et.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ze){e:{try{me(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:NR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ma.aa.h.call(this)}}x(ma,Et);var NR={2:"touch",3:"pen",4:"mouse"};ma.prototype.h=function(){ma.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ga="closure_listenable_"+(1e6*Math.random()|0),PR=0;function OR(c,d,f,m,T){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=T,this.key=++PR,this.da=this.fa=!1}function wu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Iu(c){this.src=c,this.g={},this.h=0}Iu.prototype.add=function(c,d,f,m,T){var R=c.toString();c=this.g[R],c||(c=this.g[R]=[],this.h++);var j=kf(c,d,m,T);return-1<j?(d=c[j],f||(d.fa=!1)):(d=new OR(d,this.src,R,!!m,T),d.fa=f,c.push(d)),d};function Of(c,d){var f=d.type;if(f in c.g){var m=c.g[f],T=Array.prototype.indexOf.call(m,d,void 0),R;(R=0<=T)&&Array.prototype.splice.call(m,T,1),R&&(wu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function kf(c,d,f,m){for(var T=0;T<c.length;++T){var R=c[T];if(!R.da&&R.listener==d&&R.capture==!!f&&R.ha==m)return T}return-1}var Ff="closure_lm_"+(1e6*Math.random()|0),Vf={};function eI(c,d,f,m,T){if(m&&m.once)return nI(c,d,f,m,T);if(Array.isArray(d)){for(var R=0;R<d.length;R++)eI(c,d[R],f,m,T);return null}return f=Bf(f),c&&c[ga]?c.K(d,f,l(m)?!!m.capture:!!m,T):tI(c,d,f,!1,m,T)}function tI(c,d,f,m,T,R){if(!d)throw Error("Invalid event type");var j=l(T)?!!T.capture:!!T,Me=jf(c);if(Me||(c[Ff]=Me=new Iu(c)),f=Me.add(d,f,m,j,R),f.proxy)return f;if(m=kR(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)MR||(T=j),T===void 0&&(T=!1),c.addEventListener(d.toString(),m,T);else if(c.attachEvent)c.attachEvent(iI(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function kR(){function c(f){return d.call(c.src,c.listener,f)}let d=FR;return c}function nI(c,d,f,m,T){if(Array.isArray(d)){for(var R=0;R<d.length;R++)nI(c,d[R],f,m,T);return null}return f=Bf(f),c&&c[ga]?c.L(d,f,l(m)?!!m.capture:!!m,T):tI(c,d,f,!0,m,T)}function rI(c,d,f,m,T){if(Array.isArray(d))for(var R=0;R<d.length;R++)rI(c,d[R],f,m,T);else m=l(m)?!!m.capture:!!m,f=Bf(f),c&&c[ga]?(c=c.i,d=String(d).toString(),d in c.g&&(R=c.g[d],f=kf(R,f,m,T),-1<f&&(wu(R[f]),Array.prototype.splice.call(R,f,1),R.length==0&&(delete c.g[d],c.h--)))):c&&(c=jf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=kf(d,f,m,T)),(f=-1<c?d[c]:null)&&Lf(f))}function Lf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[ga])Of(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(iI(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=jf(d))?(Of(f,c),f.h==0&&(f.src=null,d[Ff]=null)):wu(c)}}}function iI(c){return c in Vf?Vf[c]:Vf[c]="on"+c}function FR(c,d){if(c.da)c=!0;else{d=new ma(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&Lf(c),c=f.call(m,d)}return c}function jf(c){return c=c[Ff],c instanceof Iu?c:null}var Uf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bf(c){return typeof c=="function"?c:(c[Uf]||(c[Uf]=function(d){return c.handleEvent(d)}),c[Uf])}function Dt(){Or.call(this),this.i=new Iu(this),this.M=this,this.F=null}x(Dt,Or),Dt.prototype[ga]=!0,Dt.prototype.removeEventListener=function(c,d,f,m){rI(this,c,d,f,m)};function kt(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new Et(d,c);else if(d instanceof Et)d.target=d.target||c;else{var T=d;d=new Et(m,c),E(d,T)}if(T=!0,f)for(var R=f.length-1;0<=R;R--){var j=d.g=f[R];T=Eu(j,m,!0,d)&&T}if(j=d.g=c,T=Eu(j,m,!0,d)&&T,T=Eu(j,m,!1,d)&&T,f)for(R=0;R<f.length;R++)j=d.g=f[R],T=Eu(j,m,!1,d)&&T}Dt.prototype.N=function(){if(Dt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)wu(f[m]);delete c.g[d],c.h--}}this.F=null},Dt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},Dt.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function Eu(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,R=0;R<d.length;++R){var j=d[R];if(j&&!j.da&&j.capture==f){var Me=j.listener,vt=j.ha||j.src;j.fa&&Of(c.i,j),T=Me.call(vt,m)!==!1&&T}}return T&&!m.defaultPrevented}function oI(c,d,f){if(typeof c=="function")f&&(c=y(c,f));else if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function sI(c){c.g=oI(()=>{c.g=null,c.i&&(c.i=!1,sI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class VR extends Or{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:sI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ya(c){Or.call(this),this.h=c,this.g={}}x(ya,Or);var aI=[];function cI(c){se(c.g,function(d,f){this.g.hasOwnProperty(f)&&Lf(d)},c),c.g={}}ya.prototype.N=function(){ya.aa.N.call(this),cI(this)},ya.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $f=a.JSON.stringify,LR=a.JSON.parse,jR=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Hf(){}Hf.prototype.h=null;function uI(c){return c.h||(c.h=c.i())}function lI(){}var va={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qf(){Et.call(this,"d")}x(qf,Et);function zf(){Et.call(this,"c")}x(zf,Et);var Ti={},dI=null;function Du(){return dI=dI||new Dt}Ti.La="serverreachability";function hI(c){Et.call(this,Ti.La,c)}x(hI,Et);function _a(c){let d=Du();kt(d,new hI(d))}Ti.STAT_EVENT="statevent";function fI(c,d){Et.call(this,Ti.STAT_EVENT,c),this.stat=d}x(fI,Et);function Ft(c){let d=Du();kt(d,new fI(d,c))}Ti.Ma="timingevent";function pI(c,d){Et.call(this,Ti.Ma,c),this.size=d}x(pI,Et);function wa(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ia(){this.g=!0}Ia.prototype.xa=function(){this.g=!1};function UR(c,d,f,m,T,R){c.info(function(){if(c.g)if(R)for(var j="",Me=R.split("&"),vt=0;vt<Me.length;vt++){var Ce=Me[vt].split("=");if(1<Ce.length){var bt=Ce[0];Ce=Ce[1];var Ct=bt.split("_");j=2<=Ct.length&&Ct[1]=="type"?j+(bt+"="+Ce+"&"):j+(bt+"=redacted&")}}else j=null;else j=R;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+d+`
`+f+`
`+j})}function BR(c,d,f,m,T,R,j){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+d+`
`+f+`
`+R+" "+j})}function Eo(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+HR(c,f)+(m?" "+m:"")})}function $R(c,d){c.info(function(){return"TIMEOUT: "+d})}Ia.prototype.info=function(){};function HR(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var T=m[1];if(Array.isArray(T)&&!(1>T.length)){var R=T[0];if(R!="noop"&&R!="stop"&&R!="close")for(var j=1;j<T.length;j++)T[j]=""}}}}return $f(f)}catch{return d}}var bu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gf;function Cu(){}x(Cu,Hf),Cu.prototype.g=function(){return new XMLHttpRequest},Cu.prototype.i=function(){return{}},Gf=new Cu;function kr(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new ya(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gI}function gI(){this.i=null,this.g="",this.h=!1}var yI={},Wf={};function Kf(c,d,f){c.L=1,c.v=xu(ar(d)),c.m=f,c.P=!0,vI(c,null)}function vI(c,d){c.F=Date.now(),Tu(c),c.A=ar(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),NI(f.i,"t",m),c.C=0,f=c.j.J,c.h=new gI,c.g=YI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new VR(y(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(aI[0]=T.toString()),T=aI);for(var R=0;R<T.length;R++){var j=eI(f,T[R],m||d.handleEvent,!1,d.h||d);if(!j)break;d.g[j.key]=j}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),_a(),UR(c.i,c.u,c.A,c.l,c.R,c.m)}kr.prototype.ca=function(c){c=c.target;let d=this.M;d&&cr(c)==3?d.j():this.Y(c)},kr.prototype.Y=function(c){try{if(c==this.g)e:{let Ct=cr(this.g);var d=this.g.Ba();let Co=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||jI(this.g)))){this.J||Ct!=4||d==7||(d==8||0>=Co?_a(3):_a(2)),Qf(this);var f=this.g.Z();this.X=f;t:if(_I(this)){var m=jI(this.g);c="";var T=m.length,R=cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Si(this),Ea(this);var j="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(R&&d==T-1)});m.length=0,this.h.g+=c,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,BR(this.i,this.u,this.A,this.l,this.R,Ct,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Me,vt=this.g;if((Me=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(Me)){var Ce=Me;break t}}Ce=null}if(f=Ce)Eo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yf(this,f);else{this.o=!1,this.s=3,Ft(12),Si(this),Ea(this);break e}}if(this.P){f=!0;let mn;for(;!this.J&&this.C<j.length;)if(mn=qR(this,j),mn==Wf){Ct==4&&(this.s=4,Ft(14),f=!1),Eo(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==yI){this.s=4,Ft(15),Eo(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else Eo(this.i,this.l,mn,null),Yf(this,mn);if(_I(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||j.length!=0||this.h.h||(this.s=1,Ft(16),f=!1),this.o=this.o&&f,!f)Eo(this.i,this.l,j,"[Invalid Chunked Response]"),Si(this),Ea(this);else if(0<j.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),np(bt),bt.M=!0,Ft(11))}}else Eo(this.i,this.l,j,null),Yf(this,j);Ct==4&&Si(this),this.o&&!this.J&&(Ct==4?GI(this.j,this):(this.o=!1,Tu(this)))}else aM(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),Si(this),Ea(this)}}}catch{}finally{}};function _I(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function qR(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?Wf:(f=Number(d.substring(f,m)),isNaN(f)?yI:(m+=1,m+f>d.length?Wf:(d=d.slice(m,m+f),c.C=m+f,d)))}kr.prototype.cancel=function(){this.J=!0,Si(this)};function Tu(c){c.S=Date.now()+c.I,wI(c,c.I)}function wI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=wa(y(c.ba,c),d)}function Qf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}kr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?($R(this.i,this.A),this.L!=2&&(_a(),Ft(17)),Si(this),this.s=2,Ea(this)):wI(this,this.S-c)};function Ea(c){c.j.G==0||c.J||GI(c.j,c)}function Si(c){Qf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,cI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Yf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Zf(f.h,c))){if(!c.K&&Zf(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Ou(f),Nu(f);else break e;tp(f),Ft(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=wa(y(f.Za,f),6e3));if(1>=DI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else xi(f,11)}else if((c.K||f.g==c)&&Ou(f),!Q(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let Ce=T[d];if(f.T=Ce[0],Ce=Ce[1],f.G==2)if(Ce[0]=="c"){f.K=Ce[1],f.ia=Ce[2];let bt=Ce[3];bt!=null&&(f.la=bt,f.j.info("VER="+f.la));let Ct=Ce[4];Ct!=null&&(f.Aa=Ct,f.j.info("SVER="+f.Aa));let Co=Ce[5];Co!=null&&typeof Co=="number"&&0<Co&&(m=1.5*Co,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let mn=c.g;if(mn){let Fu=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fu){var R=m.h;R.g||Fu.indexOf("spdy")==-1&&Fu.indexOf("quic")==-1&&Fu.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(Jf(R,R.h),R.h=null))}if(m.D){let rp=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;rp&&(m.ya=rp,ke(m.I,m.D,rp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var j=c;if(m.qa=QI(m,m.J?m.ia:null,m.W),j.K){bI(m.h,j);var Me=j,vt=m.L;vt&&(Me.I=vt),Me.B&&(Qf(Me),Tu(Me)),m.g=j}else qI(m);0<f.i.length&&Pu(f)}else Ce[0]!="stop"&&Ce[0]!="close"||xi(f,7);else f.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?xi(f,7):ep(f):Ce[0]!="noop"&&f.l&&f.l.ta(Ce),f.v=0)}}_a(4)}catch{}}var zR=class{constructor(c,d){this.g=c,this.map=d}};function II(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function EI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function DI(c){return c.h?1:c.g?c.g.size:0}function Zf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Jf(c,d){c.g?c.g.add(d):c.h=d}function bI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}II.prototype.cancel=function(){if(this.i=CI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function CI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return O(c.i)}function GR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function WR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function TI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=WR(c),m=GR(c),T=m.length,R=0;R<T;R++)d.call(void 0,m[R],f&&f[R],c)}var SI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function KR(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),T=null;if(0<=m){var R=c[f].substring(0,m);T=c[f].substring(m+1)}else R=c[f];d(R,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Ai(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ai){this.h=c.h,Su(this,c.j),this.o=c.o,this.g=c.g,Au(this,c.s),this.l=c.l;var d=c.i,f=new Ca;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),AI(this,f),this.m=c.m}else c&&(d=String(c).match(SI))?(this.h=!1,Su(this,d[1]||"",!0),this.o=Da(d[2]||""),this.g=Da(d[3]||"",!0),Au(this,d[4]),this.l=Da(d[5]||"",!0),AI(this,d[6]||"",!0),this.m=Da(d[7]||"")):(this.h=!1,this.i=new Ca(null,this.h))}Ai.prototype.toString=function(){var c=[],d=this.j;d&&c.push(ba(d,xI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(ba(d,xI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(ba(f,f.charAt(0)=="/"?ZR:YR,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",ba(f,XR)),c.join("")};function ar(c){return new Ai(c)}function Su(c,d,f){c.j=f?Da(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Au(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function AI(c,d,f){d instanceof Ca?(c.i=d,eM(c.i,c.h)):(f||(d=ba(d,JR)),c.i=new Ca(d,c.h))}function ke(c,d,f){c.i.set(d,f)}function xu(c){return ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Da(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ba(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,QR),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function QR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var xI=/[#\/\?@]/g,YR=/[#\?:]/g,ZR=/[#\?]/g,JR=/[#\?@]/g,XR=/#/g;function Ca(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Fr(c){c.g||(c.g=new Map,c.h=0,c.i&&KR(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Ca.prototype,n.add=function(c,d){Fr(this),this.i=null,c=Do(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function RI(c,d){Fr(c),d=Do(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function MI(c,d){return Fr(c),d=Do(c,d),c.g.has(d)}n.forEach=function(c,d){Fr(this),this.g.forEach(function(f,m){f.forEach(function(T){c.call(d,T,m,this)},this)},this)},n.na=function(){Fr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let T=c[m];for(let R=0;R<T.length;R++)f.push(d[m])}return f},n.V=function(c){Fr(this);let d=[];if(typeof c=="string")MI(this,c)&&(d=d.concat(this.g.get(Do(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Fr(this),this.i=null,c=Do(this,c),MI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function NI(c,d,f){RI(c,d),0<f.length&&(c.i=null,c.g.set(Do(c,d),O(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let R=encodeURIComponent(String(m)),j=this.V(m);for(m=0;m<j.length;m++){var T=R;j[m]!==""&&(T+="="+encodeURIComponent(String(j[m]))),c.push(T)}}return this.i=c.join("&")};function Do(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function eM(c,d){d&&!c.j&&(Fr(c),c.i=null,c.g.forEach(function(f,m){var T=m.toLowerCase();m!=T&&(RI(this,m),NI(this,T,f))},c)),c.j=d}function tM(c,d){let f=new Ia;if(a.Image){let m=new Image;m.onload=_(Vr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=_(Vr,f,"TestLoadImage: error",!1,d,m),m.onabort=_(Vr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=_(Vr,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function nM(c,d){let f=new Ia,m=new AbortController,T=setTimeout(()=>{m.abort(),Vr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(R=>{clearTimeout(T),R.ok?Vr(f,"TestPingServer: ok",!0,d):Vr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Vr(f,"TestPingServer: error",!1,d)})}function Vr(c,d,f,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(f)}catch{}}function rM(){this.g=new jR}function iM(c,d,f){let m=f||"";try{TI(c,function(T,R){let j=T;l(T)&&(j=$f(T)),d.push(m+R+"="+encodeURIComponent(j))})}catch(T){throw d.push(m+"type="+encodeURIComponent("_badmap")),T}}function Ta(c){this.l=c.Ub||null,this.j=c.eb||!1}x(Ta,Hf),Ta.prototype.g=function(){return new Ru(this.l,this.j)},Ta.prototype.i=function(c){return function(){return c}}({});function Ru(c,d){Dt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Ru,Dt),n=Ru.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Aa(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sa(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Aa(this)),this.g&&(this.readyState=3,Aa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;PI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function PI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Sa(this):Aa(this),this.readyState==3&&PI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Sa(this))},n.Qa=function(c){this.g&&(this.response=c,Sa(this))},n.ga=function(){this.g&&Sa(this)};function Sa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Aa(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Aa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ru.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function OI(c){let d="";return se(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Xf(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=OI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):ke(c,d,f))}function Ge(c){Dt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ge,Dt);var oM=/^https?$/i,sM=["POST","PUT"];n=Ge.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gf.g(),this.v=this.o?uI(this.o):uI(Gf),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(R){kI(this,R);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)f.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let R of m.keys())f.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(sM,d,void 0))||m||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,j]of f)this.g.setRequestHeader(R,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{LI(this),this.u=!0,this.g.send(c),this.u=!1}catch(R){kI(this,R)}};function kI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,FI(c),Mu(c)}function FI(c){c.A||(c.A=!0,kt(c,"complete"),kt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,kt(this,"complete"),kt(this,"abort"),Mu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mu(this,!0)),Ge.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?VI(this):this.bb())},n.bb=function(){VI(this)};function VI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||cr(c)!=4||c.Z()!=2)){if(c.u&&cr(c)==4)oI(c.Ea,0,c);else if(kt(c,"readystatechange"),cr(c)==4){c.h=!1;try{let j=c.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=j===0){var T=String(c.D).match(SI)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),m=!oM.test(T?T.toLowerCase():"")}f=m}if(f)kt(c,"complete"),kt(c,"success");else{c.m=6;try{var R=2<cr(c)?c.g.statusText:""}catch{R=""}c.l=R+" ["+c.Z()+"]",FI(c)}}finally{Mu(c)}}}}function Mu(c,d){if(c.g){LI(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||kt(c,"ready");try{f.onreadystatechange=m}catch{}}}function LI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function cr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<cr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),LR(d)}};function jI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function aM(c){let d={};c=(c.g&&2<=cr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(Q(c[m]))continue;var f=C(c[m]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let R=d[T]||[];d[T]=R,R.push(f)}b(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xa(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function UI(c){this.Aa=0,this.i=[],this.j=new Ia,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xa("baseRetryDelayMs",5e3,c),this.cb=xa("retryDelaySeedMs",1e4,c),this.Wa=xa("forwardChannelMaxRetries",2,c),this.wa=xa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new II(c&&c.concurrentRequestLimit),this.Da=new rM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=UI.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,m){Ft(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=QI(this,null,this.W),Pu(this)};function ep(c){if(BI(c),c.G==3){var d=c.U++,f=ar(c.I);if(ke(f,"SID",c.K),ke(f,"RID",d),ke(f,"TYPE","terminate"),Ra(c,f),d=new kr(c,c.j,d),d.L=2,d.v=xu(ar(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=YI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Tu(d)}KI(c)}function Nu(c){c.g&&(np(c),c.g.cancel(),c.g=null)}function BI(c){Nu(c),c.u&&(a.clearTimeout(c.u),c.u=null),Ou(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Pu(c){if(!EI(c.h)&&!c.s){c.s=!0;var d=c.Ga;fa||Xw(),pa||(fa(),pa=!0),Pf.add(d,c),c.B=0}}function cM(c,d){return DI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=wa(y(c.Ga,c,d),WI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new kr(this,this.j,c),R=this.o;if(this.S&&(R?(R=v(R),E(R,this.S)):R=this.S),this.m!==null||this.O||(T.H=R,R=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=HI(this,T,d),f=ar(this.I),ke(f,"RID",c),ke(f,"CVER",22),this.D&&ke(f,"X-HTTP-Session-Id",this.D),Ra(this,f),R&&(this.O?d="headers="+encodeURIComponent(String(OI(R)))+"&"+d:this.m&&Xf(f,this.m,R)),Jf(this.h,T),this.Ua&&ke(f,"TYPE","init"),this.P?(ke(f,"$req",d),ke(f,"SID","null"),T.T=!0,Kf(T,f,null)):Kf(T,f,d),this.G=2}}else this.G==3&&(c?$I(this,c):this.i.length==0||EI(this.h)||$I(this))};function $I(c,d){var f;d?f=d.l:f=c.U++;let m=ar(c.I);ke(m,"SID",c.K),ke(m,"RID",f),ke(m,"AID",c.T),Ra(c,m),c.m&&c.o&&Xf(m,c.m,c.o),f=new kr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=HI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Jf(c.h,f),Kf(f,m,d)}function Ra(c,d){c.H&&se(c.H,function(f,m){ke(d,m,f)}),c.l&&TI({},function(f,m){ke(d,m,f)})}function HI(c,d,f){f=Math.min(c.i.length,f);var m=c.l?y(c.l.Na,c.l,c):null;e:{var T=c.i;let R=-1;for(;;){let j=["count="+f];R==-1?0<f?(R=T[0].g,j.push("ofs="+R)):R=0:j.push("ofs="+R);let Me=!0;for(let vt=0;vt<f;vt++){let Ce=T[vt].g,bt=T[vt].map;if(Ce-=R,0>Ce)R=Math.max(0,T[vt].g-100),Me=!1;else try{iM(bt,j,"req"+Ce+"_")}catch{m&&m(bt)}}if(Me){m=j.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function qI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;fa||Xw(),pa||(fa(),pa=!0),Pf.add(d,c),c.v=0}}function tp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=wa(y(c.Fa,c),WI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,zI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=wa(y(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),Nu(this),zI(this))};function np(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function zI(c){c.g=new kr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=ar(c.qa);ke(d,"RID","rpc"),ke(d,"SID",c.K),ke(d,"AID",c.T),ke(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&ke(d,"TO",c.ja),ke(d,"TYPE","xmlhttp"),Ra(c,d),c.m&&c.o&&Xf(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=xu(ar(d)),f.m=null,f.P=!0,vI(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Nu(this),tp(this),Ft(19))};function Ou(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function GI(c,d){var f=null;if(c.g==d){Ou(c),np(c),c.g=null;var m=2}else if(Zf(c.h,d))f=d.D,bI(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;m=Du(),kt(m,new pI(m,f)),Pu(c)}else qI(c);else if(T=d.s,T==3||T==0&&0<d.X||!(m==1&&cM(c,d)||m==2&&tp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),T){case 1:xi(c,5);break;case 4:xi(c,10);break;case 3:xi(c,6);break;default:xi(c,2)}}}function WI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function xi(c,d){if(c.j.info("Error code "+d),d==2){var f=y(c.fb,c),m=c.Xa;let T=!m;m=new Ai(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Su(m,"https"),xu(m),T?tM(m.toString(),f):nM(m.toString(),f)}else Ft(2);c.G=0,c.l&&c.l.sa(d),KI(c),BI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function KI(c){if(c.G=0,c.ka=[],c.l){let d=CI(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,O(c.i),c.i.length=0),c.l.ra()}}function QI(c,d,f){var m=f instanceof Ai?ar(f):new Ai(f);if(m.g!="")d&&(m.g=d+"."+m.g),Au(m,m.s);else{var T=a.location;m=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var R=new Ai(null);m&&Su(R,m),d&&(R.g=d),T&&Au(R,T),f&&(R.l=f),m=R}return f=c.D,d=c.ya,f&&d&&ke(m,f,d),ke(m,"VER",c.la),Ra(c,m),m}function YI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ge(new Ta({eb:f})):new Ge(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ZI(){}n=ZI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ku(){}ku.prototype.g=function(c,d){return new Gt(c,d)};function Gt(c,d){Dt.call(this),this.g=new UI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!Q(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!Q(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new bo(this)}x(Gt,Dt),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){ep(this.g)},Gt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=$f(c),c=f);d.i.push(new zR(d.Ya++,c)),d.G==3&&Pu(d)},Gt.prototype.N=function(){this.g.l=null,delete this.j,ep(this.g),delete this.g,Gt.aa.N.call(this)};function JI(c){qf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}x(JI,qf);function XI(){zf.call(this),this.status=1}x(XI,zf);function bo(c){this.g=c}x(bo,ZI),bo.prototype.ua=function(){kt(this.g,"a")},bo.prototype.ta=function(c){kt(this.g,new JI(c))},bo.prototype.sa=function(c){kt(this.g,new XI)},bo.prototype.ra=function(){kt(this.g,"b")},ku.prototype.createWebChannel=ku.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,Pv=Ar.createWebChannelTransport=function(){return new ku},Nv=Ar.getStatEventTarget=function(){return Du()},Mv=Ar.Event=Ti,bh=Ar.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bu.NO_ERROR=0,bu.TIMEOUT=8,bu.HTTP_ERROR=6,Uc=Ar.ErrorCode=bu,mI.COMPLETE="complete",Rv=Ar.EventType=mI,lI.EventType=va,va.OPEN="a",va.CLOSE="b",va.ERROR="c",va.MESSAGE="d",Dt.prototype.listen=Dt.prototype.K,Os=Ar.WebChannel=lI,AB=Ar.FetchXmlHttpFactory=Ta,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,xv=Ar.XhrIo=Ge}).apply(typeof Dh<"u"?Dh:typeof self<"u"?self:typeof window<"u"?window:{});var LS="@firebase/firestore";var yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");var ta="10.14.0";var uo=new di("@firebase/firestore");function Bc(){return uo.logLevel}function H(n,...e){if(uo.logLevel<=we.DEBUG){let t=e.map(gw);uo.debug(`Firestore (${ta}): ${n}`,...t)}}function Rr(n,...e){if(uo.logLevel<=we.ERROR){let t=e.map(gw);uo.error(`Firestore (${ta}): ${n}`,...t)}}function Bs(n,...e){if(uo.logLevel<=we.WARN){let t=e.map(gw);uo.warn(`Firestore (${ta}): ${n}`,...t)}}function gw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function te(n="Unexpected state"){let e=`FIRESTORE (${ta}) INTERNAL ASSERTION FAILED: `+n;throw Rr(e),new Error(e)}function Re(n,e){n||te()}function oe(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends Xt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Sn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var xh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Lv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yt.UNAUTHENTICATED))}shutdown(){}},jv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Uv=class{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Re(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Sn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Sn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>g(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Sn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string"),new xh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string"),new yt(e)}},Bv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},$v=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Bv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Hv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},qv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Re(this.o===void 0);let r=o=>{o.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,H("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Re(typeof t.token=="string"),this.R=t.token,new Hv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function xB(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Rh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=xB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function Te(n,e){return n<e?-1:n>e?1:0}function $s(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var It=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new $(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ue=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new It(0,0))}static max(){return new n(new It(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Mh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&te(),r===void 0?r=e.length-t:r>e.length-t&&te(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},qe=class n extends Mh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},RB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,tn=class n extends Mh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return RB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new $(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new $(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var K=class n{constructor(e){this.path=e}static fromPath(e){return new n(qe.fromString(e))}static fromName(e){return new n(qe.fromString(e).popFirst(5))}static empty(){return new n(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new qe(e.slice()))}};var zv=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};zv.UNKNOWN_ID=-1;function MB(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new It(t+1,0):new It(t,r));return new lo(i,K.empty(),e)}function NB(n){return new lo(n.readTime,n.key,-1)}var lo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ue.min(),K.empty(),-1)}static max(){return new n(ue.max(),K.empty(),-1)}};function PB(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=K.comparator(n.documentKey,e.documentKey),t!==0?t:Te(n.largestBatchId,e.largestBatchId))}var OB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Gv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function au(n){return g(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==OB)throw n;H("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function kB(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function cu(n){return n.name==="IndexedDbTransactionError"}var _A=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function lf(n){return n==null}function Wc(n){return n===0&&1/n==-1/0}function FB(n){return typeof n=="number"&&Number.isInteger(n)&&!Wc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var VB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],F7=[...VB,"documentOverlays"],LB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jB=LB,UB=[...jB,"indexConfiguration","indexState","indexEntries"];var V7=[...UB,"globals"];function jS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function yo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Qe=class n{constructor(e,t){this.comparator=e,this.root=t||Zn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ls(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ls(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ls(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ls(this.root,e,this.comparator,!0)}},Ls=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Zn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();let e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}};Zn.EMPTY=null,Zn.RED=!0,Zn.BLACK=!1;Zn.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Zn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Nt=class n{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nh(this.data.getIterator())}getIteratorFrom(e){return new Nh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Nh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var fn=class n{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Nt(tn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $s(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ph=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ot=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ph("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ot.EMPTY_BYTE_STRING=new Ot("");var BB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mr(n){if(Re(!!n),typeof n=="string"){let e=0,t=BB.exec(n);if(Re(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(n.seconds),nanos:Ue(n.nanos)}}function Ue(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ii(n){return typeof n=="string"?Ot.fromBase64String(n):Ot.fromUint8Array(n)}function yw(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function vw(n){let e=n.mapValue.fields.__previous_value__;return yw(e)?vw(e):e}function Kc(n){let e=Mr(n.mapValue.fields.__local_write_time__.timestampValue);return new It(e.seconds,e.nanos)}var Wv=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Oh=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ch={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ho(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?yw(n)?4:EA(n)?9007199254740991:IA(n)?10:11:te()}function er(n,e){if(n===e)return!0;let t=ho(n);if(t!==ho(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Kc(n).isEqual(Kc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Mr(i.timestampValue),a=Mr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Ii(i.bytesValue).isEqual(Ii(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ue(i.geoPointValue.latitude)===Ue(o.geoPointValue.latitude)&&Ue(i.geoPointValue.longitude)===Ue(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ue(i.integerValue)===Ue(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ue(i.doubleValue),a=Ue(o.doubleValue);return s===a?Wc(s)===Wc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return $s(n.arrayValue.values||[],e.arrayValue.values||[],er);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(jS(s)!==jS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!er(s[u],a[u])))return!1;return!0}(n,e);default:return te()}}function Qc(n,e){return(n.values||[]).find(t=>er(t,e))!==void 0}function Hs(n,e){if(n===e)return 0;let t=ho(n),r=ho(e);if(t!==r)return Te(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Te(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ue(o.integerValue||o.doubleValue),u=Ue(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return US(n.timestampValue,e.timestampValue);case 4:return US(Kc(n),Kc(e));case 5:return Te(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Ii(o),u=Ii(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=Te(a[l],u[l]);if(h!==0)return h}return Te(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Te(Ue(o.latitude),Ue(s.latitude));return a!==0?a:Te(Ue(o.longitude),Ue(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return BS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},y=s.fields||{},_=(a=p.value)===null||a===void 0?void 0:a.arrayValue,x=(u=y.value)===null||u===void 0?void 0:u.arrayValue,O=Te(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((h=x?.values)===null||h===void 0?void 0:h.length)||0);return O!==0?O:BS(_,x)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Ch.mapValue&&s===Ch.mapValue)return 0;if(o===Ch.mapValue)return 1;if(s===Ch.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let y=Te(u[p],h[p]);if(y!==0)return y;let _=Hs(a[u[p]],l[h[p]]);if(_!==0)return _}return Te(u.length,h.length)}(n.mapValue,e.mapValue);default:throw te()}}function US(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Te(n,e);let t=Mr(n),r=Mr(e),i=Te(t.seconds,r.seconds);return i!==0?i:Te(t.nanos,r.nanos)}function BS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Hs(t[i],r[i]);if(o)return o}return Te(t.length,r.length)}function qs(n){return Kv(n)}function Kv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Mr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ii(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return K.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Kv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Kv(t.fields[s])}`;return i+"}"}(n.mapValue):te()}function $S(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qv(n){return!!n&&"integerValue"in n}function _w(n){return!!n&&"arrayValue"in n}function HS(n){return!!n&&"nullValue"in n}function qS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sh(n){return!!n&&"mapValue"in n}function IA(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Hc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return yo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function EA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var en=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hc(t)}setAll(e){let t=tn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Hc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Sh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return er(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Sh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){yo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Hc(this.value))}};function DA(n){let e=[];return yo(n.fields,(t,r)=>{let i=new tn([t]);if(Sh(r)){let o=DA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new fn(e)}var An=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ue.min(),ue.min(),ue.min(),en.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ue.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ue.min(),ue.min(),en.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ue.min(),ue.min(),en.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var zs=class{constructor(e,t){this.position=e,this.inclusive=t}};function zS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=K.comparator(K.fromName(s.referenceValue),t.key):r=Hs(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function GS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!er(n.position[t],e.position[t]))return!1;return!0}var Gs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function $B(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var kh=class{},ct=class n extends kh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Zv(e,t,r):t==="array-contains"?new e_(e,r):t==="in"?new t_(e,r):t==="not-in"?new n_(e,r):t==="array-contains-any"?new r_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Jv(e,r):new Xv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Hs(t,this.value)):t!==null&&ho(this.value)===ho(t)&&this.matchesComparison(Hs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},xn=class n extends kh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return bA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function bA(n){return n.op==="and"}function CA(n){return HB(n)&&bA(n)}function HB(n){for(let e of n.filters)if(e instanceof xn)return!1;return!0}function Yv(n){if(n instanceof ct)return n.field.canonicalString()+n.op.toString()+qs(n.value);if(CA(n))return n.filters.map(e=>Yv(e)).join(",");{let e=n.filters.map(t=>Yv(t)).join(",");return`${n.op}(${e})`}}function TA(n,e){return n instanceof ct?function(r,i){return i instanceof ct&&r.op===i.op&&r.field.isEqual(i.field)&&er(r.value,i.value)}(n,e):n instanceof xn?function(r,i){return i instanceof xn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&TA(s,i.filters[a]),!0):!1}(n,e):void te()}function SA(n){return n instanceof ct?function(t){return`${t.field.canonicalString()} ${t.op} ${qs(t.value)}`}(n):n instanceof xn?function(t){return t.op.toString()+" {"+t.getFilters().map(SA).join(" ,")+"}"}(n):"Filter"}var Zv=class extends ct{constructor(e,t,r){super(e,t,r),this.key=K.fromName(r.referenceValue)}matches(e){let t=K.comparator(e.key,this.key);return this.matchesComparison(t)}},Jv=class extends ct{constructor(e,t){super(e,"in",t),this.keys=AA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Xv=class extends ct{constructor(e,t){super(e,"not-in",t),this.keys=AA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function AA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>K.fromName(r.referenceValue))}var e_=class extends ct{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return _w(t)&&Qc(t.arrayValue,this.value)}},t_=class extends ct{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Qc(this.value.arrayValue,t)}},n_=class extends ct{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Qc(this.value.arrayValue,t)}},r_=class extends ct{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!_w(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Qc(this.value.arrayValue,r))}};var i_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function WS(n,e=null,t=[],r=[],i=null,o=null,s=null){return new i_(n,e,t,r,i,o,s)}function ww(n){let e=oe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Yv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),lf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>qs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>qs(r)).join(",")),e.ue=t}return e.ue}function Iw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$B(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!TA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!GS(n.startAt,e.startAt)&&GS(n.endAt,e.endAt)}function o_(n){return K.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var fo=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function qB(n,e,t,r,i,o,s,a){return new fo(n,e,t,r,i,o,s,a)}function df(n){return new fo(n)}function KS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function xA(n){return n.collectionGroup!==null}function qc(n){let e=oe(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Nt(tn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Gs(o,r))}),t.has(tn.keyField().canonicalString())||e.ce.push(new Gs(tn.keyField(),r))}return e.ce}function Jn(n){let e=oe(n);return e.le||(e.le=zB(e,qc(n))),e.le}function zB(n,e){if(n.limitType==="F")return WS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Gs(i.field,o)});let t=n.endAt?new zs(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new zs(n.startAt.position,n.startAt.inclusive):null;return WS(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function s_(n,e){let t=n.filters.concat([e]);return new fo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function a_(n,e,t){return new fo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hf(n,e){return Iw(Jn(n),Jn(e))&&n.limitType===e.limitType}function RA(n){return`${ww(Jn(n))}|lt:${n.limitType}`}function ks(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>SA(i)).join(", ")}]`),lf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>qs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>qs(i)).join(",")),`Target(${r})`}(Jn(n))}; limitType=${n.limitType})`}function ff(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):K.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of qc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=zS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,qc(r),i)||r.endAt&&!function(s,a,u){let l=zS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,qc(r),i))}(n,e)}function GB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function MA(n){return(e,t)=>{let r=!1;for(let i of qc(n)){let o=WB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function WB(n,e,t){let r=n.field.isKeyField()?K.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Hs(u,l):te()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}var Ei=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return wA(this.inner)}size(){return this.innerSize}};var KB=new Qe(K.comparator);function Nr(){return KB}var NA=new Qe(K.comparator);function $c(...n){let e=NA;for(let t of n)e=e.insert(t.key,t);return e}function PA(n){let e=NA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function so(){return zc()}function OA(){return zc()}function zc(){return new Ei(n=>n.toString(),(n,e)=>n.isEqual(e))}var QB=new Qe(K.comparator),YB=new Nt(K.comparator);function Ie(...n){let e=YB;for(let t of n)e=e.add(t);return e}var ZB=new Nt(Te);function JB(){return ZB}function Ew(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(e)?"-0":e}}function kA(n){return{integerValue:""+n}}function XB(n,e){return FB(e)?kA(e):Ew(n,e)}var Ws=class{constructor(){this._=void 0}};function e$(n,e,t){return n instanceof Ks?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&yw(o)&&(o=vw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Di?VA(n,e):n instanceof po?LA(n,e):function(i,o){let s=FA(i,o),a=QS(s)+QS(i.Pe);return Qv(s)&&Qv(i.Pe)?kA(a):Ew(i.serializer,a)}(n,e)}function t$(n,e,t){return n instanceof Di?VA(n,e):n instanceof po?LA(n,e):t}function FA(n,e){return n instanceof Qs?function(r){return Qv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ks=class extends Ws{},Di=class extends Ws{constructor(e){super(),this.elements=e}};function VA(n,e){let t=jA(e);for(let r of n.elements)t.some(i=>er(i,r))||t.push(r);return{arrayValue:{values:t}}}var po=class extends Ws{constructor(e){super(),this.elements=e}};function LA(n,e){let t=jA(e);for(let r of n.elements)t=t.filter(i=>!er(i,r));return{arrayValue:{values:t}}}var Qs=class extends Ws{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function QS(n){return Ue(n.integerValue||n.doubleValue)}function jA(n){return _w(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var c_=class{constructor(e,t){this.field=e,this.transform=t}};function n$(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Di&&i instanceof Di||r instanceof po&&i instanceof po?$s(r.elements,i.elements,er):r instanceof Qs&&i instanceof Qs?er(r.Pe,i.Pe):r instanceof Ks&&i instanceof Ks}(n.transform,e.transform)}var u_=class{constructor(e,t){this.version=e,this.transformResults=t}},xr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ah(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ys=class{};function UA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Fh(n.key,xr.none()):new mo(n.key,n.data,xr.none());{let t=n.data,r=en.empty(),i=new Nt(tn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new tr(n.key,r,new fn(i.toArray()),xr.none())}}function r$(n,e,t){n instanceof mo?function(i,o,s){let a=i.value.clone(),u=ZS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof tr?function(i,o,s){if(!Ah(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=ZS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(BA(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Gc(n,e,t,r){return n instanceof mo?function(o,s,a,u){if(!Ah(o.precondition,s))return a;let l=o.value.clone(),h=JS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof tr?function(o,s,a,u){if(!Ah(o.precondition,s))return a;let l=JS(o.fieldTransforms,u,s),h=s.data;return h.setAll(BA(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Ah(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function i$(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=FA(r.transform,i||null);o!=null&&(t===null&&(t=en.empty()),t.set(r.field,o))}return t||null}function YS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$s(r,i,(o,s)=>n$(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var mo=class extends Ys{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},tr=class extends Ys{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function BA(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function ZS(n,e,t){let r=new Map;Re(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,t$(s,a,t[i]))}return r}function JS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,e$(o,s,e))}return r}var Fh=class extends Ys{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},l_=class extends Ys{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var d_=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&r$(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Gc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Gc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=OA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=UA(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ie())}isEqual(e){return this.batchId===e.batchId&&$s(this.mutations,e.mutations,(t,r)=>YS(t,r))&&$s(this.baseMutations,e.baseMutations,(t,r)=>YS(t,r))}},h_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Re(e.mutations.length===r.length);let i=function(){return QB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var f_=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var p_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var st,De;function o$(n){switch(n){default:return te();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function $A(n){if(n===void 0)return Rr("GRPC error has no .code"),P.UNKNOWN;switch(n){case st.OK:return P.OK;case st.CANCELLED:return P.CANCELLED;case st.UNKNOWN:return P.UNKNOWN;case st.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case st.INTERNAL:return P.INTERNAL;case st.UNAVAILABLE:return P.UNAVAILABLE;case st.UNAUTHENTICATED:return P.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case st.NOT_FOUND:return P.NOT_FOUND;case st.ALREADY_EXISTS:return P.ALREADY_EXISTS;case st.PERMISSION_DENIED:return P.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case st.ABORTED:return P.ABORTED;case st.OUT_OF_RANGE:return P.OUT_OF_RANGE;case st.UNIMPLEMENTED:return P.UNIMPLEMENTED;case st.DATA_LOSS:return P.DATA_LOSS;default:return te()}}(De=st||(st={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";var XS=null;function s$(){return new TextEncoder}var a$=new _i([4294967295,4294967295],0);function eA(n){let e=s$().encode(n),t=new Av;return t.update(e),new Uint8Array(t.digest())}function tA(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new _i([t,r],0),new _i([i,o],0)]}var m_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ao(`Invalid padding: ${t}`);if(r<0)throw new ao(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ao(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ao(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=_i.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(_i.fromNumber(r)));return i.compare(a$)===1&&(i=new _i([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=eA(e),[r,i]=tA(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=eA(e),[r,i]=tA(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ao=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Vh=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Yc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ue.min(),i,new Qe(Te),Nr(),Ie())}},Yc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ie(),Ie(),Ie())}};var js=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Lh=class{constructor(e,t){this.targetId=e,this.me=t}},jh=class{constructor(e,t,r=Ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Uh=class{constructor(){this.fe=0,this.ge=rA(),this.pe=Ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ie(),t=Ie(),r=Ie();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:te()}}),new Yc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=rA()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Re(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},g_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Nr(),this.qe=nA(),this.Qe=new Qe(Te)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:te()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(o_(o))if(r===0){let s=new K(o.path);this.Ue(t,s,An.newNoDocument(s,ue.min()))}else Re(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}XS?.et(function(h,p,y,_,x){var O,N,B,Q,Y,me;let ze={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},se=p.unchangedNames;return se&&(ze.bloomFilter={applied:x===0,hashCount:(O=se?.hashCount)!==null&&O!==void 0?O:0,bitmapLength:(Q=(B=(N=se?.bits)===null||N===void 0?void 0:N.bitmap)===null||B===void 0?void 0:B.length)!==null&&Q!==void 0?Q:0,padding:(me=(Y=se?.bits)===null||Y===void 0?void 0:Y.padding)!==null&&me!==void 0?me:0,mightContain:b=>{var v;return(v=_?.mightContain(b))!==null&&v!==void 0&&v}}),ze}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Ii(r).toUint8Array()}catch(u){if(u instanceof Ph)return Bs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new m_(s,i,o)}catch(u){return Bs(u instanceof ao?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&o_(a.target)){let u=new K(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,An.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=Ie();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Vh(e,t,this.Qe,this.ke,r);return this.ke=Nr(),this.qe=nA(),this.Qe=new Qe(Te),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Uh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Nt(Te),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||H("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Uh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function nA(){return new Qe(K.comparator)}function rA(){return new Qe(K.comparator)}var c$={asc:"ASCENDING",desc:"DESCENDING"},u$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},l$={and:"AND",or:"OR"},y_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function v_(n,e){return n.useProto3Json||lf(e)?e:{value:e}}function Bh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function d$(n,e){return Bh(n,e.toTimestamp())}function Xn(n){return Re(!!n),ue.fromTimestamp(function(t){let r=Mr(t);return new It(r.seconds,r.nanos)}(n))}function Dw(n,e){return __(n,e).canonicalString()}function __(n,e){let t=function(i){return new qe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function qA(n){let e=qe.fromString(n);return Re(QA(e)),e}function w_(n,e){return Dw(n.databaseId,e.path)}function Ov(n,e){let t=qA(e);if(t.get(1)!==n.databaseId.projectId)throw new $(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new K(GA(t))}function zA(n,e){return Dw(n.databaseId,e)}function h$(n){let e=qA(n);return e.length===4?qe.emptyPath():GA(e)}function I_(n){return new qe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function GA(n){return Re(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function iA(n,e,t){return{name:w_(n,e),fields:t.value.mapValue.fields}}function f$(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Re(h===void 0||typeof h=="string"),Ot.fromBase64String(h||"")):(Re(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ot.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?P.UNKNOWN:$A(l.code);return new $(h,l.message||"")}(s);t=new jh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ov(n,r.document.name),o=Xn(r.document.updateTime),s=r.document.createTime?Xn(r.document.createTime):ue.min(),a=new en({mapValue:{fields:r.document.fields}}),u=An.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new js(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Ov(n,r.document),o=r.readTime?Xn(r.readTime):ue.min(),s=An.newNoDocument(i,o),a=r.removedTargetIds||[];t=new js([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Ov(n,r.document),o=r.removedTargetIds||[];t=new js([],o,i,null)}else{if(!("filter"in e))return te();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new p_(i,o),a=r.targetId;t=new Lh(a,s)}}return t}function p$(n,e){let t;if(e instanceof mo)t={update:iA(n,e.key,e.value)};else if(e instanceof Fh)t={delete:w_(n,e.key)};else if(e instanceof tr)t={update:iA(n,e.key,e.data),updateMask:D$(e.fieldMask)};else{if(!(e instanceof l_))return te();t={verify:w_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Ks)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Di)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof po)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qs)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw te()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:d$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:te()}(n,e.precondition)),t}function m$(n,e){return n&&n.length>0?(Re(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Xn(i.updateTime):Xn(o);return s.isEqual(ue.min())&&(s=Xn(o)),new u_(s,i.transformResults||[])}(t,e))):[]}function g$(n,e){return{documents:[zA(n,e.path)]}}function y$(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=zA(n,i);let o=function(l){if(l.length!==0)return KA(xn.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(y){return{field:Fs(y.field),direction:w$(y.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=v_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function v$(n){let e=h$(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Re(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let y=WA(p);return y instanceof xn&&CA(y)?y.getFilters():[y]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(y=>function(x){return new Gs(Vs(x.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(y))}(t.orderBy));let a=null;t.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,lf(y)?null:y}(t.limit));let u=null;t.startAt&&(u=function(p){let y=!!p.before,_=p.values||[];return new zs(_,y)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let y=!p.before,_=p.values||[];return new zs(_,y)}(t.endAt)),qB(e,i,s,o,a,"F",u,l)}function _$(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function WA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Vs(t.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Vs(t.unaryFilter.field);return ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Vs(t.unaryFilter.field);return ct.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Vs(t.unaryFilter.field);return ct.create(s,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(n):n.fieldFilter!==void 0?function(t){return ct.create(Vs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return xn.create(t.compositeFilter.filters.map(r=>WA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te()}}(t.compositeFilter.op))}(n):te()}function w$(n){return c$[n]}function I$(n){return u$[n]}function E$(n){return l$[n]}function Fs(n){return{fieldPath:n.canonicalString()}}function Vs(n){return tn.fromServerFormat(n.fieldPath)}function KA(n){return n instanceof ct?function(t){if(t.op==="=="){if(qS(t.value))return{unaryFilter:{field:Fs(t.field),op:"IS_NAN"}};if(HS(t.value))return{unaryFilter:{field:Fs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(qS(t.value))return{unaryFilter:{field:Fs(t.field),op:"IS_NOT_NAN"}};if(HS(t.value))return{unaryFilter:{field:Fs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fs(t.field),op:I$(t.op),value:t.value}}}(n):n instanceof xn?function(t){let r=t.getFilters().map(i=>KA(i));return r.length===1?r[0]:{compositeFilter:{op:E$(t.op),filters:r}}}(n):te()}function D$(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function QA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Zc=class n{constructor(e,t,r,i,o=ue.min(),s=ue.min(),a=Ot.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var E_=class{constructor(e){this.ct=e}};function b$(n){let e=v$({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?a_(e,e.limit,"L"):e}var $h=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ue(e.integerValue));else if("doubleValue"in e){let r=Ue(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Wc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Mr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ii(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?EA(e)?this.dt(t,Number.MAX_SAFE_INTEGER):IA(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):te()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Ue(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),K.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};$h.vt=new $h;var D_=class{constructor(){this.un=new b_}addToCollectionParentIndex(e,t){return this.un.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(lo.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(lo.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},b_=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Nt(qe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nt(qe.comparator)).toArray()}};var j7=new Uint8Array(0);var Yn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Yn.DEFAULT_COLLECTION_PERCENTILE=10,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yn.DEFAULT=new Yn(41943040,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yn.DISABLED=new Yn(-1,0,0);var Jc=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var C_=class{constructor(){this.changes=new Ei(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var T_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var S_=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Gc(r.mutation,i,fn.empty(),It.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ie()){let i=so();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=$c();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=so();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Nr(),s=zc(),a=function(){return zc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof tr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Gc(h.mutation,l,h.mutation.getFieldMask(),It.now())):s.set(l.key,fn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new T_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=zc(),i=new Qe((s,a)=>s-a),o=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||fn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||Ie()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=OA();h.forEach(y=>{if(!o.has(y)){let _=UA(t.get(y),r.get(y));_!==null&&p.set(y,_),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return K.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):V.resolve(so()),a=-1,u=o;return s.next(l=>V.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?V.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{u=u.insert(h,y)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,Ie())).next(h=>({batchId:a,changes:PA(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new K(t)).next(r=>{let i=$c();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=$c();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,u=>{let l=function(p,y){return new fo(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,y)=>{s=s.insert(p,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,An.newInvalidDocument(h)))});let a=$c();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Gc(h.mutation,l,fn.empty(),It.now()),ff(t,l)&&(a=a.insert(u,l))}),a})}};var A_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return V.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Xn(i.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:b$(i.bundledQuery),readTime:Xn(i.readTime)}}(t)),V.resolve()}};var x_=class{constructor(){this.overlays=new Qe(K.comparator),this.Ir=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let r=so();return V.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),V.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){let i=so(),o=t.length+1,s=new K(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Qe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=so(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=so(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return V.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new f_(t,r));let o=this.Ir.get(t);o===void 0&&(o=Ie(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var R_=class{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}};var Xc=class{constructor(){this.Tr=new Nt(at.Er),this.dr=new Nt(at.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new at(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new at(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new K(new qe([])),r=new at(t,e),i=new at(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new K(new qe([])),r=new at(t,e),i=new at(t,e+1),o=Ie();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new at(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},at=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return K.comparator(e.key,t.key)||Te(e.wr,t.wr)}static Ar(e,t){return Te(e.wr,t.wr)||K.comparator(e.key,t.key)}};var M_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Nt(at.Er)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new d_(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new at(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,t){return V.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new at(t,0),i=new at(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nt(Te);return t.forEach(i=>{let o=new at(i,0),s=new at(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),V.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;K.isDocumentKey(o)||(o=o.child(""));let s=new at(new K(o),0),a=new Nt(Te);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),V.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Re(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return V.forEach(t.mutations,i=>{let o=new at(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new at(t,0),i=this.br.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var N_=class{constructor(e){this.Mr=e,this.docs=function(){return new Qe(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():An.newInvalidDocument(t))}getEntries(e,t){let r=Nr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():An.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Nr(),s=t.path,a=new K(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||PB(NB(h),r)<=0||(i.has(h.key)||ff(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,t,r,i){te()}Or(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new P_(this)}getSize(e){return V.resolve(this.size)}},P_=class extends C_{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var O_=class{constructor(e){this.persistence=e,this.Nr=new Ei(t=>ww(t),Iw),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Xc,this.targetCount=0,this.kr=Jc.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),V.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Jc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.Kn(t),V.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),V.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this.Br.containsKey(t))}};var k_=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new _A(0),this.Kr=!1,this.Kr=!0,this.$r=new R_,this.referenceDelegate=e(this),this.Ur=new O_(this),this.indexManager=new D_,this.remoteDocumentCache=function(i){return new N_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new E_(t),this.Gr=new A_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new x_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new M_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){H("MemoryPersistence","Starting transaction:",e);let i=new F_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return V.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},F_=class extends Gv{constructor(e){super(),this.currentSequenceNumber=e}},V_=class n{constructor(e){this.persistence=e,this.Jr=new Xc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),V.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,r=>{let i=K.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,ue.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return V.or([()=>V.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var L_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Ie(),i=Ie();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var j_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var U_=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return vT()?8:kB(mt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new j_;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Bc()<=we.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",ks(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(Bc()<=we.DEBUG&&H("QueryEngine","Query:",ks(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Bc()<=we.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",ks(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(t))):V.resolve())}Yi(e,t){if(KS(t))return V.resolve(null);let r=Jn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=a_(t,null,"F"),r=Jn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ie(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,a_(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return KS(t)||i.isEqual(ue.min())?V.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?V.resolve(null):(Bc()<=we.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ks(t)),this.rs(e,s,t,MB(i,-1)).next(a=>a))})}ts(e,t){let r=new Nt(MA(e));return t.forEach((i,o)=>{ff(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Bc()<=we.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",ks(t)),this.Ji.getDocumentsMatchingQuery(e,t,lo.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var B_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Qe(Te),this._s=new Ei(o=>ww(o),Iw),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new S_(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function C$(n,e,t,r){return new B_(n,e,t,r)}function YA(n,e){return g(this,null,function*(){let t=oe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=Ie();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function T$(n,e){let t=oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,y=p.keys(),_=V.resolve();return y.forEach(x=>{_=_.next(()=>h.getEntry(u,x)).next(O=>{let N=l.docVersions.get(x);Re(N!==null),O.version.compareTo(N)<0&&(p.applyToRemoteDocument(O,l),O.isValidDocument()&&(O.setReadTime(l.commitVersion),h.addEntry(O)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ZA(n){let e=oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function S$(n,e){let t=oe(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let _=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(Ot.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(O,N,B){return O.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(y,_,h)&&a.push(t.Ur.updateTargetData(o,_))});let u=Nr(),l=Ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(A$(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(ue.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function A$(n,e,t){let r=Ie(),i=Ie();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Nr();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ue.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function x$(n,e){let t=oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function R$(n,e){let t=oe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Zc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function $_(n,e,t){return g(this,null,function*(){let r=oe(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!cu(s))throw s;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function oA(n,e,t){let r=oe(n),i=ue.min(),o=Ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=oe(u),y=p._s.get(h);return y!==void 0?V.resolve(p.os.get(y)):p.Ur.getTargetData(l,h)}(r,s,Jn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:ue.min(),t?o:Ie())).next(a=>(M$(r,GB(e),a),{documents:a,Ts:o})))}function M$(n,e,t){let r=n.us.get(e)||ue.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}var Hh=class{constructor(){this.activeTargetIds=JB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var H_=class{constructor(){this.so=new Hh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Hh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var q_=class{_o(e){}shutdown(){}};var qh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Th=null;function kv(){return Th===null?Th=function(){return 268435456+Math.round(2147483648*Math.random())}():Th++,"0x"+Th.toString(16)}var N$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var z_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Mt="WebChannelConnection",G_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=kv(),u=this.xo(t,r.toUriEncodedString());H("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(H("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Bs("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ta}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=N$[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=kv();return new Promise((s,a)=>{let u=new xv;u.setWithCredentials(!0),u.listenOnce(Rv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Uc.NO_ERROR:let h=u.getResponseJson();H(Mt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Uc.TIMEOUT:H(Mt,`RPC '${e}' ${o} timed out`),a(new $(P.DEADLINE_EXCEEDED,"Request time out"));break;case Uc.HTTP_ERROR:let p=u.getStatus();if(H(Mt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let _=y?.error;if(_&&_.status&&_.message){let x=function(N){let B=N.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(B)>=0?B:P.UNKNOWN}(_.status);a(new $(x,_.message))}else a(new $(P.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new $(P.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{H(Mt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);H(Mt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=kv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Pv(),a=Nv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");H(Mt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),y=!1,_=!1,x=new z_({Io:N=>{_?H(Mt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(y||(H(Mt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),H(Mt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),O=(N,B,Q)=>{N.listen(B,Y=>{try{Q(Y)}catch(me){setTimeout(()=>{throw me},0)}})};return O(p,Os.EventType.OPEN,()=>{_||(H(Mt,`RPC '${e}' stream ${i} transport opened.`),x.yo())}),O(p,Os.EventType.CLOSE,()=>{_||(_=!0,H(Mt,`RPC '${e}' stream ${i} transport closed`),x.So())}),O(p,Os.EventType.ERROR,N=>{_||(_=!0,Bs(Mt,`RPC '${e}' stream ${i} transport errored:`,N),x.So(new $(P.UNAVAILABLE,"The operation could not be completed")))}),O(p,Os.EventType.MESSAGE,N=>{var B;if(!_){let Q=N.data[0];Re(!!Q);let Y=Q,me=Y.error||((B=Y[0])===null||B===void 0?void 0:B.error);if(me){H(Mt,`RPC '${e}' stream ${i} received error:`,me);let ze=me.status,se=function(w){let E=st[w];if(E!==void 0)return $A(E)}(ze),b=me.message;se===void 0&&(se=P.INTERNAL,b="Unknown error status: "+ze+" with message "+me.message),_=!0,x.So(new $(se,b)),p.close()}else H(Mt,`RPC '${e}' stream ${i} received:`,Q),x.bo(Q)}}),O(a,Mv.STAT_EVENT,N=>{N.stat===bh.PROXY?H(Mt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===bh.NOPROXY&&H(Mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}};function Fv(){return typeof document<"u"?document:null}function pf(n){return new y_(n,!0)}var zh=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Gh=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new zh(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return g(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return g(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return g(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(Rr(t.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new $(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>g(this,null,function*(){this.state=0,this.start()}))}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},W_=class extends Gh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=f$(this.serializer,e),r=function(o){if(!("targetChange"in o))return ue.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ue.min():s.readTime?Xn(s.readTime):ue.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=I_(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=o_(u)?{documents:g$(o,u)}:{query:y$(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=HA(o,s.resumeToken);let l=v_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ue.min())>0){a.readTime=Bh(o,s.snapshotVersion.toTimestamp());let l=v_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=_$(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=I_(this.serializer),t.removeTarget=e,this.a_(t)}},K_=class extends Gh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Re(!!e.streamToken),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=m$(e.writeResults,e.commitTime),r=Xn(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=I_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>p$(this.serializer,r))};this.a_(t)}};var Q_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new $(P.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,__(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(P.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,__(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(P.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Y_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Rr(t),this.D_=!1):H("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Z_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>g(this,null,function*(){vo(this)&&(H("RemoteStore","Restarting streams for network reachability change."),yield function(u){return g(this,null,function*(){let l=oe(u);l.L_.add(4),yield uu(l),l.q_.set("Unknown"),l.L_.delete(4),yield mf(l)})}(this))}))}),this.q_=new Y_(r,i)}};function mf(n){return g(this,null,function*(){if(vo(n))for(let e of n.B_)yield e(!0)})}function uu(n){return g(this,null,function*(){for(let e of n.B_)yield e(!1)})}function JA(n,e){let t=oe(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Sw(t)?Tw(t):na(t).r_()&&Cw(t,e))}function bw(n,e){let t=oe(n),r=na(t);t.N_.delete(e),r.r_()&&XA(t,e),t.N_.size===0&&(r.r_()?r.o_():vo(t)&&t.q_.set("Unknown"))}function Cw(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}na(n).A_(e)}function XA(n,e){n.Q_.xe(e),na(n).R_(e)}function Tw(n){n.Q_=new g_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),na(n).start(),n.q_.v_()}function Sw(n){return vo(n)&&!na(n).n_()&&n.N_.size>0}function vo(n){return oe(n).L_.size===0}function ex(n){n.Q_=void 0}function P$(n){return g(this,null,function*(){n.q_.set("Online")})}function O$(n){return g(this,null,function*(){n.N_.forEach((e,t)=>{Cw(n,e)})})}function k$(n,e){return g(this,null,function*(){ex(n),Sw(n)?(n.q_.M_(e),Tw(n)):n.q_.set("Unknown")})}function F$(n,e,t){return g(this,null,function*(){if(n.q_.set("Online"),e instanceof jh&&e.state===2&&e.cause)try{yield function(i,o){return g(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Wh(n,r)}else if(e instanceof js?n.Q_.Ke(e):e instanceof Lh?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ue.min()))try{let r=yield ZA(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(Ot.EMPTY_BYTE_STRING,h.snapshotVersion)),XA(o,u);let p=new Zc(h.target,u,l,h.sequenceNumber);Cw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){H("RemoteStore","Failed to raise snapshot:",r),yield Wh(n,r)}})}function Wh(n,e,t){return g(this,null,function*(){if(!cu(e))throw e;n.L_.add(1),yield uu(n),n.q_.set("Offline"),t||(t=()=>ZA(n.localStore)),n.asyncQueue.enqueueRetryable(()=>g(this,null,function*(){H("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield mf(n)}))})}function tx(n,e){return e().catch(t=>Wh(n,t,e))}function gf(n){return g(this,null,function*(){let e=oe(n),t=bi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;V$(e);)try{let i=yield x$(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,L$(e,i)}catch(i){yield Wh(e,i)}nx(e)&&rx(e)})}function V$(n){return vo(n)&&n.O_.length<10}function L$(n,e){n.O_.push(e);let t=bi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function nx(n){return vo(n)&&!bi(n).n_()&&n.O_.length>0}function rx(n){bi(n).start()}function j$(n){return g(this,null,function*(){bi(n).p_()})}function U$(n){return g(this,null,function*(){let e=bi(n);for(let t of n.O_)e.m_(t.mutations)})}function B$(n,e,t){return g(this,null,function*(){let r=n.O_.shift(),i=h_.from(r,e,t);yield tx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield gf(n)})}function $$(n,e){return g(this,null,function*(){e&&bi(n).V_&&(yield function(r,i){return g(this,null,function*(){if(function(s){return o$(s)&&s!==P.ABORTED}(i.code)){let o=r.O_.shift();bi(r).s_(),yield tx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield gf(r)}})}(n,e)),nx(n)&&rx(n)})}function sA(n,e){return g(this,null,function*(){let t=oe(n);t.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");let r=vo(t);t.L_.add(3),yield uu(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield mf(t)})}function H$(n,e){return g(this,null,function*(){let t=oe(n);e?(t.L_.delete(2),yield mf(t)):e||(t.L_.add(2),yield uu(t),t.q_.set("Unknown"))})}function na(n){return n.K_||(n.K_=function(t,r,i){let o=oe(t);return o.w_(),new W_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:P$.bind(null,n),Ro:O$.bind(null,n),mo:k$.bind(null,n),d_:F$.bind(null,n)}),n.B_.push(e=>g(this,null,function*(){e?(n.K_.s_(),Sw(n)?Tw(n):n.q_.set("Unknown")):(yield n.K_.stop(),ex(n))}))),n.K_}function bi(n){return n.U_||(n.U_=function(t,r,i){let o=oe(t);return o.w_(),new K_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:j$.bind(null,n),mo:$$.bind(null,n),f_:U$.bind(null,n),g_:B$.bind(null,n)}),n.B_.push(e=>g(this,null,function*(){e?(n.U_.s_(),yield gf(n)):(yield n.U_.stop(),n.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var J_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Aw(n,e){if(Rr("AsyncQueue",`${e}: ${n}`),cu(n))return new $(P.UNAVAILABLE,`${e}: ${n}`);throw n}var Kh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||K.comparator(t.key,r.key):(t,r)=>K.comparator(t.key,r.key),this.keyedMap=$c(),this.sortedSet=new Qe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Qh=class{constructor(){this.W_=new Qe(K.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Zs=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Kh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var X_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},ew=class{constructor(){this.queries=aA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=oe(t),o=i.queries;i.queries=aA(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new $(P.ABORTED,"Firestore shutting down"))}};function aA(){return new Ei(n=>RA(n),hf)}function xw(n,e){return g(this,null,function*(){let t=oe(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new X_,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Aw(s,`Initialization of query '${ks(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&Mw(t)})}function Rw(n,e){return g(this,null,function*(){let t=oe(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function q$(n,e){let t=oe(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&Mw(t)}function z$(n,e,t){let r=oe(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function Mw(n){n.Y_.forEach(e=>{e.next()})}var tw,cA;(cA=tw||(tw={})).ea="default",cA.Cache="cache";var eu=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Zs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Zs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==tw.Cache}};var Yh=class{constructor(e){this.key=e}},Zh=class{constructor(e){this.key=e}},nw=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ie(),this.mutatedKeys=Ie(),this.Aa=MA(e),this.Ra=new Kh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Qh,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),_=ff(this.query,p)?p:null,x=!!y&&this.mutatedKeys.has(y.key),O=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),N=!1;y&&_?y.data.isEqual(_.data)?x!==O&&(r.track({type:3,doc:_}),N=!0):this.ga(y,_)||(r.track({type:2,doc:_}),N=!0,(u&&this.Aa(_,u)>0||l&&this.Aa(_,l)<0)&&(a=!0)):!y&&_?(r.track({type:0,doc:_}),N=!0):y&&!_&&(r.track({type:1,doc:y}),N=!0,(u||l)&&(a=!0)),N&&(_?(s=s.add(_),o=O?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(_,x){let O=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return O(_)-O(x)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new Zs(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Qh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=Ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Zh(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Yh(r))}),t}ba(e){this.Ta=e.Ts,this.da=Ie();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Zs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},rw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},iw=class{constructor(e){this.key=e,this.va=!1}},ow=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Ei(a=>RA(a),hf),this.Ma=new Map,this.xa=new Set,this.Oa=new Qe(K.comparator),this.Na=new Map,this.La=new Xc,this.Ba={},this.ka=new Map,this.qa=Jc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function G$(n,e,t=!0){return g(this,null,function*(){let r=ux(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield ix(r,e,t,!0),i})}function W$(n,e){return g(this,null,function*(){let t=ux(n);yield ix(t,e,!0,!1)})}function ix(n,e,t,r){return g(this,null,function*(){let i=yield R$(n.localStore,Jn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield K$(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&JA(n.remoteStore,i),a})}function K$(n,e,t,r,i){return g(this,null,function*(){n.Ka=(p,y,_)=>function(O,N,B,Q){return g(this,null,function*(){let Y=N.view.ma(B);Y.ns&&(Y=yield oA(O.localStore,N.query,!1).then(({documents:b})=>N.view.ma(b,Y)));let me=Q&&Q.targetChanges.get(N.targetId),ze=Q&&Q.targetMismatches.get(N.targetId)!=null,se=N.view.applyChanges(Y,O.isPrimaryClient,me,ze);return lA(O,N.targetId,se.wa),se.snapshot})}(n,p,y,_);let o=yield oA(n.localStore,e,!0),s=new nw(e,o.Ts),a=s.ma(o.documents),u=Yc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);lA(n,t,l.wa);let h=new rw(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function Q$(n,e,t){return g(this,null,function*(){let r=oe(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!hf(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield $_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&bw(r.remoteStore,i.targetId),sw(r,i.targetId)}).catch(au))):(sw(r,i.targetId),yield $_(r.localStore,i.targetId,!0))})}function Y$(n,e){return g(this,null,function*(){let t=oe(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),bw(t.remoteStore,r.targetId))})}function Z$(n,e,t){return g(this,null,function*(){let r=iH(n);try{let i=yield function(s,a){let u=oe(s),l=It.now(),h=a.reduce((_,x)=>_.add(x.key),Ie()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let x=Nr(),O=Ie();return u.cs.getEntries(_,h).next(N=>{x=N,x.forEach((B,Q)=>{Q.isValidDocument()||(O=O.add(B))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,x)).next(N=>{p=N;let B=[];for(let Q of a){let Y=i$(Q,p.get(Q.key).overlayedDocument);Y!=null&&B.push(new tr(Q.key,Y,DA(Y.value.mapValue),xr.exists(!0)))}return u.mutationQueue.addMutationBatch(_,l,B,a)}).next(N=>{y=N;let B=N.applyToLocalDocumentSet(p,O);return u.documentOverlayCache.saveOverlays(_,N.batchId,B)})}).then(()=>({batchId:y.batchId,changes:PA(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Qe(Te)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield lu(r,i.changes),yield gf(r.remoteStore)}catch(i){let o=Aw(i,"Failed to persist write");t.reject(o)}})}function ox(n,e){return g(this,null,function*(){let t=oe(n);try{let r=yield S$(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Re(s.va):i.removedDocuments.size>0&&(Re(s.va),s.va=!1))}),yield lu(t,r,e)}catch(r){yield au(r)}})}function uA(n,e,t){let r=oe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=oe(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let y of p.j_)y.Z_(a)&&(l=!0)}),l&&Mw(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function J$(n,e,t){return g(this,null,function*(){let r=oe(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Qe(K.comparator);s=s.insert(o,An.newNoDocument(o,ue.min()));let a=Ie().add(o),u=new Vh(ue.min(),new Map,new Qe(Te),s,a);yield ox(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),Nw(r)}else yield $_(r.localStore,e,!1).then(()=>sw(r,e,t)).catch(au)})}function X$(n,e){return g(this,null,function*(){let t=oe(n),r=e.batch.batchId;try{let i=yield T$(t.localStore,e);ax(t,r,null),sx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield lu(t,i)}catch(i){yield au(i)}})}function eH(n,e,t){return g(this,null,function*(){let r=oe(n);try{let i=yield function(s,a){let u=oe(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Re(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);ax(r,e,t),sx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield lu(r,i)}catch(i){yield au(i)}})}function sx(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function ax(n,e,t){let r=oe(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function sw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||cx(n,r)})}function cx(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(bw(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Nw(n))}function lA(n,e,t){for(let r of t)r instanceof Yh?(n.La.addReference(r.key,e),tH(n,r)):r instanceof Zh?(H("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||cx(n,r.key)):te()}function tH(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(H("SyncEngine","New document in limbo: "+t),n.xa.add(r),Nw(n))}function Nw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new K(qe.fromString(e)),r=n.qa.next();n.Na.set(r,new iw(t)),n.Oa=n.Oa.insert(t,r),JA(n.remoteStore,new Zc(Jn(df(t.path)),r,"TargetPurposeLimboResolution",_A.oe))}}function lu(n,e,t){return g(this,null,function*(){let r=oe(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=L_.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return g(this,null,function*(){let h=oe(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>V.forEach(l,y=>V.forEach(y.$i,_=>h.persistence.referenceDelegate.addReference(p,y.targetId,_)).next(()=>V.forEach(y.Ui,_=>h.persistence.referenceDelegate.removeReference(p,y.targetId,_)))))}catch(p){if(!cu(p))throw p;H("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let _=h.os.get(y),x=_.snapshotVersion,O=_.withLastLimboFreeSnapshotVersion(x);h.os=h.os.insert(y,O)}}})}(r.localStore,o))})}function nH(n,e){return g(this,null,function*(){let t=oe(n);if(!t.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());let r=yield YA(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new $(P.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield lu(t,r.hs)}})}function rH(n,e){let t=oe(n),r=t.Na.get(e);if(r&&r.va)return Ie().add(r.key);{let i=Ie(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function ux(n){let e=oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ox.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J$.bind(null,e),e.Ca.d_=q$.bind(null,e.eventManager),e.Ca.$a=z$.bind(null,e.eventManager),e}function iH(n){let e=oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=X$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eH.bind(null,e),e}var dA=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return g(this,null,function*(){this.serializer=pf(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return C$(this.persistence,new U_,t.initialUser,this.serializer)}Ga(t){return new k_(V_.Zr,this.serializer)}Wa(t){return new H_}terminate(){return g(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var oH=(()=>{class n{initialize(t,r){return g(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>uA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=nH.bind(null,this.syncEngine),yield H$(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new ew}()}createDatastore(t){let r=pf(t.databaseInfo.databaseId),i=function(s){return new G_(s)}(t.databaseInfo);return function(s,a,u,l){return new Q_(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new Z_(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>uA(this.syncEngine,r,0),function(){return qh.D()?new qh:new q_}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let y=new ow(o,s,a,u,l,h);return p&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return g(this,null,function*(){var t,r;yield function(o){return g(this,null,function*(){let s=oe(o);H("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield uu(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var tu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var aw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=Rh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>g(this,null,function*(){H("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(H("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>g(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Aw(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Vv(n,e){return g(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>g(this,null,function*(){r.isEqual(i)||(yield YA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function hA(n,e){return g(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield sH(n);H("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>sA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>sA(e.remoteStore,i)),n._onlineComponents=e})}function sH(n){return g(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Vv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Bs("Error using user provided cache. Falling back to memory cache: "+t),yield Vv(n,new dA)}}else H("FirestoreClient","Using default OfflineComponentProvider"),yield Vv(n,new dA);return n._offlineComponents})}function lx(n){return g(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),yield hA(n,n._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),yield hA(n,new oH))),n._onlineComponents})}function aH(n){return lx(n).then(e=>e.syncEngine)}function Jh(n){return g(this,null,function*(){let e=yield lx(n),t=e.eventManager;return t.onListen=G$.bind(null,e.syncEngine),t.onUnlisten=Q$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=W$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Y$.bind(null,e.syncEngine),t})}function cH(n,e,t={}){let r=new Sn;return n.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(o,s,a,u,l){let h=new tu({next:y=>{h.Za(),s.enqueueAndForget(()=>Rw(o,p));let _=y.docs.has(a);!_&&y.fromCache?l.reject(new $(P.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&y.fromCache&&u&&u.source==="server"?l.reject(new $(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new eu(df(a.path),h,{includeMetadataChanges:!0,_a:!0});return xw(o,p)}(yield Jh(n),n.asyncQueue,e,t,r)})),r.promise}function uH(n,e,t={}){let r=new Sn;return n.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(o,s,a,u,l){let h=new tu({next:y=>{h.Za(),s.enqueueAndForget(()=>Rw(o,p)),y.fromCache&&u.source==="server"?l.reject(new $(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new eu(a,h,{includeMetadataChanges:!0,_a:!0});return xw(o,p)}(yield Jh(n),n.asyncQueue,e,t,r)})),r.promise}function dx(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var fA=new Map;function hx(n,e,t){if(!t)throw new $(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lH(n,e,t,r){if(e===!0&&r===!0)throw new $(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pA(n){if(!K.isDocumentKey(n))throw new $(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mA(n){if(K.isDocumentKey(n))throw new $(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":te()}function nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=yf(n);throw new $(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Xh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new $(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new $(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new $(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Js=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Lv;switch(r.type){case"firstParty":return new $v(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return g(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=fA.get(t);r&&(H("ComponentProvider","Removing Datastore"),fA.delete(t),r.terminate())}(this),Promise.resolve()}};function fx(n,e,t,r={}){var i;let o=(n=nn(n,Js))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=yt.MOCK_USER;else{a=hT(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new $(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new yt(l)}n._authCredentials=new jv(new xh(a,u))}}var go=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Pt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},wi=class n extends go{constructor(e,t,r){super(e,t,df(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new K(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function px(n,e,...t){if(n=Xe(n),hx("collection","path",e),n instanceof Js){let r=qe.fromString(e,...t);return mA(r),new wi(n,null,r)}{if(!(n instanceof Pt||n instanceof wi))throw new $(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(qe.fromString(e,...t));return mA(r),new wi(n.firestore,null,r)}}function Pw(n,e,...t){if(n=Xe(n),arguments.length===1&&(e=Rh.newId()),hx("doc","path",e),n instanceof Js){let r=qe.fromString(e,...t);return pA(r),new Pt(n,null,new K(r))}{if(!(n instanceof Pt||n instanceof wi))throw new $(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(qe.fromString(e,...t));return pA(r),new Pt(n.firestore,n instanceof wi?n.converter:null,new K(r))}}var ef=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new zh(this,"async_queue_retry"),this.Vu=()=>{let r=Fv();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Fv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Fv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Sn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return g(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!cu(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Rr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=J_.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&te()}verifyOperationInProgress(){}wu(){return g(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function gA(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var nr=class extends Js{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ef,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return g(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ef(e),this._firestoreClient=void 0,yield e}})}};function mx(n,e){let t=typeof n=="object"?n:As(),r=typeof n=="string"?n:e||"(default)",i=xc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=dT("firestore");o&&fx(i,...o)}return i}function vf(n){if(n._terminated)throw new $(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||dH(n),n._firestoreClient}function dH(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new Wv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,dx(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new aw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var nu=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ot.fromBase64String(e))}catch(t){throw new $(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Xs=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new $(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ea=class{constructor(e){this._methodName=e}};var ru=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}};var iu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var hH=/^__.*__$/,cw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new tr(e,this.data,this.fieldMask,t,this.fieldTransforms):new mo(e,this.data,t,this.fieldTransforms)}},tf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new tr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function gx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}var nf=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return of(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(gx(this.Cu)&&hH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},uw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||pf(e)}Qu(e,t,r,i=!1){return new nf({Cu:e,methodName:t,qu:r,path:tn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function _f(n){let e=n._freezeSettings(),t=pf(n._databaseId);return new uw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yx(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);Ow("Data must be an object, but it was:",s,r);let a=vx(r,s),u,l;if(o.merge)u=new fn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let y=dw(e,p,t);if(!s.contains(y))throw new $(P.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);wx(h,y)||h.push(y)}u=new fn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new cw(new en(a),u,l)}var rf=class n extends ea{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function fH(n,e,t){return new nf({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var lw=class n extends ea{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=fH(this,e,!0),r=this.Ku.map(o=>ra(o,t)),i=new Di(r);return new c_(e.path,i)}isEqual(e){return e instanceof n&&li(this.Ku,e.Ku)}};function pH(n,e,t,r){let i=n.Qu(1,e,t);Ow("Data must be an object, but it was:",i,r);let o=[],s=en.empty();yo(r,(u,l)=>{let h=kw(e,u,t);l=Xe(l);let p=i.Nu(h);if(l instanceof rf)o.push(h);else{let y=ra(l,p);y!=null&&(o.push(h),s.set(h,y))}});let a=new fn(o);return new tf(s,a,i.fieldTransforms)}function mH(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[dw(e,r,t)],u=[i];if(o.length%2!=0)throw new $(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)a.push(dw(e,o[y])),u.push(o[y+1]);let l=[],h=en.empty();for(let y=a.length-1;y>=0;--y)if(!wx(l,a[y])){let _=a[y],x=u[y];x=Xe(x);let O=s.Nu(_);if(x instanceof rf)l.push(_);else{let N=ra(x,O);N!=null&&(l.push(_),h.set(_,N))}}let p=new fn(l);return new tf(h,p,s.fieldTransforms)}function gH(n,e,t,r=!1){return ra(t,n.Qu(r?4:3,e))}function ra(n,e){if(_x(n=Xe(n)))return Ow("Unsupported field value:",e,n),vx(n,e);if(n instanceof ea)return function(r,i){if(!gx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=ra(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=It.fromDate(r);return{timestampValue:Bh(i.serializer,o)}}if(r instanceof It){let o=new It(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bh(i.serializer,o)}}if(r instanceof ru)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof nu)return{bytesValue:HA(i.serializer,r._byteString)};if(r instanceof Pt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Dw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof iu)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Ew(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${yf(r)}`)}(n,e)}function vx(n,e){let t={};return wA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yo(n,(r,i)=>{let o=ra(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function _x(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof It||n instanceof ru||n instanceof nu||n instanceof Pt||n instanceof ea||n instanceof iu)}function Ow(n,e,t){if(!_x(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=yf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function dw(n,e,t){if((e=Xe(e))instanceof Xs)return e._internalPath;if(typeof e=="string")return kw(n,e);throw of("Field path arguments must be of type string or ",n,!1,void 0,t)}var yH=new RegExp("[~\\*/\\[\\]]");function kw(n,e,t){if(e.search(yH)>=0)throw of(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xs(...e.split("."))._internalPath}catch{throw of(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function of(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new $(P.INVALID_ARGUMENT,a+n+u)}function wx(n,e){return n.some(t=>t.isEqual(e))}var sf=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new hw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Fw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},hw=class extends sf{data(){return super.data()}};function Fw(n,e){return typeof e=="string"?kw(n,e):e instanceof Xs?e._internalPath:e._delegate._internalPath}function Ix(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new $(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ou=class{},fw=class extends ou{};function Ex(n,e,...t){let r=[];e instanceof ou&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof pw).length,a=o.filter(u=>u instanceof af).length;if(s>1||s>0&&a>0)throw new $(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var af=class n extends fw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return bx(e._query,t),new go(e.firestore,e.converter,s_(e._query,t))}_parse(e){let t=_f(e.firestore);return function(o,s,a,u,l,h,p){let y;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){vA(p,h);let _=[];for(let x of p)_.push(yA(u,o,x));y={arrayValue:{values:_}}}else y=yA(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||vA(p,h),y=gH(a,s,p,h==="in"||h==="not-in");return ct.create(l,h,y)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Dx(n,e,t){let r=e,i=Fw("where",n);return af._create(i,r,t)}var pw=class n extends ou{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:xn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)bx(s,u),s=s_(s,u)}(e._query,t),new go(e.firestore,e.converter,s_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function yA(n,e,t){if(typeof(t=Xe(t))=="string"){if(t==="")throw new $(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xA(e)&&t.indexOf("/")!==-1)throw new $(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(qe.fromString(t));if(!K.isDocumentKey(r))throw new $(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $S(n,new K(r))}if(t instanceof Pt)return $S(n,t._key);throw new $(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yf(t)}.`)}function vA(n,e){if(!Array.isArray(n)||n.length===0)throw new $(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bx(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new $(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var mw=class{convertValue(e,t="none"){switch(ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return yo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ue(s.doubleValue));return new iu(o)}convertGeoPoint(e){return new ru(Ue(e.latitude),Ue(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=vw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Kc(e));default:return null}}convertTimestamp(e){let t=Mr(e);return new It(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=qe.fromString(e);Re(QA(r));let i=new Oh(r.get(1),r.get(3)),o=new K(r.popFirst(5));return i.isEqual(t)||Rr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Cx(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var co=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},cf=class extends sf{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Us(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Fw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Us=class extends cf{data(e={}){return super.data(e)}},uf=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new co(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Us(this._firestore,this._userDataWriter,r.key,r,new co(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Us(i._firestore,i._userDataWriter,a.doc.key,a.doc,new co(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Us(i._firestore,i._userDataWriter,a.doc.key,a.doc,new co(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:vH(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function vH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}function Tx(n){n=nn(n,Pt);let e=nn(n.firestore,nr);return cH(vf(e),n._key).then(t=>Mx(e,n,t))}var su=class extends mw{constructor(e){super(),this.firestore=e}convertBytes(e){return new nu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,t)}};function Sx(n){n=nn(n,go);let e=nn(n.firestore,nr),t=vf(e),r=new su(e);return Ix(n._query),uH(t,n._query).then(i=>new uf(e,r,n,i))}function Ax(n,e,t){n=nn(n,Pt);let r=nn(n.firestore,nr),i=Cx(n.converter,e,t);return Lw(r,[yx(_f(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,xr.none())])}function xx(n,e,t,...r){n=nn(n,Pt);let i=nn(n.firestore,nr),o=_f(i),s;return s=typeof(e=Xe(e))=="string"||e instanceof Xs?mH(o,"updateDoc",n._key,e,t,r):pH(o,"updateDoc",n._key,e),Lw(i,[s.toMutation(n._key,xr.exists(!0))])}function Rx(n,e){let t=nn(n.firestore,nr),r=Pw(n),i=Cx(n.converter,e);return Lw(t,[yx(_f(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,xr.exists(!1))]).then(()=>r)}function Vw(n,...e){var t,r,i;n=Xe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||gA(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(gA(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Pt)l=nn(n.firestore,nr),h=df(n._key.path),u={next:p=>{e[s]&&e[s](Mx(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=nn(n,go);l=nn(p.firestore,nr),h=p._query;let y=new su(l);u={next:_=>{e[s]&&e[s](new uf(l,y,p,_))},error:e[s+1],complete:e[s+2]},Ix(n._query)}return function(y,_,x,O){let N=new tu(O),B=new eu(_,N,x);return y.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return xw(yield Jh(y),B)})),()=>{N.Za(),y.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return Rw(yield Jh(y),B)}))}}(vf(l),h,a,u)}function Lw(n,e){return function(r,i){let o=new Sn;return r.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return Z$(yield aH(r),i,o)})),o.promise}(vf(n),e)}function Mx(n,e,t){let r=t.docs.get(e._key),i=new su(n);return new cf(n,i,e._key,r,new co(t.hasPendingWrites,t.fromCache),e.converter)}function Nx(...n){return new lw("arrayUnion",n)}(function(e,t=!0){(function(i){ta=i})(pi),fi(new hn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new nr(new Uv(r.getProvider("auth-internal")),new qv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new $(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oh(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),dt(LS,"4.7.3",e),dt(LS,"4.7.3","esm2017")})();var wf=function(){return wf=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},wf.apply(this,arguments)};var IH={includeMetadataChanges:!1};function Px(n,e){return e===void 0&&(e=IH),new ye(function(t){var r=Vw(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Ox(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:wf(wf({},r),(t={},t[e.idField]=n.id,t))}function kx(n){return Px(n,{includeMetadataChanges:!0}).pipe(J(function(e){return e.docs}))}function Fx(n,e){return e===void 0&&(e={}),kx(n).pipe(J(function(t){return t.map(function(r){return Ox(r,e)})}))}var Bt=class{constructor(e){return e}},Vx="firestore",jw=class{constructor(){return Rc(Vx)}};var Uw=new G("angularfire2.firestore-instances");function EH(n,e){let t=th(Vx,n,e);return t&&new Bt(t)}function DH(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Bt(r)}}var bH={provide:jw,deps:[[new Tt,Uw]]},CH={provide:Bt,useFactory:EH,deps:[[new Tt,Uw],br]};function Lx(n,...e){return dt("angularfire",Xi.full,"fst"),jn([CH,bH,{provide:Uw,useFactory:DH(n),multi:!0,deps:[Ae,_t,Ms,eo,[new Tt,jc],[new Tt,Rs],...e]}])}var Bw=gt(Fx,!0);var jx=gt(Rx,!0);var Ux=gt(Nx,!0);var _o=gt(px,!0);var et=gt(Pw,!0);var $t=gt(Tx,!0);var If=gt(Sx,!0);var Bx=gt(mx,!0);var $x=gt(Ex,!0);var Pr=gt(Ax,!0);var $w=gt(xx,!0);var Hx=gt(Dx,!0);var ia=(()=>{class n{constructor(){this.firestore=F(Bt)}sendNotification(t,r,i){return g(this,null,function*(){let o=et(this.firestore,"users",t),s={type:r,message:i,read:!1,createdAt:new Date().toISOString()};yield $w(o,{notifications:Ux(s)})})}markAsRead(t,r){return g(this,null,function*(){let i=et(this.firestore,"users",t),o=yield $t(i);if(o.exists()){let s=o.data().notifications;s&&s[r]&&(s[r].read=!0,yield $w(i,{notifications:s}))}})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var rr=(()=>{class n{constructor(t){this.notificationService=t,this.firestore=F(Bt)}loadTour(t){return g(this,null,function*(){let r=yield $t(et(this.firestore,"tours",t));if(r.exists()){let i=r.data();return he(L({},i),{id:r.id})}else console.error("Tour not found")})}getTours(){let t=_o(this.firestore,"tours");return Bw(t,{idField:"id"}).pipe(Vt(i=>{if(i.length===0)return Z([]);let o=i.map(s=>$t(et(this.firestore,"users",s.createdBy)).then(a=>he(L({},s),{createdByName:a.exists()?a.data()?.firstName:"Unknown"})));return Oi(o)}))}addTour(t){return g(this,null,function*(){return jx(_o(this.firestore,"tours"),t)})}applyForTour(t,r,i){return g(this,null,function*(){if(!t||!i)throw new Error("Invalid tourId or userId");let o=et(this.firestore,`tours/${t}/applications/${i}`);if(!(yield $t(o)).exists())yield Pr(o,{status:"pending",appliedAt:new Date().toISOString()}),yield this.notificationService.sendNotification(r,"application","User applied for a tour!");else throw new Error("You have already applied for this tour.")})}updateApplicationStatus(t,r,i){return g(this,null,function*(){if(!t||!r)throw new Error("Invalid tourId or userId");let o=et(this.firestore,`tours/${t}/applications/${r}`);if((yield $t(o)).exists())yield Pr(o,{status:i,updatedAt:new Date().toISOString()}),yield this.notificationService.sendNotification(r,"statusUpdate",`Your application for the tour has been ${i}`);else throw new Error("User has not applied for this tour.")})}hasUserApplied(t,r){return g(this,null,function*(){let i=et(this.firestore,`tours/${t}/applications/${r}`);return(yield $t(i)).exists()})}loadAllApplications(t){return g(this,null,function*(){let r=_o(this.firestore,`tours/${t}/applications`);return(yield If(r)).docs.map(s=>L({id:s.id},s.data()))})}rejectApplication(t,r){let i=et(this.firestore,`tours/${t}/applications/${r}`);return Pr(i,{status:"rejected"},{merge:!0})}acceptApplication(t,r){let i=et(this.firestore,`tours/${t}/applications/${r}`);return Pr(i,{status:"accepted"},{merge:!0})}cancelApplication(t,r){let i=et(this.firestore,`tours/${t}/applications/${r}`);return Pr(i,{status:"canceled"},{merge:!0})}getToursUserAppliedFor(t){return g(this,null,function*(){let r=_o(this.firestore,"tours"),i=yield bp(Bw(r,{idField:"id"})),o=[];for(let s of i){let a=et(this.firestore,`tours/${s.id}/applications/${t}`),u=yield $t(a);u.exists()&&o.push(he(L({id:s.id},s),{application:u.data()}))}return o})}static{this.\u0275fac=function(r){return new(r||n)(X(ia))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var TH=n=>["/tour-details",n];function SH(n,e){if(n&1&&(S(0,"li",3)(1,"h2",4),M(2),D(),S(3,"p")(4,"strong"),M(5,"Date:"),D(),M(6),D(),S(7,"p")(8,"strong"),M(9,"Difficulty:"),D(),M(10),D(),S(11,"p")(12,"strong"),M(13,"Participants:"),D(),M(14),D(),S(15,"p")(16,"strong"),M(17,"Organized By:"),D(),M(18),D(),S(19,"button",5),M(20," View Details "),D()()),n&2){let t=e.$implicit;k(2),Pe(t.name),k(4),xt(" ",t.date,""),k(4),xt(" ",t.difficulty,""),k(4),xt(" ",t.participants,""),k(4),xt(" ",t.createdByName,""),k(),W("routerLink",us(6,TH,t.id))}}var qx=(()=>{class n{constructor(t){this.tourService=t,this.tours$=this.tourService.getTours()}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||n)(U(rr))}}static{this.\u0275cmp=Le({type:n,selectors:[["app-home"]],standalone:!0,features:[je],decls:6,vars:3,consts:[[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],["class","mb-4 p-4 border rounded shadow",4,"ngFor","ngForOf"],[1,"mb-4","p-4","border","rounded","shadow"],[1,"text-xl","font-semibold"],[1,"mt-2","py-2","px-4","bg-blue-600","text-white","rounded","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"routerLink"]],template:function(r,i){r&1&&(S(0,"div",0)(1,"h1",1),M(2,"Hiking Tours"),D(),S(3,"ul"),ce(4,SH,21,8,"li",2),ls(5,"async"),D()()),r&2&&(k(4),W("ngForOf",ds(5,1,i.tours$)))},dependencies:[bn,Hn,Td,Gn]})}}return n})();var eR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(U($n),U(En))}}static{this.\u0275dir=Be({type:n})}}return n})(),xf=(()=>{class n extends eR{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mr(n)))(i||n)}})()}static{this.\u0275dir=Be({type:n,features:[un]})}}return n})(),vu=new G("");var AH={provide:vu,useExisting:Ln(()=>pn),multi:!0};function xH(){let n=vr()?vr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var RH=new G(""),pn=(()=>{class n extends eR{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!xH())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(U($n),U(En),U(RH,8))}}static{this.\u0275dir=Be({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&_e("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[ii([AH]),un]})}}return n})();function MH(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var zw=new G(""),tR=new G("");function NH(n){return MH(n.value)?{required:!0}:null}function zx(n){return null}function nR(n){return n!=null}function rR(n){return oi(n)?Ve(n):n}function iR(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function oR(n,e){return e.map(t=>t(n))}function PH(n){return!n.validate}function sR(n){return n.map(e=>PH(e)?e:t=>e.validate(t))}function OH(n){if(!n)return null;let e=n.filter(nR);return e.length==0?null:function(t){return iR(oR(t,e))}}function Gw(n){return n!=null?OH(sR(n)):null}function kH(n){if(!n)return null;let e=n.filter(nR);return e.length==0?null:function(t){let r=oR(t,e).map(rR);return Cp(r).pipe(J(iR))}}function Ww(n){return n!=null?kH(sR(n)):null}function Gx(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function FH(n){return n._rawValidators}function VH(n){return n._rawAsyncValidators}function qw(n){return n?Array.isArray(n)?n:[n]:[]}function Df(n,e){return Array.isArray(n)?n.includes(e):n===e}function Wx(n,e){let t=qw(e);return qw(n).forEach(i=>{Df(t,i)||t.push(i)}),t}function Kx(n,e){return qw(e).filter(t=>!Df(n,t))}var bf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Gw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ww(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},aa=class extends bf{get formDirective(){return null}get path(){return null}},yu=class extends bf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Cf=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},LH={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},BQ=he(L({},LH),{"[class.ng-submitted]":"isSubmitted"}),ir=(()=>{class n extends Cf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(U(yu,2))}}static{this.\u0275dir=Be({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&vd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[un]})}}return n})(),ua=(()=>{class n extends Cf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(U(aa,10))}}static{this.\u0275dir=Be({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&vd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[un]})}}return n})();var hu="VALID",Ef="INVALID",oa="PENDING",fu="DISABLED",ca=class{},Tf=class extends ca{constructor(e,t){super(),this.value=e,this.source=t}},mu=class extends ca{constructor(e,t){super(),this.pristine=e,this.source=t}},gu=class extends ca{constructor(e,t){super(),this.touched=e,this.source=t}},sa=class extends ca{constructor(e,t){super(),this.status=e,this.source=t}};function aR(n){return(Rf(n)?n.validators:n)||null}function jH(n){return Array.isArray(n)?Gw(n):n||null}function cR(n,e){return(Rf(e)?e.asyncValidators:n)||null}function UH(n){return Array.isArray(n)?Ww(n):n||null}function Rf(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function BH(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new z(1e3,"");if(!r[t])throw new z(1001,"")}function $H(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new z(1002,"")})}var Sf=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Xa(()=>this.statusReactive()),this.statusReactive=Ka(void 0),this._pristine=Xa(()=>this.pristineReactive()),this.pristineReactive=Ka(!0),this._touched=Xa(()=>this.touchedReactive()),this.touchedReactive=Ka(!1),this._events=new ht,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Dn(this.statusReactive)}set status(e){Dn(()=>this.statusReactive.set(e))}get valid(){return this.status===hu}get invalid(){return this.status===Ef}get pending(){return this.status==oa}get disabled(){return this.status===fu}get enabled(){return this.status!==fu}get pristine(){return Dn(this.pristineReactive)}set pristine(e){Dn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Dn(this.touchedReactive)}set touched(e){Dn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Wx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Wx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Kx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Kx(e,this._rawAsyncValidators))}hasValidator(e){return Df(this._rawValidators,e)}hasAsyncValidator(e){return Df(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(he(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new gu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new gu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(he(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new mu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new mu(!0,r))}markAsPending(e={}){this.status=oa;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sa(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(he(L({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=fu,this.errors=null,this._forEachChild(i=>{i.disable(he(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Tf(this.value,r)),this._events.next(new sa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(he(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=hu,this._forEachChild(r=>{r.enable(he(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(he(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hu||this.status===oa)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Tf(this.value,t)),this._events.next(new sa(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(he(L({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fu:hu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=oa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=rR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new sa(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new rt,this.statusChanges=new rt}_calculateStatus(){return this._allControlsDisabled()?fu:this.errors?Ef:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(oa)?oa:this._anyControlsHaveStatus(Ef)?Ef:hu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new mu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new gu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Rf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=jH(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=UH(this._rawAsyncValidators)}},Af=class extends Sf{constructor(e,t,r){super(aR(t),cR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){$H(this,!0,e),Object.keys(e).forEach(r=>{BH(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Kw=new G("CallSetDisabledState",{providedIn:"root",factory:()=>Qw}),Qw="always";function HH(n,e){return[...e.path,n]}function uR(n,e,t=Qw){lR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),zH(n,e),WH(n,e),GH(n,e),qH(n,e)}function Qx(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function qH(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function lR(n,e){let t=FH(n);e.validator!==null?n.setValidators(Gx(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=VH(n);e.asyncValidator!==null?n.setAsyncValidators(Gx(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Qx(e._rawValidators,i),Qx(e._rawAsyncValidators,i)}function zH(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&dR(n,e)})}function GH(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&dR(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function dR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function WH(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function KH(n,e){n==null,lR(n,e)}function QH(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function YH(n){return Object.getPrototypeOf(n.constructor)===xf}function ZH(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function JH(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===pn?t=o:YH(o)?r=o:i=o}),i||r||t||null}var XH={provide:aa,useExisting:Ln(()=>wo)},pu=Promise.resolve(),wo=(()=>{class n extends aa{get submitted(){return Dn(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Xa(()=>this.submittedReactive()),this.submittedReactive=Ka(!1),this._directives=new Set,this.ngSubmit=new rt,this.form=new Af({},Gw(t),Ww(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){pu.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),uR(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){pu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){pu.then(()=>{let r=this._findContainer(t.path),i=new Af({});KH(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){pu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){pu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),ZH(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(U(zw,10),U(tR,10),U(Kw,8))}}static{this.\u0275dir=Be({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&_e("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ii([XH]),un]})}}return n})();function Yx(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Zx(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var e4=class extends Sf{constructor(e=null,t,r){super(aR(t),cR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Zx(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Yx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Yx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Zx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var t4={provide:yu,useExisting:Ln(()=>Rn)},Jx=Promise.resolve(),Rn=(()=>{class n extends yu{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new e4,this._registered=!1,this.name="",this.update=new rt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=JH(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),QH(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){uR(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Jx.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ai(r);Jx.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?HH(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(U(aa,9),U(zw,10),U(tR,10),U(vu,10),U(si,8),U(Kw,8))}}static{this.\u0275dir=Be({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ii([t4]),un,ni]})}}return n})(),la=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Be({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),n4={provide:vu,useExisting:Ln(()=>Yw),multi:!0},Yw=(()=>{class n extends xf{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mr(n)))(i||n)}})()}static{this.\u0275dir=Be({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&_e("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[ii([n4]),un]})}}return n})();var r4={provide:vu,useExisting:Ln(()=>da),multi:!0};function hR(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function i4(n){return n.split(":")[0]}var da=(()=>{class n extends xf{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=hR(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=i4(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mr(n)))(i||n)}})()}static{this.\u0275dir=Be({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&_e("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ii([r4]),un]})}}return n})(),Mf=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(hR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(U(En),U($n),U(da,9))}}static{this.\u0275dir=Be({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),o4={provide:vu,useExisting:Ln(()=>fR),multi:!0};function Xx(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function s4(n){return n.split(":")[0]}var fR=(()=>{class n extends xf{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=s4(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mr(n)))(i||n)}})()}static{this.\u0275dir=Be({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&_e("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ii([o4]),un]})}}return n})(),Nf=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Xx(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Xx(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(U(En),U($n),U(fR,9))}}static{this.\u0275dir=Be({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var a4=(()=>{class n{constructor(){this._validator=zx}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):zx,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Be({type:n,features:[ni]})}}return n})();var c4={provide:zw,useExisting:Ln(()=>Io),multi:!0};var Io=(()=>{class n extends a4{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ai,this.createValidator=t=>NH}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mr(n)))(i||n)}})()}static{this.\u0275dir=Be({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Qa("required",i._enabled?"":null)},inputs:{required:"required"},features:[ii([c4]),un]})}}return n})();var u4=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ti({type:n})}static{this.\u0275inj=ei({})}}return n})();var or=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Kw,useValue:t.callSetDisabledState??Qw}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ti({type:n})}static{this.\u0275inj=ei({imports:[u4]})}}return n})();var Ye=(()=>{class n{constructor(){this.auth=F(oo),this.firestore=F(Bt),this.userSubject=new Ze(null),this.userTypeSubject=new Ze(null),this.userDataSubject=new Ze(null),wh(this.auth,t=>g(this,null,function*(){if(t){let i=(yield $t(et(this.firestore,"users",t.uid))).data();this.userDataSubject.next(i);let o=i?.type??null;this.userTypeSubject.next(o)}else this.userTypeSubject.next(null);this.userSubject.next(t)}))}get user$(){return this.userSubject.asObservable()}get userType$(){return this.userTypeSubject.asObservable()}get userData$(){return this.userDataSubject.asObservable()}get currentUser(){return this.auth.currentUser}register(t,r,i,o,s){return g(this,null,function*(){let a=yield PS(this.auth,t,r),u=a.user;return yield Pr(et(this.firestore,"users",u.uid),{firstName:i,lastName:o,email:t,type:s}),a})}login(t,r){return g(this,null,function*(){return yield kS(this.auth,t,r)})}logout(){return g(this,null,function*(){return yield Ih(this.auth)})}updateUserData(t){if(this.currentUser)return Pr(et(this.firestore,"users",this.currentUser.uid),t);throw new Error("User is not logged in")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function l4(n,e){n&1&&(S(0,"div",16),M(1," Email is required. "),D())}function d4(n,e){n&1&&(S(0,"div",16),M(1," Password is required. "),D())}var pR=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.authService.user$.subscribe(i=>{i&&this.router.navigate(["/"])})}onLogin(t){return g(this,null,function*(){t.invalid||(yield this.authService.login(this.email,this.password),this.router.navigate(["/"]))})}static{this.\u0275fac=function(r){return new(r||n)(U(Ye),U(Oe))}}static{this.\u0275cmp=Le({type:n,selectors:[["app-login"]],standalone:!0,features:[je],decls:25,vars:4,consts:[["loginForm","ngForm"],["emailInput","ngModel"],["passwordInput","ngModel"],[1,"flex","min-h-screen","items-center","justify-center","bg-gray-100"],[1,"w-full","max-w-md","p-8","bg-white","rounded-lg","shadow-lg"],[1,"text-2xl","font-bold","text-center","text-gray-800"],[1,"mt-6","space-y-6",3,"ngSubmit"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","name","email","placeholder","Enter your email","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["class","text-red-500 text-sm",4,"ngIf"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","placeholder","Enter your password","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","py-3","px-4","mt-4","text-white","bg-blue-600","rounded-lg","hover:bg-blue-700","transition-colors","duration-200"],[1,"my-6","border-t","border-gray-300"],[1,"mt-6","text-center","text-sm","text-gray-600"],["routerLink","/register",1,"text-blue-600","hover:underline"],[1,"text-red-500","text-sm"]],template:function(r,i){if(r&1){let o=Fe();S(0,"div",3)(1,"div",4)(2,"h2",5),M(3,"Login to Your Account"),D(),S(4,"form",6,0),_e("ngSubmit",function(){re(o);let a=Je(5);return ie(i.onLogin(a))}),S(6,"div")(7,"label",7),M(8,"Email"),D(),S(9,"input",8,1),He("ngModelChange",function(a){return re(o),Ke(i.email,a)||(i.email=a),ie(a)}),D(),ce(11,l4,2,0,"div",9),D(),S(12,"div")(13,"label",10),M(14,"Password"),D(),S(15,"input",11,2),He("ngModelChange",function(a){return re(o),Ke(i.password,a)||(i.password=a),ie(a)}),D(),ce(17,d4,2,0,"div",9),D(),S(18,"button",12),M(19," Login "),D()(),wt(20,"div",13),S(21,"p",14),M(22," Don't have an account? "),S(23,"a",15),M(24,"Sign up"),D()()()()}if(r&2){let o=Je(10),s=Je(16);k(9),$e("ngModel",i.email),k(2),W("ngIf",o.invalid&&o.touched),k(4),$e("ngModel",i.password),k(2),W("ngIf",s.invalid&&s.touched)}},dependencies:[bs,Gn,or,la,pn,ir,ua,Io,Rn,wo,bn,Rt]})}}return n})();function h4(n,e){n&1&&(S(0,"div",32),M(1," Email is required. "),D())}function f4(n,e){n&1&&(S(0,"div",32),M(1," First name is required. "),D())}function p4(n,e){n&1&&(S(0,"div",32),M(1," Last name is required. "),D())}function m4(n,e){n&1&&(S(0,"div",32),M(1," Password is required. "),D())}function g4(n,e){n&1&&(S(0,"div",32),M(1," Confirm password is required. "),D())}function y4(n,e){n&1&&(S(0,"div",32),M(1," Passwords do not match. "),D())}function v4(n,e){n&1&&(S(0,"div",32),M(1," User type is required. "),D())}function _4(n,e){n&1&&(S(0,"div",33),wt(1,"div",34),D())}var mR=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isLoading=!1,this.authService.user$.subscribe(i=>{i&&this.router.navigate(["/"])})}onRegister(t){return g(this,null,function*(){t.invalid||(this.isLoading=!0,yield this.authService.register(this.email,this.password,this.firstName,this.lastName,this.userType),this.isLoading=!1,this.router.navigate(["/"]))})}static{this.\u0275fac=function(r){return new(r||n)(U(Ye),U(Oe))}}static{this.\u0275cmp=Le({type:n,selectors:[["app-register"]],standalone:!0,features:[je],decls:57,vars:14,consts:[["registerForm","ngForm"],["emailInput","ngModel"],["firstNameInput","ngModel"],["lastNameInput","ngModel"],["passwordInput","ngModel"],["confirmPasswordInput","ngModel"],["userTypeInput","ngModel"],[1,"flex","min-h-screen","items-center","justify-center","bg-gray-100"],[1,"w-full","max-w-md","p-8","bg-white","rounded-lg","shadow-lg"],[1,"text-2xl","font-bold","text-center","text-gray-800"],[3,"ngSubmit"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","name","email","placeholder","Enter your email","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["class","text-red-500 text-sm",4,"ngIf"],["for","firstName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","firstName","name","firstName","placeholder","Enter your first name","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","lastName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","lastName","name","lastName","placeholder","Enter your last name","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","placeholder","Enter your password","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Confirm your password","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","userType",1,"block","text-sm","font-medium","text-gray-700"],["id","userType","name","userType","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],["value","hiker"],["value","hikingClub"],["type","submit",1,"w-full","py-3","px-4","mt-4","text-white","bg-blue-600","rounded-lg","hover:bg-blue-700","transition-colors","duration-200"],["class","fixed inset-0 flex items-center justify-center bg-gray-100 bg-opacity-75 z-50",4,"ngIf"],[1,"my-6","border-t","border-gray-300"],[1,"text-center","text-sm","text-gray-600"],["routerLink","/login",1,"text-blue-600","hover:underline"],[1,"text-red-500","text-sm"],[1,"fixed","inset-0","flex","items-center","justify-center","bg-gray-100","bg-opacity-75","z-50"],[1,"animate-spin","rounded-full","h-32","w-32","border-t-2","border-b-2","border-blue-500"]],template:function(r,i){if(r&1){let o=Fe();S(0,"div",7)(1,"div",8)(2,"h2",9),M(3,"Create an Account"),D(),S(4,"form",10,0),_e("ngSubmit",function(){re(o);let a=Je(5);return ie(i.onRegister(a))}),S(6,"div")(7,"label",11),M(8,"Email"),D(),S(9,"input",12,1),He("ngModelChange",function(a){return re(o),Ke(i.email,a)||(i.email=a),ie(a)}),D(),ce(11,h4,2,0,"div",13),D(),S(12,"div")(13,"label",14),M(14,"First Name"),D(),S(15,"input",15,2),He("ngModelChange",function(a){return re(o),Ke(i.firstName,a)||(i.firstName=a),ie(a)}),D(),ce(17,f4,2,0,"div",13),D(),S(18,"div")(19,"label",16),M(20,"Last Name"),D(),S(21,"input",17,3),He("ngModelChange",function(a){return re(o),Ke(i.lastName,a)||(i.lastName=a),ie(a)}),D(),ce(23,p4,2,0,"div",13),D(),S(24,"div")(25,"label",18),M(26,"Password"),D(),S(27,"input",19,4),He("ngModelChange",function(a){return re(o),Ke(i.password,a)||(i.password=a),ie(a)}),D(),ce(29,m4,2,0,"div",13),D(),S(30,"div")(31,"label",20),M(32,"Confirm Password"),D(),S(33,"input",21,5),He("ngModelChange",function(a){return re(o),Ke(i.confirmPassword,a)||(i.confirmPassword=a),ie(a)}),D(),ce(35,g4,2,0,"div",13)(36,y4,2,0,"div",13),D(),S(37,"div")(38,"label",22),M(39,"User Type"),D(),S(40,"select",23,6),He("ngModelChange",function(a){return re(o),Ke(i.userType,a)||(i.userType=a),ie(a)}),S(42,"option",24),M(43,"Select user type"),D(),S(44,"option",25),M(45,"Hiker"),D(),S(46,"option",26),M(47,"Hiking Club"),D()(),ce(48,v4,2,0,"div",13),D(),S(49,"button",27),M(50," Register "),D()(),ce(51,_4,2,0,"div",28),wt(52,"div",29),S(53,"p",30),M(54," Already have an account? "),S(55,"a",31),M(56,"Login"),D()()()()}if(r&2){let o=Je(10),s=Je(16),a=Je(22),u=Je(28),l=Je(34),h=Je(41);k(9),$e("ngModel",i.email),k(2),W("ngIf",o.invalid&&o.touched),k(4),$e("ngModel",i.firstName),k(2),W("ngIf",s.invalid&&s.touched),k(4),$e("ngModel",i.lastName),k(2),W("ngIf",a.invalid&&a.touched),k(4),$e("ngModel",i.password),k(2),W("ngIf",u.invalid&&u.touched),k(4),$e("ngModel",i.confirmPassword),k(2),W("ngIf",l.invalid&&l.touched),k(),W("ngIf",i.password!==i.confirmPassword&&l.touched),k(4),$e("ngModel",i.userType),k(8),W("ngIf",h.invalid&&h.touched),k(3),W("ngIf",i.isLoading)}},dependencies:[or,la,Mf,Nf,pn,da,ir,ua,Io,Rn,wo,bs,Gn,bn,Rt]})}}return n})();var w4=n=>["/tour-participants",n];function I4(n,e){if(n&1&&(S(0,"div",9),M(1),D()),n&2){let t=pe(2);k(),Ja("",t.clubProfile.firstName," ",t.clubProfile.lastName,"")}}function E4(n,e){if(n&1){let t=Fe();S(0,"div",15)(1,"input",16),He("ngModelChange",function(i){re(t);let o=pe(2);return Ke(o.firstName,i)||(o.firstName=i),ie(i)}),D(),S(2,"input",17),He("ngModelChange",function(i){re(t);let o=pe(2);return Ke(o.lastName,i)||(o.lastName=i),ie(i)}),D()()}if(n&2){let t=pe(2);k(),$e("ngModel",t.firstName),k(),$e("ngModel",t.lastName)}}function D4(n,e){if(n&1){let t=Fe();S(0,"button",18),_e("click",function(){re(t);let i=pe(2);return ie(i.toggleEditMode())}),M(1,"Edit"),D()}}function b4(n,e){if(n&1){let t=Fe();S(0,"button",19),_e("click",function(){re(t);let i=pe(2);return ie(i.saveProfile())}),M(1,"Save"),D()}}function C4(n,e){if(n&1){let t=Fe();S(0,"button",20),_e("click",function(){re(t);let i=pe(2);return ie(i.toggleEditMode())}),M(1,"Cancel"),D()}}function T4(n,e){if(n&1&&(S(0,"li",22)(1,"h3",23),M(2),D(),S(3,"p")(4,"strong"),M(5,"Date:"),D(),M(6),D(),S(7,"p")(8,"strong"),M(9,"Difficulty:"),D(),M(10),D(),S(11,"p")(12,"strong"),M(13,"Participants:"),D(),M(14),D(),S(15,"button",24),M(16,"View Participants"),D()()),n&2){let t=e.$implicit;k(2),Pe(t.name),k(4),xt(" ",t.date,""),k(4),xt(" ",t.difficulty,""),k(4),xt(" ",t.participants,""),k(),W("routerLink",us(5,w4,t.id))}}function S4(n,e){if(n&1&&(S(0,"ul"),ce(1,T4,17,7,"li",21),D()),n&2){let t=pe(2);k(),W("ngForOf",t.tours)}}function A4(n,e){n&1&&(S(0,"p"),M(1,"No tours organized by this club."),D())}function x4(n,e){if(n&1&&(S(0,"div")(1,"div",5)(2,"div",6),M(3,"Name:"),D(),ce(4,I4,2,2,"div",7)(5,E4,3,2,"div",8),D(),S(6,"div",5)(7,"div",6),M(8,"Email:"),D(),S(9,"div",9),M(10),D()(),S(11,"div",5)(12,"div",6),M(13,"Type:"),D(),S(14,"div",9),M(15),D()(),S(16,"div",10),ce(17,D4,2,0,"button",11)(18,b4,2,0,"button",12)(19,C4,2,0,"button",13),D(),S(20,"h2",14),M(21,"Organized Tours"),D(),ce(22,S4,2,1,"ul",4)(23,A4,2,0,"ng-template",null,1,Gi),D()),n&2){let t=Je(24),r=pe();k(4),W("ngIf",!r.editMode),k(),W("ngIf",r.editMode),k(5),Pe(r.clubProfile.email),k(5),Pe(r.clubProfile.type),k(2),W("ngIf",!r.editMode),k(),W("ngIf",r.editMode),k(),W("ngIf",r.editMode),k(3),W("ngIf",r.tours.length>0)("ngIfElse",t)}}function R4(n,e){n&1&&(S(0,"p"),M(1,"No profile data available."),D())}var gR=(()=>{class n{constructor(t){this.authService=t,this.clubProfile=null,this.firestore=F(Bt),this.editMode=!1,this.firstName="",this.lastName=""}ngOnInit(){return g(this,null,function*(){let t=this.authService.currentUser;if(t){let r=yield $t(et(this.firestore,"users",t.uid));r.exists()?(this.clubProfile=r.data(),this.firstName=this.clubProfile.firstName,this.lastName=this.clubProfile.lastName,yield this.loadTours(t.uid)):console.error("User not found")}else console.error("User is not authenticated")})}toggleEditMode(){this.editMode=!this.editMode}loadTours(t){return g(this,null,function*(){let r=_o(this.firestore,"tours"),i=$x(r,Hx("createdBy","==",t)),o=yield If(i);this.tours=o.docs.map(s=>{let a=s.data();return a.id=s.id,a})})}saveProfile(){return g(this,null,function*(){this.clubProfile&&(this.clubProfile.firstName=this.firstName,this.clubProfile.lastName=this.lastName,this.authService.updateUserData(this.clubProfile),this.toggleEditMode())})}static{this.\u0275fac=function(r){return new(r||n)(U(Ye))}}static{this.\u0275cmp=Le({type:n,selectors:[["app-profile-club"]],standalone:!0,features:[je],decls:6,vars:2,consts:[["noProfile",""],["noTours",""],[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],[4,"ngIf","ngIfElse"],[1,"flex","items-center","space-x-4"],[1,"text-lg","font-semibold","text-gray-700"],["class","text-lg text-gray-900",4,"ngIf"],["class","flex space-x-2",4,"ngIf"],[1,"text-lg","text-gray-900"],[1,"flex","justify-end","space-x-4","mt-4"],["class","bg-blue-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-green-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-red-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],[1,"text-xl","font-bold","mt-4"],[1,"flex","space-x-2"],["placeholder","First Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],["placeholder","Last Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],[1,"bg-blue-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-green-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-red-500","text-white","px-4","py-2","rounded",3,"click"],["class","mb-4 p-4 border rounded shadow",4,"ngFor","ngForOf"],[1,"mb-4","p-4","border","rounded","shadow"],[1,"text-lg","font-semibold"],[1,"bg-blue-500","text-white","px-4","py-2","rounded","mt-2",3,"routerLink"]],template:function(r,i){if(r&1&&(S(0,"div",2)(1,"h1",3),M(2,"Club Profile"),D(),ce(3,x4,25,9,"div",4)(4,R4,2,0,"ng-template",null,0,Gi),D()),r&2){let o=Je(5);k(3),W("ngIf",i.clubProfile)("ngIfElse",o)}},dependencies:[Rt,Hn,or,pn,ir,Rn,Gn]})}}return n})();function M4(n,e){if(n&1&&(S(0,"div",9),M(1),D()),n&2){let t=pe(2);k(),Ja("",t.userProfile.firstName," ",t.userProfile.lastName,"")}}function N4(n,e){if(n&1){let t=Fe();S(0,"div",14)(1,"input",15),He("ngModelChange",function(i){re(t);let o=pe(2);return Ke(o.firstName,i)||(o.firstName=i),ie(i)}),D(),S(2,"input",16),He("ngModelChange",function(i){re(t);let o=pe(2);return Ke(o.lastName,i)||(o.lastName=i),ie(i)}),D()()}if(n&2){let t=pe(2);k(),$e("ngModel",t.firstName),k(),$e("ngModel",t.lastName)}}function P4(n,e){if(n&1){let t=Fe();S(0,"button",17),_e("click",function(){re(t);let i=pe(2);return ie(i.toggleEditMode())}),M(1,"Edit"),D()}}function O4(n,e){if(n&1){let t=Fe();S(0,"button",18),_e("click",function(){re(t);let i=pe(2);return ie(i.saveProfile())}),M(1,"Save"),D()}}function k4(n,e){if(n&1){let t=Fe();S(0,"button",19),_e("click",function(){re(t);let i=pe(2);return ie(i.toggleEditMode())}),M(1,"Cancel"),D()}}function F4(n,e){if(n&1&&(S(0,"div",4)(1,"div",5)(2,"div",6),M(3,"Name:"),D(),ce(4,M4,2,2,"div",7)(5,N4,3,2,"div",8),D(),S(6,"div",5)(7,"div",6),M(8,"Email:"),D(),S(9,"div",9),M(10),D()(),S(11,"div",5)(12,"div",6),M(13,"Type:"),D(),S(14,"div",9),M(15),D()(),S(16,"div",10),ce(17,P4,2,0,"button",11)(18,O4,2,0,"button",12)(19,k4,2,0,"button",13),D()()),n&2){let t=pe();k(4),W("ngIf",!t.editMode),k(),W("ngIf",t.editMode),k(5),Pe(t.userProfile.email),k(5),Pe(t.userProfile.type),k(2),W("ngIf",!t.editMode),k(),W("ngIf",t.editMode),k(),W("ngIf",t.editMode)}}function V4(n,e){n&1&&(S(0,"p",20),M(1,"No profile data available."),D())}var yR=(()=>{class n{constructor(t){this.authService=t,this.editMode=!1,this.firstName="",this.lastName=""}ngOnInit(){return g(this,null,function*(){this.authService.userData$.subscribe(t=>{let r=t;r&&(this.userProfile=r),this.firstName=this.userProfile.firstName,this.lastName=this.userProfile.lastName})})}toggleEditMode(){this.editMode=!this.editMode}saveProfile(){return g(this,null,function*(){this.userProfile.firstName=this.firstName,this.userProfile.lastName=this.lastName,this.authService.updateUserData(this.userProfile),this.toggleEditMode()})}static{this.\u0275fac=function(r){return new(r||n)(U(Ye))}}static{this.\u0275cmp=Le({type:n,selectors:[["app-profile-hiker"]],standalone:!0,features:[je],decls:6,vars:2,consts:[["noProfile",""],[1,"container","mx-auto","p-6","bg-white","shadow-lg","rounded-lg"],[1,"text-3xl","font-bold","text-gray-800","mb-6","text-center"],["class","space-y-4",4,"ngIf","ngIfElse"],[1,"space-y-4"],[1,"flex","items-center","space-x-4"],[1,"text-lg","font-semibold","text-gray-700"],["class","text-lg text-gray-900",4,"ngIf"],["class","flex space-x-2",4,"ngIf"],[1,"text-lg","text-gray-900"],[1,"flex","justify-end","space-x-4"],["class","bg-blue-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-green-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-red-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],[1,"flex","space-x-2"],["placeholder","First Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],["placeholder","Last Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],[1,"bg-blue-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-green-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-red-500","text-white","px-4","py-2","rounded",3,"click"],[1,"text-center","text-gray-500"]],template:function(r,i){if(r&1&&(S(0,"div",1)(1,"h1",2),M(2,"Profile"),D(),ce(3,F4,20,7,"div",3)(4,V4,2,0,"ng-template",null,0,Gi),D()),r&2){let o=Je(5);k(3),W("ngIf",i.userProfile)("ngIfElse",o)}},dependencies:[Rt,or,pn,ir,Rn]})}}return n})();var Zw=(n,e)=>{let t=F(Ye),r=F(Oe);return t.user$.pipe(ft(1),J(i=>i?!0:(r.navigate(["/login"]),!1)))};var vR=(()=>{class n{constructor(t,r,i){this.authService=t,this.tourService=r,this.router=i,this.tour={name:"",date:"",description:"",gpxContent:"",difficulty:"easy",participants:0,createdBy:"",createdAt:""},this.gpxFile=null}onFileChange(t){let r=t.target.files[0];r&&(this.gpxFile=r)}onSubmit(){return g(this,null,function*(){if(this.gpxFile){let t=this.authService.currentUser;if(t){let r=new FileReader;r.onload=()=>g(this,null,function*(){let i=r.result;this.tour.gpxContent=i,this.tour.createdBy=t.uid,this.tour.createdAt=new Date().toISOString();try{let o=yield this.tourService.addTour(this.tour);console.log("Tour created with ID:",o.id),this.router.navigate(["/"])}catch(o){console.error("Error adding document:",o)}}),r.readAsText(this.gpxFile)}else console.error("User is not authenticated")}else console.error("GPX file is required")})}static{this.\u0275fac=function(r){return new(r||n)(U(Ye),U(rr),U(Oe))}}static{this.\u0275cmp=Le({type:n,selectors:[["app-create-hiking-tour"]],standalone:!0,features:[je],decls:38,vars:6,consts:[["tourForm","ngForm"],[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],[3,"ngSubmit"],[1,"mb-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","name","name","name","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","date",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","date","name","date","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","description",1,"block","text-sm","font-medium","text-gray-700"],["id","description","name","description","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","gpxFile",1,"block","text-sm","font-medium","text-gray-700"],["type","file","id","gpxFile","name","gpxFile","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"change"],["for","difficulty",1,"block","text-sm","font-medium","text-gray-700"],["id","difficulty","name","difficulty","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["value","easy"],["value","moderate"],["value","hard"],["for","participants",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","participants","name","participants","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"mt-4"],["type","submit",1,"w-full","py-2","px-4","bg-blue-600","text-white","rounded-md","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"disabled"]],template:function(r,i){if(r&1){let o=Fe();S(0,"div",1)(1,"h1",2),M(2,"Create Hiking Tour"),D(),S(3,"form",3,0),_e("ngSubmit",function(){return re(o),ie(i.onSubmit())}),S(5,"div",4)(6,"label",5),M(7,"Tour Name"),D(),S(8,"input",6),He("ngModelChange",function(a){return re(o),Ke(i.tour.name,a)||(i.tour.name=a),ie(a)}),D()(),S(9,"div",4)(10,"label",7),M(11,"Date"),D(),S(12,"input",8),He("ngModelChange",function(a){return re(o),Ke(i.tour.date,a)||(i.tour.date=a),ie(a)}),D()(),S(13,"div",4)(14,"label",9),M(15,"Description"),D(),S(16,"textarea",10),He("ngModelChange",function(a){return re(o),Ke(i.tour.description,a)||(i.tour.description=a),ie(a)}),D()(),S(17,"div",4)(18,"label",11),M(19,"GPX File"),D(),S(20,"input",12),_e("change",function(a){return re(o),ie(i.onFileChange(a))}),D()(),S(21,"div",4)(22,"label",13),M(23,"Difficulty Level"),D(),S(24,"select",14),He("ngModelChange",function(a){return re(o),Ke(i.tour.difficulty,a)||(i.tour.difficulty=a),ie(a)}),S(25,"option",15),M(26,"Easy"),D(),S(27,"option",16),M(28,"Moderate"),D(),S(29,"option",17),M(30,"Hard"),D()()(),S(31,"div",4)(32,"label",18),M(33,"Number of Participants"),D(),S(34,"input",19),He("ngModelChange",function(a){return re(o),Ke(i.tour.participants,a)||(i.tour.participants=a),ie(a)}),D()(),S(35,"div",20)(36,"button",21),M(37," Create Tour "),D()()()()}if(r&2){let o=Je(4);k(8),$e("ngModel",i.tour.name),k(4),$e("ngModel",i.tour.date),k(4),$e("ngModel",i.tour.description),k(8),$e("ngModel",i.tour.difficulty),k(10),$e("ngModel",i.tour.participants),k(2),W("disabled",o.invalid)}},dependencies:[bn,or,la,Mf,Nf,pn,Yw,da,ir,ua,Io,Rn,wo]})}}return n})();var Jw=(n,e)=>{let t=F(Ye),r=F(Oe);return t.userType$.pipe(ft(1),J(i=>i==="hikingClub"?!0:(r.navigate(["/"]),!1)))};var L4=(n,e)=>({"bg-gray-400 cursor-not-allowed":n,"bg-blue-600 hover:bg-blue-700":e});function j4(n,e){if(n&1){let t=Fe();S(0,"button",5),_e("click",function(){re(t);let i=pe(2);return ie(i.applyForTour())}),M(1," Apply for the Tour "),D()}if(n&2){let t=pe(2);W("disabled",t.hasApplied)("ngClass",Vb(2,L4,t.hasApplied,!t.hasApplied))}}function U4(n,e){if(n&1&&(S(0,"div")(1,"h2",3),M(2),D(),S(3,"p")(4,"strong"),M(5,"Date:"),D(),M(6),D(),S(7,"p")(8,"strong"),M(9,"Description:"),D(),M(10),D(),S(11,"p")(12,"strong"),M(13,"Difficulty:"),D(),M(14),D(),S(15,"p")(16,"strong"),M(17,"Participants:"),D(),M(18),D(),ce(19,j4,2,5,"button",4),D()),n&2){let t=pe();k(2),Pe(t.tour.name),k(4),xt(" ",t.tour.date,""),k(4),xt(" ",t.tour.description,""),k(4),xt(" ",t.tour.difficulty,""),k(4),xt(" ",t.tour.participants,""),k(),W("ngIf",t.isHiker)}}var _R=(()=>{class n{constructor(t,r,i,o){this.route=t,this.tourService=r,this.authService=i,this.router=o,this.isHiker=!1,this.hasApplied=!1}ngOnInit(){return g(this,null,function*(){let t=this.route.snapshot.paramMap.get("id");t?yield this.loadTour(t):this.router.navigate(["/"]),this.authService.user$.subscribe(r=>g(this,null,function*(){let i=r?.uid;i&&(this.userId=i,this.hasApplied=yield this.checkIfUserHasApplied(this.tour.id,this.userId))})),this.authService.userType$.subscribe(r=>{r==="hiker"&&(this.isHiker=!0)})})}loadTour(t){return g(this,null,function*(){let r=(yield this.tourService.loadTour(t))??null;r?this.tour=r:this.router.navigate(["/"])})}applyForTour(){return g(this,null,function*(){let t=this.authService.currentUser;t?(yield this.tourService.applyForTour(this.tour.id,this.tour.createdBy,t.uid),this.hasApplied=!0):this.router.navigate(["/"])})}checkIfUserHasApplied(t,r){return g(this,null,function*(){return this.tourService.hasUserApplied(t,r)})}static{this.\u0275fac=function(r){return new(r||n)(U(dn),U(rr),U(Ye),U(Oe))}}static{this.\u0275cmp=Le({type:n,selectors:[["app-tour-details"]],standalone:!0,features:[je],decls:4,vars:1,consts:[[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],[4,"ngIf"],[1,"text-xl","font-semibold"],["class","mt-2 py-2 px-4 text-white rounded focus:outline-none focus:ring-2 focus:ring-blue-500",3,"disabled","ngClass","click",4,"ngIf"],[1,"mt-2","py-2","px-4","text-white","rounded","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"click","disabled","ngClass"]],template:function(r,i){r&1&&(S(0,"div",0)(1,"h1",1),M(2,"Tour Details"),D(),ce(3,U4,20,6,"div",2),D()),r&2&&(k(3),W("ngIf",i.tour))},dependencies:[Rt,Cd]})}}return n})();var wR=(()=>{class n{constructor(){this.firestore=F(Bt)}loadUserData(t){let r=et(this.firestore,`users/${t}`);return $t(r).then(i=>{if(i.exists())return i.data();throw new Error("User not found")})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $4(n,e){if(n&1){let t=Fe();S(0,"td",8)(1,"button",10),_e("click",function(){re(t);let i=pe().$implicit,o=pe();return ie(o.acceptApplication(i))}),M(2,"Accept"),D(),S(3,"button",11),_e("click",function(){re(t);let i=pe().$implicit,o=pe();return ie(o.rejectApplication(i))}),M(4,"Reject"),D()()}}function H4(n,e){if(n&1&&(S(0,"tr")(1,"td",8),M(2),D(),S(3,"td",8),M(4),D(),S(5,"td",8),M(6),D(),S(7,"td",8),M(8),D(),ce(9,$4,5,0,"td",9),D()),n&2){let t=e.$implicit;k(2),Pe(t.userData.firstName),k(2),Pe(t.userData.lastName),k(2),Pe(t.userData.email),k(2),Pe(t.status),k(),W("ngIf",t.status!="canceled")}}var IR=(()=>{class n{constructor(t,r,i,o,s){this.route=t,this.tourService=r,this.userService=i,this.notificationService=o,this.router=s}ngOnInit(){return g(this,null,function*(){let t=this.route.snapshot.paramMap.get("id");t?(this.tourId=t,yield this.loadTour(t),this.applications=yield this.loadApplications()):this.router.navigate(["/"])})}loadTour(t){return g(this,null,function*(){let r=(yield this.tourService.loadTour(t))??null;r?this.tour=r:this.router.navigate(["/"])})}loadApplications(){return g(this,null,function*(){if(this.tour.id){let t=yield this.tourService.loadAllApplications(this.tour.id);return t=yield this.processApplication(t),t}else throw new Error("Tour ID is missing")})}processApplication(t){return g(this,null,function*(){for(let r of t){let i=yield this.userService.loadUserData(r.id);r.userData=i}return t})}rejectApplication(t){return g(this,null,function*(){yield this.tourService.rejectApplication(this.tourId,t.id),this.notificationService.sendNotification(t.id,"statusUpdate",`Your application for ${this.tour.name} has been rejected`),this.applications=yield this.loadApplications()})}acceptApplication(t){return g(this,null,function*(){yield this.tourService.acceptApplication(this.tourId,t.id),this.notificationService.sendNotification(t.id,"statusUpdate",`Your application for ${this.tour.name} has been accepted`),this.applications=yield this.loadApplications()})}static{this.\u0275fac=function(r){return new(r||n)(U(dn),U(rr),U(wR),U(ia),U(Oe))}}static{this.\u0275cmp=Le({type:n,selectors:[["app-tour-participants"]],standalone:!0,features:[je],decls:36,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-6","mb-6","m-6"],[1,"text-3xl","font-bold","mb-4"],[1,"text-xl","font-semibold","mb-1"],[1,"text-gray-700"],[1,"text-2xl","font-bold","mb-4"],[1,"min-w-full","bg-white"],[1,"py-2","px-4","border-b","border-gray-200","text-left"],[4,"ngFor","ngForOf"],[1,"py-2","px-4","border-b","border-gray-200"],["class","py-2 px-4 border-b border-gray-200",4,"ngIf"],[1,"bg-green-500","text-white","px-4","py-2","rounded","mr-2",3,"click"],[1,"bg-red-500","text-white","px-4","py-2","rounded",3,"click"]],template:function(r,i){r&1&&(S(0,"div",0)(1,"h2",1),M(2),D(),S(3,"div")(4,"h3",2),M(5,"Description"),D(),S(6,"p",3),M(7),D()(),S(8,"div")(9,"h3",2),M(10,"Difficulty"),D(),S(11,"p",3),M(12),D()(),S(13,"div")(14,"h3",2),M(15,"Date"),D(),S(16,"p",3),M(17),D()()(),S(18,"div",0)(19,"h3",4),M(20,"Application Status"),D(),S(21,"table",5)(22,"thead")(23,"tr")(24,"th",6),M(25,"First Name"),D(),S(26,"th",6),M(27,"Last Name"),D(),S(28,"th",6),M(29,"E-mail"),D(),S(30,"th",6),M(31,"Status"),D(),S(32,"th",6),M(33,"Actions"),D()()(),S(34,"tbody"),ce(35,H4,10,5,"tr",7),D()()()),r&2&&(k(2),Pe(i.tour.name),k(5),Pe(i.tour.description),k(5),Pe(i.tour.difficulty),k(5),Pe(i.tour.date),k(18),W("ngForOf",i.applications))},dependencies:[Hn,Rt]})}}return n})();function q4(n,e){if(n&1){let t=Fe();S(0,"button",12),_e("click",function(){re(t);let i=pe().$implicit,o=pe();return ie(o.cancelApplication(i.id))}),M(1," Cancel "),D()}}function z4(n,e){if(n&1&&(S(0,"tr")(1,"td",10),M(2),D(),S(3,"td",10),M(4),D(),S(5,"td",10),M(6),D(),S(7,"td",10),ce(8,q4,2,0,"button",11),D()()),n&2){let t=e.$implicit;k(2),Pe(t.name),k(2),Pe(t.date),k(2),Pe(t.application.status),k(2),W("ngIf",t.application.status==="accepted")}}var ER=(()=>{class n{constructor(t,r){this.tourService=t,this.authService=r,this.tours=[]}ngOnInit(){return g(this,null,function*(){this.authService.user$.subscribe(t=>g(this,null,function*(){t&&this.loadToursUserAppliedFor()}))})}cancelApplication(t){this.tourService.cancelApplication(t,this.authService.currentUser?.uid),this.loadToursUserAppliedFor()}loadToursUserAppliedFor(){return g(this,null,function*(){this.authService.currentUser&&(this.tours=yield this.tourService.getToursUserAppliedFor(this.authService.currentUser.uid))})}static{this.\u0275fac=function(r){return new(r||n)(U(rr),U(Ye))}}static{this.\u0275cmp=Le({type:n,selectors:[["app-my-tours"]],standalone:!0,features:[je],decls:18,vars:1,consts:[[1,"p-4"],[1,"bg-white","shadow","overflow-hidden","sm:rounded-lg"],[1,"px-4","py-5","sm:px-6"],[1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"border-t","border-gray-200"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],[1,"px-6","py-4","whitespace-nowrap"],["class","mt-2 py-2 px-4 bg-red-600 text-white rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",3,"click",4,"ngIf"],[1,"mt-2","py-2","px-4","bg-red-600","text-white","rounded","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500",3,"click"]],template:function(r,i){r&1&&(S(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),M(4,"My Tours"),D()(),S(5,"div",4)(6,"table",5)(7,"thead",6)(8,"tr")(9,"th",7),M(10,"Tour Name"),D(),S(11,"th",7),M(12,"Date"),D(),S(13,"th",7),M(14,"Status"),D(),wt(15,"th",7),D()(),S(16,"tbody",8),ce(17,z4,9,4,"tr",9),D()()()()()),r&2&&(k(17),W("ngForOf",i.tours))},dependencies:[Hn,Rt]})}}return n})();var DR=(n,e)=>{let t=F(Ye),r=F(Oe);return t.userType$.pipe(ft(1),J(i=>i==="hiker"?!0:(r.navigate(["/"]),!1)))};var bR=[{path:"",component:qx},{path:"login",component:pR},{path:"register",component:mR},{path:"profile-club",component:gR,canActivate:[Zw]},{path:"profile-hiker",component:yR,canActivate:[Zw]},{path:"create-hiking-tour",component:vR,canActivate:[Jw]},{path:"tour-details/:id",component:_R},{path:"tour-participants/:id",component:IR,canActivate:[Jw]},{path:"my-tours",component:ER,canActivate:[DR]}];var CR={apiKey:"AIzaSyCu5CPQCRQ7_qsOst9yUHo9_VXxDZ7RQv0",authDomain:"master-b6858.firebaseapp.com",projectId:"master-b6858",storageBucket:"master-b6858.firebasestorage.app",messagingSenderId:"21300314672",appId:"1:21300314672:web:8cd1730aa552dff5f3e3f5"};var TR={providers:[FT(()=>Jd(CR)),NS(()=>OS()),Lx(()=>Bx()),qb({eventCoalescing:!0}),rT(bR)]};var G4=n=>({"font-bold":n});function W4(n,e){n&1&&(S(0,"li")(1,"a",15),M(2,"Create Hiking Tour"),D()())}function K4(n,e){if(n&1&&(Ya(0),ce(1,W4,3,0,"li",6),Za()),n&2){let t=e.ngIf;k(),W("ngIf",t==="hikingClub")}}function Q4(n,e){n&1&&(S(0,"li")(1,"a",16),M(2,"My Tours"),D()())}function Y4(n,e){if(n&1&&(Ya(0),ce(1,Q4,3,0,"li",6),Za()),n&2){let t=e.ngIf;k(),W("ngIf",t==="hiker")}}function Z4(n,e){n&1&&wt(0,"span",17)}function J4(n,e){if(n&1){let t=Fe();S(0,"li",20)(1,"p",21),_e("click",function(){let i=re(t).$implicit,o=pe(3);return ie(o.markAsRead(i))}),M(2),D()()}if(n&2){let t=e.$implicit;k(),W("ngClass",us(2,G4,!t.read)),k(),Pe(t.message)}}function X4(n,e){if(n&1&&(S(0,"div",18)(1,"ul"),ce(2,J4,3,4,"li",19),D()()),n&2){let t=pe(2);k(2),W("ngForOf",t.notifications)}}function eq(n,e){if(n&1){let t=Fe();Ya(0),ce(1,K4,2,1,"ng-container",6),ls(2,"async"),ce(3,Y4,2,1,"ng-container",6),ls(4,"async"),S(5,"li")(6,"a",7),_e("click",function(){re(t);let i=pe();return ie(i.goToProfile())}),M(7,"Profile"),D()(),S(8,"li",8)(9,"button",7),_e("click",function(){re(t);let i=pe();return ie(i.toggleNotifications())}),bD(),S(10,"svg",9),wt(11,"path",10),D(),ce(12,Z4,1,0,"span",11),D(),CD(),wt(13,"i",12),ce(14,X4,3,1,"div",13),D(),S(15,"li")(16,"a",14),_e("click",function(){re(t);let i=pe();return ie(i.logout())}),M(17,"Logout"),D()(),Za()}if(n&2){let t=pe();k(),W("ngIf",ds(2,4,t.userType$)),k(2),W("ngIf",ds(4,6,t.userType$)),k(9),W("ngIf",t.unreadNotficationsMarker),k(2),W("ngIf",t.showNotifications)}}function tq(n,e){n&1&&(S(0,"li")(1,"a",22),M(2,"Login"),D()(),S(3,"li")(4,"a",23),M(5,"Register"),D()())}var SR=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.notificationService=i,this.user=null,this.notifications=[],this.showNotifications=!1,this.unreadNotficationsMarker=!1,this.user$=this.authService.user$,this.user$.subscribe(o=>{o&&(this.user=o)}),this.userType$=this.authService.userType$,this.userData$=this.authService.userData$,this.userData$.subscribe(o=>{o&&o.notifications&&(this.notifications=o.notifications,this.unreadNotficationsMarker=this.notifications.some(s=>!s.read))})}ngOnInit(){}logout(){return g(this,null,function*(){yield this.authService.logout(),this.router.navigate(["/"])})}goToProfile(){this.userType$.pipe(ft(1)).subscribe(t=>{t==="hiker"?this.router.navigate(["/profile-hiker"]):t==="hikingClub"&&this.router.navigate(["/profile-club"])})}toggleNotifications(){this.showNotifications=!this.showNotifications}markAsRead(t){return g(this,null,function*(){let r=this.notifications.findIndex(i=>i.date===t.date);yield this.notificationService.markAsRead(this.user.uid,r),t.read=!0,this.unreadNotficationsMarker=this.notifications.some(i=>!i.read)})}static{this.\u0275fac=function(r){return new(r||n)(U(Ye),U(Oe),U(ia))}}static{this.\u0275cmp=Le({type:n,selectors:[["app-navbar"]],standalone:!0,features:[je],decls:10,vars:4,consts:[["loggedOut",""],[1,"bg-gray-800","p-4"],[1,"flex","items-center","space-x-4","w-full"],["routerLink","/",1,"text-white","text-lg","hover:text-gray-400"],[1,"flex-grow"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"text-white","hover:text-gray-400",3,"click"],[1,"relative"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],["class","animate-ping absolute top-1 right-0.5 block h-1 w-1 rounded-full ring-2 ring-green-400 bg-green-600",4,"ngIf"],[1,"fa-solid","fa-bell"],["class","absolute right-0 mt-2 w-64 bg-white shadow-lg rounded-lg",4,"ngIf"],[1,"text-white","hover:text-gray-400","cursor-pointer",3,"click"],["routerLink","/create-hiking-tour",1,"text-white","hover:text-gray-400"],["routerLink","/my-tours",1,"text-white","hover:text-gray-400"],[1,"animate-ping","absolute","top-1","right-0.5","block","h-1","w-1","rounded-full","ring-2","ring-green-400","bg-green-600"],[1,"absolute","right-0","mt-2","w-64","bg-white","shadow-lg","rounded-lg"],["class","p-4 border-b",4,"ngFor","ngForOf"],[1,"p-4","border-b"],[3,"click","ngClass"],["routerLink","/login",1,"text-white","hover:text-gray-400"],["routerLink","/register",1,"text-white","hover:text-gray-400"]],template:function(r,i){if(r&1&&(S(0,"nav",1)(1,"ul",2)(2,"li")(3,"a",3),M(4,"Hiking Platform"),D()(),wt(5,"li",4),ce(6,eq,18,8,"ng-container",5),ls(7,"async"),ce(8,tq,6,0,"ng-template",null,0,Gi),D()()),r&2){let o=Je(9);k(6),W("ngIf",ds(7,2,i.user$))("ngIfElse",o)}},dependencies:[bs,Gn,bn,Cd,Hn,Rt,Td]})}}return n})();var AR=(()=>{class n{constructor(){this.title="master"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Le({type:n,selectors:[["app-root"]],standalone:!0,features:[je],decls:2,vars:0,template:function(r,i){r&1&&wt(0,"app-navbar")(1,"router-outlet")},dependencies:[py,SR]})}}return n})();fC(AR,TR).catch(n=>console.error(n));
