var BN=Object.create;var Zg=Object.defineProperty,UN=Object.defineProperties,jN=Object.getOwnPropertyDescriptor,$N=Object.getOwnPropertyDescriptors,zN=Object.getOwnPropertyNames,wb=Object.getOwnPropertySymbols,Eb=Object.getPrototypeOf,bb=Object.prototype.hasOwnProperty,HN=Object.prototype.propertyIsEnumerable,qN=Reflect.get;var Ib=(n,e,t)=>e in n?Zg(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Y=(n,e)=>{for(var t in e||={})bb.call(e,t)&&Ib(n,t,e[t]);if(wb)for(var t of wb(e))HN.call(e,t)&&Ib(n,t,e[t]);return n},Pe=(n,e)=>UN(n,$N(e));var GN=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var WN=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of zN(e))!bb.call(n,i)&&i!==t&&Zg(n,i,{get:()=>e[i],enumerable:!(r=jN(e,i))||r.enumerable});return n};var ZN=(n,e,t)=>(t=n!=null?BN(Eb(n)):{},WN(e||!n||!n.__esModule?Zg(t,"default",{value:n,enumerable:!0}):t,n));var yo=(n,e,t)=>qN(Eb(n),t,e);var b=(n,e,t)=>new Promise((r,i)=>{var o=d=>{try{c(t.next(d))}catch(f){i(f)}},a=d=>{try{c(t.throw(d))}catch(f){i(f)}},c=d=>d.done?r(d.value):Promise.resolve(d.value).then(o,a);c((t=t.apply(n,e)).next())});var eN=GN((Lg,XR)=>{"use strict";(function(n,e){typeof Lg=="object"&&typeof XR<"u"?e(Lg):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.leaflet={}))})(Lg,function(n){"use strict";var e="1.9.4";function t(s){var u,h,p,_;for(h=1,p=arguments.length;h<p;h++){_=arguments[h];for(u in _)s[u]=_[u]}return s}var r=Object.create||function(){function s(){}return function(u){return s.prototype=u,new s}}();function i(s,u){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(u,p.length?p.concat(h.call(arguments)):arguments)}}var o=0;function a(s){return"_leaflet_id"in s||(s._leaflet_id=++o),s._leaflet_id}function c(s,u,h){var p,_,w,S;return S=function(){p=!1,_&&(w.apply(h,_),_=!1)},w=function(){p?_=arguments:(s.apply(h,arguments),setTimeout(S,u),p=!0)},w}function d(s,u,h){var p=u[1],_=u[0],w=p-_;return s===p&&h?s:((s-_)%w+w)%w+_}function f(){return!1}function g(s,u){if(u===!1)return s;var h=Math.pow(10,u===void 0?6:u);return Math.round(s*h)/h}function y(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function E(s){return y(s).split(/\s+/)}function C(s,u){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?r(s.options):{});for(var h in u)s.options[h]=u[h];return s.options}function V(s,u,h){var p=[];for(var _ in s)p.push(encodeURIComponent(h?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!u||u.indexOf("?")===-1?"?":"&")+p.join("&")}var z=/\{ *([\w_ -]+) *\}/g;function $(s,u){return s.replace(z,function(h,p){var _=u[p];if(_===void 0)throw new Error("No value provided for variable "+h);return typeof _=="function"&&(_=_(u)),_})}var Z=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function ne(s,u){for(var h=0;h<s.length;h++)if(s[h]===u)return h;return-1}var se="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ce(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var st=0;function he(s){var u=+new Date,h=Math.max(0,16-(u-st));return st=u+h,window.setTimeout(s,h)}var P=window.requestAnimationFrame||ce("RequestAnimationFrame")||he,T=window.cancelAnimationFrame||ce("CancelAnimationFrame")||ce("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function D(s,u,h){if(h&&P===he)s.call(u);else return P.call(window,i(s,u))}function x(s){s&&T.call(window,s)}var R={__proto__:null,extend:t,create:r,bind:i,get lastId(){return o},stamp:a,throttle:c,wrapNum:d,falseFn:f,formatNum:g,trim:y,splitWords:E,setOptions:C,getParamString:V,template:$,isArray:Z,indexOf:ne,emptyImageUrl:se,requestFn:P,cancelFn:T,requestAnimFrame:D,cancelAnimFrame:x};function N(){}N.extend=function(s){var u=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=u.__super__=this.prototype,p=r(h);p.constructor=u,u.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(u[_]=this[_]);return s.statics&&t(u,s.statics),s.includes&&(A(s.includes),t.apply(null,[p].concat(s.includes))),t(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?r(h.options):{},t(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,S=p._initHooks.length;w<S;w++)p._initHooks[w].call(this)}},u},N.include=function(s){var u=this.prototype.options;return t(this.prototype,s),s.options&&(this.prototype.options=u,this.mergeOptions(s.options)),this},N.mergeOptions=function(s){return t(this.prototype.options,s),this},N.addInitHook=function(s){var u=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function A(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=Z(s)?s:[s];for(var u=0;u<s.length;u++)s[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Qe={on:function(s,u,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],u);else{s=E(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],u,h)}return this},off:function(s,u,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],u);else{s=E(s);for(var _=arguments.length===1,w=0,S=s.length;w<S;w++)_?this._off(s[w]):this._off(s[w],u,h)}return this},_on:function(s,u,h,p){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(s,u,h)===!1){h===this&&(h=void 0);var _={fn:u,ctx:h};p&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,u,h){var p,_,w;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,w=p.length;_<w;_++)p[_].fn=f;delete this._events[s];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var S=this._listens(s,u,h);if(S!==!1){var F=p[S];this._firingCount&&(F.fn=f,this._events[s]=p=p.slice()),p.splice(S,1)}}},fire:function(s,u,h){if(!this.listens(s,h))return this;var p=t({},u,{type:s,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var w=0,S=_.length;w<S;w++){var F=_[w],U=F.fn;F.once&&this.off(s,U,F.ctx),U.call(F.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,u,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var _=u;typeof u!="function"&&(p=!!u,_=void 0,h=void 0);var w=this._events&&this._events[s];if(w&&w.length&&this._listens(s,_,h)!==!1)return!0;if(p){for(var S in this._eventParents)if(this._eventParents[S].listens(s,u,h,p))return!0}return!1},_listens:function(s,u,h){if(!this._events)return!1;var p=this._events[s]||[];if(!u)return!!p.length;h===this&&(h=void 0);for(var _=0,w=p.length;_<w;_++)if(p[_].fn===u&&p[_].ctx===h)return _;return!1},once:function(s,u,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],u,!0);else{s=E(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],u,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[a(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[a(s)],this},_propagateEvent:function(s){for(var u in this._eventParents)this._eventParents[u].fire(s.type,t({layer:s.target,propagatedFrom:s.target},s),!0)}};Qe.addEventListener=Qe.on,Qe.removeEventListener=Qe.clearAllEventListeners=Qe.off,Qe.addOneTimeEventListener=Qe.once,Qe.fireEvent=Qe.fire,Qe.hasEventListeners=Qe.listens;var En=N.extend(Qe);function Te(s,u,h){this.x=h?Math.round(s):s,this.y=h?Math.round(u):u}var io=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Te.prototype={clone:function(){return new Te(this.x,this.y)},add:function(s){return this.clone()._add(de(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(de(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Te(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Te(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=io(this.x),this.y=io(this.y),this},distanceTo:function(s){s=de(s);var u=s.x-this.x,h=s.y-this.y;return Math.sqrt(u*u+h*h)},equals:function(s){return s=de(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=de(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function de(s,u,h){return s instanceof Te?s:Z(s)?new Te(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Te(s.x,s.y):new Te(s,u,h)}function ct(s,u){if(s)for(var h=u?[s,u]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}ct.prototype={extend:function(s){var u,h;if(!s)return this;if(s instanceof Te||typeof s[0]=="number"||"x"in s)u=h=de(s);else if(s=on(s),u=s.min,h=s.max,!u||!h)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=h.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return de((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return de(this.min.x,this.max.y)},getTopRight:function(){return de(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var u,h;return typeof s[0]=="number"||s instanceof Te?s=de(s):s=on(s),s instanceof ct?(u=s.min,h=s.max):u=h=s,u.x>=this.min.x&&h.x<=this.max.x&&u.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=on(s);var u=this.min,h=this.max,p=s.min,_=s.max,w=_.x>=u.x&&p.x<=h.x,S=_.y>=u.y&&p.y<=h.y;return w&&S},overlaps:function(s){s=on(s);var u=this.min,h=this.max,p=s.min,_=s.max,w=_.x>u.x&&p.x<h.x,S=_.y>u.y&&p.y<h.y;return w&&S},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var u=this.min,h=this.max,p=Math.abs(u.x-h.x)*s,_=Math.abs(u.y-h.y)*s;return on(de(u.x-p,u.y-_),de(h.x+p,h.y+_))},equals:function(s){return s?(s=on(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function on(s,u){return!s||s instanceof ct?s:new ct(s,u)}function ln(s,u){if(s)for(var h=u?[s,u]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}ln.prototype={extend:function(s){var u=this._southWest,h=this._northEast,p,_;if(s instanceof Ee)p=s,_=s;else if(s instanceof ln){if(p=s._southWest,_=s._northEast,!p||!_)return this}else return s?this.extend(Be(s)||nt(s)):this;return!u&&!h?(this._southWest=new Ee(p.lat,p.lng),this._northEast=new Ee(_.lat,_.lng)):(u.lat=Math.min(p.lat,u.lat),u.lng=Math.min(p.lng,u.lng),h.lat=Math.max(_.lat,h.lat),h.lng=Math.max(_.lng,h.lng)),this},pad:function(s){var u=this._southWest,h=this._northEast,p=Math.abs(u.lat-h.lat)*s,_=Math.abs(u.lng-h.lng)*s;return new ln(new Ee(u.lat-p,u.lng-_),new Ee(h.lat+p,h.lng+_))},getCenter:function(){return new Ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Ee||"lat"in s?s=Be(s):s=nt(s);var u=this._southWest,h=this._northEast,p,_;return s instanceof ln?(p=s.getSouthWest(),_=s.getNorthEast()):p=_=s,p.lat>=u.lat&&_.lat<=h.lat&&p.lng>=u.lng&&_.lng<=h.lng},intersects:function(s){s=nt(s);var u=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>=u.lat&&p.lat<=h.lat,S=_.lng>=u.lng&&p.lng<=h.lng;return w&&S},overlaps:function(s){s=nt(s);var u=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>u.lat&&p.lat<h.lat,S=_.lng>u.lng&&p.lng<h.lng;return w&&S},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,u){return s?(s=nt(s),this._southWest.equals(s.getSouthWest(),u)&&this._northEast.equals(s.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function nt(s,u){return s instanceof ln?s:new ln(s,u)}function Ee(s,u,h){if(isNaN(s)||isNaN(u))throw new Error("Invalid LatLng object: ("+s+", "+u+")");this.lat=+s,this.lng=+u,h!==void 0&&(this.alt=+h)}Ee.prototype={equals:function(s,u){if(!s)return!1;s=Be(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(u===void 0?1e-9:u)},toString:function(s){return"LatLng("+g(this.lat,s)+", "+g(this.lng,s)+")"},distanceTo:function(s){return Fr.distance(this,Be(s))},wrap:function(){return Fr.wrapLatLng(this)},toBounds:function(s){var u=180*s/40075017,h=u/Math.cos(Math.PI/180*this.lat);return nt([this.lat-u,this.lng-h],[this.lat+u,this.lng+h])},clone:function(){return new Ee(this.lat,this.lng,this.alt)}};function Be(s,u,h){return s instanceof Ee?s:Z(s)&&typeof s[0]!="object"?s.length===3?new Ee(s[0],s[1],s[2]):s.length===2?new Ee(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Ee(s.lat,"lng"in s?s.lng:s.lon,s.alt):u===void 0?null:new Ee(s,u,h)}var bn={latLngToPoint:function(s,u){var h=this.projection.project(s),p=this.scale(u);return this.transformation._transform(h,p)},pointToLatLng:function(s,u){var h=this.scale(u),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var u=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(u.min,h),_=this.transformation.transform(u.max,h);return new ct(p,_)},infinite:!1,wrapLatLng:function(s){var u=this.wrapLng?d(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?d(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Ee(h,u,p)},wrapLatLngBounds:function(s){var u=s.getCenter(),h=this.wrapLatLng(u),p=u.lat-h.lat,_=u.lng-h.lng;if(p===0&&_===0)return s;var w=s.getSouthWest(),S=s.getNorthEast(),F=new Ee(w.lat-p,w.lng-_),U=new Ee(S.lat-p,S.lng-_);return new ln(F,U)}},Fr=t({},bn,{wrapLng:[-180,180],R:6371e3,distance:function(s,u){var h=Math.PI/180,p=s.lat*h,_=u.lat*h,w=Math.sin((u.lat-s.lat)*h/2),S=Math.sin((u.lng-s.lng)*h/2),F=w*w+Math.cos(p)*Math.cos(_)*S*S,U=2*Math.atan2(Math.sqrt(F),Math.sqrt(1-F));return this.R*U}}),oo=6378137,Nc={R:oo,MAX_LATITUDE:85.0511287798,project:function(s){var u=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),_=Math.sin(p*u);return new Te(this.R*s.lng*u,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var u=180/Math.PI;return new Ee((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*u,s.x*u/this.R)},bounds:function(){var s=oo*Math.PI;return new ct([-s,-s],[s,s])}()};function kc(s,u,h,p){if(Z(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=u,this._c=h,this._d=p}kc.prototype={transform:function(s,u){return this._transform(s.clone(),u)},_transform:function(s,u){return u=u||1,s.x=u*(this._a*s.x+this._b),s.y=u*(this._c*s.y+this._d),s},untransform:function(s,u){return u=u||1,new Te((s.x/u-this._b)/this._a,(s.y/u-this._d)/this._c)}};function Vr(s,u,h,p){return new kc(s,u,h,p)}var so=t({},Fr,{code:"EPSG:3857",projection:Nc,transformation:function(){var s=.5/(Math.PI*Nc.R);return Vr(s,.5,-s,.5)}()}),Oc=t({},so,{code:"EPSG:900913"});function ya(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function wa(s,u){var h="",p,_,w,S,F,U;for(p=0,w=s.length;p<w;p++){for(F=s[p],_=0,S=F.length;_<S;_++)U=F[_],h+=(_?"L":"M")+U.x+" "+U.y;h+=u?re.svg?"z":"x":""}return h||"M0 0"}var us=document.documentElement.style,cs="ActiveXObject"in window,eh=cs&&!document.addEventListener,th="msLaunchUri"in navigator&&!("documentMode"in document),Ia=Bn("webkit"),Lc=Bn("android"),Ea=Bn("android 2")||Bn("android 3"),nh=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Bg=Lc&&Bn("Google")&&nh<537&&!("AudioNode"in window),ls=!!window.opera,ba=!th&&Bn("chrome"),Ca=Bn("gecko")&&!Ia&&!ls&&!cs,Zt=!ba&&Bn("safari"),Kt=Bn("phantom"),ds="OTransition"in us,rh=navigator.platform.indexOf("Win")===0,Fc=cs&&"transition"in us,Vc="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ea,ao="MozPerspective"in us,ih=!window.L_DISABLE_3D&&(Fc||Vc||ao)&&!ds&&!Kt,uo=typeof orientation<"u"||Bn("mobile"),Bc=uo&&Ia,Ug=uo&&Vc,oh=!window.PointerEvent&&window.MSPointerEvent,Ta=!!(window.PointerEvent||oh),Uc="ontouchstart"in window||!!window.TouchEvent,sh=!window.L_NO_TOUCH&&(Uc||Ta),hs=uo&&ls,jc=uo&&Ca,$c=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ei=function(){var s=!1;try{var u=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",f,u),window.removeEventListener("testPassiveEventSupport",f,u)}catch{}return s}(),ah=function(){return!!document.createElement("canvas").getContext}(),co=!!(document.createElementNS&&ya("svg").createSVGRect),uh=!!co&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),fs=!co&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var u=s.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),ch=navigator.platform.indexOf("Mac")===0,sn=navigator.platform.indexOf("Linux")===0;function Bn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var re={ie:cs,ielt9:eh,edge:th,webkit:Ia,android:Lc,android23:Ea,androidStock:Bg,opera:ls,chrome:ba,gecko:Ca,safari:Zt,phantom:Kt,opera12:ds,win:rh,ie3d:Fc,webkit3d:Vc,gecko3d:ao,any3d:ih,mobile:uo,mobileWebkit:Bc,mobileWebkit3d:Ug,msPointer:oh,pointer:Ta,touch:sh,touchNative:Uc,mobileOpera:hs,mobileGecko:jc,retina:$c,passiveEvents:Ei,canvas:ah,svg:co,vml:fs,inlineSvg:uh,mac:ch,linux:sn},lo=re.msPointer?"MSPointerDown":"pointerdown",lh=re.msPointer?"MSPointerMove":"pointermove",dh=re.msPointer?"MSPointerUp":"pointerup",bi=re.msPointer?"MSPointerCancel":"pointercancel",zc={touchstart:lo,touchmove:lh,touchend:dh,touchcancel:bi},hh={touchstart:ph,touchmove:ho,touchend:ho,touchcancel:ho},yr={},Hc=!1;function qc(s,u,h){return u==="touchstart"&&Wc(),hh[u]?(h=hh[u].bind(this,h),s.addEventListener(zc[u],h,!1),h):(console.warn("wrong event specified:",u),f)}function Da(s,u,h){if(!zc[u]){console.warn("wrong event specified:",u);return}s.removeEventListener(zc[u],h,!1)}function Br(s){yr[s.pointerId]=s}function fh(s){yr[s.pointerId]&&(yr[s.pointerId]=s)}function Gc(s){delete yr[s.pointerId]}function Wc(){Hc||(document.addEventListener(lo,Br,!0),document.addEventListener(lh,fh,!0),document.addEventListener(dh,Gc,!0),document.addEventListener(bi,Gc,!0),Hc=!0)}function ho(s,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var h in yr)u.touches.push(yr[h]);u.changedTouches=[u],s(u)}}function ph(s,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&bt(u),ho(s,u)}function mh(s){var u={},h,p;for(p in s)h=s[p],u[p]=h&&h.bind?h.bind(s):h;return s=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var jg=200;function Sa(s,u){s.addEventListener("dblclick",u);var h=0,p;function _(w){if(w.detail!==1){p=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var S=nl(w);if(!(S.some(function(U){return U instanceof HTMLLabelElement&&U.attributes.for})&&!S.some(function(U){return U instanceof HTMLInputElement||U instanceof HTMLSelectElement}))){var F=Date.now();F-h<=jg?(p++,p===2&&u(mh(w))):p=1,h=F}}}return s.addEventListener("click",_),{dblclick:u,simDblclick:_}}function gh(s,u){s.removeEventListener("dblclick",u.dblclick),s.removeEventListener("click",u.simDblclick)}var ps=tr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),wr=tr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ur=wr==="webkitTransition"||wr==="OTransition"?wr+"End":"transitionend";function Aa(s){return typeof s=="string"?document.getElementById(s):s}function ms(s,u){var h=s.style[u]||s.currentStyle&&s.currentStyle[u];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[u]:null}return h==="auto"?null:h}function qe(s,u,h){var p=document.createElement(s);return p.className=u||"",h&&h.appendChild(p),p}function ft(s){var u=s.parentNode;u&&u.removeChild(s)}function gs(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function jr(s){var u=s.parentNode;u&&u.lastChild!==s&&u.appendChild(s)}function $r(s){var u=s.parentNode;u&&u.firstChild!==s&&u.insertBefore(s,u.firstChild)}function xa(s,u){if(s.classList!==void 0)return s.classList.contains(u);var h=_s(s);return h.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(h)}function Se(s,u){if(s.classList!==void 0)for(var h=E(u),p=0,_=h.length;p<_;p++)s.classList.add(h[p]);else if(!xa(s,u)){var w=_s(s);Zc(s,(w?w+" ":"")+u)}}function Et(s,u){s.classList!==void 0?s.classList.remove(u):Zc(s,y((" "+_s(s)+" ").replace(" "+u+" "," ")))}function Zc(s,u){s.className.baseVal===void 0?s.className=u:s.className.baseVal=u}function _s(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Cn(s,u){"opacity"in s.style?s.style.opacity=u:"filter"in s.style&&$g(s,u)}function $g(s,u){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(u===1)return}u=Math.round(u*100),h?(h.Enabled=u!==100,h.Opacity=u):s.style.filter+=" progid:"+p+"(opacity="+u+")"}function tr(s){for(var u=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in u)return s[h];return!1}function an(s,u,h){var p=u||new Te(0,0);s.style[ps]=(re.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function mt(s,u){s._leaflet_pos=u,re.any3d?an(s,u):(s.style.left=u.x+"px",s.style.top=u.y+"px")}function nr(s){return s._leaflet_pos||new Te(0,0)}var fo,Xe,po;if("onselectstart"in document)fo=function(){be(window,"selectstart",bt)},Xe=function(){rt(window,"selectstart",bt)};else{var Ir=tr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);fo=function(){if(Ir){var s=document.documentElement.style;po=s[Ir],s[Ir]="none"}},Xe=function(){Ir&&(document.documentElement.style[Ir]=po,po=void 0)}}function Ci(){be(window,"dragstart",bt)}function Kc(){rt(window,"dragstart",bt)}var vs,Qc;function Yc(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Ma(),vs=s,Qc=s.style.outlineStyle,s.style.outlineStyle="none",be(window,"keydown",Ma))}function Ma(){vs&&(vs.style.outlineStyle=Qc,vs=void 0,Qc=void 0,rt(window,"keydown",Ma))}function _h(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Ti(s){var u=s.getBoundingClientRect();return{x:u.width/s.offsetWidth||1,y:u.height/s.offsetHeight||1,boundingClientRect:u}}var zr={__proto__:null,TRANSFORM:ps,TRANSITION:wr,TRANSITION_END:Ur,get:Aa,getStyle:ms,create:qe,remove:ft,empty:gs,toFront:jr,toBack:$r,hasClass:xa,addClass:Se,removeClass:Et,setClass:Zc,getClass:_s,setOpacity:Cn,testProp:tr,setTransform:an,setPosition:mt,getPosition:nr,get disableTextSelection(){return fo},get enableTextSelection(){return Xe},disableImageDrag:Ci,enableImageDrag:Kc,preventOutline:Yc,restoreOutline:Ma,getSizedParentNode:_h,getScale:Ti};function be(s,u,h,p){if(u&&typeof u=="object")for(var _ in u)Xc(s,_,u[_],h);else{u=E(u);for(var w=0,S=u.length;w<S;w++)Xc(s,u[w],h,p)}return this}var Un="_leaflet_events";function rt(s,u,h,p){if(arguments.length===1)Di(s),delete s[Un];else if(u&&typeof u=="object")for(var _ in u)el(s,_,u[_],h);else if(u=E(u),arguments.length===2)Di(s,function(F){return ne(u,F)!==-1});else for(var w=0,S=u.length;w<S;w++)el(s,u[w],h,p);return this}function Di(s,u){for(var h in s[Un]){var p=h.split(/\d/)[0];(!u||u(p))&&el(s,p,null,null,h)}}var Jc={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Xc(s,u,h,p){var _=u+a(h)+(p?"_"+a(p):"");if(s[Un]&&s[Un][_])return this;var w=function(F){return h.call(p||s,F||window.event)},S=w;!re.touchNative&&re.pointer&&u.indexOf("touch")===0?w=qc(s,u,w):re.touch&&u==="dblclick"?w=Sa(s,w):"addEventListener"in s?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?s.addEventListener(Jc[u]||u,w,re.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(w=function(F){F=F||window.event,Is(s,F)&&S(F)},s.addEventListener(Jc[u],w,!1)):s.addEventListener(u,S,!1):s.attachEvent("on"+u,w),s[Un]=s[Un]||{},s[Un][_]=w}function el(s,u,h,p,_){_=_||u+a(h)+(p?"_"+a(p):"");var w=s[Un]&&s[Un][_];if(!w)return this;!re.touchNative&&re.pointer&&u.indexOf("touch")===0?Da(s,u,w):re.touch&&u==="dblclick"?gh(s,w):"removeEventListener"in s?s.removeEventListener(Jc[u]||u,w,!1):s.detachEvent("on"+u,w),s[Un][_]=null}function dn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function tl(s){return Xc(s,"wheel",dn),this}function ys(s){return be(s,"mousedown touchstart dblclick contextmenu",dn),s._leaflet_disable_click=!0,this}function bt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function rr(s){return bt(s),dn(s),this}function nl(s){if(s.composedPath)return s.composedPath();for(var u=[],h=s.target;h;)u.push(h),h=h.parentNode;return u}function mo(s,u){if(!u)return new Te(s.clientX,s.clientY);var h=Ti(u),p=h.boundingClientRect;return new Te((s.clientX-p.left)/h.x-u.clientLeft,(s.clientY-p.top)/h.y-u.clientTop)}var ws=re.linux&&re.chrome?window.devicePixelRatio:re.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function rl(s){return re.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/ws:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Is(s,u){var h=u.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var _t={__proto__:null,on:be,off:rt,stopPropagation:dn,disableScrollPropagation:tl,disableClickPropagation:ys,preventDefault:bt,stop:rr,getPropagationPath:nl,getMousePosition:mo,getWheelDelta:rl,isExternalTarget:Is,addListener:be,removeListener:rt},vh=En.extend({run:function(s,u,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=nr(s),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(s){var u=+new Date-this._startTime,h=this._duration*1e3;u<h?this._runFrame(this._easeOut(u/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,u){var h=this._startPos.add(this._offset.multiplyBy(s));u&&h._round(),mt(this._el,h),this.fire("step")},_complete:function(){x(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ue=En.extend({options:{crs:so,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,u){u=C(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(Be(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=wr&&re.any3d&&!re.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),be(this._proxy,Ur,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,u,h){if(u=u===void 0?this._zoom:this._limitZoom(u),s=this._limitCenter(Be(s),u,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=t({animate:h.animate},h.zoom),h.pan=t({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,u,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,u,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,u){return this._loaded?this.setView(this.getCenter(),s,{zoom:u}):(this._zoom=s,this)},zoomIn:function(s,u){return s=s||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,u)},zoomOut:function(s,u){return s=s||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,u)},setZoomAround:function(s,u,h){var p=this.getZoomScale(u),_=this.getSize().divideBy(2),w=s instanceof Te?s:this.latLngToContainerPoint(s),S=w.subtract(_).multiplyBy(1-1/p),F=this.containerPointToLatLng(_.add(S));return this.setView(F,u,{zoom:h})},_getBoundsCenterZoom:function(s,u){u=u||{},s=s.getBounds?s.getBounds():nt(s);var h=de(u.paddingTopLeft||u.padding||[0,0]),p=de(u.paddingBottomRight||u.padding||[0,0]),_=this.getBoundsZoom(s,!1,h.add(p));if(_=typeof u.maxZoom=="number"?Math.min(u.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var w=p.subtract(h).divideBy(2),S=this.project(s.getSouthWest(),_),F=this.project(s.getNorthEast(),_),U=this.unproject(S.add(F).divideBy(2).add(w),_);return{center:U,zoom:_}},fitBounds:function(s,u){if(s=nt(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,u);return this.setView(h.center,h.zoom,u)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,u){return this.setView(s,this._zoom,{pan:u})},panBy:function(s,u){if(s=de(s).round(),u=u||{},!s.x&&!s.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new vh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){Se(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,u.duration||.25,u.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,u,h){if(h=h||{},h.animate===!1||!re.any3d)return this.setView(s,u,h);this._stop();var p=this.project(this.getCenter()),_=this.project(s),w=this.getSize(),S=this._zoom;s=Be(s),u=u===void 0?S:u;var F=Math.max(w.x,w.y),U=F*this.getZoomScale(S,u),G=_.distanceTo(p)||1,X=1.42,fe=X*X;function Fe(Ft){var Lh=Ft?-1:1,ON=Ft?U:F,LN=U*U-F*F+Lh*fe*fe*G*G,FN=2*ON*fe*G,Wg=LN/FN,yb=Math.sqrt(Wg*Wg+1)-Wg,VN=yb<1e-9?-18:Math.log(yb);return VN}function Dn(Ft){return(Math.exp(Ft)-Math.exp(-Ft))/2}function Yt(Ft){return(Math.exp(Ft)+Math.exp(-Ft))/2}function ir(Ft){return Dn(Ft)/Yt(Ft)}var Nn=Fe(0);function $a(Ft){return F*(Yt(Nn)/Yt(Nn+X*Ft))}function PN(Ft){return F*(Yt(Nn)*ir(Nn+X*Ft)-Dn(Nn))/fe}function RN(Ft){return 1-Math.pow(1-Ft,1.5)}var NN=Date.now(),_b=(Fe(1)-Nn)/X,kN=h.duration?1e3*h.duration:1e3*_b*.8;function vb(){var Ft=(Date.now()-NN)/kN,Lh=RN(Ft)*_b;Ft<=1?(this._flyToFrame=D(vb,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(PN(Lh)/G)),S),this.getScaleZoom(F/$a(Lh),S),{flyTo:!0})):this._move(s,u)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),vb.call(this),this},flyToBounds:function(s,u){var h=this._getBoundsCenterZoom(s,u);return this.flyTo(h.center,h.zoom,u)},setMaxBounds:function(s){return s=nt(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var u=this.options.minZoom;return this.options.minZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var u=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,u){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,nt(s));return h.equals(p)||this.panTo(p,u),this._enforcingBounds=!1,this},panInside:function(s,u){u=u||{};var h=de(u.paddingTopLeft||u.padding||[0,0]),p=de(u.paddingBottomRight||u.padding||[0,0]),_=this.project(this.getCenter()),w=this.project(s),S=this.getPixelBounds(),F=on([S.min.add(h),S.max.subtract(p)]),U=F.getSize();if(!F.contains(w)){this._enforcingBounds=!0;var G=w.subtract(F.getCenter()),X=F.extend(w).getSize().subtract(U);_.x+=G.x<0?-X.x:X.x,_.y+=G.y<0?-X.y:X.y,this.panTo(this.unproject(_),u),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=t({animate:!1,pan:!0},s===!0?{animate:!0}:s);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=u.divideBy(2).round(),_=h.divideBy(2).round(),w=p.subtract(_);return!w.x&&!w.y?this:(s.animate&&s.pan?this.panBy(w):(s.pan&&this._rawPanBy(w),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=t({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=i(this._handleGeolocationResponse,this),h=i(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,h,s):navigator.geolocation.getCurrentPosition(u,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var u=s.code,h=s.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var u=s.coords.latitude,h=s.coords.longitude,p=new Ee(u,h),_=p.toBounds(s.coords.accuracy*2),w=this._locateOptions;if(w.setView){var S=this.getBoundsZoom(_);this.setView(p,w.maxZoom?Math.min(S,w.maxZoom):S)}var F={latlng:p,bounds:_,timestamp:s.timestamp};for(var U in s.coords)typeof s.coords[U]=="number"&&(F[U]=s.coords[U]);this.fire("locationfound",F)}},addHandler:function(s,u){if(!u)return this;var h=this[s]=new u(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ft(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(x(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)ft(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,u){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=qe("div",h,u||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),u=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new ln(u,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,u,h){s=nt(s),h=de(h||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),w=this.getMaxZoom(),S=s.getNorthWest(),F=s.getSouthEast(),U=this.getSize().subtract(h),G=on(this.project(F,p),this.project(S,p)).getSize(),X=re.any3d?this.options.zoomSnap:1,fe=U.x/G.x,Fe=U.y/G.y,Dn=u?Math.max(fe,Fe):Math.min(fe,Fe);return p=this.getScaleZoom(Dn,p),X&&(p=Math.round(p/(X/100))*(X/100),p=u?Math.ceil(p/X)*X:Math.floor(p/X)*X),Math.max(_,Math.min(w,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Te(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,u){var h=this._getTopLeftPoint(s,u);return new ct(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,u){var h=this.options.crs;return u=u===void 0?this._zoom:u,h.scale(s)/h.scale(u)},getScaleZoom:function(s,u){var h=this.options.crs;u=u===void 0?this._zoom:u;var p=h.zoom(s*h.scale(u));return isNaN(p)?1/0:p},project:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(Be(s),u)},unproject:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(de(s),u)},layerPointToLatLng:function(s){var u=de(s).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(s){var u=this.project(Be(s))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(Be(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(nt(s))},distance:function(s,u){return this.options.crs.distance(Be(s),Be(u))},containerPointToLayerPoint:function(s){return de(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return de(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var u=this.containerPointToLayerPoint(de(s));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Be(s)))},mouseEventToContainerPoint:function(s){return mo(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var u=this._container=Aa(s);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");be(u,"scroll",this._onScroll,this),this._containerId=a(u)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&re.any3d,Se(s,"leaflet-container"+(re.touch?" leaflet-touch":"")+(re.retina?" leaflet-retina":"")+(re.ielt9?" leaflet-oldie":"")+(re.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=ms(s,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),mt(this._mapPane,new Te(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Se(s.markerPane,"leaflet-zoom-hide"),Se(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,u,h){mt(this._mapPane,new Te(0,0));var p=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var _=this._zoom!==u;this._moveStart(_,h)._move(s,u)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,u){return s&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(s,u,h,p){u===void 0&&(u=this._zoom);var _=this._zoom!==u;return this._zoom=u,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((_||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return x(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){mt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[a(this._container)]=this;var u=s?rt:be;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),re.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){x(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,u){for(var h=[],p,_=u==="mouseout"||u==="mouseover",w=s.target||s.srcElement,S=!1;w;){if(p=this._targets[a(w)],p&&(u==="click"||u==="preclick")&&this._draggableMoved(p)){S=!0;break}if(p&&p.listens(u,!0)&&(_&&!Is(w,s)||(h.push(p),_))||w===this._container)break;w=w.parentNode}return!h.length&&!S&&!_&&this.listens(u,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var u=s.target||s.srcElement;if(!(!this._loaded||u._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(u))){var h=s.type;h==="mousedown"&&Yc(u),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,u,h){if(s.type==="click"){var p=t({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var _=this._findEventTargets(s,u);if(h){for(var w=[],S=0;S<h.length;S++)h[S].listens(u,!0)&&w.push(h[S]);_=w.concat(_)}if(_.length){u==="contextmenu"&&bt(s);var F=_[0],U={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var G=F.getLatLng&&(!F._radius||F._radius<=10);U.containerPoint=G?this.latLngToContainerPoint(F.getLatLng()):this.mouseEventToContainerPoint(s),U.layerPoint=this.containerPointToLayerPoint(U.containerPoint),U.latlng=G?F.getLatLng():this.layerPointToLatLng(U.layerPoint)}for(S=0;S<_.length;S++)if(_[S].fire(u,U,!0),U.originalEvent._stopped||_[S].options.bubblingMouseEvents===!1&&ne(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,u=this._handlers.length;s<u;s++)this._handlers[s].disable()},whenReady:function(s,u){return this._loaded?s.call(u||this,{target:this}):this.on("load",s,u),this},_getMapPanePos:function(){return nr(this._mapPane)||new Te(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,u){var h=s&&u!==void 0?this._getNewPixelOrigin(s,u):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,u){var h=this.getSize()._divideBy(2);return this.project(s,u)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,u,h){var p=this._getNewPixelOrigin(h,u);return this.project(s,u)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,u,h){var p=this._getNewPixelOrigin(h,u);return on([this.project(s.getSouthWest(),u)._subtract(p),this.project(s.getNorthWest(),u)._subtract(p),this.project(s.getSouthEast(),u)._subtract(p),this.project(s.getNorthEast(),u)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,u,h){if(!h)return s;var p=this.project(s,u),_=this.getSize().divideBy(2),w=new ct(p.subtract(_),p.add(_)),S=this._getBoundsOffset(w,h,u);return Math.abs(S.x)<=1&&Math.abs(S.y)<=1?s:this.unproject(p.add(S),u)},_limitOffset:function(s,u){if(!u)return s;var h=this.getPixelBounds(),p=new ct(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,u))},_getBoundsOffset:function(s,u,h){var p=on(this.project(u.getNorthEast(),h),this.project(u.getSouthWest(),h)),_=p.min.subtract(s.min),w=p.max.subtract(s.max),S=this._rebound(_.x,-w.x),F=this._rebound(_.y,-w.y);return new Te(S,F)},_rebound:function(s,u){return s+u>0?Math.round(s-u)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(u))},_limitZoom:function(s){var u=this.getMinZoom(),h=this.getMaxZoom(),p=re.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(u,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Et(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,u){var h=this._getCenterOffset(s)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,u),!0)},_createAnimProxy:function(){var s=this._proxy=qe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(u){var h=ps,p=this._proxy.style[h];an(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ft(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),u=this.getZoom();an(this._proxy,this.project(s,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,u,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(u),_=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(_)?!1:(D(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,u,!0)},this),!0)},_animateZoom:function(s,u,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=u,Se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:u,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Et(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function yh(s,u){return new Ue(s,u)}var Rn=N.extend({options:{position:"topright"},initialize:function(s){C(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var u=this._map;return u&&u.removeControl(this),this.options.position=s,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var u=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return Se(u,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ft(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),go=function(s){return new Rn(s)};Ue.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},u="leaflet-",h=this._controlContainer=qe("div",u+"control-container",this._container);function p(_,w){var S=u+_+" "+u+w;s[_+w]=qe("div",S,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)ft(this._controlCorners[s]);ft(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Es=Rn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,u,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,u,h){C(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in u)this._addLayer(u[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Rn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,u){return this._addLayer(s,u),this._map?this._update():this},addOverlay:function(s,u){return this._addLayer(s,u,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var u=this._getLayer(a(s));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){Se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Et(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Et(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",u=this._container=qe("div",s),h=this.options.collapsed;u.setAttribute("aria-haspopup",!0),ys(u),tl(u);var p=this._section=qe("section",s+"-list");h&&(this._map.on("click",this.collapse,this),be(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=qe("a",s+"-toggle",u);_.href="#",_.title="Layers",_.setAttribute("role","button"),be(_,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){bt(w),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=qe("div",s+"-base",p),this._separator=qe("div",s+"-separator",p),this._overlaysList=qe("div",s+"-overlays",p),u.appendChild(p)},_getLayer:function(s){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&a(this._layers[u].layer)===s)return this._layers[u]},_addLayer:function(s,u,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:u,overlay:h}),this.options.sortLayers&&this._layers.sort(i(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;gs(this._baseLayersList),gs(this._overlaysList),this._layerControlInputs=[];var s,u,h,p,_=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),u=u||p.overlay,s=s||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=u&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var u=this._getLayer(a(s.target)),h=u.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,u)},_createRadioElement:function(s,u){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(u?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var u=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+a(this),h),this._layerControlInputs.push(p),p.layerId=a(s.layer),be(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var w=document.createElement("span");u.appendChild(w),w.appendChild(p),w.appendChild(_);var S=s.overlay?this._overlaysList:this._baseLayersList;return S.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,u,h,p=[],_=[];this._handlingClick=!0;for(var w=s.length-1;w>=0;w--)u=s[w],h=this._getLayer(u.layerId).layer,u.checked?p.push(h):u.checked||_.push(h);for(w=0;w<_.length;w++)this._map.hasLayer(_[w])&&this._map.removeLayer(_[w]);for(w=0;w<p.length;w++)this._map.hasLayer(p[w])||this._map.addLayer(p[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,u,h,p=this._map.getZoom(),_=s.length-1;_>=0;_--)u=s[_],h=this._getLayer(u.layerId).layer,u.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,be(s,"click",bt),this.expand();var u=this;setTimeout(function(){rt(s,"click",bt),u._preventClick=!1})}}),wh=function(s,u,h){return new Es(s,u,h)},jn=Rn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var u="leaflet-control-zoom",h=qe("div",u+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,u+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,u+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,u,h,p,_){var w=qe("a",h,p);return w.innerHTML=s,w.href="#",w.title=u,w.setAttribute("role","button"),w.setAttribute("aria-label",u),ys(w),be(w,"click",rr),be(w,"click",_,this),be(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var s=this._map,u="leaflet-disabled";Et(this._zoomInButton,u),Et(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Se(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Se(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ue.mergeOptions({zoomControl:!0}),Ue.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new jn,this.addControl(this.zoomControl))});var Ih=function(s){return new jn(s)},Eh=Rn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var u="leaflet-control-scale",h=qe("div",u),p=this.options;return this._addScales(p,u+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,u,h){s.metric&&(this._mScale=qe("div",u,h)),s.imperial&&(this._iScale=qe("div",u,h))},_update:function(){var s=this._map,u=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,u]),s.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var u=this._getRoundNum(s),h=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,h,u/s)},_updateImperial:function(s){var u=s*3.2808399,h,p,_;u>5280?(h=u/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(_=this._getRoundNum(u),this._updateScale(this._iScale,_+" ft",_/u))},_updateScale:function(s,u,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=u},_getRoundNum:function(s){var u=Math.pow(10,(Math.floor(s)+"").length-1),h=s/u;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,u*h}}),bs=function(s){return new Eh(s)},bh='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Cs=Rn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(re.inlineSvg?bh+" ":"")+"Leaflet</a>"},initialize:function(s){C(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=qe("div","leaflet-control-attribution"),ys(this._container);for(var u in s._layers)s._layers[u].getAttribution&&this.addAttribution(s._layers[u].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var u in this._attributions)this._attributions[u]&&s.push(u);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Ue.mergeOptions({attributionControl:!0}),Ue.addInitHook(function(){this.options.attributionControl&&new Cs().addTo(this)});var Pa=function(s){return new Cs(s)};Rn.Layers=Es,Rn.Zoom=jn,Rn.Scale=Eh,Rn.Attribution=Cs,go.layers=wh,go.zoom=Ih,go.scale=bs,go.attribution=Pa;var $n=N.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});$n.addTo=function(s,u){return s.addHandler(u,this),this};var Ra={Events:Qe},Ch=re.touch?"touchstart mousedown":"mousedown",Er=En.extend({options:{clickTolerance:3},initialize:function(s,u,h,p){C(this,p),this._element=s,this._dragStartTarget=u||s,this._preventOutline=h},enable:function(){this._enabled||(be(this._dragStartTarget,Ch,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Er._dragging===this&&this.finishDrag(!0),rt(this._dragStartTarget,Ch,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!xa(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Er._dragging===this&&this.finishDrag();return}if(!(Er._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Er._dragging=this,this._preventOutline&&Yc(this._element),Ci(),fo(),!this._moving)){this.fire("down");var u=s.touches?s.touches[0]:s,h=_h(this._element);this._startPoint=new Te(u.clientX,u.clientY),this._startPos=nr(this._element),this._parentScale=Ti(h);var p=s.type==="mousedown";be(document,p?"mousemove":"touchmove",this._onMove,this),be(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var u=s.touches&&s.touches.length===1?s.touches[0]:s,h=new Te(u.clientX,u.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,bt(s),this._moved||(this.fire("dragstart"),this._moved=!0,Se(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),mt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Et(document.body,"leaflet-dragging"),this._lastTarget&&(Et(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),rt(document,"mousemove touchmove",this._onMove,this),rt(document,"mouseup touchend touchcancel",this._onUp,this),Kc(),Xe();var u=this._moved&&this._moving;this._moving=!1,Er._dragging=!1,u&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function _o(s,u,h){var p,_=[1,4,2,8],w,S,F,U,G,X,fe,Fe;for(w=0,X=s.length;w<X;w++)s[w]._code=Hr(s[w],u);for(F=0;F<4;F++){for(fe=_[F],p=[],w=0,X=s.length,S=X-1;w<X;S=w++)U=s[w],G=s[S],U._code&fe?G._code&fe||(Fe=Ts(G,U,fe,u,h),Fe._code=Hr(Fe,u),p.push(Fe)):(G._code&fe&&(Fe=Ts(G,U,fe,u,h),Fe._code=Hr(Fe,u),p.push(Fe)),p.push(U));s=p}return s}function il(s,u){var h,p,_,w,S,F,U,G,X;if(!s||s.length===0)throw new Error("latlngs not passed");Tn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var fe=Be([0,0]),Fe=nt(s),Dn=Fe.getNorthWest().distanceTo(Fe.getSouthWest())*Fe.getNorthEast().distanceTo(Fe.getNorthWest());Dn<1700&&(fe=Na(s));var Yt=s.length,ir=[];for(h=0;h<Yt;h++){var Nn=Be(s[h]);ir.push(u.project(Be([Nn.lat-fe.lat,Nn.lng-fe.lng])))}for(F=U=G=0,h=0,p=Yt-1;h<Yt;p=h++)_=ir[h],w=ir[p],S=_.y*w.x-w.y*_.x,U+=(_.x+w.x)*S,G+=(_.y+w.y)*S,F+=S*3;F===0?X=ir[0]:X=[U/F,G/F];var $a=u.unproject(de(X));return Be([$a.lat+fe.lat,$a.lng+fe.lng])}function Na(s){for(var u=0,h=0,p=0,_=0;_<s.length;_++){var w=Be(s[_]);u+=w.lat,h+=w.lng,p++}return Be([u/p,h/p])}var ol={__proto__:null,clipPolygon:_o,polygonCenter:il,centroid:Na};function ka(s,u){if(!u||!s.length)return s.slice();var h=u*u;return s=Si(s,h),s=Th(s,h),s}function sl(s,u,h){return Math.sqrt(Ht(s,u,h,!0))}function Oa(s,u,h){return Ht(s,u,h)}function Th(s,u){var h=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(h);_[0]=_[h-1]=1,La(s,_,u,0,h-1);var w,S=[];for(w=0;w<h;w++)_[w]&&S.push(s[w]);return S}function La(s,u,h,p,_){var w=0,S,F,U;for(F=p+1;F<=_-1;F++)U=Ht(s[F],s[p],s[_],!0),U>w&&(S=F,w=U);w>h&&(u[S]=1,La(s,u,h,p,S),La(s,u,h,S,_))}function Si(s,u){for(var h=[s[0]],p=1,_=0,w=s.length;p<w;p++)Fa(s[p],s[_])>u&&(h.push(s[p]),_=p);return _<w-1&&h.push(s[w-1]),h}var al;function ul(s,u,h,p,_){var w=p?al:Hr(s,h),S=Hr(u,h),F,U,G;for(al=S;;){if(!(w|S))return[s,u];if(w&S)return!1;F=w||S,U=Ts(s,u,F,h,_),G=Hr(U,h),F===w?(s=U,w=G):(u=U,S=G)}}function Ts(s,u,h,p,_){var w=u.x-s.x,S=u.y-s.y,F=p.min,U=p.max,G,X;return h&8?(G=s.x+w*(U.y-s.y)/S,X=U.y):h&4?(G=s.x+w*(F.y-s.y)/S,X=F.y):h&2?(G=U.x,X=s.y+S*(U.x-s.x)/w):h&1&&(G=F.x,X=s.y+S*(F.x-s.x)/w),new Te(G,X,_)}function Hr(s,u){var h=0;return s.x<u.min.x?h|=1:s.x>u.max.x&&(h|=2),s.y<u.min.y?h|=4:s.y>u.max.y&&(h|=8),h}function Fa(s,u){var h=u.x-s.x,p=u.y-s.y;return h*h+p*p}function Ht(s,u,h,p){var _=u.x,w=u.y,S=h.x-_,F=h.y-w,U=S*S+F*F,G;return U>0&&(G=((s.x-_)*S+(s.y-w)*F)/U,G>1?(_=h.x,w=h.y):G>0&&(_+=S*G,w+=F*G)),S=s.x-_,F=s.y-w,p?S*S+F*F:new Te(_,w)}function Tn(s){return!Z(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function cl(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Tn(s)}function Ai(s,u){var h,p,_,w,S,F,U,G;if(!s||s.length===0)throw new Error("latlngs not passed");Tn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var X=Be([0,0]),fe=nt(s),Fe=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());Fe<1700&&(X=Na(s));var Dn=s.length,Yt=[];for(h=0;h<Dn;h++){var ir=Be(s[h]);Yt.push(u.project(Be([ir.lat-X.lat,ir.lng-X.lng])))}for(h=0,p=0;h<Dn-1;h++)p+=Yt[h].distanceTo(Yt[h+1])/2;if(p===0)G=Yt[0];else for(h=0,w=0;h<Dn-1;h++)if(S=Yt[h],F=Yt[h+1],_=S.distanceTo(F),w+=_,w>p){U=(w-p)/_,G=[F.x-U*(F.x-S.x),F.y-U*(F.y-S.y)];break}var Nn=u.unproject(de(G));return Be([Nn.lat+X.lat,Nn.lng+X.lng])}var l={__proto__:null,simplify:ka,pointToSegmentDistance:sl,closestPointOnSegment:Oa,clipSegment:ul,_getEdgeIntersection:Ts,_getBitCode:Hr,_sqClosestPointOnSegment:Ht,isFlat:Tn,_flat:cl,polylineCenter:Ai},m={project:function(s){return new Te(s.lng,s.lat)},unproject:function(s){return new Ee(s.y,s.x)},bounds:new ct([-180,-90],[180,90])},v={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ct([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var u=Math.PI/180,h=this.R,p=s.lat*u,_=this.R_MINOR/h,w=Math.sqrt(1-_*_),S=w*Math.sin(p),F=Math.tan(Math.PI/4-p/2)/Math.pow((1-S)/(1+S),w/2);return p=-h*Math.log(Math.max(F,1e-10)),new Te(s.lng*u*h,p)},unproject:function(s){for(var u=180/Math.PI,h=this.R,p=this.R_MINOR/h,_=Math.sqrt(1-p*p),w=Math.exp(-s.y/h),S=Math.PI/2-2*Math.atan(w),F=0,U=.1,G;F<15&&Math.abs(U)>1e-7;F++)G=_*Math.sin(S),G=Math.pow((1-G)/(1+G),_/2),U=Math.PI/2-2*Math.atan(w*G)-S,S+=U;return new Ee(S*u,s.x*u/h)}},I={__proto__:null,LonLat:m,Mercator:v,SphericalMercator:Nc},k=t({},Fr,{code:"EPSG:3395",projection:v,transformation:function(){var s=.5/(Math.PI*v.R);return Vr(s,.5,-s,.5)}()}),j=t({},Fr,{code:"EPSG:4326",projection:m,transformation:Vr(1/180,1,-1/180,.5)}),J=t({},bn,{projection:m,transformation:Vr(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,u){var h=u.lng-s.lng,p=u.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});bn.Earth=Fr,bn.EPSG3395=k,bn.EPSG3857=so,bn.EPSG900913=Oc,bn.EPSG4326=j,bn.Simple=J;var Oe=En.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[a(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[a(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var u=s.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var h=this.getEvents();u.on(h,this),this.once("remove",function(){u.off(h,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});Ue.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var u=a(s);return this._layers[u]?this:(this._layers[u]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var u=a(s);return this._layers[u]?(this._loaded&&s.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return a(s)in this._layers},eachLayer:function(s,u){for(var h in this._layers)s.call(u,this._layers[h]);return this},_addLayers:function(s){s=s?Z(s)?s:[s]:[];for(var u=0,h=s.length;u<h;u++)this.addLayer(s[u])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[a(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var u=a(s);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,u=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),u=_.maxZoom===void 0?u:Math.max(u,_.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var vt=Oe.extend({initialize:function(s,u){C(this,u),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var u=this.getLayerId(s);return this._layers[u]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var u=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(s){var u=typeof s=="number"?s:this.getLayerId(s);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var u=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,u);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,u){for(var h in this._layers)s.call(u,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return a(s)}}),Ge=function(s,u){return new vt(s,u)},pt=vt.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),vt.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),vt.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new ln;for(var u in this._layers){var h=this._layers[u];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),Qt=function(s,u){return new pt(s,u)},zn=N.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){C(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,u){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,u){var h=this.options,p=h[u+"Size"];typeof p=="number"&&(p=[p,p]);var _=de(p),w=de(u==="shadow"&&h.shadowAnchor||h.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+u+" "+(h.className||""),w&&(s.style.marginLeft=-w.x+"px",s.style.marginTop=-w.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,u){return u=u||document.createElement("img"),u.src=s,u},_getIconUrl:function(s){return re.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function Hn(s){return new zn(s)}var qr=zn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof qr.imagePath!="string"&&(qr.imagePath=this._detectIconPath()),(this.options.imagePath||qr.imagePath)+zn.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var u=function(h,p,_){var w=p.exec(h);return w&&w[_]};return s=u(s,/^url\((['"])?(.+)\1\)$/,2),s&&u(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=qe("div","leaflet-default-icon-path",document.body),u=ms(s,"background-image")||ms(s,"backgroundImage");if(document.body.removeChild(s),u=this._stripUrl(u),u)return u;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),Va=$n.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Er(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Se(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Et(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var u=this._marker,h=u._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,w=nr(u._icon),S=h.getPixelBounds(),F=h.getPixelOrigin(),U=on(S.min._subtract(F).add(_),S.max._subtract(F).subtract(_));if(!U.contains(w)){var G=de((Math.max(U.max.x,w.x)-U.max.x)/(S.max.x-U.max.x)-(Math.min(U.min.x,w.x)-U.min.x)/(S.min.x-U.min.x),(Math.max(U.max.y,w.y)-U.max.y)/(S.max.y-U.max.y)-(Math.min(U.min.y,w.y)-U.min.y)/(S.min.y-U.min.y)).multiplyBy(p);h.panBy(G,{animate:!1}),this._draggable._newPos._add(G),this._draggable._startPos._add(G),mt(u._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=D(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(x(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,s)))},_onDrag:function(s){var u=this._marker,h=u._shadow,p=nr(u._icon),_=u._map.layerPointToLatLng(p);h&&mt(h,p),u._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,u.fire("move",s).fire("drag",s)},_onDragEnd:function(s){x(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Dh=Oe.extend({options:{icon:new qr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,u){C(this,u),this._latlng=Be(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var u=this._latlng;return this._latlng=Be(s),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),Se(h,u),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&be(h,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),w=!1;_!==this._shadow&&(this._removeShadow(),w=!0),_&&(Se(_,u),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&w&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&rt(this._icon,"focus",this._panOnFocus,this),ft(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ft(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&mt(this._icon,s),this._shadow&&mt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(Se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Va)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Va(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Cn(this._icon,s),this._shadow&&Cn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var u=this.options.icon.options,h=u.iconSize?de(u.iconSize):de(0,0),p=u.iconAnchor?de(u.iconAnchor):de(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function fN(s,u){return new Dh(s,u)}var vo=Oe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return C(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Sh=vo.extend({options:{fill:!0,radius:10},initialize:function(s,u){C(this,u),this._latlng=Be(s),this._radius=this.options.radius},setLatLng:function(s){var u=this._latlng;return this._latlng=Be(s),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var u=s&&s.radius||this._radius;return vo.prototype.setStyle.call(this,s),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,u=this._radiusY||s,h=this._clickTolerance(),p=[s+h,u+h];this._pxBounds=new ct(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function pN(s,u){return new Sh(s,u)}var zg=Sh.extend({initialize:function(s,u,h){if(typeof u=="number"&&(u=t({},h,{radius:u})),C(this,u),this._latlng=Be(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new ln(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:vo.prototype.setStyle,_project:function(){var s=this._latlng.lng,u=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===Fr.distance){var _=Math.PI/180,w=this._mRadius/Fr.R/_,S=h.project([u+w,s]),F=h.project([u-w,s]),U=S.add(F).divideBy(2),G=h.unproject(U).lat,X=Math.acos((Math.cos(w*_)-Math.sin(u*_)*Math.sin(G*_))/(Math.cos(u*_)*Math.cos(G*_)))/_;(isNaN(X)||X===0)&&(X=w/Math.cos(Math.PI/180*u)),this._point=U.subtract(h.getPixelOrigin()),this._radius=isNaN(X)?0:U.x-h.project([G,s-X]).x,this._radiusY=U.y-S.y}else{var fe=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(fe).x}this._updateBounds()}});function mN(s,u,h){return new zg(s,u,h)}var xi=vo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,u){C(this,u),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var u=1/0,h=null,p=Ht,_,w,S=0,F=this._parts.length;S<F;S++)for(var U=this._parts[S],G=1,X=U.length;G<X;G++){_=U[G-1],w=U[G];var fe=p(s,_,w,!0);fe<u&&(u=fe,h=p(s,_,w))}return h&&(h.distance=Math.sqrt(u)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ai(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,u){return u=u||this._defaultShape(),s=Be(s),u.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new ln,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Tn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var u=[],h=Tn(s),p=0,_=s.length;p<_;p++)h?(u[p]=Be(s[p]),this._bounds.extend(u[p])):u[p]=this._convertLatLngs(s[p]);return u},_project:function(){var s=new ct;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),u=new Te(s,s);this._rawPxBounds&&(this._pxBounds=new ct([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(s,u,h){var p=s[0]instanceof Ee,_=s.length,w,S;if(p){for(S=[],w=0;w<_;w++)S[w]=this._map.latLngToLayerPoint(s[w]),h.extend(S[w]);u.push(S)}else for(w=0;w<_;w++)this._projectLatlngs(s[w],u,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,h,p,_,w,S,F,U;for(h=0,_=0,w=this._rings.length;h<w;h++)for(U=this._rings[h],p=0,S=U.length;p<S-1;p++)F=ul(U[p],U[p+1],s,p,!0),F&&(u[_]=u[_]||[],u[_].push(F[0]),(F[1]!==U[p+1]||p===S-2)&&(u[_].push(F[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,u=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=ka(s[h],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,u){var h,p,_,w,S,F,U=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,w=this._parts.length;h<w;h++)for(F=this._parts[h],p=0,S=F.length,_=S-1;p<S;_=p++)if(!(!u&&p===0)&&sl(s,F[_],F[p])<=U)return!0;return!1}});function gN(s,u){return new xi(s,u)}xi._flat=cl;var Ba=xi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return il(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var u=xi.prototype._convertLatLngs.call(this,s),h=u.length;return h>=2&&u[0]instanceof Ee&&u[0].equals(u[h-1])&&u.pop(),u},_setLatLngs:function(s){xi.prototype._setLatLngs.call(this,s),Tn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Tn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,u=this.options.weight,h=new Te(u,u);if(s=new ct(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,w;p<_;p++)w=_o(this._rings[p],s,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var u=!1,h,p,_,w,S,F,U,G;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(w=0,U=this._parts.length;w<U;w++)for(h=this._parts[w],S=0,G=h.length,F=G-1;S<G;F=S++)p=h[S],_=h[F],p.y>s.y!=_.y>s.y&&s.x<(_.x-p.x)*(s.y-p.y)/(_.y-p.y)+p.x&&(u=!u);return u||xi.prototype._containsPoint.call(this,s,!0)}});function _N(s,u){return new Ba(s,u)}var Mi=pt.extend({initialize:function(s,u){C(this,u),this._layers={},s&&this.addData(s)},addData:function(s){var u=Z(s)?s:s.features,h,p,_;if(u){for(h=0,p=u.length;h<p;h++)_=u[h],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var w=this.options;if(w.filter&&!w.filter(s))return this;var S=Ah(s,w);return S?(S.feature=Ph(s),S.defaultOptions=S.options,this.resetStyle(S),w.onEachFeature&&w.onEachFeature(s,S),this.addLayer(S)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=t({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(u){this._setLayerStyle(u,s)},this)},_setLayerStyle:function(s,u){s.setStyle&&(typeof u=="function"&&(u=u(s.feature)),s.setStyle(u))}});function Ah(s,u){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,_=[],w=u&&u.pointToLayer,S=u&&u.coordsToLatLng||Hg,F,U,G,X;if(!p&&!h)return null;switch(h.type){case"Point":return F=S(p),XE(w,s,F,u);case"MultiPoint":for(G=0,X=p.length;G<X;G++)F=S(p[G]),_.push(XE(w,s,F,u));return new pt(_);case"LineString":case"MultiLineString":return U=xh(p,h.type==="LineString"?0:1,S),new xi(U,u);case"Polygon":case"MultiPolygon":return U=xh(p,h.type==="Polygon"?1:2,S),new Ba(U,u);case"GeometryCollection":for(G=0,X=h.geometries.length;G<X;G++){var fe=Ah({geometry:h.geometries[G],type:"Feature",properties:s.properties},u);fe&&_.push(fe)}return new pt(_);case"FeatureCollection":for(G=0,X=h.features.length;G<X;G++){var Fe=Ah(h.features[G],u);Fe&&_.push(Fe)}return new pt(_);default:throw new Error("Invalid GeoJSON object.")}}function XE(s,u,h,p){return s?s(u,h):new Dh(h,p&&p.markersInheritOptions&&p)}function Hg(s){return new Ee(s[1],s[0],s[2])}function xh(s,u,h){for(var p=[],_=0,w=s.length,S;_<w;_++)S=u?xh(s[_],u-1,h):(h||Hg)(s[_]),p.push(S);return p}function qg(s,u){return s=Be(s),s.alt!==void 0?[g(s.lng,u),g(s.lat,u),g(s.alt,u)]:[g(s.lng,u),g(s.lat,u)]}function Mh(s,u,h,p){for(var _=[],w=0,S=s.length;w<S;w++)_.push(u?Mh(s[w],Tn(s[w])?0:u-1,h,p):qg(s[w],p));return!u&&h&&_.length>0&&_.push(_[0].slice()),_}function Ua(s,u){return s.feature?t({},s.feature,{geometry:u}):Ph(u)}function Ph(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Gg={toGeoJSON:function(s){return Ua(this,{type:"Point",coordinates:qg(this.getLatLng(),s)})}};Dh.include(Gg),zg.include(Gg),Sh.include(Gg),xi.include({toGeoJSON:function(s){var u=!Tn(this._latlngs),h=Mh(this._latlngs,u?1:0,!1,s);return Ua(this,{type:(u?"Multi":"")+"LineString",coordinates:h})}}),Ba.include({toGeoJSON:function(s){var u=!Tn(this._latlngs),h=u&&!Tn(this._latlngs[0]),p=Mh(this._latlngs,h?2:u?1:0,!0,s);return u||(p=[p]),Ua(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),vt.include({toMultiPoint:function(s){var u=[];return this.eachLayer(function(h){u.push(h.toGeoJSON(s).geometry.coordinates)}),Ua(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(s){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(s);var h=u==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var w=_.toGeoJSON(s);if(h)p.push(w.geometry);else{var S=Ph(w);S.type==="FeatureCollection"?p.push.apply(p,S.features):p.push(S)}}}),h?Ua(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function eb(s,u){return new Mi(s,u)}var vN=eb,Rh=Oe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,u,h){this._url=s,this._bounds=nt(u),C(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ft(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&jr(this._image),this},bringToBack:function(){return this._map&&$r(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=nt(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",u=this._image=s?this._url:qe("img");if(Se(u,"leaflet-image-layer"),this._zoomAnimated&&Se(u,"leaflet-zoom-animated"),this.options.className&&Se(u,this.options.className),u.onselectstart=f,u.onmousemove=f,u.onload=i(this.fire,this,"load"),u.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(s){var u=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;an(this._image,h,u)},_reset:function(){var s=this._image,u=new ct(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=u.getSize();mt(s,u.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){Cn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),yN=function(s,u,h){return new Rh(s,u,h)},tb=Rh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",u=this._image=s?this._url:qe("video");if(Se(u,"leaflet-image-layer"),this._zoomAnimated&&Se(u,"leaflet-zoom-animated"),this.options.className&&Se(u,this.options.className),u.onselectstart=f,u.onmousemove=f,u.onloadeddata=i(this.fire,this,"load"),s){for(var h=u.getElementsByTagName("source"),p=[],_=0;_<h.length;_++)p.push(h[_].src);this._url=h.length>0?p:[u.src];return}Z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var S=qe("source");S.src=this._url[w],u.appendChild(S)}}});function wN(s,u,h){return new tb(s,u,h)}var nb=Rh.extend({_initImage:function(){var s=this._image=this._url;Se(s,"leaflet-image-layer"),this._zoomAnimated&&Se(s,"leaflet-zoom-animated"),this.options.className&&Se(s,this.options.className),s.onselectstart=f,s.onmousemove=f}});function IN(s,u,h){return new nb(s,u,h)}var Gr=Oe.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,u){s&&(s instanceof Ee||Z(s))?(this._latlng=Be(s),C(this,u)):(C(this,s),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Cn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Cn(this._container,1),this.bringToFront(),this.options.interactive&&(Se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Cn(this._container,0),this._removeTimeout=setTimeout(i(ft,void 0,this._container),200)):ft(this._container),this.options.interactive&&(Et(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=Be(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&jr(this._container),this},bringToBack:function(){return this._map&&$r(this._container),this},_prepareOpen:function(s){var u=this._source;if(!u._map)return!1;if(u instanceof pt){u=null;var h=this._source._layers;for(var p in h)if(h[p]._map){u=h[p];break}if(!u)return!1;this._source=u}if(!s)if(u.getCenter)s=u.getCenter();else if(u.getLatLng)s=u.getLatLng();else if(u.getBounds)s=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")s.innerHTML=u;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),u=de(this.options.offset),h=this._getAnchor();this._zoomAnimated?mt(this._container,s.add(h)):u=u.add(s).add(h);var p=this._containerBottom=-u.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});Ue.include({_initOverlay:function(s,u,h,p){var _=u;return _ instanceof s||(_=new s(p).setContent(u)),h&&_.setLatLng(h),_}}),Oe.include({_initOverlay:function(s,u,h,p){var _=h;return _ instanceof s?(C(_,p),_._source=this):(_=u&&!p?u:new s(p,this),_.setContent(h)),_}});var Nh=Gr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Gr.prototype.openOn.call(this,s)},onAdd:function(s){Gr.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof vo||this._source.on("preclick",dn))},onRemove:function(s){Gr.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof vo||this._source.off("preclick",dn))},getEvents:function(){var s=Gr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",u=this._container=qe("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=qe("div",s+"-content-wrapper",u);if(this._contentNode=qe("div",s+"-content",h),ys(u),tl(this._contentNode),be(u,"contextmenu",dn),this._tipContainer=qe("div",s+"-tip-container",u),this._tip=qe("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=qe("a",s+"-close-button",u);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',be(p,"click",function(_){bt(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,u=s.style;u.width="",u.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),u.width=h+1+"px",u.whiteSpace="",u.height="";var p=s.offsetHeight,_=this.options.maxHeight,w="leaflet-popup-scrolled";_&&p>_?(u.height=_+"px",Se(s,w)):Et(s,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();mt(this._container,u.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,u=parseInt(ms(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+u,p=this._containerWidth,_=new Te(this._containerLeft,-h-this._containerBottom);_._add(nr(this._container));var w=s.layerPointToContainerPoint(_),S=de(this.options.autoPanPadding),F=de(this.options.autoPanPaddingTopLeft||S),U=de(this.options.autoPanPaddingBottomRight||S),G=s.getSize(),X=0,fe=0;w.x+p+U.x>G.x&&(X=w.x+p-G.x+U.x),w.x-X-F.x<0&&(X=w.x-F.x),w.y+h+U.y>G.y&&(fe=w.y+h-G.y+U.y),w.y-fe-F.y<0&&(fe=w.y-F.y),(X||fe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([X,fe]))}},_getAnchor:function(){return de(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),EN=function(s,u){return new Nh(s,u)};Ue.mergeOptions({closePopupOnClick:!0}),Ue.include({openPopup:function(s,u,h){return this._initOverlay(Nh,s,u,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Oe.include({bindPopup:function(s,u){return this._popup=this._initOverlay(Nh,this._popup,s,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof pt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){rr(s);var u=s.layer||s.target;if(this._popup._source===u&&!(u instanceof vo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=u,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var kh=Gr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Gr.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Gr.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Gr.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",u=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=qe("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var u,h,p=this._map,_=this._container,w=p.latLngToContainerPoint(p.getCenter()),S=p.layerPointToContainerPoint(s),F=this.options.direction,U=_.offsetWidth,G=_.offsetHeight,X=de(this.options.offset),fe=this._getAnchor();F==="top"?(u=U/2,h=G):F==="bottom"?(u=U/2,h=0):F==="center"?(u=U/2,h=G/2):F==="right"?(u=0,h=G/2):F==="left"?(u=U,h=G/2):S.x<w.x?(F="right",u=0,h=G/2):(F="left",u=U+(X.x+fe.x)*2,h=G/2),s=s.subtract(de(u,h,!0)).add(X).add(fe),Et(_,"leaflet-tooltip-right"),Et(_,"leaflet-tooltip-left"),Et(_,"leaflet-tooltip-top"),Et(_,"leaflet-tooltip-bottom"),Se(_,"leaflet-tooltip-"+F),mt(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Cn(this._container,s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(u)},_getAnchor:function(){return de(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),bN=function(s,u){return new kh(s,u)};Ue.include({openTooltip:function(s,u,h){return this._initOverlay(kh,s,u,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Oe.include({bindTooltip:function(s,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(kh,this._tooltip,s,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var u=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[u](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof pt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&(be(u,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),be(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var u=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),u=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(u)}});var rb=zn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var u=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(gs(u),u.appendChild(h.html)):u.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=de(h.bgPos);u.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function CN(s){return new rb(s)}zn.Default=qr;var ll=Oe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:re.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){C(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),ft(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(jr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&($r(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Te?s:new Te(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var u=this.getPane().children,h=-s(-1/0,1/0),p=0,_=u.length,w;p<_;p++)w=u[p].style.zIndex,u[p]!==this._container&&w&&(h=s(h,+w));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!re.ielt9){Cn(this._container,this.options.opacity);var s=+new Date,u=!1,h=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var w=Math.min(1,(s-_.loaded)/200);Cn(_.el,w),w<1?u=!0:(_.active?h=!0:this._onOpaqueTile(_),_.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),u&&(x(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=qe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,u=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=u-Math.abs(s-h),this._onUpdateLevel(h)):(ft(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],_=this._map;return p||(p=this._levels[s]={},p.el=qe("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=u,p.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,_.getCenter(),_.getZoom()),f(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var s,u,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)u=this._tiles[s],u.retain=u.current;for(s in this._tiles)if(u=this._tiles[s],u.current&&!u.active){var p=u.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var u in this._tiles)this._tiles[u].coords.z===s&&this._removeTile(u)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)ft(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,u,h,p){var _=Math.floor(s/2),w=Math.floor(u/2),S=h-1,F=new Te(+_,+w);F.z=+S;var U=this._tileCoordsToKey(F),G=this._tiles[U];return G&&G.active?(G.retain=!0,!0):(G&&G.loaded&&(G.retain=!0),S>p?this._retainParent(_,w,S,p):!1)},_retainChildren:function(s,u,h,p){for(var _=2*s;_<2*s+2;_++)for(var w=2*u;w<2*u+2;w++){var S=new Te(_,w);S.z=h+1;var F=this._tileCoordsToKey(S),U=this._tiles[F];if(U&&U.active){U.retain=!0;continue}else U&&U.loaded&&(U.retain=!0);h+1<p&&this._retainChildren(_,w,h+1,p)}},_resetView:function(s){var u=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var u=this.options;return u.minNativeZoom!==void 0&&s<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<s?u.maxNativeZoom:s},_setView:function(s,u,h,p){var _=Math.round(u);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var w=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||w)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,u)},_setZoomTransforms:function(s,u){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,u)},_setZoomTransform:function(s,u,h){var p=this._map.getZoomScale(h,s.zoom),_=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(u,h)).round();re.any3d?an(s.el,_,p):mt(s.el,_)},_resetGrid:function(){var s=this._map,u=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,u.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,u.wrapLng[1]],p).x/h.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([u.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([u.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var u=this._map,h=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),p=u.getZoomScale(h,this._tileZoom),_=u.project(s,this._tileZoom).floor(),w=u.getSize().divideBy(p*2);return new ct(_.subtract(w),_.add(w))},_update:function(s){var u=this._map;if(u){var h=this._clampZoom(u.getZoom());if(s===void 0&&(s=u.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(p),w=_.getCenter(),S=[],F=this.options.keepBuffer,U=new ct(_.getBottomLeft().subtract([F,-F]),_.getTopRight().add([F,-F]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var G in this._tiles){var X=this._tiles[G].coords;(X.z!==this._tileZoom||!U.contains(new Te(X.x,X.y)))&&(this._tiles[G].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var fe=_.min.y;fe<=_.max.y;fe++)for(var Fe=_.min.x;Fe<=_.max.x;Fe++){var Dn=new Te(Fe,fe);if(Dn.z=this._tileZoom,!!this._isValidTile(Dn)){var Yt=this._tiles[this._tileCoordsToKey(Dn)];Yt?Yt.current=!0:S.push(Dn)}}if(S.sort(function(Nn,$a){return Nn.distanceTo(w)-$a.distanceTo(w)}),S.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ir=document.createDocumentFragment();for(Fe=0;Fe<S.length;Fe++)this._addTile(S[Fe],ir);this._level.el.appendChild(ir)}}}},_isValidTile:function(s){var u=this._map.options.crs;if(!u.infinite){var h=this._globalTileRange;if(!u.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!u.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return nt(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var u=this._map,h=this.getTileSize(),p=s.scaleBy(h),_=p.add(h),w=u.unproject(p,s.z),S=u.unproject(_,s.z);return[w,S]},_tileCoordsToBounds:function(s){var u=this._tileCoordsToNwSe(s),h=new ln(u[0],u[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var u=s.split(":"),h=new Te(+u[0],+u[1]);return h.z=+u[2],h},_removeTile:function(s){var u=this._tiles[s];u&&(ft(u.el),delete this._tiles[s],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Se(s,"leaflet-tile");var u=this.getTileSize();s.style.width=u.x+"px",s.style.height=u.y+"px",s.onselectstart=f,s.onmousemove=f,re.ielt9&&this.options.opacity<1&&Cn(s,this.options.opacity)},_addTile:function(s,u){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),i(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&D(i(this._tileReady,this,s,null,_)),mt(_,h),this._tiles[p]={el:_,coords:s,current:!0},u.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,u,h){u&&this.fire("tileerror",{error:u,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(Cn(h.el,0),x(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),u||(Se(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),re.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var u=new Te(this._wrapX?d(s.x,this._wrapX):s.x,this._wrapY?d(s.y,this._wrapY):s.y);return u.z=s.z,u},_pxBoundsToTileRange:function(s){var u=this.getTileSize();return new ct(s.min.unscaleBy(u).floor(),s.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function TN(s){return new ll(s)}var ja=ll.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,u){this._url=s,u=C(this,u),u.detectRetina&&re.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,u){return this._url===s&&u===void 0&&(u=!0),this._url=s,u||this.redraw(),this},createTile:function(s,u){var h=document.createElement("img");return be(h,"load",i(this._tileOnLoad,this,u,h)),be(h,"error",i(this._tileOnError,this,u,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var u={r:re.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(u.y=h),u["-y"]=h}return $(this._url,t(u,this.options))},_tileOnLoad:function(s,u){re.ielt9?setTimeout(i(s,this,null,u),0):s(null,u)},_tileOnError:function(s,u,h){var p=this.options.errorTileUrl;p&&u.getAttribute("src")!==p&&(u.src=p),s(h,u)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,u=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=u-s),s+p},_getSubdomain:function(s){var u=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var s,u;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(u=this._tiles[s].el,u.onload=f,u.onerror=f,!u.complete)){u.src=se;var h=this._tiles[s].coords;ft(u),delete this._tiles[s],this.fire("tileabort",{tile:u,coords:h})}},_removeTile:function(s){var u=this._tiles[s];if(u)return u.el.setAttribute("src",se),ll.prototype._removeTile.call(this,s)},_tileReady:function(s,u,h){if(!(!this._map||h&&h.getAttribute("src")===se))return ll.prototype._tileReady.call(this,s,u,h)}});function ib(s,u){return new ja(s,u)}var ob=ja.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,u){this._url=s;var h=t({},this.defaultWmsParams);for(var p in u)p in this.options||(h[p]=u[p]);u=C(this,u);var _=u.detectRetina&&re.retina?2:1,w=this.getTileSize();h.width=w.x*_,h.height=w.y*_,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,ja.prototype.onAdd.call(this,s)},getTileUrl:function(s){var u=this._tileCoordsToNwSe(s),h=this._crs,p=on(h.project(u[0]),h.project(u[1])),_=p.min,w=p.max,S=(this._wmsVersion>=1.3&&this._crs===j?[_.y,_.x,w.y,w.x]:[_.x,_.y,w.x,w.y]).join(","),F=ja.prototype.getTileUrl.call(this,s);return F+V(this.wmsParams,F,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+S},setParams:function(s,u){return t(this.wmsParams,s),u||this.redraw(),this}});function DN(s,u){return new ob(s,u)}ja.WMS=ob,ib.wms=DN;var Pi=Oe.extend({options:{padding:.1},initialize:function(s){C(this,s),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,u){var h=this._map.getZoomScale(u,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,u),w=p.multiplyBy(-h).add(_).subtract(this._map._getNewPixelOrigin(s,u));re.any3d?an(this._container,w,h):mt(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,u=this._map.getSize(),h=this._map.containerPointToLayerPoint(u.multiplyBy(-s)).round();this._bounds=new ct(h,h.add(u.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),sb=Pi.extend({options:{tolerance:0},getEvents:function(){var s=Pi.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Pi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");be(s,"mousemove",this._onMouseMove,this),be(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),be(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){x(this._redrawRequest),delete this._ctx,ft(this._container),rt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var u in this._layers)s=this._layers[u],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Pi.prototype._update.call(this);var s=this._bounds,u=this._container,h=s.getSize(),p=re.retina?2:1;mt(u,s.min),u.width=p*h.x,u.height=p*h.y,u.style.width=h.x+"px",u.style.height=h.y+"px",re.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Pi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[a(s)]=s;var u=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var u=s._order,h=u.next,p=u.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[a(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var u=s.options.dashArray.split(/[, ]+/),h=[],p,_;for(_=0;_<u.length;_++){if(p=Number(u[_]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var u=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ct,this._redrawBounds.extend(s._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(s._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var u=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,u=this._redrawBounds;if(this._ctx.save(),u){var h=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!u||s._pxBounds&&s._pxBounds.intersects(u))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,u){if(this._drawing){var h,p,_,w,S=s._parts,F=S.length,U=this._ctx;if(F){for(U.beginPath(),h=0;h<F;h++){for(p=0,_=S[h].length;p<_;p++)w=S[h][p],U[p?"lineTo":"moveTo"](w.x,w.y);u&&U.closePath()}this._fillStroke(U,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var u=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||p)/p;_!==1&&(h.save(),h.scale(1,_)),h.beginPath(),h.arc(u.x,u.y/_,p,0,Math.PI*2,!1),_!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,u){var h=u.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(u.options&&u.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var u=this._map.mouseEventToLayerPoint(s),h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(u)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,u)}},_handleMouseOut:function(s){var u=this._hoveredLayer;u&&(Et(this._container,"leaflet-interactive"),this._fireEvent([u],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,u){if(!this._mouseHoverThrottled){for(var h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(u)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(Se(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,u,h){this._map._fireDOMEvent(u,h||u.type,s)},_bringToFront:function(s){var u=s._order;if(u){var h=u.next,p=u.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(s)}},_bringToBack:function(s){var u=s._order;if(u){var h=u.next,p=u.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(s)}}});function ab(s){return re.canvas?new sb(s):null}var dl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),SN={_initContainer:function(){this._container=qe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Pi.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var u=s._container=dl("shape");Se(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",s._path=dl("path"),u.appendChild(s._path),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){var u=s._container;this._container.appendChild(u),s.options.interactive&&s.addInteractiveTarget(u)},_removePath:function(s){var u=s._container;ft(u),s.removeInteractiveTarget(u),delete this._layers[a(s)]},_updateStyle:function(s){var u=s._stroke,h=s._fill,p=s.options,_=s._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(u||(u=s._stroke=dl("stroke")),_.appendChild(u),u.weight=p.weight+"px",u.color=p.color,u.opacity=p.opacity,p.dashArray?u.dashStyle=Z(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=p.lineCap.replace("butt","flat"),u.joinstyle=p.lineJoin):u&&(_.removeChild(u),s._stroke=null),p.fill?(h||(h=s._fill=dl("fill")),_.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(_.removeChild(h),s._fill=null)},_updateCircle:function(s){var u=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+u.x+","+u.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,u){s._path.v=u},_bringToFront:function(s){jr(s._container)},_bringToBack:function(s){$r(s._container)}},Oh=re.vml?dl:ya,hl=Pi.extend({_initContainer:function(){this._container=Oh("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Oh("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ft(this._container),rt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Pi.prototype._update.call(this);var s=this._bounds,u=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,h.setAttribute("width",u.x),h.setAttribute("height",u.y)),mt(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(s){var u=s._path=Oh("path");s.options.className&&Se(u,s.options.className),s.options.interactive&&Se(u,"leaflet-interactive"),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){ft(s._path),s.removeInteractiveTarget(s._path),delete this._layers[a(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var u=s._path,h=s.options;u&&(h.stroke?(u.setAttribute("stroke",h.color),u.setAttribute("stroke-opacity",h.opacity),u.setAttribute("stroke-width",h.weight),u.setAttribute("stroke-linecap",h.lineCap),u.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?u.setAttribute("stroke-dasharray",h.dashArray):u.removeAttribute("stroke-dasharray"),h.dashOffset?u.setAttribute("stroke-dashoffset",h.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),h.fill?(u.setAttribute("fill",h.fillColor||h.color),u.setAttribute("fill-opacity",h.fillOpacity),u.setAttribute("fill-rule",h.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(s,u){this._setPath(s,wa(s._parts,u))},_updateCircle:function(s){var u=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,_="a"+h+","+p+" 0 1,0 ",w=s._empty()?"M0 0":"M"+(u.x-h)+","+u.y+_+h*2+",0 "+_+-h*2+",0 ";this._setPath(s,w)},_setPath:function(s,u){s._path.setAttribute("d",u)},_bringToFront:function(s){jr(s._path)},_bringToBack:function(s){$r(s._path)}});re.vml&&hl.include(SN);function ub(s){return re.svg||re.vml?new hl(s):null}Ue.include({getRenderer:function(s){var u=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var u=this._paneRenderers[s];return u===void 0&&(u=this._createRenderer({pane:s}),this._paneRenderers[s]=u),u},_createRenderer:function(s){return this.options.preferCanvas&&ab(s)||ub(s)}});var cb=Ba.extend({initialize:function(s,u){Ba.prototype.initialize.call(this,this._boundsToLatLngs(s),u)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=nt(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function AN(s,u){return new cb(s,u)}hl.create=Oh,hl.pointsToPath=wa,Mi.geometryToLayer=Ah,Mi.coordsToLatLng=Hg,Mi.coordsToLatLngs=xh,Mi.latLngToCoords=qg,Mi.latLngsToCoords=Mh,Mi.getFeature=Ua,Mi.asFeature=Ph,Ue.mergeOptions({boxZoom:!0});var lb=$n.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){be(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){rt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ft(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),fo(),Ci(),this._startPoint=this._map.mouseEventToContainerPoint(s),be(document,{contextmenu:rr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=qe("div","leaflet-zoom-box",this._container),Se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var u=new ct(this._point,this._startPoint),h=u.getSize();mt(this._box,u.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(ft(this._box),Et(this._container,"leaflet-crosshair")),Xe(),Kc(),rt(document,{contextmenu:rr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var u=new ln(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ue.addInitHook("addHandler","boxZoom",lb),Ue.mergeOptions({doubleClickZoom:!0});var db=$n.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var u=this._map,h=u.getZoom(),p=u.options.zoomDelta,_=s.originalEvent.shiftKey?h-p:h+p;u.options.doubleClickZoom==="center"?u.setZoom(_):u.setZoomAround(s.containerPoint,_)}});Ue.addInitHook("addHandler","doubleClickZoom",db),Ue.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var hb=$n.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Er(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Et(this._map._container,"leaflet-grab"),Et(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=nt(this._map.options.maxBounds);this._offsetLimit=on(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var u=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(u),this._prunePositions(u)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,u){return s-(s-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;s.x<u.min.x&&(s.x=this._viscousLimit(s.x,u.min.x)),s.y<u.min.y&&(s.y=this._viscousLimit(s.y,u.min.y)),s.x>u.max.x&&(s.x=this._viscousLimit(s.x,u.max.x)),s.y>u.max.y&&(s.y=this._viscousLimit(s.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,u=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-u+h)%s+u-h,w=(p+u+h)%s-u-h,S=Math.abs(_+h)<Math.abs(w+h)?_:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=S},_onDragEnd:function(s){var u=this._map,h=u.options,p=!h.inertia||s.noInertia||this._times.length<2;if(u.fire("dragend",s),p)u.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,S=h.easeLinearity,F=_.multiplyBy(S/w),U=F.distanceTo([0,0]),G=Math.min(h.inertiaMaxSpeed,U),X=F.multiplyBy(G/U),fe=G/(h.inertiaDeceleration*S),Fe=X.multiplyBy(-fe/2).round();!Fe.x&&!Fe.y?u.fire("moveend"):(Fe=u._limitOffset(Fe,u.options.maxBounds),D(function(){u.panBy(Fe,{duration:fe,easeLinearity:S,noMoveStart:!0,animate:!0})}))}}});Ue.addInitHook("addHandler","dragging",hb),Ue.mergeOptions({keyboard:!0,keyboardPanDelta:80});var fb=$n.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),be(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),rt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,u=document.documentElement,h=s.scrollTop||u.scrollTop,p=s.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var u=this._panKeys={},h=this.keyCodes,p,_;for(p=0,_=h.left.length;p<_;p++)u[h.left[p]]=[-1*s,0];for(p=0,_=h.right.length;p<_;p++)u[h.right[p]]=[s,0];for(p=0,_=h.down.length;p<_;p++)u[h.down[p]]=[0,s];for(p=0,_=h.up.length;p<_;p++)u[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var u=this._zoomKeys={},h=this.keyCodes,p,_;for(p=0,_=h.zoomIn.length;p<_;p++)u[h.zoomIn[p]]=s;for(p=0,_=h.zoomOut.length;p<_;p++)u[h.zoomOut[p]]=-s},_addHooks:function(){be(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){rt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var u=s.keyCode,h=this._map,p;if(u in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[u],s.shiftKey&&(p=de(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(de(p),h.options.maxBounds)),h.options.worldCopyJump){var _=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(_)}else h.panBy(p)}else if(u in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;rr(s)}}});Ue.addInitHook("addHandler","keyboard",fb),Ue.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var pb=$n.extend({addHooks:function(){be(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){rt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var u=rl(s),h=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),p),rr(s)},_performZoom:function(){var s=this._map,u=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,w=h?Math.ceil(_/h)*h:_,S=s._limitZoom(u+(this._delta>0?w:-w))-u;this._delta=0,this._startTime=null,S&&(s.options.scrollWheelZoom==="center"?s.setZoom(u+S):s.setZoomAround(this._lastMousePos,u+S))}});Ue.addInitHook("addHandler","scrollWheelZoom",pb);var xN=600;Ue.mergeOptions({tapHold:re.touchNative&&re.safari&&re.mobile,tapTolerance:15});var mb=$n.extend({addHooks:function(){be(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){rt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var u=s.touches[0];this._startPos=this._newPos=new Te(u.clientX,u.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(be(document,"touchend",bt),be(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),xN),be(document,"touchend touchcancel contextmenu",this._cancel,this),be(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){rt(document,"touchend",bt),rt(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),rt(document,"touchend touchcancel contextmenu",this._cancel,this),rt(document,"touchmove",this._onMove,this)},_onMove:function(s){var u=s.touches[0];this._newPos=new Te(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,u){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});h._simulated=!0,u.target.dispatchEvent(h)}});Ue.addInitHook("addHandler","tapHold",mb),Ue.mergeOptions({touchZoom:re.touch,bounceAtZoomLimits:!0});var gb=$n.extend({addHooks:function(){Se(this._map._container,"leaflet-touch-zoom"),be(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Et(this._map._container,"leaflet-touch-zoom"),rt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var u=this._map;if(!(!s.touches||s.touches.length!==2||u._animatingZoom||this._zooming)){var h=u.mouseEventToContainerPoint(s.touches[0]),p=u.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),be(document,"touchmove",this._onTouchMove,this),be(document,"touchend touchcancel",this._onTouchEnd,this),bt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var u=this._map,h=u.mouseEventToContainerPoint(s.touches[0]),p=u.mouseEventToContainerPoint(s.touches[1]),_=h.distanceTo(p)/this._startDist;if(this._zoom=u.getScaleZoom(_,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&_<1||this._zoom>u.getMaxZoom()&&_>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var w=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&w.x===0&&w.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),x(this._animRequest);var S=i(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(S,this,!0),bt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,x(this._animRequest),rt(document,"touchmove",this._onTouchMove,this),rt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ue.addInitHook("addHandler","touchZoom",gb),Ue.BoxZoom=lb,Ue.DoubleClickZoom=db,Ue.Drag=hb,Ue.Keyboard=fb,Ue.ScrollWheelZoom=pb,Ue.TapHold=mb,Ue.TouchZoom=gb,n.Bounds=ct,n.Browser=re,n.CRS=bn,n.Canvas=sb,n.Circle=zg,n.CircleMarker=Sh,n.Class=N,n.Control=Rn,n.DivIcon=rb,n.DivOverlay=Gr,n.DomEvent=_t,n.DomUtil=zr,n.Draggable=Er,n.Evented=En,n.FeatureGroup=pt,n.GeoJSON=Mi,n.GridLayer=ll,n.Handler=$n,n.Icon=zn,n.ImageOverlay=Rh,n.LatLng=Ee,n.LatLngBounds=ln,n.Layer=Oe,n.LayerGroup=vt,n.LineUtil=l,n.Map=Ue,n.Marker=Dh,n.Mixin=Ra,n.Path=vo,n.Point=Te,n.PolyUtil=ol,n.Polygon=Ba,n.Polyline=xi,n.Popup=Nh,n.PosAnimation=vh,n.Projection=I,n.Rectangle=cb,n.Renderer=Pi,n.SVG=hl,n.SVGOverlay=nb,n.TileLayer=ja,n.Tooltip=kh,n.Transformation=kc,n.Util=R,n.VideoOverlay=tb,n.bind=i,n.bounds=on,n.canvas=ab,n.circle=mN,n.circleMarker=pN,n.control=go,n.divIcon=CN,n.extend=t,n.featureGroup=Qt,n.geoJSON=eb,n.geoJson=vN,n.gridLayer=TN,n.icon=Hn,n.imageOverlay=yN,n.latLng=Be,n.latLngBounds=nt,n.layerGroup=Ge,n.map=yh,n.marker=fN,n.point=de,n.polygon=_N,n.polyline=gN,n.popup=EN,n.rectangle=AN,n.setOptions=C,n.stamp=a,n.svg=ub,n.svgOverlay=IN,n.tileLayer=ib,n.tooltip=bN,n.transformation=Vr,n.version=e,n.videoOverlay=wN;var MN=window.L;n.noConflict=function(){return window.L=MN,this},window.L=n})});function Cb(n,e){return Object.is(n,e)}var qt=null,Fh=!1,Vh=1,Ri=Symbol("SIGNAL");function Ke(n){let e=qt;return qt=n,e}function Tb(){return qt}var pl={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Yg(n){if(Fh)throw new Error("");if(qt===null)return;qt.consumerOnSignalRead(n);let e=qt.nextProducerIndex++;if($h(qt),e<qt.producerNode.length&&qt.producerNode[e]!==n&&fl(qt)){let t=qt.producerNode[e];jh(t,qt.producerIndexOfThis[e])}qt.producerNode[e]!==n&&(qt.producerNode[e]=n,qt.producerIndexOfThis[e]=fl(qt)?xb(n,qt,e):0),qt.producerLastReadVersion[e]=n.version}function KN(){Vh++}function Db(n){if(!(fl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Vh)){if(!n.producerMustRecompute(n)&&!Xg(n)){n.dirty=!1,n.lastCleanEpoch=Vh;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Vh}}function Sb(n){if(n.liveConsumerNode===void 0)return;let e=Fh;Fh=!0;try{for(let t of n.liveConsumerNode)t.dirty||QN(t)}finally{Fh=e}}function Ab(){return qt?.consumerAllowSignalWrites!==!1}function QN(n){n.dirty=!0,Sb(n),n.consumerMarkedDirty?.(n)}function Uh(n){return n&&(n.nextProducerIndex=0),Ke(n)}function Jg(n,e){if(Ke(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(fl(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)jh(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Xg(n){$h(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Db(t),r!==t.version))return!0}return!1}function e_(n){if($h(n),fl(n))for(let e=0;e<n.producerNode.length;e++)jh(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function xb(n,e,t){if(Mb(n),n.liveConsumerNode.length===0&&Pb(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=xb(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function jh(n,e){if(Mb(n),n.liveConsumerNode.length===1&&Pb(n))for(let r=0;r<n.producerNode.length;r++)jh(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];$h(i),i.producerIndexOfThis[r]=e}}function fl(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function $h(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Mb(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Pb(n){return n.producerNode!==void 0}function Rb(n){let e=Object.create(YN);e.computation=n;let t=()=>{if(Db(e),Yg(e),e.value===Bh)throw e.error;return e.value};return t[Ri]=e,t}var Kg=Symbol("UNSET"),Qg=Symbol("COMPUTING"),Bh=Symbol("ERRORED"),YN=Pe(Y({},pl),{value:Kg,dirty:!0,error:null,equal:Cb,producerMustRecompute(n){return n.value===Kg||n.value===Qg},producerRecomputeValue(n){if(n.value===Qg)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Qg;let t=Uh(n),r;try{r=n.computation()}catch(i){r=Bh,n.error=i}finally{Jg(n,t)}if(e!==Kg&&e!==Bh&&r!==Bh&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function JN(){throw new Error}var Nb=JN;function kb(){Nb()}function Ob(n){Nb=n}var XN=null;function Lb(n){let e=Object.create(Vb);e.value=n;let t=()=>(Yg(e),e.value);return t[Ri]=e,t}function t_(n,e){Ab()||kb(),n.equal(n.value,e)||(n.value=e,e1(n))}function Fb(n,e){Ab()||kb(),t_(n,e(n.value))}var Vb=Pe(Y({},pl),{equal:Cb,value:void 0});function e1(n){n.version++,KN(),Sb(n),XN?.()}function Ae(n){return typeof n=="function"}function za(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var zh=za(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ds(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var xt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Ae(r))try{r()}catch(o){e=o instanceof zh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Bb(o)}catch(a){e=e??[],a instanceof zh?e=[...e,...a.errors]:e.push(a)}}if(e)throw new zh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Bb(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ds(t,e)}remove(e){let{_finalizers:t}=this;t&&Ds(t,e),e instanceof n&&e._removeParent(this)}};xt.EMPTY=(()=>{let n=new xt;return n.closed=!0,n})();var n_=xt.EMPTY;function Hh(n){return n instanceof xt||n&&"closed"in n&&Ae(n.remove)&&Ae(n.add)&&Ae(n.unsubscribe)}function Bb(n){Ae(n)?n():n.unsubscribe()}var br={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ha={setTimeout(n,e,...t){let{delegate:r}=Ha;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ha;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function qh(n){Ha.setTimeout(()=>{let{onUnhandledError:e}=br;if(e)e(n);else throw n})}function ml(){}var Ub=r_("C",void 0,void 0);function jb(n){return r_("E",void 0,n)}function $b(n){return r_("N",n,void 0)}function r_(n,e,t){return{kind:n,value:e,error:t}}var Ss=null;function qa(n){if(br.useDeprecatedSynchronousErrorHandling){let e=!Ss;if(e&&(Ss={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ss;if(Ss=null,t)throw r}}else n()}function zb(n){br.useDeprecatedSynchronousErrorHandling&&Ss&&(Ss.errorThrown=!0,Ss.error=n)}var As=class extends xt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Hh(e)&&e.add(this)):this.destination=r1}static create(e,t,r){return new wo(e,t,r)}next(e){this.isStopped?o_($b(e),this):this._next(e)}error(e){this.isStopped?o_(jb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?o_(Ub,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},t1=Function.prototype.bind;function i_(n,e){return t1.call(n,e)}var s_=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Gh(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Gh(r)}else Gh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Gh(t)}}},wo=class extends As{constructor(e,t,r){super();let i;if(Ae(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&br.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&i_(e.next,o),error:e.error&&i_(e.error,o),complete:e.complete&&i_(e.complete,o)}):i=e}this.destination=new s_(i)}};function Gh(n){br.useDeprecatedSynchronousErrorHandling?zb(n):qh(n)}function n1(n){throw n}function o_(n,e){let{onStoppedNotification:t}=br;t&&Ha.setTimeout(()=>t(n,e))}var r1={closed:!0,next:ml,error:n1,complete:ml};var Ga=typeof Symbol=="function"&&Symbol.observable||"@@observable";function qn(n){return n}function Wh(...n){return a_(n)}function a_(n){return n.length===0?qn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var je=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=o1(t)?t:new wo(t,r,i);return qa(()=>{let{operator:a,source:c}=this;o.add(a?a.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Hb(r),new r((i,o)=>{let a=new wo({next:c=>{try{t(c)}catch(d){o(d),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ga](){return this}pipe(...t){return a_(t)(this)}toPromise(t){return t=Hb(t),new t((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return n.create=e=>new n(e),n})();function Hb(n){var e;return(e=n??br.Promise)!==null&&e!==void 0?e:Promise}function i1(n){return n&&Ae(n.next)&&Ae(n.error)&&Ae(n.complete)}function o1(n){return n&&n instanceof As||i1(n)&&Hh(n)}function u_(n){return Ae(n?.lift)}function We(n){return e=>{if(u_(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function $e(n,e,t,r,i){return new c_(n,e,t,r,i)}var c_=class extends As{constructor(e,t,r,i,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=t?function(c){try{t(c)}catch(d){e.error(d)}}:super._next,this._error=i?function(c){try{i(c)}catch(d){e.error(d)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Wa(){return We((n,e)=>{let t=null;n._refCount++;let r=$e(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Za=class extends je{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,u_(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xt;let t=this.getSubject();e.add(this.source.subscribe($e(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xt.EMPTY)}return e}refCount(){return Wa()(this)}};var qb=za(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Jt=(()=>{class n extends je{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Zh(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new qb}next(t){qa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){qa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){qa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?n_:(this.currentObservers=null,o.push(t),new xt(()=>{this.currentObservers=null,Ds(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new je;return t.source=this,t}}return n.create=(e,t)=>new Zh(e,t),n})(),Zh=class extends Jt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:n_}};var kt=class extends Jt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var l_={now(){return(l_.delegate||Date).now()},delegate:void 0};var Kh=class extends xt{constructor(e,t){super()}schedule(e,t=0){return this}};var gl={setInterval(n,e,...t){let{delegate:r}=gl;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=gl;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ka=class extends Kh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return gl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&gl.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ds(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Qa=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Qa.now=l_.now;var Ya=class extends Qa{constructor(e,t=Qa.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var d_=new Ya(Ka);var Qh=class extends Ka{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Yh=class extends Ya{};var h_=new Yh(Qh);var Gn=new je(n=>n.complete());function Gb(n){return n&&Ae(n.schedule)}function Wb(n){return n[n.length-1]}function Jh(n){return Ae(Wb(n))?n.pop():void 0}function Io(n){return Gb(Wb(n))?n.pop():void 0}function f_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Kb(n,e,t,r){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(g){try{f(r.next(g))}catch(y){a(y)}}function d(g){try{f(r.throw(g))}catch(y){a(y)}}function f(g){g.done?o(g.value):i(g.value).then(c,d)}f((r=r.apply(n,e||[])).next())})}function Zb(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xs(n){return this instanceof xs?(this.v=n,this):new xs(n)}function Qb(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(C){return function(V){return Promise.resolve(V).then(C,y)}}function c(C,V){r[C]&&(i[C]=function(z){return new Promise(function($,Z){o.push([C,z,$,Z])>1||d(C,z)})},V&&(i[C]=V(i[C])))}function d(C,V){try{f(r[C](V))}catch(z){E(o[0][3],z)}}function f(C){C.value instanceof xs?Promise.resolve(C.value.v).then(g,y):E(o[0][2],C)}function g(C){d("next",C)}function y(C){d("throw",C)}function E(C,V){C(V),o.shift(),o.length&&d(o[0][0],o[0][1])}}function Yb(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Zb=="function"?Zb(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(a){return new Promise(function(c,d){a=n[o](a),i(c,d,a.done,a.value)})}}function i(o,a,c,d){Promise.resolve(d).then(function(f){o({value:f,done:c})},a)}}var Xh=n=>n&&typeof n.length=="number"&&typeof n!="function";function ef(n){return Ae(n?.then)}function tf(n){return Ae(n[Ga])}function nf(n){return Symbol.asyncIterator&&Ae(n?.[Symbol.asyncIterator])}function rf(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function s1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var of=s1();function sf(n){return Ae(n?.[of])}function af(n){return Qb(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield xs(t.read());if(i)return yield xs(void 0);yield yield xs(r)}}finally{t.releaseLock()}})}function uf(n){return Ae(n?.getReader)}function Vt(n){if(n instanceof je)return n;if(n!=null){if(tf(n))return a1(n);if(Xh(n))return u1(n);if(ef(n))return c1(n);if(nf(n))return Jb(n);if(sf(n))return l1(n);if(uf(n))return d1(n)}throw rf(n)}function a1(n){return new je(e=>{let t=n[Ga]();if(Ae(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function u1(n){return new je(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function c1(n){return new je(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,qh)})}function l1(n){return new je(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Jb(n){return new je(e=>{h1(n,e).catch(t=>e.error(t))})}function d1(n){return Jb(af(n))}function h1(n,e){var t,r,i,o;return Kb(this,void 0,void 0,function*(){try{for(t=Yb(n);r=yield t.next(),!r.done;){let a=r.value;if(e.next(a),e.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function kn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Eo(n,e=0){return We((t,r)=>{t.subscribe($e(r,i=>kn(r,n,()=>r.next(i),e),()=>kn(r,n,()=>r.complete(),e),i=>kn(r,n,()=>r.error(i),e)))})}function bo(n,e=0){return We((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Xb(n,e){return Vt(n).pipe(bo(e),Eo(e))}function eC(n,e){return Vt(n).pipe(bo(e),Eo(e))}function tC(n,e){return new je(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function nC(n,e){return new je(t=>{let r;return kn(t,e,()=>{r=n[of](),kn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){t.error(a);return}o?t.complete():t.next(i)},0,!0)}),()=>Ae(r?.return)&&r.return()})}function cf(n,e){if(!n)throw new Error("Iterable cannot be null");return new je(t=>{kn(t,e,()=>{let r=n[Symbol.asyncIterator]();kn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function rC(n,e){return cf(af(n),e)}function iC(n,e){if(n!=null){if(tf(n))return Xb(n,e);if(Xh(n))return tC(n,e);if(ef(n))return eC(n,e);if(nf(n))return cf(n,e);if(sf(n))return nC(n,e);if(uf(n))return rC(n,e)}throw rf(n)}function yt(n,e){return e?iC(n,e):Vt(n)}function pe(...n){let e=Io(n);return yt(n,e)}function Ja(n,e){let t=Ae(n)?n:()=>n,r=i=>i.error(t());return new je(e?i=>e.schedule(r,0,i):r)}function p_(n){return!!n&&(n instanceof je||Ae(n.lift)&&Ae(n.subscribe))}var Cr=za(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function m_(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new wo({next:a=>{r(a),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new Cr)}});n.subscribe(o)})}function me(n,e){return We((t,r)=>{let i=0;t.subscribe($e(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:f1}=Array;function p1(n,e){return f1(e)?n(...e):n(e)}function lf(n){return me(e=>p1(n,e))}var{isArray:m1}=Array,{getPrototypeOf:g1,prototype:_1,keys:v1}=Object;function df(n){if(n.length===1){let e=n[0];if(m1(e))return{args:e,keys:null};if(y1(e)){let t=v1(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function y1(n){return n&&typeof n=="object"&&g1(n)===_1}function hf(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ms(...n){let e=Io(n),t=Jh(n),{args:r,keys:i}=df(n);if(r.length===0)return yt([],e);let o=new je(w1(r,e,i?a=>hf(i,a):qn));return t?o.pipe(lf(t)):o}function w1(n,e,t=qn){return r=>{oC(e,()=>{let{length:i}=n,o=new Array(i),a=i,c=i;for(let d=0;d<i;d++)oC(e,()=>{let f=yt(n[d],e),g=!1;f.subscribe($e(r,y=>{o[d]=y,g||(g=!0,c--),c||r.next(t(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}function oC(n,e,t){n?kn(t,n,e):e()}function sC(n,e,t,r,i,o,a,c){let d=[],f=0,g=0,y=!1,E=()=>{y&&!d.length&&!f&&e.complete()},C=z=>f<r?V(z):d.push(z),V=z=>{o&&e.next(z),f++;let $=!1;Vt(t(z,g++)).subscribe($e(e,Z=>{i?.(Z),o?C(Z):e.next(Z)},()=>{$=!0},void 0,()=>{if($)try{for(f--;d.length&&f<r;){let Z=d.shift();a?kn(e,a,()=>V(Z)):V(Z)}E()}catch(Z){e.error(Z)}}))};return n.subscribe($e(e,C,()=>{y=!0,E()})),()=>{c?.()}}function Bt(n,e,t=1/0){return Ae(e)?Bt((r,i)=>me((o,a)=>e(r,o,i,a))(Vt(n(r,i))),t):(typeof e=="number"&&(t=e),We((r,i)=>sC(r,i,n,t)))}function Xa(n=1/0){return Bt(qn,n)}function aC(){return Xa(1)}function eu(...n){return aC()(yt(n,Io(n)))}function ff(n){return new je(e=>{Vt(n()).subscribe(e)})}function g_(...n){let e=Jh(n),{args:t,keys:r}=df(n),i=new je(o=>{let{length:a}=t;if(!a){o.complete();return}let c=new Array(a),d=a,f=a;for(let g=0;g<a;g++){let y=!1;Vt(t[g]).subscribe($e(o,E=>{y||(y=!0,f--),c[g]=E},()=>d--,void 0,()=>{(!d||!y)&&(f||o.next(r?hf(r,c):c),o.complete())}))}});return e?i.pipe(lf(e)):i}function Wn(n,e){return We((t,r)=>{let i=0;t.subscribe($e(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Co(n){return We((e,t)=>{let r=null,i=!1,o;r=e.subscribe($e(t,void 0,void 0,a=>{o=Vt(n(a,Co(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function uC(n,e,t,r,i){return(o,a)=>{let c=t,d=e,f=0;o.subscribe($e(a,g=>{let y=f++;d=c?n(d,g,y):(c=!0,g),r&&a.next(d)},i&&(()=>{c&&a.next(d),a.complete()})))}}function Ps(n,e){return Ae(e)?Bt(n,e,1):Bt(n,1)}function To(n){return We((e,t)=>{let r=!1;e.subscribe($e(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Xt(n){return n<=0?()=>Gn:We((e,t)=>{let r=0;e.subscribe($e(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function __(n){return me(()=>n)}function pf(n=I1){return We((e,t)=>{let r=!1;e.subscribe($e(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function I1(){return new Cr}function _l(n){return We((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Wr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Wn((i,o)=>n(i,o,r)):qn,Xt(1),t?To(e):pf(()=>new Cr))}function tu(n){return n<=0?()=>Gn:We((e,t)=>{let r=[];e.subscribe($e(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function v_(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Wn((i,o)=>n(i,o,r)):qn,tu(1),t?To(e):pf(()=>new Cr))}function mf(n,e){return We(uC(n,e,arguments.length>=2,!0))}function gf(...n){let e=Io(n);return We((t,r)=>{(e?eu(n,t,e):eu(n,t)).subscribe(r)})}function Sn(n,e){return We((t,r)=>{let i=null,o=0,a=!1,c=()=>a&&!i&&r.complete();t.subscribe($e(r,d=>{i?.unsubscribe();let f=0,g=o++;Vt(n(d,g)).subscribe(i=$e(r,y=>r.next(e?e(d,y,g,f++):y),()=>{i=null,c()}))},()=>{a=!0,c()}))})}function y_(n){return We((e,t)=>{Vt(n).subscribe($e(t,()=>t.complete(),ml)),!t.closed&&e.subscribe(t)})}function Gt(n,e,t){let r=Ae(n)||e||t?{next:n,error:e,complete:t}:n;return r?We((i,o)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let c=!0;i.subscribe($e(o,d=>{var f;(f=r.next)===null||f===void 0||f.call(r,d),o.next(d)},()=>{var d;c=!1,(d=r.complete)===null||d===void 0||d.call(r),o.complete()},d=>{var f;c=!1,(f=r.error)===null||f===void 0||f.call(r,d),o.error(d)},()=>{var d,f;c&&((d=r.unsubscribe)===null||d===void 0||d.call(r)),(f=r.finalize)===null||f===void 0||f.call(r)}))}):qn}var WC="https://g.co/ng/security#xss",ue=class extends Error{constructor(e,t){super(bv(e,t)),this.code=e}};function bv(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Dl(n){return{toString:n}.toString()}var _f="__parameters__";function E1(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function ZC(n,e,t){return Dl(()=>{let r=E1(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let a=new i(...o);return c.annotation=a,c;function c(d,f,g){let y=d.hasOwnProperty(_f)?d[_f]:Object.defineProperty(d,_f,{value:[]})[_f];for(;y.length<=g;)y.push(null);return(y[g]=y[g]||[]).push(a),d}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var N_=globalThis;function lt(n){for(let e in n)if(n[e]===lt)return e;throw Error("Could not find renamed property on target object.")}function b1(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function xn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(xn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function cC(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var C1=lt({__forward_ref__:lt});function cr(n){return n.__forward_ref__=cr,n.toString=function(){return xn(this())},n}function An(n){return KC(n)?n():n}function KC(n){return typeof n=="function"&&n.hasOwnProperty(C1)&&n.__forward_ref__===cr}function oe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Li(n){return{providers:n.providers||[],imports:n.imports||[]}}function Jf(n){return lC(n,YC)||lC(n,JC)}function QC(n){return Jf(n)!==null}function lC(n,e){return n.hasOwnProperty(e)?n[e]:null}function T1(n){let e=n&&(n[YC]||n[JC]);return e||null}function dC(n){return n&&(n.hasOwnProperty(hC)||n.hasOwnProperty(D1))?n[hC]:null}var YC=lt({\u0275prov:lt}),hC=lt({\u0275inj:lt}),JC=lt({ngInjectableDef:lt}),D1=lt({ngInjectorDef:lt}),ae=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=oe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function XC(n){return n&&!!n.\u0275providers}var S1=lt({\u0275cmp:lt}),A1=lt({\u0275dir:lt}),x1=lt({\u0275pipe:lt}),M1=lt({\u0275mod:lt}),Sf=lt({\u0275fac:lt}),yl=lt({__NG_ELEMENT_ID__:lt}),fC=lt({__NG_ENV_ID__:lt});function uu(n){return typeof n=="string"?n:n==null?"":String(n)}function P1(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():uu(n)}function R1(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ue(-200,n)}function Cv(n,e){throw new ue(-201,!1)}var Le=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Le||{}),k_;function eT(){return k_}function On(n){let e=k_;return k_=n,e}function tT(n,e,t){let r=Jf(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Le.Optional)return null;if(e!==void 0)return e;Cv(n,"Injector")}var N1={},wl=N1,O_="__NG_DI_FLAG__",Af="ngTempTokenPath",k1="ngTokenPath",O1=/\n/gm,L1="\u0275",pC="__source",su;function F1(){return su}function Do(n){let e=su;return su=n,e}function V1(n,e=Le.Default){if(su===void 0)throw new ue(-203,!1);return su===null?tT(n,void 0,e):su.get(n,e&Le.Optional?null:void 0,e)}function ge(n,e=Le.Default){return(eT()||V1)(An(n),e)}function W(n,e=Le.Default){return ge(n,Xf(e))}function Xf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function L_(n){let e=[];for(let t=0;t<n.length;t++){let r=An(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ue(900,!1);let i,o=Le.Default;for(let a=0;a<r.length;a++){let c=r[a],d=B1(c);typeof d=="number"?d===-1?i=c.token:o|=d:i=c}e.push(ge(i,o))}else e.push(ge(r))}return e}function nT(n,e){return n[O_]=e,n.prototype[O_]=e,n}function B1(n){return n[O_]}function U1(n,e,t,r){let i=n[Af];throw e[pC]&&i.unshift(e[pC]),n.message=j1(`
`+n.message,i,t,r),n[k1]=i,n[Af]=null,n}function j1(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==L1?n.slice(2):n;let i=xn(e);if(Array.isArray(e))i=e.map(xn).join(" -> ");else if(typeof e=="object"){let o=[];for(let a in e)if(e.hasOwnProperty(a)){let c=e[a];o.push(a+":"+(typeof c=="string"?JSON.stringify(c):xn(c)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(O1,`
  `)}`}var hn=nT(ZC("Optional"),8);var Tv=nT(ZC("SkipSelf"),4);function Ns(n,e){let t=n.hasOwnProperty(Sf);return t?n[Sf]:null}function Dv(n,e){n.forEach(t=>Array.isArray(t)?Dv(t,e):e(t))}function rT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function xf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function $1(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function z1(n,e,t){let r=Sl(n,e);return r>=0?n[r|1]=t:(r=~r,$1(n,r,e,t)),r}function w_(n,e){let t=Sl(n,e);if(t>=0)return n[t|1]}function Sl(n,e){return H1(n,e,1)}function H1(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),a=n[o<<t];if(e===a)return o<<t;a>e?i=o:r=o+1}return~(i<<t)}var cu={},or=[],lu=new ae(""),iT=new ae("",-1),oT=new ae(""),Mf=class{get(e,t=wl){if(t===wl){let r=new Error(`NullInjectorError: No provider for ${xn(e)}!`);throw r.name="NullInjectorError",r}return t}},sT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(sT||{}),Qr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Qr||{}),xo=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(xo||{});function q1(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function F_(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],a=t[r++],c=t[r++];n.setAttribute(e,a,c,o)}else{let o=i,a=t[++r];G1(o)?n.setProperty(e,o,a):n.setAttribute(e,o,a),r++}}return r}function aT(n){return n===3||n===4||n===6}function G1(n){return n.charCodeAt(0)===64}function Il(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?mC(n,t,i,null,e[++r]):mC(n,t,i,null,null))}}return n}function mC(n,e,t,r,i){let o=0,a=n.length;if(e===-1)a=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){a=-1;break}else if(c>e){a=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}a!==-1&&(n.splice(a,0,e),o=a+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var uT="ng-template";function W1(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&q1(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Sv(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Sv(n){return n.type===4&&n.value!==uT}function Z1(n,e,t){let r=n.type===4&&!t?uT:n.value;return e===r}function K1(n,e,t){let r=4,i=n.attrs,o=i!==null?J1(i):0,a=!1;for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="number"){if(!a&&!Tr(r)&&!Tr(d))return!1;if(a&&Tr(d))continue;a=!1,r=d|r&1;continue}if(!a)if(r&4){if(r=2|r&1,d!==""&&!Z1(n,d,t)||d===""&&e.length===1){if(Tr(r))return!1;a=!0}}else if(r&8){if(i===null||!W1(n,i,d,t)){if(Tr(r))return!1;a=!0}}else{let f=e[++c],g=Q1(d,i,Sv(n),t);if(g===-1){if(Tr(r))return!1;a=!0;continue}if(f!==""){let y;if(g>o?y="":y=i[g+1].toLowerCase(),r&2&&f!==y){if(Tr(r))return!1;a=!0}}}}return Tr(r)||a}function Tr(n){return(n&1)===0}function Q1(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let a=e[i];if(a===n)return i;if(a===3||a===6)o=!0;else if(a===1||a===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=o?1:2}return-1}else return X1(e,n)}function Y1(n,e,t=!1){for(let r=0;r<e.length;r++)if(K1(n,e[r],t))return!0;return!1}function J1(n){for(let e=0;e<n.length;e++){let t=n[e];if(aT(t))return e}return n.length}function X1(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function gC(n,e){return n?":not("+e.trim()+")":e}function ek(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let a=n[t];if(typeof a=="string")if(r&2){let c=n[++t];i+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!Tr(a)&&(e+=gC(o,i),i=""),r=a,o=o||!Tr(r);t++}return i!==""&&(e+=gC(o,i)),e}function tk(n){return n.map(ek).join(",")}function nk(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Tr(i))break;i=o}r++}return{attrs:e,classes:t}}function at(n){return Dl(()=>{let e=pT(n),t=Pe(Y({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===sT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Qr.Emulated,styles:n.styles||or,_:null,schemas:n.schemas||null,tView:null,id:""});mT(t);let r=n.dependencies;return t.directiveDefs=vC(r,!1),t.pipeDefs=vC(r,!0),t.id=ok(t),t})}function rk(n){return Mo(n)||lT(n)}function ik(n){return n!==null}function Fi(n){return Dl(()=>({type:n.type,bootstrap:n.bootstrap||or,declarations:n.declarations||or,imports:n.imports||or,exports:n.exports||or,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function _C(n,e){if(n==null)return cu;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,a,c=xo.None;Array.isArray(i)?(c=i[0],o=i[1],a=i[2]??o):(o=i,a=i),e?(t[o]=c!==xo.None?[r,c]:r,e[o]=a):t[o]=r}return t}function gt(n){return Dl(()=>{let e=pT(n);return mT(e),e})}function cT(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Mo(n){return n[S1]||null}function lT(n){return n[A1]||null}function dT(n){return n[x1]||null}function hT(n){let e=Mo(n)||lT(n)||dT(n);return e!==null?e.standalone:!1}function fT(n,e){let t=n[M1]||null;if(!t&&e===!0)throw new Error(`Type ${xn(n)} does not have '\u0275mod' property.`);return t}function pT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||cu,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||or,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:_C(n.inputs,e),outputs:_C(n.outputs),debugInfo:null}}function mT(n){n.features?.forEach(e=>e(n))}function vC(n,e){if(!n)return null;let t=e?dT:rk;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(ik)}function ok(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ei(n){return{\u0275providers:n}}function sk(...n){return{\u0275providers:gT(!0,n),\u0275fromNgModule:!0}}function gT(n,...e){let t=[],r=new Set,i,o=a=>{t.push(a)};return Dv(e,a=>{let c=a;V_(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&_T(i,o),t}function _T(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Av(i,o=>{e(o,r)})}}function V_(n,e,t,r){if(n=An(n),!n)return!1;let i=null,o=dC(n),a=!o&&Mo(n);if(!o&&!a){let d=n.ngModule;if(o=dC(d),o)i=d;else return!1}else{if(a&&!a.standalone)return!1;i=n}let c=r.has(i);if(a){if(c)return!1;if(r.add(i),a.dependencies){let d=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let f of d)V_(f,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let f;try{Dv(o.imports,g=>{V_(g,e,t,r)&&(f||=[],f.push(g))})}finally{}f!==void 0&&_T(f,e)}if(!c){let f=Ns(i)||(()=>new i);e({provide:i,useFactory:f,deps:or},i),e({provide:oT,useValue:i,multi:!0},i),e({provide:lu,useValue:()=>ge(i),multi:!0},i)}let d=o.providers;if(d!=null&&!c){let f=n;Av(d,g=>{e(g,f)})}}else return!1;return i!==n&&n.providers!==void 0}function Av(n,e){for(let t of n)XC(t)&&(t=t.\u0275providers),Array.isArray(t)?Av(t,e):e(t)}var ak=lt({provide:String,useValue:lt});function vT(n){return n!==null&&typeof n=="object"&&ak in n}function uk(n){return!!(n&&n.useExisting)}function ck(n){return!!(n&&n.useFactory)}function du(n){return typeof n=="function"}function lk(n){return!!n.useClass}var ep=new ae(""),Ef={},dk={},I_;function xv(){return I_===void 0&&(I_=new Mf),I_}var Zn=class{},El=class extends Zn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,U_(e,a=>this.processProvider(a)),this.records.set(iT,nu(void 0,this)),i.has("environment")&&this.records.set(Zn,nu(void 0,this));let o=this.records.get(ep);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(oT,or,Le.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ke(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ke(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Do(this),r=On(void 0),i;try{return e()}finally{Do(t),On(r)}}get(e,t=wl,r=Le.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(fC))return e[fC](this);r=Xf(r);let i,o=Do(this),a=On(void 0);try{if(!(r&Le.SkipSelf)){let d=this.records.get(e);if(d===void 0){let f=gk(e)&&Jf(e);f&&this.injectableDefInScope(f)?d=nu(B_(e),Ef):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d)}let c=r&Le.Self?xv():this.parent;return t=r&Le.Optional&&t===wl?null:t,c.get(e,t)}catch(c){if(c.name==="NullInjectorError"){if((c[Af]=c[Af]||[]).unshift(xn(e)),o)throw c;return U1(c,e,"R3InjectorError",this.source)}else throw c}finally{On(a),Do(o)}}resolveInjectorInitializers(){let e=Ke(null),t=Do(this),r=On(void 0),i;try{let o=this.get(lu,or,Le.Self);for(let a of o)a()}finally{Do(t),On(r),Ke(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(xn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ue(205,!1)}processProvider(e){e=An(e);let t=du(e)?e:An(e&&e.provide),r=fk(e);if(!du(e)&&e.multi===!0){let i=this.records.get(t);i||(i=nu(void 0,Ef,!0),i.factory=()=>L_(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ke(null);try{return t.value===Ef&&(t.value=dk,t.value=t.factory()),typeof t.value=="object"&&t.value&&mk(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ke(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=An(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function B_(n){let e=Jf(n),t=e!==null?e.factory:Ns(n);if(t!==null)return t;if(n instanceof ae)throw new ue(204,!1);if(n instanceof Function)return hk(n);throw new ue(204,!1)}function hk(n){if(n.length>0)throw new ue(204,!1);let t=T1(n);return t!==null?()=>t.factory(n):()=>new n}function fk(n){if(vT(n))return nu(void 0,n.useValue);{let e=yT(n);return nu(e,Ef)}}function yT(n,e,t){let r;if(du(n)){let i=An(n);return Ns(i)||B_(i)}else if(vT(n))r=()=>An(n.useValue);else if(ck(n))r=()=>n.useFactory(...L_(n.deps||[]));else if(uk(n))r=()=>ge(An(n.useExisting));else{let i=An(n&&(n.useClass||n.provide));if(pk(n))r=()=>new i(...L_(n.deps));else return Ns(i)||B_(i)}return r}function nu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function pk(n){return!!n.deps}function mk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function gk(n){return typeof n=="function"||typeof n=="object"&&n instanceof ae}function U_(n,e){for(let t of n)Array.isArray(t)?U_(t,e):t&&XC(t)?U_(t.\u0275providers,e):e(t)}function ti(n,e){n instanceof El&&n.assertNotDestroyed();let t,r=Do(n),i=On(void 0);try{return e()}finally{Do(r),On(i)}}function wT(){return eT()!==void 0||F1()!=null}function _k(n){if(!wT())throw new ue(-203,!1)}function vk(n){return typeof n=="function"}var Vi=0,Ve=1,Ce=2,Mn=3,Dr=4,Ar=5,Pf=6,Rf=7,Sr=8,hu=9,Yr=10,Ut=11,bl=12,yC=13,Eu=14,Jr=15,fu=16,ru=17,pu=18,tp=19,IT=20,So=21,E_=22,sr=23,ur=25,ET=1;var ks=7,Nf=8,kf=9,ar=10,Of=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Of||{});function Ao(n){return Array.isArray(n)&&typeof n[ET]=="object"}function Bi(n){return Array.isArray(n)&&n[ET]===!0}function Mv(n){return(n.flags&4)!==0}function np(n){return n.componentOffset>-1}function rp(n){return(n.flags&1)===1}function Po(n){return!!n.template}function j_(n){return(n[Ce]&512)!==0}var $_=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function bT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function ni(){return CT}function CT(n){return n.type.prototype.ngOnChanges&&(n.setInput=wk),yk}ni.ngInherit=!0;function yk(){let n=DT(this),e=n?.current;if(e){let t=n.previous;if(t===cu)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function wk(n,e,t,r,i){let o=this.declaredInputs[r],a=DT(n)||Ik(n,{previous:cu,current:null}),c=a.current||(a.current={}),d=a.previous,f=d[o];c[o]=new $_(f&&f.currentValue,t,d===cu),bT(n,e,i,t)}var TT="__ngSimpleChanges__";function DT(n){return n[TT]||null}function Ik(n,e){return n[TT]=e}var wC=null;var Zr=function(n,e,t){wC?.(n,e,t)},ST="svg",Ek="math";function Xr(n){for(;Array.isArray(n);)n=n[Vi];return n}function AT(n,e){return Xr(e[n])}function lr(n,e){return Xr(e[n.index])}function xT(n,e){return n.data[e]}function MT(n,e){return n[e]}function Oo(n,e){let t=e[n];return Ao(t)?t:t[Vi]}function Pv(n){return(n[Ce]&128)===128}function bk(n){return Bi(n[Mn])}function mu(n,e){return e==null?null:n[e]}function PT(n){n[ru]=0}function RT(n){n[Ce]&1024||(n[Ce]|=1024,Pv(n)&&op(n))}function Ck(n,e){for(;n>0;)e=e[Eu],n--;return e}function ip(n){return!!(n[Ce]&9216||n[sr]?.dirty)}function z_(n){n[Yr].changeDetectionScheduler?.notify(8),n[Ce]&64&&(n[Ce]|=1024),ip(n)&&op(n)}function op(n){n[Yr].changeDetectionScheduler?.notify(0);let e=Os(n);for(;e!==null&&!(e[Ce]&8192||(e[Ce]|=8192,!Pv(e)));)e=Os(e)}function NT(n,e){if((n[Ce]&256)===256)throw new ue(911,!1);n[So]===null&&(n[So]=[]),n[So].push(e)}function Tk(n,e){if(n[So]===null)return;let t=n[So].indexOf(e);t!==-1&&n[So].splice(t,1)}function Os(n){let e=n[Mn];return Bi(e)?e[Mn]:e}var Re={lFrame:zT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var kT=!1;function Dk(){return Re.lFrame.elementDepthCount}function Sk(){Re.lFrame.elementDepthCount++}function Ak(){Re.lFrame.elementDepthCount--}function OT(){return Re.bindingsEnabled}function xk(){return Re.skipHydrationRootTNode!==null}function Mk(n){return Re.skipHydrationRootTNode===n}function Pk(){Re.skipHydrationRootTNode=null}function Ye(){return Re.lFrame.lView}function fn(){return Re.lFrame.tView}function ye(n){return Re.lFrame.contextLView=n,n[Sr]}function we(n){return Re.lFrame.contextLView=null,n}function pn(){let n=LT();for(;n!==null&&n.type===64;)n=n.parent;return n}function LT(){return Re.lFrame.currentTNode}function Rk(){let n=Re.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Us(n,e){let t=Re.lFrame;t.currentTNode=n,t.isParent=e}function Rv(){return Re.lFrame.isParent}function FT(){Re.lFrame.isParent=!1}function Nk(){return Re.lFrame.contextLView}function VT(){return kT}function IC(n){kT=n}function sp(){let n=Re.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function kk(){return Re.lFrame.bindingIndex}function Ok(n){return Re.lFrame.bindingIndex=n}function ap(){return Re.lFrame.bindingIndex++}function BT(n){let e=Re.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Lk(){return Re.lFrame.inI18n}function Fk(n,e){let t=Re.lFrame;t.bindingIndex=t.bindingRootIndex=n,H_(e)}function Vk(){return Re.lFrame.currentDirectiveIndex}function H_(n){Re.lFrame.currentDirectiveIndex=n}function Bk(n){let e=Re.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function UT(n){Re.lFrame.currentQueryIndex=n}function Uk(n){let e=n[Ve];return e.type===2?e.declTNode:e.type===1?n[Ar]:null}function jT(n,e,t){if(t&Le.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&Le.Host);)if(i=Uk(o),i===null||(o=o[Eu],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Re.lFrame=$T();return r.currentTNode=e,r.lView=n,!0}function Nv(n){let e=$T(),t=n[Ve];Re.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function $T(){let n=Re.lFrame,e=n===null?null:n.child;return e===null?zT(n):e}function zT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function HT(){let n=Re.lFrame;return Re.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var qT=HT;function kv(){let n=HT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function jk(n){return(Re.lFrame.contextLView=Ck(n,Re.lFrame.contextLView))[Sr]}function js(){return Re.lFrame.selectedIndex}function Ls(n){Re.lFrame.selectedIndex=n}function Ov(){let n=Re.lFrame;return xT(n.tView,n.selectedIndex)}function GT(){Re.lFrame.currentNamespace=ST}function WT(){$k()}function $k(){Re.lFrame.currentNamespace=null}function zk(){return Re.lFrame.currentNamespace}var ZT=!0;function up(){return ZT}function cp(n){ZT=n}function Hk(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let a=CT(e);(t.preOrderHooks??=[]).push(n,a),(t.preOrderCheckHooks??=[]).push(n,a)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function lp(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:d,ngAfterViewChecked:f,ngOnDestroy:g}=o;a&&(n.contentHooks??=[]).push(-t,a),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),d&&(n.viewHooks??=[]).push(-t,d),f&&((n.viewHooks??=[]).push(t,f),(n.viewCheckHooks??=[]).push(t,f)),g!=null&&(n.destroyHooks??=[]).push(t,g)}}function bf(n,e,t){KT(n,e,3,t)}function Cf(n,e,t,r){(n[Ce]&3)===t&&KT(n,e,t,r)}function b_(n,e){let t=n[Ce];(t&3)===e&&(t&=16383,t+=1,n[Ce]=t)}function KT(n,e,t,r){let i=r!==void 0?n[ru]&65535:0,o=r??-1,a=e.length-1,c=0;for(let d=i;d<a;d++)if(typeof e[d+1]=="number"){if(c=e[d],r!=null&&c>=r)break}else e[d]<0&&(n[ru]+=65536),(c<o||o==-1)&&(qk(n,t,e,d),n[ru]=(n[ru]&4294901760)+d+2),d++}function EC(n,e){Zr(4,n,e);let t=Ke(null);try{e.call(n)}finally{Ke(t),Zr(5,n,e)}}function qk(n,e,t,r){let i=t[r]<0,o=t[r+1],a=i?-t[r]:t[r],c=n[a];i?n[Ce]>>14<n[ru]>>16&&(n[Ce]&3)===e&&(n[Ce]+=16384,EC(c,o)):EC(c,o)}var au=-1,Fs=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function Gk(n){return n instanceof Fs}function Wk(n){return(n.flags&8)!==0}function Zk(n){return(n.flags&16)!==0}var C_={},q_=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Xf(r);let i=this.injector.get(e,C_,r);return i!==C_||t===C_?i:this.parentInjector.get(e,t,r)}};function QT(n){return n!==au}function Lf(n){return n&32767}function Kk(n){return n>>16}function Ff(n,e){let t=Kk(n),r=e;for(;t>0;)r=r[Eu],t--;return r}var G_=!0;function Vf(n){let e=G_;return G_=n,e}var Qk=256,YT=Qk-1,JT=5,Yk=0,Kr={};function Jk(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(yl)&&(r=t[yl]),r==null&&(r=t[yl]=Yk++);let i=r&YT,o=1<<i;e.data[n+(i>>JT)]|=o}function Bf(n,e){let t=XT(n,e);if(t!==-1)return t;let r=e[Ve];r.firstCreatePass&&(n.injectorIndex=e.length,T_(r.data,n),T_(e,null),T_(r.blueprint,null));let i=Lv(n,e),o=n.injectorIndex;if(QT(i)){let a=Lf(i),c=Ff(i,e),d=c[Ve].data;for(let f=0;f<8;f++)e[o+f]=c[a+f]|d[a+f]}return e[o+8]=i,o}function T_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function XT(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Lv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=iD(i),r===null)return au;if(t++,i=i[Eu],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return au}function W_(n,e,t){Jk(n,e,t)}function Xk(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(aT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function eD(n,e,t){if(t&Le.Optional||n!==void 0)return n;Cv(e,"NodeInjector")}function tD(n,e,t,r){if(t&Le.Optional&&r===void 0&&(r=null),!(t&(Le.Self|Le.Host))){let i=n[hu],o=On(void 0);try{return i?i.get(e,r,t&Le.Optional):tT(e,r,t&Le.Optional)}finally{On(o)}}return eD(r,e,t)}function nD(n,e,t,r=Le.Default,i){if(n!==null){if(e[Ce]&2048&&!(r&Le.Self)){let a=iO(n,e,t,r,Kr);if(a!==Kr)return a}let o=rD(n,e,t,r,Kr);if(o!==Kr)return o}return tD(e,t,r,i)}function rD(n,e,t,r,i){let o=nO(t);if(typeof o=="function"){if(!jT(e,n,r))return r&Le.Host?eD(i,t,r):tD(e,t,r,i);try{let a;if(a=o(r),a==null&&!(r&Le.Optional))Cv(t);else return a}finally{qT()}}else if(typeof o=="number"){let a=null,c=XT(n,e),d=au,f=r&Le.Host?e[Jr][Ar]:null;for((c===-1||r&Le.SkipSelf)&&(d=c===-1?Lv(n,e):e[c+8],d===au||!CC(r,!1)?c=-1:(a=e[Ve],c=Lf(d),e=Ff(d,e)));c!==-1;){let g=e[Ve];if(bC(o,c,g.data)){let y=eO(c,e,t,a,r,f);if(y!==Kr)return y}d=e[c+8],d!==au&&CC(r,e[Ve].data[c+8]===f)&&bC(o,c,e)?(a=g,c=Lf(d),e=Ff(d,e)):c=-1}}return i}function eO(n,e,t,r,i,o){let a=e[Ve],c=a.data[n+8],d=r==null?np(c)&&G_:r!=a&&(c.type&3)!==0,f=i&Le.Host&&o===c,g=tO(c,a,t,d,f);return g!==null?gu(e,a,g,c):Kr}function tO(n,e,t,r,i){let o=n.providerIndexes,a=e.data,c=o&1048575,d=n.directiveStart,f=n.directiveEnd,g=o>>20,y=r?c:c+g,E=i?c+g:f;for(let C=y;C<E;C++){let V=a[C];if(C<d&&t===V||C>=d&&V.type===t)return C}if(i){let C=a[d];if(C&&Po(C)&&C.type===t)return d}return null}function gu(n,e,t,r){let i=n[t],o=e.data;if(Gk(i)){let a=i;a.resolving&&R1(P1(o[t]));let c=Vf(a.canSeeViewProviders);a.resolving=!0;let d,f=a.injectImpl?On(a.injectImpl):null,g=jT(n,r,Le.Default);try{i=n[t]=a.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&Hk(t,o[t],e)}finally{f!==null&&On(f),Vf(c),a.resolving=!1,qT()}}return i}function nO(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(yl)?n[yl]:void 0;return typeof e=="number"?e>=0?e&YT:rO:e}function bC(n,e,t){let r=1<<n;return!!(t[e+(n>>JT)]&r)}function CC(n,e){return!(n&Le.Self)&&!(n&Le.Host&&e)}var Rs=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return nD(this._tNode,this._lView,e,Xf(r),t)}};function rO(){return new Rs(pn(),Ye())}function Ui(n){return Dl(()=>{let e=n.prototype.constructor,t=e[Sf]||Z_(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Sf]||Z_(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Z_(n){return KC(n)?()=>{let e=Z_(An(n));return e&&e()}:Ns(n)}function iO(n,e,t,r,i){let o=n,a=e;for(;o!==null&&a!==null&&a[Ce]&2048&&!(a[Ce]&512);){let c=rD(o,a,t,r|Le.Self,Kr);if(c!==Kr)return c;let d=o.parent;if(!d){let f=a[IT];if(f){let g=f.get(t,Kr,r);if(g!==Kr)return g}d=iD(a),a=a[Eu]}o=d}return i}function iD(n){let e=n[Ve],t=e.type;return t===2?e.declTNode:t===1?n[Ar]:null}function Fv(n){return Xk(pn(),n)}function TC(n,e=null,t=null,r){let i=oD(n,e,t,r);return i.resolveInjectorInitializers(),i}function oD(n,e=null,t=null,r,i=new Set){let o=[t||or,sk(n)];return r=r||(typeof n=="object"?void 0:xn(n)),new El(o,e||xv(),r||null,i)}var un=class n{static{this.THROW_IF_NOT_FOUND=wl}static{this.NULL=new Mf}static create(e,t){if(Array.isArray(e))return TC({name:""},t,e,"");{let r=e.name??"";return TC({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=oe({token:n,providedIn:"any",factory:()=>ge(iT)})}static{this.__NG_ELEMENT_ID__=-1}};var oO=new ae("");oO.__NG_ELEMENT_ID__=n=>{let e=pn();if(e===null)throw new ue(204,!1);if(e.type&2)return e.value;if(n&Le.Optional)return null;throw new ue(204,!1)};var sO="ngOriginalError";function D_(n){return n[sO]}var sD=!0,Vv=(()=>{class n{static{this.__NG_ELEMENT_ID__=aO}static{this.__NG_ENV_ID__=t=>t}}return n})(),K_=class extends Vv{constructor(e){super(),this._lView=e}onDestroy(e){return NT(this._lView,e),()=>Tk(this._lView,e)}};function aO(){return new K_(Ye())}var bu=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new kt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=oe({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Q_=class extends Jt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,wT()&&(this.destroyRef=W(Vv,{optional:!0})??void 0,this.pendingTasks=W(bu,{optional:!0})??void 0)}emit(e){let t=Ke(null);try{super.next(e)}finally{Ke(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),a=r;if(e&&typeof e=="object"){let d=e;i=d.next?.bind(d),o=d.error?.bind(d),a=d.complete?.bind(d)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),a&&(a=this.wrapInTimeout(a)));let c=super.subscribe({next:i,error:o,complete:a});return e instanceof xt&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},wt=Q_;function Uf(...n){}function aD(n){let e,t;function r(){n=Uf;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function DC(n){return queueMicrotask(()=>n()),()=>{n=Uf}}var Bv="isAngularZone",jf=Bv+"_ID",uO=0,et=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wt(!1),this.onMicrotaskEmpty=new wt(!1),this.onStable=new wt(!1),this.onError=new wt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=sD}=e;if(typeof Zone>"u")throw new ue(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!i&&r,a.shouldCoalesceRunChangeDetection=i,a.callbackScheduled=!1,a.scheduleInRootZone=o,dO(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Bv)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ue(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ue(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,e,cO,Uf,Uf);try{return o.runTask(a,t,r)}finally{o.cancelTask(a)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},cO={};function Uv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function lO(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){aD(()=>{n.callbackScheduled=!1,Y_(n),n.isCheckStableRunning=!0,Uv(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Y_(n)}function dO(n){let e=()=>{lO(n)},t=uO++;n._inner=n._inner.fork({name:"angular",properties:{[Bv]:!0,[jf]:t,[jf+t]:!0},onInvokeTask:(r,i,o,a,c,d)=>{if(hO(d))return r.invokeTask(o,a,c,d);try{return SC(n),r.invokeTask(o,a,c,d)}finally{(n.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),AC(n)}},onInvoke:(r,i,o,a,c,d,f)=>{try{return SC(n),r.invoke(o,a,c,d,f)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!fO(d)&&e(),AC(n)}},onHasTask:(r,i,o,a)=>{r.hasTask(o,a),i===o&&(a.change=="microTask"?(n._hasPendingMicrotasks=a.microTask,Y_(n),Uv(n)):a.change=="macroTask"&&(n.hasPendingMacrotasks=a.macroTask))},onHandleError:(r,i,o,a)=>(r.handleError(o,a),n.runOutsideAngular(()=>n.onError.emit(a)),!1)})}function Y_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function SC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function AC(n){n._nesting--,Uv(n)}var J_=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wt,this.onMicrotaskEmpty=new wt,this.onStable=new wt,this.onError=new wt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function hO(n){return uD(n,"__ignore_ng_zone__")}function fO(n){return uD(n,"__scheduler_tick__")}function uD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Ni=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&D_(e);for(;t&&D_(t);)t=D_(t);return t||null}},pO=new ae("",{providedIn:"root",factory:()=>{let n=W(et),e=W(Ni);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function mO(){return dp(pn(),Ye())}function dp(n,e){return new xr(lr(n,e))}var xr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=mO}}return n})();function cD(n){return(n.flags&128)===128}var lD=new Map,gO=0;function _O(){return gO++}function vO(n){lD.set(n[tp],n)}function X_(n){lD.delete(n[tp])}var xC="__ngContext__";function Ro(n,e){Ao(e)?(n[xC]=e[tp],vO(e)):n[xC]=e}function dD(n){return fD(n[bl])}function hD(n){return fD(n[Dr])}function fD(n){for(;n!==null&&!Bi(n);)n=n[Dr];return n}var ev;function pD(n){ev=n}function yO(){if(ev!==void 0)return ev;if(typeof document<"u")return document;throw new ue(210,!1)}var jv=new ae("",{providedIn:"root",factory:()=>wO}),wO="ng",$v=new ae(""),ri=new ae("",{providedIn:"platform",factory:()=>"unknown"});var zv=new ae("",{providedIn:"root",factory:()=>yO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var IO="h",EO="b";var bO=()=>null;function Hv(n,e,t=!1){return bO(n,e,t)}var mD=!1,CO=new ae("",{providedIn:"root",factory:()=>mD});var vf;function TO(){if(vf===void 0&&(vf=null,N_.trustedTypes))try{vf=N_.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return vf}function MC(n){return TO()?.createScriptURL(n)||n}var $f=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${WC})`}};function Al(n){return n instanceof $f?n.changingThisBreaksApplicationSecurity:n}function qv(n,e){let t=DO(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${WC})`)}return t===e}function DO(n){return n instanceof $f&&n.getTypeName()||null}var SO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function gD(n){return n=String(n),n.match(SO)?n:"unsafe:"+n}var hp=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(hp||{});function AO(n){let e=vD();return e?e.sanitize(hp.URL,n)||"":qv(n,"URL")?Al(n):gD(uu(n))}function xO(n){let e=vD();if(e)return MC(e.sanitize(hp.RESOURCE_URL,n)||"");if(qv(n,"ResourceURL"))return MC(Al(n));throw new ue(904,!1)}function MO(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?xO:AO}function _D(n,e,t){return MO(e,t)(n)}function vD(){let n=Ye();return n&&n[Yr].sanitizer}var PO=/^>|^->|<!--|-->|--!>|<!-$/g,RO=/(<|>)/g,NO="\u200B$1\u200B";function kO(n){return n.replace(PO,e=>e.replace(RO,NO))}function yD(n){return n instanceof Function?n():n}function OO(n){return(n??W(un)).get(ri)==="browser"}var ki=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ki||{}),LO;function Gv(n,e){return LO(n,e)}function iu(n,e,t,r,i){if(r!=null){let o,a=!1;Bi(r)?o=r:Ao(r)&&(a=!0,r=r[Vi]);let c=Xr(r);n===0&&t!==null?i==null?CD(e,t,c):zf(e,t,c,i||null,!0):n===1&&t!==null?zf(e,t,c,i||null,!0):n===2?JO(e,c,a):n===3&&e.destroyNode(c),o!=null&&eL(e,n,o,t,i)}}function FO(n,e){return n.createText(e)}function VO(n,e,t){n.setValue(e,t)}function BO(n,e){return n.createComment(kO(e))}function wD(n,e,t){return n.createElement(e,t)}function UO(n,e){ID(n,e),e[Vi]=null,e[Ar]=null}function jO(n,e,t,r,i,o){r[Vi]=i,r[Ar]=e,pp(n,r,t,1,i,o)}function ID(n,e){e[Yr].changeDetectionScheduler?.notify(9),pp(n,e,e[Ut],2,null,null)}function $O(n){let e=n[bl];if(!e)return S_(n[Ve],n);for(;e;){let t=null;if(Ao(e))t=e[bl];else{let r=e[ar];r&&(t=r)}if(!t){for(;e&&!e[Dr]&&e!==n;)Ao(e)&&S_(e[Ve],e),e=e[Mn];e===null&&(e=n),Ao(e)&&S_(e[Ve],e),t=e&&e[Dr]}e=t}}function zO(n,e,t,r){let i=ar+r,o=t.length;r>0&&(t[i-1][Dr]=e),r<o-ar?(e[Dr]=t[i],rT(t,ar+r,e)):(t.push(e),e[Dr]=null),e[Mn]=t;let a=e[fu];a!==null&&t!==a&&ED(a,e);let c=e[pu];c!==null&&c.insertView(n),z_(e),e[Ce]|=128}function ED(n,e){let t=n[kf],r=e[Mn];if(Ao(r))n[Ce]|=Of.HasTransplantedViews;else{let i=r[Mn][Jr];e[Jr]!==i&&(n[Ce]|=Of.HasTransplantedViews)}t===null?n[kf]=[e]:t.push(e)}function Wv(n,e){let t=n[kf],r=t.indexOf(e);t.splice(r,1)}function tv(n,e){if(n.length<=ar)return;let t=ar+e,r=n[t];if(r){let i=r[fu];i!==null&&i!==n&&Wv(i,r),e>0&&(n[t-1][Dr]=r[Dr]);let o=xf(n,ar+e);UO(r[Ve],r);let a=o[pu];a!==null&&a.detachView(o[Ve]),r[Mn]=null,r[Dr]=null,r[Ce]&=-129}return r}function bD(n,e){if(!(e[Ce]&256)){let t=e[Ut];t.destroyNode&&pp(n,e,t,3,null,null),$O(e)}}function S_(n,e){if(e[Ce]&256)return;let t=Ke(null);try{e[Ce]&=-129,e[Ce]|=256,e[sr]&&e_(e[sr]),qO(n,e),HO(n,e),e[Ve].type===1&&e[Ut].destroy();let r=e[fu];if(r!==null&&Bi(e[Mn])){r!==e[Mn]&&Wv(r,e);let i=e[pu];i!==null&&i.detachView(n)}X_(e)}finally{Ke(t)}}function HO(n,e){let t=n.cleanup,r=e[Rf];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[Rf]=null);let i=e[So];if(i!==null){e[So]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}}function qO(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Fs)){let o=t[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let c=i[o[a]],d=o[a+1];Zr(4,c,d);try{d.call(c)}finally{Zr(5,c,d)}}else{Zr(4,i,o);try{o.call(i)}finally{Zr(5,i,o)}}}}}function GO(n,e,t){return WO(n,e.parent,t)}function WO(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Vi];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Qr.None||o===Qr.Emulated)return null}return lr(r,t)}}function zf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function CD(n,e,t){n.appendChild(e,t)}function PC(n,e,t,r,i){r!==null?zf(n,e,t,r,i):CD(n,e,t)}function TD(n,e){return n.parentNode(e)}function ZO(n,e){return n.nextSibling(e)}function KO(n,e,t){return YO(n,e,t)}function QO(n,e,t){return n.type&40?lr(n,t):null}var YO=QO,RC;function fp(n,e,t,r){let i=GO(n,r,e),o=e[Ut],a=r.parent||e[Ar],c=KO(a,r,e);if(i!=null)if(Array.isArray(t))for(let d=0;d<t.length;d++)PC(o,i,t[d],c,!1);else PC(o,i,t,c,!1);RC!==void 0&&RC(o,r,e,t,i)}function vl(n,e){if(e!==null){let t=e.type;if(t&3)return lr(e,n);if(t&4)return nv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return vl(n,r);{let i=n[e.index];return Bi(i)?nv(-1,i):Xr(i)}}else{if(t&128)return vl(n,e.next);if(t&32)return Gv(e,n)()||Xr(n[e.index]);{let r=DD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Os(n[Jr]);return vl(i,r)}else return vl(n,e.next)}}}return null}function DD(n,e){if(e!==null){let r=n[Jr][Ar],i=e.projection;return r.projection[i]}return null}function nv(n,e){let t=ar+n+1;if(t<e.length){let r=e[t],i=r[Ve].firstChild;if(i!==null)return vl(r,i)}return e[ks]}function JO(n,e,t){n.removeChild(null,e,t)}function Zv(n,e,t,r,i,o,a){for(;t!=null;){if(t.type===128){t=t.next;continue}let c=r[t.index],d=t.type;if(a&&e===0&&(c&&Ro(Xr(c),r),t.flags|=2),(t.flags&32)!==32)if(d&8)Zv(n,e,t.child,r,i,o,!1),iu(e,n,i,c,o);else if(d&32){let f=Gv(t,r),g;for(;g=f();)iu(e,n,i,g,o);iu(e,n,i,c,o)}else d&16?XO(n,e,r,t,i,o):iu(e,n,i,c,o);t=a?t.projectionNext:t.next}}function pp(n,e,t,r,i,o){Zv(t,r,n.firstChild,e,i,o,!1)}function XO(n,e,t,r,i,o){let a=t[Jr],d=a[Ar].projection[r.projection];if(Array.isArray(d))for(let f=0;f<d.length;f++){let g=d[f];iu(e,n,i,g,o)}else{let f=d,g=a[Mn];cD(r)&&(f.flags|=128),Zv(n,e,f,g,i,o,!0)}}function eL(n,e,t,r,i){let o=t[ks],a=Xr(t);o!==a&&iu(e,n,r,o,i);for(let c=ar;c<t.length;c++){let d=t[c];pp(d[Ve],d,n,e,r,o)}}function tL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:ki.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ki.Important),n.setStyle(t,r,i,o))}}function nL(n,e,t){n.setAttribute(e,"style",t)}function SD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function AD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&F_(n,e,r),i!==null&&SD(n,e,i),o!==null&&nL(n,e,o)}var ii={};function H(n=1){xD(fn(),Ye(),js()+n,!1)}function xD(n,e,t,r){if(!r)if((e[Ce]&3)===3){let o=n.preOrderCheckHooks;o!==null&&bf(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Cf(e,o,0,t)}Ls(t)}function Q(n,e=Le.Default){let t=Ye();if(t===null)return ge(n,e);let r=pn();return nD(r,t,An(n),e)}function MD(){let n="invalid";throw new Error(n)}function PD(n,e,t,r,i,o){let a=Ke(null);try{let c=null;i&xo.SignalBased&&(c=e[r][Ri]),c!==null&&c.transformFn!==void 0&&(o=c.transformFn(o)),i&xo.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,c,o,t,r):bT(e,c,r,o)}finally{Ke(a)}}function rL(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ls(~i);else{let o=i,a=t[++r],c=t[++r];Fk(a,o);let d=e[o];c(2,d)}}}finally{Ls(-1)}}function mp(n,e,t,r,i,o,a,c,d,f,g){let y=e.blueprint.slice();return y[Vi]=i,y[Ce]=r|4|128|8|64,(f!==null||n&&n[Ce]&2048)&&(y[Ce]|=2048),PT(y),y[Mn]=y[Eu]=n,y[Sr]=t,y[Yr]=a||n&&n[Yr],y[Ut]=c||n&&n[Ut],y[hu]=d||n&&n[hu]||null,y[Ar]=o,y[tp]=_O(),y[Pf]=g,y[IT]=f,y[Jr]=e.type==2?n[Jr]:y,y}function xl(n,e,t,r,i){let o=n.data[e];if(o===null)o=iL(n,e,t,r,i),Lk()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let a=Rk();o.injectorIndex=a===null?-1:a.injectorIndex}return Us(o,!0),o}function iL(n,e,t,r,i){let o=LT(),a=Rv(),c=a?o:o&&o.parent,d=n.data[e]=cL(n,c,t,e,r,i);return n.firstChild===null&&(n.firstChild=d),o!==null&&(a?o.child==null&&d.parent!==null&&(o.child=d):o.next===null&&(o.next=d,d.prev=o)),d}function RD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function ND(n,e,t,r,i){let o=js(),a=r&2;try{Ls(-1),a&&e.length>ur&&xD(n,e,ur,!1),Zr(a?2:0,i),t(r,i)}finally{Ls(o),Zr(a?3:1,i)}}function Kv(n,e,t){if(Mv(e)){let r=Ke(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let a=i;a<o;a++){let c=n.data[a];if(c.contentQueries){let d=t[a];c.contentQueries(1,d,a)}}}finally{Ke(r)}}}function Qv(n,e,t){OT()&&(mL(n,e,t,lr(t,e)),(t.flags&64)===64&&FD(n,e,t))}function Yv(n,e,t=lr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let a=r[o+1],c=a===-1?t(e,n):n[a];n[i++]=c}}}function kD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Jv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Jv(n,e,t,r,i,o,a,c,d,f,g){let y=ur+r,E=y+i,C=oL(y,E),V=typeof f=="function"?f():f;return C[Ve]={type:n,blueprint:C,template:t,queries:null,viewQuery:c,declTNode:e,data:C.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:d,consts:V,incompleteFirstPass:!1,ssrId:g}}function oL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ii);return t}function sL(n,e,t,r){let o=r.get(CO,mD)||t===Qr.ShadowDom,a=n.selectRootElement(e,o);return aL(a),a}function aL(n){uL(n)}var uL=()=>null;function cL(n,e,t,r,i,o){let a=e?e.injectorIndex:-1,c=0;return xk()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function NC(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let a=e[o];if(a===void 0)continue;r??={};let c,d=xo.None;Array.isArray(a)?(c=a[0],d=a[1]):c=a;let f=o;if(i!==null){if(!i.hasOwnProperty(o))continue;f=i[o]}n===0?kC(r,t,f,c,d):kC(r,t,f,c)}return r}function kC(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function lL(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,a=e.attrs,c=[],d=null,f=null;for(let g=r;g<i;g++){let y=o[g],E=t?t.get(y):null,C=E?E.inputs:null,V=E?E.outputs:null;d=NC(0,y.inputs,g,d,C),f=NC(1,y.outputs,g,f,V);let z=d!==null&&a!==null&&!Sv(e)?DL(d,g,a):null;c.push(z)}d!==null&&(d.hasOwnProperty("class")&&(e.flags|=8),d.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=d,e.outputs=f}function dL(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function OD(n,e,t,r,i,o,a,c){let d=lr(e,t),f=e.inputs,g;!c&&f!=null&&(g=f[r])?(ey(n,t,g,r,i),np(e)&&hL(t,e.index)):e.type&3?(r=dL(r),i=a!=null?a(i,e.value||"",r):i,o.setProperty(d,r,i)):e.type&12}function hL(n,e){let t=Oo(e,n);t[Ce]&16||(t[Ce]|=64)}function Xv(n,e,t,r){if(OT()){let i=r===null?null:{"":-1},o=_L(n,t),a,c;o===null?a=c=null:[a,c]=o,a!==null&&LD(n,e,t,a,i,c),i&&vL(t,r,i)}t.mergedAttrs=Il(t.mergedAttrs,t.attrs)}function LD(n,e,t,r,i,o){for(let f=0;f<r.length;f++)W_(Bf(t,e),n,r[f].type);wL(t,n.data.length,r.length);for(let f=0;f<r.length;f++){let g=r[f];g.providersResolver&&g.providersResolver(g)}let a=!1,c=!1,d=RD(n,e,r.length,null);for(let f=0;f<r.length;f++){let g=r[f];t.mergedAttrs=Il(t.mergedAttrs,g.hostAttrs),IL(n,t,e,d,g),yL(d,g,i),g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let y=g.type.prototype;!a&&(y.ngOnChanges||y.ngOnInit||y.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),a=!0),!c&&(y.ngOnChanges||y.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),c=!0),d++}lL(n,t,o)}function fL(n,e,t,r,i){let o=i.hostBindings;if(o){let a=n.hostBindingOpCodes;a===null&&(a=n.hostBindingOpCodes=[]);let c=~e.index;pL(a)!=c&&a.push(c),a.push(t,r,o)}}function pL(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function mL(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;np(t)&&EL(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Bf(t,e),Ro(r,e);let a=t.initialInputs;for(let c=i;c<o;c++){let d=n.data[c],f=gu(e,n,c,t);if(Ro(f,e),a!==null&&TL(e,c-i,f,d,t,a),Po(d)){let g=Oo(t.index,e);g[Sr]=gu(e,n,c,t)}}}function FD(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,a=Vk();try{Ls(o);for(let c=r;c<i;c++){let d=n.data[c],f=e[c];H_(c),(d.hostBindings!==null||d.hostVars!==0||d.hostAttrs!==null)&&gL(d,f)}}finally{Ls(-1),H_(a)}}function gL(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function _L(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let a=t[o];if(Y1(e,a.selectors,!1))if(r||(r=[]),Po(a))if(a.findHostDirectiveDefs!==null){let c=[];i=i||new Map,a.findHostDirectiveDefs(a,c,i),r.unshift(...c,a);let d=c.length;rv(n,e,d)}else r.unshift(a),rv(n,e,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return r===null?null:[r,i]}function rv(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function vL(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ue(-301,!1);r.push(e[i],o)}}}function yL(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Po(e)&&(t[""]=n)}}function wL(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function IL(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Ns(i.type,!0)),a=new Fs(o,Po(i),Q);n.blueprint[r]=a,t[r]=a,fL(n,e,r,RD(n,t,i.hostVars,ii),i)}function EL(n,e,t){let r=lr(e,n),i=kD(t),o=n[Yr].rendererFactory,a=16;t.signals?a=4096:t.onPush&&(a=64);let c=gp(n,mp(n,i,null,a,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=c}function bL(n,e,t,r,i,o){let a=lr(n,e);CL(e[Ut],a,o,n.value,t,r,i)}function CL(n,e,t,r,i,o,a){if(o==null)n.removeAttribute(e,i,t);else{let c=a==null?uu(o):a(o,r||"",i);n.setAttribute(e,i,c,t)}}function TL(n,e,t,r,i,o){let a=o[e];if(a!==null)for(let c=0;c<a.length;){let d=a[c++],f=a[c++],g=a[c++],y=a[c++];PD(r,t,d,f,g,y)}}function DL(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let a=n[o];for(let c=0;c<a.length;c+=3)if(a[c]===e){r.push(o,a[c+1],a[c+2],t[i+1]);break}}i+=2}return r}function VD(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function BD(n,e){let t=n.contentQueries;if(t!==null){let r=Ke(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],a=t[i+1];if(a!==-1){let c=n.data[a];UT(o),c.contentQueries(2,e[a],a)}}}finally{Ke(r)}}}function gp(n,e){return n[bl]?n[yC][Dr]=e:n[bl]=e,n[yC]=e,e}function iv(n,e,t){UT(0);let r=Ke(null);try{e(n,t)}finally{Ke(r)}}function SL(n){return n[Rf]??=[]}function AL(n){return n.cleanup??=[]}function UD(n,e){let t=n[hu],r=t?t.get(Ni,null):null;r&&r.handleError(e)}function ey(n,e,t,r,i){for(let o=0;o<t.length;){let a=t[o++],c=t[o++],d=t[o++],f=e[a],g=n.data[a];PD(g,f,r,c,d,i)}}function jD(n,e,t){let r=AT(e,n);VO(n[Ut],r,t)}function xL(n,e){let t=Oo(e,n),r=t[Ve];ML(r,t);let i=t[Vi];i!==null&&t[Pf]===null&&(t[Pf]=Hv(i,t[hu])),ty(r,t,t[Sr])}function ML(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ty(n,e,t){Nv(e);try{let r=n.viewQuery;r!==null&&iv(1,r,t);let i=n.template;i!==null&&ND(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[pu]?.finishViewCreation(n),n.staticContentQueries&&BD(n,e),n.staticViewQueries&&iv(2,n.viewQuery,t);let o=n.components;o!==null&&PL(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ce]&=-5,kv()}}function PL(n,e){for(let t=0;t<e.length;t++)xL(n,e[t])}function RL(n,e,t,r){let i=Ke(null);try{let o=e.tView,c=n[Ce]&4096?4096:16,d=mp(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),f=n[e.index];d[fu]=f;let g=n[pu];return g!==null&&(d[pu]=g.createEmbeddedView(o)),ty(o,d,t),d}finally{Ke(i)}}function OC(n,e){return!e||e.firstChild===null||cD(n)}function NL(n,e,t,r=!0){let i=e[Ve];if(zO(i,e,n,t),r){let a=nv(t,n),c=e[Ut],d=TD(c,n[ks]);d!==null&&jO(i,n[Ar],c,e,d,a)}let o=e[Pf];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Hf(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Xr(o)),Bi(o)&&kL(o,r);let a=t.type;if(a&8)Hf(n,e,t.child,r);else if(a&32){let c=Gv(t,e),d;for(;d=c();)r.push(d)}else if(a&16){let c=DD(e,t);if(Array.isArray(c))r.push(...c);else{let d=Os(e[Jr]);Hf(d[Ve],d,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function kL(n,e){for(let t=ar;t<n.length;t++){let r=n[t],i=r[Ve].firstChild;i!==null&&Hf(r[Ve],r,i,e)}n[ks]!==n[Vi]&&e.push(n[ks])}var $D=[];function OL(n){return n[sr]??LL(n)}function LL(n){let e=$D.pop()??Object.create(VL);return e.lView=n,e}function FL(n){n.lView[sr]!==n&&(n.lView=null,$D.push(n))}var VL=Pe(Y({},pl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{op(n.lView)},consumerOnSignalRead(){this.lView[sr]=this}});function BL(n){let e=n[sr]??Object.create(UL);return e.lView=n,e}var UL=Pe(Y({},pl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Os(n.lView);for(;e&&!zD(e[Ve]);)e=Os(e);e&&RT(e)},consumerOnSignalRead(){this.lView[sr]=this}});function zD(n){return n.type!==2}var jL=100;function HD(n,e=!0,t=0){let r=n[Yr],i=r.rendererFactory,o=!1;o||i.begin?.();try{$L(n,t)}catch(a){throw e&&UD(n,a),a}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function $L(n,e){let t=VT();try{IC(!0),ov(n,e);let r=0;for(;ip(n);){if(r===jL)throw new ue(103,!1);r++,ov(n,1)}}finally{IC(t)}}function zL(n,e,t,r){let i=e[Ce];if((i&256)===256)return;let o=!1,a=!1;!o&&e[Yr].inlineEffectRunner?.flush(),Nv(e);let c=!0,d=null,f=null;o||(zD(n)?(f=OL(e),d=Uh(f)):Tb()===null?(c=!1,f=BL(e),d=Uh(f)):e[sr]&&(e_(e[sr]),e[sr]=null));try{PT(e),Ok(n.bindingStartIndex),t!==null&&ND(n,e,t,2,r);let g=(i&3)===3;if(!o)if(g){let C=n.preOrderCheckHooks;C!==null&&bf(e,C,null)}else{let C=n.preOrderHooks;C!==null&&Cf(e,C,0,null),b_(e,0)}if(a||HL(e),qD(e,0),n.contentQueries!==null&&BD(n,e),!o)if(g){let C=n.contentCheckHooks;C!==null&&bf(e,C)}else{let C=n.contentHooks;C!==null&&Cf(e,C,1),b_(e,1)}rL(n,e);let y=n.components;y!==null&&WD(e,y,0);let E=n.viewQuery;if(E!==null&&iv(2,E,r),!o)if(g){let C=n.viewCheckHooks;C!==null&&bf(e,C)}else{let C=n.viewHooks;C!==null&&Cf(e,C,2),b_(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[E_]){for(let C of e[E_])C();e[E_]=null}o||(e[Ce]&=-73)}catch(g){throw o||op(e),g}finally{f!==null&&(Jg(f,d),c&&FL(f)),kv()}}function qD(n,e){for(let t=dD(n);t!==null;t=hD(t))for(let r=ar;r<t.length;r++){let i=t[r];GD(i,e)}}function HL(n){for(let e=dD(n);e!==null;e=hD(e)){if(!(e[Ce]&Of.HasTransplantedViews))continue;let t=e[kf];for(let r=0;r<t.length;r++){let i=t[r];RT(i)}}}function qL(n,e,t){let r=Oo(e,n);GD(r,t)}function GD(n,e){Pv(n)&&ov(n,e)}function ov(n,e){let r=n[Ve],i=n[Ce],o=n[sr],a=!!(e===0&&i&16);if(a||=!!(i&64&&e===0),a||=!!(i&1024),a||=!!(o?.dirty&&Xg(o)),a||=!1,o&&(o.dirty=!1),n[Ce]&=-9217,a)zL(r,n,r.template,n[Sr]);else if(i&8192){qD(n,1);let c=r.components;c!==null&&WD(n,c,1)}}function WD(n,e,t){for(let r=0;r<e.length;r++)qL(n,e[r],t)}function ny(n,e){let t=VT()?64:1088;for(n[Yr].changeDetectionScheduler?.notify(e);n;){n[Ce]|=t;let r=Os(n);if(j_(n)&&!r)return n;n=r}return null}var Vs=class{get rootNodes(){let e=this._lView,t=e[Ve];return Hf(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Sr]}set context(e){this._lView[Sr]=e}get destroyed(){return(this._lView[Ce]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Mn];if(Bi(e)){let t=e[Nf],r=t?t.indexOf(this):-1;r>-1&&(tv(e,r),xf(t,r))}this._attachedToViewContainer=!1}bD(this._lView[Ve],this._lView)}onDestroy(e){NT(this._lView,e)}markForCheck(){ny(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ce]&=-129}reattach(){z_(this._lView),this._lView[Ce]|=128}detectChanges(){this._lView[Ce]|=1024,HD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=j_(this._lView),t=this._lView[fu];t!==null&&!e&&Wv(t,this._lView),ID(this._lView[Ve],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ue(902,!1);this._appRef=e;let t=j_(this._lView),r=this._lView[fu];r!==null&&!t&&ED(r,this._lView),z_(this._lView)}},_p=(()=>{class n{static{this.__NG_ELEMENT_ID__=ZL}}return n})(),GL=_p,WL=class extends GL{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=RL(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Vs(i)}};function ZL(){return ZD(pn(),Ye())}function ZD(n,e){return n.type&4?new WL(e,n,dp(n,e)):null}var m7=new RegExp(`^(\\d+)*(${EO}|${IO})*(.*)`);var KL=()=>null;function LC(n,e){return KL(n,e)}var _u=class{},vp=new ae("",{providedIn:"root",factory:()=>!1});var KD=new ae(""),QD=new ae(""),sv=class{},qf=class{};function QL(n){let e=Error(`No component factory found for ${xn(n)}.`);return e[YL]=n,e}var YL="ngComponent";var av=class{resolveComponentFactory(e){throw QL(e)}},vu=class{static{this.NULL=new av}},yu=class{},oi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>JL()}}return n})();function JL(){let n=Ye(),e=pn(),t=Oo(e.index,n);return(Ao(t)?t:n)[Ut]}var XL=(()=>{class n{static{this.\u0275prov=oe({token:n,providedIn:"root",factory:()=>null})}}return n})();function Gf(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number")o=c;else if(o==1)i=cC(i,c);else if(o==2){let d=c,f=e[++a];r=cC(r,d+": "+f+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Wf=class extends vu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Mo(e);return new wu(t,this.ngModule)}};function FC(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),a=o?i[0]:i,c=o?i[1]:xo.None;e?t.push({propName:a,templateName:r,isSignal:(c&xo.SignalBased)!==0}):t.push({propName:a,templateName:r})}return t}function eF(n){let e=n.toLowerCase();return e==="svg"?ST:e==="math"?Ek:null}var wu=class extends qf{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=FC(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return FC(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=tk(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Ke(null);try{i=i||this.ngModule;let a=i instanceof Zn?i:i?.injector;a&&this.componentDef.getStandaloneInjector!==null&&(a=this.componentDef.getStandaloneInjector(a)||a);let c=a?new q_(e,a):e,d=c.get(yu,null);if(d===null)throw new ue(407,!1);let f=c.get(XL,null),g=c.get(_u,null),y={rendererFactory:d,sanitizer:f,inlineEffectRunner:null,changeDetectionScheduler:g},E=d.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",V=r?sL(E,r,this.componentDef.encapsulation,c):wD(E,C,eF(C)),z=512;this.componentDef.signals?z|=4096:this.componentDef.onPush||(z|=16);let $=null;V!==null&&($=Hv(V,c,!0));let Z=Jv(0,null,null,1,0,null,null,null,null,null,null),ne=mp(null,Z,null,z,null,null,y,E,c,null,$);Nv(ne);let se,ce,st=null;try{let he=this.componentDef,P,T=null;he.findHostDirectiveDefs?(P=[],T=new Map,he.findHostDirectiveDefs(he,P,T),P.push(he)):P=[he];let D=tF(ne,V);st=nF(D,V,he,P,ne,y,E),ce=xT(Z,ur),V&&oF(E,he,V,r),t!==void 0&&sF(ce,this.ngContentSelectors,t),se=iF(st,he,P,T,ne,[aF]),ty(Z,ne,null)}catch(he){throw st!==null&&X_(st),X_(ne),he}finally{kv()}return new uv(this.componentType,se,dp(ce,ne),ne,ce)}finally{Ke(o)}}},uv=class extends sv{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Vs(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;ey(o[Ve],o,i,e,t),this.previousInputValues.set(e,t);let a=Oo(this._tNode.index,o);ny(a,1)}}get injector(){return new Rs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function tF(n,e){let t=n[Ve],r=ur;return n[r]=e,xl(t,r,2,"#host",null)}function nF(n,e,t,r,i,o,a){let c=i[Ve];rF(r,n,e,a);let d=null;e!==null&&(d=Hv(e,i[hu]));let f=o.rendererFactory.createRenderer(e,t),g=16;t.signals?g=4096:t.onPush&&(g=64);let y=mp(i,kD(t),null,g,i[n.index],n,o,f,null,null,d);return c.firstCreatePass&&rv(c,n,r.length-1),gp(i,y),i[n.index]=y}function rF(n,e,t,r){for(let i of n)e.mergedAttrs=Il(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Gf(e,e.mergedAttrs,!0),t!==null&&AD(r,t,e))}function iF(n,e,t,r,i,o){let a=pn(),c=i[Ve],d=lr(a,i);LD(c,i,a,t,null,r);for(let g=0;g<t.length;g++){let y=a.directiveStart+g,E=gu(i,c,y,a);Ro(E,i)}FD(c,i,a),d&&Ro(d,i);let f=gu(i,c,a.directiveStart+a.componentOffset,a);if(n[Sr]=i[Sr]=f,o!==null)for(let g of o)g(f,e);return Kv(c,a,i),f}function oF(n,e,t,r){if(r)F_(n,t,["ng-version","18.2.10"]);else{let{attrs:i,classes:o}=nk(e.selectors[0]);i&&F_(n,t,i),o&&o.length>0&&SD(n,t,o.join(" "))}}function sF(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function aF(){let n=pn();lp(Ye()[Ve],n)}var Cu=(()=>{class n{static{this.__NG_ELEMENT_ID__=uF}}return n})();function uF(){let n=pn();return lF(n,Ye())}var cF=Cu,YD=class extends cF{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return dp(this._hostTNode,this._hostLView)}get injector(){return new Rs(this._hostTNode,this._hostLView)}get parentInjector(){let e=Lv(this._hostTNode,this._hostLView);if(QT(e)){let t=Ff(e,this._hostLView),r=Lf(e),i=t[Ve].data[r+8];return new Rs(i,t)}else return new Rs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=VC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-ar}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let a=LC(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,a);return this.insertImpl(c,i,OC(this._hostTNode,a)),c}createComponent(e,t,r,i,o){let a=e&&!vk(e),c;if(a)c=t;else{let V=t||{};c=V.index,r=V.injector,i=V.projectableNodes,o=V.environmentInjector||V.ngModuleRef}let d=a?e:new wu(Mo(e)),f=r||this.parentInjector;if(!o&&d.ngModule==null){let z=(a?f:this.parentInjector).get(Zn,null);z&&(o=z)}let g=Mo(d.componentType??{}),y=LC(this._lContainer,g?.id??null),E=y?.firstChild??null,C=d.create(f,i,E,o);return this.insertImpl(C.hostView,c,OC(this._hostTNode,y)),C}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(bk(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let d=i[Mn],f=new YD(d,d[Ar],d[Mn]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(t),a=this._lContainer;return NL(a,i,o,r),e.attachToViewContainerRef(),rT(A_(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=VC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=tv(this._lContainer,t);r&&(xf(A_(this._lContainer),t),bD(r[Ve],r))}detach(e){let t=this._adjustIndex(e,-1),r=tv(this._lContainer,t);return r&&xf(A_(this._lContainer),t)!=null?new Vs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function VC(n){return n[Nf]}function A_(n){return n[Nf]||(n[Nf]=[])}function lF(n,e){let t,r=e[n.index];return Bi(r)?t=r:(t=VD(r,e,null,n),e[n.index]=t,gp(e,t)),hF(t,e,n,r),new YD(t,n,e)}function dF(n,e){let t=n[Ut],r=t.createComment(""),i=lr(e,n),o=TD(t,i);return zf(t,o,r,ZO(t,i),!1),r}var hF=mF,fF=()=>!1;function pF(n,e,t){return fF(n,e,t)}function mF(n,e,t,r){if(n[ks])return;let i;t.type&8?i=Xr(r):i=dF(e,t),n[ks]=i}var BC=new Set;function Tu(n){BC.has(n)||(BC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function gF(n){return typeof n=="function"&&n[Ri]!==void 0}function Du(n,e){Tu("NgSignals");let t=Lb(n),r=t[Ri];return e?.equal&&(r.equal=e.equal),t.set=i=>t_(r,i),t.update=i=>Fb(r,i),t.asReadonly=_F.bind(t),t}function _F(){let n=this[Ri];if(n.readonlyFn===void 0){let e=()=>this();e[Ri]=n,n.readonlyFn=e}return n.readonlyFn}function JD(n){return gF(n)&&typeof n.set=="function"}function vF(n){return Object.getPrototypeOf(n.prototype).constructor}function Ln(n){let e=vF(n.type),t=!0,r=[n];for(;e;){let i;if(Po(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ue(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let a=n;a.inputs=yf(n.inputs),a.inputTransforms=yf(n.inputTransforms),a.declaredInputs=yf(n.declaredInputs),a.outputs=yf(n.outputs);let c=i.hostBindings;c&&bF(n,c);let d=i.viewQuery,f=i.contentQueries;if(d&&IF(n,d),f&&EF(n,f),yF(n,i),b1(n.outputs,i.outputs),Po(i)&&i.data.animation){let g=n.data;g.animation=(g.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let a=0;a<o.length;a++){let c=o[a];c&&c.ngInherit&&c(n),c===Ln&&(t=!1)}}e=Object.getPrototypeOf(e)}wF(r)}function yF(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function wF(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Il(i.hostAttrs,t=Il(t,i.hostAttrs))}}function yf(n){return n===cu?{}:n===or?[]:n}function IF(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function EF(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function bF(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function ry(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var No=class{},Cl=class{};var cv=class extends No{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Wf(this);let o=fT(e);this._bootstrapComponents=yD(o.bootstrap),this._r3Injector=oD(e,t,[{provide:No,useValue:this},{provide:vu,useValue:this.componentFactoryResolver},...r],xn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},lv=class extends Cl{constructor(e){super(),this.moduleType=e}create(e){return new cv(this.moduleType,e,[])}};var Zf=class extends No{constructor(e){super(),this.componentFactoryResolver=new Wf(this),this.instance=null;let t=new El([...e.providers,{provide:No,useValue:this},{provide:vu,useValue:this.componentFactoryResolver}],e.parent||xv(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function yp(n,e,t=null){return new Zf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function XD(n){return TF(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function CF(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function TF(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function iy(n,e,t){return n[e]=t}function DF(n,e){return n[e]}function ko(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function eS(n,e,t,r){let i=ko(n,e,t);return ko(n,e+1,r)||i}function SF(n){return(n.flags&32)===32}function AF(n,e,t,r,i,o,a,c,d){let f=e.consts,g=xl(e,n,4,a||null,c||null);Xv(e,t,g,mu(f,d)),lp(e,g);let y=g.tView=Jv(2,g,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,f,null);return e.queries!==null&&(e.queries.template(e,g),y.queries=e.queries.embeddedTView(g)),g}function xF(n,e,t,r,i,o,a,c,d,f){let g=t+ur,y=e.firstCreatePass?AF(g,e,n,r,i,o,a,c,d):e.data[g];Us(y,!1);let E=MF(e,n,y,t);up()&&fp(e,n,E,y),Ro(E,n);let C=VD(E,n,E,y);return n[g]=C,gp(n,C),pF(C,y,n),rp(y)&&Qv(e,n,y),d!=null&&Yv(n,y,f),y}function Ie(n,e,t,r,i,o,a,c){let d=Ye(),f=fn(),g=mu(f.consts,o);return xF(d,f,n,e,t,r,i,g,a,c),Ie}var MF=PF;function PF(n,e,t,r){return cp(!0),e[Ut].createComment("")}var ou=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ou||{}),tS=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=oe({token:n,providedIn:"root",factory:()=>new n})}}return n})(),dv=class n{constructor(){this.ngZone=W(et),this.scheduler=W(_u),this.errorHandler=W(Ni,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[ou.EarlyRead,ou.Write,ou.MixedReadWrite,ou.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=oe({token:n,providedIn:"root",factory:()=>new n})}},hv=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function oy(n,e){!e?.injector&&_k(oy);let t=e?.injector??W(un);return OO(t)?(Tu("NgAfterNextRender"),NF(n,t,e,!0)):kF}function RF(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function NF(n,e,t,r){let i=e.get(tS);i.impl??=e.get(dv);let o=t?.phase??ou.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(Vv):null,c=new hv(i.impl,RF(n,o),r,a);return i.impl.register(c),c}var kF={destroy(){}};function Ml(n,e,t,r){let i=Ye(),o=ap();if(ko(i,o,e)){let a=fn(),c=Ov();bL(c,i,n,e,t,r)}return Ml}function OF(n,e,t,r){return ko(n,ap(),t)?e+uu(t)+r:ii}function LF(n,e,t,r,i,o){let a=kk(),c=eS(n,a,t,i);return BT(2),c?e+uu(t)+r+uu(i)+o:ii}function wf(n,e){return n<<17|e<<2}function Bs(n){return n>>17&32767}function FF(n){return(n&2)==2}function VF(n,e){return n&131071|e<<17}function fv(n){return n|2}function Iu(n){return(n&131068)>>2}function x_(n,e){return n&-131069|e<<2}function BF(n){return(n&1)===1}function pv(n){return n|1}function UF(n,e,t,r,i,o){let a=o?e.classBindings:e.styleBindings,c=Bs(a),d=Iu(a);n[r]=t;let f=!1,g;if(Array.isArray(t)){let y=t;g=y[1],(g===null||Sl(y,g)>0)&&(f=!0)}else g=t;if(i)if(d!==0){let E=Bs(n[c+1]);n[r+1]=wf(E,c),E!==0&&(n[E+1]=x_(n[E+1],r)),n[c+1]=VF(n[c+1],r)}else n[r+1]=wf(c,0),c!==0&&(n[c+1]=x_(n[c+1],r)),c=r;else n[r+1]=wf(d,0),c===0?c=r:n[d+1]=x_(n[d+1],r),d=r;f&&(n[r+1]=fv(n[r+1])),UC(n,g,r,!0),UC(n,g,r,!1),jF(e,g,n,r,o),a=wf(c,d),o?e.classBindings=a:e.styleBindings=a}function jF(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Sl(o,e)>=0&&(t[r+1]=pv(t[r+1]))}function UC(n,e,t,r){let i=n[t+1],o=e===null,a=r?Bs(i):Iu(i),c=!1;for(;a!==0&&(c===!1||o);){let d=n[a],f=n[a+1];$F(d,e)&&(c=!0,n[a+1]=r?pv(f):fv(f)),a=r?Bs(f):Iu(f)}c&&(n[t+1]=r?fv(i):pv(i))}function $F(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Sl(n,e)>=0:!1}function te(n,e,t){let r=Ye(),i=ap();if(ko(r,i,e)){let o=fn(),a=Ov();OD(o,a,r,n,e,r[Ut],t,!1)}return te}function jC(n,e,t,r,i){let o=e.inputs,a=i?"class":"style";ey(n,t,o[a],a,r)}function wp(n,e){return zF(n,e,null,!0),wp}function zF(n,e,t,r){let i=Ye(),o=fn(),a=BT(2);if(o.firstUpdatePass&&qF(o,n,a,r),e!==ii&&ko(i,a,e)){let c=o.data[js()];QF(o,c,i,i[Ut],n,i[a+1]=YF(e,t),r,a)}}function HF(n,e){return e>=n.expandoStartIndex}function qF(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[js()],a=HF(n,t);JF(o,r)&&e===null&&!a&&(e=!1),e=GF(i,o,e,r),UF(i,o,e,t,a,r)}}function GF(n,e,t,r){let i=Bk(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=M_(null,n,e,t,r),t=Tl(t,e.attrs,r),o=null);else{let a=e.directiveStylingLast;if(a===-1||n[a]!==i)if(t=M_(i,n,e,t,r),o===null){let d=WF(n,e,r);d!==void 0&&Array.isArray(d)&&(d=M_(null,n,e,d[1],r),d=Tl(d,e.attrs,r),ZF(n,e,r,d))}else o=KF(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function WF(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Iu(r)!==0)return n[Bs(r)]}function ZF(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Bs(i)]=r}function KF(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let a=n[o].hostAttrs;r=Tl(r,a,t)}return Tl(r,e.attrs,t)}function M_(n,e,t,r,i){let o=null,a=t.directiveEnd,c=t.directiveStylingLast;for(c===-1?c=t.directiveStart:c++;c<a&&(o=e[c],r=Tl(r,o.hostAttrs,i),o!==n);)c++;return n!==null&&(t.directiveStylingLast=c),r}function Tl(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?i=a:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),z1(n,a,t?!0:e[++o]))}return n===void 0?null:n}function QF(n,e,t,r,i,o,a,c){if(!(e.type&3))return;let d=n.data,f=d[c+1],g=BF(f)?$C(d,e,t,i,Iu(f),a):void 0;if(!Kf(g)){Kf(o)||FF(f)&&(o=$C(d,null,t,i,c,a));let y=AT(js(),t);tL(r,a,y,i,o)}}function $C(n,e,t,r,i,o){let a=e===null,c;for(;i>0;){let d=n[i],f=Array.isArray(d),g=f?d[1]:d,y=g===null,E=t[i+1];E===ii&&(E=y?or:void 0);let C=y?w_(E,r):g===r?E:void 0;if(f&&!Kf(C)&&(C=w_(d,r)),Kf(C)&&(c=C,a))return c;let V=n[i+1];i=a?Bs(V):Iu(V)}if(e!==null){let d=o?e.residualClasses:e.residualStyles;d!=null&&(c=w_(d,r))}return c}function Kf(n){return n!==void 0}function YF(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=xn(Al(n)))),n}function JF(n,e){return(n.flags&(e?8:16))!==0}function XF(n,e,t,r,i,o){let a=e.consts,c=mu(a,i),d=xl(e,n,2,r,c);return Xv(e,t,d,mu(a,o)),d.attrs!==null&&Gf(d,d.attrs,!1),d.mergedAttrs!==null&&Gf(d,d.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,d),d}function O(n,e,t,r){let i=Ye(),o=fn(),a=ur+n,c=i[Ut],d=o.firstCreatePass?XF(a,o,i,e,t,r):o.data[a],f=eV(o,i,d,c,e,n);i[a]=f;let g=rp(d);return Us(d,!0),AD(c,f,d),!SF(d)&&up()&&fp(o,i,f,d),Dk()===0&&Ro(f,i),Sk(),g&&(Qv(o,i,d),Kv(o,d,i)),r!==null&&Yv(i,d),O}function M(){let n=pn();Rv()?FT():(n=n.parent,Us(n,!1));let e=n;Mk(e)&&Pk(),Ak();let t=fn();return t.firstCreatePass&&(lp(t,n),Mv(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&Wk(e)&&jC(t,e,Ye(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Zk(e)&&jC(t,e,Ye(),e.stylesWithoutHost,!1),M}function Ct(n,e,t,r){return O(n,e,t,r),M(),Ct}var eV=(n,e,t,r,i,o)=>(cp(!0),wD(r,i,zk()));function tV(n,e,t,r,i){let o=e.consts,a=mu(o,r),c=xl(e,n,8,"ng-container",a);a!==null&&Gf(c,a,!0);let d=mu(o,i);return Xv(e,t,c,d),e.queries!==null&&e.queries.elementStart(e,c),c}function Pl(n,e,t){let r=Ye(),i=fn(),o=n+ur,a=i.firstCreatePass?tV(o,i,r,e,t):i.data[o];Us(a,!0);let c=nV(i,r,a,n);return r[o]=c,up()&&fp(i,r,c,a),Ro(c,r),rp(a)&&(Qv(i,r,a),Kv(i,a,r)),t!=null&&Yv(r,a),Pl}function Rl(){let n=pn(),e=fn();return Rv()?FT():(n=n.parent,Us(n,!1)),e.firstCreatePass&&(lp(e,n),Mv(n)&&e.queries.elementEnd(n)),Rl}var nV=(n,e,t,r)=>(cp(!0),BO(e[Ut],""));function dt(){return Ye()}var Qf="en-US";var rV=Qf;function iV(n){typeof n=="string"&&(rV=n.toLowerCase().replace(/_/g,"-"))}var oV=(n,e,t)=>{};function Ne(n,e,t,r){let i=Ye(),o=fn(),a=pn();return nS(o,i,i[Ut],a,n,e,r),Ne}function sV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let a=i[o];if(a===t&&i[o+1]===r){let c=e[Rf],d=i[o+2];return c.length>d?c[d]:null}typeof a=="string"&&(o+=2)}return null}function nS(n,e,t,r,i,o,a){let c=rp(r),f=n.firstCreatePass&&AL(n),g=e[Sr],y=SL(e),E=!0;if(r.type&3||a){let z=lr(r,e),$=a?a(z):z,Z=y.length,ne=a?ce=>a(Xr(ce[r.index])):r.index,se=null;if(!a&&c&&(se=sV(n,e,i,r.index)),se!==null){let ce=se.__ngLastListenerFn__||se;ce.__ngNextListenerFn__=o,se.__ngLastListenerFn__=o,E=!1}else{o=HC(r,e,g,o),oV(z,i,o);let ce=t.listen($,i,o);y.push(o,ce),f&&f.push(i,ne,Z,Z+1)}}else o=HC(r,e,g,o);let C=r.outputs,V;if(E&&C!==null&&(V=C[i])){let z=V.length;if(z)for(let $=0;$<z;$+=2){let Z=V[$],ne=V[$+1],st=e[Z][ne].subscribe(o),he=y.length;y.push(o,st),f&&f.push(i,r.index,he,-(he+1))}}}function zC(n,e,t,r){let i=Ke(null);try{return Zr(6,e,t),t(r)!==!1}catch(o){return UD(n,o),!1}finally{Zr(7,e,t),Ke(i)}}function HC(n,e,t,r){return function i(o){if(o===Function)return r;let a=n.componentOffset>-1?Oo(n.index,e):e;ny(a,5);let c=zC(e,t,r,o),d=i.__ngNextListenerFn__;for(;d;)c=zC(e,t,d,o)&&c,d=d.__ngNextListenerFn__;return c}}function xe(n=1){return jk(n)}function aV(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Ot(n){let e=Nk();return MT(e,ur+n)}function B(n,e=""){let t=Ye(),r=fn(),i=n+ur,o=r.firstCreatePass?xl(r,i,1,e,null):r.data[i],a=uV(r,t,o,e,n);t[i]=a,up()&&fp(r,t,a,o),Us(o,!1)}var uV=(n,e,t,r,i)=>(cp(!0),FO(e[Ut],r));function it(n){return mn("",n,""),it}function mn(n,e,t){let r=Ye(),i=OF(r,n,e,t);return i!==ii&&jD(r,js(),i),mn}function Nl(n,e,t,r,i){let o=Ye(),a=LF(o,n,e,t,r,i);return a!==ii&&jD(o,js(),a),Nl}function Tt(n,e,t){JD(e)&&(e=e());let r=Ye(),i=ap();if(ko(r,i,e)){let o=fn(),a=Ov();OD(o,a,r,n,e,r[Ut],t,!1)}return Tt}function Mt(n,e){let t=JD(n);return t&&n.set(e),t}function Dt(n,e){let t=Ye(),r=fn(),i=pn();return nS(r,t,t[Ut],i,n,e),Dt}function cV(n,e,t){let r=fn();if(r.firstCreatePass){let i=Po(n);mv(t,r.data,r.blueprint,i,!0),mv(e,r.data,r.blueprint,i,!1)}}function mv(n,e,t,r,i){if(n=An(n),Array.isArray(n))for(let o=0;o<n.length;o++)mv(n[o],e,t,r,i);else{let o=fn(),a=Ye(),c=pn(),d=du(n)?n:An(n.provide),f=yT(n),g=c.providerIndexes&1048575,y=c.directiveStart,E=c.providerIndexes>>20;if(du(n)||!n.multi){let C=new Fs(f,i,Q),V=R_(d,e,i?g:g+E,y);V===-1?(W_(Bf(c,a),o,d),P_(o,n,e.length),e.push(d),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(C),a.push(C)):(t[V]=C,a[V]=C)}else{let C=R_(d,e,g+E,y),V=R_(d,e,g,g+E),z=C>=0&&t[C],$=V>=0&&t[V];if(i&&!$||!i&&!z){W_(Bf(c,a),o,d);let Z=hV(i?dV:lV,t.length,i,r,f);!i&&$&&(t[V].providerFactory=Z),P_(o,n,e.length,0),e.push(d),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(Z),a.push(Z)}else{let Z=rS(t[i?V:C],f,!i&&r);P_(o,n,C>-1?C:V,Z)}!i&&r&&$&&t[V].componentProviders++}}}function P_(n,e,t,r){let i=du(e),o=lk(e);if(i||o){let d=(o?An(e.useClass):e).prototype.ngOnDestroy;if(d){let f=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let g=f.indexOf(t);g===-1?f.push(t,[r,d]):f[g+1].push(r,d)}else f.push(t,d)}}}function rS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function R_(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function lV(n,e,t,r){return gv(this.multi,[])}function dV(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=gu(t,t[Ve],this.providerFactory.index,r);o=c.slice(0,a),gv(i,o);for(let d=a;d<c.length;d++)o.push(c[d])}else o=[],gv(i,o);return o}function gv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function hV(n,e,t,r,i){let o=new Fs(n,t,Q);return o.multi=[],o.index=e,o.componentProviders=0,rS(o,i,r&&!t),o}function si(n,e=[]){return t=>{t.providersResolver=(r,i)=>cV(r,i?i(n):n,e)}}var fV=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=gT(!1,t.type),i=r.length>0?yp([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=oe({token:n,providedIn:"environment",factory:()=>new n(ge(Zn))})}}return n})();function ut(n){Tu("NgStandalone"),n.getStandaloneInjector=e=>e.get(fV).getOrCreateStandaloneInjector(n)}function iS(n,e,t){let r=sp()+n,i=Ye();return i[r]===ii?iy(i,r,t?e.call(t):e()):DF(i,r)}function Su(n,e,t,r){return aS(Ye(),sp(),n,e,t,r)}function oS(n,e,t,r,i){return pV(Ye(),sp(),n,e,t,r,i)}function sS(n,e){let t=n[e];return t===ii?void 0:t}function aS(n,e,t,r,i,o){let a=e+t;return ko(n,a,i)?iy(n,a+1,o?r.call(o,i):r(i)):sS(n,a+1)}function pV(n,e,t,r,i,o,a){let c=e+t;return eS(n,c,i,o)?iy(n,c+2,a?r.call(a,i,o):r(i,o)):sS(n,c+2)}function Au(n,e){let t=fn(),r,i=n+ur;t.firstCreatePass?(r=mV(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Ns(r.type,!0)),a,c=On(Q);try{let d=Vf(!1),f=o();return Vf(d),aV(t,Ye(),i,f),f}finally{On(c)}}function mV(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function xu(n,e,t){let r=n+ur,i=Ye(),o=MT(i,r);return gV(i,r)?aS(i,sp(),e,o.transform,t,o):o.transform(t)}function gV(n,e){return n[Ve].data[e].pure}function $s(n,e){return ZD(n,e)}var Oi=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},uS=new Oi("18.2.10");var Ip=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var cS=new ae("");function Lo(n){return!!n&&typeof n.then=="function"}function sy(n){return!!n&&typeof n.subscribe=="function"}var Ep=new ae(""),lS=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=W(Ep,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Lo(o))t.push(o);else if(sy(o)){let a=new Promise((c,d)=>{o.subscribe({complete:c,error:d})});t.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),bp=new ae("");function _V(){Ob(()=>{throw new ue(600,!1)})}function vV(n){return n.isBoundToModule}var yV=10;function wV(n,e,t){try{let r=t();return Lo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var zs=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=W(pO),this.afterRenderManager=W(tS),this.zonelessEnabled=W(vp),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Jt,this.afterTick=new Jt,this.componentTypes=[],this.components=[],this.isStable=W(bu).hasPendingTasks.pipe(me(t=>!t)),this._injector=W(Zn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof qf;if(!this._injector.get(lS).done){let E=!i&&hT(t),C=!1;throw new ue(405,C)}let a;i?a=t:a=this._injector.get(vu).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=vV(a)?void 0:this._injector.get(No),d=r||a.selector,f=a.create(un.NULL,[],d,c),g=f.location.nativeElement,y=f.injector.get(cS,null);return y?.registerApplication(g),f.onDestroy(()=>{this.detachView(f.hostView),Tf(this.components,f),y?.unregisterApplication(g)}),this._loadComponent(f),f}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ue(101,!1);let t=Ke(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ke(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(yu,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<yV;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)IV(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ip(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Tf(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(bp,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Tf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ue(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Tf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function IV(n,e,t,r){if(!t&&!ip(n))return;HD(n,e,t&&!r?0:1)}var _v=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Cp=(()=>{class n{compileModuleSync(t){return new lv(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=fT(t),o=yD(i.declarations).reduce((a,c)=>{let d=Mo(c);return d&&a.push(new wu(d)),a},[]);return new _v(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var EV=(()=>{class n{constructor(){this.zone=W(et),this.changeDetectionScheduler=W(_u),this.applicationRef=W(zs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),bV=new ae("",{factory:()=>!1});function dS({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new et(Pe(Y({},fS()),{scheduleInRootZone:t})),[{provide:et,useFactory:n},{provide:lu,multi:!0,useFactory:()=>{let r=W(EV,{optional:!0});return()=>r.initialize()}},{provide:lu,multi:!0,useFactory:()=>{let r=W(CV);return()=>{r.initialize()}}},e===!0?{provide:KD,useValue:!0}:[],{provide:QD,useValue:t??sD}]}function hS(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=dS({ngZoneFactory:()=>{let i=fS(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Tu("NgZone_CoalesceEvent"),new et(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return ei([{provide:bV,useValue:!0},{provide:vp,useValue:!1},r])}function fS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var CV=(()=>{class n{constructor(){this.subscription=new xt,this.initialized=!1,this.zone=W(et),this.pendingTasks=W(bu)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{et.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{et.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var TV=(()=>{class n{constructor(){this.appRef=W(zs),this.taskService=W(bu),this.ngZone=W(et),this.zonelessEnabled=W(vp),this.disableScheduling=W(KD,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new xt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(jf):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(W(QD,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof J_||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?DC:aD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(jf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,DC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function DV(){return typeof $localize<"u"&&$localize.locale||Qf}var ay=new ae("",{providedIn:"root",factory:()=>W(ay,Le.Optional|Le.SkipSelf)||DV()});var vv=new ae("");function If(n){return!n.moduleRef}function SV(n){let e=If(n)?n.r3Injector:n.moduleRef.injector,t=e.get(et);return t.run(()=>{If(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Ni,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),If(n)){let o=()=>e.destroy(),a=n.platformInjector.get(vv);a.add(o),e.onDestroy(()=>{i.unsubscribe(),a.delete(o)})}else{let o=()=>n.moduleRef.destroy(),a=n.platformInjector.get(vv);a.add(o),n.moduleRef.onDestroy(()=>{Tf(n.allPlatformModules,n.moduleRef),i.unsubscribe(),a.delete(o)})}return wV(r,t,()=>{let o=e.get(lS);return o.runInitializers(),o.donePromise.then(()=>{let a=e.get(ay,Qf);if(iV(a||Qf),If(n)){let c=e.get(zs);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return AV(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function AV(n,e){let t=n.injector.get(zs);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ue(-403,!1);e.push(n)}var Df=null;function xV(n=[],e){return un.create({name:e,providers:[{provide:ep,useValue:"platform"},{provide:vv,useValue:new Set([()=>Df=null])},...n]})}function MV(n=[]){if(Df)return Df;let e=xV(n);return Df=e,_V(),PV(e),e}function PV(n){n.get($v,null)?.forEach(t=>t())}var Fo=(()=>{class n{static{this.__NG_ELEMENT_ID__=RV}}return n})();function RV(n){return NV(pn(),Ye(),(n&16)===16)}function NV(n,e,t){if(np(n)&&!t){let r=Oo(n.index,e);return new Vs(r,r)}else if(n.type&175){let r=e[Jr];return new Vs(r,e)}return null}var yv=class{constructor(){}supports(e){return XD(e)}create(e){return new wv(e)}},kV=(n,e)=>e,wv=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||kV}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let a=!r||t&&t.currentIndex<qC(r,i,o)?t:r,c=qC(a,i,o),d=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(t=t._next,a.previousIndex==null)i++;else{o||(o=[]);let f=c-i,g=d-i;if(f!=g){for(let E=0;E<f;E++){let C=E<o.length?o[E]:o[E]=0,V=C+E;g<=V&&V<f&&(o[E]=C+1)}let y=a.previousIndex;o[y]=g-f}}c!==d&&e(a,c,d)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!XD(e))throw new ue(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,a;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],a=this._trackByFn(c,o),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,o,a,c),r=!0):(r&&(t=this._verifyReinsertion(t,o,a,c)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,CF(e,c=>{a=this._trackByFn(i,c),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,c,a,i),r=!0):(r&&(t=this._verifyReinsertion(t,c,a,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Iv(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Yf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Yf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Iv=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Ev=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Yf=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Ev,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function qC(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function GC(){return new uy([new yv])}var uy=(()=>{class n{static{this.\u0275prov=oe({token:n,providedIn:"root",factory:GC})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||GC()),deps:[[n,new Tv,new hn]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ue(901,!1)}}return n})();function pS(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=MV(r),o=[dS({}),{provide:_u,useExisting:TV},...t||[]],a=new Zf({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return SV({r3Injector:a.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Vo(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Mu(n,e){Tu("NgSignals");let t=Rb(n);return e?.equal&&(t[Ri].equal=e.equal),t}function dr(n){let e=Ke(null);try{return n()}finally{Ke(e)}}function mS(n){let e=Mo(n);if(!e)return null;let t=new wu(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var IS=null;function $i(){return IS}function ES(n){IS??=n}var Tp=class{};var Fn=new ae(""),gy=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:()=>W(OV),providedIn:"platform"})}}return n})(),bS=new ae(""),OV=(()=>{class n extends gy{constructor(){super(),this._doc=W(Fn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return $i().getBaseHref(this._doc)}onPopState(t){let r=$i().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=$i().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function _y(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function gS(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function ji(n){return n&&n[0]!=="?"?"?"+n:n}var zi=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:()=>W(vy),providedIn:"root"})}}return n})(),CS=new ae(""),vy=(()=>{class n extends zi{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??W(Fn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return _y(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+ji(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let a=this.prepareExternalUrl(i+ji(o));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){let a=this.prepareExternalUrl(i+ji(o));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ge(gy),ge(CS,8))}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),TS=(()=>{class n extends zi{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=_y(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let a=this.prepareExternalUrl(i+ji(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){let a=this.prepareExternalUrl(i+ji(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ge(gy),ge(CS,8))}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac})}}return n})(),Pu=(()=>{class n{constructor(t){this._subject=new wt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=VV(gS(_S(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ji(r))}normalize(t){return n.stripTrailingSlash(FV(this._basePath,_S(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ji(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ji(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=ji}static{this.joinWithSlash=_y}static{this.stripTrailingSlash=gS}static{this.\u0275fac=function(r){return new(r||n)(ge(zi))}}static{this.\u0275prov=oe({token:n,factory:()=>LV(),providedIn:"root"})}}return n})();function LV(){return new Pu(ge(zi))}function FV(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function _S(n){return n.replace(/\/index.html$/,"")}function VV(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function DS(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var cy=/\s+/,vS=[],Sp=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=vS,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(cy):vS}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(cy):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(cy).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(Q(xr),Q(oi))}}static{this.\u0275dir=gt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var ly=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},hr=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,a)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new ly(i.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,a),yS(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);yS(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Q(Cu),Q(_p),Q(uy))}}static{this.\u0275dir=gt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function yS(n,e){n.context.$implicit=e.item}var gn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new dy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){wS("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){wS("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Q(Cu),Q(_p))}}static{this.\u0275dir=gt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),dy=class{constructor(){this.$implicit=null,this.ngIf=null}};function wS(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${xn(e)}'.`)}function BV(n,e){return new ue(2100,!1)}var hy=class{createSubscription(e,t){return dr(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){dr(()=>e.unsubscribe())}},fy=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},UV=new fy,jV=new hy,Ap=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Lo(t))return UV;if(sy(t))return jV;throw BV(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(Q(Fo,16))}}static{this.\u0275pipe=cT({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var Mr=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Fi({type:n})}static{this.\u0275inj=Li({})}}return n})(),yy="browser",$V="server";function zV(n){return n===yy}function wy(n){return n===$V}var SS=(()=>{class n{static{this.\u0275prov=oe({token:n,providedIn:"root",factory:()=>zV(W(ri))?new py(W(Fn),window):new my})}}return n})(),py=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=HV(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function HV(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let a=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(a)return a}i=r.nextNode()}}return null}var my=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Dp=class{};var by=class extends Tp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Cy=class n extends by{static makeCurrent(){ES(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=qV();return t==null?null:GV(t)}resetBaseElement(){Ol=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return DS(document.cookie,e)}},Ol=null;function qV(){return Ol=Ol||document.querySelector("base"),Ol?Ol.getAttribute("href"):null}function GV(n){return new URL(n,document.baseURI).pathname}var WV=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac})}}return n})(),Ty=new ae(""),PS=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new ue(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(ge(Ty),ge(et))}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac})}}return n})(),xp=class{constructor(e){this._doc=e}},Iy="ng-app-id",RS=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=wy(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Iy}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Iy),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Iy,this.appId),t.appendChild(a),a}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(ge(Fn),ge(jv),ge(zv,8),ge(ri))}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac})}}return n})(),Ey={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Sy=/%COMP%/g,NS="%COMP%",ZV=`_nghost-${NS}`,KV=`_ngcontent-${NS}`,QV=!0,YV=new ae("",{providedIn:"root",factory:()=>QV});function JV(n){return KV.replace(Sy,n)}function XV(n){return ZV.replace(Sy,n)}function kS(n,e){return e.map(t=>t.replace(Sy,n))}var AS=(()=>{class n{constructor(t,r,i,o,a,c,d,f=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=d,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=wy(c),this.defaultRenderer=new Ll(t,a,d,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Qr.ShadowDom&&(r=Pe(Y({},r),{encapsulation:Qr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Mp?i.applyToHost(t):i instanceof Fl&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let a=this.doc,c=this.ngZone,d=this.eventManager,f=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,y=this.platformIsServer;switch(r.encapsulation){case Qr.Emulated:o=new Mp(d,f,r,this.appId,g,a,c,y);break;case Qr.ShadowDom:return new Dy(d,f,t,r,a,c,this.nonce,y);default:o=new Fl(d,f,r,g,a,c,y);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(ge(PS),ge(RS),ge(jv),ge(YV),ge(Fn),ge(ri),ge(et),ge(zv))}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac})}}return n})(),Ll=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Ey[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(xS(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(xS(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ue(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Ey[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Ey[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ki.DashCase|ki.Important)?e.style.setProperty(t,r,i&ki.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ki.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=$i().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function xS(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Dy=class extends Ll{constructor(e,t,r,i,o,a,c,d){super(e,o,a,d),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=kS(i.id,i.styles);for(let g of f){let y=document.createElement("style");c&&y.setAttribute("nonce",c),y.textContent=g,this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Fl=class extends Ll{constructor(e,t,r,i,o,a,c,d){super(e,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=d?kS(d,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Mp=class extends Fl{constructor(e,t,r,i,o,a,c,d){let f=i+"-"+r.id;super(e,t,r,o,a,c,d,f),this.contentAttr=JV(f),this.hostAttr=XV(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},e2=(()=>{class n extends xp{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(ge(Fn))}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac})}}return n})(),MS=["alt","control","meta","shift"],t2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},n2={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},r2=(()=>{class n extends xp{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$i().onAndCancel(t,o.domEventName,a))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),MS.forEach(f=>{let g=r.indexOf(f);g>-1&&(r.splice(g,1),a+=f+".")}),a+=o,r.length!=0||o.length===0)return null;let d={};return d.domEventName=i,d.fullKey=a,d}static matchEventFullKeyCode(t,r){let i=t2[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),MS.forEach(a=>{if(a!==i){let c=n2[a];c(t)&&(o+=a+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(ge(Fn))}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac})}}return n})();function OS(n,e){return pS(Y({rootComponent:n},i2(e)))}function i2(n){return{appProviders:[...c2,...n?.providers??[]],platformProviders:u2}}function o2(){Cy.makeCurrent()}function s2(){return new Ni}function a2(){return pD(document),document}var u2=[{provide:ri,useValue:yy},{provide:$v,useValue:o2,multi:!0},{provide:Fn,useFactory:a2,deps:[]}];var c2=[{provide:ep,useValue:"root"},{provide:Ni,useFactory:s2,deps:[]},{provide:Ty,useClass:e2,multi:!0,deps:[Fn,et,ri]},{provide:Ty,useClass:r2,multi:!0,deps:[Fn]},AS,RS,PS,{provide:yu,useExisting:AS},{provide:Dp,useClass:WV,deps:[]},[]];var LS=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(ge(Fn))}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ke="primary",Jl=Symbol("RouteTitle"),Ry=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Fu(n){return new Ry(n)}function d2(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let a=r[o],c=n[o];if(a[0]===":")i[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function h2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ai(n[t],e[t]))return!1;return!0}function ai(n,e){let t=n?Ny(n):void 0,r=e?Ny(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!WS(n[i],e[i]))return!1;return!0}function Ny(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function WS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function ZS(n){return n.length>0?n[n.length-1]:null}function Uo(n){return p_(n)?n:Lo(n)?yt(Promise.resolve(n)):pe(n)}var f2={exact:QS,subset:YS},KS={exact:p2,subset:m2,ignored:()=>!0};function FS(n,e,t){return f2[t.paths](n.root,e.root,t.matrixParams)&&KS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function p2(n,e){return ai(n,e)}function QS(n,e,t){if(!qs(n.segments,e.segments)||!Np(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!QS(n.children[r],e.children[r],t))return!1;return!0}function m2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>WS(n[t],e[t]))}function YS(n,e,t){return JS(n,e,e.segments,t)}function JS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!qs(i,t)||e.hasChildren()||!Np(i,t,r))}else if(n.segments.length===t.length){if(!qs(n.segments,t)||!Np(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!YS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!qs(n.segments,i)||!Np(n.segments,i,r)||!n.children[ke]?!1:JS(n.children[ke],e,o,r)}}function Np(n,e,t){return e.every((r,i)=>KS[t](n[i].parameters,r.parameters))}var qi=class{constructor(e=new tt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Fu(this.queryParams),this._queryParamMap}toString(){return v2.serialize(this)}},tt=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kp(this)}},Hs=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Fu(this.parameters),this._parameterMap}toString(){return eA(this)}};function g2(n,e){return qs(n,e)&&n.every((t,r)=>ai(t.parameters,e[r].parameters))}function qs(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function _2(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ke&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ke&&(t=t.concat(e(i,r)))}),t}var Xl=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:()=>new Vu,providedIn:"root"})}}return n})(),Vu=class{parse(e){let t=new Oy(e);return new qi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Vl(e.root,!0)}`,r=I2(e.queryParams),i=typeof e.fragment=="string"?`#${y2(e.fragment)}`:"";return`${t}${r}${i}`}},v2=new Vu;function kp(n){return n.segments.map(e=>eA(e)).join("/")}function Vl(n,e){if(!n.hasChildren())return kp(n);if(e){let t=n.children[ke]?Vl(n.children[ke],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ke&&r.push(`${i}:${Vl(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=_2(n,(r,i)=>i===ke?[Vl(n.children[ke],!1)]:[`${i}:${Vl(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ke]!=null?`${kp(n)}/${t[0]}`:`${kp(n)}/(${t.join("//")})`}}function XS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pp(n){return XS(n).replace(/%3B/gi,";")}function y2(n){return encodeURI(n)}function ky(n){return XS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Op(n){return decodeURIComponent(n)}function VS(n){return Op(n.replace(/\+/g,"%20"))}function eA(n){return`${ky(n.path)}${w2(n.parameters)}`}function w2(n){return Object.entries(n).map(([e,t])=>`;${ky(e)}=${ky(t)}`).join("")}function I2(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Pp(t)}=${Pp(i)}`).join("&"):`${Pp(t)}=${Pp(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var E2=/^[^\/()?;#]+/;function Ay(n){let e=n.match(E2);return e?e[0]:""}var b2=/^[^\/()?;=#]+/;function C2(n){let e=n.match(b2);return e?e[0]:""}var T2=/^[^=?&#]+/;function D2(n){let e=n.match(T2);return e?e[0]:""}var S2=/^[^&#]+/;function A2(n){let e=n.match(S2);return e?e[0]:""}var Oy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new tt([],{}):new tt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ke]=new tt(e,t)),r}parseSegment(){let e=Ay(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ue(4009,!1);return this.capture(e),new Hs(Op(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=C2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ay(this.remaining);i&&(r=i,this.capture(r))}e[Op(t)]=Op(r)}parseQueryParam(e){let t=D2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let a=A2(this.remaining);a&&(r=a,this.capture(r))}let i=VS(t),o=VS(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ay(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ue(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ke);let a=this.parseChildren();t[o]=Object.keys(a).length===1?a[ke]:new tt([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ue(4011,!1)}};function tA(n){return n.segments.length>0?new tt([],{[ke]:n}):n}function nA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=nA(i);if(r===ke&&o.segments.length===0&&o.hasChildren())for(let[a,c]of Object.entries(o.children))e[a]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new tt(n.segments,e);return x2(t)}function x2(n){if(n.numberOfChildren===1&&n.children[ke]){let e=n.children[ke];return new tt(n.segments.concat(e.segments),e.children)}return n}function Gs(n){return n instanceof qi}function M2(n,e,t=null,r=null){let i=rA(n);return iA(i,e,t,r)}function rA(n){let e;function t(o){let a={};for(let d of o.children){let f=t(d);a[d.outlet]=f}let c=new tt(o.url,a);return o===n&&(e=c),c}let r=t(n.root),i=tA(r);return e??i}function iA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return xy(i,i,i,t,r);let o=P2(e);if(o.toRoot())return xy(i,i,new tt([],{}),t,r);let a=R2(o,i,n),c=a.processChildren?jl(a.segmentGroup,a.index,o.commands):sA(a.segmentGroup,a.index,o.commands);return xy(i,a.segmentGroup,c,t,r)}function Lp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Hl(n){return typeof n=="object"&&n!=null&&n.outlets}function xy(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([d,f])=>{o[d]=Array.isArray(f)?f.map(g=>`${g}`):`${f}`});let a;n===e?a=t:a=oA(n,e,t);let c=tA(nA(a));return new qi(c,o,i)}function oA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=oA(o,e,t)}),new tt(n.segments,r)}var Fp=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Lp(r[0]))throw new ue(4003,!1);let i=r.find(Hl);if(i&&i!==ZS(r))throw new ue(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function P2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Fp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([d,f])=>{c[d]=typeof f=="string"?f.split("/"):f}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((c,d)=>{d==0&&c==="."||(d==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new Fp(t,e,r)}var ku=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function R2(n,e,t){if(n.isAbsolute)return new ku(e,!0,0);if(!t)return new ku(e,!1,NaN);if(t.parent===null)return new ku(t,!0,0);let r=Lp(n.commands[0])?0:1,i=t.segments.length-1+r;return N2(t,i,n.numberOfDoubleDots)}function N2(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ue(4005,!1);i=r.segments.length}return new ku(r,!1,i-o)}function k2(n){return Hl(n[0])?n[0].outlets:{[ke]:n}}function sA(n,e,t){if(n??=new tt([],{}),n.segments.length===0&&n.hasChildren())return jl(n,e,t);let r=O2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new tt(n.segments.slice(0,r.pathIndex),{});return o.children[ke]=new tt(n.segments.slice(r.pathIndex),n.children),jl(o,0,i)}else return r.match&&i.length===0?new tt(n.segments,{}):r.match&&!n.hasChildren()?Ly(n,e,t):r.match?jl(n,0,i):Ly(n,e,t)}function jl(n,e,t){if(t.length===0)return new tt(n.segments,{});{let r=k2(t),i={};if(Object.keys(r).some(o=>o!==ke)&&n.children[ke]&&n.numberOfChildren===1&&n.children[ke].segments.length===0){let o=jl(n.children[ke],e,t);return new tt(n.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=sA(n.children[o],e,a))}),Object.entries(n.children).forEach(([o,a])=>{r[o]===void 0&&(i[o]=a)}),new tt(n.segments,i)}}function O2(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let a=n.segments[i],c=t[r];if(Hl(c))break;let d=`${c}`,f=r<t.length-1?t[r+1]:null;if(i>0&&d===void 0)break;if(d&&f&&typeof f=="object"&&f.outlets===void 0){if(!US(d,f,a))return o;r+=2}else{if(!US(d,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ly(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Hl(o)){let d=L2(o.outlets);return new tt(r,d)}if(i===0&&Lp(t[0])){let d=n.segments[e];r.push(new Hs(d.path,BS(t[0]))),i++;continue}let a=Hl(o)?o.outlets[ke]:`${o}`,c=i<t.length-1?t[i+1]:null;a&&c&&Lp(c)?(r.push(new Hs(a,BS(c))),i+=2):(r.push(new Hs(a,{})),i++)}return new tt(r,{})}function L2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Ly(new tt([],{}),0,r))}),e}function BS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function US(n,e,t){return n==t.path&&ai(e,t.parameters)}var $l="imperative",en=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(en||{}),fr=class{constructor(e,t){this.id=e,this.url=t}},Bu=class extends fr{constructor(e,t,r="imperative",i=null){super(e,t),this.type=en.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ui=class extends fr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=en.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Qn||{}),Vp=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Vp||{}),Hi=class extends fr{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=en.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Bo=class extends fr{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=en.NavigationSkipped}},ql=class extends fr{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=en.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Bp=class extends fr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=en.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fy=class extends fr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=en.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vy=class extends fr{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=en.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},By=class extends fr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=en.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uy=class extends fr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=en.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jy=class{constructor(e){this.route=e,this.type=en.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},$y=class{constructor(e){this.route=e,this.type=en.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},zy=class{constructor(e){this.snapshot=e,this.type=en.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hy=class{constructor(e){this.snapshot=e,this.type=en.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qy=class{constructor(e){this.snapshot=e,this.type=en.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gy=class{constructor(e){this.snapshot=e,this.type=en.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Up=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=en.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Gl=class{},Uu=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function F2(n,e){return n.providers&&!n._injector&&(n._injector=yp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Pr(n){return n.outlet||ke}function V2(n,e){let t=n.filter(r=>Pr(r)===e);return t.push(...n.filter(r=>Pr(r)!==e)),t}function ed(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Wy=class{get injector(){return ed(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new td(this.rootInjector),this.attachRef=null}},td=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Wy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(ge(Zn))}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Zy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Zy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Ky(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ky(e,this._root).map(t=>t.value)}};function Zy(n,e){if(n===e.value)return e;for(let t of e.children){let r=Zy(n,t);if(r)return r}return null}function Ky(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Ky(n,t);if(r.length)return r.unshift(e),r}return[]}var Kn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Nu(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var $p=class extends jp{constructor(e,t){super(e),this.snapshot=t,iw(this,e)}toString(){return this.snapshot.toString()}};function aA(n){let e=B2(n),t=new kt([new Hs("",{})]),r=new kt({}),i=new kt({}),o=new kt({}),a=new kt(""),c=new pr(t,r,o,a,i,ke,n,e.root);return c.snapshot=e.root,new $p(new Kn(c,[]),e)}function B2(n){let e={},t={},r={},i="",o=new Ou([],e,r,i,t,ke,n,null,{});return new Hp("",new Kn(o,[]))}var pr=class{constructor(e,t,r,i,o,a,c,d){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=c,this._futureSnapshot=d,this.title=this.dataSubject?.pipe(me(f=>f[Jl]))??pe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(me(e=>Fu(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(me(e=>Fu(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function zp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Y(Y({},e.params),n.params),data:Y(Y({},e.data),n.data),resolve:Y(Y(Y(Y({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Y({},n.params),data:Y({},n.data),resolve:Y(Y({},n.data),n._resolvedData??{})},i&&cA(i)&&(r.resolve[Jl]=i.title),r}var Ou=class{get title(){return this.data?.[Jl]}constructor(e,t,r,i,o,a,c,d,f){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=c,this.routeConfig=d,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Fu(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Fu(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Hp=class extends jp{constructor(e,t){super(t),this.url=e,iw(this,t)}toString(){return uA(this._root)}};function iw(n,e){e.value._routerState=n,e.children.forEach(t=>iw(n,t))}function uA(n){let e=n.children.length>0?` { ${n.children.map(uA).join(", ")} } `:"";return`${n.value}${e}`}function My(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ai(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ai(e.params,t.params)||n.paramsSubject.next(t.params),h2(e.url,t.url)||n.urlSubject.next(t.url),ai(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Qy(n,e){let t=ai(n.params,e.params)&&g2(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Qy(n.parent,e.parent))}function cA(n){return typeof n.title=="string"||n.title===null}var ow=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ke,this.activateEvents=new wt,this.deactivateEvents=new wt,this.attachEvents=new wt,this.detachEvents=new wt,this.parentContexts=W(td),this.location=W(Cu),this.changeDetector=W(Fo),this.inputBinder=W(Zp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ue(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ue(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ue(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ue(4013,!1);this._activatedRoute=t;let i=this.location,a=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,d=new Yy(t,c,i.injector);this.activated=i.createComponent(a,{index:i.length,injector:d,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=gt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ni]})}}return n})(),Yy=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===pr?this.route:e===td?this.childContexts:this.parent.get(e,t)}},Zp=new ae(""),jS=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Ms([r.queryParams,r.params,r.data]).pipe(Sn(([o,a,c],d)=>(c=Y(Y(Y({},o),a),c),d===0?pe(c):Promise.resolve(c)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let a=mS(r.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of a.inputs)t.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac})}}return n})();function U2(n,e,t){let r=Wl(n,e._root,t?t._root:void 0);return new $p(r,e)}function Wl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=j2(n,e,t);return new Kn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(c=>Wl(n,c)),a}}let r=$2(e.value),i=e.children.map(o=>Wl(n,o));return new Kn(r,i)}}function j2(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Wl(n,r,i);return Wl(n,r)})}function $2(n){return new pr(new kt(n.url),new kt(n.params),new kt(n.queryParams),new kt(n.fragment),new kt(n.data),n.outlet,n.component,n)}var Zl=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},lA="ngNavigationCancelingError";function qp(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Gs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=dA(!1,Qn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function dA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[lA]=!0,t.cancellationCode=e,t}function z2(n){return hA(n)&&Gs(n.url)}function hA(n){return!!n&&n[lA]}var H2=(n,e,t,r)=>me(i=>(new Jy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Jy=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),My(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Nu(t);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Nu(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Nu(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Nu(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Gy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Hy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(My(i),i===o)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),My(c.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,r)}},Gp=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Lu=class{constructor(e,t){this.component=e,this.route=t}};function q2(n,e,t){let r=n._root,i=e?e._root:null;return Bl(r,i,t,[r.value])}function G2(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function $u(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!QC(n)?n:e.get(n):r}function Bl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Nu(e);return n.children.forEach(a=>{W2(a,o[a.value.outlet],t,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,c])=>zl(c,t.getContext(a),i)),i}function W2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,a=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let d=Z2(a,o,o.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new Gp(r)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Bl(n,e,c?c.children:null,r,i):Bl(n,e,t,r,i),d&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Lu(c.outlet.component,a))}else a&&zl(e,c,i),i.canActivateChecks.push(new Gp(r)),o.component?Bl(n,null,c?c.children:null,r,i):Bl(n,null,t,r,i);return i}function Z2(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!qs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!qs(n.url,e.url)||!ai(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qy(n,e)||!ai(n.queryParams,e.queryParams);case"paramsChange":default:return!Qy(n,e)}}function zl(n,e,t){let r=Nu(n),i=n.value;Object.entries(r).forEach(([o,a])=>{i.component?e?zl(a,e.children.getContext(o),t):zl(a,null,t):zl(a,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Lu(e.outlet.component,i)):t.canDeactivateChecks.push(new Lu(null,i)):t.canDeactivateChecks.push(new Lu(null,i))}function nd(n){return typeof n=="function"}function K2(n){return typeof n=="boolean"}function Q2(n){return n&&nd(n.canLoad)}function Y2(n){return n&&nd(n.canActivate)}function J2(n){return n&&nd(n.canActivateChild)}function X2(n){return n&&nd(n.canDeactivate)}function eB(n){return n&&nd(n.canMatch)}function fA(n){return n instanceof Cr||n?.name==="EmptyError"}var Rp=Symbol("INITIAL_VALUE");function ju(){return Sn(n=>Ms(n.map(e=>e.pipe(Xt(1),gf(Rp)))).pipe(me(e=>{for(let t of e)if(t!==!0){if(t===Rp)return Rp;if(t===!1||tB(t))return t}return!0}),Wn(e=>e!==Rp),Xt(1)))}function tB(n){return Gs(n)||n instanceof Zl}function nB(n,e){return Bt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return a.length===0&&o.length===0?pe(Pe(Y({},t),{guardsResult:!0})):rB(a,r,i,n).pipe(Bt(c=>c&&K2(c)?iB(r,o,n,e):pe(c)),me(c=>Pe(Y({},t),{guardsResult:c})))})}function rB(n,e,t,r){return yt(n).pipe(Bt(i=>cB(i.component,i.route,t,e,r)),Wr(i=>i!==!0,!0))}function iB(n,e,t,r){return yt(e).pipe(Ps(i=>eu(sB(i.route.parent,r),oB(i.route,r),uB(n,i.path,t),aB(n,i.route,t))),Wr(i=>i!==!0,!0))}function oB(n,e){return n!==null&&e&&e(new qy(n)),pe(!0)}function sB(n,e){return n!==null&&e&&e(new zy(n)),pe(!0)}function aB(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return pe(!0);let i=r.map(o=>ff(()=>{let a=ed(e)??t,c=$u(o,a),d=Y2(c)?c.canActivate(e,n):ti(a,()=>c(e,n));return Uo(d).pipe(Wr())}));return pe(i).pipe(ju())}function uB(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>G2(a)).filter(a=>a!==null).map(a=>ff(()=>{let c=a.guards.map(d=>{let f=ed(a.node)??t,g=$u(d,f),y=J2(g)?g.canActivateChild(r,n):ti(f,()=>g(r,n));return Uo(y).pipe(Wr())});return pe(c).pipe(ju())}));return pe(o).pipe(ju())}function cB(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return pe(!0);let a=o.map(c=>{let d=ed(e)??i,f=$u(c,d),g=X2(f)?f.canDeactivate(n,e,t,r):ti(d,()=>f(n,e,t,r));return Uo(g).pipe(Wr())});return pe(a).pipe(ju())}function lB(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return pe(!0);let o=i.map(a=>{let c=$u(a,n),d=Q2(c)?c.canLoad(e,t):ti(n,()=>c(e,t));return Uo(d)});return pe(o).pipe(ju(),pA(r))}function pA(n){return Wh(Gt(e=>{if(typeof e!="boolean")throw qp(n,e)}),me(e=>e===!0))}function dB(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return pe(!0);let o=i.map(a=>{let c=$u(a,n),d=eB(c)?c.canMatch(e,t):ti(n,()=>c(e,t));return Uo(d)});return pe(o).pipe(ju(),pA(r))}var Kl=class{constructor(e){this.segmentGroup=e||null}},Ql=class extends Error{constructor(e){super(),this.urlTree=e}};function Ru(n){return Ja(new Kl(n))}function hB(n){return Ja(new ue(4e3,!1))}function fB(n){return Ja(dA(!1,Qn.GuardRejected))}var Xy=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return pe(r);if(i.numberOfChildren>1||!i.children[ke])return hB(`${e.redirectTo}`);i=i.children[ke]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let c=t,{queryParams:d,fragment:f,routeConfig:g,url:y,outlet:E,params:C,data:V,title:z}=i,$=ti(o,()=>c({params:C,data:V,queryParams:d,fragment:f,routeConfig:g,url:y,outlet:E,title:z}));if($ instanceof qi)throw new Ql($);t=$}let a=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Ql(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new qi(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=t[c]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),a={};return Object.entries(t.children).forEach(([c,d])=>{a[c]=this.createSegmentGroup(e,d,r,i)}),new tt(o,a)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ue(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},ew={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pB(n,e,t,r,i){let o=mA(n,e,t);return o.matched?(r=F2(e,r),dB(r,e,t,i).pipe(me(a=>a===!0?o:Y({},ew)))):pe(o)}function mA(n,e,t){if(e.path==="**")return mB(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Y({},ew):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||d2)(t,n,e);if(!i)return Y({},ew);let o={};Object.entries(i.posParams??{}).forEach(([c,d])=>{o[c]=d.path});let a=i.consumed.length>0?Y(Y({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function mB(n){return{matched:!0,parameters:n.length>0?ZS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function $S(n,e,t,r){return t.length>0&&vB(n,t,r)?{segmentGroup:new tt(e,_B(r,new tt(t,n.children))),slicedSegments:[]}:t.length===0&&yB(n,t,r)?{segmentGroup:new tt(n.segments,gB(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new tt(n.segments,n.children),slicedSegments:t}}function gB(n,e,t,r){let i={};for(let o of t)if(Kp(n,e,o)&&!r[Pr(o)]){let a=new tt([],{});i[Pr(o)]=a}return Y(Y({},r),i)}function _B(n,e){let t={};t[ke]=e;for(let r of n)if(r.path===""&&Pr(r)!==ke){let i=new tt([],{});t[Pr(r)]=i}return t}function vB(n,e,t){return t.some(r=>Kp(n,e,r)&&Pr(r)!==ke)}function yB(n,e,t){return t.some(r=>Kp(n,e,r))}function Kp(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function wB(n,e,t){return e.length===0&&!n.children[t]}var tw=class{};function IB(n,e,t,r,i,o,a="emptyOnly"){return new nw(n,e,t,r,i,a,o).recognize()}var EB=31,nw=class{constructor(e,t,r,i,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new Xy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ue(4002,`'${e.segmentGroup}'`)}recognize(){let e=$S(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(me(({children:t,rootSnapshot:r})=>{let i=new Kn(r,t),o=new Hp("",i),a=M2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(e){let t=new Ou([],Object.freeze({}),Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ke,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ke,t).pipe(me(r=>({children:r,rootSnapshot:t})),Co(r=>{if(r instanceof Ql)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Kl?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(me(a=>a instanceof Kn?[a]:[]))}processChildren(e,t,r,i){let o=[];for(let a of Object.keys(r.children))a==="primary"?o.unshift(a):o.push(a);return yt(o).pipe(Ps(a=>{let c=r.children[a],d=V2(t,a);return this.processSegmentGroup(e,d,c,a,i)}),mf((a,c)=>(a.push(...c),a)),To(null),v_(),Bt(a=>{if(a===null)return Ru(r);let c=gA(a);return bB(c),pe(c)}))}processSegment(e,t,r,i,o,a,c){return yt(t).pipe(Ps(d=>this.processSegmentAgainstRoute(d._injector??e,t,d,r,i,o,a,c).pipe(Co(f=>{if(f instanceof Kl)return pe(null);throw f}))),Wr(d=>!!d),Co(d=>{if(fA(d))return wB(r,i,o)?pe(new tw):Ru(r);throw d}))}processSegmentAgainstRoute(e,t,r,i,o,a,c,d){return Pr(r)!==a&&(a===ke||!Kp(i,o,r))?Ru(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,a,d):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,a,d):Ru(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,a,c){let{matched:d,parameters:f,consumedSegments:g,positionalParamSegments:y,remainingSegments:E}=mA(t,i,o);if(!d)return Ru(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>EB&&(this.allowRedirects=!1));let C=new Ou(o,f,Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,zS(i),Pr(i),i.component??i._loadedComponent??null,i,HS(i)),V=zp(C,c,this.paramsInheritanceStrategy);C.params=Object.freeze(V.params),C.data=Object.freeze(V.data);let z=this.applyRedirects.applyRedirectCommands(g,i.redirectTo,y,C,e);return this.applyRedirects.lineralizeSegments(i,z).pipe(Bt($=>this.processSegment(e,r,t,$.concat(E),a,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,o,a){let c=pB(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(Sn(d=>d.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Sn(({routes:f})=>{let g=r._loadedInjector??e,{parameters:y,consumedSegments:E,remainingSegments:C}=d,V=new Ou(E,y,Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,zS(r),Pr(r),r.component??r._loadedComponent??null,r,HS(r)),z=zp(V,a,this.paramsInheritanceStrategy);V.params=Object.freeze(z.params),V.data=Object.freeze(z.data);let{segmentGroup:$,slicedSegments:Z}=$S(t,E,C,f);if(Z.length===0&&$.hasChildren())return this.processChildren(g,f,$,V).pipe(me(se=>new Kn(V,se)));if(f.length===0&&Z.length===0)return pe(new Kn(V,[]));let ne=Pr(r)===o;return this.processSegment(g,f,$,Z,ne?ke:o,!0,V).pipe(me(se=>new Kn(V,se instanceof Kn?[se]:[])))}))):Ru(t)))}getChildConfig(e,t,r){return t.children?pe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?pe({routes:t._loadedRoutes,injector:t._loadedInjector}):lB(e,t,r,this.urlSerializer).pipe(Bt(i=>i?this.configLoader.loadChildren(e,t).pipe(Gt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):fB(t))):pe({routes:[],injector:e})}};function bB(n){n.sort((e,t)=>e.value.outlet===ke?-1:t.value.outlet===ke?1:e.value.outlet.localeCompare(t.value.outlet))}function CB(n){let e=n.value.routeConfig;return e&&e.path===""}function gA(n){let e=[],t=new Set;for(let r of n){if(!CB(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=gA(r.children);e.push(new Kn(r.value,i))}return e.filter(r=>!t.has(r))}function zS(n){return n.data||{}}function HS(n){return n.resolve||{}}function TB(n,e,t,r,i,o){return Bt(a=>IB(n,e,t,r,a.extractedUrl,i,o).pipe(me(({state:c,tree:d})=>Pe(Y({},a),{targetSnapshot:c,urlAfterRedirects:d}))))}function DB(n,e){return Bt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return pe(t);let o=new Set(i.map(d=>d.route)),a=new Set;for(let d of o)if(!a.has(d))for(let f of _A(d))a.add(f);let c=0;return yt(a).pipe(Ps(d=>o.has(d)?SB(d,r,n,e):(d.data=zp(d,d.parent,n).resolve,pe(void 0))),Gt(()=>c++),tu(1),Bt(d=>c===a.size?pe(t):Gn))})}function _A(n){let e=n.children.map(t=>_A(t)).flat();return[n,...e]}function SB(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!cA(i)&&(o[Jl]=i.title),AB(o,n,e,r).pipe(me(a=>(n._resolvedData=a,n.data=zp(n,n.parent,t).resolve,null)))}function AB(n,e,t,r){let i=Ny(n);if(i.length===0)return pe({});let o={};return yt(i).pipe(Bt(a=>xB(n[a],e,t,r).pipe(Wr(),Gt(c=>{if(c instanceof Zl)throw qp(new Vu,c);o[a]=c}))),tu(1),__(o),Co(a=>fA(a)?Gn:Ja(a)))}function xB(n,e,t,r){let i=ed(e)??r,o=$u(n,i),a=o.resolve?o.resolve(e,t):ti(i,()=>o(e,t));return Uo(a)}function Py(n){return Sn(e=>{let t=n(e);return t?yt(t).pipe(me(()=>e)):pe(e)})}var vA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ke);return r}getResolvedTitleForRoute(t){return t.data[Jl]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:()=>W(MB),providedIn:"root"})}}return n})(),MB=(()=>{class n extends vA{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(ge(LS))}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rd=new ae("",{providedIn:"root",factory:()=>({})}),PB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=at({type:n,selectors:[["ng-component"]],standalone:!0,features:[ut],decls:1,vars:0,template:function(r,i){r&1&&Ct(0,"router-outlet")},dependencies:[ow],encapsulation:2})}}return n})();function sw(n){let e=n.children&&n.children.map(sw),t=e?Pe(Y({},n),{children:e}):Y({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ke&&(t.component=PB),t}var Yl=new ae(""),aw=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=W(Cp)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return pe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Uo(t.loadComponent()).pipe(me(yA),Gt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),_l(()=>{this.componentLoaders.delete(t)})),i=new Za(r,()=>new Jt).pipe(Wa());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return pe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=RB(r,this.compiler,t,this.onLoadEndListener).pipe(_l(()=>{this.childrenLoaders.delete(r)})),a=new Za(o,()=>new Jt).pipe(Wa());return this.childrenLoaders.set(r,a),a}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function RB(n,e,t,r){return Uo(n.loadChildren()).pipe(me(yA),Bt(i=>i instanceof Cl||Array.isArray(i)?pe(i):yt(e.compileModuleAsync(i))),me(i=>{r&&r(n);let o,a,c=!1;return Array.isArray(i)?(a=i,c=!0):(o=i.create(t).injector,a=o.get(Yl,[],{optional:!0,self:!0}).flat()),{routes:a.map(sw),injector:o}}))}function NB(n){return n&&typeof n=="object"&&"default"in n}function yA(n){return NB(n)?n.default:n}var uw=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:()=>W(kB),providedIn:"root"})}}return n})(),kB=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wA=new ae(""),IA=new ae("");function OB(n,e,t){let r=n.get(IA),i=n.get(Fn);return n.get(et).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(f=>setTimeout(f));let o,a=new Promise(f=>{o=f}),c=i.startViewTransition(()=>(o(),LB(n))),{onViewTransitionCreated:d}=r;return d&&ti(n,()=>d({transition:c,from:e,to:t})),a})}function LB(n){return new Promise(e=>{oy({read:()=>setTimeout(e)},{injector:n})})}var FB=new ae(""),cw=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Jt,this.transitionAbortSubject=new Jt,this.configLoader=W(aw),this.environmentInjector=W(Zn),this.urlSerializer=W(Xl),this.rootContexts=W(td),this.location=W(Pu),this.inputBindingEnabled=W(Zp,{optional:!0})!==null,this.titleStrategy=W(vA),this.options=W(rd,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=W(uw),this.createViewTransition=W(wA,{optional:!0}),this.navigationErrorHandler=W(FB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>pe(void 0),this.rootComponentType=null;let t=i=>this.events.next(new jy(i)),r=i=>this.events.next(new $y(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Pe(Y(Y({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new kt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:$l,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Wn(o=>o.id!==0),me(o=>Pe(Y({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Sn(o=>{let a=!1,c=!1;return pe(o).pipe(Sn(d=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Qn.SupersededByNewNavigation),Gn;this.currentTransition=o,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,targetBrowserUrl:typeof d.extras.browserUrl=="string"?this.urlSerializer.parse(d.extras.browserUrl):d.extras.browserUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Pe(Y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),g=d.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!f&&g!=="reload"){let y="";return this.events.next(new Bo(d.id,this.urlSerializer.serialize(d.rawUrl),y,Vp.IgnoredSameUrlNavigation)),d.resolve(!1),Gn}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return pe(d).pipe(Sn(y=>{let E=this.transitions?.getValue();return this.events.next(new Bu(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),E!==this.transitions?.getValue()?Gn:Promise.resolve(y)}),TB(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Gt(y=>{o.targetSnapshot=y.targetSnapshot,o.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation=Pe(Y({},this.currentNavigation),{finalUrl:y.urlAfterRedirects});let E=new Bp(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(E)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:y,extractedUrl:E,source:C,restoredState:V,extras:z}=d,$=new Bu(y,this.urlSerializer.serialize(E),C,V);this.events.next($);let Z=aA(this.rootComponentType).snapshot;return this.currentTransition=o=Pe(Y({},d),{targetSnapshot:Z,urlAfterRedirects:E,extras:Pe(Y({},z),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=E,pe(o)}else{let y="";return this.events.next(new Bo(d.id,this.urlSerializer.serialize(d.extractedUrl),y,Vp.IgnoredByUrlHandlingStrategy)),d.resolve(!1),Gn}}),Gt(d=>{let f=new Fy(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),me(d=>(this.currentTransition=o=Pe(Y({},d),{guards:q2(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),o)),nB(this.environmentInjector,d=>this.events.next(d)),Gt(d=>{if(o.guardsResult=d.guardsResult,d.guardsResult&&typeof d.guardsResult!="boolean")throw qp(this.urlSerializer,d.guardsResult);let f=new Vy(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(f)}),Wn(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",Qn.GuardRejected),!1)),Py(d=>{if(d.guards.canActivateChecks.length)return pe(d).pipe(Gt(f=>{let g=new By(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}),Sn(f=>{let g=!1;return pe(f).pipe(DB(this.paramsInheritanceStrategy,this.environmentInjector),Gt({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(f,"",Qn.NoDataFromResolver)}}))}),Gt(f=>{let g=new Uy(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}))}),Py(d=>{let f=g=>{let y=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(g.routeConfig).pipe(Gt(E=>{g.component=E}),me(()=>{})));for(let E of g.children)y.push(...f(E));return y};return Ms(f(d.targetSnapshot.root)).pipe(To(null),Xt(1))}),Py(()=>this.afterPreactivation()),Sn(()=>{let{currentSnapshot:d,targetSnapshot:f}=o,g=this.createViewTransition?.(this.environmentInjector,d.root,f.root);return g?yt(g).pipe(me(()=>o)):pe(o)}),me(d=>{let f=U2(t.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=o=Pe(Y({},d),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,o}),Gt(()=>{this.events.next(new Gl)}),H2(this.rootContexts,t.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),Xt(1),Gt({next:d=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ui(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{a=!0}}),y_(this.transitionAbortSubject.pipe(Gt(d=>{throw d}))),_l(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Qn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Co(d=>{if(c=!0,hA(d))this.events.next(new Hi(o.id,this.urlSerializer.serialize(o.extractedUrl),d.message,d.cancellationCode)),z2(d)?this.events.next(new Uu(d.url,d.navigationBehaviorOptions)):o.resolve(!1);else{let f=new ql(o.id,this.urlSerializer.serialize(o.extractedUrl),d,o.targetSnapshot??void 0);try{let g=ti(this.environmentInjector,()=>this.navigationErrorHandler?.(f));if(g instanceof Zl){let{message:y,cancellationCode:E}=qp(this.urlSerializer,g);this.events.next(new Hi(o.id,this.urlSerializer.serialize(o.extractedUrl),y,E)),this.events.next(new Uu(g.redirectTo,g.navigationBehaviorOptions))}else{this.events.next(f);let y=t.errorHandler(d);o.resolve(!!y)}}catch(g){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(g)}}return Gn}))}))}cancelNavigationTransition(t,r,i){let o=new Hi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function VB(n){return n!==$l}var BB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:()=>W(UB),providedIn:"root"})}}return n})(),rw=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},UB=(()=>{class n extends rw{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ui(n)))(i||n)}})()}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),EA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:()=>W(jB),providedIn:"root"})}}return n})(),jB=(()=>{class n extends EA{constructor(){super(...arguments),this.location=W(Pu),this.urlSerializer=W(Xl),this.options=W(rd,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=W(uw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new qi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=aA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Bu)this.stateMemento=this.createStateMemento();else if(t instanceof Bo)this.rawUrlTree=r.initialUrl;else if(t instanceof Bp){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Gl?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Hi&&(t.code===Qn.GuardRejected||t.code===Qn.NoDataFromResolver)?this.restoreHistory(r):t instanceof ql?this.restoreHistory(r,!0):t instanceof ui&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof qi?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,a=Y(Y({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",a)}else{let o=Y(Y({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ui(n)))(i||n)}})()}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ul=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ul||{});function bA(n,e){n.events.pipe(Wn(t=>t instanceof ui||t instanceof Hi||t instanceof ql||t instanceof Bo),me(t=>t instanceof ui||t instanceof Bo?Ul.COMPLETE:(t instanceof Hi?t.code===Qn.Redirect||t.code===Qn.SupersededByNewNavigation:!1)?Ul.REDIRECTING:Ul.FAILED),Wn(t=>t!==Ul.REDIRECTING),Xt(1)).subscribe(()=>{e()})}function $B(n){throw n}var zB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},HB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ht=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=W(Ip),this.stateManager=W(EA),this.options=W(rd,{optional:!0})||{},this.pendingTasks=W(bu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=W(cw),this.urlSerializer=W(Xl),this.location=W(Pu),this.urlHandlingStrategy=W(uw),this._events=new Jt,this.errorHandler=this.options.errorHandler||$B,this.navigated=!1,this.routeReuseStrategy=W(BB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=W(Yl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!W(Zp,{optional:!0}),this.eventsSubscription=new xt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Hi&&r.code!==Qn.Redirect&&r.code!==Qn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ui)this.navigated=!0;else if(r instanceof Uu){let a=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),d=Y({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||VB(i.source)},a);this.scheduleNavigation(c,$l,null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}GB(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$l,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let d=Y({},i);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(o.state=d)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(sw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:d}=r,f=d?this.currentUrlTree.fragment:a,g=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":g=Y(Y({},this.currentUrlTree.queryParams),o);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=o||null}g!==null&&(g=this.removeEmptyProps(g));let y;try{let E=i?i.snapshot:this.routerState.snapshot.root;y=rA(E)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),y=this.currentUrlTree.root}return iA(y,t,g,f??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Gs(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,$l,null,r)}navigate(t,r={skipLocationChange:!1}){return qB(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Y({},zB):r===!1?i=Y({},HB):i=r,Gs(t))return FS(this.currentUrlTree,t,i);let o=this.parseUrl(t);return FS(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,a){if(this.disposed)return Promise.resolve(!1);let c,d,f;a?(c=a.resolve,d=a.reject,f=a.promise):f=new Promise((y,E)=>{c=y,d=E});let g=this.pendingTasks.add();return bA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:c,reject:d,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(y=>Promise.reject(y))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function qB(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ue(4008,!1)}function GB(n){return!(n instanceof Gl)&&!(n instanceof Uu)}var ci=(()=>{class n{constructor(t,r,i,o,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.onChanges=new Jt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let d=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=d==="a"||d==="area",this.isAnchorElement?this.subscription=t.events.subscribe(f=>{f instanceof ui&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Gs(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||i||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let d={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,d),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:_D(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Gs(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(Q(ht),Q(pr),Fv("tabindex"),Q(oi),Q(xr),Q(zi))}}static{this.\u0275dir=gt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Ne("click",function(a){return i.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&Ml("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Vo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Vo],replaceUrl:[2,"replaceUrl","replaceUrl",Vo],routerLink:"routerLink"},standalone:!0,features:[ry,ni]})}}return n})();var Wp=class{};var WB=(()=>{class n{constructor(t,r,i,o,a){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Wn(t=>t instanceof ui),Ps(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=yp(o.providers,t,`Route: ${o.path}`));let a=o._injector??t,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(c,o.children??o._loadedRoutes))}return yt(i).pipe(Xa())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=pe(null);let o=i.pipe(Bt(a=>a===null?pe(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return yt([o,a]).pipe(Xa())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(ge(ht),ge(Cp),ge(Zn),ge(Wp),ge(aw))}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),CA=new ae(""),ZB=(()=>{class n{constructor(t,r,i,o,a={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Bu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ui?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Bo&&t.code===Vp.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Up&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Up(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){MD()}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac})}}return n})();function TA(n,...e){return ei([{provide:Yl,multi:!0,useValue:n},[],{provide:pr,useFactory:DA,deps:[ht]},{provide:bp,multi:!0,useFactory:SA},e.map(t=>t.\u0275providers)])}function DA(n){return n.routerState.root}function id(n,e){return{\u0275kind:n,\u0275providers:e}}function SA(){let n=W(un);return e=>{let t=n.get(zs);if(e!==t.components[0])return;let r=n.get(ht),i=n.get(AA);n.get(lw)===1&&r.initialNavigation(),n.get(xA,null,Le.Optional)?.setUpPreloading(),n.get(CA,null,Le.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var AA=new ae("",{factory:()=>new Jt}),lw=new ae("",{providedIn:"root",factory:()=>1});function KB(){return id(2,[{provide:lw,useValue:0},{provide:Ep,multi:!0,deps:[un],useFactory:e=>{let t=e.get(bS,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(ht),o=e.get(AA);bA(i,()=>{r(!0)}),e.get(cw).afterPreactivation=()=>(r(!0),o.closed?pe(void 0):o),i.initialNavigation()}))}}])}function QB(){return id(3,[{provide:Ep,multi:!0,useFactory:()=>{let e=W(ht);return()=>{e.setUpLocationChangeListener()}}},{provide:lw,useValue:2}])}var xA=new ae("");function YB(n){return id(0,[{provide:xA,useExisting:WB},{provide:Wp,useExisting:n}])}function JB(){return id(8,[jS,{provide:Zp,useExisting:jS}])}function XB(n){let e=[{provide:wA,useValue:OB},{provide:IA,useValue:Y({skipNextTransition:!!n?.skipInitialTransition},n)}];return id(9,e)}var qS=new ae("ROUTER_FORROOT_GUARD"),eU=[Pu,{provide:Xl,useClass:Vu},ht,td,{provide:pr,useFactory:DA,deps:[ht]},aw,[]],zu=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[eU,[],{provide:Yl,multi:!0,useValue:t},{provide:qS,useFactory:iU,deps:[[ht,new hn,new Tv]]},{provide:rd,useValue:r||{}},r?.useHash?nU():rU(),tU(),r?.preloadingStrategy?YB(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?oU(r):[],r?.bindToComponentInputs?JB().\u0275providers:[],r?.enableViewTransitions?XB().\u0275providers:[],sU()]}}static forChild(t){return{ngModule:n,providers:[{provide:Yl,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(ge(qS,8))}}static{this.\u0275mod=Fi({type:n})}static{this.\u0275inj=Li({})}}return n})();function tU(){return{provide:CA,useFactory:()=>{let n=W(SS),e=W(et),t=W(rd),r=W(cw),i=W(Xl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new ZB(i,r,n,e,t)}}}function nU(){return{provide:zi,useClass:TS}}function rU(){return{provide:zi,useClass:vy}}function iU(n){return"guarded"}function oU(n){return[n.initialNavigation==="disabled"?QB().\u0275providers:[],n.initialNavigation==="enabledBlocking"?KB().\u0275providers:[]]}var GS=new ae("");function sU(){return[{provide:GS,useFactory:SA},{provide:bp,multi:!0,useExisting:GS}]}var PA=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},aU=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],a=n[t++],c=n[t++],d=((i&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{let o=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},RA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],a=i+1<n.length,c=a?n[i+1]:0,d=i+2<n.length,f=d?n[i+2]:0,g=o>>2,y=(o&3)<<4|c>>4,E=(c&15)<<2|f>>6,C=f&63;d||(C=64,a||(E=64)),r.push(t[g],t[y],t[E],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(PA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):aU(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let f=i<n.length?t[n.charAt(i)]:64;++i;let y=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||f==null||y==null)throw new hw;let E=o<<2|c>>4;if(r.push(E),f!==64){let C=c<<4&240|f>>2;if(r.push(C),y!==64){let V=f<<6&192|y;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},hw=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},uU=function(n){let e=PA(n);return RA.encodeByteArray(e,!0)},od=function(n){return uU(n).replace(/\./g,"")},pw=function(n){try{return RA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function cU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var lU=()=>cU().__FIREBASE_DEFAULTS__,dU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},hU=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&pw(n[1]);return e&&JSON.parse(e)},Yp=()=>{try{return lU()||dU()||hU()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},mw=n=>{var e,t;return(t=(e=Yp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},NA=n=>{let e=mw(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},gw=()=>{var n;return(n=Yp())===null||n===void 0?void 0:n.config},_w=n=>{var e;return(e=Yp())===null||e===void 0?void 0:e[`_${n}`]};var Qp=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function kA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[od(JSON.stringify(t)),od(JSON.stringify(a)),""].join(".")}function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function fU(){var n;let e=(n=Yp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FA(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function VA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BA(){let n=tn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function UA(){return!fU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vw(){try{return typeof indexedDB=="object"}catch{return!1}}function jA(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var pU="FirebaseError",Yn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=pU,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gi.prototype.create)}},Gi=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?mU(o,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new Yn(i,c,r)}};function mU(n,e){return n.replace(gU,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var gU=/\{\$([^}]+)}/g;function $A(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function jo(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],a=e[i];if(MA(o)&&MA(a)){if(!jo(o,a))return!1}else if(o!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function MA(n){return n!==null&&typeof n=="object"}function sd(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qu(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Gu(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function zA(n,e){let t=new fw(n,e);return t.subscribe.bind(t)}var fw=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");_U(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=dw),i.error===void 0&&(i.error=dw),i.complete===void 0&&(i.complete=dw);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function _U(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function dw(){}var NZ=4*60*60*1e3;function Lt(n){return n&&n._delegate?n._delegate:n}var mr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ws="[DEFAULT]";var yw=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Qp;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yU(e))try{this.getOrInitializeService({instanceIdentifier:Ws})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ws){return this.instances.has(e)}getOptions(e=Ws){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vU(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ws){return this.component?this.component.multipleInstances?e:Ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function vU(n){return n===Ws?void 0:n}function yU(n){return n.instantiationMode==="EAGER"}var Jp=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new yw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var wU=[],ze=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ze||{}),IU={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},EU=ze.INFO,bU={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},CU=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=bU[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},$o=class{constructor(e){this.name=e,this._logLevel=EU,this._logHandler=CU,this._userLogHandler=null,wU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}};var TU=(n,e)=>e.some(t=>n instanceof t),HA,qA;function DU(){return HA||(HA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SU(){return qA||(qA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var GA=new WeakMap,Iw=new WeakMap,WA=new WeakMap,ww=new WeakMap,bw=new WeakMap;function AU(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(li(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&GA.set(t,n)}).catch(()=>{}),bw.set(e,n),e}function xU(n){if(Iw.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});Iw.set(n,e)}var Ew={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Iw.get(n);if(e==="objectStoreNames")return n.objectStoreNames||WA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return li(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ZA(n){Ew=n(Ew)}function MU(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Xp(this),e,...t);return WA.set(r,e.sort?e.sort():[e]),li(r)}:SU().includes(n)?function(...e){return n.apply(Xp(this),e),li(GA.get(this))}:function(...e){return li(n.apply(Xp(this),e))}}function PU(n){return typeof n=="function"?MU(n):(n instanceof IDBTransaction&&xU(n),TU(n,DU())?new Proxy(n,Ew):n)}function li(n){if(n instanceof IDBRequest)return AU(n);if(ww.has(n))return ww.get(n);let e=PU(n);return e!==n&&(ww.set(n,e),bw.set(e,n)),e}var Xp=n=>bw.get(n);function QA(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let a=indexedDB.open(n,e),c=li(a);return r&&a.addEventListener("upgradeneeded",d=>{r(li(a.result),d.oldVersion,d.newVersion,li(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),i&&d.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}var RU=["get","getKey","getAll","getAllKeys","count"],NU=["put","add","delete","clear"],Cw=new Map;function KA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Cw.get(e))return Cw.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=NU.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||RU.includes(t)))return;let o=function(a,...c){return b(this,null,function*(){let d=this.transaction(a,i?"readwrite":"readonly"),f=d.store;return r&&(f=f.index(c.shift())),(yield Promise.all([f[t](...c),i&&d.done]))[0]})};return Cw.set(e,o),o}ZA(n=>Pe(Y({},n),{get:(e,t,r)=>KA(e,t)||n.get(e,t,r),has:(e,t)=>!!KA(e,t)||n.has(e,t)}));var Dw=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kU(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function kU(n){let e=n.getComponent();return e?.type==="VERSION"}var Sw="@firebase/app",YA="0.10.13";var Wi=new $o("@firebase/app"),OU="@firebase/app-compat",LU="@firebase/analytics-compat",FU="@firebase/analytics",VU="@firebase/app-check-compat",BU="@firebase/app-check",UU="@firebase/auth",jU="@firebase/auth-compat",$U="@firebase/database",zU="@firebase/data-connect",HU="@firebase/database-compat",qU="@firebase/functions",GU="@firebase/functions-compat",WU="@firebase/installations",ZU="@firebase/installations-compat",KU="@firebase/messaging",QU="@firebase/messaging-compat",YU="@firebase/performance",JU="@firebase/performance-compat",XU="@firebase/remote-config",ej="@firebase/remote-config-compat",tj="@firebase/storage",nj="@firebase/storage-compat",rj="@firebase/firestore",ij="@firebase/vertexai-preview",oj="@firebase/firestore-compat",sj="firebase",aj="10.14.1";var Aw="[DEFAULT]",uj={[Sw]:"fire-core",[OU]:"fire-core-compat",[FU]:"fire-analytics",[LU]:"fire-analytics-compat",[BU]:"fire-app-check",[VU]:"fire-app-check-compat",[UU]:"fire-auth",[jU]:"fire-auth-compat",[$U]:"fire-rtdb",[zU]:"fire-data-connect",[HU]:"fire-rtdb-compat",[qU]:"fire-fn",[GU]:"fire-fn-compat",[WU]:"fire-iid",[ZU]:"fire-iid-compat",[KU]:"fire-fcm",[QU]:"fire-fcm-compat",[YU]:"fire-perf",[JU]:"fire-perf-compat",[XU]:"fire-rc",[ej]:"fire-rc-compat",[tj]:"fire-gcs",[nj]:"fire-gcs-compat",[rj]:"fire-fst",[oj]:"fire-fst-compat",[ij]:"fire-vertex","fire-js":"fire-js",[sj]:"fire-js-all"};var ad=new Map,cj=new Map,xw=new Map;function JA(n,e){try{n.container.addComponent(e)}catch(t){Wi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ho(n){let e=n.name;if(xw.has(e))return Wi.debug(`There were multiple attempts to register component ${e}.`),!1;xw.set(e,n);for(let t of ad.values())JA(t,n);for(let t of cj.values())JA(t,n);return!0}function cd(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Rr(n){return n.settings!==void 0}var lj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zo=new Gi("app","Firebase",lj);var Mw=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zo.create("app-deleted",{appName:this._name})}};var qo=aj;function em(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Aw,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw zo.create("bad-app-name",{appName:String(i)});if(t||(t=gw()),!t)throw zo.create("no-options");let o=ad.get(i);if(o){if(jo(t,o.options)&&jo(r,o.config))return o;throw zo.create("duplicate-app",{appName:i})}let a=new Jp(i);for(let d of xw.values())a.addComponent(d);let c=new Mw(t,r,a);return ad.set(i,c),c}function Wu(n=Aw){let e=ad.get(n);if(!e&&n===Aw&&gw())return em();if(!e)throw zo.create("no-app",{appName:n});return e}function tm(){return Array.from(ad.values())}function Wt(n,e,t){var r;let i=(r=uj[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wi.warn(c.join(" "));return}Ho(new mr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var dj="firebase-heartbeat-database",hj=1,ud="firebase-heartbeat-store",Tw=null;function nx(){return Tw||(Tw=QA(dj,hj,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ud)}catch(t){console.warn(t)}}}}).catch(n=>{throw zo.create("idb-open",{originalErrorMessage:n.message})})),Tw}function fj(n){return b(this,null,function*(){try{let t=(yield nx()).transaction(ud),r=yield t.objectStore(ud).get(rx(n));return yield t.done,r}catch(e){if(e instanceof Yn)Wi.warn(e.message);else{let t=zo.create("idb-get",{originalErrorMessage:e?.message});Wi.warn(t.message)}}})}function XA(n,e){return b(this,null,function*(){try{let r=(yield nx()).transaction(ud,"readwrite");yield r.objectStore(ud).put(e,rx(n)),yield r.done}catch(t){if(t instanceof Yn)Wi.warn(t.message);else{let r=zo.create("idb-set",{originalErrorMessage:t?.message});Wi.warn(r.message)}}})}function rx(n){return`${n.name}!${n.options.appId}`}var pj=1024,mj=30*24*60*60*1e3,Pw=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Rw(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ex();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let c=new Date(a.date).valueOf();return Date.now()-c<=mj}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Wi.warn(r)}})}getHeartbeatsHeader(){return b(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=ex(),{heartbeatsToSend:r,unsentEntries:i}=gj(this._heartbeatsCache.heartbeats),o=od(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Wi.warn(t),""}})}};function ex(){return new Date().toISOString().substring(0,10)}function gj(n,e=pj){let t=[],r=n.slice();for(let i of n){let o=t.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),tx(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),tx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Rw=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return vw()?jA().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield fj(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return XA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return XA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function tx(n){return od(JSON.stringify({version:2,heartbeats:n})).length}function _j(n){Ho(new mr("platform-logger",e=>new Dw(e),"PRIVATE")),Ho(new mr("heartbeat",e=>new Pw(e),"PRIVATE")),Wt(Sw,YA,n),Wt(Sw,YA,"esm2017"),Wt("fire-js","")}_j("");var vj="firebase",yj="10.14.1";Wt(vj,yj,"app");var Ks=new Oi("ANGULARFIRE2_VERSION");function rm(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(a=>a.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ld=(n,e)=>{let t=e?[e]:tm(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},Ku=class{constructor(){return ld(wj)}},wj="app-check";function Zu(){}var nm=class{zone;delegate;constructor(e,t=h_){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(a){i.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(o,t,r)}},Nw=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zu,{},Zu,Zu)),t.pipe(Gt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Qu=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new nm(Zone.current)),this.insideAngular=t.run(()=>new nm(Zone.current,d_)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ge(et))};static \u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function im(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Ij(n){return im().ngZone.runOutsideAngular(()=>n())}function Zs(n){return im().ngZone.run(()=>n())}function Ej(n){return bj(im())(n)}function bj(n){return function(t){return t=t.lift(new Nw(n.ngZone)),t.pipe(bo(n.outsideAngular),Eo(n.insideAngular))}}var Cj=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Zs(()=>n.apply(void 0,r))},nn=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=Zs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zu,{},Zu,Zu))),r[o]=Cj(r[o],t));let i=Ij(()=>n.apply(this,r));if(!e)if(i instanceof je){let o=im();return i.pipe(bo(o.outsideAngular),Eo(o.insideAngular))}else return Zs(()=>i);return i instanceof je?i.pipe(Ej):i instanceof Promise?Zs(()=>new Promise((o,a)=>i.then(c=>Zs(()=>o(c)),c=>Zs(()=>a(c))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Zs(()=>i)};var Zi=class{constructor(e){return e}},Qs=class{constructor(){return tm()}};function Tj(n){return n&&n.length===1?n[0]:new Zi(Wu())}var kw=new ae("angularfire2._apps"),Dj={provide:Zi,useFactory:Tj,deps:[[new hn,kw]]},Sj={provide:Qs,deps:[[new hn,kw]]};function Aj(n){return(e,t)=>{let r=t.get(ri);Wt("angularfire",Ks.full,"core"),Wt("angularfire",Ks.full,"app"),Wt("angular",uS.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Zi(i)}}function ix(n,...e){return ei([Dj,Sj,{provide:kw,useFactory:Aj(n),multi:!0,deps:[et,un,Qu,...e]}])}function Ix(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Ex=Ix,bx=new Gi("auth","Firebase",Ix());var lm=new $o("@firebase/auth");function xj(n,...e){lm.logLevel<=ze.WARN&&lm.warn(`Auth (${qo}): ${n}`,...e)}function sm(n,...e){lm.logLevel<=ze.ERROR&&lm.error(`Auth (${qo}): ${n}`,...e)}function hi(n,...e){throw r0(n,...e)}function Ys(n,...e){return r0(n,...e)}function Cx(n,e,t){let r=Object.assign(Object.assign({},Ex()),{[e]:t});return new Gi("auth","Firebase",r).create(e,{appName:n.name})}function Yi(n){return Cx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function r0(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return bx.create(n,...e)}function _e(n,e,...t){if(!n)throw r0(e,...t)}function Ki(n){let e="INTERNAL ASSERTION FAILED: "+n;throw sm(e),new Error(e)}function Wo(n,e){n||Ki(e)}function Vw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Mj(){return ox()==="http:"||ox()==="https:"}function ox(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Pj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Mj()||FA()||"connection"in navigator)?navigator.onLine:!0}function Rj(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Js=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wo(t>e,"Short delay should be less than long delay!"),this.isMobile=OA()||VA()}get(){return Pj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function i0(n,e){Wo(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var dm=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Nj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var kj=new Js(3e4,6e4);function Zo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ko(o,a,c,d){return b(this,arguments,function*(n,e,t,r,i={}){return Tx(n,i,()=>b(this,null,function*(){let f={},g={};r&&(e==="GET"?g=r:f={body:JSON.stringify(r)});let y=sd(Object.assign({key:n.config.apiKey},g)).slice(1),E=yield n._getAdditionalHeaders();E["Content-Type"]="application/json",n.languageCode&&(E["X-Firebase-Locale"]=n.languageCode);let C=Object.assign({method:e,headers:E},f);return LA()||(C.referrerPolicy="no-referrer"),dm.fetch()(Dx(n,n.config.apiHost,t,y),C)}))})}function Tx(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},Nj),e);try{let i=new Bw(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield o.json();if("needConfirmation"in a)throw om(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let c=o.ok?a.errorMessage:a.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw om(n,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw om(n,"email-already-in-use",a);if(d==="USER_DISABLED")throw om(n,"user-disabled",a);let g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Cx(n,g,f);hi(n,g)}}catch(i){if(i instanceof Yn)throw i;hi(n,"network-request-failed",{message:String(i)})}})}function vd(o,a,c,d){return b(this,arguments,function*(n,e,t,r,i={}){let f=yield Ko(n,e,t,r,i);return"mfaPendingCredential"in f&&hi(n,"multi-factor-auth-required",{_serverResponse:f}),f})}function Dx(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?i0(n.config,i):`${n.config.apiScheme}://${i}`}function Oj(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Bw=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ys(this.auth,"network-request-failed")),kj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function om(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Ys(n,e,r);return i.customData._tokenResponse=t,i}function sx(n){return n!==void 0&&n.enterprise!==void 0}var Uw=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Oj(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function Lj(n,e){return b(this,null,function*(){return Ko(n,"GET","/v2/recaptchaConfig",Zo(n,e))})}function Fj(n,e){return b(this,null,function*(){return Ko(n,"POST","/v1/accounts:delete",e)})}function Sx(n,e){return b(this,null,function*(){return Ko(n,"POST","/v1/accounts:lookup",e)})}function dd(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function o0(n,e=!1){return b(this,null,function*(){let t=Lt(n),r=yield t.getIdToken(e),i=s0(r);_e(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,a=o?.sign_in_provider;return{claims:i,token:r,authTime:dd(Ow(i.auth_time)),issuedAtTime:dd(Ow(i.iat)),expirationTime:dd(Ow(i.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Ow(n){return Number(n)*1e3}function s0(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return sm("JWT malformed, contained fewer than 3 sections"),null;try{let i=pw(t);return i?JSON.parse(i):(sm("Failed to decode base64 JWT payload"),null)}catch(i){return sm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function ax(n){let e=s0(n);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function fd(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Yn&&Vj(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Vj({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var jw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var pd=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=dd(this.lastLoginAt),this.creationTime=dd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function hm(n){return b(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield fd(n,Sx(t,{idToken:r}));_e(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Ax(o.providerUserInfo):[],c=Bj(n.providerData,a),d=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!c?.length,g=d?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new pd(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,y)})}function a0(n){return b(this,null,function*(){let e=Lt(n);yield hm(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Bj(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Ax(n){return n.map(e=>{var{providerId:t}=e,r=f_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Uj(n,e){return b(this,null,function*(){let t=yield Tx(n,{},()=>b(this,null,function*(){let r=sd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,a=Dx(n,i,"/v1/token",`key=${o}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",dm.fetch()(a,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function jj(n,e){return b(this,null,function*(){return Ko(n,"POST","/v2/accounts:revokeToken",Zo(n,e))})}var hd=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ax(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");let t=ax(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield Uj(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,a=new n;return r&&(_e(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(_e(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(_e(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ki("not implemented")}};function Go(n,e){_e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Yu=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=f_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new pd(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield fd(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return o0(this,e)}reload(){return a0(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield hm(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(Rr(this.auth.app))return Promise.reject(Yi(this.auth));let e=yield this.getIdToken();return yield fd(this,Fj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,a,c,d,f,g;let y=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(i=t.email)!==null&&i!==void 0?i:void 0,C=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,V=(a=t.photoURL)!==null&&a!==void 0?a:void 0,z=(c=t.tenantId)!==null&&c!==void 0?c:void 0,$=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,Z=(f=t.createdAt)!==null&&f!==void 0?f:void 0,ne=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:se,emailVerified:ce,isAnonymous:st,providerData:he,stsTokenManager:P}=t;_e(se&&P,e,"internal-error");let T=hd.fromJSON(this.name,P);_e(typeof se=="string",e,"internal-error"),Go(y,e.name),Go(E,e.name),_e(typeof ce=="boolean",e,"internal-error"),_e(typeof st=="boolean",e,"internal-error"),Go(C,e.name),Go(V,e.name),Go(z,e.name),Go($,e.name),Go(Z,e.name),Go(ne,e.name);let D=new n({uid:se,auth:e,email:E,emailVerified:ce,displayName:y,isAnonymous:st,photoURL:V,phoneNumber:C,tenantId:z,stsTokenManager:T,createdAt:Z,lastLoginAt:ne});return he&&Array.isArray(he)&&(D.providerData=he.map(x=>Object.assign({},x))),$&&(D._redirectEventId=$),D}static _fromIdTokenResponse(e,t,r=!1){return b(this,null,function*(){let i=new hd;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield hm(o),o})}static _fromGetAccountInfoResponse(e,t,r){return b(this,null,function*(){let i=t.users[0];_e(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?Ax(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!o?.length,c=new hd;c.updateFromIdToken(r);let d=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new pd(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(d,f),d})}};var ux=new Map;function Qi(n){Wo(n instanceof Function,"Expected a class definition");let e=ux.get(n);return e?(Wo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ux.set(n,e),e)}var $j=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,r){return b(this,null,function*(){this.storage[t]=r})}_get(t){return b(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),$w=$j;function am(n,e,t){return`firebase:${n}:${e}:${t}`}var fm=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=am(this.userKey,i.apiKey,o),this.fullPersistenceKey=am("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Yu._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return b(this,null,function*(){if(!t.length)return new n(Qi($w),e,r);let i=(yield Promise.all(t.map(f=>b(this,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),o=i[0]||Qi($w),a=am(r,e.config.apiKey,e.name),c=null;for(let f of t)try{let g=yield f._get(a);if(g){let y=Yu._fromJSON(e,g);f!==o&&(c=y),o=f;break}}catch{}let d=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new n(o,e,r):(o=d[0],c&&(yield o._set(a,c.toJSON())),yield Promise.all(t.map(f=>b(this,null,function*(){if(f!==o)try{yield f._remove(a)}catch{}}))),new n(o,e,r))})}};function cx(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kx(e))return"Blackberry";if(Ox(e))return"Webos";if(Mx(e))return"Safari";if((e.includes("chrome/")||Px(e))&&!e.includes("edge/"))return"Chrome";if(Nx(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function xx(n=tn()){return/firefox\//i.test(n)}function Mx(n=tn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Px(n=tn()){return/crios\//i.test(n)}function Rx(n=tn()){return/iemobile/i.test(n)}function Nx(n=tn()){return/android/i.test(n)}function kx(n=tn()){return/blackberry/i.test(n)}function Ox(n=tn()){return/webos/i.test(n)}function u0(n=tn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function zj(n=tn()){var e;return u0(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Hj(){return BA()&&document.documentMode===10}function Lx(n=tn()){return u0(n)||Nx(n)||Ox(n)||kx(n)||/windows phone/i.test(n)||Rx(n)}function Fx(n,e=[]){let t;switch(n){case"Browser":t=cx(tn());break;case"Worker":t=`${cx(tn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qo}/${r}`}var zw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((a,c)=>{try{let d=e(o);a(d)}catch(d){c(d)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function qj(t){return b(this,arguments,function*(n,e={}){return Ko(n,"GET","/v2/passwordPolicy",Zo(n,e))})}var Gj=6,Hw=class{constructor(e){var t,r,i,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:Gj,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,a,c;let d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(a=d.containsNumericCharacter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var qw=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pm(this),this.idTokenSubscription=new pm(this),this.beforeStateQueue=new zw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qi(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield fm.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield Sx(this,{idToken:e}),r=yield Yu._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(Rr(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,d=yield this.tryRedirectSignIn(e);(!a||a===c)&&d?.user&&(i=d.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield hm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Rj()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(Rr(this.app))return Promise.reject(Yi(this));let t=e?Lt(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return Rr(this.app)?Promise.reject(Yi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Rr(this.app)?Promise.reject(Yi(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(Qi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield qj(this),t=new Hw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Gi("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield jj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Qi(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=yield fm.create(this,[Qi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),a=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(c,this,"internal-error"),c.then(()=>{a||o(this.currentUser)}),typeof t=="function"){let d=e.addObserver(t,r,i);return()=>{a=!0,d()}}else{let d=e.addObserver(t);return()=>{a=!0,d()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return b(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&xj(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function ea(n){return Lt(n)}var pm=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=zA(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Im={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Wj(n){Im=n}function Vx(n){return Im.loadJS(n)}function Zj(){return Im.recaptchaEnterpriseScript}function Kj(){return Im.gapiScript}function Bx(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Qj="recaptcha-enterprise",Yj="NO_RECAPTCHA",Gw=class{constructor(e){this.type=Qj,this.auth=ea(e)}verify(e="verify",t=!1){return b(this,null,function*(){function r(o){return b(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((a,c)=>b(this,null,function*(){Lj(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let f=new Uw(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,a(f.siteKey)}}).catch(d=>{c(d)})}))})}function i(o,a,c){let d=window.grecaptcha;sx(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{a(f)}).catch(()=>{a(Yj)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{r(this.auth).then(c=>{if(!t&&sx(window.grecaptcha))i(c,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=Zj();d.length!==0&&(d+=c),Vx(d).then(()=>{i(c,o,a)}).catch(f=>{a(f)})}}).catch(c=>{a(c)})})})}};function lx(n,e,t,r=!1){return b(this,null,function*(){let i=new Gw(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let a=Object.assign({},e);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Ww(n,e,t,r){return b(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield lx(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>b(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let a=yield lx(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(o)}))})}function c0(n,e){let t=cd(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(jo(o,e??{}))return i;hi(i,"already-initialized")}return t.initialize({options:e})}function Jj(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Qi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function l0(n,e,t){let r=ea(n);_e(r._canInitEmulator,r,"emulator-config-failed"),_e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=Ux(e),{host:a,port:c}=Xj(e),d=c===null?"":`:${c}`;r.config.emulator={url:`${o}//${a}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||e$()}function Ux(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Xj(n){let e=Ux(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:dx(r.substr(o.length+1))}}else{let[o,a]=r.split(":");return{host:o,port:dx(a)}}}function dx(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function e$(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var md=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ki("not implemented")}_getIdTokenResponse(e){return Ki("not implemented")}_linkToIdToken(e,t){return Ki("not implemented")}_getReauthenticationResolver(e){return Ki("not implemented")}};function t$(n,e){return b(this,null,function*(){return Ko(n,"POST","/v1/accounts:signUp",e)})}function n$(n,e){return b(this,null,function*(){return vd(n,"POST","/v1/accounts:signInWithPassword",Zo(n,e))})}function r$(n,e){return b(this,null,function*(){return vd(n,"POST","/v1/accounts:signInWithEmailLink",Zo(n,e))})}function i$(n,e){return b(this,null,function*(){return vd(n,"POST","/v1/accounts:signInWithEmailLink",Zo(n,e))})}var gd=class n extends md{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return b(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ww(e,t,"signInWithPassword",n$);case"emailLink":return r$(e,{email:this._email,oobCode:this._password});default:hi(e,"internal-error")}})}_linkToIdToken(e,t){return b(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ww(e,r,"signUpPassword",t$);case"emailLink":return i$(e,{idToken:t,email:this._email,oobCode:this._password});default:hi(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Lw(n,e){return b(this,null,function*(){return vd(n,"POST","/v1/accounts:signInWithIdp",Zo(n,e))})}function o$(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function s$(n){let e=qu(Gu(n)).link,t=e?qu(Gu(e)).deep_link_id:null,r=qu(Gu(n)).deep_link_id;return(r?qu(Gu(r)).link:null)||r||t||e||n}var mm=class n{constructor(e){var t,r,i,o,a,c;let d=qu(Gu(e)),f=(t=d.apiKey)!==null&&t!==void 0?t:null,g=(r=d.oobCode)!==null&&r!==void 0?r:null,y=o$((i=d.mode)!==null&&i!==void 0?i:null);_e(f&&g&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=g,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=d.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=s$(e);try{return new n(t)}catch{return null}}};var jx=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return gd._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=mm.parseLink(r);return _e(i,"argument-error"),gd._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),gm=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Zw=class extends gm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function a$(n,e){return b(this,null,function*(){return vd(n,"POST","/v1/accounts:signUp",Zo(n,e))})}var Ju=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return b(this,null,function*(){let o=yield Yu._fromIdTokenResponse(e,r,i),a=hx(r);return new n({user:o,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return b(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=hx(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function hx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Kw=class n extends Yn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function $x(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Kw._fromErrorAndOperation(n,o,e,r):o})}function u$(n,e,t=!1){return b(this,null,function*(){let r=yield fd(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ju._forOperation(n,"link",r)})}function c$(n,e,t=!1){return b(this,null,function*(){let{auth:r}=n;if(Rr(r.app))return Promise.reject(Yi(r));let i="reauthenticate";try{let o=yield fd(n,$x(r,i,e,n),t);_e(o.idToken,r,"internal-error");let a=s0(o.idToken);_e(a,r,"internal-error");let{sub:c}=a;return _e(n.uid===c,r,"user-mismatch"),Ju._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&hi(r,"user-mismatch"),o}})}function zx(n,e,t=!1){return b(this,null,function*(){if(Rr(n.app))return Promise.reject(Yi(n));let r="signIn",i=yield $x(n,r,e),o=yield Ju._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function d0(n,e){return b(this,null,function*(){return zx(ea(n),e)})}function Hx(n){return b(this,null,function*(){let e=ea(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function h0(n,e,t){return b(this,null,function*(){if(Rr(n.app))return Promise.reject(Yi(n));let r=ea(n),a=yield Ww(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",a$).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&Hx(n),d}),c=yield Ju._fromIdTokenResponse(r,"signIn",a);return yield r._updateCurrentUser(c.user),c})}function f0(n,e,t){return Rr(n.app)?Promise.reject(Yi(n)):d0(Lt(n),jx.credential(e,t)).catch(r=>b(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Hx(n),r}))}function p0(n,e,t,r){return Lt(n).onIdTokenChanged(e,t,r)}function m0(n,e,t){return Lt(n).beforeAuthStateChanged(e,t)}function Em(n,e,t,r){return Lt(n).onAuthStateChanged(e,t,r)}function bm(n){return Lt(n).signOut()}var _m="__sak";var vm=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_m,"1"),this.storage.removeItem(_m),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var l$=1e3,d$=10,h$=(()=>{class n extends vm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Lx(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);Hj()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,d$):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},l$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return b(this,null,function*(){yield yo(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return b(this,null,function*(){let r=yield yo(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return b(this,null,function*(){yield yo(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),qx=h$;var f$=(()=>{class n extends vm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),g0=f$;function p$(n){return Promise.all(n.map(e=>b(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var m$=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return b(this,null,function*(){let r=t,{eventId:i,eventType:o,data:a}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let d=Array.from(c).map(g=>b(this,null,function*(){return g(r.origin,a)})),f=yield p$(d);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Gx(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Qw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return b(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((c,d)=>{let f=Gx("",20);i.port1.start();let g=setTimeout(()=>{d(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(y){let E=y;if(E.data.eventId===f)switch(E.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(E.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function di(){return window}function g$(n){di().location.href=n}function Wx(){return typeof di().WorkerGlobalScope<"u"&&typeof di().importScripts=="function"}function _$(){return b(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function v$(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function y$(){return Wx()?self:null}var Zx="firebaseLocalStorageDb",w$=1,ym="firebaseLocalStorage",Kx="fbase_key",Xs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Cm(n,e){return n.transaction([ym],e?"readwrite":"readonly").objectStore(ym)}function I$(){let n=indexedDB.deleteDatabase(Zx);return new Xs(n).toPromise()}function Yw(){let n=indexedDB.open(Zx,w$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(ym,{keyPath:Kx})}catch(i){t(i)}}),n.addEventListener("success",()=>b(this,null,function*(){let r=n.result;r.objectStoreNames.contains(ym)?e(r):(r.close(),yield I$(),e(yield Yw()))}))})}function fx(n,e,t){return b(this,null,function*(){let r=Cm(n,!0).put({[Kx]:e,value:t});return new Xs(r).toPromise()})}function E$(n,e){return b(this,null,function*(){let t=Cm(n,!1).get(e),r=yield new Xs(t).toPromise();return r===void 0?null:r.value})}function px(n,e){let t=Cm(n,!0).delete(e);return new Xs(t).toPromise()}var b$=800,C$=3,T$=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return b(this,null,function*(){return this.db?this.db:(this.db=yield Yw(),this.db)})}_withRetries(t){return b(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>C$)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return b(this,null,function*(){return Wx()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return b(this,null,function*(){this.receiver=m$._getInstance(y$()),this.receiver._subscribe("keyChanged",(t,r)=>b(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>b(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return b(this,null,function*(){var t,r;if(this.activeServiceWorker=yield _$(),!this.activeServiceWorker)return;this.sender=new Qw(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return b(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||v$()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return b(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Yw();return yield fx(t,_m,"1"),yield px(t,_m),!0}catch{}return!1})}_withPendingWrite(t){return b(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(i=>fx(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return b(this,null,function*(){let r=yield this._withRetries(i=>E$(i,t));return this.localCache[t]=r,r})}_remove(t){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(r=>px(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return b(this,null,function*(){let t=yield this._withRetries(o=>{let a=Cm(o,!1).getAll();return new Xs(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:a}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>b(this,null,function*(){return this._poll()}),b$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Qx=T$;var DK=Bx("rcb"),SK=new Js(3e4,6e4);function D$(n,e){return e?Qi(e):(_e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var _d=class extends md{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lw(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Lw(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Lw(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function S$(n){return zx(n.auth,new _d(n),n.bypassAuthState)}function A$(n){let{auth:e,user:t}=n;return _e(t,e,"internal-error"),c$(t,new _d(n),n.bypassAuthState)}function x$(n){return b(this,null,function*(){let{auth:e,user:t}=n;return _e(t,e,"internal-error"),u$(t,new _d(n),n.bypassAuthState)})}var Jw=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>b(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return b(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:a,type:c}=e;if(a){this.reject(a);return}let d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(d))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return S$;case"linkViaPopup":case"linkViaRedirect":return x$;case"reauthViaPopup":case"reauthViaRedirect":return A$;default:hi(this.auth,"internal-error")}}resolve(e){Wo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var AK=new Js(2e3,1e4);var M$="pendingRedirect",um=new Map,Xw=class n extends Jw{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return b(this,null,function*(){let e=um.get(this.auth._key());if(!e){try{let r=(yield P$(this.resolver,this.auth))?yield yo(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}um.set(this.auth._key(),e)}return this.bypassAuthState||um.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return b(this,null,function*(){if(e.type==="signInViaRedirect")return yo(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,yo(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return b(this,null,function*(){})}cleanUp(){}};function P$(n,e){return b(this,null,function*(){let t=k$(e),r=N$(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function R$(n,e){um.set(n._key(),e)}function N$(n){return Qi(n._redirectPersistence)}function k$(n){return am(M$,n.config.apiKey,n.name)}function O$(n,e,t=!1){return b(this,null,function*(){if(Rr(n.app))return Promise.reject(Yi(n));let r=ea(n),i=D$(r,e),a=yield new Xw(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var L$=10*60*1e3,e0=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!F$(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Yx(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ys(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=L$&&this.cachedEventUids.clear(),this.cachedEventUids.has(mx(e))}saveEventToCache(e){this.cachedEventUids.add(mx(e)),this.lastProcessedEventTime=Date.now()}};function mx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Yx({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function F$(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yx(n);default:return!1}}function V$(t){return b(this,arguments,function*(n,e={}){return Ko(n,"GET","/v1/projects",e)})}var B$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,U$=/^https?/;function j$(n){return b(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield V$(n);for(let t of e)try{if($$(t))return}catch{}hi(n,"unauthorized-domain")})}function $$(n){let e=Vw(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!U$.test(t))return!1;if(B$.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var z$=new Js(3e4,6e4);function gx(){let n=di().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function H$(n){return new Promise((e,t)=>{var r,i,o;function a(){gx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gx(),t(Ys(n,"network-request-failed"))},timeout:z$.get()})}if(!((i=(r=di().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=di().gapi)===null||o===void 0)&&o.load)a();else{let c=Bx("iframefcb");return di()[c]=()=>{gapi.load?a():t(Ys(n,"network-request-failed"))},Vx(`${Kj()}?onload=${c}`).catch(d=>t(d))}}).catch(e=>{throw cm=null,e})}var cm=null;function q$(n){return cm=cm||H$(n),cm}var G$=new Js(5e3,15e3),W$="__/auth/iframe",Z$="emulator/auth/iframe",K$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Q$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Y$(n){let e=n.config;_e(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?i0(e,Z$):`https://${n.config.authDomain}/${W$}`,r={apiKey:e.apiKey,appName:n.name,v:qo},i=Q$.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${sd(r).slice(1)}`}function J$(n){return b(this,null,function*(){let e=yield q$(n),t=di().gapi;return _e(t,n,"internal-error"),e.open({where:document.body,url:Y$(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:K$,dontclear:!0},r=>new Promise((i,o)=>b(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=Ys(n,"network-request-failed"),c=di().setTimeout(()=>{o(a)},G$.get());function d(){di().clearTimeout(c),i(r)}r.ping(d).then(d,()=>{o(a)})})))})}var X$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ez=500,tz=600,nz="_blank",rz="http://localhost",wm=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function iz(n,e,t,r=ez,i=tz){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",d=Object.assign(Object.assign({},X$),{width:r.toString(),height:i.toString(),top:o,left:a}),f=tn().toLowerCase();t&&(c=Px(f)?nz:t),xx(f)&&(e=e||rz,d.scrollbars="yes");let g=Object.entries(d).reduce((E,[C,V])=>`${E}${C}=${V},`,"");if(zj(f)&&c!=="_self")return oz(e||"",c),new wm(null);let y=window.open(e||"",c,g);_e(y,n,"popup-blocked");try{y.focus()}catch{}return new wm(y)}function oz(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var sz="__/auth/handler",az="emulator/auth/handler",uz=encodeURIComponent("fac");function _x(n,e,t,r,i,o){return b(this,null,function*(){_e(n.config.authDomain,n,"auth-domain-config-required"),_e(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:qo,eventId:i};if(e instanceof gm){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",$A(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[g,y]of Object.entries(o||{}))a[g]=y}if(e instanceof Zw){let g=e.getScopes().filter(y=>y!=="");g.length>0&&(a.scopes=g.join(","))}n.tenantId&&(a.tid=n.tenantId);let c=a;for(let g of Object.keys(c))c[g]===void 0&&delete c[g];let d=yield n._getAppCheckToken(),f=d?`#${uz}=${encodeURIComponent(d)}`:"";return`${cz(n)}?${sd(c).slice(1)}${f}`})}function cz({config:n}){return n.emulator?i0(n,az):`https://${n.authDomain}/${sz}`}var Fw="webStorageSupport",t0=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=g0,this._completeRedirectFn=O$,this._overrideRedirectResult=R$}_openPopup(e,t,r,i){return b(this,null,function*(){var o;Wo((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let a=yield _x(e,t,r,Vw(),i);return iz(e,a,Gx())})}_openRedirect(e,t,r,i){return b(this,null,function*(){yield this._originValidation(e);let o=yield _x(e,t,r,Vw(),i);return g$(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Wo(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return b(this,null,function*(){let t=yield J$(e),r=new e0(e);return t.register("authEvent",i=>(_e(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fw,{type:Fw},i=>{var o;let a=(o=i?.[0])===null||o===void 0?void 0:o[Fw];a!==void 0&&t(!!a),hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=j$(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Lx()||Mx()||u0()}},Jx=t0;var vx="@firebase/auth",yx="1.7.9";var n0=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function lz(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dz(n){Ho(new mr("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;_e(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let d={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fx(n)},f=new qw(r,i,o,d);return Jj(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ho(new mr("auth-internal",e=>{let t=ea(e.getProvider("auth").getImmediate());return(r=>new n0(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wt(vx,yx,lz(n)),Wt(vx,yx,"esm2017")}var hz=5*60,fz=_w("authIdTokenMaxAge")||hz,wx=null,pz=n=>e=>b(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>fz)return;let i=t?.token;wx!==i&&(wx=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function _0(n=Wu()){let e=cd(n,"auth");if(e.isInitialized())return e.getImmediate();let t=c0(n,{popupRedirectResolver:Jx,persistence:[Qx,qx,g0]}),r=_w("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let a=pz(o.toString());m0(t,a,()=>a(t.currentUser)),p0(t,c=>a(c))}}let i=mw("auth");return i&&l0(t,`http://${i}`),t}function mz(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Wj({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Ys("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",mz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dz("Browser");var Xx="auth",ta=class{constructor(e){return e}},yd=class{constructor(){return ld(Xx)}};var v0=new ae("angularfire2.auth-instances");function iH(n,e){let t=rm(Xx,n,e);return t&&new ta(t)}function oH(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ta(r)}}var sH={provide:yd,deps:[[new hn,v0]]},aH={provide:ta,useFactory:iH,deps:[[new hn,v0],Zi]};function eM(n,...e){return Wt("angularfire",Ks.full,"auth"),ei([aH,sH,{provide:v0,useFactory:oH(n),multi:!0,deps:[et,un,Qu,Qs,[new hn,Ku],...e]}])}var tM=nn(h0,!0);var nM=nn(_0,!0);var rM=nn(f0,!0);var iM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oM={};var Qo,y0;(function(){var n;function e(P,T){function D(){}D.prototype=T.prototype,P.D=T.prototype,P.prototype=new D,P.prototype.constructor=P,P.C=function(x,R,N){for(var A=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)A[Qe-2]=arguments[Qe];return T.prototype[R].apply(x,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,T,D){D||(D=0);var x=Array(16);if(typeof T=="string")for(var R=0;16>R;++R)x[R]=T.charCodeAt(D++)|T.charCodeAt(D++)<<8|T.charCodeAt(D++)<<16|T.charCodeAt(D++)<<24;else for(R=0;16>R;++R)x[R]=T[D++]|T[D++]<<8|T[D++]<<16|T[D++]<<24;T=P.g[0],D=P.g[1],R=P.g[2];var N=P.g[3],A=T+(N^D&(R^N))+x[0]+3614090360&4294967295;T=D+(A<<7&4294967295|A>>>25),A=N+(R^T&(D^R))+x[1]+3905402710&4294967295,N=T+(A<<12&4294967295|A>>>20),A=R+(D^N&(T^D))+x[2]+606105819&4294967295,R=N+(A<<17&4294967295|A>>>15),A=D+(T^R&(N^T))+x[3]+3250441966&4294967295,D=R+(A<<22&4294967295|A>>>10),A=T+(N^D&(R^N))+x[4]+4118548399&4294967295,T=D+(A<<7&4294967295|A>>>25),A=N+(R^T&(D^R))+x[5]+1200080426&4294967295,N=T+(A<<12&4294967295|A>>>20),A=R+(D^N&(T^D))+x[6]+2821735955&4294967295,R=N+(A<<17&4294967295|A>>>15),A=D+(T^R&(N^T))+x[7]+4249261313&4294967295,D=R+(A<<22&4294967295|A>>>10),A=T+(N^D&(R^N))+x[8]+1770035416&4294967295,T=D+(A<<7&4294967295|A>>>25),A=N+(R^T&(D^R))+x[9]+2336552879&4294967295,N=T+(A<<12&4294967295|A>>>20),A=R+(D^N&(T^D))+x[10]+4294925233&4294967295,R=N+(A<<17&4294967295|A>>>15),A=D+(T^R&(N^T))+x[11]+2304563134&4294967295,D=R+(A<<22&4294967295|A>>>10),A=T+(N^D&(R^N))+x[12]+1804603682&4294967295,T=D+(A<<7&4294967295|A>>>25),A=N+(R^T&(D^R))+x[13]+4254626195&4294967295,N=T+(A<<12&4294967295|A>>>20),A=R+(D^N&(T^D))+x[14]+2792965006&4294967295,R=N+(A<<17&4294967295|A>>>15),A=D+(T^R&(N^T))+x[15]+1236535329&4294967295,D=R+(A<<22&4294967295|A>>>10),A=T+(R^N&(D^R))+x[1]+4129170786&4294967295,T=D+(A<<5&4294967295|A>>>27),A=N+(D^R&(T^D))+x[6]+3225465664&4294967295,N=T+(A<<9&4294967295|A>>>23),A=R+(T^D&(N^T))+x[11]+643717713&4294967295,R=N+(A<<14&4294967295|A>>>18),A=D+(N^T&(R^N))+x[0]+3921069994&4294967295,D=R+(A<<20&4294967295|A>>>12),A=T+(R^N&(D^R))+x[5]+3593408605&4294967295,T=D+(A<<5&4294967295|A>>>27),A=N+(D^R&(T^D))+x[10]+38016083&4294967295,N=T+(A<<9&4294967295|A>>>23),A=R+(T^D&(N^T))+x[15]+3634488961&4294967295,R=N+(A<<14&4294967295|A>>>18),A=D+(N^T&(R^N))+x[4]+3889429448&4294967295,D=R+(A<<20&4294967295|A>>>12),A=T+(R^N&(D^R))+x[9]+568446438&4294967295,T=D+(A<<5&4294967295|A>>>27),A=N+(D^R&(T^D))+x[14]+3275163606&4294967295,N=T+(A<<9&4294967295|A>>>23),A=R+(T^D&(N^T))+x[3]+4107603335&4294967295,R=N+(A<<14&4294967295|A>>>18),A=D+(N^T&(R^N))+x[8]+1163531501&4294967295,D=R+(A<<20&4294967295|A>>>12),A=T+(R^N&(D^R))+x[13]+2850285829&4294967295,T=D+(A<<5&4294967295|A>>>27),A=N+(D^R&(T^D))+x[2]+4243563512&4294967295,N=T+(A<<9&4294967295|A>>>23),A=R+(T^D&(N^T))+x[7]+1735328473&4294967295,R=N+(A<<14&4294967295|A>>>18),A=D+(N^T&(R^N))+x[12]+2368359562&4294967295,D=R+(A<<20&4294967295|A>>>12),A=T+(D^R^N)+x[5]+4294588738&4294967295,T=D+(A<<4&4294967295|A>>>28),A=N+(T^D^R)+x[8]+2272392833&4294967295,N=T+(A<<11&4294967295|A>>>21),A=R+(N^T^D)+x[11]+1839030562&4294967295,R=N+(A<<16&4294967295|A>>>16),A=D+(R^N^T)+x[14]+4259657740&4294967295,D=R+(A<<23&4294967295|A>>>9),A=T+(D^R^N)+x[1]+2763975236&4294967295,T=D+(A<<4&4294967295|A>>>28),A=N+(T^D^R)+x[4]+1272893353&4294967295,N=T+(A<<11&4294967295|A>>>21),A=R+(N^T^D)+x[7]+4139469664&4294967295,R=N+(A<<16&4294967295|A>>>16),A=D+(R^N^T)+x[10]+3200236656&4294967295,D=R+(A<<23&4294967295|A>>>9),A=T+(D^R^N)+x[13]+681279174&4294967295,T=D+(A<<4&4294967295|A>>>28),A=N+(T^D^R)+x[0]+3936430074&4294967295,N=T+(A<<11&4294967295|A>>>21),A=R+(N^T^D)+x[3]+3572445317&4294967295,R=N+(A<<16&4294967295|A>>>16),A=D+(R^N^T)+x[6]+76029189&4294967295,D=R+(A<<23&4294967295|A>>>9),A=T+(D^R^N)+x[9]+3654602809&4294967295,T=D+(A<<4&4294967295|A>>>28),A=N+(T^D^R)+x[12]+3873151461&4294967295,N=T+(A<<11&4294967295|A>>>21),A=R+(N^T^D)+x[15]+530742520&4294967295,R=N+(A<<16&4294967295|A>>>16),A=D+(R^N^T)+x[2]+3299628645&4294967295,D=R+(A<<23&4294967295|A>>>9),A=T+(R^(D|~N))+x[0]+4096336452&4294967295,T=D+(A<<6&4294967295|A>>>26),A=N+(D^(T|~R))+x[7]+1126891415&4294967295,N=T+(A<<10&4294967295|A>>>22),A=R+(T^(N|~D))+x[14]+2878612391&4294967295,R=N+(A<<15&4294967295|A>>>17),A=D+(N^(R|~T))+x[5]+4237533241&4294967295,D=R+(A<<21&4294967295|A>>>11),A=T+(R^(D|~N))+x[12]+1700485571&4294967295,T=D+(A<<6&4294967295|A>>>26),A=N+(D^(T|~R))+x[3]+2399980690&4294967295,N=T+(A<<10&4294967295|A>>>22),A=R+(T^(N|~D))+x[10]+4293915773&4294967295,R=N+(A<<15&4294967295|A>>>17),A=D+(N^(R|~T))+x[1]+2240044497&4294967295,D=R+(A<<21&4294967295|A>>>11),A=T+(R^(D|~N))+x[8]+1873313359&4294967295,T=D+(A<<6&4294967295|A>>>26),A=N+(D^(T|~R))+x[15]+4264355552&4294967295,N=T+(A<<10&4294967295|A>>>22),A=R+(T^(N|~D))+x[6]+2734768916&4294967295,R=N+(A<<15&4294967295|A>>>17),A=D+(N^(R|~T))+x[13]+1309151649&4294967295,D=R+(A<<21&4294967295|A>>>11),A=T+(R^(D|~N))+x[4]+4149444226&4294967295,T=D+(A<<6&4294967295|A>>>26),A=N+(D^(T|~R))+x[11]+3174756917&4294967295,N=T+(A<<10&4294967295|A>>>22),A=R+(T^(N|~D))+x[2]+718787259&4294967295,R=N+(A<<15&4294967295|A>>>17),A=D+(N^(R|~T))+x[9]+3951481745&4294967295,P.g[0]=P.g[0]+T&4294967295,P.g[1]=P.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,P.g[2]=P.g[2]+R&4294967295,P.g[3]=P.g[3]+N&4294967295}r.prototype.u=function(P,T){T===void 0&&(T=P.length);for(var D=T-this.blockSize,x=this.B,R=this.h,N=0;N<T;){if(R==0)for(;N<=D;)i(this,P,N),N+=this.blockSize;if(typeof P=="string"){for(;N<T;)if(x[R++]=P.charCodeAt(N++),R==this.blockSize){i(this,x),R=0;break}}else for(;N<T;)if(x[R++]=P[N++],R==this.blockSize){i(this,x),R=0;break}}this.h=R,this.o+=T},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var T=1;T<P.length-8;++T)P[T]=0;var D=8*this.o;for(T=P.length-8;T<P.length;++T)P[T]=D&255,D/=256;for(this.u(P),P=Array(16),T=D=0;4>T;++T)for(var x=0;32>x;x+=8)P[D++]=this.g[T]>>>x&255;return P};function o(P,T){var D=c;return Object.prototype.hasOwnProperty.call(D,P)?D[P]:D[P]=T(P)}function a(P,T){this.h=T;for(var D=[],x=!0,R=P.length-1;0<=R;R--){var N=P[R]|0;x&&N==T||(D[R]=N,x=!1)}this.g=D}var c={};function d(P){return-128<=P&&128>P?o(P,function(T){return new a([T|0],0>T?-1:0)}):new a([P|0],0>P?-1:0)}function f(P){if(isNaN(P)||!isFinite(P))return y;if(0>P)return $(f(-P));for(var T=[],D=1,x=0;P>=D;x++)T[x]=P/D|0,D*=4294967296;return new a(T,0)}function g(P,T){if(P.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(P.charAt(0)=="-")return $(g(P.substring(1),T));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(T,8)),x=y,R=0;R<P.length;R+=8){var N=Math.min(8,P.length-R),A=parseInt(P.substring(R,R+N),T);8>N?(N=f(Math.pow(T,N)),x=x.j(N).add(f(A))):(x=x.j(D),x=x.add(f(A)))}return x}var y=d(0),E=d(1),C=d(16777216);n=a.prototype,n.m=function(){if(z(this))return-$(this).m();for(var P=0,T=1,D=0;D<this.g.length;D++){var x=this.i(D);P+=(0<=x?x:4294967296+x)*T,T*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(V(this))return"0";if(z(this))return"-"+$(this).toString(P);for(var T=f(Math.pow(P,6)),D=this,x="";;){var R=ce(D,T).g;D=Z(D,R.j(T));var N=((0<D.g.length?D.g[0]:D.h)>>>0).toString(P);if(D=R,V(D))return N+x;for(;6>N.length;)N="0"+N;x=N+x}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function V(P){if(P.h!=0)return!1;for(var T=0;T<P.g.length;T++)if(P.g[T]!=0)return!1;return!0}function z(P){return P.h==-1}n.l=function(P){return P=Z(this,P),z(P)?-1:V(P)?0:1};function $(P){for(var T=P.g.length,D=[],x=0;x<T;x++)D[x]=~P.g[x];return new a(D,~P.h).add(E)}n.abs=function(){return z(this)?$(this):this},n.add=function(P){for(var T=Math.max(this.g.length,P.g.length),D=[],x=0,R=0;R<=T;R++){var N=x+(this.i(R)&65535)+(P.i(R)&65535),A=(N>>>16)+(this.i(R)>>>16)+(P.i(R)>>>16);x=A>>>16,N&=65535,A&=65535,D[R]=A<<16|N}return new a(D,D[D.length-1]&-2147483648?-1:0)};function Z(P,T){return P.add($(T))}n.j=function(P){if(V(this)||V(P))return y;if(z(this))return z(P)?$(this).j($(P)):$($(this).j(P));if(z(P))return $(this.j($(P)));if(0>this.l(C)&&0>P.l(C))return f(this.m()*P.m());for(var T=this.g.length+P.g.length,D=[],x=0;x<2*T;x++)D[x]=0;for(x=0;x<this.g.length;x++)for(var R=0;R<P.g.length;R++){var N=this.i(x)>>>16,A=this.i(x)&65535,Qe=P.i(R)>>>16,En=P.i(R)&65535;D[2*x+2*R]+=A*En,ne(D,2*x+2*R),D[2*x+2*R+1]+=N*En,ne(D,2*x+2*R+1),D[2*x+2*R+1]+=A*Qe,ne(D,2*x+2*R+1),D[2*x+2*R+2]+=N*Qe,ne(D,2*x+2*R+2)}for(x=0;x<T;x++)D[x]=D[2*x+1]<<16|D[2*x];for(x=T;x<2*T;x++)D[x]=0;return new a(D,0)};function ne(P,T){for(;(P[T]&65535)!=P[T];)P[T+1]+=P[T]>>>16,P[T]&=65535,T++}function se(P,T){this.g=P,this.h=T}function ce(P,T){if(V(T))throw Error("division by zero");if(V(P))return new se(y,y);if(z(P))return T=ce($(P),T),new se($(T.g),$(T.h));if(z(T))return T=ce(P,$(T)),new se($(T.g),T.h);if(30<P.g.length){if(z(P)||z(T))throw Error("slowDivide_ only works with positive integers.");for(var D=E,x=T;0>=x.l(P);)D=st(D),x=st(x);var R=he(D,1),N=he(x,1);for(x=he(x,2),D=he(D,2);!V(x);){var A=N.add(x);0>=A.l(P)&&(R=R.add(D),N=A),x=he(x,1),D=he(D,1)}return T=Z(P,R.j(T)),new se(R,T)}for(R=y;0<=P.l(T);){for(D=Math.max(1,Math.floor(P.m()/T.m())),x=Math.ceil(Math.log(D)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),N=f(D),A=N.j(T);z(A)||0<A.l(P);)D-=x,N=f(D),A=N.j(T);V(N)&&(N=E),R=R.add(N),P=Z(P,A)}return new se(R,P)}n.A=function(P){return ce(this,P).h},n.and=function(P){for(var T=Math.max(this.g.length,P.g.length),D=[],x=0;x<T;x++)D[x]=this.i(x)&P.i(x);return new a(D,this.h&P.h)},n.or=function(P){for(var T=Math.max(this.g.length,P.g.length),D=[],x=0;x<T;x++)D[x]=this.i(x)|P.i(x);return new a(D,this.h|P.h)},n.xor=function(P){for(var T=Math.max(this.g.length,P.g.length),D=[],x=0;x<T;x++)D[x]=this.i(x)^P.i(x);return new a(D,this.h^P.h)};function st(P){for(var T=P.g.length+1,D=[],x=0;x<T;x++)D[x]=P.i(x)<<1|P.i(x-1)>>>31;return new a(D,P.h)}function he(P,T){var D=T>>5;T%=32;for(var x=P.g.length-D,R=[],N=0;N<x;N++)R[N]=0<T?P.i(N+D)>>>T|P.i(N+D+1)<<32-T:P.i(N+D);return new a(R,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,y0=oM.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=g,Qo=oM.Integer=a}).apply(typeof iM<"u"?iM:typeof self<"u"?self:typeof window<"u"?window:{});var Tm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ji={};var w0,uH,Xu,I0,wd,Dm,E0,b0,C0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,m,v){return l==Array.prototype||l==Object.prototype||(l[m]=v.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tm=="object"&&Tm];for(var m=0;m<l.length;++m){var v=l[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(l,m){if(m)e:{var v=r;l=l.split(".");for(var I=0;I<l.length-1;I++){var k=l[I];if(!(k in v))break e;v=v[k]}l=l[l.length-1],I=v[l],m=m(I),m!=I&&m!=null&&e(v,l,{configurable:!0,writable:!0,value:m})}}function o(l,m){l instanceof String&&(l+="");var v=0,I=!1,k={next:function(){if(!I&&v<l.length){var j=v++;return{value:m(j,l[j]),done:!1}}return I=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}i("Array.prototype.values",function(l){return l||function(){return o(this,function(m,v){return v})}});var a=a||{},c=this||self;function d(l){var m=typeof l;return m=m!="object"?m:l?Array.isArray(l)?"array":m:"null",m=="array"||m=="object"&&typeof l.length=="number"}function f(l){var m=typeof l;return m=="object"&&l!=null||m=="function"}function g(l,m,v){return l.call.apply(l.bind,arguments)}function y(l,m,v){if(!l)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,I),l.apply(m,k)}}return function(){return l.apply(m,arguments)}}function E(l,m,v){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,E.apply(null,arguments)}function C(l,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),l.apply(this,I)}}function V(l,m){function v(){}v.prototype=m.prototype,l.aa=m.prototype,l.prototype=new v,l.prototype.constructor=l,l.Qb=function(I,k,j){for(var J=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)J[Oe-2]=arguments[Oe];return m.prototype[k].apply(I,J)}}function z(l){let m=l.length;if(0<m){let v=Array(m);for(let I=0;I<m;I++)v[I]=l[I];return v}return[]}function $(l,m){for(let v=1;v<arguments.length;v++){let I=arguments[v];if(d(I)){let k=l.length||0,j=I.length||0;l.length=k+j;for(let J=0;J<j;J++)l[k+J]=I[J]}else l.push(I)}}class Z{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ne(l){return/^[\s\xa0]*$/.test(l)}function se(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function ce(l){return ce[" "](l),l}ce[" "]=function(){};var st=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function he(l,m,v){for(let I in l)m.call(v,l[I],I,l)}function P(l,m){for(let v in l)m.call(void 0,l[v],v,l)}function T(l){let m={};for(let v in l)m[v]=l[v];return m}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(l,m){let v,I;for(let k=1;k<arguments.length;k++){I=arguments[k];for(v in I)l[v]=I[v];for(let j=0;j<D.length;j++)v=D[j],Object.prototype.hasOwnProperty.call(I,v)&&(l[v]=I[v])}}function R(l){var m=1;l=l.split(":");let v=[];for(;0<m&&l.length;)v.push(l.shift()),m--;return l.length&&v.push(l.join(":")),v}function N(l){c.setTimeout(()=>{throw l},0)}function A(){var l=ct;let m=null;return l.g&&(m=l.g,l.g=l.g.next,l.g||(l.h=null),m.next=null),m}class Qe{constructor(){this.h=this.g=null}add(m,v){let I=En.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var En=new Z(()=>new Te,l=>l.reset());class Te{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let io,de=!1,ct=new Qe,on=()=>{let l=c.Promise.resolve(void 0);io=()=>{l.then(ln)}};var ln=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(v){N(v)}var m=En;m.j(l),100>m.h&&(m.h++,l.next=m.g,m.g=l)}de=!1};function nt(){this.s=this.s,this.C=this.C}nt.prototype.s=!1,nt.prototype.ma=function(){this.s||(this.s=!0,this.N())},nt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(l,m){this.type=l,this.g=this.target=m,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var Be=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,m=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let v=()=>{};c.addEventListener("test",v,m),c.removeEventListener("test",v,m)}catch{}return l}();function bn(l,m){if(Ee.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var v=this.type=l.type,I=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=m,m=l.relatedTarget){if(st){e:{try{ce(m.nodeName);var k=!0;break e}catch{}k=!1}k||(m=null)}}else v=="mouseover"?m=l.fromElement:v=="mouseout"&&(m=l.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Fr[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&bn.aa.h.call(this)}}V(bn,Ee);var Fr={2:"touch",3:"pen",4:"mouse"};bn.prototype.h=function(){bn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var oo="closure_listenable_"+(1e6*Math.random()|0),Nc=0;function kc(l,m,v,I,k){this.listener=l,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=k,this.key=++Nc,this.da=this.fa=!1}function Vr(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function so(l){this.src=l,this.g={},this.h=0}so.prototype.add=function(l,m,v,I,k){var j=l.toString();l=this.g[j],l||(l=this.g[j]=[],this.h++);var J=ya(l,m,I,k);return-1<J?(m=l[J],v||(m.fa=!1)):(m=new kc(m,this.src,j,!!I,k),m.fa=v,l.push(m)),m};function Oc(l,m){var v=m.type;if(v in l.g){var I=l.g[v],k=Array.prototype.indexOf.call(I,m,void 0),j;(j=0<=k)&&Array.prototype.splice.call(I,k,1),j&&(Vr(m),l.g[v].length==0&&(delete l.g[v],l.h--))}}function ya(l,m,v,I){for(var k=0;k<l.length;++k){var j=l[k];if(!j.da&&j.listener==m&&j.capture==!!v&&j.ha==I)return k}return-1}var wa="closure_lm_"+(1e6*Math.random()|0),us={};function cs(l,m,v,I,k){if(I&&I.once)return Ia(l,m,v,I,k);if(Array.isArray(m)){for(var j=0;j<m.length;j++)cs(l,m[j],v,I,k);return null}return v=Ca(v),l&&l[oo]?l.K(m,v,f(I)?!!I.capture:!!I,k):eh(l,m,v,!1,I,k)}function eh(l,m,v,I,k,j){if(!m)throw Error("Invalid event type");var J=f(k)?!!k.capture:!!k,Oe=ls(l);if(Oe||(l[wa]=Oe=new so(l)),v=Oe.add(m,v,I,J,j),v.proxy)return v;if(I=th(),v.proxy=I,I.src=l,I.listener=v,l.addEventListener)Be||(k=J),k===void 0&&(k=!1),l.addEventListener(m.toString(),I,k);else if(l.attachEvent)l.attachEvent(nh(m.toString()),I);else if(l.addListener&&l.removeListener)l.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function th(){function l(v){return m.call(l.src,l.listener,v)}let m=Bg;return l}function Ia(l,m,v,I,k){if(Array.isArray(m)){for(var j=0;j<m.length;j++)Ia(l,m[j],v,I,k);return null}return v=Ca(v),l&&l[oo]?l.L(m,v,f(I)?!!I.capture:!!I,k):eh(l,m,v,!0,I,k)}function Lc(l,m,v,I,k){if(Array.isArray(m))for(var j=0;j<m.length;j++)Lc(l,m[j],v,I,k);else I=f(I)?!!I.capture:!!I,v=Ca(v),l&&l[oo]?(l=l.i,m=String(m).toString(),m in l.g&&(j=l.g[m],v=ya(j,v,I,k),-1<v&&(Vr(j[v]),Array.prototype.splice.call(j,v,1),j.length==0&&(delete l.g[m],l.h--)))):l&&(l=ls(l))&&(m=l.g[m.toString()],l=-1,m&&(l=ya(m,v,I,k)),(v=-1<l?m[l]:null)&&Ea(v))}function Ea(l){if(typeof l!="number"&&l&&!l.da){var m=l.src;if(m&&m[oo])Oc(m.i,l);else{var v=l.type,I=l.proxy;m.removeEventListener?m.removeEventListener(v,I,l.capture):m.detachEvent?m.detachEvent(nh(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=ls(m))?(Oc(v,l),v.h==0&&(v.src=null,m[wa]=null)):Vr(l)}}}function nh(l){return l in us?us[l]:us[l]="on"+l}function Bg(l,m){if(l.da)l=!0;else{m=new bn(m,this);var v=l.listener,I=l.ha||l.src;l.fa&&Ea(l),l=v.call(I,m)}return l}function ls(l){return l=l[wa],l instanceof so?l:null}var ba="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ca(l){return typeof l=="function"?l:(l[ba]||(l[ba]=function(m){return l.handleEvent(m)}),l[ba])}function Zt(){nt.call(this),this.i=new so(this),this.M=this,this.F=null}V(Zt,nt),Zt.prototype[oo]=!0,Zt.prototype.removeEventListener=function(l,m,v,I){Lc(this,l,m,v,I)};function Kt(l,m){var v,I=l.F;if(I)for(v=[];I;I=I.F)v.push(I);if(l=l.M,I=m.type||m,typeof m=="string")m=new Ee(m,l);else if(m instanceof Ee)m.target=m.target||l;else{var k=m;m=new Ee(I,l),x(m,k)}if(k=!0,v)for(var j=v.length-1;0<=j;j--){var J=m.g=v[j];k=ds(J,I,!0,m)&&k}if(J=m.g=l,k=ds(J,I,!0,m)&&k,k=ds(J,I,!1,m)&&k,v)for(j=0;j<v.length;j++)J=m.g=v[j],k=ds(J,I,!1,m)&&k}Zt.prototype.N=function(){if(Zt.aa.N.call(this),this.i){var l=this.i,m;for(m in l.g){for(var v=l.g[m],I=0;I<v.length;I++)Vr(v[I]);delete l.g[m],l.h--}}this.F=null},Zt.prototype.K=function(l,m,v,I){return this.i.add(String(l),m,!1,v,I)},Zt.prototype.L=function(l,m,v,I){return this.i.add(String(l),m,!0,v,I)};function ds(l,m,v,I){if(m=l.i.g[String(m)],!m)return!0;m=m.concat();for(var k=!0,j=0;j<m.length;++j){var J=m[j];if(J&&!J.da&&J.capture==v){var Oe=J.listener,vt=J.ha||J.src;J.fa&&Oc(l.i,J),k=Oe.call(vt,I)!==!1&&k}}return k&&!I.defaultPrevented}function rh(l,m,v){if(typeof l=="function")v&&(l=E(l,v));else if(l&&typeof l.handleEvent=="function")l=E(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:c.setTimeout(l,m||0)}function Fc(l){l.g=rh(()=>{l.g=null,l.i&&(l.i=!1,Fc(l))},l.l);let m=l.h;l.h=null,l.m.apply(null,m)}class Vc extends nt{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Fc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ao(l){nt.call(this),this.h=l,this.g={}}V(ao,nt);var ih=[];function uo(l){he(l.g,function(m,v){this.g.hasOwnProperty(v)&&Ea(m)},l),l.g={}}ao.prototype.N=function(){ao.aa.N.call(this),uo(this)},ao.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bc=c.JSON.stringify,Ug=c.JSON.parse,oh=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function Ta(){}Ta.prototype.h=null;function Uc(l){return l.h||(l.h=l.i())}function sh(){}var hs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jc(){Ee.call(this,"d")}V(jc,Ee);function $c(){Ee.call(this,"c")}V($c,Ee);var Ei={},ah=null;function co(){return ah=ah||new Zt}Ei.La="serverreachability";function uh(l){Ee.call(this,Ei.La,l)}V(uh,Ee);function fs(l){let m=co();Kt(m,new uh(m))}Ei.STAT_EVENT="statevent";function ch(l,m){Ee.call(this,Ei.STAT_EVENT,l),this.stat=m}V(ch,Ee);function sn(l){let m=co();Kt(m,new ch(m,l))}Ei.Ma="timingevent";function Bn(l,m){Ee.call(this,Ei.Ma,l),this.size=m}V(Bn,Ee);function re(l,m){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},m)}function lo(){this.g=!0}lo.prototype.xa=function(){this.g=!1};function lh(l,m,v,I,k,j){l.info(function(){if(l.g)if(j)for(var J="",Oe=j.split("&"),vt=0;vt<Oe.length;vt++){var Ge=Oe[vt].split("=");if(1<Ge.length){var pt=Ge[0];Ge=Ge[1];var Qt=pt.split("_");J=2<=Qt.length&&Qt[1]=="type"?J+(pt+"="+Ge+"&"):J+(pt+"=redacted&")}}else J=null;else J=j;return"XMLHTTP REQ ("+I+") [attempt "+k+"]: "+m+`
`+v+`
`+J})}function dh(l,m,v,I,k,j,J){l.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+k+"]: "+m+`
`+v+`
`+j+" "+J})}function bi(l,m,v,I){l.info(function(){return"XMLHTTP TEXT ("+m+"): "+hh(l,v)+(I?" "+I:"")})}function zc(l,m){l.info(function(){return"TIMEOUT: "+m})}lo.prototype.info=function(){};function hh(l,m){if(!l.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(l=0;l<v.length;l++)if(Array.isArray(v[l])){var I=v[l];if(!(2>I.length)){var k=I[1];if(Array.isArray(k)&&!(1>k.length)){var j=k[0];if(j!="noop"&&j!="stop"&&j!="close")for(var J=1;J<k.length;J++)k[J]=""}}}}return Bc(v)}catch{return m}}var yr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qc;function Da(){}V(Da,Ta),Da.prototype.g=function(){return new XMLHttpRequest},Da.prototype.i=function(){return{}},qc=new Da;function Br(l,m,v,I){this.j=l,this.i=m,this.l=v,this.R=I||1,this.U=new ao(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fh}function fh(){this.i=null,this.g="",this.h=!1}var Gc={},Wc={};function ho(l,m,v){l.L=1,l.v=po(an(m)),l.m=v,l.P=!0,ph(l,null)}function ph(l,m){l.F=Date.now(),Sa(l),l.A=an(l.v);var v=l.A,I=l.R;Array.isArray(I)||(I=[String(I)]),rt(v.i,"t",I),l.C=0,v=l.j.J,l.h=new fh,l.g=Ts(l.j,v?m:null,!l.m),0<l.O&&(l.M=new Vc(E(l.Y,l,l.g),l.O)),m=l.U,v=l.g,I=l.ca;var k="readystatechange";Array.isArray(k)||(k&&(ih[0]=k.toString()),k=ih);for(var j=0;j<k.length;j++){var J=cs(v,k[j],I||m.handleEvent,!1,m.h||m);if(!J)break;m.g[J.key]=J}m=l.H?T(l.H):{},l.m?(l.u||(l.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,m)):(l.u="GET",l.g.ea(l.A,l.u,null,m)),fs(),lh(l.i,l.u,l.A,l.l,l.R,l.m)}Br.prototype.ca=function(l){l=l.target;let m=this.M;m&&jn(l)==3?m.j():this.Y(l)},Br.prototype.Y=function(l){try{if(l==this.g)e:{let Qt=jn(this.g);var m=this.g.Ba();let zn=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||Ih(this.g)))){this.J||Qt!=4||m==7||(m==8||0>=zn?fs(3):fs(2)),ps(this);var v=this.g.Z();this.X=v;t:if(mh(this)){var I=Ih(this.g);l="";var k=I.length,j=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ur(this),wr(this);var J="";break t}this.h.i=new c.TextDecoder}for(m=0;m<k;m++)this.h.h=!0,l+=this.h.i.decode(I[m],{stream:!(j&&m==k-1)});I.length=0,this.h.g+=l,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=v==200,dh(this.i,this.u,this.A,this.l,this.R,Qt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,vt=this.g;if((Oe=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(Oe)){var Ge=Oe;break t}}Ge=null}if(v=Ge)bi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Aa(this,v);else{this.o=!1,this.s=3,sn(12),Ur(this),wr(this);break e}}if(this.P){v=!0;let Hn;for(;!this.J&&this.C<J.length;)if(Hn=jg(this,J),Hn==Wc){Qt==4&&(this.s=4,sn(14),v=!1),bi(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==Gc){this.s=4,sn(15),bi(this.i,this.l,J,"[Invalid Chunk]"),v=!1;break}else bi(this.i,this.l,Hn,null),Aa(this,Hn);if(mh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||J.length!=0||this.h.h||(this.s=1,sn(16),v=!1),this.o=this.o&&v,!v)bi(this.i,this.l,J,"[Invalid Chunked Response]"),Ur(this),wr(this);else if(0<J.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),ka(pt),pt.M=!0,sn(11))}}else bi(this.i,this.l,J,null),Aa(this,J);Qt==4&&Ur(this),this.o&&!this.J&&(Qt==4?Th(this.j,this):(this.o=!1,Sa(this)))}else Eh(this.g),v==400&&0<J.indexOf("Unknown SID")?(this.s=3,sn(12)):(this.s=0,sn(13)),Ur(this),wr(this)}}}catch{}finally{}};function mh(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function jg(l,m){var v=l.C,I=m.indexOf(`
`,v);return I==-1?Wc:(v=Number(m.substring(v,I)),isNaN(v)?Gc:(I+=1,I+v>m.length?Wc:(m=m.slice(I,I+v),l.C=I+v,m)))}Br.prototype.cancel=function(){this.J=!0,Ur(this)};function Sa(l){l.S=Date.now()+l.I,gh(l,l.I)}function gh(l,m){if(l.B!=null)throw Error("WatchDog timer not null");l.B=re(E(l.ba,l),m)}function ps(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Br.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(zc(this.i,this.A),this.L!=2&&(fs(),sn(17)),Ur(this),this.s=2,wr(this)):gh(this,this.S-l)};function wr(l){l.j.G==0||l.J||Th(l.j,l)}function Ur(l){ps(l);var m=l.M;m&&typeof m.ma=="function"&&m.ma(),l.M=null,uo(l.U),l.g&&(m=l.g,l.g=null,m.abort(),m.ma())}function Aa(l,m){try{var v=l.j;if(v.G!=0&&(v.g==l||jr(v.h,l))){if(!l.K&&jr(v.h,l)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var k=I;if(k[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<l.F)Oa(v),Pa(v);else break e;ol(v),sn(18)}}else v.za=k[1],0<v.za-v.T&&37500>k[2]&&v.F&&v.v==0&&!v.C&&(v.C=re(E(v.Za,v),6e3));if(1>=gs(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Si(v,11)}else if((l.K||v.g==l)&&Oa(v),!ne(m))for(k=v.Da.g.parse(m),m=0;m<k.length;m++){let Ge=k[m];if(v.T=Ge[0],Ge=Ge[1],v.G==2)if(Ge[0]=="c"){v.K=Ge[1],v.ia=Ge[2];let pt=Ge[3];pt!=null&&(v.la=pt,v.j.info("VER="+v.la));let Qt=Ge[4];Qt!=null&&(v.Aa=Qt,v.j.info("SVER="+v.Aa));let zn=Ge[5];zn!=null&&typeof zn=="number"&&0<zn&&(I=1.5*zn,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;let Hn=l.g;if(Hn){let qr=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qr){var j=I.h;j.g||qr.indexOf("spdy")==-1&&qr.indexOf("quic")==-1&&qr.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&($r(j,j.h),j.h=null))}if(I.D){let Va=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Va&&(I.ya=Va,Xe(I.I,I.D,Va))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-l.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var J=l;if(I.qa=ul(I,I.J?I.ia:null,I.W),J.K){xa(I.h,J);var Oe=J,vt=I.L;vt&&(Oe.I=vt),Oe.B&&(ps(Oe),Sa(Oe)),I.g=J}else Na(I);0<v.i.length&&Ra(v)}else Ge[0]!="stop"&&Ge[0]!="close"||Si(v,7);else v.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?Si(v,7):Cs(v):Ge[0]!="noop"&&v.l&&v.l.ta(Ge),v.v=0)}}fs(4)}catch{}}var ms=class{constructor(l,m){this.g=l,this.map=m}};function qe(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ft(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function gs(l){return l.h?1:l.g?l.g.size:0}function jr(l,m){return l.h?l.h==m:l.g?l.g.has(m):!1}function $r(l,m){l.g?l.g.add(m):l.h=m}function xa(l,m){l.h&&l.h==m?l.h=null:l.g&&l.g.has(m)&&l.g.delete(m)}qe.prototype.cancel=function(){if(this.i=Se(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function Se(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let m=l.i;for(let v of l.g.values())m=m.concat(v.D);return m}return z(l.i)}function Et(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(d(l)){for(var m=[],v=l.length,I=0;I<v;I++)m.push(l[I]);return m}m=[],v=0;for(I in l)m[v++]=l[I];return m}function Zc(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(d(l)||typeof l=="string"){var m=[];l=l.length;for(var v=0;v<l;v++)m.push(v);return m}m=[],v=0;for(let I in l)m[v++]=I;return m}}}function _s(l,m){if(l.forEach&&typeof l.forEach=="function")l.forEach(m,void 0);else if(d(l)||typeof l=="string")Array.prototype.forEach.call(l,m,void 0);else for(var v=Zc(l),I=Et(l),k=I.length,j=0;j<k;j++)m.call(void 0,I[j],v&&v[j],l)}var Cn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $g(l,m){if(l){l=l.split("&");for(var v=0;v<l.length;v++){var I=l[v].indexOf("="),k=null;if(0<=I){var j=l[v].substring(0,I);k=l[v].substring(I+1)}else j=l[v];m(j,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function tr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof tr){this.h=l.h,mt(this,l.j),this.o=l.o,this.g=l.g,nr(this,l.s),this.l=l.l;var m=l.i,v=new Ti;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),fo(this,v),this.m=l.m}else l&&(m=String(l).match(Cn))?(this.h=!1,mt(this,m[1]||"",!0),this.o=Ir(m[2]||""),this.g=Ir(m[3]||"",!0),nr(this,m[4]),this.l=Ir(m[5]||"",!0),fo(this,m[6]||"",!0),this.m=Ir(m[7]||"")):(this.h=!1,this.i=new Ti(null,this.h))}tr.prototype.toString=function(){var l=[],m=this.j;m&&l.push(Ci(m,vs,!0),":");var v=this.g;return(v||m=="file")&&(l.push("//"),(m=this.o)&&l.push(Ci(m,vs,!0),"@"),l.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&l.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&l.push("/"),l.push(Ci(v,v.charAt(0)=="/"?Yc:Qc,!0))),(v=this.i.toString())&&l.push("?",v),(v=this.m)&&l.push("#",Ci(v,_h)),l.join("")};function an(l){return new tr(l)}function mt(l,m,v){l.j=v?Ir(m,!0):m,l.j&&(l.j=l.j.replace(/:$/,""))}function nr(l,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);l.s=m}else l.s=null}function fo(l,m,v){m instanceof Ti?(l.i=m,Jc(l.i,l.h)):(v||(m=Ci(m,Ma)),l.i=new Ti(m,l.h))}function Xe(l,m,v){l.i.set(m,v)}function po(l){return Xe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ir(l,m){return l?m?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ci(l,m,v){return typeof l=="string"?(l=encodeURI(l).replace(m,Kc),v&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Kc(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var vs=/[#\/\?@]/g,Qc=/[#\?:]/g,Yc=/[#\?]/g,Ma=/[#\?@]/g,_h=/#/g;function Ti(l,m){this.h=this.g=null,this.i=l||null,this.j=!!m}function zr(l){l.g||(l.g=new Map,l.h=0,l.i&&$g(l.i,function(m,v){l.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=Ti.prototype,n.add=function(l,m){zr(this),this.i=null,l=Di(this,l);var v=this.g.get(l);return v||this.g.set(l,v=[]),v.push(m),this.h+=1,this};function be(l,m){zr(l),m=Di(l,m),l.g.has(m)&&(l.i=null,l.h-=l.g.get(m).length,l.g.delete(m))}function Un(l,m){return zr(l),m=Di(l,m),l.g.has(m)}n.forEach=function(l,m){zr(this),this.g.forEach(function(v,I){v.forEach(function(k){l.call(m,k,I,this)},this)},this)},n.na=function(){zr(this);let l=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){let k=l[I];for(let j=0;j<k.length;j++)v.push(m[I])}return v},n.V=function(l){zr(this);let m=[];if(typeof l=="string")Un(this,l)&&(m=m.concat(this.g.get(Di(this,l))));else{l=Array.from(this.g.values());for(let v=0;v<l.length;v++)m=m.concat(l[v])}return m},n.set=function(l,m){return zr(this),this.i=null,l=Di(this,l),Un(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[m]),this.h+=1,this},n.get=function(l,m){return l?(l=this.V(l),0<l.length?String(l[0]):m):m};function rt(l,m,v){be(l,m),0<v.length&&(l.i=null,l.g.set(Di(l,m),z(v)),l.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];let j=encodeURIComponent(String(I)),J=this.V(I);for(I=0;I<J.length;I++){var k=j;J[I]!==""&&(k+="="+encodeURIComponent(String(J[I]))),l.push(k)}}return this.i=l.join("&")};function Di(l,m){return m=String(m),l.j&&(m=m.toLowerCase()),m}function Jc(l,m){m&&!l.j&&(zr(l),l.i=null,l.g.forEach(function(v,I){var k=I.toLowerCase();I!=k&&(be(this,I),rt(this,k,v))},l)),l.j=m}function Xc(l,m){let v=new lo;if(c.Image){let I=new Image;I.onload=C(dn,v,"TestLoadImage: loaded",!0,m,I),I.onerror=C(dn,v,"TestLoadImage: error",!1,m,I),I.onabort=C(dn,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=C(dn,v,"TestLoadImage: timeout",!1,m,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=l}else m(!1)}function el(l,m){let v=new lo,I=new AbortController,k=setTimeout(()=>{I.abort(),dn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(l,{signal:I.signal}).then(j=>{clearTimeout(k),j.ok?dn(v,"TestPingServer: ok",!0,m):dn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(k),dn(v,"TestPingServer: error",!1,m)})}function dn(l,m,v,I,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),I(v)}catch{}}function tl(){this.g=new oh}function ys(l,m,v){let I=v||"";try{_s(l,function(k,j){let J=k;f(k)&&(J=Bc(k)),m.push(I+j+"="+encodeURIComponent(J))})}catch(k){throw m.push(I+"type="+encodeURIComponent("_badmap")),k}}function bt(l){this.l=l.Ub||null,this.j=l.eb||!1}V(bt,Ta),bt.prototype.g=function(){return new rr(this.l,this.j)},bt.prototype.i=function(l){return function(){return l}}({});function rr(l,m){Zt.call(this),this.D=l,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(rr,Zt),n=rr.prototype,n.open=function(l,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=m,this.readyState=1,ws(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(m.body=l),(this.D||c).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mo(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ws(this)),this.g&&(this.readyState=3,ws(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nl(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function nl(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var m=l.value?l.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!l.done}))&&(this.response=this.responseText+=m)}l.done?mo(this):ws(this),this.readyState==3&&nl(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,mo(this))},n.Qa=function(l){this.g&&(this.response=l,mo(this))},n.ga=function(){this.g&&mo(this)};function mo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ws(l)}n.setRequestHeader=function(l,m){this.u.append(l,m)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,l.push(v[0]+": "+v[1]),v=m.next();return l.join(`\r
`)};function ws(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(rr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function rl(l){let m="";return he(l,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function Is(l,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=rl(v),typeof l=="string"?v!=null&&encodeURIComponent(String(v)):Xe(l,m,v))}function _t(l){Zt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(_t,Zt);var vh=/^https?$/i,Ue=["POST","PUT"];n=_t.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);m=m?m.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qc.g(),this.v=this.o?Uc(this.o):Uc(qc),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(m,String(l),!0),this.B=!1}catch(j){yh(this,j);return}if(l=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var k in I)v.set(k,I[k]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(let j of I.keys())v.set(j,I.get(j));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(j=>j.toLowerCase()=="content-type"),k=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Ue,m,void 0))||I||k||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[j,J]of v)this.g.setRequestHeader(j,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wh(this),this.u=!0,this.g.send(l),this.u=!1}catch(j){yh(this,j)}};function yh(l,m){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=m,l.m=5,Rn(l),Es(l)}function Rn(l){l.A||(l.A=!0,Kt(l,"complete"),Kt(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Kt(this,"complete"),Kt(this,"abort"),Es(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Es(this,!0)),_t.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?go(this):this.bb())},n.bb=function(){go(this)};function go(l){if(l.h&&typeof a<"u"&&(!l.v[1]||jn(l)!=4||l.Z()!=2)){if(l.u&&jn(l)==4)rh(l.Ea,0,l);else if(Kt(l,"readystatechange"),jn(l)==4){l.h=!1;try{let J=l.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=J===0){var k=String(l.D).match(Cn)[1]||null;!k&&c.self&&c.self.location&&(k=c.self.location.protocol.slice(0,-1)),I=!vh.test(k?k.toLowerCase():"")}v=I}if(v)Kt(l,"complete"),Kt(l,"success");else{l.m=6;try{var j=2<jn(l)?l.g.statusText:""}catch{j=""}l.l=j+" ["+l.Z()+"]",Rn(l)}}finally{Es(l)}}}}function Es(l,m){if(l.g){wh(l);let v=l.g,I=l.v[0]?()=>{}:null;l.g=null,l.v=null,m||Kt(l,"ready");try{v.onreadystatechange=I}catch{}}}function wh(l){l.I&&(c.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function jn(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var m=this.g.responseText;return l&&m.indexOf(l)==0&&(m=m.substring(l.length)),Ug(m)}};function Ih(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Eh(l){let m={};l=(l.g&&2<=jn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<l.length;I++){if(ne(l[I]))continue;var v=R(l[I]);let k=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let j=m[k]||[];m[k]=j,j.push(v)}P(m,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bs(l,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[l]||m}function bh(l){this.Aa=0,this.i=[],this.j=new lo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bs("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bs("baseRetryDelayMs",5e3,l),this.cb=bs("retryDelaySeedMs",1e4,l),this.Wa=bs("forwardChannelMaxRetries",2,l),this.wa=bs("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new qe(l&&l.concurrentRequestLimit),this.Da=new tl,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=bh.prototype,n.la=8,n.G=1,n.connect=function(l,m,v,I){sn(0),this.W=l,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=ul(this,null,this.W),Ra(this)};function Cs(l){if($n(l),l.G==3){var m=l.U++,v=an(l.I);if(Xe(v,"SID",l.K),Xe(v,"RID",m),Xe(v,"TYPE","terminate"),_o(l,v),m=new Br(l,l.j,m),m.L=2,m.v=po(an(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&c.Image&&(new Image().src=m.v,v=!0),v||(m.g=Ts(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Sa(m)}al(l)}function Pa(l){l.g&&(ka(l),l.g.cancel(),l.g=null)}function $n(l){Pa(l),l.u&&(c.clearTimeout(l.u),l.u=null),Oa(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Ra(l){if(!ft(l.h)&&!l.s){l.s=!0;var m=l.Ga;io||on(),de||(io(),de=!0),ct.add(m,l),l.B=0}}function Ch(l,m){return gs(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=m.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=re(E(l.Ga,l,m),La(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let k=new Br(this,this.j,l),j=this.o;if(this.S&&(j?(j=T(j),x(j,this.S)):j=this.S),this.m!==null||this.O||(k.H=j,j=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=il(this,k,m),v=an(this.I),Xe(v,"RID",l),Xe(v,"CVER",22),this.D&&Xe(v,"X-HTTP-Session-Id",this.D),_o(this,v),j&&(this.O?m="headers="+encodeURIComponent(String(rl(j)))+"&"+m:this.m&&Is(v,this.m,j)),$r(this.h,k),this.Ua&&Xe(v,"TYPE","init"),this.P?(Xe(v,"$req",m),Xe(v,"SID","null"),k.T=!0,ho(k,v,null)):ho(k,v,m),this.G=2}}else this.G==3&&(l?Er(this,l):this.i.length==0||ft(this.h)||Er(this))};function Er(l,m){var v;m?v=m.l:v=l.U++;let I=an(l.I);Xe(I,"SID",l.K),Xe(I,"RID",v),Xe(I,"AID",l.T),_o(l,I),l.m&&l.o&&Is(I,l.m,l.o),v=new Br(l,l.j,v,l.B+1),l.m===null&&(v.H=l.o),m&&(l.i=m.D.concat(l.i)),m=il(l,v,1e3),v.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),$r(l.h,v),ho(v,I,m)}function _o(l,m){l.H&&he(l.H,function(v,I){Xe(m,I,v)}),l.l&&_s({},function(v,I){Xe(m,I,v)})}function il(l,m,v){v=Math.min(l.i.length,v);var I=l.l?E(l.l.Na,l.l,l):null;e:{var k=l.i;let j=-1;for(;;){let J=["count="+v];j==-1?0<v?(j=k[0].g,J.push("ofs="+j)):j=0:J.push("ofs="+j);let Oe=!0;for(let vt=0;vt<v;vt++){let Ge=k[vt].g,pt=k[vt].map;if(Ge-=j,0>Ge)j=Math.max(0,k[vt].g-100),Oe=!1;else try{ys(pt,J,"req"+Ge+"_")}catch{I&&I(pt)}}if(Oe){I=J.join("&");break e}}}return l=l.i.splice(0,v),m.D=l,I}function Na(l){if(!l.g&&!l.u){l.Y=1;var m=l.Fa;io||on(),de||(io(),de=!0),ct.add(m,l),l.v=0}}function ol(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=re(E(l.Fa,l),La(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,sl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=re(E(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,sn(10),Pa(this),sl(this))};function ka(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function sl(l){l.g=new Br(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var m=an(l.qa);Xe(m,"RID","rpc"),Xe(m,"SID",l.K),Xe(m,"AID",l.T),Xe(m,"CI",l.F?"0":"1"),!l.F&&l.ja&&Xe(m,"TO",l.ja),Xe(m,"TYPE","xmlhttp"),_o(l,m),l.m&&l.o&&Is(m,l.m,l.o),l.L&&(l.g.I=l.L);var v=l.g;l=l.ia,v.L=1,v.v=po(an(m)),v.m=null,v.P=!0,ph(v,l)}n.Za=function(){this.C!=null&&(this.C=null,Pa(this),ol(this),sn(19))};function Oa(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Th(l,m){var v=null;if(l.g==m){Oa(l),ka(l),l.g=null;var I=2}else if(jr(l.h,m))v=m.D,xa(l.h,m),I=1;else return;if(l.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var k=l.B;I=co(),Kt(I,new Bn(I,v)),Ra(l)}else Na(l);else if(k=m.s,k==3||k==0&&0<m.X||!(I==1&&Ch(l,m)||I==2&&ol(l)))switch(v&&0<v.length&&(m=l.h,m.i=m.i.concat(v)),k){case 1:Si(l,5);break;case 4:Si(l,10);break;case 3:Si(l,6);break;default:Si(l,2)}}}function La(l,m){let v=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(v*=2),v*m}function Si(l,m){if(l.j.info("Error code "+m),m==2){var v=E(l.fb,l),I=l.Xa;let k=!I;I=new tr(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||mt(I,"https"),po(I),k?Xc(I.toString(),v):el(I.toString(),v)}else sn(2);l.G=0,l.l&&l.l.sa(m),al(l),$n(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function al(l){if(l.G=0,l.ka=[],l.l){let m=Se(l.h);(m.length!=0||l.i.length!=0)&&($(l.ka,m),$(l.ka,l.i),l.h.i.length=0,z(l.i),l.i.length=0),l.l.ra()}}function ul(l,m,v){var I=v instanceof tr?an(v):new tr(v);if(I.g!="")m&&(I.g=m+"."+I.g),nr(I,I.s);else{var k=c.location;I=k.protocol,m=m?m+"."+k.hostname:k.hostname,k=+k.port;var j=new tr(null);I&&mt(j,I),m&&(j.g=m),k&&nr(j,k),v&&(j.l=v),I=j}return v=l.D,m=l.ya,v&&m&&Xe(I,v,m),Xe(I,"VER",l.la),_o(l,I),I}function Ts(l,m,v){if(m&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=l.Ca&&!l.pa?new _t(new bt({eb:v})):new _t(l.pa),m.Ha(l.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hr(){}n=Hr.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Fa(){}Fa.prototype.g=function(l,m){return new Ht(l,m)};function Ht(l,m){Zt.call(this),this.g=new bh(m),this.l=l,this.h=m&&m.messageUrlParams||null,l=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(l?l["X-WebChannel-Content-Type"]=m.messageContentType:l={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(l?l["X-WebChannel-Client-Profile"]=m.va:l={"X-WebChannel-Client-Profile":m.va}),this.g.S=l,(l=m&&m.Sb)&&!ne(l)&&(this.g.m=l),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ne(m)&&(this.g.D=m,l=this.h,l!==null&&m in l&&(l=this.h,m in l&&delete l[m])),this.j=new Ai(this)}V(Ht,Zt),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Cs(this.g)},Ht.prototype.o=function(l){var m=this.g;if(typeof l=="string"){var v={};v.__data__=l,l=v}else this.u&&(v={},v.__data__=Bc(l),l=v);m.i.push(new ms(m.Ya++,l)),m.G==3&&Ra(m)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Cs(this.g),delete this.g,Ht.aa.N.call(this)};function Tn(l){jc.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var m=l.__sm__;if(m){e:{for(let v in m){l=v;break e}l=void 0}(this.i=l)&&(l=this.i,m=m!==null&&l in m?m[l]:void 0),this.data=m}else this.data=l}V(Tn,jc);function cl(){$c.call(this),this.status=1}V(cl,$c);function Ai(l){this.g=l}V(Ai,Hr),Ai.prototype.ua=function(){Kt(this.g,"a")},Ai.prototype.ta=function(l){Kt(this.g,new Tn(l))},Ai.prototype.sa=function(l){Kt(this.g,new cl)},Ai.prototype.ra=function(){Kt(this.g,"b")},Fa.prototype.createWebChannel=Fa.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,C0=Ji.createWebChannelTransport=function(){return new Fa},b0=Ji.getStatEventTarget=function(){return co()},E0=Ji.Event=Ei,Dm=Ji.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yr.NO_ERROR=0,yr.TIMEOUT=8,yr.HTTP_ERROR=6,wd=Ji.ErrorCode=yr,Hc.COMPLETE="complete",I0=Ji.EventType=Hc,sh.EventType=hs,hs.OPEN="a",hs.CLOSE="b",hs.ERROR="c",hs.MESSAGE="d",Zt.prototype.listen=Zt.prototype.K,Xu=Ji.WebChannel=sh,uH=Ji.FetchXmlHttpFactory=bt,_t.prototype.listenOnce=_t.prototype.L,_t.prototype.getLastError=_t.prototype.Ka,_t.prototype.getLastErrorCode=_t.prototype.Ba,_t.prototype.getStatus=_t.prototype.Z,_t.prototype.getResponseJson=_t.prototype.Oa,_t.prototype.getResponseText=_t.prototype.oa,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Ha,w0=Ji.XhrIo=_t}).apply(typeof Tm<"u"?Tm:typeof self<"u"?self:typeof window<"u"?window:{});var sM="@firebase/firestore";var rn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");var wc="10.14.0";var oa=new $o("@firebase/firestore");function Id(){return oa.logLevel}function ie(n,...e){if(oa.logLevel<=ze.DEBUG){let t=e.map(aE);oa.debug(`Firestore (${wc}): ${n}`,...t)}}function eo(n,...e){if(oa.logLevel<=ze.ERROR){let t=e.map(aE);oa.error(`Firestore (${wc}): ${n}`,...t)}}function sc(n,...e){if(oa.logLevel<=ze.WARN){let t=e.map(aE);oa.warn(`Firestore (${wc}): ${n}`,...t)}}function aE(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ve(n="Unexpected state"){let e=`FIRESTORE (${wc}) INTERNAL ASSERTION FAILED: `+n;throw eo(e),new Error(e)}function ot(n,e){n||ve()}function De(n,e){return n}var q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ee=class extends Yn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Nr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Pm=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},x0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rn.UNAUTHENTICATED))}shutdown(){}},M0=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},P0=class{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ot(this.o===void 0);let r=this.i,i=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve(),o=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Nr,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let d=o;e.enqueueRetryable(()=>b(this,null,function*(){yield d.promise,yield i(this.currentUser)}))},c=d=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){let d=this.t.getImmediate({optional:!0});d?c(d):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Nr)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ot(typeof r.accessToken=="string"),new Pm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string"),new rn(e)}},R0=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},N0=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new R0(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},k0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},O0=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ot(this.o===void 0);let r=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.R;return this.R=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ot(typeof t.token=="string"),this.R=t.token,new k0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function cH(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Rm=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=cH(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function Je(n,e){return n<e?-1:n>e?1:0}function ac(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var cn=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ee(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ee(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ee(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Me=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new cn(0,0))}static max(){return new n(new cn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Nm=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ve(),r===void 0?r=e.length-t:r>e.length-t&&ve(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),a=t.get(i);if(o<a)return-1;if(o>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},St=class n extends Nm{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ee(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},lH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xn=class n extends Nm{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return lH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new ee(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new ee(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ee(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(o(),i++)}if(o(),a)throw new ee(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var le=class n{constructor(e){this.path=e}static fromPath(e){return new n(St.fromString(e))}static fromName(e){return new n(St.fromString(e).popFirst(5))}static empty(){return new n(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return St.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new St(e.slice()))}};var L0=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};L0.UNKNOWN_ID=-1;function dH(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Me.fromTimestamp(r===1e9?new cn(t+1,0):new cn(t,r));return new sa(i,le.empty(),e)}function hH(n){return new sa(n.readTime,n.key,-1)}var sa=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Me.min(),le.empty(),-1)}static max(){return new n(Me.max(),le.empty(),-1)}};function fH(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=le.comparator(n.documentKey,e.documentKey),t!==0?t:Je(n.largestBatchId,e.largestBatchId))}var pH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",F0=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function jd(n){return b(this,null,function*(){if(n.code!==q.FAILED_PRECONDITION||n.message!==pH)throw n;ie("LocalStore","Unexpectedly lost primary lease")})}var K=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++o,a&&o===i&&t()},d=>r(d))}),a=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,a=new Array(o),c=0;for(let d=0;d<o;d++){let f=d;t(e[f]).next(g=>{a[f]=g,++c,c===o&&r(a)},g=>i(g))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function mH(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $d(n){return n.name==="IndexedDbTransactionError"}var jM=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function dg(n){return n==null}function Sd(n){return n===0&&1/n==-1/0}function gH(n){return typeof n=="number"&&Number.isInteger(n)&&!Sd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var _H=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],CQ=[..._H,"documentOverlays"],vH=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yH=vH,wH=[...yH,"indexConfiguration","indexState","indexEntries"];var TQ=[...wH,"globals"];function aM(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ha(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $M(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Rt=class n{constructor(e,t){this.comparator=e,this.root=t||pi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rc(this.root,e,this.comparator,!0)}},rc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},pi=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();let e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}};pi.EMPTY=null,pi.RED=!0,pi.BLACK=!1;pi.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,t,r,i,o){return this}insert(e,t,r){return new pi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var vn=class n{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new km(this.data.getIterator())}getIteratorFrom(e){return new km(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},km=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var gr=class n{constructor(e){this.fields=e,e.sort(Xn.comparator)}static empty(){return new n([])}unionWith(e){let t=new vn(Xn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ac(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Om=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var wn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Om("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};wn.EMPTY_BYTE_STRING=new wn("");var IH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function to(n){if(ot(!!n),typeof n=="string"){let e=0,t=IH.exec(n);if(ot(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:It(n.seconds),nanos:It(n.nanos)}}function It(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Jo(n){return typeof n=="string"?wn.fromBase64String(n):wn.fromUint8Array(n)}function uE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function cE(n){let e=n.mapValue.fields.__previous_value__;return uE(e)?cE(e):e}function Ad(n){let e=to(n.mapValue.fields.__local_write_time__.timestampValue);return new cn(e.seconds,e.nanos)}var V0=class{constructor(e,t,r,i,o,a,c,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f}},Lm=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Sm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function aa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?uE(n)?4:HM(n)?9007199254740991:zM(n)?10:11:ve()}function _i(n,e){if(n===e)return!0;let t=aa(n);if(t!==aa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ad(n).isEqual(Ad(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let a=to(i.timestampValue),c=to(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Jo(i.bytesValue).isEqual(Jo(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return It(i.geoPointValue.latitude)===It(o.geoPointValue.latitude)&&It(i.geoPointValue.longitude)===It(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return It(i.integerValue)===It(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let a=It(i.doubleValue),c=It(o.doubleValue);return a===c?Sd(a)===Sd(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return ac(n.arrayValue.values||[],e.arrayValue.values||[],_i);case 10:case 11:return function(i,o){let a=i.mapValue.fields||{},c=o.mapValue.fields||{};if(aM(a)!==aM(c))return!1;for(let d in a)if(a.hasOwnProperty(d)&&(c[d]===void 0||!_i(a[d],c[d])))return!1;return!0}(n,e);default:return ve()}}function xd(n,e){return(n.values||[]).find(t=>_i(t,e))!==void 0}function uc(n,e){if(n===e)return 0;let t=aa(n),r=aa(e);if(t!==r)return Je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(n.booleanValue,e.booleanValue);case 2:return function(o,a){let c=It(o.integerValue||o.doubleValue),d=It(a.integerValue||a.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,e);case 3:return uM(n.timestampValue,e.timestampValue);case 4:return uM(Ad(n),Ad(e));case 5:return Je(n.stringValue,e.stringValue);case 6:return function(o,a){let c=Jo(o),d=Jo(a);return c.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(o,a){let c=o.split("/"),d=a.split("/");for(let f=0;f<c.length&&f<d.length;f++){let g=Je(c[f],d[f]);if(g!==0)return g}return Je(c.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,a){let c=Je(It(o.latitude),It(a.latitude));return c!==0?c:Je(It(o.longitude),It(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return cM(n.arrayValue,e.arrayValue);case 10:return function(o,a){var c,d,f,g;let y=o.fields||{},E=a.fields||{},C=(c=y.value)===null||c===void 0?void 0:c.arrayValue,V=(d=E.value)===null||d===void 0?void 0:d.arrayValue,z=Je(((f=C?.values)===null||f===void 0?void 0:f.length)||0,((g=V?.values)===null||g===void 0?void 0:g.length)||0);return z!==0?z:cM(C,V)}(n.mapValue,e.mapValue);case 11:return function(o,a){if(o===Sm.mapValue&&a===Sm.mapValue)return 0;if(o===Sm.mapValue)return 1;if(a===Sm.mapValue)return-1;let c=o.fields||{},d=Object.keys(c),f=a.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){let E=Je(d[y],g[y]);if(E!==0)return E;let C=uc(c[d[y]],f[g[y]]);if(C!==0)return C}return Je(d.length,g.length)}(n.mapValue,e.mapValue);default:throw ve()}}function uM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Je(n,e);let t=to(n),r=to(e),i=Je(t.seconds,r.seconds);return i!==0?i:Je(t.nanos,r.nanos)}function cM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=uc(t[i],r[i]);if(o)return o}return Je(t.length,r.length)}function cc(n){return B0(n)}function B0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=to(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Jo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return le.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=B0(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let a of r)o?o=!1:i+=",",i+=`${a}:${B0(t.fields[a])}`;return i+"}"}(n.mapValue):ve()}function lM(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function U0(n){return!!n&&"integerValue"in n}function lE(n){return!!n&&"arrayValue"in n}function dM(n){return!!n&&"nullValue"in n}function hM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xm(n){return!!n&&"mapValue"in n}function zM(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function bd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ha(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=bd(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function HM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Jn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bd(t)}setAll(e){let t=Xn.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){let d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=bd(a):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());xm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _i(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];xm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ha(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(bd(this.value))}};function qM(n){let e=[];return ha(n.fields,(t,r)=>{let i=new Xn([t]);if(xm(r)){let o=qM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let a of o)e.push(i.child(a))}else e.push(i)}),new gr(e)}var kr=class n{constructor(e,t,r,i,o,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new n(e,0,Me.min(),Me.min(),Me.min(),Jn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Me.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Me.min(),Me.min(),Jn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Me.min(),Me.min(),Jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var lc=class{constructor(e,t){this.position=e,this.inclusive=t}};function fM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],a=n.position[i];if(o.field.isKeyField()?r=le.comparator(le.fromName(a.referenceValue),t.key):r=uc(a,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function pM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!_i(n.position[t],e.position[t]))return!1;return!0}var dc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function EH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Fm=class{},zt=class n extends Fm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new $0(e,t,r):t==="array-contains"?new q0(e,r):t==="in"?new G0(e,r):t==="not-in"?new W0(e,r):t==="array-contains-any"?new Z0(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new z0(e,r):new H0(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(uc(t,this.value)):t!==null&&aa(this.value)===aa(t)&&this.matchesComparison(uc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Or=class n extends Fm{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return GM(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function GM(n){return n.op==="and"}function WM(n){return bH(n)&&GM(n)}function bH(n){for(let e of n.filters)if(e instanceof Or)return!1;return!0}function j0(n){if(n instanceof zt)return n.field.canonicalString()+n.op.toString()+cc(n.value);if(WM(n))return n.filters.map(e=>j0(e)).join(",");{let e=n.filters.map(t=>j0(t)).join(",");return`${n.op}(${e})`}}function ZM(n,e){return n instanceof zt?function(r,i){return i instanceof zt&&r.op===i.op&&r.field.isEqual(i.field)&&_i(r.value,i.value)}(n,e):n instanceof Or?function(r,i){return i instanceof Or&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,c)=>o&&ZM(a,i.filters[c]),!0):!1}(n,e):void ve()}function KM(n){return n instanceof zt?function(t){return`${t.field.canonicalString()} ${t.op} ${cc(t.value)}`}(n):n instanceof Or?function(t){return t.op.toString()+" {"+t.getFilters().map(KM).join(" ,")+"}"}(n):"Filter"}var $0=class extends zt{constructor(e,t,r){super(e,t,r),this.key=le.fromName(r.referenceValue)}matches(e){let t=le.comparator(e.key,this.key);return this.matchesComparison(t)}},z0=class extends zt{constructor(e,t){super(e,"in",t),this.keys=QM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},H0=class extends zt{constructor(e,t){super(e,"not-in",t),this.keys=QM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function QM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>le.fromName(r.referenceValue))}var q0=class extends zt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return lE(t)&&xd(t.arrayValue,this.value)}},G0=class extends zt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&xd(this.value.arrayValue,t)}},W0=class extends zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(xd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!xd(this.value.arrayValue,t)}},Z0=class extends zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!lE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>xd(this.value.arrayValue,r))}};var K0=class{constructor(e,t=null,r=[],i=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=c,this.ue=null}};function mM(n,e=null,t=[],r=[],i=null,o=null,a=null){return new K0(n,e,t,r,i,o,a)}function dE(n){let e=De(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>j0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),dg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>cc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>cc(r)).join(",")),e.ue=t}return e.ue}function hE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!EH(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ZM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!pM(n.startAt,e.startAt)&&pM(n.endAt,e.endAt)}function Q0(n){return le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ua=class{constructor(e,t=null,r=[],i=[],o=null,a="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function CH(n,e,t,r,i,o,a,c){return new ua(n,e,t,r,i,o,a,c)}function hg(n){return new ua(n)}function gM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function YM(n){return n.collectionGroup!==null}function Cd(n){let e=De(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new vn(Xn.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new dc(o,r))}),t.has(Xn.keyField().canonicalString())||e.ce.push(new dc(Xn.keyField(),r))}return e.ce}function mi(n){let e=De(n);return e.le||(e.le=TH(e,Cd(n))),e.le}function TH(n,e){if(n.limitType==="F")return mM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new dc(i.field,o)});let t=n.endAt?new lc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new lc(n.startAt.position,n.startAt.inclusive):null;return mM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Y0(n,e){let t=n.filters.concat([e]);return new ua(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function J0(n,e,t){return new ua(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function fg(n,e){return hE(mi(n),mi(e))&&n.limitType===e.limitType}function JM(n){return`${dE(mi(n))}|lt:${n.limitType}`}function ec(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>KM(i)).join(", ")}]`),dg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>cc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>cc(i)).join(",")),`Target(${r})`}(mi(n))}; limitType=${n.limitType})`}function pg(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):le.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Cd(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,c,d){let f=fM(a,c,d);return a.inclusive?f<=0:f<0}(r.startAt,Cd(r),i)||r.endAt&&!function(a,c,d){let f=fM(a,c,d);return a.inclusive?f>=0:f>0}(r.endAt,Cd(r),i))}(n,e)}function DH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function XM(n){return(e,t)=>{let r=!1;for(let i of Cd(n)){let o=SH(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function SH(n,e,t){let r=n.field.isKeyField()?le.comparator(e.key,t.key):function(o,a,c){let d=a.data.field(o),f=c.data.field(o);return d!==null&&f!==null?uc(d,f):ve()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ve()}}var Xo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ha(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return $M(this.inner)}size(){return this.innerSize}};var AH=new Rt(le.comparator);function no(){return AH}var eP=new Rt(le.comparator);function Ed(...n){let e=eP;for(let t of n)e=e.insert(t.key,t);return e}function tP(n){let e=eP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function na(){return Td()}function nP(){return Td()}function Td(){return new Xo(n=>n.toString(),(n,e)=>n.isEqual(e))}var xH=new Rt(le.comparator),MH=new vn(le.comparator);function He(...n){let e=MH;for(let t of n)e=e.add(t);return e}var PH=new vn(Je);function RH(){return PH}function fE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sd(e)?"-0":e}}function rP(n){return{integerValue:""+n}}function NH(n,e){return gH(e)?rP(e):fE(n,e)}var hc=class{constructor(){this._=void 0}};function kH(n,e,t){return n instanceof fc?function(i,o){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&uE(o)&&(o=cE(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(t,e):n instanceof es?oP(n,e):n instanceof ca?sP(n,e):function(i,o){let a=iP(i,o),c=_M(a)+_M(i.Pe);return U0(a)&&U0(i.Pe)?rP(c):fE(i.serializer,c)}(n,e)}function OH(n,e,t){return n instanceof es?oP(n,e):n instanceof ca?sP(n,e):t}function iP(n,e){return n instanceof pc?function(r){return U0(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var fc=class extends hc{},es=class extends hc{constructor(e){super(),this.elements=e}};function oP(n,e){let t=aP(e);for(let r of n.elements)t.some(i=>_i(i,r))||t.push(r);return{arrayValue:{values:t}}}var ca=class extends hc{constructor(e){super(),this.elements=e}};function sP(n,e){let t=aP(e);for(let r of n.elements)t=t.filter(i=>!_i(i,r));return{arrayValue:{values:t}}}var pc=class extends hc{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function _M(n){return It(n.integerValue||n.doubleValue)}function aP(n){return lE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var X0=class{constructor(e,t){this.field=e,this.transform=t}};function LH(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof es&&i instanceof es||r instanceof ca&&i instanceof ca?ac(r.elements,i.elements,_i):r instanceof pc&&i instanceof pc?_i(r.Pe,i.Pe):r instanceof fc&&i instanceof fc}(n.transform,e.transform)}var eI=class{constructor(e,t){this.version=e,this.transformResults=t}},Xi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Mm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var mc=class{};function uP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Vm(n.key,Xi.none()):new la(n.key,n.data,Xi.none());{let t=n.data,r=Jn.empty(),i=new vn(Xn.comparator);for(let o of e.fields)if(!i.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new vi(n.key,r,new gr(i.toArray()),Xi.none())}}function FH(n,e,t){n instanceof la?function(i,o,a){let c=i.value.clone(),d=yM(i.fieldTransforms,o,a.transformResults);c.setAll(d),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof vi?function(i,o,a){if(!Mm(i.precondition,o))return void o.convertToUnknownDocument(a.version);let c=yM(i.fieldTransforms,o,a.transformResults),d=o.data;d.setAll(cP(i)),d.setAll(c),o.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Dd(n,e,t,r){return n instanceof la?function(o,a,c,d){if(!Mm(o.precondition,a))return c;let f=o.value.clone(),g=wM(o.fieldTransforms,d,a);return f.setAll(g),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof vi?function(o,a,c,d){if(!Mm(o.precondition,a))return c;let f=wM(o.fieldTransforms,d,a),g=a.data;return g.setAll(cP(o)),g.setAll(f),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(o,a,c){return Mm(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,e,t)}function VH(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=iP(r.transform,i||null);o!=null&&(t===null&&(t=Jn.empty()),t.set(r.field,o))}return t||null}function vM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ac(r,i,(o,a)=>LH(o,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var la=class extends mc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},vi=class extends mc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function cP(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function yM(n,e,t){let r=new Map;ot(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],a=o.transform,c=e.data.field(o.field);r.set(o.field,OH(a,c,t[i]))}return r}function wM(n,e,t){let r=new Map;for(let i of n){let o=i.transform,a=t.data.field(i.field);r.set(i.field,kH(o,a,e))}return r}var Vm=class extends mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},tI=class extends mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var nI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&FH(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Dd(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Dd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=nP();return this.mutations.forEach(i=>{let o=e.get(i.key),a=o.overlayedDocument,c=this.applyToLocalView(a,o.mutatedFields);c=t.has(i.key)?null:c;let d=uP(a,c);d!==null&&r.set(i.key,d),a.isValidDocument()||a.convertToNoDocument(Me.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),He())}isEqual(e){return this.batchId===e.batchId&&ac(this.mutations,e.mutations,(t,r)=>vM(t,r))&&ac(this.baseMutations,e.baseMutations,(t,r)=>vM(t,r))}},rI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ot(e.mutations.length===r.length);let i=function(){return xH}(),o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new n(e,t,r,i)}};var iI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var oI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var jt,Ze;function BH(n){switch(n){default:return ve();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0}}function lP(n){if(n===void 0)return eo("GRPC error has no .code"),q.UNKNOWN;switch(n){case jt.OK:return q.OK;case jt.CANCELLED:return q.CANCELLED;case jt.UNKNOWN:return q.UNKNOWN;case jt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case jt.INTERNAL:return q.INTERNAL;case jt.UNAVAILABLE:return q.UNAVAILABLE;case jt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case jt.NOT_FOUND:return q.NOT_FOUND;case jt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case jt.ABORTED:return q.ABORTED;case jt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case jt.DATA_LOSS:return q.DATA_LOSS;default:return ve()}}(Ze=jt||(jt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";var IM=null;function UH(){return new TextEncoder}var jH=new Qo([4294967295,4294967295],0);function EM(n){let e=UH().encode(n),t=new y0;return t.update(e),new Uint8Array(t.digest())}function bM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Qo([t,r],0),new Qo([i,o],0)]}var sI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ra(`Invalid padding: ${t}`);if(r<0)throw new ra(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ra(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ra(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Qo.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Qo.fromNumber(r)));return i.compare(jH)===1&&(i=new Qo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=EM(e),[r,i]=bM(t);for(let o=0;o<this.hashCount;o++){let a=this.Ee(r,i,o);if(!this.de(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new n(o,i,t);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;let t=EM(e),[r,i]=bM(t);for(let o=0;o<this.hashCount;o++){let a=this.Ee(r,i,o);this.Ae(a)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ra=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Bm=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Md.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Me.min(),i,new Rt(Je),no(),He())}},Md=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,He(),He(),He())}};var ic=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Um=class{constructor(e,t){this.targetId=e,this.me=t}},jm=class{constructor(e,t,r=wn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},$m=class{constructor(){this.fe=0,this.ge=TM(),this.pe=wn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=He(),t=He(),r=He();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ve()}}),new Md(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=TM()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ot(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},aI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=no(),this.qe=CM(),this.Qe=new Rt(Je)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ve()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Q0(o))if(r===0){let a=new le(o.path);this.Ue(t,a,kr.newNoDocument(a,Me.min()))}else ot(r===1);else{let a=this.Ye(t);if(a!==r){let c=this.Ze(e),d=c?this.Xe(c,e,a):1;if(d!==0){this.je(t);let f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,f)}IM?.et(function(g,y,E,C,V){var z,$,Z,ne,se,ce;let st={localCacheCount:g,existenceFilterCount:y.count,databaseId:E.database,projectId:E.projectId},he=y.unchangedNames;return he&&(st.bloomFilter={applied:V===0,hashCount:(z=he?.hashCount)!==null&&z!==void 0?z:0,bitmapLength:(ne=(Z=($=he?.bits)===null||$===void 0?void 0:$.bitmap)===null||Z===void 0?void 0:Z.length)!==null&&ne!==void 0?ne:0,padding:(ce=(se=he?.bits)===null||se===void 0?void 0:se.padding)!==null&&ce!==void 0?ce:0,mightContain:P=>{var T;return(T=C?.mightContain(P))!==null&&T!==void 0&&T}}),st}(a,e.me,this.Le.tt(),c,d))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,a,c;try{a=Jo(r).toUint8Array()}catch(d){if(d instanceof Om)return sc("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new sI(a,i,o)}catch(d){return sc(d instanceof ra?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,a)=>{let c=this.Je(a);if(c){if(o.current&&Q0(c.target)){let d=new le(c.target.path);this.ke.get(d)!==null||this.it(a,d)||this.Ue(a,d,kr.newNoDocument(d,e))}o.be&&(t.set(a,o.ve()),o.Ce())}});let r=He();this.qe.forEach((o,a)=>{let c=!0;a.forEachWhile(d=>{let f=this.Je(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));let i=new Bm(e,t,this.Qe,this.ke,r);return this.ke=no(),this.qe=CM(),this.Qe=new Rt(Je),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new $m,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new vn(Je),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new $m),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function CM(){return new Rt(le.comparator)}function TM(){return new Rt(le.comparator)}var $H={asc:"ASCENDING",desc:"DESCENDING"},zH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HH={and:"AND",or:"OR"},uI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function cI(n,e){return n.useProto3Json||dg(e)?e:{value:e}}function zm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function qH(n,e){return zm(n,e.toTimestamp())}function gi(n){return ot(!!n),Me.fromTimestamp(function(t){let r=to(t);return new cn(r.seconds,r.nanos)}(n))}function pE(n,e){return lI(n,e).canonicalString()}function lI(n,e){let t=function(i){return new St(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function hP(n){let e=St.fromString(n);return ot(_P(e)),e}function dI(n,e){return pE(n.databaseId,e.path)}function T0(n,e){let t=hP(e);if(t.get(1)!==n.databaseId.projectId)throw new ee(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ee(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new le(pP(t))}function fP(n,e){return pE(n.databaseId,e)}function GH(n){let e=hP(n);return e.length===4?St.emptyPath():pP(e)}function hI(n){return new St(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function pP(n){return ot(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function DM(n,e,t){return{name:dI(n,e),fields:t.value.mapValue.fields}}function WH(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(f,g){return f.useProto3Json?(ot(g===void 0||typeof g=="string"),wn.fromBase64String(g||"")):(ot(g===void 0||g instanceof Buffer||g instanceof Uint8Array),wn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(f){let g=f.code===void 0?q.UNKNOWN:lP(f.code);return new ee(g,f.message||"")}(a);t=new jm(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=T0(n,r.document.name),o=gi(r.document.updateTime),a=r.document.createTime?gi(r.document.createTime):Me.min(),c=new Jn({mapValue:{fields:r.document.fields}}),d=kr.newFoundDocument(i,o,a,c),f=r.targetIds||[],g=r.removedTargetIds||[];t=new ic(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=T0(n,r.document),o=r.readTime?gi(r.readTime):Me.min(),a=kr.newNoDocument(i,o),c=r.removedTargetIds||[];t=new ic([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=T0(n,r.document),o=r.removedTargetIds||[];t=new ic([],o,i,null)}else{if(!("filter"in e))return ve();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,a=new oI(i,o),c=r.targetId;t=new Um(c,a)}}return t}function ZH(n,e){let t;if(e instanceof la)t={update:DM(n,e.key,e.value)};else if(e instanceof Vm)t={delete:dI(n,e.key)};else if(e instanceof vi)t={update:DM(n,e.key,e.data),updateMask:r4(e.fieldMask)};else{if(!(e instanceof tI))return ve();t={verify:dI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,a){let c=a.transform;if(c instanceof fc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof es)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ca)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof pc)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw ve()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:qH(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ve()}(n,e.precondition)),t}function KH(n,e){return n&&n.length>0?(ot(e!==void 0),n.map(t=>function(i,o){let a=i.updateTime?gi(i.updateTime):gi(o);return a.isEqual(Me.min())&&(a=gi(o)),new eI(a,i.transformResults||[])}(t,e))):[]}function QH(n,e){return{documents:[fP(n,e.path)]}}function YH(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=fP(n,i);let o=function(f){if(f.length!==0)return gP(Or.create(f,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let a=function(f){if(f.length!==0)return f.map(g=>function(E){return{field:tc(E.field),direction:e4(E.dir)}}(g))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let c=cI(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:t,parent:i}}function JH(n){let e=GH(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ot(r===1);let g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=function(y){let E=mP(y);return E instanceof Or&&WM(E)?E.getFilters():[E]}(t.where));let a=[];t.orderBy&&(a=function(y){return y.map(E=>function(V){return new dc(nc(V.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(E))}(t.orderBy));let c=null;t.limit&&(c=function(y){let E;return E=typeof y=="object"?y.value:y,dg(E)?null:E}(t.limit));let d=null;t.startAt&&(d=function(y){let E=!!y.before,C=y.values||[];return new lc(C,E)}(t.startAt));let f=null;return t.endAt&&(f=function(y){let E=!y.before,C=y.values||[];return new lc(C,E)}(t.endAt)),CH(e,i,a,o,c,"F",d,f)}function XH(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=nc(t.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=nc(t.unaryFilter.field);return zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=nc(t.unaryFilter.field);return zt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=nc(t.unaryFilter.field);return zt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(n):n.fieldFilter!==void 0?function(t){return zt.create(nc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Or.create(t.compositeFilter.filters.map(r=>mP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ve()}}(t.compositeFilter.op))}(n):ve()}function e4(n){return $H[n]}function t4(n){return zH[n]}function n4(n){return HH[n]}function tc(n){return{fieldPath:n.canonicalString()}}function nc(n){return Xn.fromServerFormat(n.fieldPath)}function gP(n){return n instanceof zt?function(t){if(t.op==="=="){if(hM(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NAN"}};if(dM(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hM(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NOT_NAN"}};if(dM(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tc(t.field),op:t4(t.op),value:t.value}}}(n):n instanceof Or?function(t){let r=t.getFilters().map(i=>gP(i));return r.length===1?r[0]:{compositeFilter:{op:n4(t.op),filters:r}}}(n):ve()}function r4(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function _P(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Pd=class n{constructor(e,t,r,i,o=Me.min(),a=Me.min(),c=wn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var fI=class{constructor(e){this.ct=e}};function i4(n){let e=JH({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?J0(e,e.limit,"L"):e}var Hm=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(It(e.integerValue));else if("doubleValue"in e){let r=It(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Sd(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=to(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Jo(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?HM(e)?this.dt(t,Number.MAX_SAFE_INTEGER):zM(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ve()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let a="value",c=((i=(r=o[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(It(c)),this.Vt(a,t),this.Tt(o[a],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),le.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Hm.vt=new Hm;var pI=class{constructor(){this.un=new mI}addToCollectionParentIndex(e,t){return this.un.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(sa.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(sa.min())}updateCollectionGroup(e,t,r){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}},mI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vn(St.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vn(St.comparator)).toArray()}};var SQ=new Uint8Array(0);var fi=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};fi.DEFAULT_COLLECTION_PERCENTILE=10,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fi.DEFAULT=new fi(41943040,fi.DEFAULT_COLLECTION_PERCENTILE,fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fi.DISABLED=new fi(-1,0,0);var Rd=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var gI=class{constructor(){this.changes=new Xo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?K.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var _I=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var vI=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Dd(r.mutation,i,gr.empty(),cn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,He()).next(()=>r))}getLocalViewOfDocuments(e,t,r=He()){let i=na();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let a=Ed();return o.forEach((c,d)=>{a=a.insert(c,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=na();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,He()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,i){let o=no(),a=Td(),c=function(){return Td()}();return t.forEach((d,f)=>{let g=r.get(f.key);i.has(f.key)&&(g===void 0||g.mutation instanceof vi)?o=o.insert(f.key,f):g!==void 0?(a.set(f.key,g.mutation.getFieldMask()),Dd(g.mutation,f,g.mutation.getFieldMask(),cn.now())):a.set(f.key,gr.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,g)=>a.set(f,g)),t.forEach((f,g)=>{var y;return c.set(f,new _I(g,(y=a.get(f))!==null&&y!==void 0?y:null))}),c))}recalculateAndSaveOverlays(e,t){let r=Td(),i=new Rt((a,c)=>a-c),o=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let c of a)c.keys().forEach(d=>{let f=t.get(d);if(f===null)return;let g=r.get(d)||gr.empty();g=c.applyToLocalView(f,g),r.set(d,g);let y=(i.get(c.batchId)||He()).add(d);i=i.insert(c.batchId,y)})}).next(()=>{let a=[],c=i.getReverseIterator();for(;c.hasNext();){let d=c.getNext(),f=d.key,g=d.value,y=nP();g.forEach(E=>{if(!o.has(E)){let C=uP(t.get(E),r.get(E));C!==null&&y.set(E,C),o=o.add(E)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,y))}return K.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return le.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):YM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):K.resolve(na()),c=-1,d=o;return a.next(f=>K.forEach(f,(g,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(g)?K.resolve():this.remoteDocumentCache.getEntry(e,g).next(E=>{d=d.insert(g,E)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,He())).next(g=>({batchId:c,changes:tP(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new le(t)).next(r=>{let i=Ed();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,a=Ed();return this.indexManager.getCollectionParents(e,o).next(c=>K.forEach(c,d=>{let f=function(y,E){return new ua(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(g=>{g.forEach((y,E)=>{a=a.insert(y,E)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(a=>{o.forEach((d,f)=>{let g=f.getKey();a.get(g)===null&&(a=a.insert(g,kr.newInvalidDocument(g)))});let c=Ed();return a.forEach((d,f)=>{let g=o.get(d);g!==void 0&&Dd(g.mutation,f,gr.empty(),cn.now()),pg(t,f)&&(c=c.insert(d,f))}),c})}};var yI=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return K.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:gi(i.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:i4(i.bundledQuery),readTime:gi(i.readTime)}}(t)),K.resolve()}};var wI=class{constructor(){this.overlays=new Rt(le.comparator),this.Ir=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){let r=na();return K.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),K.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),K.resolve()}getOverlaysForCollection(e,t,r){let i=na(),o=t.length+1,a=new le(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let d=c.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>r&&i.set(d.getKey(),d)}return K.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Rt((f,g)=>f-g),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let g=o.get(f.largestBatchId);g===null&&(g=na(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}let c=na(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,g)=>c.set(f,g)),!(c.size()>=i)););return K.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new iI(t,r));let o=this.Ir.get(t);o===void 0&&(o=He(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var II=class{constructor(){this.sessionToken=wn.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}};var Nd=class{constructor(){this.Tr=new vn($t.Er),this.dr=new vn($t.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new $t(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new $t(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new le(new St([])),r=new $t(t,e),i=new $t(t,e+1),o=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new le(new St([])),r=new $t(t,e),i=new $t(t,e+1),o=He();return this.dr.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){let t=new $t(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},$t=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return le.comparator(e.key,t.key)||Je(e.wr,t.wr)}static Ar(e,t){return Je(e.wr,t.wr)||le.comparator(e.key,t.key)}};var EI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new vn($t.Er)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new nI(o,t,r,i);this.mutationQueue.push(a);for(let c of i)this.br=this.br.add(new $t(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,t){return K.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new $t(t,0),i=new $t(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],a=>{let c=this.Dr(a.wr);o.push(c)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Je);return t.forEach(i=>{let o=new $t(i,0),a=new $t(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],c=>{r=r.add(c.wr)})}),K.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;le.isDocumentKey(o)||(o=o.child(""));let a=new $t(new le(o),0),c=new vn(Je);return this.br.forEachWhile(d=>{let f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(c=c.add(d.wr)),!0)},a),K.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ot(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return K.forEach(t.mutations,i=>{let o=new $t(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new $t(t,0),i=this.br.firstAfterOrEqual(r);return K.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var bI=class{constructor(e){this.Mr=e,this.docs=function(){return new Rt(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return K.resolve(r?r.document.mutableCopy():kr.newInvalidDocument(t))}getEntries(e,t){let r=no();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():kr.newInvalidDocument(i))}),K.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=no(),a=t.path,c=new le(a.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){let{key:f,value:{document:g}}=d.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||fH(hH(g),r)<=0||(i.has(g.key)||pg(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ve()}Or(e,t){return K.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new CI(this)}getSize(e){return K.resolve(this.size)}},CI=class extends gI{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),K.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var TI=class{constructor(e){this.persistence=e,this.Nr=new Xo(t=>dE(t),hE),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Nd,this.targetCount=0,this.kr=Rd.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),K.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Rd(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Kn(t),K.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),K.waitFor(o).next(()=>i)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return K.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),K.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),K.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return K.resolve(r)}containsKey(e,t){return K.resolve(this.Br.containsKey(t))}};var DI=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new jM(0),this.Kr=!1,this.Kr=!0,this.$r=new II,this.referenceDelegate=e(this),this.Ur=new TI(this),this.indexManager=new pI,this.remoteDocumentCache=function(i){return new bI(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new fI(t),this.Gr=new yI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new EI(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ie("MemoryPersistence","Starting transaction:",e);let i=new SI(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return K.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},SI=class extends F0{constructor(e){super(),this.currentSequenceNumber=e}},AI=class n{constructor(e){this.persistence=e,this.Jr=new Nd,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ve()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),K.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),K.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Xr,r=>{let i=le.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,Me.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return K.or([()=>K.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var xI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=He(),i=He();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var MI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var PI=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return UA()?8:mH(tn())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new MI;return this.Xi(e,t,a).next(c=>{if(o.result=c,this.zi)return this.es(e,t,a,c.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Id()<=ze.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",ec(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),K.resolve()):(Id()<=ze.DEBUG&&ie("QueryEngine","Query:",ec(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Id()<=ze.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",ec(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mi(t))):K.resolve())}Yi(e,t){if(gM(t))return K.resolve(null);let r=mi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=J0(t,null,"F"),r=mi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let a=He(...o);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(d=>{let f=this.ts(t,c);return this.ns(t,f,a,d.readTime)?this.Yi(e,J0(t,null,"F")):this.rs(e,f,t,d)}))})))}Zi(e,t,r,i){return gM(t)||i.isEqual(Me.min())?K.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let a=this.ts(t,o);return this.ns(t,a,r,i)?K.resolve(null):(Id()<=ze.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ec(t)),this.rs(e,a,t,dH(i,-1)).next(c=>c))})}ts(e,t){let r=new vn(XM(e));return t.forEach((i,o)=>{pg(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Id()<=ze.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",ec(t)),this.Ji.getDocumentsMatchingQuery(e,t,sa.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}};var RI=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Rt(Je),this._s=new Xo(o=>dE(o),hE),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function o4(n,e,t,r){return new RI(n,e,t,r)}function vP(n,e){return b(this,null,function*(){let t=De(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let a=[],c=[],d=He();for(let f of i){a.push(f.batchId);for(let g of f.mutations)d=d.add(g.key)}for(let f of o){c.push(f.batchId);for(let g of f.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(r,d).next(f=>({hs:f,removedBatchIds:a,addedBatchIds:c}))})})})}function s4(n,e){let t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,d,f,g){let y=f.batch,E=y.keys(),C=K.resolve();return E.forEach(V=>{C=C.next(()=>g.getEntry(d,V)).next(z=>{let $=f.docVersions.get(V);ot($!==null),z.version.compareTo($)<0&&(y.applyToRemoteDocument(z,f),z.isValidDocument()&&(z.setReadTime(f.commitVersion),g.addEntry(z)))})}),C.next(()=>c.mutationQueue.removeMutationBatch(d,y))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=He();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function yP(n){let e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function a4(n,e){let t=De(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let c=[];e.targetChanges.forEach((g,y)=>{let E=i.get(y);if(!E)return;c.push(t.Ur.removeMatchingKeys(o,g.removedDocuments,y).next(()=>t.Ur.addMatchingKeys(o,g.addedDocuments,y)));let C=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?C=C.withResumeToken(wn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):g.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(g.resumeToken,r)),i=i.insert(y,C),function(z,$,Z){return z.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0}(E,C,g)&&c.push(t.Ur.updateTargetData(o,C))});let d=no(),f=He();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),c.push(u4(o,a,e.documentUpdates).next(g=>{d=g.Ps,f=g.Is})),!r.isEqual(Me.min())){let g=t.Ur.getLastRemoteSnapshotVersion(o).next(y=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(g)}return K.waitFor(c).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(t.os=i,o))}function u4(n,e,t){let r=He(),i=He();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let a=no();return t.forEach((c,d)=>{let f=o.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(Me.min())?(e.removeEntry(c,d.readTime),a=a.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),a=a.insert(c,d)):ie("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)}),{Ps:a,Is:i}})}function c4(n,e){let t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function l4(n,e){let t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,K.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new Pd(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function NI(n,e,t){return b(this,null,function*(){let r=De(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!$d(a))throw a;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function SM(n,e,t){let r=De(n),i=Me.min(),o=He();return r.persistence.runTransaction("Execute query","readwrite",a=>function(d,f,g){let y=De(d),E=y._s.get(g);return E!==void 0?K.resolve(y.os.get(E)):y.Ur.getTargetData(f,g)}(r,a,mi(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(d=>{o=d})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:Me.min(),t?o:He())).next(c=>(d4(r,DH(e),c),{documents:c,Ts:o})))}function d4(n,e,t){let r=n.us.get(e)||Me.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}var qm=class{constructor(){this.activeTargetIds=RH()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var kI=class{constructor(){this.so=new qm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var OI=class{_o(e){}shutdown(){}};var Gm=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Am=null;function D0(){return Am===null?Am=function(){return 268435456+Math.round(2147483648*Math.random())}():Am++,"0x"+Am.toString(16)}var h4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var LI=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var _n="WebChannelConnection",FI=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,a){let c=D0(),d=this.xo(t,r.toUriEncodedString());ie("RestConnection",`Sending RPC '${t}' ${c}:`,d,i);let f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,o,a),this.No(t,d,f,i).then(g=>(ie("RestConnection",`Received RPC '${t}' ${c}: `,g),g),g=>{throw sc("RestConnection",`RPC '${t}' ${c} failed with error: `,g,"url: ",d,"request:",i),g})}Lo(t,r,i,o,a,c){return this.Mo(t,r,i,o,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,a)=>t[a]=o),i&&i.headers.forEach((o,a)=>t[a]=o)}xo(t,r){let i=h4[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=D0();return new Promise((a,c)=>{let d=new w0;d.setWithCredentials(!0),d.listenOnce(I0.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case wd.NO_ERROR:let g=d.getResponseJson();ie(_n,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),a(g);break;case wd.TIMEOUT:ie(_n,`RPC '${e}' ${o} timed out`),c(new ee(q.DEADLINE_EXCEEDED,"Request time out"));break;case wd.HTTP_ERROR:let y=d.getStatus();if(ie(_n,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);let C=E?.error;if(C&&C.status&&C.message){let V=function($){let Z=$.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(Z)>=0?Z:q.UNKNOWN}(C.status);c(new ee(V,C.message))}else c(new ee(q.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ee(q.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{ie(_n,`RPC '${e}' ${o} completed.`)}});let f=JSON.stringify(i);ie(_n,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",f,r,15)})}Bo(e,t,r){let i=D0(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=C0(),c=b0(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;let g=o.join("");ie(_n,`Creating RPC '${e}' stream ${i}: ${g}`,d);let y=a.createWebChannel(g,d),E=!1,C=!1,V=new LI({Io:$=>{C?ie(_n,`Not sending because RPC '${e}' stream ${i} is closed:`,$):(E||(ie(_n,`Opening RPC '${e}' stream ${i} transport.`),y.open(),E=!0),ie(_n,`RPC '${e}' stream ${i} sending:`,$),y.send($))},To:()=>y.close()}),z=($,Z,ne)=>{$.listen(Z,se=>{try{ne(se)}catch(ce){setTimeout(()=>{throw ce},0)}})};return z(y,Xu.EventType.OPEN,()=>{C||(ie(_n,`RPC '${e}' stream ${i} transport opened.`),V.yo())}),z(y,Xu.EventType.CLOSE,()=>{C||(C=!0,ie(_n,`RPC '${e}' stream ${i} transport closed`),V.So())}),z(y,Xu.EventType.ERROR,$=>{C||(C=!0,sc(_n,`RPC '${e}' stream ${i} transport errored:`,$),V.So(new ee(q.UNAVAILABLE,"The operation could not be completed")))}),z(y,Xu.EventType.MESSAGE,$=>{var Z;if(!C){let ne=$.data[0];ot(!!ne);let se=ne,ce=se.error||((Z=se[0])===null||Z===void 0?void 0:Z.error);if(ce){ie(_n,`RPC '${e}' stream ${i} received error:`,ce);let st=ce.status,he=function(D){let x=jt[D];if(x!==void 0)return lP(x)}(st),P=ce.message;he===void 0&&(he=q.INTERNAL,P="Unknown error status: "+st+" with message "+ce.message),C=!0,V.So(new ee(he,P)),y.close()}else ie(_n,`RPC '${e}' stream ${i} received:`,ne),V.bo(ne)}}),z(c,E0.STAT_EVENT,$=>{$.stat===Dm.PROXY?ie(_n,`RPC '${e}' stream ${i} detected buffering proxy`):$.stat===Dm.NOPROXY&&ie(_n,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{V.wo()},0),V}};function S0(){return typeof document<"u"?document:null}function mg(n){return new uI(n,!0)}var Wm=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Zm=class{constructor(e,t,r,i,o,a,c,d){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Wm(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return b(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return b(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return b(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(eo(t.toString()),eo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new ee(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>b(this,null,function*(){this.state=0,this.start()}))}I_(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},VI=class extends Zm{constructor(e,t,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=WH(this.serializer,e),r=function(o){if(!("targetChange"in o))return Me.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?Me.min():a.readTime?gi(a.readTime):Me.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=hI(this.serializer),t.addTarget=function(o,a){let c,d=a.target;if(c=Q0(d)?{documents:QH(o,d)}:{query:YH(o,d)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=dP(o,a.resumeToken);let f=cI(o,a.expectedCount);f!==null&&(c.expectedCount=f)}else if(a.snapshotVersion.compareTo(Me.min())>0){c.readTime=zm(o,a.snapshotVersion.toTimestamp());let f=cI(o,a.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);let r=XH(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=hI(this.serializer),t.removeTarget=e,this.a_(t)}},BI=class extends Zm{constructor(e,t,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ot(!!e.streamToken),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ot(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=KH(e.writeResults,e.commitTime),r=gi(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=hI(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>ZH(this.serializer,r))};this.a_(t)}};var UI=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ee(q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,lI(t,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(q.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,lI(t,r),i,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ee(q.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},jI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(eo(t),this.D_=!1):ie("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var $I=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{r.enqueueAndForget(()=>b(this,null,function*(){fa(this)&&(ie("RemoteStore","Restarting streams for network reachability change."),yield function(d){return b(this,null,function*(){let f=De(d);f.L_.add(4),yield zd(f),f.q_.set("Unknown"),f.L_.delete(4),yield gg(f)})}(this))}))}),this.q_=new jI(r,i)}};function gg(n){return b(this,null,function*(){if(fa(n))for(let e of n.B_)yield e(!0)})}function zd(n){return b(this,null,function*(){for(let e of n.B_)yield e(!1)})}function wP(n,e){let t=De(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),vE(t)?_E(t):Ic(t).r_()&&gE(t,e))}function mE(n,e){let t=De(n),r=Ic(t);t.N_.delete(e),r.r_()&&IP(t,e),t.N_.size===0&&(r.r_()?r.o_():fa(t)&&t.q_.set("Unknown"))}function gE(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ic(n).A_(e)}function IP(n,e){n.Q_.xe(e),Ic(n).R_(e)}function _E(n){n.Q_=new aI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ic(n).start(),n.q_.v_()}function vE(n){return fa(n)&&!Ic(n).n_()&&n.N_.size>0}function fa(n){return De(n).L_.size===0}function EP(n){n.Q_=void 0}function f4(n){return b(this,null,function*(){n.q_.set("Online")})}function p4(n){return b(this,null,function*(){n.N_.forEach((e,t)=>{gE(n,e)})})}function m4(n,e){return b(this,null,function*(){EP(n),vE(n)?(n.q_.M_(e),_E(n)):n.q_.set("Unknown")})}function g4(n,e,t){return b(this,null,function*(){if(n.q_.set("Online"),e instanceof jm&&e.state===2&&e.cause)try{yield function(i,o){return b(this,null,function*(){let a=o.cause;for(let c of o.targetIds)i.N_.has(c)&&(yield i.remoteSyncer.rejectListen(c,a),i.N_.delete(c),i.Q_.removeTarget(c))})}(n,e)}catch(r){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Km(n,r)}else if(e instanceof ic?n.Q_.Ke(e):e instanceof Um?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Me.min()))try{let r=yield yP(n.localStore);t.compareTo(r)>=0&&(yield function(o,a){let c=o.Q_.rt(a);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){let g=o.N_.get(f);g&&o.N_.set(f,g.withResumeToken(d.resumeToken,a))}}),c.targetMismatches.forEach((d,f)=>{let g=o.N_.get(d);if(!g)return;o.N_.set(d,g.withResumeToken(wn.EMPTY_BYTE_STRING,g.snapshotVersion)),IP(o,d);let y=new Pd(g.target,d,f,g.sequenceNumber);gE(o,y)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){ie("RemoteStore","Failed to raise snapshot:",r),yield Km(n,r)}})}function Km(n,e,t){return b(this,null,function*(){if(!$d(e))throw e;n.L_.add(1),yield zd(n),n.q_.set("Offline"),t||(t=()=>yP(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){ie("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield gg(n)}))})}function bP(n,e){return e().catch(t=>Km(n,t,e))}function _g(n){return b(this,null,function*(){let e=De(n),t=ts(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;_4(e);)try{let i=yield c4(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,v4(e,i)}catch(i){yield Km(e,i)}CP(e)&&TP(e)})}function _4(n){return fa(n)&&n.O_.length<10}function v4(n,e){n.O_.push(e);let t=ts(n);t.r_()&&t.V_&&t.m_(e.mutations)}function CP(n){return fa(n)&&!ts(n).n_()&&n.O_.length>0}function TP(n){ts(n).start()}function y4(n){return b(this,null,function*(){ts(n).p_()})}function w4(n){return b(this,null,function*(){let e=ts(n);for(let t of n.O_)e.m_(t.mutations)})}function I4(n,e,t){return b(this,null,function*(){let r=n.O_.shift(),i=rI.from(r,e,t);yield bP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield _g(n)})}function E4(n,e){return b(this,null,function*(){e&&ts(n).V_&&(yield function(r,i){return b(this,null,function*(){if(function(a){return BH(a)&&a!==q.ABORTED}(i.code)){let o=r.O_.shift();ts(r).s_(),yield bP(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield _g(r)}})}(n,e)),CP(n)&&TP(n)})}function AM(n,e){return b(this,null,function*(){let t=De(n);t.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");let r=fa(t);t.L_.add(3),yield zd(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield gg(t)})}function b4(n,e){return b(this,null,function*(){let t=De(n);e?(t.L_.delete(2),yield gg(t)):e||(t.L_.add(2),yield zd(t),t.q_.set("Unknown"))})}function Ic(n){return n.K_||(n.K_=function(t,r,i){let o=De(t);return o.w_(),new VI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:f4.bind(null,n),Ro:p4.bind(null,n),mo:m4.bind(null,n),d_:g4.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.K_.s_(),vE(n)?_E(n):n.q_.set("Unknown")):(yield n.K_.stop(),EP(n))}))),n.K_}function ts(n){return n.U_||(n.U_=function(t,r,i){let o=De(t);return o.w_(),new BI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:y4.bind(null,n),mo:E4.bind(null,n),f_:w4.bind(null,n),g_:I4.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.U_.s_(),yield _g(n)):(yield n.U_.stop(),n.O_.length>0&&(ie("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var zI=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let a=Date.now()+r,c=new n(e,t,a,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function yE(n,e){if(eo("AsyncQueue",`${e}: ${n}`),$d(n))return new ee(q.UNAVAILABLE,`${e}: ${n}`);throw n}var Qm=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||le.comparator(t.key,r.key):(t,r)=>le.comparator(t.key,r.key),this.keyedMap=Ed(),this.sortedSet=new Rt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Ym=class{constructor(){this.W_=new Rt(le.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ve():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},gc=class n{constructor(e,t,r,i,o,a,c,d,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,o){let a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new n(e,t,Qm.emptySet(t),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var HI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},qI=class{constructor(){this.queries=xM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=De(t),o=i.queries;i.queries=xM(),o.forEach((a,c)=>{for(let d of c.j_)d.onError(r)})})(this,new ee(q.ABORTED,"Firestore shutting down"))}};function xM(){return new Xo(n=>JM(n),fg)}function wE(n,e){return b(this,null,function*(){let t=De(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new HI,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let c=yE(a,`Initialization of query '${ec(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&EE(t)})}function IE(n,e){return b(this,null,function*(){let t=De(n),r=e.query,i=3,o=t.queries.get(r);if(o){let a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function C4(n,e){let t=De(n),r=!1;for(let i of e){let o=i.query,a=t.queries.get(o);if(a){for(let c of a.j_)c.X_(i)&&(r=!0);a.z_=i}}r&&EE(t)}function T4(n,e,t){let r=De(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function EE(n){n.Y_.forEach(e=>{e.next()})}var GI,MM;(MM=GI||(GI={})).ea="default",MM.Cache="cache";var kd=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new gc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=gc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==GI.Cache}};var Jm=class{constructor(e){this.key=e}},Xm=class{constructor(e){this.key=e}},WI=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=He(),this.mutatedKeys=He(),this.Aa=XM(e),this.Ra=new Qm(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Ym,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1,d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,y)=>{let E=i.get(g),C=pg(this.query,y)?y:null,V=!!E&&this.mutatedKeys.has(E.key),z=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),$=!1;E&&C?E.data.isEqual(C.data)?V!==z&&(r.track({type:3,doc:C}),$=!0):this.ga(E,C)||(r.track({type:2,doc:C}),$=!0,(d&&this.Aa(C,d)>0||f&&this.Aa(C,f)<0)&&(c=!0)):!E&&C?(r.track({type:0,doc:C}),$=!0):E&&!C&&(r.track({type:1,doc:E}),$=!0,(d||f)&&(c=!0)),$&&(C?(a=a.add(C),o=z?o.add(g):o.delete(g)):(a=a.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{Ra:a,fa:r,ns:c,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let a=e.fa.G_();a.sort((g,y)=>function(C,V){let z=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return z(C)-z(V)}(g.type,y.type)||this.Aa(g.doc,y.doc)),this.pa(r),i=i!=null&&i;let c=t&&!i?this.ya():[],d=this.da.size===0&&this.current&&!i?1:0,f=d!==this.Ea;return this.Ea=d,a.length!==0||f?{snapshot:new gc(this.query,e.Ra,o,a,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ym,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=He(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Xm(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Jm(r))}),t}ba(e){this.Ta=e.Ts,this.da=He();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return gc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},ZI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},KI=class{constructor(e){this.key=e,this.va=!1}},QI=class{constructor(e,t,r,i,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Xo(c=>JM(c),fg),this.Ma=new Map,this.xa=new Set,this.Oa=new Rt(le.comparator),this.Na=new Map,this.La=new Nd,this.Ba={},this.ka=new Map,this.qa=Rd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function D4(n,e,t=!0){return b(this,null,function*(){let r=PP(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield DP(r,e,t,!0),i})}function S4(n,e){return b(this,null,function*(){let t=PP(n);yield DP(t,e,!0,!1)})}function DP(n,e,t,r){return b(this,null,function*(){let i=yield l4(n.localStore,mi(e)),o=i.targetId,a=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=yield A4(n,e,o,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&wP(n.remoteStore,i),c})}function A4(n,e,t,r,i){return b(this,null,function*(){n.Ka=(y,E,C)=>function(z,$,Z,ne){return b(this,null,function*(){let se=$.view.ma(Z);se.ns&&(se=yield SM(z.localStore,$.query,!1).then(({documents:P})=>$.view.ma(P,se)));let ce=ne&&ne.targetChanges.get($.targetId),st=ne&&ne.targetMismatches.get($.targetId)!=null,he=$.view.applyChanges(se,z.isPrimaryClient,ce,st);return RM(z,$.targetId,he.wa),he.snapshot})}(n,y,E,C);let o=yield SM(n.localStore,e,!0),a=new WI(e,o.Ts),c=a.ma(o.documents),d=Md.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=a.applyChanges(c,n.isPrimaryClient,d);RM(n,t,f.wa);let g=new ZI(e,t,a);return n.Fa.set(e,g),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),f.snapshot})}function x4(n,e,t){return b(this,null,function*(){let r=De(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(a=>!fg(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield NI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&mE(r.remoteStore,i.targetId),YI(r,i.targetId)}).catch(jd))):(YI(r,i.targetId),yield NI(r.localStore,i.targetId,!0))})}function M4(n,e){return b(this,null,function*(){let t=De(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),mE(t.remoteStore,r.targetId))})}function P4(n,e,t){return b(this,null,function*(){let r=V4(n);try{let i=yield function(a,c){let d=De(a),f=cn.now(),g=c.reduce((C,V)=>C.add(V.key),He()),y,E;return d.persistence.runTransaction("Locally write mutations","readwrite",C=>{let V=no(),z=He();return d.cs.getEntries(C,g).next($=>{V=$,V.forEach((Z,ne)=>{ne.isValidDocument()||(z=z.add(Z))})}).next(()=>d.localDocuments.getOverlayedDocuments(C,V)).next($=>{y=$;let Z=[];for(let ne of c){let se=VH(ne,y.get(ne.key).overlayedDocument);se!=null&&Z.push(new vi(ne.key,se,qM(se.value.mapValue),Xi.exists(!0)))}return d.mutationQueue.addMutationBatch(C,f,Z,c)}).next($=>{E=$;let Z=$.applyToLocalDocumentSet(y,z);return d.documentOverlayCache.saveOverlays(C,$.batchId,Z)})}).then(()=>({batchId:E.batchId,changes:tP(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,d){let f=a.Ba[a.currentUser.toKey()];f||(f=new Rt(Je)),f=f.insert(c,d),a.Ba[a.currentUser.toKey()]=f}(r,i.batchId,t),yield Hd(r,i.changes),yield _g(r.remoteStore)}catch(i){let o=yE(i,"Failed to persist write");t.reject(o)}})}function SP(n,e){return b(this,null,function*(){let t=De(n);try{let r=yield a4(t.localStore,e);e.targetChanges.forEach((i,o)=>{let a=t.Na.get(o);a&&(ot(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?ot(a.va):i.removedDocuments.size>0&&(ot(a.va),a.va=!1))}),yield Hd(t,r,e)}catch(r){yield jd(r)}})}function PM(n,e,t){let r=De(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,a)=>{let c=a.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){let d=De(a);d.onlineState=c;let f=!1;d.queries.forEach((g,y)=>{for(let E of y.j_)E.Z_(c)&&(f=!0)}),f&&EE(d)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function R4(n,e,t){return b(this,null,function*(){let r=De(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let a=new Rt(le.comparator);a=a.insert(o,kr.newNoDocument(o,Me.min()));let c=He().add(o),d=new Bm(Me.min(),new Map,new Rt(Je),a,c);yield SP(r,d),r.Oa=r.Oa.remove(o),r.Na.delete(e),bE(r)}else yield NI(r.localStore,e,!1).then(()=>YI(r,e,t)).catch(jd)})}function N4(n,e){return b(this,null,function*(){let t=De(n),r=e.batch.batchId;try{let i=yield s4(t.localStore,e);xP(t,r,null),AP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Hd(t,i)}catch(i){yield jd(i)}})}function k4(n,e,t){return b(this,null,function*(){let r=De(n);try{let i=yield function(a,c){let d=De(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return d.mutationQueue.lookupMutationBatch(f,c).next(y=>(ot(y!==null),g=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>d.localDocuments.getDocuments(f,g))})}(r.localStore,e);xP(r,e,t),AP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Hd(r,i)}catch(i){yield jd(i)}})}function AP(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function xP(n,e,t){let r=De(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function YI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||MP(n,r)})}function MP(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(mE(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),bE(n))}function RM(n,e,t){for(let r of t)r instanceof Jm?(n.La.addReference(r.key,e),O4(n,r)):r instanceof Xm?(ie("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||MP(n,r.key)):ve()}function O4(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ie("SyncEngine","New document in limbo: "+t),n.xa.add(r),bE(n))}function bE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new le(St.fromString(e)),r=n.qa.next();n.Na.set(r,new KI(t)),n.Oa=n.Oa.insert(t,r),wP(n.remoteStore,new Pd(mi(hg(t.path)),r,"TargetPurposeLimboResolution",jM.oe))}}function Hd(n,e,t){return b(this,null,function*(){let r=De(n),i=[],o=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,d)=>{a.push(r.Ka(d,e,t).then(f=>{var g;if((f||t)&&r.isPrimaryClient){let y=f?!f.fromCache:(g=t?.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(f){i.push(f);let y=xI.Wi(d.targetId,f);o.push(y)}}))}),yield Promise.all(a),r.Ca.d_(i),yield function(d,f){return b(this,null,function*(){let g=De(d);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>K.forEach(f,E=>K.forEach(E.$i,C=>g.persistence.referenceDelegate.addReference(y,E.targetId,C)).next(()=>K.forEach(E.Ui,C=>g.persistence.referenceDelegate.removeReference(y,E.targetId,C)))))}catch(y){if(!$d(y))throw y;ie("LocalStore","Failed to update sequence numbers: "+y)}for(let y of f){let E=y.targetId;if(!y.fromCache){let C=g.os.get(E),V=C.snapshotVersion,z=C.withLastLimboFreeSnapshotVersion(V);g.os=g.os.insert(E,z)}}})}(r.localStore,o))})}function L4(n,e){return b(this,null,function*(){let t=De(n);if(!t.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());let r=yield vP(t.localStore,e);t.currentUser=e,function(o,a){o.ka.forEach(c=>{c.forEach(d=>{d.reject(new ee(q.CANCELLED,a))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Hd(t,r.hs)}})}function F4(n,e){let t=De(n),r=t.Na.get(e);if(r&&r.va)return He().add(r.key);{let i=He(),o=t.Ma.get(e);if(!o)return i;for(let a of o){let c=t.Fa.get(a);i=i.unionWith(c.view.Va)}return i}}function PP(n){let e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=SP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=F4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R4.bind(null,e),e.Ca.d_=C4.bind(null,e.eventManager),e.Ca.$a=T4.bind(null,e.eventManager),e}function V4(n){let e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k4.bind(null,e),e}var NM=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return b(this,null,function*(){this.serializer=mg(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return o4(this.persistence,new PI,t.initialUser,this.serializer)}Ga(t){return new DI(AI.Zr,this.serializer)}Wa(t){return new kI}terminate(){return b(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var B4=(()=>{class n{initialize(t,r){return b(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>PM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=L4.bind(null,this.syncEngine),yield b4(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new qI}()}createDatastore(t){let r=mg(t.databaseInfo.databaseId),i=function(a){return new FI(a)}(t.databaseInfo);return function(a,c,d,f){return new UI(a,c,d,f)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,a,c,d){return new $I(i,o,a,c,d)}(this.localStore,this.datastore,t.asyncQueue,r=>PM(this.syncEngine,r,0),function(){return Gm.D()?new Gm:new OI}())}createSyncEngine(t,r){return function(o,a,c,d,f,g,y){let E=new QI(o,a,c,d,f,g);return y&&(E.Qa=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){var t,r;yield function(o){return b(this,null,function*(){let a=De(o);ie("RemoteStore","RemoteStore shutting down."),a.L_.add(5),yield zd(a),a.k_.shutdown(),a.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Od=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):eo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var JI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=rn.UNAUTHENTICATED,this.clientId=Rm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,a=>b(this,null,function*(){ie("FirestoreClient","Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,a=>(ie("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=yE(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function A0(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(this,null,function*(){r.isEqual(i)||(yield vP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function kM(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield U4(n);ie("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>AM(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>AM(e.remoteStore,i)),n._onlineComponents=e})}function U4(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie("FirestoreClient","Using user provided OfflineComponentProvider");try{yield A0(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;sc("Error using user provided cache. Falling back to memory cache: "+t),yield A0(n,new NM)}}else ie("FirestoreClient","Using default OfflineComponentProvider"),yield A0(n,new NM);return n._offlineComponents})}function RP(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie("FirestoreClient","Using user provided OnlineComponentProvider"),yield kM(n,n._uninitializedComponentsProvider._online)):(ie("FirestoreClient","Using default OnlineComponentProvider"),yield kM(n,new B4))),n._onlineComponents})}function j4(n){return RP(n).then(e=>e.syncEngine)}function eg(n){return b(this,null,function*(){let e=yield RP(n),t=e.eventManager;return t.onListen=D4.bind(null,e.syncEngine),t.onUnlisten=x4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=S4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=M4.bind(null,e.syncEngine),t})}function $4(n,e,t={}){let r=new Nr;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(o,a,c,d,f){let g=new Od({next:E=>{g.Za(),a.enqueueAndForget(()=>IE(o,y));let C=E.docs.has(c);!C&&E.fromCache?f.reject(new ee(q.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&E.fromCache&&d&&d.source==="server"?f.reject(new ee(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),y=new kd(hg(c.path),g,{includeMetadataChanges:!0,_a:!0});return wE(o,y)}(yield eg(n),n.asyncQueue,e,t,r)})),r.promise}function z4(n,e,t={}){let r=new Nr;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(o,a,c,d,f){let g=new Od({next:E=>{g.Za(),a.enqueueAndForget(()=>IE(o,y)),E.fromCache&&d.source==="server"?f.reject(new ee(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),y=new kd(c,g,{includeMetadataChanges:!0,_a:!0});return wE(o,y)}(yield eg(n),n.asyncQueue,e,t,r)})),r.promise}function NP(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var OM=new Map;function kP(n,e,t){if(!t)throw new ee(q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function H4(n,e,t,r){if(e===!0&&r===!0)throw new ee(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function LM(n){if(!le.isDocumentKey(n))throw new ee(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function FM(n){if(le.isDocumentKey(n))throw new ee(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ve()}function er(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ee(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=vg(n);throw new ee(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var tg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}H4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ee(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ee(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ee(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},_c=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new x0;switch(r.type){case"firstParty":return new N0(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=OM.get(t);r&&(ie("ComponentProvider","Removing Datastore"),OM.delete(t),r.terminate())}(this),Promise.resolve()}};function OP(n,e,t,r={}){var i;let o=(n=er(n,_c))._getSettings(),a=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&sc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let c,d;if(typeof r.mockUserToken=="string")c=r.mockUserToken,d=rn.MOCK_USER;else{c=kA(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ee(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new rn(f)}n._authCredentials=new M0(new Pm(c,d))}}var da=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},yn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Yo=class n extends da{constructor(e,t,r){super(e,t,hg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new le(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function LP(n,e,...t){if(n=Lt(n),kP("collection","path",e),n instanceof _c){let r=St.fromString(e,...t);return FM(r),new Yo(n,null,r)}{if(!(n instanceof yn||n instanceof Yo))throw new ee(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(St.fromString(e,...t));return FM(r),new Yo(n.firestore,null,r)}}function CE(n,e,...t){if(n=Lt(n),arguments.length===1&&(e=Rm.newId()),kP("doc","path",e),n instanceof _c){let r=St.fromString(e,...t);return LM(r),new yn(n,null,new le(r))}{if(!(n instanceof yn||n instanceof Yo))throw new ee(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(St.fromString(e,...t));return LM(r),new yn(n.firestore,n instanceof Yo?n.converter:null,new le(r))}}var ng=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Wm(this,"async_queue_retry"),this.Vu=()=>{let r=S0();r&&ie("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=S0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=S0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Nr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return b(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!$d(e))throw e;ie("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw eo("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=zI.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&ve()}verifyOperationInProgress(){}wu(){return b(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function VM(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var yi=class extends _c{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ng,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ng(e),this._firestoreClient=void 0,yield e}})}};function FP(n,e){let t=typeof n=="object"?n:Wu(),r=typeof n=="string"?n:e||"(default)",i=cd(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=NA("firestore");o&&OP(i,...o)}return i}function yg(n){if(n._terminated)throw new ee(q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||q4(n),n._firestoreClient}function q4(n){var e,t,r;let i=n._freezeSettings(),o=function(c,d,f,g){return new V0(c,d,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,NP(g.experimentalLongPollingOptions),g.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new JI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){let d=c?._online.build();return{_offline:c?._offline.build(d),_online:d}}(n._componentsProvider))}var Ld=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(wn.fromBase64String(e))}catch(t){throw new ee(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var vc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ee(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var yc=class{constructor(e){this._methodName=e}};var Fd=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ee(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ee(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}};var Vd=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var G4=/^__.*__$/,XI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new vi(e,this.data,this.fieldMask,t,this.fieldTransforms):new la(e,this.data,t,this.fieldTransforms)}},rg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new vi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function VP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}var ig=class n{constructor(e,t,r,i,o,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return sg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(VP(this.Cu)&&G4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},eE=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||mg(e)}Qu(e,t,r,i=!1){return new ig({Cu:e,methodName:t,qu:r,path:Xn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function wg(n){let e=n._freezeSettings(),t=mg(n._databaseId);return new eE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function BP(n,e,t,r,i,o={}){let a=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);TE("Data must be an object, but it was:",a,r);let c=UP(r,a),d,f;if(o.merge)d=new gr(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let g=[];for(let y of o.mergeFields){let E=nE(e,y,t);if(!a.contains(E))throw new ee(q.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);$P(g,E)||g.push(E)}d=new gr(g),f=a.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,f=a.fieldTransforms;return new XI(new Jn(c),d,f)}var og=class n extends yc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function W4(n,e,t){return new ig({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var tE=class n extends yc{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=W4(this,e,!0),r=this.Ku.map(o=>Ec(o,t)),i=new es(r);return new X0(e.path,i)}isEqual(e){return e instanceof n&&jo(this.Ku,e.Ku)}};function Z4(n,e,t,r){let i=n.Qu(1,e,t);TE("Data must be an object, but it was:",i,r);let o=[],a=Jn.empty();ha(r,(d,f)=>{let g=DE(e,d,t);f=Lt(f);let y=i.Nu(g);if(f instanceof og)o.push(g);else{let E=Ec(f,y);E!=null&&(o.push(g),a.set(g,E))}});let c=new gr(o);return new rg(a,c,i.fieldTransforms)}function K4(n,e,t,r,i,o){let a=n.Qu(1,e,t),c=[nE(e,r,t)],d=[i];if(o.length%2!=0)throw new ee(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)c.push(nE(e,o[E])),d.push(o[E+1]);let f=[],g=Jn.empty();for(let E=c.length-1;E>=0;--E)if(!$P(f,c[E])){let C=c[E],V=d[E];V=Lt(V);let z=a.Nu(C);if(V instanceof og)f.push(C);else{let $=Ec(V,z);$!=null&&(f.push(C),g.set(C,$))}}let y=new gr(f);return new rg(g,y,a.fieldTransforms)}function Q4(n,e,t,r=!1){return Ec(t,n.Qu(r?4:3,e))}function Ec(n,e){if(jP(n=Lt(n)))return TE("Unsupported field value:",e,n),UP(n,e);if(n instanceof yc)return function(r,i){if(!VP(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],a=0;for(let c of r){let d=Ec(c,i.Lu(a));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),a++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NH(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=cn.fromDate(r);return{timestampValue:zm(i.serializer,o)}}if(r instanceof cn){let o=new cn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zm(i.serializer,o)}}if(r instanceof Fd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ld)return{bytesValue:dP(i.serializer,r._byteString)};if(r instanceof yn){let o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:pE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vd)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return fE(c.serializer,d)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${vg(r)}`)}(n,e)}function UP(n,e){let t={};return $M(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ha(n,(r,i)=>{let o=Ec(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function jP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof cn||n instanceof Fd||n instanceof Ld||n instanceof yn||n instanceof yc||n instanceof Vd)}function TE(n,e,t){if(!jP(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=vg(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function nE(n,e,t){if((e=Lt(e))instanceof vc)return e._internalPath;if(typeof e=="string")return DE(n,e);throw sg("Field path arguments must be of type string or ",n,!1,void 0,t)}var Y4=new RegExp("[~\\*/\\[\\]]");function DE(n,e,t){if(e.search(Y4)>=0)throw sg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vc(...e.split("."))._internalPath}catch{throw sg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sg(n,e,t,r,i){let o=r&&!r.isEmpty(),a=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(o||a)&&(d+=" (found",o&&(d+=` in field ${r}`),a&&(d+=` in document ${i}`),d+=")"),new ee(q.INVALID_ARGUMENT,c+n+d)}function $P(n,e){return n.some(t=>t.isEqual(e))}var ag=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new rE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(SE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},rE=class extends ag{data(){return super.data()}};function SE(n,e){return typeof e=="string"?DE(n,e):e instanceof vc?e._internalPath:e._delegate._internalPath}function zP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ee(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Bd=class{},iE=class extends Bd{};function HP(n,e,...t){let r=[];e instanceof Bd&&r.push(e),r=r.concat(t),function(o){let a=o.filter(d=>d instanceof oE).length,c=o.filter(d=>d instanceof ug).length;if(a>1||a>0&&c>0)throw new ee(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var ug=class n extends iE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return GP(e._query,t),new da(e.firestore,e.converter,Y0(e._query,t))}_parse(e){let t=wg(e.firestore);return function(o,a,c,d,f,g,y){let E;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ee(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){UM(y,g);let C=[];for(let V of y)C.push(BM(d,o,V));E={arrayValue:{values:C}}}else E=BM(d,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||UM(y,g),E=Q4(c,a,y,g==="in"||g==="not-in");return zt.create(f,g,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function qP(n,e,t){let r=e,i=SE("where",n);return ug._create(i,r,t)}var oE=class n extends Bd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Or.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let a=i,c=o.getFlattenedFilters();for(let d of c)GP(a,d),a=Y0(a,d)}(e._query,t),new da(e.firestore,e.converter,Y0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function BM(n,e,t){if(typeof(t=Lt(t))=="string"){if(t==="")throw new ee(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YM(e)&&t.indexOf("/")!==-1)throw new ee(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(St.fromString(t));if(!le.isDocumentKey(r))throw new ee(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lM(n,new le(r))}if(t instanceof yn)return lM(n,t._key);throw new ee(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vg(t)}.`)}function UM(n,e){if(!Array.isArray(n)||n.length===0)throw new ee(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GP(n,e){let t=function(i,o){for(let a of i)for(let c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ee(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var sE=class{convertValue(e,t="none"){switch(aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ha(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>It(a.doubleValue));return new Vd(o)}convertGeoPoint(e){return new Fd(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=cE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ad(e));default:return null}}convertTimestamp(e){let t=to(e);return new cn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=St.fromString(e);ot(_P(r));let i=new Lm(r.get(1),r.get(3)),o=new le(r.popFirst(5));return i.isEqual(t)||eo(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function WP(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ia=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},cg=class extends ag{constructor(e,t,r,i,o,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new oc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(SE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},oc=class extends cg{data(e={}){return super.data(e)}},lg=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ia(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new oc(this._firestore,this._userDataWriter,r.key,r,new ia(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ee(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{let d=new oc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ia(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let d=new oc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ia(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),f=-1,g=-1;return c.type!==0&&(f=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),g=a.indexOf(c.doc.key)),{type:J4(c.type),doc:d,oldIndex:f,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function J4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}function ZP(n){n=er(n,yn);let e=er(n.firestore,yi);return $4(yg(e),n._key).then(t=>XP(e,n,t))}var Ud=class extends sE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ld(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,t)}};function KP(n){n=er(n,da);let e=er(n.firestore,yi),t=yg(e),r=new Ud(e);return zP(n._query),z4(t,n._query).then(i=>new lg(e,r,n,i))}function QP(n,e,t){n=er(n,yn);let r=er(n.firestore,yi),i=WP(n.converter,e,t);return xE(r,[BP(wg(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Xi.none())])}function YP(n,e,t,...r){n=er(n,yn);let i=er(n.firestore,yi),o=wg(i),a;return a=typeof(e=Lt(e))=="string"||e instanceof vc?K4(o,"updateDoc",n._key,e,t,r):Z4(o,"updateDoc",n._key,e),xE(i,[a.toMutation(n._key,Xi.exists(!0))])}function JP(n,e){let t=er(n.firestore,yi),r=CE(n),i=WP(n.converter,e);return xE(t,[BP(wg(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Xi.exists(!1))]).then(()=>r)}function AE(n,...e){var t,r,i;n=Lt(n);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||VM(e[a])||(o=e[a],a++);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(VM(e[a])){let y=e[a];e[a]=(t=y.next)===null||t===void 0?void 0:t.bind(y),e[a+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[a+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let d,f,g;if(n instanceof yn)f=er(n.firestore,yi),g=hg(n._key.path),d={next:y=>{e[a]&&e[a](XP(f,n,y))},error:e[a+1],complete:e[a+2]};else{let y=er(n,da);f=er(y.firestore,yi),g=y._query;let E=new Ud(f);d={next:C=>{e[a]&&e[a](new lg(f,E,y,C))},error:e[a+1],complete:e[a+2]},zP(n._query)}return function(E,C,V,z){let $=new Od(z),Z=new kd(C,$,V);return E.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return wE(yield eg(E),Z)})),()=>{$.Za(),E.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return IE(yield eg(E),Z)}))}}(yg(f),g,c,d)}function xE(n,e){return function(r,i){let o=new Nr;return r.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return P4(yield j4(r),i,o)})),o.promise}(yg(n),e)}function XP(n,e,t){let r=t.docs.get(e._key),i=new Ud(n);return new cg(n,i,e._key,r,new ia(t.hasPendingWrites,t.fromCache),e.converter)}function eR(...n){return new tE("arrayUnion",n)}(function(e,t=!0){(function(i){wc=i})(qo),Ho(new mr("firestore",(r,{instanceIdentifier:i,options:o})=>{let a=r.getProvider("app").getImmediate(),c=new yi(new P0(r.getProvider("auth-internal")),new O0(r.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ee(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lm(f.options.projectId,g)}(a,i),a);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Wt(sM,"4.7.3",e),Wt(sM,"4.7.3","esm2017")})();var Ig=function(){return Ig=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ig.apply(this,arguments)};var t3={includeMetadataChanges:!1};function tR(n,e){return e===void 0&&(e=t3),new je(function(t){var r=AE(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function nR(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Ig(Ig({},r),(t={},t[e.idField]=n.id,t))}function rR(n){return tR(n,{includeMetadataChanges:!0}).pipe(me(function(e){return e.docs}))}function iR(n,e){return e===void 0&&(e={}),rR(n).pipe(me(function(t){return t.map(function(r){return nR(r,e)})}))}var Pn=class{constructor(e){return e}},oR="firestore",ME=class{constructor(){return ld(oR)}};var PE=new ae("angularfire2.firestore-instances");function n3(n,e){let t=rm(oR,n,e);return t&&new Pn(t)}function r3(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Pn(r)}}var i3={provide:ME,deps:[[new hn,PE]]},o3={provide:Pn,useFactory:n3,deps:[[new hn,PE],Zi]};function sR(n,...e){return Wt("angularfire",Ks.full,"fst"),ei([o3,i3,{provide:PE,useFactory:r3(n),multi:!0,deps:[et,un,Qu,Qs,[new hn,yd],[new hn,Ku],...e]}])}var RE=nn(iR,!0);var aR=nn(JP,!0);var uR=nn(eR,!0);var pa=nn(LP,!0);var At=nn(CE,!0);var In=nn(ZP,!0);var Eg=nn(KP,!0);var cR=nn(FP,!0);var lR=nn(HP,!0);var wi=nn(QP,!0);var NE=nn(YP,!0);var dR=nn(qP,!0);var bc=(()=>{class n{constructor(){this.firestore=W(Pn)}sendNotification(t,r,i){return b(this,null,function*(){let o=At(this.firestore,"users",t),a={type:r,message:i,read:!1,createdAt:new Date().toISOString()};yield NE(o,{notifications:uR(a)})})}markAsRead(t,r){return b(this,null,function*(){let i=At(this.firestore,"users",t),o=yield In(i);if(o.exists()){let a=o.data().notifications;a&&a[r]&&(a[r].read=!0,yield NE(i,{notifications:a}))}})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ii=(()=>{class n{constructor(t){this.notificationService=t,this.firestore=W(Pn)}loadTour(t){return b(this,null,function*(){let r=yield In(At(this.firestore,"tours",t));if(r.exists()){let i=r.data();return Pe(Y({},i),{id:r.id})}else console.error("Tour not found")})}getTours(){let t=pa(this.firestore,"tours");return RE(t,{idField:"id"}).pipe(Sn(i=>{if(i.length===0)return pe([]);let o=i.map(a=>In(At(this.firestore,"users",a.createdBy)).then(c=>Pe(Y({},a),{createdByName:c.exists()?c.data()?.firstName:"Unknown"})));return Ms(o)}))}addTour(t){return b(this,null,function*(){return aR(pa(this.firestore,"tours"),t)})}applyForTour(t,r,i){return b(this,null,function*(){if(!t||!i)throw new Error("Invalid tourId or userId");let o=At(this.firestore,`tours/${t}/applications/${i}`);if(!(yield In(o)).exists())yield wi(o,{status:"pending",appliedAt:new Date().toISOString()}),yield this.notificationService.sendNotification(r,"application","User applied for a tour!");else throw new Error("You have already applied for this tour.")})}updateApplicationStatus(t,r,i){return b(this,null,function*(){if(!t||!r)throw new Error("Invalid tourId or userId");let o=At(this.firestore,`tours/${t}/applications/${r}`);if((yield In(o)).exists())yield wi(o,{status:i,updatedAt:new Date().toISOString()}),yield this.notificationService.sendNotification(r,"statusUpdate",`Your application for the tour has been ${i}`);else throw new Error("User has not applied for this tour.")})}hasUserApplied(t,r){return b(this,null,function*(){let i=At(this.firestore,`tours/${t}/applications/${r}`);return(yield In(i)).exists()})}loadAllApplications(t){return b(this,null,function*(){let r=pa(this.firestore,`tours/${t}/applications`);return(yield Eg(r)).docs.map(a=>Y({id:a.id},a.data()))})}rejectApplication(t,r){let i=At(this.firestore,`tours/${t}/applications/${r}`);return wi(i,{status:"rejected"},{merge:!0})}acceptApplication(t,r){let i=At(this.firestore,`tours/${t}/applications/${r}`);return wi(i,{status:"accepted"},{merge:!0})}cancelApplication(t,r){let i=At(this.firestore,`tours/${t}/applications/${r}`);return wi(i,{status:"canceled"},{merge:!0})}getToursUserAppliedFor(t){return b(this,null,function*(){let r=pa(this.firestore,"tours"),i=yield m_(RE(r,{idField:"id"})),o=[];for(let a of i){let c=At(this.firestore,`tours/${a.id}/applications/${t}`),d=yield In(c);if(d.exists()){let f=At(this.firestore,`tours/${a.id}/reviews/${t}`),g=yield In(f);o.push(Pe(Y({id:a.id},a),{application:d.data(),hasReviewed:g.exists()}))}}return o})}saveReview(t,r,i,o){return b(this,null,function*(){let a=At(this.firestore,`tours/${t}/reviews/${r}`);yield wi(a,{userId:r,review:i,rating:o,date:new Date().toISOString()})})}static{this.\u0275fac=function(r){return new(r||n)(ge(bc))}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var s3=n=>["/tour-details",n];function a3(n,e){if(n&1&&(O(0,"li",3)(1,"h2",4),B(2),M(),O(3,"p")(4,"strong"),B(5,"Date:"),M(),B(6),M(),O(7,"p")(8,"strong"),B(9,"Difficulty:"),M(),B(10),M(),O(11,"p")(12,"strong"),B(13,"Participants:"),M(),B(14),M(),O(15,"p")(16,"strong"),B(17,"Organized By:"),M(),B(18),M(),O(19,"button",5),B(20," View Details "),M()()),n&2){let t=e.$implicit;H(2),it(t.name),H(4),mn(" ",t.date,""),H(4),mn(" ",t.difficulty,""),H(4),mn(" ",t.participants,""),H(4),mn(" ",t.createdByName,""),H(),te("routerLink",Su(6,s3,t.id))}}var hR=(()=>{class n{constructor(t){this.tourService=t,this.tours$=this.tourService.getTours()}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||n)(Q(Ii))}}static{this.\u0275cmp=at({type:n,selectors:[["app-home"]],standalone:!0,features:[ut],decls:6,vars:3,consts:[[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],["class","mb-4 p-4 border rounded shadow",4,"ngFor","ngForOf"],[1,"mb-4","p-4","border","rounded","shadow"],[1,"text-xl","font-semibold"],[1,"mt-2","py-2","px-4","bg-blue-600","text-white","rounded","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"routerLink"]],template:function(r,i){r&1&&(O(0,"div",0)(1,"h1",1),B(2,"Hiking Tours"),M(),O(3,"ul"),Ie(4,a3,21,8,"li",2),Au(5,"async"),M()()),r&2&&(H(4),te("ngForOf",xu(5,1,i.tours$)))},dependencies:[Mr,hr,Ap,ci]})}}return n})();var ER=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Q(oi),Q(xr))}}static{this.\u0275dir=gt({type:n})}}return n})(),Rg=(()=>{class n extends ER{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ui(n)))(i||n)}})()}static{this.\u0275dir=gt({type:n,features:[Ln]})}}return n})(),Ac=new ae("");var u3={provide:Ac,useExisting:cr(()=>Vn),multi:!0};function c3(){let n=$i()?$i().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var l3=new ae(""),Vn=(()=>{class n extends ER{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!c3())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Q(oi),Q(xr),Q(l3,8))}}static{this.\u0275dir=gt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ne("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},features:[si([u3]),Ln]})}}return n})();function ns(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function bR(n){return n!=null&&typeof n.length=="number"}var Jd=new ae(""),Ng=new ae(""),d3=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ma=class{static min(e){return h3(e)}static max(e){return f3(e)}static required(e){return CR(e)}static requiredTrue(e){return p3(e)}static email(e){return m3(e)}static minLength(e){return g3(e)}static maxLength(e){return _3(e)}static pattern(e){return v3(e)}static nullValidator(e){return Cg(e)}static compose(e){return MR(e)}static composeAsync(e){return PR(e)}};function h3(n){return e=>{if(ns(e.value)||ns(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function f3(n){return e=>{if(ns(e.value)||ns(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function CR(n){return ns(n.value)?{required:!0}:null}function p3(n){return n.value===!0?null:{required:!0}}function m3(n){return ns(n.value)||d3.test(n.value)?null:{email:!0}}function g3(n){return e=>ns(e.value)||!bR(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function _3(n){return e=>bR(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function v3(n){if(!n)return Cg;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ns(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Cg(n){return null}function TR(n){return n!=null}function DR(n){return Lo(n)?yt(n):n}function SR(n){let e={};return n.forEach(t=>{e=t!=null?Y(Y({},e),t):e}),Object.keys(e).length===0?null:e}function AR(n,e){return e.map(t=>t(n))}function y3(n){return!n.validate}function xR(n){return n.map(e=>y3(e)?e:t=>e.validate(t))}function MR(n){if(!n)return null;let e=n.filter(TR);return e.length==0?null:function(t){return SR(AR(t,e))}}function UE(n){return n!=null?MR(xR(n)):null}function PR(n){if(!n)return null;let e=n.filter(TR);return e.length==0?null:function(t){let r=AR(t,e).map(DR);return g_(r).pipe(me(SR))}}function jE(n){return n!=null?PR(xR(n)):null}function fR(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function RR(n){return n._rawValidators}function NR(n){return n._rawAsyncValidators}function OE(n){return n?Array.isArray(n)?n:[n]:[]}function Tg(n,e){return Array.isArray(n)?n.includes(e):n===e}function pR(n,e){let t=OE(e);return OE(n).forEach(i=>{Tg(t,i)||t.push(i)}),t}function mR(n,e){return OE(e).filter(t=>!Tg(n,t))}var Dg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=UE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ro=class extends Dg{get formDirective(){return null}get path(){return null}},ga=class extends Dg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Sg=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},w3={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},xJ=Pe(Y({},w3),{"[class.ng-submitted]":"isSubmitted"}),_r=(()=>{class n extends Sg{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Q(ga,2))}}static{this.\u0275dir=gt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&wp("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ln]})}}return n})(),is=(()=>{class n extends Sg{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Q(ro,10))}}static{this.\u0275dir=gt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&wp("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Ln]})}}return n})();var Gd="VALID",bg="INVALID",Cc="PENDING",Wd="DISABLED",rs=class{},Ag=class extends rs{constructor(e,t){super(),this.value=e,this.source=t}},Kd=class extends rs{constructor(e,t){super(),this.pristine=e,this.source=t}},Qd=class extends rs{constructor(e,t){super(),this.touched=e,this.source=t}},Tc=class extends rs{constructor(e,t){super(),this.status=e,this.source=t}},LE=class extends rs{constructor(e){super(),this.source=e}},FE=class extends rs{constructor(e){super(),this.source=e}};function $E(n){return(kg(n)?n.validators:n)||null}function I3(n){return Array.isArray(n)?UE(n):n||null}function zE(n,e){return(kg(e)?e.asyncValidators:n)||null}function E3(n){return Array.isArray(n)?jE(n):n||null}function kg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function kR(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ue(1e3,"");if(!r[t])throw new ue(1001,"")}function OR(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ue(1002,"")})}var Dc=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Mu(()=>this.statusReactive()),this.statusReactive=Du(void 0),this._pristine=Mu(()=>this.pristineReactive()),this.pristineReactive=Du(!0),this._touched=Mu(()=>this.touchedReactive()),this.touchedReactive=Du(!1),this._events=new Jt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return dr(this.statusReactive)}set status(e){dr(()=>this.statusReactive.set(e))}get valid(){return this.status===Gd}get invalid(){return this.status===bg}get pending(){return this.status==Cc}get disabled(){return this.status===Wd}get enabled(){return this.status!==Wd}get pristine(){return dr(this.pristineReactive)}set pristine(e){dr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return dr(this.touchedReactive)}set touched(e){dr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(pR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(pR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(mR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(mR(e,this._rawAsyncValidators))}hasValidator(e){return Tg(this._rawValidators,e)}hasAsyncValidator(e){return Tg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Pe(Y({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Qd(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Qd(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Pe(Y({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Kd(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Kd(!0,r))}markAsPending(e={}){this.status=Cc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Tc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Pe(Y({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Wd,this.errors=null,this._forEachChild(i=>{i.disable(Pe(Y({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ag(this.value,r)),this._events.next(new Tc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Pe(Y({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Gd,this._forEachChild(r=>{r.enable(Pe(Y({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Pe(Y({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gd||this.status===Cc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ag(this.value,t)),this._events.next(new Tc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Pe(Y({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wd:Gd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Cc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=DR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Tc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new wt,this.statusChanges=new wt}_calculateStatus(){return this._allControlsDisabled()?Wd:this.errors?bg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Cc)?Cc:this._anyControlsHaveStatus(bg)?bg:Gd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Kd(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Qd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){kg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=I3(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=E3(this._rawAsyncValidators)}},Sc=class extends Dc{constructor(e,t,r){super($E(t),zE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){OR(this,!0,e),Object.keys(e).forEach(r=>{kR(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var VE=class extends Sc{};var Xd=new ae("CallSetDisabledState",{providedIn:"root",factory:()=>Og}),Og="always";function LR(n,e){return[...e.path,n]}function xg(n,e,t=Og){HE(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),C3(n,e),D3(n,e),T3(n,e),b3(n,e)}function gR(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Pg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Mg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function b3(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function HE(n,e){let t=RR(n);e.validator!==null?n.setValidators(fR(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=NR(n);e.asyncValidator!==null?n.setAsyncValidators(fR(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Mg(e._rawValidators,i),Mg(e._rawAsyncValidators,i)}function Pg(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=RR(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(a=>a!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=NR(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(a=>a!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Mg(e._rawValidators,r),Mg(e._rawAsyncValidators,r),t}function C3(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&FR(n,e)})}function T3(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&FR(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function FR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function D3(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function VR(n,e){n==null,HE(n,e)}function S3(n,e){return Pg(n,e)}function BR(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function A3(n){return Object.getPrototypeOf(n.constructor)===Rg}function UR(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function jR(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Vn?t=o:A3(o)?r=o:i=o}),i||r||t||null}function x3(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var M3={provide:ro,useExisting:cr(()=>_a)},Zd=Promise.resolve(),_a=(()=>{class n extends ro{get submitted(){return dr(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Mu(()=>this.submittedReactive()),this.submittedReactive=Du(!1),this._directives=new Set,this.ngSubmit=new wt,this.form=new Sc({},UE(t),jE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Zd.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),xg(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Zd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Zd.then(()=>{let r=this._findContainer(t.path),i=new Sc({});VR(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Zd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Zd.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),UR(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(Q(Jd,10),Q(Ng,10),Q(Xd,8))}}static{this.\u0275dir=gt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ne("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[si([M3]),Ln]})}}return n})();function _R(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function vR(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Yd=class extends Dc{constructor(e=null,t,r){super($E(t),zE(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),kg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(vR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_R(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_R(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){vR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var P3=n=>n instanceof Yd;var R3={provide:ga,useExisting:cr(()=>Lr)},yR=Promise.resolve(),Lr=(()=>{class n extends ga{constructor(t,r,i,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new Yd,this._registered=!1,this.name="",this.update=new wt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=jR(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),BR(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){xg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){yR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Vo(r);yR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?LR(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Q(ro,9),Q(Jd,10),Q(Ng,10),Q(Ac,10),Q(Fo,8),Q(Xd,8))}}static{this.\u0275dir=gt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[si([R3]),Ln,ni]})}}return n})(),os=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=gt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),N3={provide:Ac,useExisting:cr(()=>qE),multi:!0},qE=(()=>{class n extends Rg{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ui(n)))(i||n)}})()}static{this.\u0275dir=gt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Ne("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},features:[si([N3]),Ln]})}}return n})();var $R=new ae("");var k3={provide:ro,useExisting:cr(()=>GE)},GE=(()=>{class n extends ro{get submitted(){return dr(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Mu(()=>this._submittedReactive()),this._submittedReactive=Du(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new wt,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Pg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return xg(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){gR(t.control||null,t,!1),x3(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),UR(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new LE(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new FE(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(gR(r||null,t),P3(i)&&(xg(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);VR(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&S3(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){HE(this.form,this),this._oldForm&&Pg(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(Q(Jd,10),Q(Ng,10),Q(Xd,8))}}static{this.\u0275dir=gt({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Ne("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[si([k3]),Ln,ni]})}}return n})();var O3={provide:ga,useExisting:cr(()=>WE)},WE=(()=>{class n extends ga{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new wt,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=jR(this,o)}ngOnChanges(t){this._added||this._setUpControl(),BR(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return LR(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(Q(ro,13),Q(Jd,10),Q(Ng,10),Q(Ac,10),Q($R,8))}}static{this.\u0275dir=gt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[si([O3]),Ln,ni]})}}return n})(),L3={provide:Ac,useExisting:cr(()=>ss),multi:!0};function zR(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function F3(n){return n.split(":")[0]}var ss=(()=>{class n extends Rg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=zR(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=F3(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ui(n)))(i||n)}})()}static{this.\u0275dir=gt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Ne("change",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[si([L3]),Ln]})}}return n})(),xc=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(zR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Q(xr),Q(oi),Q(ss,9))}}static{this.\u0275dir=gt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),V3={provide:Ac,useExisting:cr(()=>HR),multi:!0};function wR(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function B3(n){return n.split(":")[0]}var HR=(()=>{class n extends Rg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,a)=>{o._setSelected(i.indexOf(a.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let d=a[c],f=this._getOptionValue(d.value);i.push(f)}}else{let a=r.options;for(let c=0;c<a.length;c++){let d=a[c];if(d.selected){let f=this._getOptionValue(d.value);i.push(f)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=B3(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ui(n)))(i||n)}})()}static{this.\u0275dir=gt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Ne("change",function(a){return i.onChange(a.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[si([V3]),Ln]})}}return n})(),Mc=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(wR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(wR(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Q(xr),Q(oi),Q(HR,9))}}static{this.\u0275dir=gt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var U3=(()=>{class n{constructor(){this._validator=Cg}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Cg,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=gt({type:n,features:[ni]})}}return n})();var j3={provide:Jd,useExisting:cr(()=>va),multi:!0};var va=(()=>{class n extends U3{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Vo,this.createValidator=t=>CR}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ui(n)))(i||n)}})()}static{this.\u0275dir=gt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ml("required",i._enabled?"":null)},inputs:{required:"required"},features:[si([j3]),Ln]})}}return n})();var qR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Fi({type:n})}static{this.\u0275inj=Li({})}}return n})(),BE=class extends Dc{constructor(e,t,r){super($E(t),zE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){OR(this,!1,e),e.forEach((r,i)=>{kR(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function IR(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var GR=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return IR(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Sc(i,o)}record(t,r=null){let i=this._reduceControls(t);return new VE(i,r)}control(t,r,i){let o={};return this.useNonNullable?(IR(r)?o=r:(o.validators=r,o.asyncValidators=i),new Yd(t,Pe(Y({},o),{nonNullable:!0}))):new Yd(t,r,i)}array(t,r,i){let o=t.map(a=>this._createControl(a));return new BE(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Yd)return t;if(t instanceof Dc)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var vr=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Xd,useValue:t.callSetDisabledState??Og}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Fi({type:n})}static{this.\u0275inj=Li({imports:[qR]})}}return n})(),WR=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:$R,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Xd,useValue:t.callSetDisabledState??Og}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Fi({type:n})}static{this.\u0275inj=Li({imports:[qR]})}}return n})();var Nt=(()=>{class n{constructor(){this.auth=W(ta),this.firestore=W(Pn),this.userSubject=new kt(null),this.userTypeSubject=new kt(null),this.userDataSubject=new kt(null),Em(this.auth,t=>b(this,null,function*(){if(t){let i=(yield In(At(this.firestore,"users",t.uid))).data();this.userDataSubject.next(i);let o=i?.type??null;this.userTypeSubject.next(o)}else this.userTypeSubject.next(null);this.userSubject.next(t)}))}get user$(){return this.userSubject.asObservable()}get userType$(){return this.userTypeSubject.asObservable()}get userData$(){return this.userDataSubject.asObservable()}get currentUser(){return this.auth.currentUser}register(t,r,i,o,a){return b(this,null,function*(){let c=yield tM(this.auth,t,r),d=c.user;return yield wi(At(this.firestore,"users",d.uid),{firstName:i,lastName:o,email:t,type:a}),c})}login(t,r){return b(this,null,function*(){return yield rM(this.auth,t,r)})}logout(){return b(this,null,function*(){return yield bm(this.auth)})}updateUserData(t){if(this.currentUser)return wi(At(this.firestore,"users",this.currentUser.uid),t);throw new Error("User is not logged in")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $3(n,e){n&1&&(O(0,"div",16),B(1," Email is required. "),M())}function z3(n,e){n&1&&(O(0,"div",16),B(1," Password is required. "),M())}var ZR=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.authService.user$.subscribe(i=>{i&&this.router.navigate(["/"])})}onLogin(t){return b(this,null,function*(){t.invalid||(yield this.authService.login(this.email,this.password),this.router.navigate(["/"]))})}static{this.\u0275fac=function(r){return new(r||n)(Q(Nt),Q(ht))}}static{this.\u0275cmp=at({type:n,selectors:[["app-login"]],standalone:!0,features:[ut],decls:25,vars:4,consts:[["loginForm","ngForm"],["emailInput","ngModel"],["passwordInput","ngModel"],[1,"flex","min-h-screen","items-center","justify-center","bg-gray-100"],[1,"w-full","max-w-md","p-8","bg-white","rounded-lg","shadow-lg"],[1,"text-2xl","font-bold","text-center","text-gray-800"],[1,"mt-6","space-y-6",3,"ngSubmit"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","name","email","placeholder","Enter your email","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["class","text-red-500 text-sm",4,"ngIf"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","placeholder","Enter your password","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","py-3","px-4","mt-4","text-white","bg-blue-600","rounded-lg","hover:bg-blue-700","transition-colors","duration-200"],[1,"my-6","border-t","border-gray-300"],[1,"mt-6","text-center","text-sm","text-gray-600"],["routerLink","/register",1,"text-blue-600","hover:underline"],[1,"text-red-500","text-sm"]],template:function(r,i){if(r&1){let o=dt();O(0,"div",3)(1,"div",4)(2,"h2",5),B(3,"Login to Your Account"),M(),O(4,"form",6,0),Ne("ngSubmit",function(){ye(o);let c=Ot(5);return we(i.onLogin(c))}),O(6,"div")(7,"label",7),B(8,"Email"),M(),O(9,"input",8,1),Dt("ngModelChange",function(c){return ye(o),Mt(i.email,c)||(i.email=c),we(c)}),M(),Ie(11,$3,2,0,"div",9),M(),O(12,"div")(13,"label",10),B(14,"Password"),M(),O(15,"input",11,2),Dt("ngModelChange",function(c){return ye(o),Mt(i.password,c)||(i.password=c),we(c)}),M(),Ie(17,z3,2,0,"div",9),M(),O(18,"button",12),B(19," Login "),M()(),Ct(20,"div",13),O(21,"p",14),B(22," Don't have an account? "),O(23,"a",15),B(24,"Sign up"),M()()()()}if(r&2){let o=Ot(10),a=Ot(16);H(9),Tt("ngModel",i.email),H(2),te("ngIf",o.invalid&&o.touched),H(4),Tt("ngModel",i.password),H(2),te("ngIf",a.invalid&&a.touched)}},dependencies:[zu,ci,vr,os,Vn,_r,is,va,Lr,_a,Mr,gn]})}}return n})();function H3(n,e){n&1&&(O(0,"div",32),B(1," Email is required. "),M())}function q3(n,e){n&1&&(O(0,"div",32),B(1," First name is required. "),M())}function G3(n,e){n&1&&(O(0,"div",32),B(1," Last name is required. "),M())}function W3(n,e){n&1&&(O(0,"div",32),B(1," Password is required. "),M())}function Z3(n,e){n&1&&(O(0,"div",32),B(1," Confirm password is required. "),M())}function K3(n,e){n&1&&(O(0,"div",32),B(1," Passwords do not match. "),M())}function Q3(n,e){n&1&&(O(0,"div",32),B(1," User type is required. "),M())}function Y3(n,e){n&1&&(O(0,"div",33),Ct(1,"div",34),M())}var KR=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isLoading=!1,this.authService.user$.subscribe(i=>{i&&this.router.navigate(["/"])})}onRegister(t){return b(this,null,function*(){t.invalid||(this.isLoading=!0,yield this.authService.register(this.email,this.password,this.firstName,this.lastName,this.userType),this.isLoading=!1,this.router.navigate(["/"]))})}static{this.\u0275fac=function(r){return new(r||n)(Q(Nt),Q(ht))}}static{this.\u0275cmp=at({type:n,selectors:[["app-register"]],standalone:!0,features:[ut],decls:57,vars:14,consts:[["registerForm","ngForm"],["emailInput","ngModel"],["firstNameInput","ngModel"],["lastNameInput","ngModel"],["passwordInput","ngModel"],["confirmPasswordInput","ngModel"],["userTypeInput","ngModel"],[1,"flex","min-h-screen","items-center","justify-center","bg-gray-100"],[1,"w-full","max-w-md","p-8","bg-white","rounded-lg","shadow-lg"],[1,"text-2xl","font-bold","text-center","text-gray-800"],[3,"ngSubmit"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","name","email","placeholder","Enter your email","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["class","text-red-500 text-sm",4,"ngIf"],["for","firstName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","firstName","name","firstName","placeholder","Enter your first name","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","lastName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","lastName","name","lastName","placeholder","Enter your last name","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","placeholder","Enter your password","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Confirm your password","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","userType",1,"block","text-sm","font-medium","text-gray-700"],["id","userType","name","userType","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],["value","hiker"],["value","hikingClub"],["type","submit",1,"w-full","py-3","px-4","mt-4","text-white","bg-blue-600","rounded-lg","hover:bg-blue-700","transition-colors","duration-200"],["class","fixed inset-0 flex items-center justify-center bg-gray-100 bg-opacity-75 z-50",4,"ngIf"],[1,"my-6","border-t","border-gray-300"],[1,"text-center","text-sm","text-gray-600"],["routerLink","/login",1,"text-blue-600","hover:underline"],[1,"text-red-500","text-sm"],[1,"fixed","inset-0","flex","items-center","justify-center","bg-gray-100","bg-opacity-75","z-50"],[1,"animate-spin","rounded-full","h-32","w-32","border-t-2","border-b-2","border-blue-500"]],template:function(r,i){if(r&1){let o=dt();O(0,"div",7)(1,"div",8)(2,"h2",9),B(3,"Create an Account"),M(),O(4,"form",10,0),Ne("ngSubmit",function(){ye(o);let c=Ot(5);return we(i.onRegister(c))}),O(6,"div")(7,"label",11),B(8,"Email"),M(),O(9,"input",12,1),Dt("ngModelChange",function(c){return ye(o),Mt(i.email,c)||(i.email=c),we(c)}),M(),Ie(11,H3,2,0,"div",13),M(),O(12,"div")(13,"label",14),B(14,"First Name"),M(),O(15,"input",15,2),Dt("ngModelChange",function(c){return ye(o),Mt(i.firstName,c)||(i.firstName=c),we(c)}),M(),Ie(17,q3,2,0,"div",13),M(),O(18,"div")(19,"label",16),B(20,"Last Name"),M(),O(21,"input",17,3),Dt("ngModelChange",function(c){return ye(o),Mt(i.lastName,c)||(i.lastName=c),we(c)}),M(),Ie(23,G3,2,0,"div",13),M(),O(24,"div")(25,"label",18),B(26,"Password"),M(),O(27,"input",19,4),Dt("ngModelChange",function(c){return ye(o),Mt(i.password,c)||(i.password=c),we(c)}),M(),Ie(29,W3,2,0,"div",13),M(),O(30,"div")(31,"label",20),B(32,"Confirm Password"),M(),O(33,"input",21,5),Dt("ngModelChange",function(c){return ye(o),Mt(i.confirmPassword,c)||(i.confirmPassword=c),we(c)}),M(),Ie(35,Z3,2,0,"div",13)(36,K3,2,0,"div",13),M(),O(37,"div")(38,"label",22),B(39,"User Type"),M(),O(40,"select",23,6),Dt("ngModelChange",function(c){return ye(o),Mt(i.userType,c)||(i.userType=c),we(c)}),O(42,"option",24),B(43,"Select user type"),M(),O(44,"option",25),B(45,"Hiker"),M(),O(46,"option",26),B(47,"Hiking Club"),M()(),Ie(48,Q3,2,0,"div",13),M(),O(49,"button",27),B(50," Register "),M()(),Ie(51,Y3,2,0,"div",28),Ct(52,"div",29),O(53,"p",30),B(54," Already have an account? "),O(55,"a",31),B(56,"Login"),M()()()()}if(r&2){let o=Ot(10),a=Ot(16),c=Ot(22),d=Ot(28),f=Ot(34),g=Ot(41);H(9),Tt("ngModel",i.email),H(2),te("ngIf",o.invalid&&o.touched),H(4),Tt("ngModel",i.firstName),H(2),te("ngIf",a.invalid&&a.touched),H(4),Tt("ngModel",i.lastName),H(2),te("ngIf",c.invalid&&c.touched),H(4),Tt("ngModel",i.password),H(2),te("ngIf",d.invalid&&d.touched),H(4),Tt("ngModel",i.confirmPassword),H(2),te("ngIf",f.invalid&&f.touched),H(),te("ngIf",i.password!==i.confirmPassword&&f.touched),H(4),Tt("ngModel",i.userType),H(8),te("ngIf",g.invalid&&g.touched),H(3),te("ngIf",i.isLoading)}},dependencies:[vr,os,xc,Mc,Vn,ss,_r,is,va,Lr,_a,zu,ci,Mr,gn]})}}return n})();var J3=n=>["/tour-participants",n];function X3(n,e){if(n&1&&(O(0,"div",9),B(1),M()),n&2){let t=xe(2);H(),Nl("",t.clubProfile.firstName," ",t.clubProfile.lastName,"")}}function eq(n,e){if(n&1){let t=dt();O(0,"div",15)(1,"input",16),Dt("ngModelChange",function(i){ye(t);let o=xe(2);return Mt(o.firstName,i)||(o.firstName=i),we(i)}),M(),O(2,"input",17),Dt("ngModelChange",function(i){ye(t);let o=xe(2);return Mt(o.lastName,i)||(o.lastName=i),we(i)}),M()()}if(n&2){let t=xe(2);H(),Tt("ngModel",t.firstName),H(),Tt("ngModel",t.lastName)}}function tq(n,e){if(n&1){let t=dt();O(0,"button",18),Ne("click",function(){ye(t);let i=xe(2);return we(i.toggleEditMode())}),B(1,"Edit"),M()}}function nq(n,e){if(n&1){let t=dt();O(0,"button",19),Ne("click",function(){ye(t);let i=xe(2);return we(i.saveProfile())}),B(1,"Save"),M()}}function rq(n,e){if(n&1){let t=dt();O(0,"button",20),Ne("click",function(){ye(t);let i=xe(2);return we(i.toggleEditMode())}),B(1,"Cancel"),M()}}function iq(n,e){if(n&1&&(O(0,"li",22)(1,"h3",23),B(2),M(),O(3,"p")(4,"strong"),B(5,"Date:"),M(),B(6),M(),O(7,"p")(8,"strong"),B(9,"Difficulty:"),M(),B(10),M(),O(11,"p")(12,"strong"),B(13,"Participants:"),M(),B(14),M(),O(15,"button",24),B(16,"View Participants"),M()()),n&2){let t=e.$implicit;H(2),it(t.name),H(4),mn(" ",t.date,""),H(4),mn(" ",t.difficulty,""),H(4),mn(" ",t.participants,""),H(),te("routerLink",Su(5,J3,t.id))}}function oq(n,e){if(n&1&&(O(0,"ul"),Ie(1,iq,17,7,"li",21),M()),n&2){let t=xe(2);H(),te("ngForOf",t.tours)}}function sq(n,e){n&1&&(O(0,"p"),B(1,"No tours organized by this club."),M())}function aq(n,e){if(n&1&&(O(0,"div")(1,"div",5)(2,"div",6),B(3,"Name:"),M(),Ie(4,X3,2,2,"div",7)(5,eq,3,2,"div",8),M(),O(6,"div",5)(7,"div",6),B(8,"Email:"),M(),O(9,"div",9),B(10),M()(),O(11,"div",5)(12,"div",6),B(13,"Type:"),M(),O(14,"div",9),B(15),M()(),O(16,"div",10),Ie(17,tq,2,0,"button",11)(18,nq,2,0,"button",12)(19,rq,2,0,"button",13),M(),O(20,"h2",14),B(21,"Organized Tours"),M(),Ie(22,oq,2,1,"ul",4)(23,sq,2,0,"ng-template",null,1,$s),M()),n&2){let t=Ot(24),r=xe();H(4),te("ngIf",!r.editMode),H(),te("ngIf",r.editMode),H(5),it(r.clubProfile.email),H(5),it(r.clubProfile.type),H(2),te("ngIf",!r.editMode),H(),te("ngIf",r.editMode),H(),te("ngIf",r.editMode),H(3),te("ngIf",r.tours.length>0)("ngIfElse",t)}}function uq(n,e){n&1&&(O(0,"p"),B(1,"No profile data available."),M())}var QR=(()=>{class n{constructor(t){this.authService=t,this.clubProfile=null,this.firestore=W(Pn),this.editMode=!1,this.firstName="",this.lastName=""}ngOnInit(){return b(this,null,function*(){let t=this.authService.currentUser;if(t){let r=yield In(At(this.firestore,"users",t.uid));r.exists()?(this.clubProfile=r.data(),this.firstName=this.clubProfile.firstName,this.lastName=this.clubProfile.lastName,yield this.loadTours(t.uid)):console.error("User not found")}else console.error("User is not authenticated")})}toggleEditMode(){this.editMode=!this.editMode}loadTours(t){return b(this,null,function*(){let r=pa(this.firestore,"tours"),i=lR(r,dR("createdBy","==",t)),o=yield Eg(i);this.tours=o.docs.map(a=>{let c=a.data();return c.id=a.id,c})})}saveProfile(){return b(this,null,function*(){this.clubProfile&&(this.clubProfile.firstName=this.firstName,this.clubProfile.lastName=this.lastName,this.authService.updateUserData(this.clubProfile),this.toggleEditMode())})}static{this.\u0275fac=function(r){return new(r||n)(Q(Nt))}}static{this.\u0275cmp=at({type:n,selectors:[["app-profile-club"]],standalone:!0,features:[ut],decls:6,vars:2,consts:[["noProfile",""],["noTours",""],[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],[4,"ngIf","ngIfElse"],[1,"flex","items-center","space-x-4"],[1,"text-lg","font-semibold","text-gray-700"],["class","text-lg text-gray-900",4,"ngIf"],["class","flex space-x-2",4,"ngIf"],[1,"text-lg","text-gray-900"],[1,"flex","justify-end","space-x-4","mt-4"],["class","bg-blue-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-green-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-red-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],[1,"text-xl","font-bold","mt-4"],[1,"flex","space-x-2"],["placeholder","First Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],["placeholder","Last Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],[1,"bg-blue-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-green-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-red-500","text-white","px-4","py-2","rounded",3,"click"],["class","mb-4 p-4 border rounded shadow",4,"ngFor","ngForOf"],[1,"mb-4","p-4","border","rounded","shadow"],[1,"text-lg","font-semibold"],[1,"bg-blue-500","text-white","px-4","py-2","rounded","mt-2",3,"routerLink"]],template:function(r,i){if(r&1&&(O(0,"div",2)(1,"h1",3),B(2,"Club Profile"),M(),Ie(3,aq,25,9,"div",4)(4,uq,2,0,"ng-template",null,0,$s),M()),r&2){let o=Ot(5);H(3),te("ngIf",i.clubProfile)("ngIfElse",o)}},dependencies:[gn,hr,vr,Vn,_r,Lr,ci]})}}return n})();function cq(n,e){if(n&1&&(O(0,"div",9),B(1),M()),n&2){let t=xe(2);H(),Nl("",t.userProfile.firstName," ",t.userProfile.lastName,"")}}function lq(n,e){if(n&1){let t=dt();O(0,"div",14)(1,"input",15),Dt("ngModelChange",function(i){ye(t);let o=xe(2);return Mt(o.firstName,i)||(o.firstName=i),we(i)}),M(),O(2,"input",16),Dt("ngModelChange",function(i){ye(t);let o=xe(2);return Mt(o.lastName,i)||(o.lastName=i),we(i)}),M()()}if(n&2){let t=xe(2);H(),Tt("ngModel",t.firstName),H(),Tt("ngModel",t.lastName)}}function dq(n,e){if(n&1){let t=dt();O(0,"button",17),Ne("click",function(){ye(t);let i=xe(2);return we(i.toggleEditMode())}),B(1,"Edit"),M()}}function hq(n,e){if(n&1){let t=dt();O(0,"button",18),Ne("click",function(){ye(t);let i=xe(2);return we(i.saveProfile())}),B(1,"Save"),M()}}function fq(n,e){if(n&1){let t=dt();O(0,"button",19),Ne("click",function(){ye(t);let i=xe(2);return we(i.toggleEditMode())}),B(1,"Cancel"),M()}}function pq(n,e){if(n&1&&(O(0,"div",4)(1,"div",5)(2,"div",6),B(3,"Name:"),M(),Ie(4,cq,2,2,"div",7)(5,lq,3,2,"div",8),M(),O(6,"div",5)(7,"div",6),B(8,"Email:"),M(),O(9,"div",9),B(10),M()(),O(11,"div",5)(12,"div",6),B(13,"Type:"),M(),O(14,"div",9),B(15),M()(),O(16,"div",10),Ie(17,dq,2,0,"button",11)(18,hq,2,0,"button",12)(19,fq,2,0,"button",13),M()()),n&2){let t=xe();H(4),te("ngIf",!t.editMode),H(),te("ngIf",t.editMode),H(5),it(t.userProfile.email),H(5),it(t.userProfile.type),H(2),te("ngIf",!t.editMode),H(),te("ngIf",t.editMode),H(),te("ngIf",t.editMode)}}function mq(n,e){n&1&&(O(0,"p",20),B(1,"No profile data available."),M())}var YR=(()=>{class n{constructor(t){this.authService=t,this.editMode=!1,this.firstName="",this.lastName=""}ngOnInit(){return b(this,null,function*(){this.authService.userData$.subscribe(t=>{let r=t;r&&(this.userProfile=r),this.firstName=this.userProfile.firstName,this.lastName=this.userProfile.lastName})})}toggleEditMode(){this.editMode=!this.editMode}saveProfile(){return b(this,null,function*(){this.userProfile.firstName=this.firstName,this.userProfile.lastName=this.lastName,this.authService.updateUserData(this.userProfile),this.toggleEditMode()})}static{this.\u0275fac=function(r){return new(r||n)(Q(Nt))}}static{this.\u0275cmp=at({type:n,selectors:[["app-profile-hiker"]],standalone:!0,features:[ut],decls:6,vars:2,consts:[["noProfile",""],[1,"container","mx-auto","p-6","bg-white","shadow-lg","rounded-lg"],[1,"text-3xl","font-bold","text-gray-800","mb-6","text-center"],["class","space-y-4",4,"ngIf","ngIfElse"],[1,"space-y-4"],[1,"flex","items-center","space-x-4"],[1,"text-lg","font-semibold","text-gray-700"],["class","text-lg text-gray-900",4,"ngIf"],["class","flex space-x-2",4,"ngIf"],[1,"text-lg","text-gray-900"],[1,"flex","justify-end","space-x-4"],["class","bg-blue-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-green-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-red-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],[1,"flex","space-x-2"],["placeholder","First Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],["placeholder","Last Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],[1,"bg-blue-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-green-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-red-500","text-white","px-4","py-2","rounded",3,"click"],[1,"text-center","text-gray-500"]],template:function(r,i){if(r&1&&(O(0,"div",1)(1,"h1",2),B(2,"Profile"),M(),Ie(3,pq,20,7,"div",3)(4,mq,2,0,"ng-template",null,0,$s),M()),r&2){let o=Ot(5);H(3),te("ngIf",i.userProfile)("ngIfElse",o)}},dependencies:[gn,vr,Vn,_r,Lr]})}}return n})();var ZE=(n,e)=>{let t=W(Nt),r=W(ht);return t.user$.pipe(Xt(1),me(i=>i?!0:(r.navigate(["/login"]),!1)))};var JR=(()=>{class n{constructor(t,r,i){this.authService=t,this.tourService=r,this.router=i,this.tour={name:"",date:"",description:"",gpxContent:"",difficulty:"easy",participants:0,createdBy:"",createdAt:""},this.gpxFile=null}onFileChange(t){let r=t.target.files[0];r&&(this.gpxFile=r)}onSubmit(){return b(this,null,function*(){if(this.gpxFile){let t=this.authService.currentUser;if(t){let r=new FileReader;r.onload=()=>b(this,null,function*(){let i=r.result;this.tour.gpxContent=i,this.tour.createdBy=t.uid,this.tour.createdAt=new Date().toISOString();try{let o=yield this.tourService.addTour(this.tour);console.log("Tour created with ID:",o.id),this.router.navigate(["/"])}catch(o){console.error("Error adding document:",o)}}),r.readAsText(this.gpxFile)}else console.error("User is not authenticated")}else console.error("GPX file is required")})}static{this.\u0275fac=function(r){return new(r||n)(Q(Nt),Q(Ii),Q(ht))}}static{this.\u0275cmp=at({type:n,selectors:[["app-create-hiking-tour"]],standalone:!0,features:[ut],decls:38,vars:6,consts:[["tourForm","ngForm"],[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],[3,"ngSubmit"],[1,"mb-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","name","name","name","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","date",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","date","name","date","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","description",1,"block","text-sm","font-medium","text-gray-700"],["id","description","name","description","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","gpxFile",1,"block","text-sm","font-medium","text-gray-700"],["type","file","id","gpxFile","name","gpxFile","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"change"],["for","difficulty",1,"block","text-sm","font-medium","text-gray-700"],["id","difficulty","name","difficulty","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["value","easy"],["value","moderate"],["value","hard"],["for","participants",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","participants","name","participants","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"mt-4"],["type","submit",1,"w-full","py-2","px-4","bg-blue-600","text-white","rounded-md","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"disabled"]],template:function(r,i){if(r&1){let o=dt();O(0,"div",1)(1,"h1",2),B(2,"Create Hiking Tour"),M(),O(3,"form",3,0),Ne("ngSubmit",function(){return ye(o),we(i.onSubmit())}),O(5,"div",4)(6,"label",5),B(7,"Tour Name"),M(),O(8,"input",6),Dt("ngModelChange",function(c){return ye(o),Mt(i.tour.name,c)||(i.tour.name=c),we(c)}),M()(),O(9,"div",4)(10,"label",7),B(11,"Date"),M(),O(12,"input",8),Dt("ngModelChange",function(c){return ye(o),Mt(i.tour.date,c)||(i.tour.date=c),we(c)}),M()(),O(13,"div",4)(14,"label",9),B(15,"Description"),M(),O(16,"textarea",10),Dt("ngModelChange",function(c){return ye(o),Mt(i.tour.description,c)||(i.tour.description=c),we(c)}),M()(),O(17,"div",4)(18,"label",11),B(19,"GPX File"),M(),O(20,"input",12),Ne("change",function(c){return ye(o),we(i.onFileChange(c))}),M()(),O(21,"div",4)(22,"label",13),B(23,"Difficulty Level"),M(),O(24,"select",14),Dt("ngModelChange",function(c){return ye(o),Mt(i.tour.difficulty,c)||(i.tour.difficulty=c),we(c)}),O(25,"option",15),B(26,"Easy"),M(),O(27,"option",16),B(28,"Moderate"),M(),O(29,"option",17),B(30,"Hard"),M()()(),O(31,"div",4)(32,"label",18),B(33,"Number of Participants"),M(),O(34,"input",19),Dt("ngModelChange",function(c){return ye(o),Mt(i.tour.participants,c)||(i.tour.participants=c),we(c)}),M()(),O(35,"div",20)(36,"button",21),B(37," Create Tour "),M()()()()}if(r&2){let o=Ot(4);H(8),Tt("ngModel",i.tour.name),H(4),Tt("ngModel",i.tour.date),H(4),Tt("ngModel",i.tour.description),H(8),Tt("ngModel",i.tour.difficulty),H(10),Tt("ngModel",i.tour.participants),H(2),te("disabled",o.invalid)}},dependencies:[Mr,vr,os,xc,Mc,Vn,qE,ss,_r,is,va,Lr,_a]})}}return n})();var KE=(n,e)=>{let t=W(Nt),r=W(ht);return t.userType$.pipe(Xt(1),me(i=>i==="hikingClub"?!0:(r.navigate(["/"]),!1)))};var Rc=ZN(eN());var gq=15e3,YE=1e3,JE=60*YE,Vg=60*JE,QE=24*Vg,_q="http://www.topografix.com/GPX/gpx_style/0/2",Fg=new L.Icon.Default,vq={startIcon:Fg,endIcon:Fg,wptIcons:{"":Fg},wptTypeIcons:{"":Fg},pointMatchers:[]},yq={iconSize:[33,45],iconAnchor:[16,45],clickable:!1},wq={color:"blue"},Iq={parseElements:["track","route","waypoint"],joinTrackSegments:!0};L.GPX=L.FeatureGroup.extend({initialize:function(n,e){e.max_point_interval=e.max_point_interval||gq,e.markers=this._merge_objs(vq,e.markers||{}),e.marker_options=this._merge_objs(yq,e.marker_options||{}),e.polyline_options=e.polyline_options||[],e.gpx_options=this._merge_objs(Iq,e.gpx_options||{}),L.Util.setOptions(this,e),L.GPXTrackIcon=L.Icon.extend({options:e.marker_options}),this._gpx=n,this._layers={},this._prepare_markers(e.markers),this._init_info(),n&&this._parse(n,e,this.options.async)},get_duration_string:function(n,e){var t="";n>=QE&&(t+=Math.floor(n/QE)+"d ",n=n%QE),n>=Vg&&(t+=Math.floor(n/Vg)+":",n=n%Vg);var r=Math.floor(n/JE);n=n%JE,r<10&&(t+="0"),t+=r+"'";var i=Math.floor(n/YE);return n=n%YE,i<10&&(t+="0"),t+=i,!e&&n>0?t+="."+Math.round(Math.floor(n)*1e3)/1e3:t+='"',t},get_duration_string_iso:function(n,e){var t=this.get_duration_string(n,e);return t.replace("'",":").replace('"',"")},to_miles:function(n){return n/1.60934},to_ft:function(n){return n*3.28084},m_to_km:function(n){return n/1e3},m_to_mi:function(n){return n/1609.34},ms_to_kmh:function(n){return n*3.6},ms_to_mih:function(n){return n/1609.34*3600},get_name:function(){return this._info.name},get_desc:function(){return this._info.desc},get_author:function(){return this._info.author},get_copyright:function(){return this._info.copyright},get_distance:function(){return this._info.length},get_distance_imp:function(){return this.to_miles(this.m_to_km(this.get_distance()))},get_start_time:function(){return this._info.duration.start},get_end_time:function(){return this._info.duration.end},get_moving_time:function(){return this._info.duration.moving},get_total_time:function(){return this._info.duration.total},get_moving_pace:function(){return this.get_moving_time()/this.m_to_km(this.get_distance())},get_moving_pace_imp:function(){return this.get_moving_time()/this.get_distance_imp()},get_moving_speed:function(){return this.m_to_km(this.get_distance())/(this.get_moving_time()/(3600*1e3))},get_moving_speed_imp:function(){return this.to_miles(this.m_to_km(this.get_distance()))/(this.get_moving_time()/(3600*1e3))},get_total_speed:function(){return this.m_to_km(this.get_distance())/(this.get_total_time()/(3600*1e3))},get_total_speed_imp:function(){return this.to_miles(this.m_to_km(this.get_distance()))/(this.get_total_time()/(3600*1e3))},get_elevation_gain:function(){return this._info.elevation.gain},get_elevation_loss:function(){return this._info.elevation.loss},get_elevation_gain_imp:function(){return this.to_ft(this.get_elevation_gain())},get_elevation_loss_imp:function(){return this.to_ft(this.get_elevation_loss())},get_elevation_data:function(){var n=this;return this._info.elevation._points.map(function(e){return n._prepare_data_point(e,n.m_to_km,null,function(t,r){return t.toFixed(2)+" km, "+r.toFixed(0)+" m"})})},get_elevation_data_imp:function(){var n=this;return this._info.elevation._points.map(function(e){return n._prepare_data_point(e,n.m_to_mi,n.to_ft,function(t,r){return t.toFixed(2)+" mi, "+r.toFixed(0)+" ft"})})},get_elevation_max:function(){return this._info.elevation.max},get_elevation_min:function(){return this._info.elevation.min},get_elevation_max_imp:function(){return this.to_ft(this.get_elevation_max())},get_elevation_min_imp:function(){return this.to_ft(this.get_elevation_min())},get_speed_data:function(){var n=this;return this._info.speed._points.map(function(e){return n._prepare_data_point(e,n.m_to_km,n.ms_to_kmh,function(t,r){return t.toFixed(2)+" km, "+r.toFixed(2)+" km/h"})})},get_speed_data_imp:function(){var n=this;return this._info.speed._points.map(function(e){return n._prepare_data_point(e,n.m_to_mi,n.ms_to_mih,function(t,r){return t.toFixed(2)+" mi, "+r.toFixed(2)+" mi/h"})})},get_speed_max:function(){return this.m_to_km(this._info.speed.max)*3600},get_speed_max_imp:function(){return this.to_miles(this.get_speed_max())},get_average_hr:function(){return this._info.hr.avg},get_average_temp:function(){return this._info.atemp.avg},get_average_cadence:function(){return this._info.cad.avg},get_heartrate_data:function(){var n=this;return this._info.hr._points.map(function(e){return n._prepare_data_point(e,n.m_to_km,null,function(t,r){return t.toFixed(2)+" km, "+r.toFixed(0)+" bpm"})})},get_heartrate_data_imp:function(){var n=this;return this._info.hr._points.map(function(e){return n._prepare_data_point(e,n.m_to_mi,null,function(t,r){return t.toFixed(2)+" mi, "+r.toFixed(0)+" bpm"})})},get_cadence_data:function(){var n=this;return this._info.cad._points.map(function(e){return n._prepare_data_point(e,n.m_to_km,null,function(t,r){return t.toFixed(2)+" km, "+r.toFixed(0)+" rpm"})})},get_temp_data:function(){var n=this;return this._info.atemp._points.map(function(e){return n._prepare_data_point(e,n.m_to_km,null,function(t,r){return t.toFixed(2)+" km, "+r.toFixed(0)+" degrees"})})},get_cadence_data_imp:function(){var n=this;return this._info.cad._points.map(function(e){return n._prepare_data_point(e,n.m_to_mi,null,function(t,r){return t.toFixed(2)+" mi, "+r.toFixed(0)+" rpm"})})},get_temp_data_imp:function(){var n=this;return this._info.atemp._points.map(function(e){return n._prepare_data_point(e,n.m_to_mi,null,function(t,r){return t.toFixed(2)+" mi, "+r.toFixed(0)+" degrees"})})},reload:function(){this._init_info(),this.clearLayers(),this._parse(this._gpx,this.options,this.options.async)},_merge_objs:function(n,e){var t={};for(var r in n)t[r]=n[r];for(var r in e)t[r]=e[r];return t},_prepare_data_point:function(n,e,t,r){var i=[e&&e(n[0])||n[0],t&&t(n[1])||n[1]];return i.push(r&&r(i[0],i[1])||i[0]+": "+i[1]),i},_prepare_markers:function(n){function e(t){return new L.GPXTrackIcon({iconUrl:t})}return Object.entries(n).forEach(([t,r])=>{t==="wptIcons"||t==="wptTypeIcons"?n[t]=this._prepare_markers(r):t==="pointMatchers"?n[t]=r.map(i=>(typeof i.icon=="string"&&(i.icon=e(i.icon)),i)):typeof r=="string"?n[t]=e(r):typeof r=="object"&&r!==null&&(n[t]=this._prepare_markers(r))}),n},_init_info:function(){this._info={name:null,length:0,elevation:{gain:0,loss:0,max:0,min:1/0,_points:[]},speed:{max:0,_points:[]},hr:{avg:0,_total:0,_points:[]},duration:{start:null,end:null,moving:0,total:0},atemp:{avg:0,_total:0,_points:[]},cad:{avg:0,_total:0,_points:[]}}},_load_xml:function(n,e,t,r){r==null&&(r=this.options.async),t==null&&(t=this.options);var i=this,o=new window.XMLHttpRequest;o.open("GET",n,r);try{o.overrideMimeType("text/xml")}catch{}o.onloadend=function(){o.status==200?e(o.responseXML,t):i.fire("error",{err:"Error fetching resource: "+n})},o.send(null)},_parse:function(n,e,t){var r=this,i=function(a,c){var d=r._parse_gpx_data(a,c);if(!d){r.fire("error",{err:"No parseable layers of type(s) "+JSON.stringify(c.gpx_options.parseElements)});return}r.addLayer(d),r.fire("loaded",{layers:d,element:a})};if(n.substr(0,1)==="<"){var o=new DOMParser;t?setTimeout(function(){i(o.parseFromString(n,"text/xml"),e)}):i(o.parseFromString(n,"text/xml"),e)}else this._load_xml(n,i,e,t)},_parse_gpx_data:function(n,e){var t,r,i,o,a=[],c=n.getElementsByTagName("name");c.length>0&&(this._info.name=c[0].textContent);var d=n.getElementsByTagName("desc");d.length>0&&(this._info.desc=d[0].textContent);var f=n.getElementsByTagName("author");f.length>0&&(this._info.author=f[0].textContent);var g=n.getElementsByTagName("copyright");g.length>0&&(this._info.copyright=g[0].textContent);var y=e.gpx_options.parseElements;if(y.indexOf("route")>-1){var E=n.getElementsByTagName("rte");for(t=0;t<E.length;t++){var C=E[t],V=this._extract_styling(C),z=this._get_polyline_options(e.polyline_options,t);a=a.concat(this._parse_segment(E[t],e,V,z,"rtept"))}}if(y.indexOf("track")>-1){var $=n.getElementsByTagName("trk");for(t=0;t<$.length;t++){var Z=$[t],V=this._extract_styling(Z),z=this._get_polyline_options(e.polyline_options,t);if(e.gpx_options.joinTrackSegments)a=a.concat(this._parse_segment(Z,e,V,z,"trkpt"));else{var ne=Z.getElementsByTagName("trkseg");for(Qe=0;Qe<ne.length;Qe++)a=a.concat(this._parse_segment(ne[Qe],e,V,z,"trkpt"))}}}if(this._info.hr.avg=Math.round(this._info.hr._total/this._info.hr._points.length),this._info.cad.avg=Math.round(this._info.cad._total/this._info.cad._points.length),this._info.atemp.avg=Math.round(this._info.atemp._total/this._info.atemp._points.length),y.indexOf("waypoint")>-1)for(o=n.getElementsByTagName("wpt"),t=0;t<o.length;t++){var se=new L.LatLng(o[t].getAttribute("lat"),o[t].getAttribute("lon")),ce=o[t].getElementsByTagName("name"),c=ce.length>0?ce[0].textContent:"",st=o[t].getElementsByTagName("desc"),d=st.length>0?st[0].textContent:"",he=o[t].getElementsByTagName("sym"),P=he.length>0?he[0].textContent:null,T=o[t].getElementsByTagName("type"),D=T.length>0?T[0].textContent:null,x=e.markers.wptIcons,R=e.markers.wptTypeIcons,N=e.markers.pointMatchers||[],A;if(x&&P&&x[P])A=x[P];else if(R&&D&&R[D])A=R[D];else if(N.length>0){for(var Qe=0;Qe<N.length;Qe++)if(N[Qe].regex.test(c)){A=N[Qe].icon;break}}else x&&x[""]&&(A=x[""]);if(!A){console.log("No waypoint icon could be matched for symKey=%s,typeKey=%s,name=%s on waypoint %o",P,D,c,o[t]);continue}var En=new L.Marker(se,{clickable:e.marker_options.clickable,title:c,icon:A,type:"waypoint"});En.bindPopup("<b>"+c+"</b>"+(d.length>0?"<br>"+d:"")).openPopup(),this.fire("addpoint",{point:En,point_type:"waypoint",element:o[t]}),a.push(En)}if(a.length>1)return new L.FeatureGroup(a);if(a.length==1)return a[0]},_parse_segment:function(n,e,t,r,i){var o=n.getElementsByTagName(i);if(!o.length)return[];for(var a=[],c=[],d=[],f=null,g=0;g<o.length;g++){var y,E=new L.LatLng(o[g].getAttribute("lat"),o[g].getAttribute("lon"));E.meta={time:null,ele:null,hr:null,cad:null,atemp:null,speed:null},y=o[g].getElementsByTagName("time"),y.length>0?E.meta.time=new Date(Date.parse(y[0].textContent)):E.meta.time=new Date("1970-01-01T00:00:00");var C=f!=null?Math.abs(E.meta.time-f.meta.time):0;y=o[g].getElementsByTagName("ele"),y.length>0?E.meta.ele=parseFloat(y[0].textContent):E.meta.ele=f!=null?f.meta.ele:null;var V=f!=null?E.meta.ele-f.meta.ele:0,z=f!=null?this._dist3d(f,E):0;if(y=o[g].getElementsByTagName("speed"),y.length>0?E.meta.speed=parseFloat(y[0].textContent):E.meta.speed=C>0?1e3*z/C:0,y=o[g].getElementsByTagName("name"),y.length>0){for(var $=y[0].textContent,Z=e.markers.pointMatchers||[],ne=0;ne<Z.length;ne++)if(Z[ne].regex.test($)){c.push({label:$,coords:E,icon:Z[ne].icon,element:o[g]});break}}this._info.length+=z,y=o[g].getElementsByTagNameNS("*","hr"),y.length>0&&(E.meta.hr=parseInt(y[0].textContent),this._info.hr._points.push([this._info.length,E.meta.hr]),this._info.hr._total+=E.meta.hr),y=o[g].getElementsByTagNameNS("*","cad"),y.length>0&&(E.meta.cad=parseInt(y[0].textContent),this._info.cad._points.push([this._info.length,E.meta.cad]),this._info.cad._total+=E.meta.cad),y=o[g].getElementsByTagNameNS("*","atemp"),y.length>0&&(E.meta.atemp=parseInt(y[0].textContent),this._info.atemp._points.push([this._info.length,E.meta.atemp]),this._info.atemp._total+=E.meta.atemp),E.meta.ele>this._info.elevation.max&&(this._info.elevation.max=E.meta.ele),E.meta.ele<this._info.elevation.min&&(this._info.elevation.min=E.meta.ele),this._info.elevation._points.push([this._info.length,E.meta.ele]),E.meta.speed>this._info.speed.max&&(this._info.speed.max=E.meta.speed),this._info.speed._points.push([this._info.length,E.meta.speed]),f==null&&this._info.duration.start==null&&(this._info.duration.start=E.meta.time),this._info.duration.end=E.meta.time,this._info.duration.total+=C,C<e.max_point_interval&&(this._info.duration.moving+=C),V>0?this._info.elevation.gain+=V:this._info.elevation.loss+=Math.abs(V),f=E,a.push(E)}var se=new L.Polyline(a,this._extract_styling(n,t,r));if(this.fire("addline",{line:se,element:n}),d.push(se),e.markers.startIcon){var ce=new L.Marker(a[0],{clickable:e.marker_options.clickable,icon:e.markers.startIcon});this.fire("addpoint",{point:ce,point_type:"start",element:o[0]}),d.push(ce)}if(e.markers.endIcon){var ce=new L.Marker(a[a.length-1],{clickable:e.marker_options.clickable,icon:e.markers.endIcon});this.fire("addpoint",{point:ce,point_type:"end",element:o[o.length-1]}),d.push(ce)}for(var g=0;g<c.length;g++){var ce=new L.Marker(c[g].coords,{clickable:e.marker_options.clickable,title:c[g].label,icon:c[g].icon});this.fire("addpoint",{point:ce,point_type:"label",element:c[g].element}),d.push(ce)}return d},_get_polyline_options:function(n,e){return Array.isArray(n)?n[e]||{}:n},_extract_styling:function(n,e,t){var r=this._merge_objs(wq,e),i=n.getElementsByTagNameNS(_q,"line");if(i.length>0){var o=i[0].getElementsByTagName("color");o.length>0&&(r.color="#"+o[0].textContent);var o=i[0].getElementsByTagName("opacity");o.length>0&&(r.opacity=o[0].textContent);var o=i[0].getElementsByTagName("weight");o.length>0&&(r.weight=o[0].textContent);var o=i[0].getElementsByTagName("linecap");o.length>0&&(r.lineCap=o[0].textContent);var o=i[0].getElementsByTagName("linejoin");o.length>0&&(r.lineJoin=o[0].textContent);var o=i[0].getElementsByTagName("dasharray");o.length>0&&(r.dashArray=o[0].textContent);var o=i[0].getElementsByTagName("dashoffset");o.length>0&&(r.dashOffset=o[0].textContent)}return this._merge_objs(r,t)},_dist2d:function(n,e){var t=6371e3,r=this._deg2rad(e.lat-n.lat),i=this._deg2rad(e.lng-n.lng),o=Math.sin(r/2)*Math.sin(r/2)+Math.cos(this._deg2rad(n.lat))*Math.cos(this._deg2rad(e.lat))*Math.sin(i/2)*Math.sin(i/2),a=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),c=t*a;return c},_dist3d:function(n,e){var t=this._dist2d(n,e),r=Math.abs(e.meta.ele-n.meta.ele);return Math.sqrt(Math.pow(t,2)+Math.pow(r,2))},_deg2rad:function(n){return n*Math.PI/180}});var tN=(()=>{class n{constructor(){}ngOnInit(){return b(this,null,function*(){})}ngAfterViewInit(){this.initializeMap(),this.loadGpxContent(this.gpxContent)}initializeMap(){this.map=Rc.map("map",{center:[39.8282,-98.5795],zoom:3}),Rc.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,minZoom:3,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(this.map)}loadGpxContent(t){let r=new Rc.GPX(t,{async:!0,marker_options:void 0}).on("loaded",i=>{this.map.fitBounds(i.target.getBounds())}).addTo(this.map)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=at({type:n,selectors:[["app-map"]],inputs:{gpxContent:"gpxContent"},standalone:!0,features:[ut],decls:1,vars:0,consts:[["id","map"]],template:function(r,i){r&1&&Ct(0,"div",0)},styles:["#map[_ngcontent-%COMP%]{height:600px;width:800px}"]})}}return n})();var Eq=(n,e)=>({"bg-gray-400 cursor-not-allowed":n,"bg-blue-600 hover:bg-blue-700":e});function bq(n,e){if(n&1){let t=dt();O(0,"button",6),Ne("click",function(){ye(t);let i=xe(2);return we(i.applyForTour())}),B(1," Apply for the Tour "),M()}if(n&2){let t=xe(2);te("disabled",t.hasApplied)("ngClass",oS(2,Eq,t.hasApplied,!t.hasApplied))}}function Cq(n,e){if(n&1&&(O(0,"div")(1,"h2",3),B(2),M(),O(3,"p")(4,"strong"),B(5,"Date:"),M(),B(6),M(),O(7,"p")(8,"strong"),B(9,"Description:"),M(),B(10),M(),O(11,"p")(12,"strong"),B(13,"Difficulty:"),M(),B(14),M(),O(15,"p")(16,"strong"),B(17,"Participants:"),M(),B(18),M(),Ie(19,bq,2,5,"button",4),Ct(20,"app-map",5),M()),n&2){let t=xe();H(2),it(t.tour.name),H(4),mn(" ",t.tour.date,""),H(4),mn(" ",t.tour.description,""),H(4),mn(" ",t.tour.difficulty,""),H(4),mn(" ",t.tour.participants,""),H(),te("ngIf",t.isHiker),H(),te("gpxContent",t.tour.gpxContent)}}var nN=(()=>{class n{constructor(t,r,i,o){this.route=t,this.tourService=r,this.authService=i,this.router=o,this.isHiker=!1,this.hasApplied=!1}ngOnInit(){return b(this,null,function*(){let t=this.route.snapshot.paramMap.get("id");t?yield this.loadTour(t):this.router.navigate(["/"]),this.authService.user$.subscribe(r=>b(this,null,function*(){let i=r?.uid;i&&(this.userId=i,this.hasApplied=yield this.checkIfUserHasApplied(this.tour.id,this.userId))})),this.authService.userType$.subscribe(r=>{r==="hiker"&&(this.isHiker=!0)})})}loadTour(t){return b(this,null,function*(){let r=(yield this.tourService.loadTour(t))??null;r?this.tour=r:this.router.navigate(["/"])})}applyForTour(){return b(this,null,function*(){let t=this.authService.currentUser;t?(yield this.tourService.applyForTour(this.tour.id,this.tour.createdBy,t.uid),this.hasApplied=!0):this.router.navigate(["/"])})}checkIfUserHasApplied(t,r){return b(this,null,function*(){return this.tourService.hasUserApplied(t,r)})}static{this.\u0275fac=function(r){return new(r||n)(Q(pr),Q(Ii),Q(Nt),Q(ht))}}static{this.\u0275cmp=at({type:n,selectors:[["app-tour-details"]],standalone:!0,features:[ut],decls:4,vars:1,consts:[[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],[4,"ngIf"],[1,"text-xl","font-semibold"],["class","mt-2 mb-2 py-2 px-4 text-white rounded focus:outline-none focus:ring-2 focus:ring-blue-500",3,"disabled","ngClass","click",4,"ngIf"],[3,"gpxContent"],[1,"mt-2","mb-2","py-2","px-4","text-white","rounded","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"click","disabled","ngClass"]],template:function(r,i){r&1&&(O(0,"div",0)(1,"h1",1),B(2,"Tour Details"),M(),Ie(3,Cq,21,7,"div",2),M()),r&2&&(H(3),te("ngIf",i.tour))},dependencies:[gn,Sp,tN]})}}return n})();var rN=(()=>{class n{constructor(){this.firestore=W(Pn)}loadUserData(t){let r=At(this.firestore,`users/${t}`);return In(r).then(i=>{if(i.exists())return i.data();throw new Error("User not found")})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Dq(n,e){if(n&1){let t=dt();O(0,"td",8)(1,"button",10),Ne("click",function(){ye(t);let i=xe().$implicit,o=xe();return we(o.acceptApplication(i))}),B(2,"Accept"),M(),O(3,"button",11),Ne("click",function(){ye(t);let i=xe().$implicit,o=xe();return we(o.rejectApplication(i))}),B(4,"Reject"),M()()}}function Sq(n,e){if(n&1&&(O(0,"tr")(1,"td",8),B(2),M(),O(3,"td",8),B(4),M(),O(5,"td",8),B(6),M(),O(7,"td",8),B(8),M(),Ie(9,Dq,5,0,"td",9),M()),n&2){let t=e.$implicit;H(2),it(t.userData.firstName),H(2),it(t.userData.lastName),H(2),it(t.userData.email),H(2),it(t.status),H(),te("ngIf",t.status!="canceled")}}var iN=(()=>{class n{constructor(t,r,i,o,a){this.route=t,this.tourService=r,this.userService=i,this.notificationService=o,this.router=a}ngOnInit(){return b(this,null,function*(){let t=this.route.snapshot.paramMap.get("id");t?(this.tourId=t,yield this.loadTour(t),this.applications=yield this.loadApplications()):this.router.navigate(["/"])})}loadTour(t){return b(this,null,function*(){let r=(yield this.tourService.loadTour(t))??null;r?this.tour=r:this.router.navigate(["/"])})}loadApplications(){return b(this,null,function*(){if(this.tour.id){let t=yield this.tourService.loadAllApplications(this.tour.id);return t=yield this.processApplication(t),t}else throw new Error("Tour ID is missing")})}processApplication(t){return b(this,null,function*(){for(let r of t){let i=yield this.userService.loadUserData(r.id);r.userData=i}return t})}rejectApplication(t){return b(this,null,function*(){yield this.tourService.rejectApplication(this.tourId,t.id),this.notificationService.sendNotification(t.id,"statusUpdate",`Your application for ${this.tour.name} has been rejected`),this.applications=yield this.loadApplications()})}acceptApplication(t){return b(this,null,function*(){yield this.tourService.acceptApplication(this.tourId,t.id),this.notificationService.sendNotification(t.id,"statusUpdate",`Your application for ${this.tour.name} has been accepted`),this.applications=yield this.loadApplications()})}static{this.\u0275fac=function(r){return new(r||n)(Q(pr),Q(Ii),Q(rN),Q(bc),Q(ht))}}static{this.\u0275cmp=at({type:n,selectors:[["app-tour-participants"]],standalone:!0,features:[ut],decls:36,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-6","mb-6","m-6"],[1,"text-3xl","font-bold","mb-4"],[1,"text-xl","font-semibold","mb-1"],[1,"text-gray-700"],[1,"text-2xl","font-bold","mb-4"],[1,"min-w-full","bg-white"],[1,"py-2","px-4","border-b","border-gray-200","text-left"],[4,"ngFor","ngForOf"],[1,"py-2","px-4","border-b","border-gray-200"],["class","py-2 px-4 border-b border-gray-200",4,"ngIf"],[1,"bg-green-500","text-white","px-4","py-2","rounded","mr-2",3,"click"],[1,"bg-red-500","text-white","px-4","py-2","rounded",3,"click"]],template:function(r,i){r&1&&(O(0,"div",0)(1,"h2",1),B(2),M(),O(3,"div")(4,"h3",2),B(5,"Description"),M(),O(6,"p",3),B(7),M()(),O(8,"div")(9,"h3",2),B(10,"Difficulty"),M(),O(11,"p",3),B(12),M()(),O(13,"div")(14,"h3",2),B(15,"Date"),M(),O(16,"p",3),B(17),M()()(),O(18,"div",0)(19,"h3",4),B(20,"Application Status"),M(),O(21,"table",5)(22,"thead")(23,"tr")(24,"th",6),B(25,"First Name"),M(),O(26,"th",6),B(27,"Last Name"),M(),O(28,"th",6),B(29,"E-mail"),M(),O(30,"th",6),B(31,"Status"),M(),O(32,"th",6),B(33,"Actions"),M()()(),O(34,"tbody"),Ie(35,Sq,10,5,"tr",7),M()()()),r&2&&(H(2),it(i.tour.name),H(5),it(i.tour.description),H(5),it(i.tour.difficulty),H(5),it(i.tour.date),H(18),te("ngForOf",i.applications))},dependencies:[hr,gn]})}}return n})();var Aq=()=>[1,2,3,4,5];function xq(n,e){if(n&1&&(O(0,"option",11),B(1),M()),n&2){let t=e.$implicit;te("value",t),H(),it(t)}}var oN=(()=>{class n{constructor(t){this.fb=t,this.reviewSubmitted=new wt,this.reviewForm=this.fb.group({review:["",ma.required],rating:[null,[ma.required,ma.min(1),ma.max(5)]]})}submitReview(){this.reviewForm.valid&&this.reviewSubmitted.emit(Y({tourId:this.tourId},this.reviewForm.value))}static{this.\u0275fac=function(r){return new(r||n)(Q(GR))}}static{this.\u0275cmp=at({type:n,selectors:[["app-review-modal"]],inputs:{tourId:"tourId"},outputs:{reviewSubmitted:"reviewSubmitted"},standalone:!0,features:[ut],decls:17,vars:4,consts:[[1,"fixed","inset-0","flex","items-center","justify-center","bg-gray-800","bg-opacity-75"],[1,"bg-white","p-8","rounded-lg","shadow-lg","w-1/2"],[1,"text-2xl","font-bold","mb-6"],[3,"ngSubmit","formGroup"],[1,"mb-6"],[1,"block","text-gray-700","text-lg"],["formControlName","review","rows","5",1,"w-full","p-3","border","rounded"],["formControlName","rating",1,"w-full","p-3","border","rounded"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-end"],["type","submit",1,"bg-blue-600","text-white","px-6","py-3","rounded","hover:bg-blue-700",3,"disabled"],[3,"value"]],template:function(r,i){r&1&&(O(0,"div",0)(1,"div",1)(2,"h2",2),B(3,"Submit Review"),M(),O(4,"form",3),Ne("ngSubmit",function(){return i.submitReview()}),O(5,"div",4)(6,"label",5),B(7,"Review"),M(),Ct(8,"textarea",6),M(),O(9,"div",4)(10,"label",5),B(11,"Rating"),M(),O(12,"select",7),Ie(13,xq,2,2,"option",8),M()(),O(14,"div",9)(15,"button",10),B(16,"Submit"),M()()()()()),r&2&&(H(4),te("formGroup",i.reviewForm),H(9),te("ngForOf",iS(3,Aq)),H(2),te("disabled",!i.reviewForm.valid))},dependencies:[vr,os,xc,Mc,Vn,ss,_r,is,WR,GE,WE,hr]})}}return n})();function Mq(n,e){if(n&1){let t=dt();O(0,"button",14),Ne("click",function(){ye(t);let i=xe().$implicit,o=xe();return we(o.cancelApplication(i.id))}),B(1," Cancel "),M()}}function Pq(n,e){if(n&1){let t=dt();O(0,"button",15),Ne("click",function(){ye(t);let i=xe().$implicit,o=xe();return we(o.openReviewModal(i.id))}),B(1," Review "),M()}}function Rq(n,e){if(n&1&&(O(0,"tr")(1,"td",11),B(2),M(),O(3,"td",11),B(4),M(),O(5,"td",11),B(6),M(),O(7,"td",11),Ie(8,Mq,2,0,"button",12)(9,Pq,2,0,"button",13),M()()),n&2){let t=e.$implicit,r=xe();H(2),it(t.name),H(2),it(t.date),H(2),it(t.application.status),H(2),te("ngIf",!r.isPastTour(t.date)&&t.application.status==="accepted"),H(),te("ngIf",r.isPastTour(t.date)&&!t.hasReviewed&&t.application.status==="accepted")}}function Nq(n,e){if(n&1){let t=dt();O(0,"app-review-modal",16),Ne("reviewSubmitted",function(i){ye(t);let o=xe();return we(o.handleReviewSubmission(i))}),M()}if(n&2){let t=xe();te("tourId",t.selectedTourId)}}var sN=(()=>{class n{constructor(t,r){this.tourService=t,this.authService=r,this.tours=[],this.showReviewModal=!1}ngOnInit(){return b(this,null,function*(){this.authService.user$.subscribe(t=>b(this,null,function*(){t&&this.loadToursUserAppliedFor()}))})}cancelApplication(t){this.tourService.cancelApplication(t,this.authService.currentUser?.uid),this.loadToursUserAppliedFor()}loadToursUserAppliedFor(){return b(this,null,function*(){this.authService.currentUser&&(this.tours=yield this.tourService.getToursUserAppliedFor(this.authService.currentUser.uid))})}openReviewModal(t){this.selectedTourId=t,this.showReviewModal=!0}isPastTour(t){return new Date(t)<new Date}closeReviewModal(){this.showReviewModal=!1}handleReviewSubmission(t){return b(this,null,function*(){this.authService.currentUser&&(yield this.tourService.saveReview(t.tourId,this.authService.currentUser.uid,t.review,t.rating),this.loadToursUserAppliedFor()),this.closeReviewModal()})}static{this.\u0275fac=function(r){return new(r||n)(Q(Ii),Q(Nt))}}static{this.\u0275cmp=at({type:n,selectors:[["app-my-tours"]],standalone:!0,features:[ut],decls:19,vars:2,consts:[[1,"p-4"],[1,"bg-white","shadow","overflow-hidden","sm:rounded-lg"],[1,"px-4","py-5","sm:px-6"],[1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"border-t","border-gray-200"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],[3,"tourId","reviewSubmitted",4,"ngIf"],[1,"px-6","py-4","whitespace-nowrap"],["class","mt-2 py-2 px-4 bg-red-600 text-white rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",3,"click",4,"ngIf"],["class","mt-2 py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",3,"click",4,"ngIf"],[1,"mt-2","py-2","px-4","bg-red-600","text-white","rounded","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500",3,"click"],[1,"mt-2","py-2","px-4","bg-blue-600","text-white","rounded","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"click"],[3,"reviewSubmitted","tourId"]],template:function(r,i){r&1&&(O(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),B(4,"My Tours"),M()(),O(5,"div",4)(6,"table",5)(7,"thead",6)(8,"tr")(9,"th",7),B(10,"Tour Name"),M(),O(11,"th",7),B(12,"Date"),M(),O(13,"th",7),B(14,"Status"),M(),Ct(15,"th",7),M()(),O(16,"tbody",8),Ie(17,Rq,10,5,"tr",9),M()()()()(),Ie(18,Nq,1,1,"app-review-modal",10)),r&2&&(H(17),te("ngForOf",i.tours),H(),te("ngIf",i.showReviewModal))},dependencies:[hr,gn,oN]})}}return n})();var aN=(n,e)=>{let t=W(Nt),r=W(ht);return t.userType$.pipe(Xt(1),me(i=>i==="hiker"?!0:(r.navigate(["/"]),!1)))};var uN=[{path:"",component:hR},{path:"login",component:ZR},{path:"register",component:KR},{path:"profile-club",component:QR,canActivate:[ZE]},{path:"profile-hiker",component:YR,canActivate:[ZE]},{path:"create-hiking-tour",component:JR,canActivate:[KE]},{path:"tour-details/:id",component:nN},{path:"tour-participants/:id",component:iN,canActivate:[KE]},{path:"my-tours",component:sN,canActivate:[aN]}];var cN={apiKey:"AIzaSyCu5CPQCRQ7_qsOst9yUHo9_VXxDZ7RQv0",authDomain:"master-b6858.firebaseapp.com",projectId:"master-b6858",storageBucket:"master-b6858.firebasestorage.app",messagingSenderId:"21300314672",appId:"1:21300314672:web:8cd1730aa552dff5f3e3f5"};var lN={providers:[ix(()=>em(cN)),eM(()=>nM()),sR(()=>cR()),hS({eventCoalescing:!0}),TA(uN)]};var kq=n=>({"font-bold":n});function Oq(n,e){n&1&&(O(0,"li")(1,"a",15),B(2,"Create Hiking Tour"),M()())}function Lq(n,e){if(n&1&&(Pl(0),Ie(1,Oq,3,0,"li",6),Rl()),n&2){let t=e.ngIf;H(),te("ngIf",t==="hikingClub")}}function Fq(n,e){n&1&&(O(0,"li")(1,"a",16),B(2,"My Tours"),M()())}function Vq(n,e){if(n&1&&(Pl(0),Ie(1,Fq,3,0,"li",6),Rl()),n&2){let t=e.ngIf;H(),te("ngIf",t==="hiker")}}function Bq(n,e){n&1&&Ct(0,"span",17)}function Uq(n,e){if(n&1){let t=dt();O(0,"li",20)(1,"p",21),Ne("click",function(){let i=ye(t).$implicit,o=xe(3);return we(o.markAsRead(i))}),B(2),M()()}if(n&2){let t=e.$implicit;H(),te("ngClass",Su(2,kq,!t.read)),H(),it(t.message)}}function jq(n,e){if(n&1&&(O(0,"div",18)(1,"ul"),Ie(2,Uq,3,4,"li",19),M()()),n&2){let t=xe(2);H(2),te("ngForOf",t.notifications)}}function $q(n,e){if(n&1){let t=dt();Pl(0),Ie(1,Lq,2,1,"ng-container",6),Au(2,"async"),Ie(3,Vq,2,1,"ng-container",6),Au(4,"async"),O(5,"li")(6,"a",7),Ne("click",function(){ye(t);let i=xe();return we(i.goToProfile())}),B(7,"Profile"),M()(),O(8,"li",8)(9,"button",7),Ne("click",function(){ye(t);let i=xe();return we(i.toggleNotifications())}),GT(),O(10,"svg",9),Ct(11,"path",10),M(),Ie(12,Bq,1,0,"span",11),M(),WT(),Ct(13,"i",12),Ie(14,jq,3,1,"div",13),M(),O(15,"li")(16,"a",14),Ne("click",function(){ye(t);let i=xe();return we(i.logout())}),B(17,"Logout"),M()(),Rl()}if(n&2){let t=xe();H(),te("ngIf",xu(2,4,t.userType$)),H(2),te("ngIf",xu(4,6,t.userType$)),H(9),te("ngIf",t.unreadNotficationsMarker),H(2),te("ngIf",t.showNotifications)}}function zq(n,e){n&1&&(O(0,"li")(1,"a",22),B(2,"Login"),M()(),O(3,"li")(4,"a",23),B(5,"Register"),M()())}var dN=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.notificationService=i,this.user=null,this.notifications=[],this.showNotifications=!1,this.unreadNotficationsMarker=!1,this.user$=this.authService.user$,this.user$.subscribe(o=>{o&&(this.user=o)}),this.userType$=this.authService.userType$,this.userData$=this.authService.userData$,this.userData$.subscribe(o=>{o&&o.notifications&&(this.notifications=o.notifications,this.unreadNotficationsMarker=this.notifications.some(a=>!a.read))})}ngOnInit(){}logout(){return b(this,null,function*(){yield this.authService.logout(),this.router.navigate(["/"])})}goToProfile(){this.userType$.pipe(Xt(1)).subscribe(t=>{t==="hiker"?this.router.navigate(["/profile-hiker"]):t==="hikingClub"&&this.router.navigate(["/profile-club"])})}toggleNotifications(){this.showNotifications=!this.showNotifications}markAsRead(t){return b(this,null,function*(){let r=this.notifications.findIndex(i=>i.createdAt===t.createdAt);yield this.notificationService.markAsRead(this.user.uid,r),t.read=!0,this.unreadNotficationsMarker=this.notifications.some(i=>!i.read)})}static{this.\u0275fac=function(r){return new(r||n)(Q(Nt),Q(ht),Q(bc))}}static{this.\u0275cmp=at({type:n,selectors:[["app-navbar"]],standalone:!0,features:[ut],decls:10,vars:4,consts:[["loggedOut",""],[1,"bg-gray-800","p-4"],[1,"flex","items-center","space-x-4","w-full"],["routerLink","/",1,"text-white","text-lg","hover:text-gray-400"],[1,"flex-grow"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"text-white","hover:text-gray-400",3,"click"],[1,"relative"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],["class","animate-ping absolute top-1 right-0.5 block h-1 w-1 rounded-full ring-2 ring-green-400 bg-green-600",4,"ngIf"],[1,"fa-solid","fa-bell"],["class","absolute right-0 mt-2 w-64 bg-white shadow-lg rounded-lg",4,"ngIf"],[1,"text-white","hover:text-gray-400","cursor-pointer",3,"click"],["routerLink","/create-hiking-tour",1,"text-white","hover:text-gray-400"],["routerLink","/my-tours",1,"text-white","hover:text-gray-400"],[1,"animate-ping","absolute","top-1","right-0.5","block","h-1","w-1","rounded-full","ring-2","ring-green-400","bg-green-600"],[1,"absolute","right-0","mt-2","w-64","bg-white","shadow-lg","rounded-lg"],["class","p-4 border-b",4,"ngFor","ngForOf"],[1,"p-4","border-b"],[3,"click","ngClass"],["routerLink","/login",1,"text-white","hover:text-gray-400"],["routerLink","/register",1,"text-white","hover:text-gray-400"]],template:function(r,i){if(r&1&&(O(0,"nav",1)(1,"ul",2)(2,"li")(3,"a",3),B(4,"Hiking Platform"),M()(),Ct(5,"li",4),Ie(6,$q,18,8,"ng-container",5),Au(7,"async"),Ie(8,zq,6,0,"ng-template",null,0,$s),M()()),r&2){let o=Ot(9);H(6),te("ngIf",xu(7,2,i.user$))("ngIfElse",o)}},dependencies:[zu,ci,Mr,Sp,hr,gn,Ap]})}}return n})();var hN=(()=>{class n{constructor(){this.title="master"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=at({type:n,selectors:[["app-root"]],standalone:!0,features:[ut],decls:2,vars:0,template:function(r,i){r&1&&Ct(0,"app-navbar")(1,"router-outlet")},dependencies:[ow,dN]})}}return n})();OS(hN,lN).catch(n=>console.error(n));
