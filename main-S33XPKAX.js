var HR=Object.defineProperty,qR=Object.defineProperties;var zR=Object.getOwnPropertyDescriptors;var VI=Object.getOwnPropertySymbols,GR=Object.getPrototypeOf,WR=Object.prototype.hasOwnProperty,KR=Object.prototype.propertyIsEnumerable,QR=Reflect.get;var LI=(n,e,t)=>e in n?HR(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L=(n,e)=>{for(var t in e||={})WR.call(e,t)&&LI(n,t,e[t]);if(VI)for(var t of VI(e))KR.call(e,t)&&LI(n,t,e[t]);return n},ce=(n,e)=>qR(n,zR(e));var Pr=(n,e,t)=>QR(GR(n),t,e);var m=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});function UI(n,e){return Object.is(n,e)}var it=null,xu=!1,Ru=1,nr=Symbol("SIGNAL");function Ie(n){let e=it;return it=n,e}function jI(){return it}var Ia={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Yf(n){if(xu)throw new Error("");if(it===null)return;it.consumerOnSignalRead(n);let e=it.nextProducerIndex++;if(Ou(it),e<it.producerNode.length&&it.producerNode[e]!==n&&wa(it)){let t=it.producerNode[e];Pu(t,it.producerIndexOfThis[e])}it.producerNode[e]!==n&&(it.producerNode[e]=n,it.producerIndexOfThis[e]=wa(it)?qI(n,it,e):0),it.producerLastReadVersion[e]=n.version}function YR(){Ru++}function BI(n){if(!(wa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ru)){if(!n.producerMustRecompute(n)&&!Jf(n)){n.dirty=!1,n.lastCleanEpoch=Ru;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Ru}}function $I(n){if(n.liveConsumerNode===void 0)return;let e=xu;xu=!0;try{for(let t of n.liveConsumerNode)t.dirty||ZR(t)}finally{xu=e}}function HI(){return it?.consumerAllowSignalWrites!==!1}function ZR(n){n.dirty=!0,$I(n),n.consumerMarkedDirty?.(n)}function Nu(n){return n&&(n.nextProducerIndex=0),Ie(n)}function Zf(n,e){if(Ie(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(wa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Pu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Jf(n){Ou(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(BI(t),r!==t.version))return!0}return!1}function Xf(n){if(Ou(n),wa(n))for(let e=0;e<n.producerNode.length;e++)Pu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function qI(n,e,t){if(zI(n),n.liveConsumerNode.length===0&&GI(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=qI(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Pu(n,e){if(zI(n),n.liveConsumerNode.length===1&&GI(n))for(let r=0;r<n.producerNode.length;r++)Pu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ou(i),i.producerIndexOfThis[r]=e}}function wa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ou(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function zI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function GI(n){return n.producerNode!==void 0}function WI(n){let e=Object.create(JR);e.computation=n;let t=()=>{if(BI(e),Yf(e),e.value===Mu)throw e.error;return e.value};return t[nr]=e,t}var Kf=Symbol("UNSET"),Qf=Symbol("COMPUTING"),Mu=Symbol("ERRORED"),JR=ce(L({},Ia),{value:Kf,dirty:!0,error:null,equal:UI,producerMustRecompute(n){return n.value===Kf||n.value===Qf},producerRecomputeValue(n){if(n.value===Qf)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Qf;let t=Nu(n),r;try{r=n.computation()}catch(i){r=Mu,n.error=i}finally{Zf(n,t)}if(e!==Kf&&e!==Mu&&r!==Mu&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function XR(){throw new Error}var KI=XR;function QI(){KI()}function YI(n){KI=n}var eM=null;function ZI(n){let e=Object.create(XI);e.value=n;let t=()=>(Yf(e),e.value);return t[nr]=e,t}function ep(n,e){HI()||QI(),n.equal(n.value,e)||(n.value=e,tM(n))}function JI(n,e){HI()||QI(),ep(n,e(n.value))}var XI=ce(L({},Ia),{equal:UI,value:void 0});function tM(n){n.version++,YR(),$I(n),eM?.()}function ie(n){return typeof n=="function"}function wo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ku=wo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Di(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var He=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ie(r))try{r()}catch(o){e=o instanceof ku?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{eE(o)}catch(s){e=e??[],s instanceof ku?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ku(e)}}add(e){var t;if(e&&e!==this)if(this.closed)eE(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Di(t,e)}remove(e){let{_finalizers:t}=this;t&&Di(t,e),e instanceof n&&e._removeParent(this)}};He.EMPTY=(()=>{let n=new He;return n.closed=!0,n})();var tp=He.EMPTY;function Fu(n){return n instanceof He||n&&"closed"in n&&ie(n.remove)&&ie(n.add)&&ie(n.unsubscribe)}function eE(n){ie(n)?n():n.unsubscribe()}var un={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Io={setTimeout(n,e,...t){let{delegate:r}=Io;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Io;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Vu(n){Io.setTimeout(()=>{let{onUnhandledError:e}=un;if(e)e(n);else throw n})}function Ea(){}var tE=np("C",void 0,void 0);function nE(n){return np("E",void 0,n)}function rE(n){return np("N",n,void 0)}function np(n,e,t){return{kind:n,value:e,error:t}}var Ci=null;function Eo(n){if(un.useDeprecatedSynchronousErrorHandling){let e=!Ci;if(e&&(Ci={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ci;if(Ci=null,t)throw r}}else n()}function iE(n){un.useDeprecatedSynchronousErrorHandling&&Ci&&(Ci.errorThrown=!0,Ci.error=n)}var bi=class extends He{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Fu(e)&&e.add(this)):this.destination=iM}static create(e,t,r){return new Do(e,t,r)}next(e){this.isStopped?ip(rE(e),this):this._next(e)}error(e){this.isStopped?ip(nE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ip(tE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},nM=Function.prototype.bind;function rp(n,e){return nM.call(n,e)}var op=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Lu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Lu(r)}else Lu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Lu(t)}}},Do=class extends bi{constructor(e,t,r){super();let i;if(ie(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&un.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&rp(e.next,o),error:e.error&&rp(e.error,o),complete:e.complete&&rp(e.complete,o)}):i=e}this.destination=new op(i)}};function Lu(n){un.useDeprecatedSynchronousErrorHandling?iE(n):Vu(n)}function rM(n){throw n}function ip(n,e){let{onStoppedNotification:t}=un;t&&Io.setTimeout(()=>t(n,e))}var iM={closed:!0,next:Ea,error:rM,complete:Ea};var Co=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Bt(n){return n}function Uu(...n){return sp(n)}function sp(n){return n.length===0?Bt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ge=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=sM(t)?t:new Do(t,r,i);return Eo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=oE(r),new r((i,o)=>{let s=new Do({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Co](){return this}pipe(...t){return sp(t)(this)}toPromise(t){return t=oE(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function oE(n){var e;return(e=n??un.Promise)!==null&&e!==void 0?e:Promise}function oM(n){return n&&ie(n.next)&&ie(n.error)&&ie(n.complete)}function sM(n){return n&&n instanceof bi||oM(n)&&Fu(n)}function ap(n){return ie(n?.lift)}function _e(n){return e=>{if(ap(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function me(n,e,t,r,i){return new cp(n,e,t,r,i)}var cp=class extends bi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function bo(){return _e((n,e)=>{let t=null;n._refCount++;let r=me(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var To=class extends ge{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ap(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new He;let t=this.getSubject();e.add(this.source.subscribe(me(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=He.EMPTY)}return e}refCount(){return bo()(this)}};var sE=wo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var at=(()=>{class n extends ge{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new ju(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new sE}next(t){Eo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Eo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Eo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?tp:(this.currentObservers=null,o.push(t),new He(()=>{this.currentObservers=null,Di(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ge;return t.source=this,t}}return n.create=(e,t)=>new ju(e,t),n})(),ju=class extends at{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:tp}};var Ge=class extends at{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var up={now(){return(up.delegate||Date).now()},delegate:void 0};var Bu=class extends He{constructor(e,t){super()}schedule(e,t=0){return this}};var Da={setInterval(n,e,...t){let{delegate:r}=Da;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Da;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var So=class extends Bu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Da.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Da.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Di(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ao=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ao.now=up.now;var xo=class extends Ao{constructor(e,t=Ao.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var lp=new xo(So);var $u=class extends So{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Hu=class extends xo{};var dp=new Hu($u);var $t=new ge(n=>n.complete());function aE(n){return n&&ie(n.schedule)}function cE(n){return n[n.length-1]}function qu(n){return ie(cE(n))?n.pop():void 0}function Or(n){return aE(cE(n))?n.pop():void 0}function hp(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function lE(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function uE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ti(n){return this instanceof Ti?(this.v=n,this):new Ti(n)}function dE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(_){return function(S){return Promise.resolve(S).then(_,p)}}function a(_,S){r[_]&&(i[_]=function(O){return new Promise(function(M,j){o.push([_,O,M,j])>1||u(_,O)})},S&&(i[_]=S(i[_])))}function u(_,S){try{l(r[_](S))}catch(O){y(o[0][3],O)}}function l(_){_.value instanceof Ti?Promise.resolve(_.value.v).then(h,p):y(o[0][2],_)}function h(_){u("next",_)}function p(_){u("throw",_)}function y(_,S){_(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function hE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof uE=="function"?uE(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var zu=n=>n&&typeof n.length=="number"&&typeof n!="function";function Gu(n){return ie(n?.then)}function Wu(n){return ie(n[Co])}function Ku(n){return Symbol.asyncIterator&&ie(n?.[Symbol.asyncIterator])}function Qu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function aM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Yu=aM();function Zu(n){return ie(n?.[Yu])}function Ju(n){return dE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ti(t.read());if(i)return yield Ti(void 0);yield yield Ti(r)}}finally{t.releaseLock()}})}function Xu(n){return ie(n?.getReader)}function Ke(n){if(n instanceof ge)return n;if(n!=null){if(Wu(n))return cM(n);if(zu(n))return uM(n);if(Gu(n))return lM(n);if(Ku(n))return fE(n);if(Zu(n))return dM(n);if(Xu(n))return hM(n)}throw Qu(n)}function cM(n){return new ge(e=>{let t=n[Co]();if(ie(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function uM(n){return new ge(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function lM(n){return new ge(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Vu)})}function dM(n){return new ge(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function fE(n){return new ge(e=>{fM(n,e).catch(t=>e.error(t))})}function hM(n){return fE(Ju(n))}function fM(n,e){var t,r,i,o;return lE(this,void 0,void 0,function*(){try{for(t=hE(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Vt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function kr(n,e=0){return _e((t,r)=>{t.subscribe(me(r,i=>Vt(r,n,()=>r.next(i),e),()=>Vt(r,n,()=>r.complete(),e),i=>Vt(r,n,()=>r.error(i),e)))})}function Fr(n,e=0){return _e((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function pE(n,e){return Ke(n).pipe(Fr(e),kr(e))}function gE(n,e){return Ke(n).pipe(Fr(e),kr(e))}function mE(n,e){return new ge(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function yE(n,e){return new ge(t=>{let r;return Vt(t,e,()=>{r=n[Yu](),Vt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ie(r?.return)&&r.return()})}function el(n,e){if(!n)throw new Error("Iterable cannot be null");return new ge(t=>{Vt(t,e,()=>{let r=n[Symbol.asyncIterator]();Vt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function vE(n,e){return el(Ju(n),e)}function _E(n,e){if(n!=null){if(Wu(n))return pE(n,e);if(zu(n))return mE(n,e);if(Gu(n))return gE(n,e);if(Ku(n))return el(n,e);if(Zu(n))return yE(n,e);if(Xu(n))return vE(n,e)}throw Qu(n)}function Oe(n,e){return e?_E(n,e):Ke(n)}function Y(...n){let e=Or(n);return Oe(n,e)}function Ro(n,e){let t=ie(n)?n:()=>n,r=i=>i.error(t());return new ge(e?i=>e.schedule(r,0,i):r)}function fp(n){return!!n&&(n instanceof ge||ie(n.lift)&&ie(n.subscribe))}var rr=wo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function X(n,e){return _e((t,r)=>{let i=0;t.subscribe(me(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:pM}=Array;function gM(n,e){return pM(e)?n(...e):n(e)}function tl(n){return X(e=>gM(n,e))}var{isArray:mM}=Array,{getPrototypeOf:yM,prototype:vM,keys:_M}=Object;function nl(n){if(n.length===1){let e=n[0];if(mM(e))return{args:e,keys:null};if(wM(e)){let t=_M(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function wM(n){return n&&typeof n=="object"&&yM(n)===vM}function rl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Si(...n){let e=Or(n),t=qu(n),{args:r,keys:i}=nl(n);if(r.length===0)return Oe([],e);let o=new ge(IM(r,e,i?s=>rl(i,s):Bt));return t?o.pipe(tl(t)):o}function IM(n,e,t=Bt){return r=>{wE(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)wE(e,()=>{let l=Oe(n[u],e),h=!1;l.subscribe(me(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function wE(n,e,t){n?Vt(t,n,e):e()}function IE(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},_=O=>l<r?S(O):u.push(O),S=O=>{o&&e.next(O),l++;let M=!1;Ke(t(O,h++)).subscribe(me(e,j=>{i?.(j),o?_(j):e.next(j)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let j=u.shift();s?Vt(e,s,()=>S(j)):S(j)}y()}catch(j){e.error(j)}}))};return n.subscribe(me(e,_,()=>{p=!0,y()})),()=>{a?.()}}function Qe(n,e,t=1/0){return ie(e)?Qe((r,i)=>X((o,s)=>e(r,o,i,s))(Ke(n(r,i))),t):(typeof e=="number"&&(t=e),_e((r,i)=>IE(r,i,n,t)))}function Mo(n=1/0){return Qe(Bt,n)}function EE(){return Mo(1)}function No(...n){return EE()(Oe(n,Or(n)))}function il(n){return new ge(e=>{Ke(n()).subscribe(e)})}function pp(...n){let e=qu(n),{args:t,keys:r}=nl(n),i=new ge(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Ke(t[h]).subscribe(me(o,y=>{p||(p=!0,l--),a[h]=y},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?rl(r,a):a),o.complete())}))}});return e?i.pipe(tl(e)):i}function Ht(n,e){return _e((t,r)=>{let i=0;t.subscribe(me(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Vr(n){return _e((e,t)=>{let r=null,i=!1,o;r=e.subscribe(me(t,void 0,void 0,s=>{o=Ke(n(s,Vr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function DE(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(me(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Ai(n,e){return ie(e)?Qe(n,e,1):Qe(n,1)}function Lr(n){return _e((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function wt(n){return n<=0?()=>$t:_e((e,t)=>{let r=0;e.subscribe(me(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function gp(n){return X(()=>n)}function ol(n=EM){return _e((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function EM(){return new rr}function Ca(n){return _e((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Sn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ht((i,o)=>n(i,o,r)):Bt,wt(1),t?Lr(e):ol(()=>new rr))}function Po(n){return n<=0?()=>$t:_e((e,t)=>{let r=[];e.subscribe(me(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function mp(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ht((i,o)=>n(i,o,r)):Bt,Po(1),t?Lr(e):ol(()=>new rr))}function sl(n,e){return _e(DE(n,e,arguments.length>=2,!0))}function al(...n){let e=Or(n);return _e((t,r)=>{(e?No(n,t,e):No(n,t)).subscribe(r)})}function Nt(n,e){return _e((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(me(r,u=>{i?.unsubscribe();let l=0,h=o++;Ke(n(u,h)).subscribe(i=me(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function yp(n){return _e((e,t)=>{Ke(n).subscribe(me(t,()=>t.complete(),Ea)),!t.closed&&e.subscribe(t)})}function ot(n,e,t){let r=ie(n)||e||t?{next:n,error:e,complete:t}:n;return r?_e((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(me(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Bt}var c0="https://g.co/ng/security#xss",q=class extends Error{constructor(e,t){super(Ig(e,t)),this.code=e}};function Ig(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Pa(n){return{toString:n}.toString()}var cl="__parameters__";function DM(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function u0(n,e,t){return Pa(()=>{let r=DM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(cl)?u[cl]:Object.defineProperty(u,cl,{value:[]})[cl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Mp=globalThis;function Me(n){for(let e in n)if(n[e]===Me)return e;throw Error("Could not find renamed property on target object.")}function CM(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ot(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Ot).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function CE(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var bM=Me({__forward_ref__:Me});function On(n){return n.__forward_ref__=On,n.toString=function(){return Ot(this())},n}function Pt(n){return l0(n)?n():n}function l0(n){return typeof n=="function"&&n.hasOwnProperty(bM)&&n.__forward_ref__===On}function G(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Kr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Hl(n){return bE(n,h0)||bE(n,f0)}function d0(n){return Hl(n)!==null}function bE(n,e){return n.hasOwnProperty(e)?n[e]:null}function TM(n){let e=n&&(n[h0]||n[f0]);return e||null}function TE(n){return n&&(n.hasOwnProperty(SE)||n.hasOwnProperty(SM))?n[SE]:null}var h0=Me({\u0275prov:Me}),SE=Me({\u0275inj:Me}),f0=Me({ngInjectableDef:Me}),SM=Me({ngInjectorDef:Me}),z=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=G({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function p0(n){return n&&!!n.\u0275providers}var AM=Me({\u0275cmp:Me}),xM=Me({\u0275dir:Me}),RM=Me({\u0275pipe:Me}),MM=Me({\u0275mod:Me}),vl=Me({\u0275fac:Me}),Ta=Me({__NG_ELEMENT_ID__:Me}),AE=Me({__NG_ENV_ID__:Me});function jo(n){return typeof n=="string"?n:n==null?"":String(n)}function NM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():jo(n)}function PM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new q(-200,n)}function Eg(n,e){throw new q(-201,!1)}var ue=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ue||{}),Np;function g0(){return Np}function Lt(n){let e=Np;return Np=n,e}function m0(n,e,t){let r=Hl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ue.Optional)return null;if(e!==void 0)return e;Eg(n,"Injector")}var OM={},Sa=OM,Pp="__NG_DI_FLAG__",_l="ngTempTokenPath",kM="ngTokenPath",FM=/\n/gm,VM="\u0275",xE="__source",Lo;function LM(){return Lo}function Ur(n){let e=Lo;return Lo=n,e}function UM(n,e=ue.Default){if(Lo===void 0)throw new q(-203,!1);return Lo===null?m0(n,void 0,e):Lo.get(n,e&ue.Optional?null:void 0,e)}function te(n,e=ue.Default){return(g0()||UM)(Pt(n),e)}function k(n,e=ue.Default){return te(n,ql(e))}function ql(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Op(n){let e=[];for(let t=0;t<n.length;t++){let r=Pt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new q(900,!1);let i,o=ue.Default;for(let s=0;s<r.length;s++){let a=r[s],u=jM(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(te(i,o))}else e.push(te(r))}return e}function y0(n,e){return n[Pp]=e,n.prototype[Pp]=e,n}function jM(n){return n[Pp]}function BM(n,e,t,r){let i=n[_l];throw e[xE]&&i.unshift(e[xE]),n.message=$M(`
`+n.message,i,t,r),n[kM]=i,n[_l]=null,n}function $M(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==VM?n.slice(2):n;let i=Ot(e);if(Array.isArray(e))i=e.map(Ot).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ot(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(FM,`
  `)}`}var It=y0(u0("Optional"),8);var Dg=y0(u0("SkipSelf"),4);function Ri(n,e){let t=n.hasOwnProperty(vl);return t?n[vl]:null}function Cg(n,e){n.forEach(t=>Array.isArray(t)?Cg(t,e):e(t))}function v0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function wl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function HM(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function qM(n,e,t){let r=Oa(n,e);return r>=0?n[r|1]=t:(r=~r,HM(n,r,e,t)),r}function vp(n,e){let t=Oa(n,e);if(t>=0)return n[t|1]}function Oa(n,e){return zM(n,e,1)}function zM(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Bo={},Qt=[],$o=new z(""),_0=new z("",-1),w0=new z(""),Il=class{get(e,t=Sa){if(t===Sa){let r=new Error(`NullInjectorError: No provider for ${Ot(e)}!`);throw r.name="NullInjectorError",r}return t}},I0=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(I0||{}),Rn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Rn||{}),$r=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}($r||{});function GM(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function kp(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];WM(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function E0(n){return n===3||n===4||n===6}function WM(n){return n.charCodeAt(0)===64}function Aa(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?RE(n,t,i,null,e[++r]):RE(n,t,i,null,null))}}return n}function RE(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var D0="ng-template";function KM(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&GM(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(bg(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function bg(n){return n.type===4&&n.value!==D0}function QM(n,e,t){let r=n.type===4&&!t?D0:n.value;return e===r}function YM(n,e,t){let r=4,i=n.attrs,o=i!==null?XM(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!ln(r)&&!ln(u))return!1;if(s&&ln(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!QM(n,u,t)||u===""&&e.length===1){if(ln(r))return!1;s=!0}}else if(r&8){if(i===null||!KM(n,i,u,t)){if(ln(r))return!1;s=!0}}else{let l=e[++a],h=ZM(u,i,bg(n),t);if(h===-1){if(ln(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(ln(r))return!1;s=!0}}}}return ln(r)||s}function ln(n){return(n&1)===0}function ZM(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return eN(e,n)}function JM(n,e,t=!1){for(let r=0;r<e.length;r++)if(YM(n,e[r],t))return!0;return!1}function XM(n){for(let e=0;e<n.length;e++){let t=n[e];if(E0(t))return e}return n.length}function eN(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function ME(n,e){return n?":not("+e.trim()+")":e}function tN(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!ln(s)&&(e+=ME(o,i),i=""),r=s,o=o||!ln(r);t++}return i!==""&&(e+=ME(o,i)),e}function nN(n){return n.map(tN).join(",")}function rN(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!ln(i))break;i=o}r++}return{attrs:e,classes:t}}function Je(n){return Pa(()=>{let e=x0(n),t=ce(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===I0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Rn.Emulated,styles:n.styles||Qt,_:null,schemas:n.schemas||null,tView:null,id:""});R0(t);let r=n.dependencies;return t.directiveDefs=PE(r,!1),t.pipeDefs=PE(r,!0),t.id=sN(t),t})}function iN(n){return Hr(n)||b0(n)}function oN(n){return n!==null}function Qr(n){return Pa(()=>({type:n.type,bootstrap:n.bootstrap||Qt,declarations:n.declarations||Qt,imports:n.imports||Qt,exports:n.exports||Qt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function NE(n,e){if(n==null)return Bo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=$r.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==$r.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Fe(n){return Pa(()=>{let e=x0(n);return R0(e),e})}function C0(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Hr(n){return n[AM]||null}function b0(n){return n[xM]||null}function T0(n){return n[RM]||null}function S0(n){let e=Hr(n)||b0(n)||T0(n);return e!==null?e.standalone:!1}function A0(n,e){let t=n[MM]||null;if(!t&&e===!0)throw new Error(`Type ${Ot(n)} does not have '\u0275mod' property.`);return t}function x0(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Bo,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Qt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:NE(n.inputs,e),outputs:NE(n.outputs),debugInfo:null}}function R0(n){n.features?.forEach(e=>e(n))}function PE(n,e){if(!n)return null;let t=e?T0:iN;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(oN)}function sN(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function kn(n){return{\u0275providers:n}}function aN(...n){return{\u0275providers:M0(!0,n),\u0275fromNgModule:!0}}function M0(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Cg(e,s=>{let a=s;Fp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&N0(i,o),t}function N0(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Tg(i,o=>{e(o,r)})}}function Fp(n,e,t,r){if(n=Pt(n),!n)return!1;let i=null,o=TE(n),s=!o&&Hr(n);if(!o&&!s){let u=n.ngModule;if(o=TE(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Fp(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Cg(o.imports,h=>{Fp(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&N0(l,e)}if(!a){let l=Ri(i)||(()=>new i);e({provide:i,useFactory:l,deps:Qt},i),e({provide:w0,useValue:i,multi:!0},i),e({provide:$o,useValue:()=>te(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Tg(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Tg(n,e){for(let t of n)p0(t)&&(t=t.\u0275providers),Array.isArray(t)?Tg(t,e):e(t)}var cN=Me({provide:String,useValue:Me});function P0(n){return n!==null&&typeof n=="object"&&cN in n}function uN(n){return!!(n&&n.useExisting)}function lN(n){return!!(n&&n.useFactory)}function Ho(n){return typeof n=="function"}function dN(n){return!!n.useClass}var zl=new z(""),fl={},hN={},_p;function Sg(){return _p===void 0&&(_p=new Il),_p}var qt=class{},xa=class extends qt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Lp(e,s=>this.processProvider(s)),this.records.set(_0,Oo(void 0,this)),i.has("environment")&&this.records.set(qt,Oo(void 0,this));let o=this.records.get(zl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(w0,Qt,ue.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ie(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ie(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Ur(this),r=Lt(void 0),i;try{return e()}finally{Ur(t),Lt(r)}}get(e,t=Sa,r=ue.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(AE))return e[AE](this);r=ql(r);let i,o=Ur(this),s=Lt(void 0);try{if(!(r&ue.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=yN(e)&&Hl(e);l&&this.injectableDefInScope(l)?u=Oo(Vp(e),fl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ue.Self?Sg():this.parent;return t=r&ue.Optional&&t===Sa?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[_l]=a[_l]||[]).unshift(Ot(e)),o)throw a;return BM(a,e,"R3InjectorError",this.source)}else throw a}finally{Lt(s),Ur(o)}}resolveInjectorInitializers(){let e=Ie(null),t=Ur(this),r=Lt(void 0),i;try{let o=this.get($o,Qt,ue.Self);for(let s of o)s()}finally{Ur(t),Lt(r),Ie(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ot(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new q(205,!1)}processProvider(e){e=Pt(e);let t=Ho(e)?e:Pt(e&&e.provide),r=pN(e);if(!Ho(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Oo(void 0,fl,!0),i.factory=()=>Op(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ie(null);try{return t.value===fl&&(t.value=hN,t.value=t.factory()),typeof t.value=="object"&&t.value&&mN(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ie(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Pt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Vp(n){let e=Hl(n),t=e!==null?e.factory:Ri(n);if(t!==null)return t;if(n instanceof z)throw new q(204,!1);if(n instanceof Function)return fN(n);throw new q(204,!1)}function fN(n){if(n.length>0)throw new q(204,!1);let t=TM(n);return t!==null?()=>t.factory(n):()=>new n}function pN(n){if(P0(n))return Oo(void 0,n.useValue);{let e=O0(n);return Oo(e,fl)}}function O0(n,e,t){let r;if(Ho(n)){let i=Pt(n);return Ri(i)||Vp(i)}else if(P0(n))r=()=>Pt(n.useValue);else if(lN(n))r=()=>n.useFactory(...Op(n.deps||[]));else if(uN(n))r=()=>te(Pt(n.useExisting));else{let i=Pt(n&&(n.useClass||n.provide));if(gN(n))r=()=>new i(...Op(n.deps));else return Ri(i)||Vp(i)}return r}function Oo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function gN(n){return!!n.deps}function mN(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function yN(n){return typeof n=="function"||typeof n=="object"&&n instanceof z}function Lp(n,e){for(let t of n)Array.isArray(t)?Lp(t,e):t&&p0(t)?Lp(t.\u0275providers,e):e(t)}function Fn(n,e){n instanceof xa&&n.assertNotDestroyed();let t,r=Ur(n),i=Lt(void 0);try{return e()}finally{Ur(r),Lt(i)}}function k0(){return g0()!==void 0||LM()!=null}function vN(n){if(!k0())throw new q(-203,!1)}function _N(n){return typeof n=="function"}var ar=0,he=1,ee=2,kt=3,dn=4,fn=5,El=6,Dl=7,hn=8,qo=9,Mn=10,Ze=11,Ra=12,OE=13,es=14,Nn=15,zo=16,ko=17,Go=18,Gl=19,F0=20,jr=21,wp=22,Yt=23,Jt=25,V0=1;var Mi=7,Cl=8,bl=9,Zt=10,Tl=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Tl||{});function Br(n){return Array.isArray(n)&&typeof n[V0]=="object"}function cr(n){return Array.isArray(n)&&n[V0]===!0}function Ag(n){return(n.flags&4)!==0}function Wl(n){return n.componentOffset>-1}function Kl(n){return(n.flags&1)===1}function qr(n){return!!n.template}function Up(n){return(n[ee]&512)!==0}var jp=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function L0(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Yr(){return U0}function U0(n){return n.type.prototype.ngOnChanges&&(n.setInput=IN),wN}Yr.ngInherit=!0;function wN(){let n=B0(this),e=n?.current;if(e){let t=n.previous;if(t===Bo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function IN(n,e,t,r,i){let o=this.declaredInputs[r],s=B0(n)||EN(n,{previous:Bo,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new jp(l&&l.currentValue,t,u===Bo),L0(n,e,i,t)}var j0="__ngSimpleChanges__";function B0(n){return n[j0]||null}function EN(n,e){return n[j0]=e}var kE=null;var An=function(n,e,t){kE?.(n,e,t)},DN="svg",CN="math";function Pn(n){for(;Array.isArray(n);)n=n[ar];return n}function $0(n,e){return Pn(e[n])}function Xt(n,e){return Pn(e[n.index])}function H0(n,e){return n.data[e]}function q0(n,e){return n[e]}function Zr(n,e){let t=e[n];return Br(t)?t:t[ar]}function xg(n){return(n[ee]&128)===128}function bN(n){return cr(n[kt])}function Wo(n,e){return e==null?null:n[e]}function z0(n){n[ko]=0}function G0(n){n[ee]&1024||(n[ee]|=1024,xg(n)&&Yl(n))}function TN(n,e){for(;n>0;)e=e[es],n--;return e}function Ql(n){return!!(n[ee]&9216||n[Yt]?.dirty)}function Bp(n){n[Mn].changeDetectionScheduler?.notify(8),n[ee]&64&&(n[ee]|=1024),Ql(n)&&Yl(n)}function Yl(n){n[Mn].changeDetectionScheduler?.notify(0);let e=Ni(n);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!xg(e)));)e=Ni(e)}function W0(n,e){if((n[ee]&256)===256)throw new q(911,!1);n[jr]===null&&(n[jr]=[]),n[jr].push(e)}function SN(n,e){if(n[jr]===null)return;let t=n[jr].indexOf(e);t!==-1&&n[jr].splice(t,1)}function Ni(n){let e=n[kt];return cr(e)?e[kt]:e}var le={lFrame:rD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var K0=!1;function AN(){return le.lFrame.elementDepthCount}function xN(){le.lFrame.elementDepthCount++}function RN(){le.lFrame.elementDepthCount--}function Q0(){return le.bindingsEnabled}function MN(){return le.skipHydrationRootTNode!==null}function NN(n){return le.skipHydrationRootTNode===n}function PN(){le.skipHydrationRootTNode=null}function be(){return le.lFrame.lView}function Et(){return le.lFrame.tView}function fe(n){return le.lFrame.contextLView=n,n[hn]}function pe(n){return le.lFrame.contextLView=null,n}function Dt(){let n=Y0();for(;n!==null&&n.type===64;)n=n.parent;return n}function Y0(){return le.lFrame.currentTNode}function ON(){let n=le.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Vi(n,e){let t=le.lFrame;t.currentTNode=n,t.isParent=e}function Rg(){return le.lFrame.isParent}function Z0(){le.lFrame.isParent=!1}function kN(){return le.lFrame.contextLView}function J0(){return K0}function FE(n){K0=n}function Mg(){let n=le.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function FN(){return le.lFrame.bindingIndex}function VN(n){return le.lFrame.bindingIndex=n}function Zl(){return le.lFrame.bindingIndex++}function X0(n){let e=le.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function LN(){return le.lFrame.inI18n}function UN(n,e){let t=le.lFrame;t.bindingIndex=t.bindingRootIndex=n,$p(e)}function jN(){return le.lFrame.currentDirectiveIndex}function $p(n){le.lFrame.currentDirectiveIndex=n}function BN(n){let e=le.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function eD(n){le.lFrame.currentQueryIndex=n}function $N(n){let e=n[he];return e.type===2?e.declTNode:e.type===1?n[fn]:null}function tD(n,e,t){if(t&ue.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ue.Host);)if(i=$N(o),i===null||(o=o[es],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=le.lFrame=nD();return r.currentTNode=e,r.lView=n,!0}function Ng(n){let e=nD(),t=n[he];le.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function nD(){let n=le.lFrame,e=n===null?null:n.child;return e===null?rD(n):e}function rD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function iD(){let n=le.lFrame;return le.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var oD=iD;function Pg(){let n=iD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function HN(n){return(le.lFrame.contextLView=TN(n,le.lFrame.contextLView))[hn]}function Li(){return le.lFrame.selectedIndex}function Pi(n){le.lFrame.selectedIndex=n}function Og(){let n=le.lFrame;return H0(n.tView,n.selectedIndex)}function qN(){return le.lFrame.currentNamespace}var sD=!0;function Jl(){return sD}function Xl(n){sD=n}function zN(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=U0(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function ed(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function pl(n,e,t){aD(n,e,3,t)}function gl(n,e,t,r){(n[ee]&3)===t&&aD(n,e,t,r)}function Ip(n,e){let t=n[ee];(t&3)===e&&(t&=16383,t+=1,n[ee]=t)}function aD(n,e,t,r){let i=r!==void 0?n[ko]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[ko]+=65536),(a<o||o==-1)&&(GN(n,t,e,u),n[ko]=(n[ko]&4294901760)+u+2),u++}function VE(n,e){An(4,n,e);let t=Ie(null);try{e.call(n)}finally{Ie(t),An(5,n,e)}}function GN(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ee]>>14<n[ko]>>16&&(n[ee]&3)===e&&(n[ee]+=16384,VE(a,o)):VE(a,o)}var Uo=-1,Oi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function WN(n){return n instanceof Oi}function KN(n){return(n.flags&8)!==0}function QN(n){return(n.flags&16)!==0}var Ep={},Hp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=ql(r);let i=this.injector.get(e,Ep,r);return i!==Ep||t===Ep?i:this.parentInjector.get(e,t,r)}};function cD(n){return n!==Uo}function Sl(n){return n&32767}function YN(n){return n>>16}function Al(n,e){let t=YN(n),r=e;for(;t>0;)r=r[es],t--;return r}var qp=!0;function xl(n){let e=qp;return qp=n,e}var ZN=256,uD=ZN-1,lD=5,JN=0,xn={};function XN(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ta)&&(r=t[Ta]),r==null&&(r=t[Ta]=JN++);let i=r&uD,o=1<<i;e.data[n+(i>>lD)]|=o}function Rl(n,e){let t=dD(n,e);if(t!==-1)return t;let r=e[he];r.firstCreatePass&&(n.injectorIndex=e.length,Dp(r.data,n),Dp(e,null),Dp(r.blueprint,null));let i=kg(n,e),o=n.injectorIndex;if(cD(i)){let s=Sl(i),a=Al(i,e),u=a[he].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Dp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function dD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function kg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=mD(i),r===null)return Uo;if(t++,i=i[es],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Uo}function zp(n,e,t){XN(n,e,t)}function eP(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(E0(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function hD(n,e,t){if(t&ue.Optional||n!==void 0)return n;Eg(e,"NodeInjector")}function fD(n,e,t,r){if(t&ue.Optional&&r===void 0&&(r=null),!(t&(ue.Self|ue.Host))){let i=n[qo],o=Lt(void 0);try{return i?i.get(e,r,t&ue.Optional):m0(e,r,t&ue.Optional)}finally{Lt(o)}}return hD(r,e,t)}function pD(n,e,t,r=ue.Default,i){if(n!==null){if(e[ee]&2048&&!(r&ue.Self)){let s=oP(n,e,t,r,xn);if(s!==xn)return s}let o=gD(n,e,t,r,xn);if(o!==xn)return o}return fD(e,t,r,i)}function gD(n,e,t,r,i){let o=rP(t);if(typeof o=="function"){if(!tD(e,n,r))return r&ue.Host?hD(i,t,r):fD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ue.Optional))Eg(t);else return s}finally{oD()}}else if(typeof o=="number"){let s=null,a=dD(n,e),u=Uo,l=r&ue.Host?e[Nn][fn]:null;for((a===-1||r&ue.SkipSelf)&&(u=a===-1?kg(n,e):e[a+8],u===Uo||!UE(r,!1)?a=-1:(s=e[he],a=Sl(u),e=Al(u,e)));a!==-1;){let h=e[he];if(LE(o,a,h.data)){let p=tP(a,e,t,s,r,l);if(p!==xn)return p}u=e[a+8],u!==Uo&&UE(r,e[he].data[a+8]===l)&&LE(o,a,e)?(s=h,a=Sl(u),e=Al(u,e)):a=-1}}return i}function tP(n,e,t,r,i,o){let s=e[he],a=s.data[n+8],u=r==null?Wl(a)&&qp:r!=s&&(a.type&3)!==0,l=i&ue.Host&&o===a,h=nP(a,s,t,u,l);return h!==null?Ko(e,s,h,a):xn}function nP(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,y=i?a+h:l;for(let _=p;_<y;_++){let S=s[_];if(_<u&&t===S||_>=u&&S.type===t)return _}if(i){let _=s[u];if(_&&qr(_)&&_.type===t)return u}return null}function Ko(n,e,t,r){let i=n[t],o=e.data;if(WN(i)){let s=i;s.resolving&&PM(NM(o[t]));let a=xl(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Lt(s.injectImpl):null,h=tD(n,r,ue.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&zN(t,o[t],e)}finally{l!==null&&Lt(l),xl(a),s.resolving=!1,oD()}}return i}function rP(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ta)?n[Ta]:void 0;return typeof e=="number"?e>=0?e&uD:iP:e}function LE(n,e,t){let r=1<<n;return!!(t[e+(n>>lD)]&r)}function UE(n,e){return!(n&ue.Self)&&!(n&ue.Host&&e)}var xi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return pD(this._tNode,this._lView,e,ql(r),t)}};function iP(){return new xi(Dt(),be())}function ur(n){return Pa(()=>{let e=n.prototype.constructor,t=e[vl]||Gp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[vl]||Gp(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Gp(n){return l0(n)?()=>{let e=Gp(Pt(n));return e&&e()}:Ri(n)}function oP(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ee]&2048&&!(s[ee]&512);){let a=gD(o,s,t,r|ue.Self,xn);if(a!==xn)return a;let u=o.parent;if(!u){let l=s[F0];if(l){let h=l.get(t,xn,r);if(h!==xn)return h}u=mD(s),s=s[es]}o=u}return i}function mD(n){let e=n[he],t=e.type;return t===2?e.declTNode:t===1?n[fn]:null}function Fg(n){return eP(Dt(),n)}function jE(n,e=null,t=null,r){let i=yD(n,e,t,r);return i.resolveInjectorInitializers(),i}function yD(n,e=null,t=null,r,i=new Set){let o=[t||Qt,aN(n)];return r=r||(typeof n=="object"?void 0:Ot(n)),new xa(o,e||Sg(),r||null,i)}var pt=class n{static{this.THROW_IF_NOT_FOUND=Sa}static{this.NULL=new Il}static create(e,t){if(Array.isArray(e))return jE({name:""},t,e,"");{let r=e.name??"";return jE({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=G({token:n,providedIn:"any",factory:()=>te(_0)})}static{this.__NG_ELEMENT_ID__=-1}};var sP=new z("");sP.__NG_ELEMENT_ID__=n=>{let e=Dt();if(e===null)throw new q(204,!1);if(e.type&2)return e.value;if(n&ue.Optional)return null;throw new q(204,!1)};var aP="ngOriginalError";function Cp(n){return n[aP]}var vD=!0,Vg=(()=>{class n{static{this.__NG_ELEMENT_ID__=cP}static{this.__NG_ENV_ID__=t=>t}}return n})(),Wp=class extends Vg{constructor(e){super(),this._lView=e}onDestroy(e){return W0(this._lView,e),()=>SN(this._lView,e)}};function cP(){return new Wp(be())}var ts=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ge(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Kp=class extends at{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,k0()&&(this.destroyRef=k(Vg,{optional:!0})??void 0,this.pendingTasks=k(ts,{optional:!0})??void 0)}emit(e){let t=Ie(null);try{super.next(e)}finally{Ie(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof He&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ye=Kp;function Ml(...n){}function _D(n){let e,t;function r(){n=Ml;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function BE(n){return queueMicrotask(()=>n()),()=>{n=Ml}}var Lg="isAngularZone",Nl=Lg+"_ID",uP=0,Te=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ye(!1),this.onMicrotaskEmpty=new Ye(!1),this.onStable=new Ye(!1),this.onError=new Ye(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=vD}=e;if(typeof Zone>"u")throw new q(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,hP(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Lg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new q(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,lP,Ml,Ml);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},lP={};function Ug(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function dP(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){_D(()=>{n.callbackScheduled=!1,Qp(n),n.isCheckStableRunning=!0,Ug(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Qp(n)}function hP(n){let e=()=>{dP(n)},t=uP++;n._inner=n._inner.fork({name:"angular",properties:{[Lg]:!0,[Nl]:t,[Nl+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(fP(u))return r.invokeTask(o,s,a,u);try{return $E(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),HE(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return $E(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!pP(u)&&e(),HE(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Qp(n),Ug(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Qp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function $E(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function HE(n){n._nesting--,Ug(n)}var Yp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ye,this.onMicrotaskEmpty=new Ye,this.onStable=new Ye,this.onError=new Ye}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function fP(n){return wD(n,"__ignore_ng_zone__")}function pP(n){return wD(n,"__scheduler_tick__")}function wD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var ir=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Cp(e);for(;t&&Cp(t);)t=Cp(t);return t||null}},gP=new z("",{providedIn:"root",factory:()=>{let n=k(Te),e=k(ir);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function mP(){return td(Dt(),be())}function td(n,e){return new pn(Xt(n,e))}var pn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=mP}}return n})();function ID(n){return(n.flags&128)===128}var ED=new Map,yP=0;function vP(){return yP++}function _P(n){ED.set(n[Gl],n)}function Zp(n){ED.delete(n[Gl])}var qE="__ngContext__";function zr(n,e){Br(e)?(n[qE]=e[Gl],_P(e)):n[qE]=e}function DD(n){return bD(n[Ra])}function CD(n){return bD(n[dn])}function bD(n){for(;n!==null&&!cr(n);)n=n[dn];return n}var Jp;function TD(n){Jp=n}function wP(){if(Jp!==void 0)return Jp;if(typeof document<"u")return document;throw new q(210,!1)}var jg=new z("",{providedIn:"root",factory:()=>IP}),IP="ng",Bg=new z(""),Vn=new z("",{providedIn:"platform",factory:()=>"unknown"});var $g=new z("",{providedIn:"root",factory:()=>wP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var EP="h",DP="b";var CP=()=>null;function Hg(n,e,t=!1){return CP(n,e,t)}var SD=!1,bP=new z("",{providedIn:"root",factory:()=>SD});var ul;function TP(){if(ul===void 0&&(ul=null,Mp.trustedTypes))try{ul=Mp.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ul}function zE(n){return TP()?.createScriptURL(n)||n}var Pl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${c0})`}};function ka(n){return n instanceof Pl?n.changingThisBreaksApplicationSecurity:n}function qg(n,e){let t=SP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${c0})`)}return t===e}function SP(n){return n instanceof Pl&&n.getTypeName()||null}var AP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function AD(n){return n=String(n),n.match(AP)?n:"unsafe:"+n}var nd=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(nd||{});function xP(n){let e=RD();return e?e.sanitize(nd.URL,n)||"":qg(n,"URL")?ka(n):AD(jo(n))}function RP(n){let e=RD();if(e)return zE(e.sanitize(nd.RESOURCE_URL,n)||"");if(qg(n,"ResourceURL"))return zE(ka(n));throw new q(904,!1)}function MP(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?RP:xP}function xD(n,e,t){return MP(e,t)(n)}function RD(){let n=be();return n&&n[Mn].sanitizer}var NP=/^>|^->|<!--|-->|--!>|<!-$/g,PP=/(<|>)/g,OP="\u200B$1\u200B";function kP(n){return n.replace(NP,e=>e.replace(PP,OP))}function MD(n){return n instanceof Function?n():n}function FP(n){return(n??k(pt)).get(Vn)==="browser"}var or=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(or||{}),VP;function zg(n,e){return VP(n,e)}function Fo(n,e,t,r,i){if(r!=null){let o,s=!1;cr(r)?o=r:Br(r)&&(s=!0,r=r[ar]);let a=Pn(r);n===0&&t!==null?i==null?FD(e,t,a):Ol(e,t,a,i||null,!0):n===1&&t!==null?Ol(e,t,a,i||null,!0):n===2?XP(e,a,s):n===3&&e.destroyNode(a),o!=null&&tO(e,n,o,t,i)}}function LP(n,e){return n.createText(e)}function UP(n,e,t){n.setValue(e,t)}function jP(n,e){return n.createComment(kP(e))}function ND(n,e,t){return n.createElement(e,t)}function BP(n,e){PD(n,e),e[ar]=null,e[fn]=null}function $P(n,e,t,r,i,o){r[ar]=i,r[fn]=e,id(n,r,t,1,i,o)}function PD(n,e){e[Mn].changeDetectionScheduler?.notify(9),id(n,e,e[Ze],2,null,null)}function HP(n){let e=n[Ra];if(!e)return bp(n[he],n);for(;e;){let t=null;if(Br(e))t=e[Ra];else{let r=e[Zt];r&&(t=r)}if(!t){for(;e&&!e[dn]&&e!==n;)Br(e)&&bp(e[he],e),e=e[kt];e===null&&(e=n),Br(e)&&bp(e[he],e),t=e&&e[dn]}e=t}}function qP(n,e,t,r){let i=Zt+r,o=t.length;r>0&&(t[i-1][dn]=e),r<o-Zt?(e[dn]=t[i],v0(t,Zt+r,e)):(t.push(e),e[dn]=null),e[kt]=t;let s=e[zo];s!==null&&t!==s&&OD(s,e);let a=e[Go];a!==null&&a.insertView(n),Bp(e),e[ee]|=128}function OD(n,e){let t=n[bl],r=e[kt];if(Br(r))n[ee]|=Tl.HasTransplantedViews;else{let i=r[kt][Nn];e[Nn]!==i&&(n[ee]|=Tl.HasTransplantedViews)}t===null?n[bl]=[e]:t.push(e)}function Gg(n,e){let t=n[bl],r=t.indexOf(e);t.splice(r,1)}function Xp(n,e){if(n.length<=Zt)return;let t=Zt+e,r=n[t];if(r){let i=r[zo];i!==null&&i!==n&&Gg(i,r),e>0&&(n[t-1][dn]=r[dn]);let o=wl(n,Zt+e);BP(r[he],r);let s=o[Go];s!==null&&s.detachView(o[he]),r[kt]=null,r[dn]=null,r[ee]&=-129}return r}function kD(n,e){if(!(e[ee]&256)){let t=e[Ze];t.destroyNode&&id(n,e,t,3,null,null),HP(e)}}function bp(n,e){if(e[ee]&256)return;let t=Ie(null);try{e[ee]&=-129,e[ee]|=256,e[Yt]&&Xf(e[Yt]),GP(n,e),zP(n,e),e[he].type===1&&e[Ze].destroy();let r=e[zo];if(r!==null&&cr(e[kt])){r!==e[kt]&&Gg(r,e);let i=e[Go];i!==null&&i.detachView(n)}Zp(e)}finally{Ie(t)}}function zP(n,e){let t=n.cleanup,r=e[Dl];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[Dl]=null);let i=e[jr];if(i!==null){e[jr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function GP(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Oi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];An(4,a,u);try{u.call(a)}finally{An(5,a,u)}}else{An(4,i,o);try{o.call(i)}finally{An(5,i,o)}}}}}function WP(n,e,t){return KP(n,e.parent,t)}function KP(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ar];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Rn.None||o===Rn.Emulated)return null}return Xt(r,t)}}function Ol(n,e,t,r,i){n.insertBefore(e,t,r,i)}function FD(n,e,t){n.appendChild(e,t)}function GE(n,e,t,r,i){r!==null?Ol(n,e,t,r,i):FD(n,e,t)}function VD(n,e){return n.parentNode(e)}function QP(n,e){return n.nextSibling(e)}function YP(n,e,t){return JP(n,e,t)}function ZP(n,e,t){return n.type&40?Xt(n,t):null}var JP=ZP,WE;function rd(n,e,t,r){let i=WP(n,r,e),o=e[Ze],s=r.parent||e[fn],a=YP(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)GE(o,i,t[u],a,!1);else GE(o,i,t,a,!1);WE!==void 0&&WE(o,r,e,t,i)}function ba(n,e){if(e!==null){let t=e.type;if(t&3)return Xt(e,n);if(t&4)return eg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ba(n,r);{let i=n[e.index];return cr(i)?eg(-1,i):Pn(i)}}else{if(t&128)return ba(n,e.next);if(t&32)return zg(e,n)()||Pn(n[e.index]);{let r=LD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ni(n[Nn]);return ba(i,r)}else return ba(n,e.next)}}}return null}function LD(n,e){if(e!==null){let r=n[Nn][fn],i=e.projection;return r.projection[i]}return null}function eg(n,e){let t=Zt+n+1;if(t<e.length){let r=e[t],i=r[he].firstChild;if(i!==null)return ba(r,i)}return e[Mi]}function XP(n,e,t){n.removeChild(null,e,t)}function Wg(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&zr(Pn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)Wg(n,e,t.child,r,i,o,!1),Fo(e,n,i,a,o);else if(u&32){let l=zg(t,r),h;for(;h=l();)Fo(e,n,i,h,o);Fo(e,n,i,a,o)}else u&16?eO(n,e,r,t,i,o):Fo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function id(n,e,t,r,i,o){Wg(t,r,n.firstChild,e,i,o,!1)}function eO(n,e,t,r,i,o){let s=t[Nn],u=s[fn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Fo(e,n,i,h,o)}else{let l=u,h=s[kt];ID(r)&&(l.flags|=128),Wg(n,e,l,h,i,o,!0)}}function tO(n,e,t,r,i){let o=t[Mi],s=Pn(t);o!==s&&Fo(e,n,r,o,i);for(let a=Zt;a<t.length;a++){let u=t[a];id(u[he],u,n,e,r,o)}}function nO(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:or.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=or.Important),n.setStyle(t,r,i,o))}}function rO(n,e,t){n.setAttribute(e,"style",t)}function UD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function jD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&kp(n,e,r),i!==null&&UD(n,e,i),o!==null&&rO(n,e,o)}var lr={};function U(n=1){BD(Et(),be(),Li()+n,!1)}function BD(n,e,t,r){if(!r)if((e[ee]&3)===3){let o=n.preOrderCheckHooks;o!==null&&pl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&gl(e,o,0,t)}Pi(t)}function $(n,e=ue.Default){let t=be();if(t===null)return te(n,e);let r=Dt();return pD(r,t,Pt(n),e)}function $D(){let n="invalid";throw new Error(n)}function HD(n,e,t,r,i,o){let s=Ie(null);try{let a=null;i&$r.SignalBased&&(a=e[r][nr]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&$r.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):L0(e,a,r,o)}finally{Ie(s)}}function iO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Pi(~i);else{let o=i,s=t[++r],a=t[++r];UN(s,o);let u=e[o];a(2,u)}}}finally{Pi(-1)}}function od(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[ar]=i,p[ee]=r|4|128|8|64,(l!==null||n&&n[ee]&2048)&&(p[ee]|=2048),z0(p),p[kt]=p[es]=n,p[hn]=t,p[Mn]=s||n&&n[Mn],p[Ze]=a||n&&n[Ze],p[qo]=u||n&&n[qo]||null,p[fn]=o,p[Gl]=vP(),p[El]=h,p[F0]=l,p[Nn]=e.type==2?n[Nn]:p,p}function Fa(n,e,t,r,i){let o=n.data[e];if(o===null)o=oO(n,e,t,r,i),LN()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=ON();o.injectorIndex=s===null?-1:s.injectorIndex}return Vi(o,!0),o}function oO(n,e,t,r,i){let o=Y0(),s=Rg(),a=s?o:o&&o.parent,u=n.data[e]=lO(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function qD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function zD(n,e,t,r,i){let o=Li(),s=r&2;try{Pi(-1),s&&e.length>Jt&&BD(n,e,Jt,!1),An(s?2:0,i),t(r,i)}finally{Pi(o),An(s?3:1,i)}}function Kg(n,e,t){if(Ag(e)){let r=Ie(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{Ie(r)}}}function Qg(n,e,t){Q0()&&(mO(n,e,t,Xt(t,e)),(t.flags&64)===64&&QD(n,e,t))}function Yg(n,e,t=Xt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function GD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Zg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Zg(n,e,t,r,i,o,s,a,u,l,h){let p=Jt+r,y=p+i,_=sO(p,y),S=typeof l=="function"?l():l;return _[he]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function sO(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:lr);return t}function aO(n,e,t,r){let o=r.get(bP,SD)||t===Rn.ShadowDom,s=n.selectRootElement(e,o);return cO(s),s}function cO(n){uO(n)}var uO=()=>null;function lO(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return MN()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function KE(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=$r.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?QE(r,t,l,a,u):QE(r,t,l,a)}return r}function QE(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function dO(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],y=t?t.get(p):null,_=y?y.inputs:null,S=y?y.outputs:null;u=KE(0,p.inputs,h,u,_),l=KE(1,p.outputs,h,l,S);let O=u!==null&&s!==null&&!bg(e)?SO(u,h,s):null;a.push(O)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function hO(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function WD(n,e,t,r,i,o,s,a){let u=Xt(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Xg(n,t,h,r,i),Wl(e)&&fO(t,e.index)):e.type&3?(r=hO(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function fO(n,e){let t=Zr(e,n);t[ee]&16||(t[ee]|=64)}function Jg(n,e,t,r){if(Q0()){let i=r===null?null:{"":-1},o=vO(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&KD(n,e,t,s,i,a),i&&_O(t,r,i)}t.mergedAttrs=Aa(t.mergedAttrs,t.attrs)}function KD(n,e,t,r,i,o){for(let l=0;l<r.length;l++)zp(Rl(t,e),n,r[l].type);IO(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=qD(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Aa(t.mergedAttrs,h.hostAttrs),EO(n,t,e,u,h),wO(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}dO(n,t,o)}function pO(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;gO(s)!=a&&s.push(a),s.push(t,r,o)}}function gO(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function mO(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Wl(t)&&DO(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Rl(t,e),zr(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Ko(e,n,a,t);if(zr(l,e),s!==null&&TO(e,a-i,l,u,t,s),qr(u)){let h=Zr(t.index,e);h[hn]=Ko(e,n,a,t)}}}function QD(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=jN();try{Pi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];$p(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&yO(u,l)}}finally{Pi(-1),$p(s)}}function yO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function vO(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(JM(e,s.selectors,!1))if(r||(r=[]),qr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;tg(n,e,u)}else r.unshift(s),tg(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function tg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function _O(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new q(-301,!1);r.push(e[i],o)}}}function wO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;qr(e)&&(t[""]=n)}}function IO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function EO(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Ri(i.type,!0)),s=new Oi(o,qr(i),$);n.blueprint[r]=s,t[r]=s,pO(n,e,r,qD(n,t,i.hostVars,lr),i)}function DO(n,e,t){let r=Xt(e,n),i=GD(t),o=n[Mn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=sd(n,od(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function CO(n,e,t,r,i,o){let s=Xt(n,e);bO(e[Ze],s,o,n.value,t,r,i)}function bO(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?jo(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function TO(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];HD(r,t,u,l,h,p)}}function SO(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function YD(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function ZD(n,e){let t=n.contentQueries;if(t!==null){let r=Ie(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];eD(o),a.contentQueries(2,e[s],s)}}}finally{Ie(r)}}}function sd(n,e){return n[Ra]?n[OE][dn]=e:n[Ra]=e,n[OE]=e,e}function ng(n,e,t){eD(0);let r=Ie(null);try{e(n,t)}finally{Ie(r)}}function AO(n){return n[Dl]??=[]}function xO(n){return n.cleanup??=[]}function JD(n,e){let t=n[qo],r=t?t.get(ir,null):null;r&&r.handleError(e)}function Xg(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];HD(h,l,r,a,u,i)}}function XD(n,e,t){let r=$0(e,n);UP(n[Ze],r,t)}function RO(n,e){let t=Zr(e,n),r=t[he];MO(r,t);let i=t[ar];i!==null&&t[El]===null&&(t[El]=Hg(i,t[qo])),em(r,t,t[hn])}function MO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function em(n,e,t){Ng(e);try{let r=n.viewQuery;r!==null&&ng(1,r,t);let i=n.template;i!==null&&zD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Go]?.finishViewCreation(n),n.staticContentQueries&&ZD(n,e),n.staticViewQueries&&ng(2,n.viewQuery,t);let o=n.components;o!==null&&NO(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ee]&=-5,Pg()}}function NO(n,e){for(let t=0;t<e.length;t++)RO(n,e[t])}function PO(n,e,t,r){let i=Ie(null);try{let o=e.tView,a=n[ee]&4096?4096:16,u=od(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[zo]=l;let h=n[Go];return h!==null&&(u[Go]=h.createEmbeddedView(o)),em(o,u,t),u}finally{Ie(i)}}function YE(n,e){return!e||e.firstChild===null||ID(n)}function OO(n,e,t,r=!0){let i=e[he];if(qP(i,e,n,t),r){let s=eg(t,n),a=e[Ze],u=VD(a,n[Mi]);u!==null&&$P(i,n[fn],a,e,u,s)}let o=e[El];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function kl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Pn(o)),cr(o)&&kO(o,r);let s=t.type;if(s&8)kl(n,e,t.child,r);else if(s&32){let a=zg(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=LD(e,t);if(Array.isArray(a))r.push(...a);else{let u=Ni(e[Nn]);kl(u[he],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function kO(n,e){for(let t=Zt;t<n.length;t++){let r=n[t],i=r[he].firstChild;i!==null&&kl(r[he],r,i,e)}n[Mi]!==n[ar]&&e.push(n[Mi])}var eC=[];function FO(n){return n[Yt]??VO(n)}function VO(n){let e=eC.pop()??Object.create(UO);return e.lView=n,e}function LO(n){n.lView[Yt]!==n&&(n.lView=null,eC.push(n))}var UO=ce(L({},Ia),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Yl(n.lView)},consumerOnSignalRead(){this.lView[Yt]=this}});function jO(n){let e=n[Yt]??Object.create(BO);return e.lView=n,e}var BO=ce(L({},Ia),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Ni(n.lView);for(;e&&!tC(e[he]);)e=Ni(e);e&&G0(e)},consumerOnSignalRead(){this.lView[Yt]=this}});function tC(n){return n.type!==2}var $O=100;function nC(n,e=!0,t=0){let r=n[Mn],i=r.rendererFactory,o=!1;o||i.begin?.();try{HO(n,t)}catch(s){throw e&&JD(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function HO(n,e){let t=J0();try{FE(!0),rg(n,e);let r=0;for(;Ql(n);){if(r===$O)throw new q(103,!1);r++,rg(n,1)}}finally{FE(t)}}function qO(n,e,t,r){let i=e[ee];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Mn].inlineEffectRunner?.flush(),Ng(e);let a=!0,u=null,l=null;o||(tC(n)?(l=FO(e),u=Nu(l)):jI()===null?(a=!1,l=jO(e),u=Nu(l)):e[Yt]&&(Xf(e[Yt]),e[Yt]=null));try{z0(e),VN(n.bindingStartIndex),t!==null&&zD(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let _=n.preOrderCheckHooks;_!==null&&pl(e,_,null)}else{let _=n.preOrderHooks;_!==null&&gl(e,_,0,null),Ip(e,0)}if(s||zO(e),rC(e,0),n.contentQueries!==null&&ZD(n,e),!o)if(h){let _=n.contentCheckHooks;_!==null&&pl(e,_)}else{let _=n.contentHooks;_!==null&&gl(e,_,1),Ip(e,1)}iO(n,e);let p=n.components;p!==null&&oC(e,p,0);let y=n.viewQuery;if(y!==null&&ng(2,y,r),!o)if(h){let _=n.viewCheckHooks;_!==null&&pl(e,_)}else{let _=n.viewHooks;_!==null&&gl(e,_,2),Ip(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[wp]){for(let _ of e[wp])_();e[wp]=null}o||(e[ee]&=-73)}catch(h){throw o||Yl(e),h}finally{l!==null&&(Zf(l,u),a&&LO(l)),Pg()}}function rC(n,e){for(let t=DD(n);t!==null;t=CD(t))for(let r=Zt;r<t.length;r++){let i=t[r];iC(i,e)}}function zO(n){for(let e=DD(n);e!==null;e=CD(e)){if(!(e[ee]&Tl.HasTransplantedViews))continue;let t=e[bl];for(let r=0;r<t.length;r++){let i=t[r];G0(i)}}}function GO(n,e,t){let r=Zr(e,n);iC(r,t)}function iC(n,e){xg(n)&&rg(n,e)}function rg(n,e){let r=n[he],i=n[ee],o=n[Yt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Jf(o)),s||=!1,o&&(o.dirty=!1),n[ee]&=-9217,s)qO(r,n,r.template,n[hn]);else if(i&8192){rC(n,1);let a=r.components;a!==null&&oC(n,a,1)}}function oC(n,e,t){for(let r=0;r<e.length;r++)GO(n,e[r],t)}function tm(n,e){let t=J0()?64:1088;for(n[Mn].changeDetectionScheduler?.notify(e);n;){n[ee]|=t;let r=Ni(n);if(Up(n)&&!r)return n;n=r}return null}var ki=class{get rootNodes(){let e=this._lView,t=e[he];return kl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[hn]}set context(e){this._lView[hn]=e}get destroyed(){return(this._lView[ee]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[kt];if(cr(e)){let t=e[Cl],r=t?t.indexOf(this):-1;r>-1&&(Xp(e,r),wl(t,r))}this._attachedToViewContainer=!1}kD(this._lView[he],this._lView)}onDestroy(e){W0(this._lView,e)}markForCheck(){tm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ee]&=-129}reattach(){Bp(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,nC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Up(this._lView),t=this._lView[zo];t!==null&&!e&&Gg(t,this._lView),PD(this._lView[he],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new q(902,!1);this._appRef=e;let t=Up(this._lView),r=this._lView[zo];r!==null&&!t&&OD(r,this._lView),Bp(this._lView)}},ad=(()=>{class n{static{this.__NG_ELEMENT_ID__=QO}}return n})(),WO=ad,KO=class extends WO{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=PO(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ki(i)}};function QO(){return sC(Dt(),be())}function sC(n,e){return n.type&4?new KO(e,n,td(n,e)):null}var q9=new RegExp(`^(\\d+)*(${DP}|${EP})*(.*)`);var YO=()=>null;function ZE(n,e){return YO(n,e)}var Qo=class{},cd=new z("",{providedIn:"root",factory:()=>!1});var aC=new z(""),cC=new z(""),ig=class{},Fl=class{};function ZO(n){let e=Error(`No component factory found for ${Ot(n)}.`);return e[JO]=n,e}var JO="ngComponent";var og=class{resolveComponentFactory(e){throw ZO(e)}},Yo=class{static{this.NULL=new og}},Zo=class{},Ln=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>XO()}}return n})();function XO(){let n=be(),e=Dt(),t=Zr(e.index,n);return(Br(t)?t:n)[Ze]}var e1=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>null})}}return n})();function Vl(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=CE(i,a);else if(o==2){let u=a,l=e[++s];r=CE(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Ll=class extends Yo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Hr(e);return new Jo(t,this.ngModule)}};function JE(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:$r.None;e?t.push({propName:s,templateName:r,isSignal:(a&$r.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function t1(n){let e=n.toLowerCase();return e==="svg"?DN:e==="math"?CN:null}var Jo=class extends Fl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=JE(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return JE(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=nN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Ie(null);try{i=i||this.ngModule;let s=i instanceof qt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Hp(e,s):e,u=a.get(Zo,null);if(u===null)throw new q(407,!1);let l=a.get(e1,null),h=a.get(Qo,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},y=u.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",S=r?aO(y,r,this.componentDef.encapsulation,a):ND(y,_,t1(_)),O=512;this.componentDef.signals?O|=4096:this.componentDef.onPush||(O|=16);let M=null;S!==null&&(M=Hg(S,a,!0));let j=Zg(0,null,null,1,0,null,null,null,null,null,null),K=od(null,j,null,O,null,null,p,y,a,null,M);Ng(K);let Q,de,Be=null;try{let re=this.componentDef,D,v=null;re.findHostDirectiveDefs?(D=[],v=new Map,re.findHostDirectiveDefs(re,D,v),D.push(re)):D=[re];let w=n1(K,S);Be=r1(w,S,re,D,K,p,y),de=H0(j,Jt),S&&s1(y,re,S,r),t!==void 0&&a1(de,this.ngContentSelectors,t),Q=o1(Be,re,D,v,K,[c1]),em(j,K,null)}catch(re){throw Be!==null&&Zp(Be),Zp(K),re}finally{Pg()}return new sg(this.componentType,Q,td(de,K),K,de)}finally{Ie(o)}}},sg=class extends ig{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new ki(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Xg(o[he],o,i,e,t),this.previousInputValues.set(e,t);let s=Zr(this._tNode.index,o);tm(s,1)}}get injector(){return new xi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function n1(n,e){let t=n[he],r=Jt;return n[r]=e,Fa(t,r,2,"#host",null)}function r1(n,e,t,r,i,o,s){let a=i[he];i1(r,n,e,s);let u=null;e!==null&&(u=Hg(e,i[qo]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=od(i,GD(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&tg(a,n,r.length-1),sd(i,p),i[n.index]=p}function i1(n,e,t,r){for(let i of n)e.mergedAttrs=Aa(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Vl(e,e.mergedAttrs,!0),t!==null&&jD(r,t,e))}function o1(n,e,t,r,i,o){let s=Dt(),a=i[he],u=Xt(s,i);KD(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,y=Ko(i,a,p,s);zr(y,i)}QD(a,i,s),u&&zr(u,i);let l=Ko(i,a,s.directiveStart+s.componentOffset,s);if(n[hn]=i[hn]=l,o!==null)for(let h of o)h(l,e);return Kg(a,s,i),l}function s1(n,e,t,r){if(r)kp(n,t,["ng-version","18.2.10"]);else{let{attrs:i,classes:o}=rN(e.selectors[0]);i&&kp(n,t,i),o&&o.length>0&&UD(n,t,o.join(" "))}}function a1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function c1(){let n=Dt();ed(be()[he],n)}var ns=(()=>{class n{static{this.__NG_ELEMENT_ID__=u1}}return n})();function u1(){let n=Dt();return d1(n,be())}var l1=ns,uC=class extends l1{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return td(this._hostTNode,this._hostLView)}get injector(){return new xi(this._hostTNode,this._hostLView)}get parentInjector(){let e=kg(this._hostTNode,this._hostLView);if(cD(e)){let t=Al(e,this._hostLView),r=Sl(e),i=t[he].data[r+8];return new xi(i,t)}else return new xi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=XE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Zt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=ZE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,YE(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!_N(e),a;if(s)a=t;else{let S=t||{};a=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef}let u=s?e:new Jo(Hr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let O=(s?l:this.parentInjector).get(qt,null);O&&(o=O)}let h=Hr(u.componentType??{}),p=ZE(this._lContainer,h?.id??null),y=p?.firstChild??null,_=u.create(l,i,y,o);return this.insertImpl(_.hostView,a,YE(this._hostTNode,p)),_}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(bN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[kt],l=new uC(u,u[fn],u[kt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return OO(s,i,o,r),e.attachToViewContainerRef(),v0(Tp(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=XE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Xp(this._lContainer,t);r&&(wl(Tp(this._lContainer),t),kD(r[he],r))}detach(e){let t=this._adjustIndex(e,-1),r=Xp(this._lContainer,t);return r&&wl(Tp(this._lContainer),t)!=null?new ki(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function XE(n){return n[Cl]}function Tp(n){return n[Cl]||(n[Cl]=[])}function d1(n,e){let t,r=e[n.index];return cr(r)?t=r:(t=YD(r,e,null,n),e[n.index]=t,sd(e,t)),f1(t,e,n,r),new uC(t,n,e)}function h1(n,e){let t=n[Ze],r=t.createComment(""),i=Xt(e,n),o=VD(t,i);return Ol(t,o,r,QP(t,i),!1),r}var f1=m1,p1=()=>!1;function g1(n,e,t){return p1(n,e,t)}function m1(n,e,t,r){if(n[Mi])return;let i;t.type&8?i=Pn(r):i=h1(e,t),n[Mi]=i}var e0=new Set;function rs(n){e0.has(n)||(e0.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function y1(n){return typeof n=="function"&&n[nr]!==void 0}function Va(n,e){rs("NgSignals");let t=ZI(n),r=t[nr];return e?.equal&&(r.equal=e.equal),t.set=i=>ep(r,i),t.update=i=>JI(r,i),t.asReadonly=v1.bind(t),t}function v1(){let n=this[nr];if(n.readonlyFn===void 0){let e=()=>this();e[nr]=n,n.readonlyFn=e}return n.readonlyFn}function lC(n){return y1(n)&&typeof n.set=="function"}function _1(n){return Object.getPrototypeOf(n.prototype).constructor}function en(n){let e=_1(n.type),t=!0,r=[n];for(;e;){let i;if(qr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new q(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=ll(n.inputs),s.inputTransforms=ll(n.inputTransforms),s.declaredInputs=ll(n.declaredInputs),s.outputs=ll(n.outputs);let a=i.hostBindings;a&&C1(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&E1(n,u),l&&D1(n,l),w1(n,i),CM(n.outputs,i.outputs),qr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===en&&(t=!1)}}e=Object.getPrototypeOf(e)}I1(r)}function w1(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function I1(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Aa(i.hostAttrs,t=Aa(t,i.hostAttrs))}}function ll(n){return n===Bo?{}:n===Qt?[]:n}function E1(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function D1(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function C1(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function nm(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Gr=class{},Ma=class{};var ag=class extends Gr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ll(this);let o=A0(e);this._bootstrapComponents=MD(o.bootstrap),this._r3Injector=yD(e,t,[{provide:Gr,useValue:this},{provide:Yo,useValue:this.componentFactoryResolver},...r],Ot(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},cg=class extends Ma{constructor(e){super(),this.moduleType=e}create(e){return new ag(this.moduleType,e,[])}};var Ul=class extends Gr{constructor(e){super(),this.componentFactoryResolver=new Ll(this),this.instance=null;let t=new xa([...e.providers,{provide:Gr,useValue:this},{provide:Yo,useValue:this.componentFactoryResolver}],e.parent||Sg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ud(n,e,t=null){return new Ul({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function dC(n){return T1(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function b1(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function T1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function hC(n,e,t){return n[e]=t}function Wr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function fC(n,e,t,r){let i=Wr(n,e,t);return Wr(n,e+1,r)||i}function S1(n){return(n.flags&32)===32}function A1(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Fa(e,n,4,s||null,a||null);Jg(e,t,h,Wo(l,u)),ed(e,h);let p=h.tView=Zg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function x1(n,e,t,r,i,o,s,a,u,l){let h=t+Jt,p=e.firstCreatePass?A1(h,e,n,r,i,o,s,a,u):e.data[h];Vi(p,!1);let y=R1(e,n,p,t);Jl()&&rd(e,n,y,p),zr(y,n);let _=YD(y,n,y,p);return n[h]=_,sd(n,_),g1(_,p,n),Kl(p)&&Qg(e,n,p),u!=null&&Yg(n,p,l),p}function De(n,e,t,r,i,o,s,a){let u=be(),l=Et(),h=Wo(l.consts,o);return x1(u,l,n,e,t,r,i,h,s,a),De}var R1=M1;function M1(n,e,t,r){return Xl(!0),e[Ze].createComment("")}var Vo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Vo||{}),pC=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}}return n})(),ug=class n{constructor(){this.ngZone=k(Te),this.scheduler=k(Qo),this.errorHandler=k(ir,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Vo.EarlyRead,Vo.Write,Vo.MixedReadWrite,Vo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}},lg=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function rm(n,e){!e?.injector&&vN(rm);let t=e?.injector??k(pt);return FP(t)?(rs("NgAfterNextRender"),P1(n,t,e,!0)):O1}function N1(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function P1(n,e,t,r){let i=e.get(pC);i.impl??=e.get(ug);let o=t?.phase??Vo.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Vg):null,a=new lg(i.impl,N1(n,o),r,s);return i.impl.register(a),a}var O1={destroy(){}};function La(n,e,t,r){let i=be(),o=Zl();if(Wr(i,o,e)){let s=Et(),a=Og();CO(a,i,n,e,t,r)}return La}function k1(n,e,t,r){return Wr(n,Zl(),t)?e+jo(t)+r:lr}function F1(n,e,t,r,i,o){let s=FN(),a=fC(n,s,t,i);return X0(2),a?e+jo(t)+r+jo(i)+o:lr}function dl(n,e){return n<<17|e<<2}function Fi(n){return n>>17&32767}function V1(n){return(n&2)==2}function L1(n,e){return n&131071|e<<17}function dg(n){return n|2}function Xo(n){return(n&131068)>>2}function Sp(n,e){return n&-131069|e<<2}function U1(n){return(n&1)===1}function hg(n){return n|1}function j1(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Fi(s),u=Xo(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Oa(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let y=Fi(n[a+1]);n[r+1]=dl(y,a),y!==0&&(n[y+1]=Sp(n[y+1],r)),n[a+1]=L1(n[a+1],r)}else n[r+1]=dl(a,0),a!==0&&(n[a+1]=Sp(n[a+1],r)),a=r;else n[r+1]=dl(u,0),a===0?a=r:n[u+1]=Sp(n[u+1],r),u=r;l&&(n[r+1]=dg(n[r+1])),t0(n,h,r,!0),t0(n,h,r,!1),B1(e,h,n,r,o),s=dl(a,u),o?e.classBindings=s:e.styleBindings=s}function B1(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Oa(o,e)>=0&&(t[r+1]=hg(t[r+1]))}function t0(n,e,t,r){let i=n[t+1],o=e===null,s=r?Fi(i):Xo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];$1(u,e)&&(a=!0,n[s+1]=r?hg(l):dg(l)),s=r?Fi(l):Xo(l)}a&&(n[t+1]=r?dg(i):hg(i))}function $1(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Oa(n,e)>=0:!1}function oe(n,e,t){let r=be(),i=Zl();if(Wr(r,i,e)){let o=Et(),s=Og();WD(o,s,r,n,e,r[Ze],t,!1)}return oe}function n0(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Xg(n,t,o[s],s,r)}function ld(n,e){return H1(n,e,null,!0),ld}function H1(n,e,t,r){let i=be(),o=Et(),s=X0(2);if(o.firstUpdatePass&&z1(o,n,s,r),e!==lr&&Wr(i,s,e)){let a=o.data[Li()];Y1(o,a,i,i[Ze],n,i[s+1]=Z1(e,t),r,s)}}function q1(n,e){return e>=n.expandoStartIndex}function z1(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Li()],s=q1(n,t);J1(o,r)&&e===null&&!s&&(e=!1),e=G1(i,o,e,r),j1(i,o,e,t,s,r)}}function G1(n,e,t,r){let i=BN(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Ap(null,n,e,t,r),t=Na(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Ap(i,n,e,t,r),o===null){let u=W1(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Ap(null,n,e,u[1],r),u=Na(u,e.attrs,r),K1(n,e,r,u))}else o=Q1(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function W1(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Xo(r)!==0)return n[Fi(r)]}function K1(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Fi(i)]=r}function Q1(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Na(r,s,t)}return Na(r,e.attrs,t)}function Ap(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Na(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Na(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),qM(n,s,t?!0:e[++o]))}return n===void 0?null:n}function Y1(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=U1(l)?r0(u,e,t,i,Xo(l),s):void 0;if(!jl(h)){jl(o)||V1(l)&&(o=r0(u,null,t,i,a,s));let p=$0(Li(),t);nO(r,s,p,i,o)}}function r0(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,y=t[i+1];y===lr&&(y=p?Qt:void 0);let _=p?vp(y,r):h===r?y:void 0;if(l&&!jl(_)&&(_=vp(u,r)),jl(_)&&(a=_,s))return a;let S=n[i+1];i=s?Fi(S):Xo(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=vp(u,r))}return a}function jl(n){return n!==void 0}function Z1(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ot(ka(n)))),n}function J1(n,e){return(n.flags&(e?8:16))!==0}function X1(n,e,t,r,i,o){let s=e.consts,a=Wo(s,i),u=Fa(e,n,2,r,a);return Jg(e,t,u,Wo(s,o)),u.attrs!==null&&Vl(u,u.attrs,!1),u.mergedAttrs!==null&&Vl(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function R(n,e,t,r){let i=be(),o=Et(),s=Jt+n,a=i[Ze],u=o.firstCreatePass?X1(s,o,i,e,t,r):o.data[s],l=ek(o,i,u,a,e,n);i[s]=l;let h=Kl(u);return Vi(u,!0),jD(a,l,u),!S1(u)&&Jl()&&rd(o,i,l,u),AN()===0&&zr(l,i),xN(),h&&(Qg(o,i,u),Kg(o,u,i)),r!==null&&Yg(i,u),R}function A(){let n=Dt();Rg()?Z0():(n=n.parent,Vi(n,!1));let e=n;NN(e)&&PN(),RN();let t=Et();return t.firstCreatePass&&(ed(t,n),Ag(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&KN(e)&&n0(t,e,be(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&QN(e)&&n0(t,e,be(),e.stylesWithoutHost,!1),A}function tn(n,e,t,r){return R(n,e,t,r),A(),tn}var ek=(n,e,t,r,i,o)=>(Xl(!0),ND(r,i,qN()));function tk(n,e,t,r,i){let o=e.consts,s=Wo(o,r),a=Fa(e,n,8,"ng-container",s);s!==null&&Vl(a,s,!0);let u=Wo(o,i);return Jg(e,t,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function dd(n,e,t){let r=be(),i=Et(),o=n+Jt,s=i.firstCreatePass?tk(o,i,r,e,t):i.data[o];Vi(s,!0);let a=nk(i,r,s,n);return r[o]=a,Jl()&&rd(i,r,a,s),zr(a,r),Kl(s)&&(Qg(i,r,s),Kg(i,s,r)),t!=null&&Yg(r,s),dd}function hd(){let n=Dt(),e=Et();return Rg()?Z0():(n=n.parent,Vi(n,!1)),e.firstCreatePass&&(ed(e,n),Ag(n)&&e.queries.elementEnd(n)),hd}var nk=(n,e,t,r)=>(Xl(!0),jP(e[Ze],""));function Xe(){return be()}var Bl="en-US";var rk=Bl;function ik(n){typeof n=="string"&&(rk=n.toLowerCase().replace(/_/g,"-"))}var ok=(n,e,t)=>{};function Ae(n,e,t,r){let i=be(),o=Et(),s=Dt();return gC(o,i,i[Ze],s,n,e,r),Ae}function sk(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Dl],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function gC(n,e,t,r,i,o,s){let a=Kl(r),l=n.firstCreatePass&&xO(n),h=e[hn],p=AO(e),y=!0;if(r.type&3||s){let O=Xt(r,e),M=s?s(O):O,j=p.length,K=s?de=>s(Pn(de[r.index])):r.index,Q=null;if(!s&&a&&(Q=sk(n,e,i,r.index)),Q!==null){let de=Q.__ngLastListenerFn__||Q;de.__ngNextListenerFn__=o,Q.__ngLastListenerFn__=o,y=!1}else{o=o0(r,e,h,o),ok(O,i,o);let de=t.listen(M,i,o);p.push(o,de),l&&l.push(i,K,j,j+1)}}else o=o0(r,e,h,o);let _=r.outputs,S;if(y&&_!==null&&(S=_[i])){let O=S.length;if(O)for(let M=0;M<O;M+=2){let j=S[M],K=S[M+1],Be=e[j][K].subscribe(o),re=p.length;p.push(o,Be),l&&l.push(i,r.index,re,-(re+1))}}}function i0(n,e,t,r){let i=Ie(null);try{return An(6,e,t),t(r)!==!1}catch(o){return JD(n,o),!1}finally{An(7,e,t),Ie(i)}}function o0(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?Zr(n.index,e):e;tm(s,5);let a=i0(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=i0(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function Ne(n=1){return HN(n)}function ak(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function We(n){let e=kN();return q0(e,Jt+n)}function P(n,e=""){let t=be(),r=Et(),i=n+Jt,o=r.firstCreatePass?Fa(r,i,1,e,null):r.data[i],s=ck(r,t,o,e,n);t[i]=s,Jl()&&rd(r,t,s,o),Vi(o,!1)}var ck=(n,e,t,r,i)=>(Xl(!0),LP(e[Ze],r));function nn(n){return Ct("",n,""),nn}function Ct(n,e,t){let r=be(),i=k1(r,n,e,t);return i!==lr&&XD(r,Li(),i),Ct}function Ua(n,e,t,r,i){let o=be(),s=F1(o,n,e,t,r,i);return s!==lr&&XD(o,Li(),s),Ua}function Ve(n,e,t){lC(e)&&(e=e());let r=be(),i=Zl();if(Wr(r,i,e)){let o=Et(),s=Og();WD(o,s,r,n,e,r[Ze],t,!1)}return Ve}function qe(n,e){let t=lC(n);return t&&n.set(e),t}function Le(n,e){let t=be(),r=Et(),i=Dt();return gC(r,t,t[Ze],i,n,e),Le}function uk(n,e,t){let r=Et();if(r.firstCreatePass){let i=qr(n);fg(t,r.data,r.blueprint,i,!0),fg(e,r.data,r.blueprint,i,!1)}}function fg(n,e,t,r,i){if(n=Pt(n),Array.isArray(n))for(let o=0;o<n.length;o++)fg(n[o],e,t,r,i);else{let o=Et(),s=be(),a=Dt(),u=Ho(n)?n:Pt(n.provide),l=O0(n),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(Ho(n)||!n.multi){let _=new Oi(l,i,$),S=Rp(u,e,i?h:h+y,p);S===-1?(zp(Rl(a,s),o,u),xp(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(_),s.push(_)):(t[S]=_,s[S]=_)}else{let _=Rp(u,e,h+y,p),S=Rp(u,e,h,h+y),O=_>=0&&t[_],M=S>=0&&t[S];if(i&&!M||!i&&!O){zp(Rl(a,s),o,u);let j=hk(i?dk:lk,t.length,i,r,l);!i&&M&&(t[S].providerFactory=j),xp(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(j),s.push(j)}else{let j=mC(t[i?S:_],l,!i&&r);xp(o,n,_>-1?_:S,j)}!i&&r&&M&&t[S].componentProviders++}}}function xp(n,e,t,r){let i=Ho(e),o=dN(e);if(i||o){let u=(o?Pt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function mC(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Rp(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function lk(n,e,t,r){return pg(this.multi,[])}function dk(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Ko(t,t[he],this.providerFactory.index,r);o=a.slice(0,s),pg(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],pg(i,o);return o}function pg(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function hk(n,e,t,r,i){let o=new Oi(n,t,$);return o.multi=[],o.index=e,o.componentProviders=0,mC(o,i,r&&!t),o}function Jr(n,e=[]){return t=>{t.providersResolver=(r,i)=>uk(r,i?i(n):n,e)}}var fk=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=M0(!1,t.type),i=r.length>0?ud([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=G({token:n,providedIn:"environment",factory:()=>new n(te(qt))})}}return n})();function et(n){rs("NgStandalone"),n.getStandaloneInjector=e=>e.get(fk).getOrCreateStandaloneInjector(n)}function yC(n,e,t,r){return wC(be(),Mg(),n,e,t,r)}function vC(n,e,t,r,i){return pk(be(),Mg(),n,e,t,r,i)}function _C(n,e){let t=n[e];return t===lr?void 0:t}function wC(n,e,t,r,i,o){let s=e+t;return Wr(n,s,i)?hC(n,s+1,o?r.call(o,i):r(i)):_C(n,s+1)}function pk(n,e,t,r,i,o,s){let a=e+t;return fC(n,a,i,o)?hC(n,a+2,s?r.call(s,i,o):r(i,o)):_C(n,a+2)}function ja(n,e){let t=Et(),r,i=n+Jt;t.firstCreatePass?(r=gk(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Ri(r.type,!0)),s,a=Lt($);try{let u=xl(!1),l=o();return xl(u),ak(t,be(),i,l),l}finally{Lt(a)}}function gk(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Ba(n,e,t){let r=n+Jt,i=be(),o=q0(i,r);return mk(i,r)?wC(i,Mg(),e,o.transform,t,o):o.transform(t)}function mk(n,e){return n[he].data[e].pure}function Ui(n,e){return sC(n,e)}var sr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},IC=new sr("18.2.10");var fd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var EC=new z("");function Xr(n){return!!n&&typeof n.then=="function"}function im(n){return!!n&&typeof n.subscribe=="function"}var pd=new z(""),DC=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=k(pd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Xr(o))t.push(o);else if(im(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gd=new z("");function yk(){YI(()=>{throw new q(600,!1)})}function vk(n){return n.isBoundToModule}var _k=10;function wk(n,e,t){try{let r=t();return Xr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var ji=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(gP),this.afterRenderManager=k(pC),this.zonelessEnabled=k(cd),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new at,this.afterTick=new at,this.componentTypes=[],this.components=[],this.isStable=k(ts).hasPendingTasks.pipe(X(t=>!t)),this._injector=k(qt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Fl;if(!this._injector.get(DC).done){let y=!i&&S0(t),_=!1;throw new q(405,_)}let s;i?s=t:s=this._injector.get(Yo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=vk(s)?void 0:this._injector.get(Gr),u=r||s.selector,l=s.create(pt.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(EC,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),ml(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new q(101,!1);let t=Ie(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ie(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Zo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<_k;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)Ik(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ql(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ml(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(gd,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ml(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new q(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ml(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ik(n,e,t,r){if(!t&&!Ql(n))return;nC(n,e,t&&!r?0:1)}var gg=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},md=(()=>{class n{compileModuleSync(t){return new cg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=A0(t),o=MD(i.declarations).reduce((s,a)=>{let u=Hr(a);return u&&s.push(new Jo(u)),s},[]);return new gg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ek=(()=>{class n{constructor(){this.zone=k(Te),this.changeDetectionScheduler=k(Qo),this.applicationRef=k(ji)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Dk=new z("",{factory:()=>!1});function CC({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Te(ce(L({},TC()),{scheduleInRootZone:t})),[{provide:Te,useFactory:n},{provide:$o,multi:!0,useFactory:()=>{let r=k(Ek,{optional:!0});return()=>r.initialize()}},{provide:$o,multi:!0,useFactory:()=>{let r=k(Ck);return()=>{r.initialize()}}},e===!0?{provide:aC,useValue:!0}:[],{provide:cC,useValue:t??vD}]}function bC(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=CC({ngZoneFactory:()=>{let i=TC(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&rs("NgZone_CoalesceEvent"),new Te(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return kn([{provide:Dk,useValue:!0},{provide:cd,useValue:!1},r])}function TC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Ck=(()=>{class n{constructor(){this.subscription=new He,this.initialized=!1,this.zone=k(Te),this.pendingTasks=k(ts)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Te.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Te.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var bk=(()=>{class n{constructor(){this.appRef=k(ji),this.taskService=k(ts),this.ngZone=k(Te),this.zonelessEnabled=k(cd),this.disableScheduling=k(aC,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new He,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Nl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(cC,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Yp||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?BE:_D;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Nl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,BE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Tk(){return typeof $localize<"u"&&$localize.locale||Bl}var om=new z("",{providedIn:"root",factory:()=>k(om,ue.Optional|ue.SkipSelf)||Tk()});var mg=new z("");function hl(n){return!n.moduleRef}function Sk(n){let e=hl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Te);return t.run(()=>{hl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ir,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),hl(n)){let o=()=>e.destroy(),s=n.platformInjector.get(mg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(mg);s.add(o),n.moduleRef.onDestroy(()=>{ml(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return wk(r,t,()=>{let o=e.get(DC);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(om,Bl);if(ik(s||Bl),hl(n)){let a=e.get(ji);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return Ak(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function Ak(n,e){let t=n.injector.get(ji);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new q(-403,!1);e.push(n)}var yl=null;function xk(n=[],e){return pt.create({name:e,providers:[{provide:zl,useValue:"platform"},{provide:mg,useValue:new Set([()=>yl=null])},...n]})}function Rk(n=[]){if(yl)return yl;let e=xk(n);return yl=e,yk(),Mk(e),e}function Mk(n){n.get(Bg,null)?.forEach(t=>t())}var ei=(()=>{class n{static{this.__NG_ELEMENT_ID__=Nk}}return n})();function Nk(n){return Pk(Dt(),be(),(n&16)===16)}function Pk(n,e,t){if(Wl(n)&&!t){let r=Zr(n.index,e);return new ki(r,r)}else if(n.type&175){let r=e[Nn];return new ki(r,e)}return null}var yg=class{constructor(){}supports(e){return dC(e)}create(e){return new vg(e)}},Ok=(n,e)=>e,vg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Ok}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<s0(r,i,o)?t:r,a=s0(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let y=0;y<l;y++){let _=y<o.length?o[y]:o[y]=0,S=_+y;h<=S&&S<l&&(o[y]=_+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!dC(e))throw new q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,b1(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new _g(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new $l),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new $l),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},_g=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},wg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},$l=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new wg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function s0(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function a0(){return new sm([new yg])}var sm=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:a0})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||a0()),deps:[[n,new Dg,new It]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new q(901,!1)}}return n})();function SC(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=Rk(r),o=[CC({}),{provide:Qo,useExisting:bk},...t||[]],s=new Ul({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return Sk({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function ti(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function $a(n,e){rs("NgSignals");let t=WI(n);return e?.equal&&(t[nr].equal=e.equal),t}function gn(n){let e=Ie(null);try{return n()}finally{Ie(e)}}function AC(n){let e=Hr(n);if(!e)return null;let t=new Jo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var OC=null;function hr(){return OC}function kC(n){OC??=n}var yd=class{};var Ut=new z(""),pm=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>k(kk),providedIn:"platform"})}}return n})(),FC=new z(""),kk=(()=>{class n extends pm{constructor(){super(),this._doc=k(Ut),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return hr().getBaseHref(this._doc)}onPopState(t){let r=hr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=hr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function gm(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function xC(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function dr(n){return n&&n[0]!=="?"?"?"+n:n}var fr=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>k(mm),providedIn:"root"})}}return n})(),VC=new z(""),mm=(()=>{class n extends fr{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(Ut).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return gm(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+dr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+dr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+dr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(te(pm),te(VC,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),LC=(()=>{class n extends fr{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=gm(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+dr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+dr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(te(pm),te(VC,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),is=(()=>{class n{constructor(t){this._subject=new Ye,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Lk(xC(RC(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+dr(r))}normalize(t){return n.stripTrailingSlash(Vk(this._basePath,RC(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+dr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+dr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=dr}static{this.joinWithSlash=gm}static{this.stripTrailingSlash=xC}static{this.\u0275fac=function(r){return new(r||n)(te(fr))}}static{this.\u0275prov=G({token:n,factory:()=>Fk(),providedIn:"root"})}}return n})();function Fk(){return new is(te(fr))}function Vk(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function RC(n){return n.replace(/\/index.html$/,"")}function Lk(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function UC(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var am=/\s+/,MC=[],jC=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=MC,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(am):MC}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(am):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(am).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)($(pn),$(Ln))}}static{this.\u0275dir=Fe({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var cm=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},_d=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new cm(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),NC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);NC(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)($(ns),$(ad),$(sm))}}static{this.\u0275dir=Fe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function NC(n,e){n.context.$implicit=e.item}var rn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new um,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){PC("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){PC("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)($(ns),$(ad))}}static{this.\u0275dir=Fe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),um=class{constructor(){this.$implicit=null,this.ngIf=null}};function PC(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Ot(e)}'.`)}function Uk(n,e){return new q(2100,!1)}var lm=class{createSubscription(e,t){return gn(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){gn(()=>e.unsubscribe())}},dm=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},jk=new dm,Bk=new lm,wd=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Xr(t))return jk;if(im(t))return Bk;throw Uk(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)($(ei,16))}}static{this.\u0275pipe=C0({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var mn=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qr({type:n})}static{this.\u0275inj=Kr({})}}return n})(),ym="browser",$k="server";function Hk(n){return n===ym}function vm(n){return n===$k}var BC=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>Hk(k(Vn))?new hm(k(Ut),window):new fm})}}return n})(),hm=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=qk(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function qk(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var fm=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},vd=class{};var Im=class extends yd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Em=class n extends Im{static makeCurrent(){kC(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=zk();return t==null?null:Gk(t)}resetBaseElement(){qa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return UC(document.cookie,e)}},qa=null;function zk(){return qa=qa||document.querySelector("base"),qa?qa.getAttribute("href"):null}function Gk(n){return new URL(n,document.baseURI).pathname}var Wk=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Dm=new z(""),zC=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(te(Dm),te(Te))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Id=class{constructor(e){this._doc=e}},_m="ng-app-id",GC=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=vm(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${_m}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(_m),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(_m,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(te(Ut),te(jg),te($g,8),te(Vn))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),wm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},bm=/%COMP%/g,WC="%COMP%",Kk=`_nghost-${WC}`,Qk=`_ngcontent-${WC}`,Yk=!0,Zk=new z("",{providedIn:"root",factory:()=>Yk});function Jk(n){return Qk.replace(bm,n)}function Xk(n){return Kk.replace(bm,n)}function KC(n,e){return e.map(t=>t.replace(bm,n))}var $C=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=vm(a),this.defaultRenderer=new za(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Rn.ShadowDom&&(r=ce(L({},r),{encapsulation:Rn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Ed?i.applyToHost(t):i instanceof Ga&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Rn.Emulated:o=new Ed(u,l,r,this.appId,h,s,a,p);break;case Rn.ShadowDom:return new Cm(u,l,t,r,s,a,this.nonce,p);default:o=new Ga(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(te(zC),te(GC),te(jg),te(Zk),te(Ut),te(Vn),te(Te),te($g))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),za=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(wm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(HC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(HC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=wm[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=wm[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(or.DashCase|or.Important)?e.style.setProperty(t,r,i&or.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&or.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=hr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function HC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Cm=class extends za{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=KC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ga=class extends za{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?KC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ed=class extends Ga{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=Jk(l),this.hostAttr=Xk(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},eF=(()=>{class n extends Id{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(te(Ut))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),qC=["alt","control","meta","shift"],tF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nF={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},rF=(()=>{class n extends Id{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>hr().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),qC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=tF[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),qC.forEach(s=>{if(s!==i){let a=nF[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(te(Ut))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function QC(n,e){return SC(L({rootComponent:n},iF(e)))}function iF(n){return{appProviders:[...uF,...n?.providers??[]],platformProviders:cF}}function oF(){Em.makeCurrent()}function sF(){return new ir}function aF(){return TD(document),document}var cF=[{provide:Vn,useValue:ym},{provide:Bg,useValue:oF,multi:!0},{provide:Ut,useFactory:aF,deps:[]}];var uF=[{provide:zl,useValue:"root"},{provide:ir,useFactory:sF,deps:[]},{provide:Dm,useClass:eF,multi:!0,deps:[Ut,Te,Vn]},{provide:Dm,useClass:rF,multi:!0,deps:[Ut]},$C,GC,zC,{provide:Zo,useExisting:$C},{provide:vd,useClass:Wk,deps:[]},[]];var YC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(te(Ut))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ae="primary",ac=Symbol("RouteTitle"),Rm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ls(n){return new Rm(n)}function dF(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function hF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Un(n[t],e[t]))return!1;return!0}function Un(n,e){let t=n?Mm(n):void 0,r=e?Mm(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!ab(n[i],e[i]))return!1;return!0}function Mm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ab(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function cb(n){return n.length>0?n[n.length-1]:null}function ri(n){return fp(n)?n:Xr(n)?Oe(Promise.resolve(n)):Y(n)}var fF={exact:lb,subset:db},ub={exact:pF,subset:gF,ignored:()=>!0};function ZC(n,e,t){return fF[t.paths](n.root,e.root,t.matrixParams)&&ub[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function pF(n,e){return Un(n,e)}function lb(n,e,t){if(!$i(n.segments,e.segments)||!bd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!lb(n.children[r],e.children[r],t))return!1;return!0}function gF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ab(n[t],e[t]))}function db(n,e,t){return hb(n,e,e.segments,t)}function hb(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!$i(i,t)||e.hasChildren()||!bd(i,t,r))}else if(n.segments.length===t.length){if(!$i(n.segments,t)||!bd(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!db(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!$i(n.segments,i)||!bd(n.segments,i,r)||!n.children[ae]?!1:hb(n.children[ae],e,o,r)}}function bd(n,e,t){return e.every((r,i)=>ub[t](n[i].parameters,r.parameters))}var gr=class{constructor(e=new Se([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ls(this.queryParams),this._queryParamMap}toString(){return vF.serialize(this)}},Se=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Td(this)}},Bi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ls(this.parameters),this._parameterMap}toString(){return pb(this)}};function mF(n,e){return $i(n,e)&&n.every((t,r)=>Un(t.parameters,e[r].parameters))}function $i(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function yF(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ae&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ae&&(t=t.concat(e(i,r)))}),t}var cc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>new ds,providedIn:"root"})}}return n})(),ds=class{parse(e){let t=new Pm(e);return new gr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Wa(e.root,!0)}`,r=IF(e.queryParams),i=typeof e.fragment=="string"?`#${_F(e.fragment)}`:"";return`${t}${r}${i}`}},vF=new ds;function Td(n){return n.segments.map(e=>pb(e)).join("/")}function Wa(n,e){if(!n.hasChildren())return Td(n);if(e){let t=n.children[ae]?Wa(n.children[ae],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ae&&r.push(`${i}:${Wa(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=yF(n,(r,i)=>i===ae?[Wa(n.children[ae],!1)]:[`${i}:${Wa(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ae]!=null?`${Td(n)}/${t[0]}`:`${Td(n)}/(${t.join("//")})`}}function fb(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Dd(n){return fb(n).replace(/%3B/gi,";")}function _F(n){return encodeURI(n)}function Nm(n){return fb(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Sd(n){return decodeURIComponent(n)}function JC(n){return Sd(n.replace(/\+/g,"%20"))}function pb(n){return`${Nm(n.path)}${wF(n.parameters)}`}function wF(n){return Object.entries(n).map(([e,t])=>`;${Nm(e)}=${Nm(t)}`).join("")}function IF(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Dd(t)}=${Dd(i)}`).join("&"):`${Dd(t)}=${Dd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var EF=/^[^\/()?;#]+/;function Tm(n){let e=n.match(EF);return e?e[0]:""}var DF=/^[^\/()?;=#]+/;function CF(n){let e=n.match(DF);return e?e[0]:""}var bF=/^[^=?&#]+/;function TF(n){let e=n.match(bF);return e?e[0]:""}var SF=/^[^&#]+/;function AF(n){let e=n.match(SF);return e?e[0]:""}var Pm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Se([],{}):new Se([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ae]=new Se(e,t)),r}parseSegment(){let e=Tm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new q(4009,!1);return this.capture(e),new Bi(Sd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=CF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Tm(this.remaining);i&&(r=i,this.capture(r))}e[Sd(t)]=Sd(r)}parseQueryParam(e){let t=TF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=AF(this.remaining);s&&(r=s,this.capture(r))}let i=JC(t),o=JC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Tm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new q(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ae);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ae]:new Se([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new q(4011,!1)}};function gb(n){return n.segments.length>0?new Se([],{[ae]:n}):n}function mb(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=mb(i);if(r===ae&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Se(n.segments,e);return xF(t)}function xF(n){if(n.numberOfChildren===1&&n.children[ae]){let e=n.children[ae];return new Se(n.segments.concat(e.segments),e.children)}return n}function Hi(n){return n instanceof gr}function RF(n,e,t=null,r=null){let i=yb(n);return vb(i,e,t,r)}function yb(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Se(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=gb(r);return e??i}function vb(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Sm(i,i,i,t,r);let o=MF(e);if(o.toRoot())return Sm(i,i,new Se([],{}),t,r);let s=NF(o,i,n),a=s.processChildren?Ya(s.segmentGroup,s.index,o.commands):wb(s.segmentGroup,s.index,o.commands);return Sm(i,s.segmentGroup,a,t,r)}function Ad(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Xa(n){return typeof n=="object"&&n!=null&&n.outlets}function Sm(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=_b(n,e,t);let a=gb(mb(s));return new gr(a,o,i)}function _b(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=_b(o,e,t)}),new Se(n.segments,r)}var xd=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ad(r[0]))throw new q(4003,!1);let i=r.find(Xa);if(i&&i!==cb(r))throw new q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function MF(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new xd(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new xd(t,e,r)}var as=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function NF(n,e,t){if(n.isAbsolute)return new as(e,!0,0);if(!t)return new as(e,!1,NaN);if(t.parent===null)return new as(t,!0,0);let r=Ad(n.commands[0])?0:1,i=t.segments.length-1+r;return PF(t,i,n.numberOfDoubleDots)}function PF(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new q(4005,!1);i=r.segments.length}return new as(r,!1,i-o)}function OF(n){return Xa(n[0])?n[0].outlets:{[ae]:n}}function wb(n,e,t){if(n??=new Se([],{}),n.segments.length===0&&n.hasChildren())return Ya(n,e,t);let r=kF(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Se(n.segments.slice(0,r.pathIndex),{});return o.children[ae]=new Se(n.segments.slice(r.pathIndex),n.children),Ya(o,0,i)}else return r.match&&i.length===0?new Se(n.segments,{}):r.match&&!n.hasChildren()?Om(n,e,t):r.match?Ya(n,0,i):Om(n,e,t)}function Ya(n,e,t){if(t.length===0)return new Se(n.segments,{});{let r=OF(t),i={};if(Object.keys(r).some(o=>o!==ae)&&n.children[ae]&&n.numberOfChildren===1&&n.children[ae].segments.length===0){let o=Ya(n.children[ae],e,t);return new Se(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=wb(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Se(n.segments,i)}}function kF(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Xa(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!eb(u,l,s))return o;r+=2}else{if(!eb(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Om(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Xa(o)){let u=FF(o.outlets);return new Se(r,u)}if(i===0&&Ad(t[0])){let u=n.segments[e];r.push(new Bi(u.path,XC(t[0]))),i++;continue}let s=Xa(o)?o.outlets[ae]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Ad(a)?(r.push(new Bi(s,XC(a))),i+=2):(r.push(new Bi(s,{})),i++)}return new Se(r,{})}function FF(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Om(new Se([],{}),0,r))}),e}function XC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function eb(n,e,t){return n==t.path&&Un(e,t.parameters)}var Za="imperative",ct=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ct||{}),on=class{constructor(e,t){this.id=e,this.url=t}},hs=class extends on{constructor(e,t,r="imperative",i=null){super(e,t),this.type=ct.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},jn=class extends on{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=ct.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Gt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Gt||{}),Rd=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Rd||{}),pr=class extends on{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ct.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ni=class extends on{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ct.NavigationSkipped}},ec=class extends on{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=ct.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Md=class extends on{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},km=class extends on{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fm=class extends on{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ct.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Vm=class extends on{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lm=class extends on{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ct.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Um=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},jm=class{constructor(e){this.route=e,this.type=ct.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Bm=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$m=class{constructor(e){this.snapshot=e,this.type=ct.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hm=class{constructor(e){this.snapshot=e,this.type=ct.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qm=class{constructor(e){this.snapshot=e,this.type=ct.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nd=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=ct.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},tc=class{},fs=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function VF(n,e){return n.providers&&!n._injector&&(n._injector=ud(n.providers,e,`Route: ${n.path}`)),n._injector??e}function yn(n){return n.outlet||ae}function LF(n,e){let t=n.filter(r=>yn(r)===e);return t.push(...n.filter(r=>yn(r)!==e)),t}function uc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var zm=class{get injector(){return uc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new lc(this.rootInjector),this.attachRef=null}},lc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new zm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(te(qt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Pd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Gm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Gm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Wm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Wm(e,this._root).map(t=>t.value)}};function Gm(n,e){if(n===e.value)return e;for(let t of e.children){let r=Gm(n,t);if(r)return r}return null}function Wm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Wm(n,t);if(r.length)return r.unshift(e),r}return[]}var zt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ss(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Od=class extends Pd{constructor(e,t){super(e),this.snapshot=t,ny(this,e)}toString(){return this.snapshot.toString()}};function Ib(n){let e=UF(n),t=new Ge([new Bi("",{})]),r=new Ge({}),i=new Ge({}),o=new Ge({}),s=new Ge(""),a=new Bn(t,r,o,s,i,ae,n,e.root);return a.snapshot=e.root,new Od(new zt(a,[]),e)}function UF(n){let e={},t={},r={},i="",o=new cs([],e,r,i,t,ae,n,null,{});return new Fd("",new zt(o,[]))}var Bn=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(X(l=>l[ac]))??Y(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(X(e=>ls(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(X(e=>ls(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function kd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&Db(i)&&(r.resolve[ac]=i.title),r}var cs=class{get title(){return this.data?.[ac]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ls(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ls(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Fd=class extends Pd{constructor(e,t){super(t),this.url=e,ny(this,t)}toString(){return Eb(this._root)}};function ny(n,e){e.value._routerState=n,e.children.forEach(t=>ny(n,t))}function Eb(n){let e=n.children.length>0?` { ${n.children.map(Eb).join(", ")} } `:"";return`${n.value}${e}`}function Am(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Un(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Un(e.params,t.params)||n.paramsSubject.next(t.params),hF(e.url,t.url)||n.urlSubject.next(t.url),Un(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Km(n,e){let t=Un(n.params,e.params)&&mF(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Km(n.parent,e.parent))}function Db(n){return typeof n.title=="string"||n.title===null}var ry=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ae,this.activateEvents=new Ye,this.deactivateEvents=new Ye,this.attachEvents=new Ye,this.detachEvents=new Ye,this.parentContexts=k(lc),this.location=k(ns),this.changeDetector=k(ei),this.inputBinder=k(jd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new q(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new q(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Qm(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Fe({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Yr]})}}return n})(),Qm=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Bn?this.route:e===lc?this.childContexts:this.parent.get(e,t)}},jd=new z(""),tb=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Si([r.queryParams,r.params,r.data]).pipe(Nt(([o,s,a],u)=>(a=L(L(L({},o),s),a),u===0?Y(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=AC(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function jF(n,e,t){let r=nc(n,e._root,t?t._root:void 0);return new Od(r,e)}function nc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=BF(n,e,t);return new zt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>nc(n,a)),s}}let r=$F(e.value),i=e.children.map(o=>nc(n,o));return new zt(r,i)}}function BF(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return nc(n,r,i);return nc(n,r)})}function $F(n){return new Bn(new Ge(n.url),new Ge(n.params),new Ge(n.queryParams),new Ge(n.fragment),new Ge(n.data),n.outlet,n.component,n)}var rc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Cb="ngNavigationCancelingError";function Vd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Hi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=bb(!1,Gt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function bb(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Cb]=!0,t.cancellationCode=e,t}function HF(n){return Tb(n)&&Hi(n.url)}function Tb(n){return!!n&&n[Cb]}var qF=(n,e,t,r)=>X(i=>(new Ym(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Ym=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Am(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ss(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ss(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ss(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ss(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new qm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new $m(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Am(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Am(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ld=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},us=class{constructor(e,t){this.component=e,this.route=t}};function zF(n,e,t){let r=n._root,i=e?e._root:null;return Ka(r,i,t,[r.value])}function GF(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function gs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!d0(n)?n:e.get(n):r}function Ka(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ss(e);return n.children.forEach(s=>{WF(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ja(a,t.getContext(s),i)),i}function WF(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=KF(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ld(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ka(n,e,a?a.children:null,r,i):Ka(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new us(a.outlet.component,s))}else s&&Ja(e,a,i),i.canActivateChecks.push(new Ld(r)),o.component?Ka(n,null,a?a.children:null,r,i):Ka(n,null,t,r,i);return i}function KF(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!$i(n.url,e.url);case"pathParamsOrQueryParamsChange":return!$i(n.url,e.url)||!Un(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Km(n,e)||!Un(n.queryParams,e.queryParams);case"paramsChange":default:return!Km(n,e)}}function Ja(n,e,t){let r=ss(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ja(s,e.children.getContext(o),t):Ja(s,null,t):Ja(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new us(e.outlet.component,i)):t.canDeactivateChecks.push(new us(null,i)):t.canDeactivateChecks.push(new us(null,i))}function dc(n){return typeof n=="function"}function QF(n){return typeof n=="boolean"}function YF(n){return n&&dc(n.canLoad)}function ZF(n){return n&&dc(n.canActivate)}function JF(n){return n&&dc(n.canActivateChild)}function XF(n){return n&&dc(n.canDeactivate)}function eV(n){return n&&dc(n.canMatch)}function Sb(n){return n instanceof rr||n?.name==="EmptyError"}var Cd=Symbol("INITIAL_VALUE");function ps(){return Nt(n=>Si(n.map(e=>e.pipe(wt(1),al(Cd)))).pipe(X(e=>{for(let t of e)if(t!==!0){if(t===Cd)return Cd;if(t===!1||tV(t))return t}return!0}),Ht(e=>e!==Cd),wt(1)))}function tV(n){return Hi(n)||n instanceof rc}function nV(n,e){return Qe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Y(ce(L({},t),{guardsResult:!0})):rV(s,r,i,n).pipe(Qe(a=>a&&QF(a)?iV(r,o,n,e):Y(a)),X(a=>ce(L({},t),{guardsResult:a})))})}function rV(n,e,t,r){return Oe(n).pipe(Qe(i=>uV(i.component,i.route,t,e,r)),Sn(i=>i!==!0,!0))}function iV(n,e,t,r){return Oe(e).pipe(Ai(i=>No(sV(i.route.parent,r),oV(i.route,r),cV(n,i.path,t),aV(n,i.route,t))),Sn(i=>i!==!0,!0))}function oV(n,e){return n!==null&&e&&e(new Hm(n)),Y(!0)}function sV(n,e){return n!==null&&e&&e(new Bm(n)),Y(!0)}function aV(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(o=>il(()=>{let s=uc(e)??t,a=gs(o,s),u=ZF(a)?a.canActivate(e,n):Fn(s,()=>a(e,n));return ri(u).pipe(Sn())}));return Y(i).pipe(ps())}function cV(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>GF(s)).filter(s=>s!==null).map(s=>il(()=>{let a=s.guards.map(u=>{let l=uc(s.node)??t,h=gs(u,l),p=JF(h)?h.canActivateChild(r,n):Fn(l,()=>h(r,n));return ri(p).pipe(Sn())});return Y(a).pipe(ps())}));return Y(o).pipe(ps())}function uV(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let u=uc(e)??i,l=gs(a,u),h=XF(l)?l.canDeactivate(n,e,t,r):Fn(u,()=>l(n,e,t,r));return ri(h).pipe(Sn())});return Y(s).pipe(ps())}function lV(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let o=i.map(s=>{let a=gs(s,n),u=YF(a)?a.canLoad(e,t):Fn(n,()=>a(e,t));return ri(u)});return Y(o).pipe(ps(),Ab(r))}function Ab(n){return Uu(ot(e=>{if(typeof e!="boolean")throw Vd(n,e)}),X(e=>e===!0))}function dV(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let o=i.map(s=>{let a=gs(s,n),u=eV(a)?a.canMatch(e,t):Fn(n,()=>a(e,t));return ri(u)});return Y(o).pipe(ps(),Ab(r))}var ic=class{constructor(e){this.segmentGroup=e||null}},oc=class extends Error{constructor(e){super(),this.urlTree=e}};function os(n){return Ro(new ic(n))}function hV(n){return Ro(new q(4e3,!1))}function fV(n){return Ro(bb(!1,Gt.GuardRejected))}var Zm=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[ae])return hV(`${e.redirectTo}`);i=i.children[ae]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:y,params:_,data:S,title:O}=i,M=Fn(o,()=>a({params:_,data:S,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:y,title:O}));if(M instanceof gr)throw new oc(M);t=M}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new oc(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new gr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Se(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new q(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Jm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pV(n,e,t,r,i){let o=xb(n,e,t);return o.matched?(r=VF(e,r),dV(r,e,t,i).pipe(X(s=>s===!0?o:L({},Jm)))):Y(o)}function xb(n,e,t){if(e.path==="**")return gV(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},Jm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||dF)(t,n,e);if(!i)return L({},Jm);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function gV(n){return{matched:!0,parameters:n.length>0?cb(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function nb(n,e,t,r){return t.length>0&&vV(n,t,r)?{segmentGroup:new Se(e,yV(r,new Se(t,n.children))),slicedSegments:[]}:t.length===0&&_V(n,t,r)?{segmentGroup:new Se(n.segments,mV(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Se(n.segments,n.children),slicedSegments:t}}function mV(n,e,t,r){let i={};for(let o of t)if(Bd(n,e,o)&&!r[yn(o)]){let s=new Se([],{});i[yn(o)]=s}return L(L({},r),i)}function yV(n,e){let t={};t[ae]=e;for(let r of n)if(r.path===""&&yn(r)!==ae){let i=new Se([],{});t[yn(r)]=i}return t}function vV(n,e,t){return t.some(r=>Bd(n,e,r)&&yn(r)!==ae)}function _V(n,e,t){return t.some(r=>Bd(n,e,r))}function Bd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function wV(n,e,t){return e.length===0&&!n.children[t]}var Xm=class{};function IV(n,e,t,r,i,o,s="emptyOnly"){return new ey(n,e,t,r,i,s,o).recognize()}var EV=31,ey=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Zm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new q(4002,`'${e.segmentGroup}'`)}recognize(){let e=nb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(X(({children:t,rootSnapshot:r})=>{let i=new zt(r,t),o=new Fd("",i),s=RF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new cs([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ae,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ae,t).pipe(X(r=>({children:r,rootSnapshot:t})),Vr(r=>{if(r instanceof oc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ic?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(X(s=>s instanceof zt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Oe(o).pipe(Ai(s=>{let a=r.children[s],u=LF(t,s);return this.processSegmentGroup(e,u,a,s,i)}),sl((s,a)=>(s.push(...a),s)),Lr(null),mp(),Qe(s=>{if(s===null)return os(r);let a=Rb(s);return DV(a),Y(a)}))}processSegment(e,t,r,i,o,s,a){return Oe(t).pipe(Ai(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Vr(l=>{if(l instanceof ic)return Y(null);throw l}))),Sn(u=>!!u),Vr(u=>{if(Sb(u))return wV(r,i,o)?Y(new Xm):os(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return yn(r)!==s&&(s===ae||!Bd(i,o,r))?os(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):os(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:y}=xb(t,i,o);if(!u)return os(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>EV&&(this.allowRedirects=!1));let _=new cs(o,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,rb(i),yn(i),i.component??i._loadedComponent??null,i,ib(i)),S=kd(_,a,this.paramsInheritanceStrategy);_.params=Object.freeze(S.params),_.data=Object.freeze(S.data);let O=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,_,e);return this.applyRedirects.lineralizeSegments(i,O).pipe(Qe(M=>this.processSegment(e,r,t,M.concat(y),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=pV(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Nt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Nt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:y,remainingSegments:_}=u,S=new cs(y,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,rb(r),yn(r),r.component??r._loadedComponent??null,r,ib(r)),O=kd(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(O.params),S.data=Object.freeze(O.data);let{segmentGroup:M,slicedSegments:j}=nb(t,y,_,l);if(j.length===0&&M.hasChildren())return this.processChildren(h,l,M,S).pipe(X(Q=>new zt(S,Q)));if(l.length===0&&j.length===0)return Y(new zt(S,[]));let K=yn(r)===o;return this.processSegment(h,l,M,j,K?ae:o,!0,S).pipe(X(Q=>new zt(S,Q instanceof zt?[Q]:[])))}))):os(t)))}getChildConfig(e,t,r){return t.children?Y({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Y({routes:t._loadedRoutes,injector:t._loadedInjector}):lV(e,t,r,this.urlSerializer).pipe(Qe(i=>i?this.configLoader.loadChildren(e,t).pipe(ot(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):fV(t))):Y({routes:[],injector:e})}};function DV(n){n.sort((e,t)=>e.value.outlet===ae?-1:t.value.outlet===ae?1:e.value.outlet.localeCompare(t.value.outlet))}function CV(n){let e=n.value.routeConfig;return e&&e.path===""}function Rb(n){let e=[],t=new Set;for(let r of n){if(!CV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Rb(r.children);e.push(new zt(r.value,i))}return e.filter(r=>!t.has(r))}function rb(n){return n.data||{}}function ib(n){return n.resolve||{}}function bV(n,e,t,r,i,o){return Qe(s=>IV(n,e,t,r,s.extractedUrl,i,o).pipe(X(({state:a,tree:u})=>ce(L({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function TV(n,e){return Qe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Y(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of Mb(u))s.add(l);let a=0;return Oe(s).pipe(Ai(u=>o.has(u)?SV(u,r,n,e):(u.data=kd(u,u.parent,n).resolve,Y(void 0))),ot(()=>a++),Po(1),Qe(u=>a===s.size?Y(t):$t))})}function Mb(n){let e=n.children.map(t=>Mb(t)).flat();return[n,...e]}function SV(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!Db(i)&&(o[ac]=i.title),AV(o,n,e,r).pipe(X(s=>(n._resolvedData=s,n.data=kd(n,n.parent,t).resolve,null)))}function AV(n,e,t,r){let i=Mm(n);if(i.length===0)return Y({});let o={};return Oe(i).pipe(Qe(s=>xV(n[s],e,t,r).pipe(Sn(),ot(a=>{if(a instanceof rc)throw Vd(new ds,a);o[s]=a}))),Po(1),gp(o),Vr(s=>Sb(s)?$t:Ro(s)))}function xV(n,e,t,r){let i=uc(e)??r,o=gs(n,i),s=o.resolve?o.resolve(e,t):Fn(i,()=>o(e,t));return ri(s)}function xm(n){return Nt(e=>{let t=n(e);return t?Oe(t).pipe(X(()=>e)):Y(e)})}var Nb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ae);return r}getResolvedTitleForRoute(t){return t.data[ac]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>k(RV),providedIn:"root"})}}return n})(),RV=(()=>{class n extends Nb{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(te(YC))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hc=new z("",{providedIn:"root",factory:()=>({})}),MV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Je({type:n,selectors:[["ng-component"]],standalone:!0,features:[et],decls:1,vars:0,template:function(r,i){r&1&&tn(0,"router-outlet")},dependencies:[ry],encapsulation:2})}}return n})();function iy(n){let e=n.children&&n.children.map(iy),t=e?ce(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ae&&(t.component=MV),t}var sc=new z(""),oy=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k(md)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Y(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ri(t.loadComponent()).pipe(X(Pb),ot(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Ca(()=>{this.componentLoaders.delete(t)})),i=new To(r,()=>new at).pipe(bo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=NV(r,this.compiler,t,this.onLoadEndListener).pipe(Ca(()=>{this.childrenLoaders.delete(r)})),s=new To(o,()=>new at).pipe(bo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function NV(n,e,t,r){return ri(n.loadChildren()).pipe(X(Pb),Qe(i=>i instanceof Ma||Array.isArray(i)?Y(i):Oe(e.compileModuleAsync(i))),X(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(sc,[],{optional:!0,self:!0}).flat()),{routes:s.map(iy),injector:o}}))}function PV(n){return n&&typeof n=="object"&&"default"in n}function Pb(n){return PV(n)?n.default:n}var sy=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>k(OV),providedIn:"root"})}}return n})(),OV=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ob=new z(""),kb=new z("");function kV(n,e,t){let r=n.get(kb),i=n.get(Ut);return n.get(Te).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),FV(n))),{onViewTransitionCreated:u}=r;return u&&Fn(n,()=>u({transition:a,from:e,to:t})),s})}function FV(n){return new Promise(e=>{rm({read:()=>setTimeout(e)},{injector:n})})}var VV=new z(""),ay=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new at,this.transitionAbortSubject=new at,this.configLoader=k(oy),this.environmentInjector=k(qt),this.urlSerializer=k(cc),this.rootContexts=k(lc),this.location=k(is),this.inputBindingEnabled=k(jd,{optional:!0})!==null,this.titleStrategy=k(Nb),this.options=k(hc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=k(sy),this.createViewTransition=k(Ob,{optional:!0}),this.navigationErrorHandler=k(VV,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Y(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Um(i)),r=i=>this.events.next(new jm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ce(L(L({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Ge({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Za,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ht(o=>o.id!==0),X(o=>ce(L({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Nt(o=>{let s=!1,a=!1;return Y(o).pipe(Nt(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Gt.SupersededByNewNavigation),$t;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ce(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new ni(u.id,this.urlSerializer.serialize(u.rawUrl),p,Rd.IgnoredSameUrlNavigation)),u.resolve(!1),$t}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Y(u).pipe(Nt(p=>{let y=this.transitions?.getValue();return this.events.next(new hs(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),y!==this.transitions?.getValue()?$t:Promise.resolve(p)}),bV(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ot(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ce(L({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let y=new Md(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(y)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:y,source:_,restoredState:S,extras:O}=u,M=new hs(p,this.urlSerializer.serialize(y),_,S);this.events.next(M);let j=Ib(this.rootComponentType).snapshot;return this.currentTransition=o=ce(L({},u),{targetSnapshot:j,urlAfterRedirects:y,extras:ce(L({},O),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,Y(o)}else{let p="";return this.events.next(new ni(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Rd.IgnoredByUrlHandlingStrategy)),u.resolve(!1),$t}}),ot(u=>{let l=new km(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),X(u=>(this.currentTransition=o=ce(L({},u),{guards:zF(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),nV(this.environmentInjector,u=>this.events.next(u)),ot(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Vd(this.urlSerializer,u.guardsResult);let l=new Fm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Ht(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Gt.GuardRejected),!1)),xm(u=>{if(u.guards.canActivateChecks.length)return Y(u).pipe(ot(l=>{let h=new Vm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Nt(l=>{let h=!1;return Y(l).pipe(TV(this.paramsInheritanceStrategy,this.environmentInjector),ot({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Gt.NoDataFromResolver)}}))}),ot(l=>{let h=new Lm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),xm(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(ot(y=>{h.component=y}),X(()=>{})));for(let y of h.children)p.push(...l(y));return p};return Si(l(u.targetSnapshot.root)).pipe(Lr(null),wt(1))}),xm(()=>this.afterPreactivation()),Nt(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Oe(h).pipe(X(()=>o)):Y(o)}),X(u=>{let l=jF(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ce(L({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),ot(()=>{this.events.next(new tc)}),qF(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),wt(1),ot({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new jn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),yp(this.transitionAbortSubject.pipe(ot(u=>{throw u}))),Ca(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Gt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Vr(u=>{if(a=!0,Tb(u))this.events.next(new pr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),HF(u)?this.events.next(new fs(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new ec(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=Fn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof rc){let{message:p,cancellationCode:y}=Vd(this.urlSerializer,h);this.events.next(new pr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,y)),this.events.next(new fs(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return $t}))}))}cancelNavigationTransition(t,r,i){let o=new pr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function LV(n){return n!==Za}var UV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>k(jV),providedIn:"root"})}}return n})(),ty=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},jV=(()=>{class n extends ty{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ur(n)))(i||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Fb=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>k(BV),providedIn:"root"})}}return n})(),BV=(()=>{class n extends Fb{constructor(){super(...arguments),this.location=k(is),this.urlSerializer=k(cc),this.options=k(hc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=k(sy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new gr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Ib(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof hs)this.stateMemento=this.createStateMemento();else if(t instanceof ni)this.rawUrlTree=r.initialUrl;else if(t instanceof Md){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof tc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof pr&&(t.code===Gt.GuardRejected||t.code===Gt.NoDataFromResolver)?this.restoreHistory(r):t instanceof ec?this.restoreHistory(r,!0):t instanceof jn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof gr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=L(L({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ur(n)))(i||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Qa=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Qa||{});function Vb(n,e){n.events.pipe(Ht(t=>t instanceof jn||t instanceof pr||t instanceof ec||t instanceof ni),X(t=>t instanceof jn||t instanceof ni?Qa.COMPLETE:(t instanceof pr?t.code===Gt.Redirect||t.code===Gt.SupersededByNewNavigation:!1)?Qa.REDIRECTING:Qa.FAILED),Ht(t=>t!==Qa.REDIRECTING),wt(1)).subscribe(()=>{e()})}function $V(n){throw n}var HV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ue=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=k(fd),this.stateManager=k(Fb),this.options=k(hc,{optional:!0})||{},this.pendingTasks=k(ts),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=k(ay),this.urlSerializer=k(cc),this.location=k(is),this.urlHandlingStrategy=k(sy),this._events=new at,this.errorHandler=this.options.errorHandler||$V,this.navigated=!1,this.routeReuseStrategy=k(UV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=k(sc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!k(jd,{optional:!0}),this.eventsSubscription=new He,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof pr&&r.code!==Gt.Redirect&&r.code!==Gt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof jn)this.navigated=!0;else if(r instanceof fs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||LV(i.source)},s);this.scheduleNavigation(a,Za,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}GV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Za,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(iy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=yb(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return vb(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Hi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Za,null,r)}navigate(t,r={skipLocationChange:!1}){return zV(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},HV):r===!1?i=L({},qV):i=r,Hi(t))return ZC(this.currentUrlTree,t,i);let o=this.parseUrl(t);return ZC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,y)=>{a=p,u=y});let h=this.pendingTasks.add();return Vb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function zV(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new q(4008,!1)}function GV(n){return!(n instanceof tc)&&!(n instanceof fs)}var ii=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new at,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof jn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Hi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:xD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Hi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)($(Ue),$(Bn),Fg("tabindex"),$(Ln),$(pn),$(fr))}}static{this.\u0275dir=Fe({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Ae("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&La("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ti],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ti],replaceUrl:[2,"replaceUrl","replaceUrl",ti],routerLink:"routerLink"},standalone:!0,features:[nm,Yr]})}}return n})();var Ud=class{};var WV=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Ht(t=>t instanceof jn),Ai(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=ud(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Oe(i).pipe(Mo())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Y(null);let o=i.pipe(Qe(s=>s===null?Y(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Oe([o,s]).pipe(Mo())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(te(Ue),te(md),te(qt),te(Ud),te(oy))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Lb=new z(""),KV=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof hs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof jn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ni&&t.code===Rd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Nd&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Nd(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){$D()}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function Ub(n,...e){return kn([{provide:sc,multi:!0,useValue:n},[],{provide:Bn,useFactory:jb,deps:[Ue]},{provide:gd,multi:!0,useFactory:Bb},e.map(t=>t.\u0275providers)])}function jb(n){return n.routerState.root}function fc(n,e){return{\u0275kind:n,\u0275providers:e}}function Bb(){let n=k(pt);return e=>{let t=n.get(ji);if(e!==t.components[0])return;let r=n.get(Ue),i=n.get($b);n.get(cy)===1&&r.initialNavigation(),n.get(Hb,null,ue.Optional)?.setUpPreloading(),n.get(Lb,null,ue.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var $b=new z("",{factory:()=>new at}),cy=new z("",{providedIn:"root",factory:()=>1});function QV(){return fc(2,[{provide:cy,useValue:0},{provide:pd,multi:!0,deps:[pt],useFactory:e=>{let t=e.get(FC,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Ue),o=e.get($b);Vb(i,()=>{r(!0)}),e.get(ay).afterPreactivation=()=>(r(!0),o.closed?Y(void 0):o),i.initialNavigation()}))}}])}function YV(){return fc(3,[{provide:pd,multi:!0,useFactory:()=>{let e=k(Ue);return()=>{e.setUpLocationChangeListener()}}},{provide:cy,useValue:2}])}var Hb=new z("");function ZV(n){return fc(0,[{provide:Hb,useExisting:WV},{provide:Ud,useExisting:n}])}function JV(){return fc(8,[tb,{provide:jd,useExisting:tb}])}function XV(n){let e=[{provide:Ob,useValue:kV},{provide:kb,useValue:L({skipNextTransition:!!n?.skipInitialTransition},n)}];return fc(9,e)}var ob=new z("ROUTER_FORROOT_GUARD"),eL=[is,{provide:cc,useClass:ds},Ue,lc,{provide:Bn,useFactory:jb,deps:[Ue]},oy,[]],ms=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[eL,[],{provide:sc,multi:!0,useValue:t},{provide:ob,useFactory:iL,deps:[[Ue,new It,new Dg]]},{provide:hc,useValue:r||{}},r?.useHash?nL():rL(),tL(),r?.preloadingStrategy?ZV(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?oL(r):[],r?.bindToComponentInputs?JV().\u0275providers:[],r?.enableViewTransitions?XV().\u0275providers:[],sL()]}}static forChild(t){return{ngModule:n,providers:[{provide:sc,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(te(ob,8))}}static{this.\u0275mod=Qr({type:n})}static{this.\u0275inj=Kr({})}}return n})();function tL(){return{provide:Lb,useFactory:()=>{let n=k(BC),e=k(Te),t=k(hc),r=k(ay),i=k(cc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new KV(i,r,n,e,t)}}}function nL(){return{provide:fr,useClass:LC}}function rL(){return{provide:fr,useClass:mm}}function iL(n){return"guarded"}function oL(n){return[n.initialNavigation==="disabled"?YV().\u0275providers:[],n.initialNavigation==="enabledBlocking"?QV().\u0275providers:[]]}var sb=new z("");function sL(){return[{provide:sb,useFactory:Bb},{provide:gd,multi:!0,useExisting:sb}]}var zb=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},aL=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Gb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,y=(a&15)<<2|l>>6,_=l&63;u||(_=64,s||(y=64)),r.push(t[h],t[p],t[y],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(zb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):aL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new ly;let y=o<<2|a>>4;if(r.push(y),l!==64){let _=a<<4&240|l>>2;if(r.push(_),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ly=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},cL=function(n){let e=zb(n);return Gb.encodeByteArray(e,!0)},gc=function(n){return cL(n).replace(/\./g,"")},hy=function(n){try{return Gb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function uL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var lL=()=>uL().__FIREBASE_DEFAULTS__,dL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},hL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&hy(n[1]);return e&&JSON.parse(e)},Hd=()=>{try{return lL()||dL()||hL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},fy=n=>{var e,t;return(t=(e=Hd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Wb=n=>{let e=fy(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},py=()=>{var n;return(n=Hd())===null||n===void 0?void 0:n.config},gy=n=>{var e;return(e=Hd())===null||e===void 0?void 0:e[`_${n}`]};var $d=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Kb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[gc(JSON.stringify(t)),gc(JSON.stringify(s)),""].join(".")}function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function fL(){var n;let e=(n=Hd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Yb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Zb(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Jb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Xb(){let n=ut();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function eT(){return!fL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function my(){try{return typeof indexedDB=="object"}catch{return!1}}function tT(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var pL="FirebaseError",Wt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=pL,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mr.prototype.create)}},mr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?gL(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Wt(i,a,r)}};function gL(n,e){return n.replace(mL,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var mL=/\{\$([^}]+)}/g;function nT(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function qi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(qb(o)&&qb(s)){if(!qi(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function qb(n){return n!==null&&typeof n=="object"}function mc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ys(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function vs(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function rT(n,e){let t=new dy(n,e);return t.subscribe.bind(t)}var dy=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");yL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=uy),i.error===void 0&&(i.error=uy),i.complete===void 0&&(i.complete=uy);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function yL(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function uy(){}var c6=4*60*60*1e3;function lt(n){return n&&n._delegate?n._delegate:n}var sn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var zi="[DEFAULT]";var yy=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new $d;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_L(e))try{this.getOrInitializeService({instanceIdentifier:zi})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=zi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return m(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=zi){return this.instances.has(e)}getOptions(e=zi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zi){return this.component?this.component.multipleInstances?e:zi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function vL(n){return n===zi?void 0:n}function _L(n){return n.instantiationMode==="EAGER"}var qd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new yy(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var wL=[],ye=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ye||{}),IL={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},EL=ye.INFO,DL={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},CL=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=DL[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},oi=class{constructor(e){this.name=e,this._logLevel=EL,this._logHandler=CL,this._userLogHandler=null,wL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}};var bL=(n,e)=>e.some(t=>n instanceof t),iT,oT;function TL(){return iT||(iT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SL(){return oT||(oT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var sT=new WeakMap,_y=new WeakMap,aT=new WeakMap,vy=new WeakMap,Iy=new WeakMap;function AL(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t($n(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&sT.set(t,n)}).catch(()=>{}),Iy.set(e,n),e}function xL(n){if(_y.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});_y.set(n,e)}var wy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return _y.get(n);if(e==="objectStoreNames")return n.objectStoreNames||aT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $n(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function cT(n){wy=n(wy)}function RL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(zd(this),e,...t);return aT.set(r,e.sort?e.sort():[e]),$n(r)}:SL().includes(n)?function(...e){return n.apply(zd(this),e),$n(sT.get(this))}:function(...e){return $n(n.apply(zd(this),e))}}function ML(n){return typeof n=="function"?RL(n):(n instanceof IDBTransaction&&xL(n),bL(n,TL())?new Proxy(n,wy):n)}function $n(n){if(n instanceof IDBRequest)return AL(n);if(vy.has(n))return vy.get(n);let e=ML(n);return e!==n&&(vy.set(n,e),Iy.set(e,n)),e}var zd=n=>Iy.get(n);function lT(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=$n(s);return r&&s.addEventListener("upgradeneeded",u=>{r($n(s.result),u.oldVersion,u.newVersion,$n(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var NL=["get","getKey","getAll","getAllKeys","count"],PL=["put","add","delete","clear"],Ey=new Map;function uT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ey.get(e))return Ey.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=PL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||NL.includes(t)))return;let o=function(s,...a){return m(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return Ey.set(e,o),o}cT(n=>ce(L({},n),{get:(e,t,r)=>uT(e,t)||n.get(e,t,r),has:(e,t)=>!!uT(e,t)||n.has(e,t)}));var Cy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(OL(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function OL(n){let e=n.getComponent();return e?.type==="VERSION"}var by="@firebase/app",dT="0.10.13";var yr=new oi("@firebase/app"),kL="@firebase/app-compat",FL="@firebase/analytics-compat",VL="@firebase/analytics",LL="@firebase/app-check-compat",UL="@firebase/app-check",jL="@firebase/auth",BL="@firebase/auth-compat",$L="@firebase/database",HL="@firebase/data-connect",qL="@firebase/database-compat",zL="@firebase/functions",GL="@firebase/functions-compat",WL="@firebase/installations",KL="@firebase/installations-compat",QL="@firebase/messaging",YL="@firebase/messaging-compat",ZL="@firebase/performance",JL="@firebase/performance-compat",XL="@firebase/remote-config",e2="@firebase/remote-config-compat",t2="@firebase/storage",n2="@firebase/storage-compat",r2="@firebase/firestore",i2="@firebase/vertexai-preview",o2="@firebase/firestore-compat",s2="firebase",a2="10.14.1";var Ty="[DEFAULT]",c2={[by]:"fire-core",[kL]:"fire-core-compat",[VL]:"fire-analytics",[FL]:"fire-analytics-compat",[UL]:"fire-app-check",[LL]:"fire-app-check-compat",[jL]:"fire-auth",[BL]:"fire-auth-compat",[$L]:"fire-rtdb",[HL]:"fire-data-connect",[qL]:"fire-rtdb-compat",[zL]:"fire-fn",[GL]:"fire-fn-compat",[WL]:"fire-iid",[KL]:"fire-iid-compat",[QL]:"fire-fcm",[YL]:"fire-fcm-compat",[ZL]:"fire-perf",[JL]:"fire-perf-compat",[XL]:"fire-rc",[e2]:"fire-rc-compat",[t2]:"fire-gcs",[n2]:"fire-gcs-compat",[r2]:"fire-fst",[o2]:"fire-fst-compat",[i2]:"fire-vertex","fire-js":"fire-js",[s2]:"fire-js-all"};var yc=new Map,u2=new Map,Sy=new Map;function hT(n,e){try{n.container.addComponent(e)}catch(t){yr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ai(n){let e=n.name;if(Sy.has(e))return yr.debug(`There were multiple attempts to register component ${e}.`),!1;Sy.set(e,n);for(let t of yc.values())hT(t,n);for(let t of u2.values())hT(t,n);return!0}function _c(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function vn(n){return n.settings!==void 0}var l2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},si=new mr("app","Firebase",l2);var Ay=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw si.create("app-deleted",{appName:this._name})}};var ci=a2;function Gd(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ty,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw si.create("bad-app-name",{appName:String(i)});if(t||(t=py()),!t)throw si.create("no-options");let o=yc.get(i);if(o){if(qi(t,o.options)&&qi(r,o.config))return o;throw si.create("duplicate-app",{appName:i})}let s=new qd(i);for(let u of Sy.values())s.addComponent(u);let a=new Ay(t,r,s);return yc.set(i,a),a}function _s(n=Ty){let e=yc.get(n);if(!e&&n===Ty&&py())return Gd();if(!e)throw si.create("no-app",{appName:n});return e}function Wd(){return Array.from(yc.values())}function st(n,e,t){var r;let i=(r=c2[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yr.warn(a.join(" "));return}ai(new sn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var d2="firebase-heartbeat-database",h2=1,vc="firebase-heartbeat-store",Dy=null;function mT(){return Dy||(Dy=lT(d2,h2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(vc)}catch(t){console.warn(t)}}}}).catch(n=>{throw si.create("idb-open",{originalErrorMessage:n.message})})),Dy}function f2(n){return m(this,null,function*(){try{let t=(yield mT()).transaction(vc),r=yield t.objectStore(vc).get(yT(n));return yield t.done,r}catch(e){if(e instanceof Wt)yr.warn(e.message);else{let t=si.create("idb-get",{originalErrorMessage:e?.message});yr.warn(t.message)}}})}function fT(n,e){return m(this,null,function*(){try{let r=(yield mT()).transaction(vc,"readwrite");yield r.objectStore(vc).put(e,yT(n)),yield r.done}catch(t){if(t instanceof Wt)yr.warn(t.message);else{let r=si.create("idb-set",{originalErrorMessage:t?.message});yr.warn(r.message)}}})}function yT(n){return`${n.name}!${n.options.appId}`}var p2=1024,g2=30*24*60*60*1e3,xy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Ry(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return m(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=pT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=g2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){yr.warn(r)}})}getHeartbeatsHeader(){return m(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=pT(),{heartbeatsToSend:r,unsentEntries:i}=m2(this._heartbeatsCache.heartbeats),o=gc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return yr.warn(t),""}})}};function pT(){return new Date().toISOString().substring(0,10)}function m2(n,e=p2){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),gT(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),gT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Ry=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return my()?tT().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield f2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return fT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return fT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function gT(n){return gc(JSON.stringify({version:2,heartbeats:n})).length}function y2(n){ai(new sn("platform-logger",e=>new Cy(e),"PRIVATE")),ai(new sn("heartbeat",e=>new xy(e),"PRIVATE")),st(by,dT,n),st(by,dT,"esm2017"),st("fire-js","")}y2("");var v2="firebase",_2="10.14.1";st(v2,_2,"app");var Wi=new sr("ANGULARFIRE2_VERSION");function Qd(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var wc=(n,e)=>{let t=e?[e]:Wd(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Is=class{constructor(){return wc(w2)}},w2="app-check";function ws(){}var Kd=class{zone;delegate;constructor(e,t=dp){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},My=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ws,{},ws,ws)),t.pipe(ot({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Es=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Kd(Zone.current)),this.insideAngular=t.run(()=>new Kd(Zone.current,lp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(te(Te))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Yd(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function I2(n){return Yd().ngZone.runOutsideAngular(()=>n())}function Gi(n){return Yd().ngZone.run(()=>n())}function E2(n){return D2(Yd())(n)}function D2(n){return function(t){return t=t.lift(new My(n.ngZone)),t.pipe(Fr(n.outsideAngular),kr(n.insideAngular))}}var C2=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Gi(()=>n.apply(void 0,r))},Tt=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=Gi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ws,{},ws,ws))),r[o]=C2(r[o],t));let i=I2(()=>n.apply(this,r));if(!e)if(i instanceof ge){let o=Yd();return i.pipe(Fr(o.outsideAngular),kr(o.insideAngular))}else return Gi(()=>i);return i instanceof ge?i.pipe(E2):i instanceof Promise?Gi(()=>new Promise((o,s)=>i.then(a=>Gi(()=>o(a)),a=>Gi(()=>s(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Gi(()=>i)};var vr=class{constructor(e){return e}},Ki=class{constructor(){return Wd()}};function b2(n){return n&&n.length===1?n[0]:new vr(_s())}var Ny=new z("angularfire2._apps"),T2={provide:vr,useFactory:b2,deps:[[new It,Ny]]},S2={provide:Ki,deps:[[new It,Ny]]};function A2(n){return(e,t)=>{let r=t.get(Vn);st("angularfire",Wi.full,"core"),st("angularfire",Wi.full,"app"),st("angular",IC.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new vr(i)}}function vT(n,...e){return kn([T2,S2,{provide:Ny,useFactory:A2(n),multi:!0,deps:[Te,pt,Es,...e]}])}function kT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var FT=kT,VT=new mr("auth","Firebase",kT());var nh=new oi("@firebase/auth");function x2(n,...e){nh.logLevel<=ye.WARN&&nh.warn(`Auth (${ci}): ${n}`,...e)}function Jd(n,...e){nh.logLevel<=ye.ERROR&&nh.error(`Auth (${ci}): ${n}`,...e)}function qn(n,...e){throw tv(n,...e)}function Qi(n,...e){return tv(n,...e)}function LT(n,e,t){let r=Object.assign(Object.assign({},FT()),{[e]:t});return new mr("auth","Firebase",r).create(e,{appName:n.name})}function Ir(n){return LT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tv(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return VT.create(n,...e)}function Z(n,e,...t){if(!n)throw tv(e,...t)}function _r(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Jd(e),new Error(e)}function li(n,e){n||_r(e)}function Fy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function R2(){return _T()==="http:"||_T()==="https:"}function _T(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function M2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(R2()||Zb()||"connection"in navigator)?navigator.onLine:!0}function N2(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Yi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,li(t>e,"Short delay should be less than long delay!"),this.isMobile=Qb()||Jb()}get(){return M2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function nv(n,e){li(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var rh=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var P2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var O2=new Yi(3e4,6e4);function di(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function hi(o,s,a,u){return m(this,arguments,function*(n,e,t,r,i={}){return UT(n,i,()=>m(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=mc(Object.assign({key:n.config.apiKey},h)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let _=Object.assign({method:e,headers:y},l);return Yb()||(_.referrerPolicy="no-referrer"),rh.fetch()(jT(n,n.config.apiHost,t,p),_)}))})}function UT(n,e,t){return m(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},P2),e);try{let i=new Vy(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Zd(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zd(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Zd(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Zd(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw LT(n,h,l);qn(n,h)}}catch(i){if(i instanceof Wt)throw i;qn(n,"network-request-failed",{message:String(i)})}})}function Ac(o,s,a,u){return m(this,arguments,function*(n,e,t,r,i={}){let l=yield hi(n,e,t,r,i);return"mfaPendingCredential"in l&&qn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function jT(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?nv(n.config,i):`${n.config.apiScheme}://${i}`}function k2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Vy=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Qi(this.auth,"network-request-failed")),O2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Zd(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Qi(n,e,r);return i.customData._tokenResponse=t,i}function wT(n){return n!==void 0&&n.enterprise!==void 0}var Ly=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return k2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function F2(n,e){return m(this,null,function*(){return hi(n,"GET","/v2/recaptchaConfig",di(n,e))})}function V2(n,e){return m(this,null,function*(){return hi(n,"POST","/v1/accounts:delete",e)})}function BT(n,e){return m(this,null,function*(){return hi(n,"POST","/v1/accounts:lookup",e)})}function Ic(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function rv(n,e=!1){return m(this,null,function*(){let t=lt(n),r=yield t.getIdToken(e),i=iv(r);Z(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ic(Py(i.auth_time)),issuedAtTime:Ic(Py(i.iat)),expirationTime:Ic(Py(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Py(n){return Number(n)*1e3}function iv(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Jd("JWT malformed, contained fewer than 3 sections"),null;try{let i=hy(t);return i?JSON.parse(i):(Jd("Failed to decode base64 JWT payload"),null)}catch(i){return Jd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function IT(n){let e=iv(n);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Dc(n,e,t=!1){return m(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Wt&&L2(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function L2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Uy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),t)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Cc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ic(this.lastLoginAt),this.creationTime=Ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ih(n){return m(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Dc(n,BT(t,{idToken:r}));Z(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?$T(o.providerUserInfo):[],a=U2(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Cc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function ov(n){return m(this,null,function*(){let e=lt(n);yield ih(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function U2(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function $T(n){return n.map(e=>{var{providerId:t}=e,r=hp(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function j2(n,e){return m(this,null,function*(){let t=yield UT(n,{},()=>m(this,null,function*(){let r=mc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=jT(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",rh.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function B2(n,e){return m(this,null,function*(){return hi(n,"POST","/v2/accounts:revokeToken",di(n,e))})}var Ec=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):IT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Z(e.length!==0,"internal-error");let t=IT(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return m(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return m(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield j2(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Z(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Z(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Z(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return _r("not implemented")}};function ui(n,e){Z(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ds=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=hp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Uy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Cc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let t=yield Dc(this,this.stsTokenManager.getToken(this.auth,e));return Z(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return rv(this,e)}reload(){return ov(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return m(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ih(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(vn(this.auth.app))return Promise.reject(Ir(this.auth));let e=yield this.getIdToken();return yield Dc(this,V2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,_=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=t.photoURL)!==null&&s!==void 0?s:void 0,O=(a=t.tenantId)!==null&&a!==void 0?a:void 0,M=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,j=(l=t.createdAt)!==null&&l!==void 0?l:void 0,K=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Q,emailVerified:de,isAnonymous:Be,providerData:re,stsTokenManager:D}=t;Z(Q&&D,e,"internal-error");let v=Ec.fromJSON(this.name,D);Z(typeof Q=="string",e,"internal-error"),ui(p,e.name),ui(y,e.name),Z(typeof de=="boolean",e,"internal-error"),Z(typeof Be=="boolean",e,"internal-error"),ui(_,e.name),ui(S,e.name),ui(O,e.name),ui(M,e.name),ui(j,e.name),ui(K,e.name);let w=new n({uid:Q,auth:e,email:y,emailVerified:de,displayName:p,isAnonymous:Be,photoURL:S,phoneNumber:_,tenantId:O,stsTokenManager:v,createdAt:j,lastLoginAt:K});return re&&Array.isArray(re)&&(w.providerData=re.map(E=>Object.assign({},E))),M&&(w._redirectEventId=M),w}static _fromIdTokenResponse(e,t,r=!1){return m(this,null,function*(){let i=new Ec;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ih(o),o})}static _fromGetAccountInfoResponse(e,t,r){return m(this,null,function*(){let i=t.users[0];Z(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?$T(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Ec;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Cc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var ET=new Map;function wr(n){li(n instanceof Function,"Expected a class definition");let e=ET.get(n);return e?(li(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ET.set(n,e),e)}var $2=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(t,r){return m(this,null,function*(){this.storage[t]=r})}_get(t){return m(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return m(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),jy=$2;function Xd(n,e,t){return`firebase:${n}:${e}:${t}`}var oh=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Xd(this.userKey,i.apiKey,o),this.fullPersistenceKey=Xd("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ds._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return m(this,null,function*(){if(!t.length)return new n(wr(jy),e,r);let i=(yield Promise.all(t.map(l=>m(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||wr(jy),s=Xd(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p=Ds._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>m(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function DT(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KT(e))return"Blackberry";if(QT(e))return"Webos";if(qT(e))return"Safari";if((e.includes("chrome/")||zT(e))&&!e.includes("edge/"))return"Chrome";if(WT(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function HT(n=ut()){return/firefox\//i.test(n)}function qT(n=ut()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zT(n=ut()){return/crios\//i.test(n)}function GT(n=ut()){return/iemobile/i.test(n)}function WT(n=ut()){return/android/i.test(n)}function KT(n=ut()){return/blackberry/i.test(n)}function QT(n=ut()){return/webos/i.test(n)}function sv(n=ut()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function H2(n=ut()){var e;return sv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function q2(){return Xb()&&document.documentMode===10}function YT(n=ut()){return sv(n)||WT(n)||QT(n)||KT(n)||/windows phone/i.test(n)||GT(n)}function ZT(n,e=[]){let t;switch(n){case"Browser":t=DT(ut());break;case"Worker":t=`${DT(ut())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ci}/${r}`}var By=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function z2(t){return m(this,arguments,function*(n,e={}){return hi(n,"GET","/v2/passwordPolicy",di(n,e))})}var G2=6,$y=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:G2,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Hy=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sh(this),this.idTokenSubscription=new sh(this),this.beforeStateQueue=new By(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=wr(t)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield oh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return m(this,null,function*(){try{let t=yield BT(this,{idToken:e}),r=yield Ds._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return m(this,null,function*(){var t;if(vn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return m(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield ih(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=N2()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){if(vn(this.app))return Promise.reject(Ir(this));let t=e?lt(e):null;return t&&Z(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return m(this,null,function*(){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return vn(this.app)?Promise.reject(Ir(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return vn(this.app)?Promise.reject(Ir(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(wr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield z2(this),t=new $y(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield B2(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return m(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&wr(e)||this._popupRedirectResolver;Z(t,this,"argument-error"),this.redirectPersistenceManager=yield oh.create(this,[wr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return m(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&x2(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Ji(n){return lt(n)}var sh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=rT(t=>this.observer=t)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var fh={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function W2(n){fh=n}function JT(n){return fh.loadJS(n)}function K2(){return fh.recaptchaEnterpriseScript}function Q2(){return fh.gapiScript}function XT(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Y2="recaptcha-enterprise",Z2="NO_RECAPTCHA",qy=class{constructor(e){this.type=Y2,this.auth=Ji(e)}verify(e="verify",t=!1){return m(this,null,function*(){function r(o){return m(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>m(this,null,function*(){F2(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Ly(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;wT(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(Z2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&wT(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=K2();u.length!==0&&(u+=a),JT(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function CT(n,e,t,r=!1){return m(this,null,function*(){let i=new qy(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function zy(n,e,t,r){return m(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield CT(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>m(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield CT(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)}))})}function av(n,e){let t=_c(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(qi(o,e??{}))return i;qn(i,"already-initialized")}return t.initialize({options:e})}function J2(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(wr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function cv(n,e,t){let r=Ji(n);Z(r._canInitEmulator,r,"emulator-config-failed"),Z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=eS(e),{host:s,port:a}=X2(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||eU()}function eS(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function X2(n){let e=eS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:bT(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:bT(s)}}}function bT(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function eU(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var bc=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _r("not implemented")}_getIdTokenResponse(e){return _r("not implemented")}_linkToIdToken(e,t){return _r("not implemented")}_getReauthenticationResolver(e){return _r("not implemented")}};function tU(n,e){return m(this,null,function*(){return hi(n,"POST","/v1/accounts:signUp",e)})}function nU(n,e){return m(this,null,function*(){return Ac(n,"POST","/v1/accounts:signInWithPassword",di(n,e))})}function rU(n,e){return m(this,null,function*(){return Ac(n,"POST","/v1/accounts:signInWithEmailLink",di(n,e))})}function iU(n,e){return m(this,null,function*(){return Ac(n,"POST","/v1/accounts:signInWithEmailLink",di(n,e))})}var Tc=class n extends bc{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return m(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zy(e,t,"signInWithPassword",nU);case"emailLink":return rU(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}})}_linkToIdToken(e,t){return m(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zy(e,r,"signUpPassword",tU);case"emailLink":return iU(e,{idToken:t,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Oy(n,e){return m(this,null,function*(){return Ac(n,"POST","/v1/accounts:signInWithIdp",di(n,e))})}function oU(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sU(n){let e=ys(vs(n)).link,t=e?ys(vs(e)).deep_link_id:null,r=ys(vs(n)).deep_link_id;return(r?ys(vs(r)).link:null)||r||t||e||n}var ah=class n{constructor(e){var t,r,i,o,s,a;let u=ys(vs(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=oU((i=u.mode)!==null&&i!==void 0?i:null);Z(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=sU(e);try{return new n(t)}catch{return null}}};var tS=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Tc._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=ah.parseLink(r);return Z(i,"argument-error"),Tc._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),ch=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Gy=class extends ch{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function aU(n,e){return m(this,null,function*(){return Ac(n,"POST","/v1/accounts:signUp",di(n,e))})}var Cs=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return m(this,null,function*(){let o=yield Ds._fromIdTokenResponse(e,r,i),s=TT(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return m(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=TT(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function TT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Wy=class n extends Wt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function nS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Wy._fromErrorAndOperation(n,o,e,r):o})}function cU(n,e,t=!1){return m(this,null,function*(){let r=yield Dc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Cs._forOperation(n,"link",r)})}function uU(n,e,t=!1){return m(this,null,function*(){let{auth:r}=n;if(vn(r.app))return Promise.reject(Ir(r));let i="reauthenticate";try{let o=yield Dc(n,nS(r,i,e,n),t);Z(o.idToken,r,"internal-error");let s=iv(o.idToken);Z(s,r,"internal-error");let{sub:a}=s;return Z(n.uid===a,r,"user-mismatch"),Cs._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&qn(r,"user-mismatch"),o}})}function rS(n,e,t=!1){return m(this,null,function*(){if(vn(n.app))return Promise.reject(Ir(n));let r="signIn",i=yield nS(n,r,e),o=yield Cs._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function uv(n,e){return m(this,null,function*(){return rS(Ji(n),e)})}function iS(n){return m(this,null,function*(){let e=Ji(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function lv(n,e,t){return m(this,null,function*(){if(vn(n.app))return Promise.reject(Ir(n));let r=Ji(n),s=yield zy(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aU).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&iS(n),u}),a=yield Cs._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function dv(n,e,t){return vn(n.app)?Promise.reject(Ir(n)):uv(lt(n),tS.credential(e,t)).catch(r=>m(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&iS(n),r}))}function hv(n,e,t,r){return lt(n).onIdTokenChanged(e,t,r)}function fv(n,e,t){return lt(n).beforeAuthStateChanged(e,t)}function ph(n,e,t,r){return lt(n).onAuthStateChanged(e,t,r)}function gh(n){return lt(n).signOut()}var uh="__sak";var lh=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uh,"1"),this.storage.removeItem(uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var lU=1e3,dU=10,hU=(()=>{class n extends lh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YT(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);q2()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,dU):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},lU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return m(this,null,function*(){yield Pr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return m(this,null,function*(){let r=yield Pr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return m(this,null,function*(){yield Pr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),oS=hU;var fU=(()=>{class n extends lh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),pv=fU;function pU(n){return Promise.all(n.map(e=>m(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var gU=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return m(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>m(this,null,function*(){return h(r.origin,s)})),l=yield pU(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function sS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Ky=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return m(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=sS("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(y.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Hn(){return window}function mU(n){Hn().location.href=n}function aS(){return typeof Hn().WorkerGlobalScope<"u"&&typeof Hn().importScripts=="function"}function yU(){return m(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function vU(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function _U(){return aS()?self:null}var cS="firebaseLocalStorageDb",wU=1,dh="firebaseLocalStorage",uS="fbase_key",Zi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function mh(n,e){return n.transaction([dh],e?"readwrite":"readonly").objectStore(dh)}function IU(){let n=indexedDB.deleteDatabase(cS);return new Zi(n).toPromise()}function Qy(){let n=indexedDB.open(cS,wU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(dh,{keyPath:uS})}catch(i){t(i)}}),n.addEventListener("success",()=>m(this,null,function*(){let r=n.result;r.objectStoreNames.contains(dh)?e(r):(r.close(),yield IU(),e(yield Qy()))}))})}function ST(n,e,t){return m(this,null,function*(){let r=mh(n,!0).put({[uS]:e,value:t});return new Zi(r).toPromise()})}function EU(n,e){return m(this,null,function*(){let t=mh(n,!1).get(e),r=yield new Zi(t).toPromise();return r===void 0?null:r.value})}function AT(n,e){let t=mh(n,!0).delete(e);return new Zi(t).toPromise()}var DU=800,CU=3,bU=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return m(this,null,function*(){return this.db?this.db:(this.db=yield Qy(),this.db)})}_withRetries(t){return m(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>CU)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return m(this,null,function*(){return aS()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return m(this,null,function*(){this.receiver=gU._getInstance(_U()),this.receiver._subscribe("keyChanged",(t,r)=>m(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>m(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return m(this,null,function*(){var t,r;if(this.activeServiceWorker=yield yU(),!this.activeServiceWorker)return;this.sender=new Ky(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return m(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||vU()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return m(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Qy();return yield ST(t,uh,"1"),yield AT(t,uh),!0}catch{}return!1})}_withPendingWrite(t){return m(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(i=>ST(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return m(this,null,function*(){let r=yield this._withRetries(i=>EU(i,t));return this.localCache[t]=r,r})}_remove(t){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(r=>AT(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return m(this,null,function*(){let t=yield this._withRetries(o=>{let s=mh(o,!1).getAll();return new Zi(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>m(this,null,function*(){return this._poll()}),DU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),lS=bU;var t8=XT("rcb"),n8=new Yi(3e4,6e4);function TU(n,e){return e?wr(e):(Z(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Sc=class extends bc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oy(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oy(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oy(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function SU(n){return rS(n.auth,new Sc(n),n.bypassAuthState)}function AU(n){let{auth:e,user:t}=n;return Z(t,e,"internal-error"),uU(t,new Sc(n),n.bypassAuthState)}function xU(n){return m(this,null,function*(){let{auth:e,user:t}=n;return Z(t,e,"internal-error"),cU(t,new Sc(n),n.bypassAuthState)})}var Yy=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>m(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return m(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return SU;case"linkViaPopup":case"linkViaRedirect":return xU;case"reauthViaPopup":case"reauthViaRedirect":return AU;default:qn(this.auth,"internal-error")}}resolve(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var r8=new Yi(2e3,1e4);var RU="pendingRedirect",eh=new Map,Zy=class n extends Yy{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return m(this,null,function*(){let e=eh.get(this.auth._key());if(!e){try{let r=(yield MU(this.resolver,this.auth))?yield Pr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}eh.set(this.auth._key(),e)}return this.bypassAuthState||eh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return m(this,null,function*(){if(e.type==="signInViaRedirect")return Pr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Pr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return m(this,null,function*(){})}cleanUp(){}};function MU(n,e){return m(this,null,function*(){let t=OU(e),r=PU(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function NU(n,e){eh.set(n._key(),e)}function PU(n){return wr(n._redirectPersistence)}function OU(n){return Xd(RU,n.config.apiKey,n.name)}function kU(n,e,t=!1){return m(this,null,function*(){if(vn(n.app))return Promise.reject(Ir(n));let r=Ji(n),i=TU(r,e),s=yield new Zy(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var FU=10*60*1e3,Jy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!dS(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Qi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FU&&this.cachedEventUids.clear(),this.cachedEventUids.has(xT(e))}saveEventToCache(e){this.cachedEventUids.add(xT(e)),this.lastProcessedEventTime=Date.now()}};function xT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function dS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function VU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dS(n);default:return!1}}function LU(t){return m(this,arguments,function*(n,e={}){return hi(n,"GET","/v1/projects",e)})}var UU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jU=/^https?/;function BU(n){return m(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield LU(n);for(let t of e)try{if($U(t))return}catch{}qn(n,"unauthorized-domain")})}function $U(n){let e=Fy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!jU.test(t))return!1;if(UU.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var HU=new Yi(3e4,6e4);function RT(){let n=Hn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function qU(n){return new Promise((e,t)=>{var r,i,o;function s(){RT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{RT(),t(Qi(n,"network-request-failed"))},timeout:HU.get()})}if(!((i=(r=Hn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Hn().gapi)===null||o===void 0)&&o.load)s();else{let a=XT("iframefcb");return Hn()[a]=()=>{gapi.load?s():t(Qi(n,"network-request-failed"))},JT(`${Q2()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw th=null,e})}var th=null;function zU(n){return th=th||qU(n),th}var GU=new Yi(5e3,15e3),WU="__/auth/iframe",KU="emulator/auth/iframe",QU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZU(n){let e=n.config;Z(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?nv(e,KU):`https://${n.config.authDomain}/${WU}`,r={apiKey:e.apiKey,appName:n.name,v:ci},i=YU.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${mc(r).slice(1)}`}function JU(n){return m(this,null,function*(){let e=yield zU(n),t=Hn().gapi;return Z(t,n,"internal-error"),e.open({where:document.body,url:ZU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QU,dontclear:!0},r=>new Promise((i,o)=>m(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Qi(n,"network-request-failed"),a=Hn().setTimeout(()=>{o(s)},GU.get());function u(){Hn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var XU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ej=500,tj=600,nj="_blank",rj="http://localhost",hh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function ij(n,e,t,r=ej,i=tj){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},XU),{width:r.toString(),height:i.toString(),top:o,left:s}),l=ut().toLowerCase();t&&(a=zT(l)?nj:t),HT(l)&&(e=e||rj,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[_,S])=>`${y}${_}=${S},`,"");if(H2(l)&&a!=="_self")return oj(e||"",a),new hh(null);let p=window.open(e||"",a,h);Z(p,n,"popup-blocked");try{p.focus()}catch{}return new hh(p)}function oj(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var sj="__/auth/handler",aj="emulator/auth/handler",cj=encodeURIComponent("fac");function MT(n,e,t,r,i,o){return m(this,null,function*(){Z(n.config.authDomain,n,"auth-domain-config-required"),Z(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ci,eventId:i};if(e instanceof ch){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",nT(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Gy){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${cj}=${encodeURIComponent(u)}`:"";return`${uj(n)}?${mc(a).slice(1)}${l}`})}function uj({config:n}){return n.emulator?nv(n,aj):`https://${n.authDomain}/${sj}`}var ky="webStorageSupport",Xy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pv,this._completeRedirectFn=kU,this._overrideRedirectResult=NU}_openPopup(e,t,r,i){return m(this,null,function*(){var o;li((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield MT(e,t,r,Fy(),i);return ij(e,s,sS())})}_openRedirect(e,t,r,i){return m(this,null,function*(){yield this._originValidation(e);let o=yield MT(e,t,r,Fy(),i);return mU(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(li(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return m(this,null,function*(){let t=yield JU(e),r=new Jy(e);return t.register("authEvent",i=>(Z(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ky,{type:ky},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[ky];s!==void 0&&t(!!s),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return YT()||qT()||sv()}},hS=Xy;var NT="@firebase/auth",PT="1.7.9";var ev=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function lj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dj(n){ai(new sn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Z(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZT(n)},l=new Hy(r,i,o,u);return J2(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ai(new sn("auth-internal",e=>{let t=Ji(e.getProvider("auth").getImmediate());return(r=>new ev(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),st(NT,PT,lj(n)),st(NT,PT,"esm2017")}var hj=5*60,fj=gy("authIdTokenMaxAge")||hj,OT=null,pj=n=>e=>m(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>fj)return;let i=t?.token;OT!==i&&(OT=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function gv(n=_s()){let e=_c(n,"auth");if(e.isInitialized())return e.getImmediate();let t=av(n,{popupRedirectResolver:hS,persistence:[lS,oS,pv]}),r=gy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=pj(o.toString());fv(t,s,()=>s(t.currentUser)),hv(t,a=>s(a))}}let i=fy("auth");return i&&cv(t,`http://${i}`),t}function gj(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}W2({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Qi("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",gj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dj("Browser");var fS="auth",Xi=class{constructor(e){return e}},xc=class{constructor(){return wc(fS)}};var mv=new z("angularfire2.auth-instances");function iB(n,e){let t=Qd(fS,n,e);return t&&new Xi(t)}function oB(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Xi(r)}}var sB={provide:xc,deps:[[new It,mv]]},aB={provide:Xi,useFactory:iB,deps:[[new It,mv],vr]};function pS(n,...e){return st("angularfire",Wi.full,"auth"),kn([aB,sB,{provide:mv,useFactory:oB(n),multi:!0,deps:[Te,pt,Es,Ki,[new It,Is],...e]}])}var gS=Tt(lv,!0);var mS=Tt(gv,!0);var yS=Tt(dv,!0);var vS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_S={};var fi,yv;(function(){var n;function e(D,v){function w(){}w.prototype=v.prototype,D.D=v.prototype,D.prototype=new w,D.prototype.constructor=D,D.C=function(E,C,T){for(var I=Array(arguments.length-2),Xn=2;Xn<arguments.length;Xn++)I[Xn-2]=arguments[Xn];return v.prototype[C].apply(E,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,w){w||(w=0);var E=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)E[C]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(C=0;16>C;++C)E[C]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=D.g[0],w=D.g[1],C=D.g[2];var T=D.g[3],I=v+(T^w&(C^T))+E[0]+3614090360&4294967295;v=w+(I<<7&4294967295|I>>>25),I=T+(C^v&(w^C))+E[1]+3905402710&4294967295,T=v+(I<<12&4294967295|I>>>20),I=C+(w^T&(v^w))+E[2]+606105819&4294967295,C=T+(I<<17&4294967295|I>>>15),I=w+(v^C&(T^v))+E[3]+3250441966&4294967295,w=C+(I<<22&4294967295|I>>>10),I=v+(T^w&(C^T))+E[4]+4118548399&4294967295,v=w+(I<<7&4294967295|I>>>25),I=T+(C^v&(w^C))+E[5]+1200080426&4294967295,T=v+(I<<12&4294967295|I>>>20),I=C+(w^T&(v^w))+E[6]+2821735955&4294967295,C=T+(I<<17&4294967295|I>>>15),I=w+(v^C&(T^v))+E[7]+4249261313&4294967295,w=C+(I<<22&4294967295|I>>>10),I=v+(T^w&(C^T))+E[8]+1770035416&4294967295,v=w+(I<<7&4294967295|I>>>25),I=T+(C^v&(w^C))+E[9]+2336552879&4294967295,T=v+(I<<12&4294967295|I>>>20),I=C+(w^T&(v^w))+E[10]+4294925233&4294967295,C=T+(I<<17&4294967295|I>>>15),I=w+(v^C&(T^v))+E[11]+2304563134&4294967295,w=C+(I<<22&4294967295|I>>>10),I=v+(T^w&(C^T))+E[12]+1804603682&4294967295,v=w+(I<<7&4294967295|I>>>25),I=T+(C^v&(w^C))+E[13]+4254626195&4294967295,T=v+(I<<12&4294967295|I>>>20),I=C+(w^T&(v^w))+E[14]+2792965006&4294967295,C=T+(I<<17&4294967295|I>>>15),I=w+(v^C&(T^v))+E[15]+1236535329&4294967295,w=C+(I<<22&4294967295|I>>>10),I=v+(C^T&(w^C))+E[1]+4129170786&4294967295,v=w+(I<<5&4294967295|I>>>27),I=T+(w^C&(v^w))+E[6]+3225465664&4294967295,T=v+(I<<9&4294967295|I>>>23),I=C+(v^w&(T^v))+E[11]+643717713&4294967295,C=T+(I<<14&4294967295|I>>>18),I=w+(T^v&(C^T))+E[0]+3921069994&4294967295,w=C+(I<<20&4294967295|I>>>12),I=v+(C^T&(w^C))+E[5]+3593408605&4294967295,v=w+(I<<5&4294967295|I>>>27),I=T+(w^C&(v^w))+E[10]+38016083&4294967295,T=v+(I<<9&4294967295|I>>>23),I=C+(v^w&(T^v))+E[15]+3634488961&4294967295,C=T+(I<<14&4294967295|I>>>18),I=w+(T^v&(C^T))+E[4]+3889429448&4294967295,w=C+(I<<20&4294967295|I>>>12),I=v+(C^T&(w^C))+E[9]+568446438&4294967295,v=w+(I<<5&4294967295|I>>>27),I=T+(w^C&(v^w))+E[14]+3275163606&4294967295,T=v+(I<<9&4294967295|I>>>23),I=C+(v^w&(T^v))+E[3]+4107603335&4294967295,C=T+(I<<14&4294967295|I>>>18),I=w+(T^v&(C^T))+E[8]+1163531501&4294967295,w=C+(I<<20&4294967295|I>>>12),I=v+(C^T&(w^C))+E[13]+2850285829&4294967295,v=w+(I<<5&4294967295|I>>>27),I=T+(w^C&(v^w))+E[2]+4243563512&4294967295,T=v+(I<<9&4294967295|I>>>23),I=C+(v^w&(T^v))+E[7]+1735328473&4294967295,C=T+(I<<14&4294967295|I>>>18),I=w+(T^v&(C^T))+E[12]+2368359562&4294967295,w=C+(I<<20&4294967295|I>>>12),I=v+(w^C^T)+E[5]+4294588738&4294967295,v=w+(I<<4&4294967295|I>>>28),I=T+(v^w^C)+E[8]+2272392833&4294967295,T=v+(I<<11&4294967295|I>>>21),I=C+(T^v^w)+E[11]+1839030562&4294967295,C=T+(I<<16&4294967295|I>>>16),I=w+(C^T^v)+E[14]+4259657740&4294967295,w=C+(I<<23&4294967295|I>>>9),I=v+(w^C^T)+E[1]+2763975236&4294967295,v=w+(I<<4&4294967295|I>>>28),I=T+(v^w^C)+E[4]+1272893353&4294967295,T=v+(I<<11&4294967295|I>>>21),I=C+(T^v^w)+E[7]+4139469664&4294967295,C=T+(I<<16&4294967295|I>>>16),I=w+(C^T^v)+E[10]+3200236656&4294967295,w=C+(I<<23&4294967295|I>>>9),I=v+(w^C^T)+E[13]+681279174&4294967295,v=w+(I<<4&4294967295|I>>>28),I=T+(v^w^C)+E[0]+3936430074&4294967295,T=v+(I<<11&4294967295|I>>>21),I=C+(T^v^w)+E[3]+3572445317&4294967295,C=T+(I<<16&4294967295|I>>>16),I=w+(C^T^v)+E[6]+76029189&4294967295,w=C+(I<<23&4294967295|I>>>9),I=v+(w^C^T)+E[9]+3654602809&4294967295,v=w+(I<<4&4294967295|I>>>28),I=T+(v^w^C)+E[12]+3873151461&4294967295,T=v+(I<<11&4294967295|I>>>21),I=C+(T^v^w)+E[15]+530742520&4294967295,C=T+(I<<16&4294967295|I>>>16),I=w+(C^T^v)+E[2]+3299628645&4294967295,w=C+(I<<23&4294967295|I>>>9),I=v+(C^(w|~T))+E[0]+4096336452&4294967295,v=w+(I<<6&4294967295|I>>>26),I=T+(w^(v|~C))+E[7]+1126891415&4294967295,T=v+(I<<10&4294967295|I>>>22),I=C+(v^(T|~w))+E[14]+2878612391&4294967295,C=T+(I<<15&4294967295|I>>>17),I=w+(T^(C|~v))+E[5]+4237533241&4294967295,w=C+(I<<21&4294967295|I>>>11),I=v+(C^(w|~T))+E[12]+1700485571&4294967295,v=w+(I<<6&4294967295|I>>>26),I=T+(w^(v|~C))+E[3]+2399980690&4294967295,T=v+(I<<10&4294967295|I>>>22),I=C+(v^(T|~w))+E[10]+4293915773&4294967295,C=T+(I<<15&4294967295|I>>>17),I=w+(T^(C|~v))+E[1]+2240044497&4294967295,w=C+(I<<21&4294967295|I>>>11),I=v+(C^(w|~T))+E[8]+1873313359&4294967295,v=w+(I<<6&4294967295|I>>>26),I=T+(w^(v|~C))+E[15]+4264355552&4294967295,T=v+(I<<10&4294967295|I>>>22),I=C+(v^(T|~w))+E[6]+2734768916&4294967295,C=T+(I<<15&4294967295|I>>>17),I=w+(T^(C|~v))+E[13]+1309151649&4294967295,w=C+(I<<21&4294967295|I>>>11),I=v+(C^(w|~T))+E[4]+4149444226&4294967295,v=w+(I<<6&4294967295|I>>>26),I=T+(w^(v|~C))+E[11]+3174756917&4294967295,T=v+(I<<10&4294967295|I>>>22),I=C+(v^(T|~w))+E[2]+718787259&4294967295,C=T+(I<<15&4294967295|I>>>17),I=w+(T^(C|~v))+E[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+C&4294967295,D.g[3]=D.g[3]+T&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var w=v-this.blockSize,E=this.B,C=this.h,T=0;T<v;){if(C==0)for(;T<=w;)i(this,D,T),T+=this.blockSize;if(typeof D=="string"){for(;T<v;)if(E[C++]=D.charCodeAt(T++),C==this.blockSize){i(this,E),C=0;break}}else for(;T<v;)if(E[C++]=D[T++],C==this.blockSize){i(this,E),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var w=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=w&255,w/=256;for(this.u(D),D=Array(16),v=w=0;4>v;++v)for(var E=0;32>E;E+=8)D[w++]=this.g[v]>>>E&255;return D};function o(D,v){var w=a;return Object.prototype.hasOwnProperty.call(w,D)?w[D]:w[D]=v(D)}function s(D,v){this.h=v;for(var w=[],E=!0,C=D.length-1;0<=C;C--){var T=D[C]|0;E&&T==v||(w[C]=T,E=!1)}this.g=w}var a={};function u(D){return-128<=D&&128>D?o(D,function(v){return new s([v|0],0>v?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return M(l(-D));for(var v=[],w=1,E=0;D>=w;E++)v[E]=D/w|0,w*=4294967296;return new s(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return M(h(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),E=p,C=0;C<D.length;C+=8){var T=Math.min(8,D.length-C),I=parseInt(D.substring(C,C+T),v);8>T?(T=l(Math.pow(v,T)),E=E.j(T).add(l(I))):(E=E.j(w),E=E.add(l(I)))}return E}var p=u(0),y=u(1),_=u(16777216);n=s.prototype,n.m=function(){if(O(this))return-M(this).m();for(var D=0,v=1,w=0;w<this.g.length;w++){var E=this.i(w);D+=(0<=E?E:4294967296+E)*v,v*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(O(this))return"-"+M(this).toString(D);for(var v=l(Math.pow(D,6)),w=this,E="";;){var C=de(w,v).g;w=j(w,C.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(D);if(w=C,S(w))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function O(D){return D.h==-1}n.l=function(D){return D=j(this,D),O(D)?-1:S(D)?0:1};function M(D){for(var v=D.g.length,w=[],E=0;E<v;E++)w[E]=~D.g[E];return new s(w,~D.h).add(y)}n.abs=function(){return O(this)?M(this):this},n.add=function(D){for(var v=Math.max(this.g.length,D.g.length),w=[],E=0,C=0;C<=v;C++){var T=E+(this.i(C)&65535)+(D.i(C)&65535),I=(T>>>16)+(this.i(C)>>>16)+(D.i(C)>>>16);E=I>>>16,T&=65535,I&=65535,w[C]=I<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function j(D,v){return D.add(M(v))}n.j=function(D){if(S(this)||S(D))return p;if(O(this))return O(D)?M(this).j(M(D)):M(M(this).j(D));if(O(D))return M(this.j(M(D)));if(0>this.l(_)&&0>D.l(_))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,w=[],E=0;E<2*v;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<D.g.length;C++){var T=this.i(E)>>>16,I=this.i(E)&65535,Xn=D.i(C)>>>16,ta=D.i(C)&65535;w[2*E+2*C]+=I*ta,K(w,2*E+2*C),w[2*E+2*C+1]+=T*ta,K(w,2*E+2*C+1),w[2*E+2*C+1]+=I*Xn,K(w,2*E+2*C+1),w[2*E+2*C+2]+=T*Xn,K(w,2*E+2*C+2)}for(E=0;E<v;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=v;E<2*v;E++)w[E]=0;return new s(w,0)};function K(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function Q(D,v){this.g=D,this.h=v}function de(D,v){if(S(v))throw Error("division by zero");if(S(D))return new Q(p,p);if(O(D))return v=de(M(D),v),new Q(M(v.g),M(v.h));if(O(v))return v=de(D,M(v)),new Q(M(v.g),v.h);if(30<D.g.length){if(O(D)||O(v))throw Error("slowDivide_ only works with positive integers.");for(var w=y,E=v;0>=E.l(D);)w=Be(w),E=Be(E);var C=re(w,1),T=re(E,1);for(E=re(E,2),w=re(w,2);!S(E);){var I=T.add(E);0>=I.l(D)&&(C=C.add(w),T=I),E=re(E,1),w=re(w,1)}return v=j(D,C.j(v)),new Q(C,v)}for(C=p;0<=D.l(v);){for(w=Math.max(1,Math.floor(D.m()/v.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(w),I=T.j(v);O(I)||0<I.l(D);)w-=E,T=l(w),I=T.j(v);S(T)&&(T=y),C=C.add(T),D=j(D,I)}return new Q(C,D)}n.A=function(D){return de(this,D).h},n.and=function(D){for(var v=Math.max(this.g.length,D.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)&D.i(E);return new s(w,this.h&D.h)},n.or=function(D){for(var v=Math.max(this.g.length,D.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)|D.i(E);return new s(w,this.h|D.h)},n.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)^D.i(E);return new s(w,this.h^D.h)};function Be(D){for(var v=D.g.length+1,w=[],E=0;E<v;E++)w[E]=D.i(E)<<1|D.i(E-1)>>>31;return new s(w,D.h)}function re(D,v){var w=v>>5;v%=32;for(var E=D.g.length-w,C=[],T=0;T<E;T++)C[T]=0<v?D.i(T+w)>>>v|D.i(T+w+1)<<32-v:D.i(T+w);return new s(C,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,yv=_S.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,fi=_S.Integer=s}).apply(typeof vS<"u"?vS:typeof self<"u"?self:typeof window<"u"?window:{});var yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Er={};var vv,cB,bs,_v,Rc,vh,wv,Iv,Ev;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof yh=="object"&&yh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var x=f++;return{value:d(x,c[x]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function y(c,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function _(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,x){for(var V=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)V[Re-2]=arguments[Re];return d.prototype[b].apply(g,V)}}function O(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function M(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,x=g.length||0;c.length=b+x;for(let V=0;V<x;V++)c[b+V]=g[V]}else c.push(g)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function K(c){return/^[\s\xa0]*$/.test(c)}function Q(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function de(c){return de[" "](c),c}de[" "]=function(){};var Be=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function re(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let x=0;x<w.length;x++)f=w[x],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function C(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function I(){var c=Df;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Xn{constructor(){this.h=this.g=null}add(d,f){let g=ta.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ta=new j(()=>new uR,c=>c.reset());class uR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let na,ra=!1,Df=new Xn,Fw=()=>{let c=a.Promise.resolve(void 0);na=()=>{c.then(lR)}};var lR=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){T(f)}var d=ta;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}ra=!1};function xr(){this.s=this.s,this.C=this.C}xr.prototype.s=!1,xr.prototype.ma=function(){this.s||(this.s=!0,this.N())},xr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function mt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}mt.prototype.h=function(){this.defaultPrevented=!0};var dR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function ia(c,d){if(mt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Be){e:{try{de(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:hR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ia.aa.h.call(this)}}S(ia,mt);var hR={2:"touch",3:"pen",4:"mouse"};ia.prototype.h=function(){ia.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var oa="closure_listenable_"+(1e6*Math.random()|0),fR=0;function pR(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++fR,this.da=this.fa=!1}function hu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function fu(c){this.src=c,this.g={},this.h=0}fu.prototype.add=function(c,d,f,g,b){var x=c.toString();c=this.g[x],c||(c=this.g[x]=[],this.h++);var V=bf(c,d,g,b);return-1<V?(d=c[V],f||(d.fa=!1)):(d=new pR(d,this.src,x,!!g,b),d.fa=f,c.push(d)),d};function Cf(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),x;(x=0<=b)&&Array.prototype.splice.call(g,b,1),x&&(hu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function bf(c,d,f,g){for(var b=0;b<c.length;++b){var x=c[b];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==g)return b}return-1}var Tf="closure_lm_"+(1e6*Math.random()|0),Sf={};function Vw(c,d,f,g,b){if(g&&g.once)return Uw(c,d,f,g,b);if(Array.isArray(d)){for(var x=0;x<d.length;x++)Vw(c,d[x],f,g,b);return null}return f=Mf(f),c&&c[oa]?c.K(d,f,l(g)?!!g.capture:!!g,b):Lw(c,d,f,!1,g,b)}function Lw(c,d,f,g,b,x){if(!d)throw Error("Invalid event type");var V=l(b)?!!b.capture:!!b,Re=xf(c);if(Re||(c[Tf]=Re=new fu(c)),f=Re.add(d,f,g,V,x),f.proxy)return f;if(g=gR(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)dR||(b=V),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(Bw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function gR(){function c(f){return d.call(c.src,c.listener,f)}let d=mR;return c}function Uw(c,d,f,g,b){if(Array.isArray(d)){for(var x=0;x<d.length;x++)Uw(c,d[x],f,g,b);return null}return f=Mf(f),c&&c[oa]?c.L(d,f,l(g)?!!g.capture:!!g,b):Lw(c,d,f,!0,g,b)}function jw(c,d,f,g,b){if(Array.isArray(d))for(var x=0;x<d.length;x++)jw(c,d[x],f,g,b);else g=l(g)?!!g.capture:!!g,f=Mf(f),c&&c[oa]?(c=c.i,d=String(d).toString(),d in c.g&&(x=c.g[d],f=bf(x,f,g,b),-1<f&&(hu(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete c.g[d],c.h--)))):c&&(c=xf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=bf(d,f,g,b)),(f=-1<c?d[c]:null)&&Af(f))}function Af(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[oa])Cf(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(Bw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=xf(d))?(Cf(f,c),f.h==0&&(f.src=null,d[Tf]=null)):hu(c)}}}function Bw(c){return c in Sf?Sf[c]:Sf[c]="on"+c}function mR(c,d){if(c.da)c=!0;else{d=new ia(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Af(c),c=f.call(g,d)}return c}function xf(c){return c=c[Tf],c instanceof fu?c:null}var Rf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mf(c){return typeof c=="function"?c:(c[Rf]||(c[Rf]=function(d){return c.handleEvent(d)}),c[Rf])}function yt(){xr.call(this),this.i=new fu(this),this.M=this,this.F=null}S(yt,xr),yt.prototype[oa]=!0,yt.prototype.removeEventListener=function(c,d,f,g){jw(this,c,d,f,g)};function Rt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new mt(d,c);else if(d instanceof mt)d.target=d.target||c;else{var b=d;d=new mt(g,c),E(d,b)}if(b=!0,f)for(var x=f.length-1;0<=x;x--){var V=d.g=f[x];b=pu(V,g,!0,d)&&b}if(V=d.g=c,b=pu(V,g,!0,d)&&b,b=pu(V,g,!1,d)&&b,f)for(x=0;x<f.length;x++)V=d.g=f[x],b=pu(V,g,!1,d)&&b}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)hu(f[g]);delete c.g[d],c.h--}}this.F=null},yt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},yt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function pu(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,x=0;x<d.length;++x){var V=d[x];if(V&&!V.da&&V.capture==f){var Re=V.listener,ft=V.ha||V.src;V.fa&&Cf(c.i,V),b=Re.call(ft,g)!==!1&&b}}return b&&!g.defaultPrevented}function $w(c,d,f){if(typeof c=="function")f&&(c=y(c,f));else if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Hw(c){c.g=$w(()=>{c.g=null,c.i&&(c.i=!1,Hw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class yR extends xr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Hw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sa(c){xr.call(this),this.h=c,this.g={}}S(sa,xr);var qw=[];function zw(c){re(c.g,function(d,f){this.g.hasOwnProperty(f)&&Af(d)},c),c.g={}}sa.prototype.N=function(){sa.aa.N.call(this),zw(this)},sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nf=a.JSON.stringify,vR=a.JSON.parse,_R=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Pf(){}Pf.prototype.h=null;function Gw(c){return c.h||(c.h=c.i())}function Ww(){}var aa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Of(){mt.call(this,"d")}S(Of,mt);function kf(){mt.call(this,"c")}S(kf,mt);var _i={},Kw=null;function gu(){return Kw=Kw||new yt}_i.La="serverreachability";function Qw(c){mt.call(this,_i.La,c)}S(Qw,mt);function ca(c){let d=gu();Rt(d,new Qw(d))}_i.STAT_EVENT="statevent";function Yw(c,d){mt.call(this,_i.STAT_EVENT,c),this.stat=d}S(Yw,mt);function Mt(c){let d=gu();Rt(d,new Yw(d,c))}_i.Ma="timingevent";function Zw(c,d){mt.call(this,_i.Ma,c),this.size=d}S(Zw,mt);function ua(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function la(){this.g=!0}la.prototype.xa=function(){this.g=!1};function wR(c,d,f,g,b,x){c.info(function(){if(c.g)if(x)for(var V="",Re=x.split("&"),ft=0;ft<Re.length;ft++){var Ee=Re[ft].split("=");if(1<Ee.length){var vt=Ee[0];Ee=Ee[1];var _t=vt.split("_");V=2<=_t.length&&_t[1]=="type"?V+(vt+"="+Ee+"&"):V+(vt+"=redacted&")}}else V=null;else V=x;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+V})}function IR(c,d,f,g,b,x,V){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+x+" "+V})}function mo(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+DR(c,f)+(g?" "+g:"")})}function ER(c,d){c.info(function(){return"TIMEOUT: "+d})}la.prototype.info=function(){};function DR(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var x=b[0];if(x!="noop"&&x!="stop"&&x!="close")for(var V=1;V<b.length;V++)b[V]=""}}}}return Nf(f)}catch{return d}}var mu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ff;function yu(){}S(yu,Pf),yu.prototype.g=function(){return new XMLHttpRequest},yu.prototype.i=function(){return{}},Ff=new yu;function Rr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new sa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xw}function Xw(){this.i=null,this.g="",this.h=!1}var eI={},Vf={};function Lf(c,d,f){c.L=1,c.v=Iu(er(d)),c.m=f,c.P=!0,tI(c,null)}function tI(c,d){c.F=Date.now(),vu(c),c.A=er(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),gI(f.i,"t",g),c.C=0,f=c.j.J,c.h=new Xw,c.g=PI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new yR(y(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(qw[0]=b.toString()),b=qw);for(var x=0;x<b.length;x++){var V=Vw(f,b[x],g||d.handleEvent,!1,d.h||d);if(!V)break;d.g[V.key]=V}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ca(),wR(c.i,c.u,c.A,c.l,c.R,c.m)}Rr.prototype.ca=function(c){c=c.target;let d=this.M;d&&tr(c)==3?d.j():this.Y(c)},Rr.prototype.Y=function(c){try{if(c==this.g)e:{let _t=tr(this.g);var d=this.g.Ba();let _o=this.g.Z();if(!(3>_t)&&(_t!=3||this.g&&(this.h.h||this.g.oa()||EI(this.g)))){this.J||_t!=4||d==7||(d==8||0>=_o?ca(3):ca(2)),Uf(this);var f=this.g.Z();this.X=f;t:if(nI(this)){var g=EI(this.g);c="";var b=g.length,x=tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wi(this),da(this);var V="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(x&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,V=this.h.g}else V=this.g.oa();if(this.o=f==200,IR(this.i,this.u,this.A,this.l,this.R,_t,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,ft=this.g;if((Re=ft.g?ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(Re)){var Ee=Re;break t}}Ee=null}if(f=Ee)mo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jf(this,f);else{this.o=!1,this.s=3,Mt(12),wi(this),da(this);break e}}if(this.P){f=!0;let cn;for(;!this.J&&this.C<V.length;)if(cn=CR(this,V),cn==Vf){_t==4&&(this.s=4,Mt(14),f=!1),mo(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==eI){this.s=4,Mt(15),mo(this.i,this.l,V,"[Invalid Chunk]"),f=!1;break}else mo(this.i,this.l,cn,null),jf(this,cn);if(nI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_t!=4||V.length!=0||this.h.h||(this.s=1,Mt(16),f=!1),this.o=this.o&&f,!f)mo(this.i,this.l,V,"[Invalid Chunked Response]"),wi(this),da(this);else if(0<V.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),Gf(vt),vt.M=!0,Mt(11))}}else mo(this.i,this.l,V,null),jf(this,V);_t==4&&wi(this),this.o&&!this.J&&(_t==4?xI(this.j,this):(this.o=!1,vu(this)))}else BR(this.g),f==400&&0<V.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),wi(this),da(this)}}}catch{}finally{}};function nI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function CR(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Vf:(f=Number(d.substring(f,g)),isNaN(f)?eI:(g+=1,g+f>d.length?Vf:(d=d.slice(g,g+f),c.C=g+f,d)))}Rr.prototype.cancel=function(){this.J=!0,wi(this)};function vu(c){c.S=Date.now()+c.I,rI(c,c.I)}function rI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ua(y(c.ba,c),d)}function Uf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Rr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(ER(this.i,this.A),this.L!=2&&(ca(),Mt(17)),wi(this),this.s=2,da(this)):rI(this,this.S-c)};function da(c){c.j.G==0||c.J||xI(c.j,c)}function wi(c){Uf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,zw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function jf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Bf(f.h,c))){if(!c.K&&Bf(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Tu(f),Cu(f);else break e;zf(f),Mt(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=ua(y(f.Za,f),6e3));if(1>=sI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ei(f,11)}else if((c.K||f.g==c)&&Tu(f),!K(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let Ee=b[d];if(f.T=Ee[0],Ee=Ee[1],f.G==2)if(Ee[0]=="c"){f.K=Ee[1],f.ia=Ee[2];let vt=Ee[3];vt!=null&&(f.la=vt,f.j.info("VER="+f.la));let _t=Ee[4];_t!=null&&(f.Aa=_t,f.j.info("SVER="+f.Aa));let _o=Ee[5];_o!=null&&typeof _o=="number"&&0<_o&&(g=1.5*_o,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let cn=c.g;if(cn){let Au=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Au){var x=g.h;x.g||Au.indexOf("spdy")==-1&&Au.indexOf("quic")==-1&&Au.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&($f(x,x.h),x.h=null))}if(g.D){let Wf=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;Wf&&(g.ya=Wf,Pe(g.I,g.D,Wf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var V=c;if(g.qa=NI(g,g.J?g.ia:null,g.W),V.K){aI(g.h,V);var Re=V,ft=g.L;ft&&(Re.I=ft),Re.B&&(Uf(Re),vu(Re)),g.g=V}else SI(g);0<f.i.length&&bu(f)}else Ee[0]!="stop"&&Ee[0]!="close"||Ei(f,7);else f.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Ei(f,7):qf(f):Ee[0]!="noop"&&f.l&&f.l.ta(Ee),f.v=0)}}ca(4)}catch{}}var bR=class{constructor(c,d){this.g=c,this.map=d}};function iI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function oI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function sI(c){return c.h?1:c.g?c.g.size:0}function Bf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function $f(c,d){c.g?c.g.add(d):c.h=d}function aI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}iI.prototype.cancel=function(){if(this.i=cI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function cI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return O(c.i)}function TR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function SR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function uI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=SR(c),g=TR(c),b=g.length,x=0;x<b;x++)d.call(void 0,g[x],f&&f[x],c)}var lI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function AR(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var x=c[f].substring(0,g);b=c[f].substring(g+1)}else x=c[f];d(x,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Ii(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ii){this.h=c.h,_u(this,c.j),this.o=c.o,this.g=c.g,wu(this,c.s),this.l=c.l;var d=c.i,f=new pa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),dI(this,f),this.m=c.m}else c&&(d=String(c).match(lI))?(this.h=!1,_u(this,d[1]||"",!0),this.o=ha(d[2]||""),this.g=ha(d[3]||"",!0),wu(this,d[4]),this.l=ha(d[5]||"",!0),dI(this,d[6]||"",!0),this.m=ha(d[7]||"")):(this.h=!1,this.i=new pa(null,this.h))}Ii.prototype.toString=function(){var c=[],d=this.j;d&&c.push(fa(d,hI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(fa(d,hI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(fa(f,f.charAt(0)=="/"?MR:RR,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",fa(f,PR)),c.join("")};function er(c){return new Ii(c)}function _u(c,d,f){c.j=f?ha(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function wu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function dI(c,d,f){d instanceof pa?(c.i=d,OR(c.i,c.h)):(f||(d=fa(d,NR)),c.i=new pa(d,c.h))}function Pe(c,d,f){c.i.set(d,f)}function Iu(c){return Pe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ha(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function fa(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,xR),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function xR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var hI=/[#\/\?@]/g,RR=/[#\?:]/g,MR=/[#\?]/g,NR=/[#\?@]/g,PR=/#/g;function pa(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Mr(c){c.g||(c.g=new Map,c.h=0,c.i&&AR(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=pa.prototype,n.add=function(c,d){Mr(this),this.i=null,c=yo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function fI(c,d){Mr(c),d=yo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function pI(c,d){return Mr(c),d=yo(c,d),c.g.has(d)}n.forEach=function(c,d){Mr(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},n.na=function(){Mr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let x=0;x<b.length;x++)f.push(d[g])}return f},n.V=function(c){Mr(this);let d=[];if(typeof c=="string")pI(this,c)&&(d=d.concat(this.g.get(yo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Mr(this),this.i=null,c=yo(this,c),pI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function gI(c,d,f){fI(c,d),0<f.length&&(c.i=null,c.g.set(yo(c,d),O(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let x=encodeURIComponent(String(g)),V=this.V(g);for(g=0;g<V.length;g++){var b=x;V[g]!==""&&(b+="="+encodeURIComponent(String(V[g]))),c.push(b)}}return this.i=c.join("&")};function yo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function OR(c,d){d&&!c.j&&(Mr(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(fI(this,g),gI(this,b,f))},c)),c.j=d}function kR(c,d){let f=new la;if(a.Image){let g=new Image;g.onload=_(Nr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=_(Nr,f,"TestLoadImage: error",!1,d,g),g.onabort=_(Nr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=_(Nr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function FR(c,d){let f=new la,g=new AbortController,b=setTimeout(()=>{g.abort(),Nr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(x=>{clearTimeout(b),x.ok?Nr(f,"TestPingServer: ok",!0,d):Nr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Nr(f,"TestPingServer: error",!1,d)})}function Nr(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function VR(){this.g=new _R}function LR(c,d,f){let g=f||"";try{uI(c,function(b,x){let V=b;l(b)&&(V=Nf(b)),d.push(g+x+"="+encodeURIComponent(V))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function ga(c){this.l=c.Ub||null,this.j=c.eb||!1}S(ga,Pf),ga.prototype.g=function(){return new Eu(this.l,this.j)},ga.prototype.i=function(c){return function(){return c}}({});function Eu(c,d){yt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Eu,yt),n=Eu.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,ya(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ma(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ya(this)),this.g&&(this.readyState=3,ya(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function mI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ma(this):ya(this),this.readyState==3&&mI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,ma(this))},n.Qa=function(c){this.g&&(this.response=c,ma(this))},n.ga=function(){this.g&&ma(this)};function ma(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ya(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function ya(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Eu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function yI(c){let d="";return re(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Hf(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=yI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Pe(c,d,f))}function $e(c){yt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S($e,yt);var UR=/^https?$/i,jR=["POST","PUT"];n=$e.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ff.g(),this.v=this.o?Gw(this.o):Gw(Ff),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(x){vI(this,x);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let x of g.keys())f.set(x,g.get(x));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(jR,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,V]of f)this.g.setRequestHeader(x,V);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{II(this),this.u=!0,this.g.send(c),this.u=!1}catch(x){vI(this,x)}};function vI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,_I(c),Du(c)}function _I(c){c.A||(c.A=!0,Rt(c,"complete"),Rt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Rt(this,"complete"),Rt(this,"abort"),Du(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Du(this,!0)),$e.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?wI(this):this.bb())},n.bb=function(){wI(this)};function wI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||tr(c)!=4||c.Z()!=2)){if(c.u&&tr(c)==4)$w(c.Ea,0,c);else if(Rt(c,"readystatechange"),tr(c)==4){c.h=!1;try{let V=c.Z();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=V===0){var b=String(c.D).match(lI)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!UR.test(b?b.toLowerCase():"")}f=g}if(f)Rt(c,"complete"),Rt(c,"success");else{c.m=6;try{var x=2<tr(c)?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.Z()+"]",_I(c)}}finally{Du(c)}}}}function Du(c,d){if(c.g){II(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Rt(c,"ready");try{f.onreadystatechange=g}catch{}}}function II(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function tr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<tr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),vR(d)}};function EI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function BR(c){let d={};c=(c.g&&2<=tr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(K(c[g]))continue;var f=C(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[b]||[];d[b]=x,x.push(f)}D(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function va(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function DI(c){this.Aa=0,this.i=[],this.j=new la,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=va("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=va("baseRetryDelayMs",5e3,c),this.cb=va("retryDelaySeedMs",1e4,c),this.Wa=va("forwardChannelMaxRetries",2,c),this.wa=va("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new iI(c&&c.concurrentRequestLimit),this.Da=new VR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=DI.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){Mt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=NI(this,null,this.W),bu(this)};function qf(c){if(CI(c),c.G==3){var d=c.U++,f=er(c.I);if(Pe(f,"SID",c.K),Pe(f,"RID",d),Pe(f,"TYPE","terminate"),_a(c,f),d=new Rr(c,c.j,d),d.L=2,d.v=Iu(er(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=PI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),vu(d)}MI(c)}function Cu(c){c.g&&(Gf(c),c.g.cancel(),c.g=null)}function CI(c){Cu(c),c.u&&(a.clearTimeout(c.u),c.u=null),Tu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function bu(c){if(!oI(c.h)&&!c.s){c.s=!0;var d=c.Ga;na||Fw(),ra||(na(),ra=!0),Df.add(d,c),c.B=0}}function $R(c,d){return sI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ua(y(c.Ga,c,d),RI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Rr(this,this.j,c),x=this.o;if(this.S&&(x?(x=v(x),E(x,this.S)):x=this.S),this.m!==null||this.O||(b.H=x,x=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=TI(this,b,d),f=er(this.I),Pe(f,"RID",c),Pe(f,"CVER",22),this.D&&Pe(f,"X-HTTP-Session-Id",this.D),_a(this,f),x&&(this.O?d="headers="+encodeURIComponent(String(yI(x)))+"&"+d:this.m&&Hf(f,this.m,x)),$f(this.h,b),this.Ua&&Pe(f,"TYPE","init"),this.P?(Pe(f,"$req",d),Pe(f,"SID","null"),b.T=!0,Lf(b,f,null)):Lf(b,f,d),this.G=2}}else this.G==3&&(c?bI(this,c):this.i.length==0||oI(this.h)||bI(this))};function bI(c,d){var f;d?f=d.l:f=c.U++;let g=er(c.I);Pe(g,"SID",c.K),Pe(g,"RID",f),Pe(g,"AID",c.T),_a(c,g),c.m&&c.o&&Hf(g,c.m,c.o),f=new Rr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=TI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),$f(c.h,f),Lf(f,g,d)}function _a(c,d){c.H&&re(c.H,function(f,g){Pe(d,g,f)}),c.l&&uI({},function(f,g){Pe(d,g,f)})}function TI(c,d,f){f=Math.min(c.i.length,f);var g=c.l?y(c.l.Na,c.l,c):null;e:{var b=c.i;let x=-1;for(;;){let V=["count="+f];x==-1?0<f?(x=b[0].g,V.push("ofs="+x)):x=0:V.push("ofs="+x);let Re=!0;for(let ft=0;ft<f;ft++){let Ee=b[ft].g,vt=b[ft].map;if(Ee-=x,0>Ee)x=Math.max(0,b[ft].g-100),Re=!1;else try{LR(vt,V,"req"+Ee+"_")}catch{g&&g(vt)}}if(Re){g=V.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function SI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;na||Fw(),ra||(na(),ra=!0),Df.add(d,c),c.v=0}}function zf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ua(y(c.Fa,c),RI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,AI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ua(y(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),Cu(this),AI(this))};function Gf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function AI(c){c.g=new Rr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=er(c.qa);Pe(d,"RID","rpc"),Pe(d,"SID",c.K),Pe(d,"AID",c.T),Pe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Pe(d,"TO",c.ja),Pe(d,"TYPE","xmlhttp"),_a(c,d),c.m&&c.o&&Hf(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Iu(er(d)),f.m=null,f.P=!0,tI(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Cu(this),zf(this),Mt(19))};function Tu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function xI(c,d){var f=null;if(c.g==d){Tu(c),Gf(c),c.g=null;var g=2}else if(Bf(c.h,d))f=d.D,aI(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=gu(),Rt(g,new Zw(g,f)),bu(c)}else SI(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&$R(c,d)||g==2&&zf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:Ei(c,5);break;case 4:Ei(c,10);break;case 3:Ei(c,6);break;default:Ei(c,2)}}}function RI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Ei(c,d){if(c.j.info("Error code "+d),d==2){var f=y(c.fb,c),g=c.Xa;let b=!g;g=new Ii(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_u(g,"https"),Iu(g),b?kR(g.toString(),f):FR(g.toString(),f)}else Mt(2);c.G=0,c.l&&c.l.sa(d),MI(c),CI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function MI(c){if(c.G=0,c.ka=[],c.l){let d=cI(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,O(c.i),c.i.length=0),c.l.ra()}}function NI(c,d,f){var g=f instanceof Ii?er(f):new Ii(f);if(g.g!="")d&&(g.g=d+"."+g.g),wu(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var x=new Ii(null);g&&_u(x,g),d&&(x.g=d),b&&wu(x,b),f&&(x.l=f),g=x}return f=c.D,d=c.ya,f&&d&&Pe(g,f,d),Pe(g,"VER",c.la),_a(c,g),g}function PI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new $e(new ga({eb:f})):new $e(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function OI(){}n=OI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Su(){}Su.prototype.g=function(c,d){return new jt(c,d)};function jt(c,d){yt.call(this),this.g=new DI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!K(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!K(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new vo(this)}S(jt,yt),jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){qf(this.g)},jt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Nf(c),c=f);d.i.push(new bR(d.Ya++,c)),d.G==3&&bu(d)},jt.prototype.N=function(){this.g.l=null,delete this.j,qf(this.g),delete this.g,jt.aa.N.call(this)};function kI(c){Of.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(kI,Of);function FI(){kf.call(this),this.status=1}S(FI,kf);function vo(c){this.g=c}S(vo,OI),vo.prototype.ua=function(){Rt(this.g,"a")},vo.prototype.ta=function(c){Rt(this.g,new kI(c))},vo.prototype.sa=function(c){Rt(this.g,new FI)},vo.prototype.ra=function(){Rt(this.g,"b")},Su.prototype.createWebChannel=Su.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,Ev=Er.createWebChannelTransport=function(){return new Su},Iv=Er.getStatEventTarget=function(){return gu()},wv=Er.Event=_i,vh=Er.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},mu.NO_ERROR=0,mu.TIMEOUT=8,mu.HTTP_ERROR=6,Rc=Er.ErrorCode=mu,Jw.COMPLETE="complete",_v=Er.EventType=Jw,Ww.EventType=aa,aa.OPEN="a",aa.CLOSE="b",aa.ERROR="c",aa.MESSAGE="d",yt.prototype.listen=yt.prototype.K,bs=Er.WebChannel=Ww,cB=Er.FetchXmlHttpFactory=ga,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,vv=Er.XhrIo=$e}).apply(typeof yh<"u"?yh:typeof self<"u"?self:typeof window<"u"?window:{});var wS="@firebase/firestore";var dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");var qs="10.14.0";var ro=new oi("@firebase/firestore");function Mc(){return ro.logLevel}function H(n,...e){if(ro.logLevel<=ye.DEBUG){let t=e.map(rw);ro.debug(`Firestore (${qs}): ${n}`,...t)}}function Dr(n,...e){if(ro.logLevel<=ye.ERROR){let t=e.map(rw);ro.error(`Firestore (${qs}): ${n}`,...t)}}function Ns(n,...e){if(ro.logLevel<=ye.WARN){let t=e.map(rw);ro.warn(`Firestore (${qs}): ${n}`,...t)}}function rw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function J(n="Unexpected state"){let e=`FIRESTORE (${qs}) INTERNAL ASSERTION FAILED: `+n;throw Dr(e),new Error(e)}function xe(n,e){n||J()}function ne(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends Wt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var wn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Dh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Sv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(dt.UNAUTHENTICATED))}shutdown(){}},Av=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},xv=class{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xe(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new wn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new wn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>m(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new wn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string"),new Dh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string"),new dt(e)}},Rv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Mv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Rv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Nv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Pv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){xe(this.o===void 0);let r=o=>{o.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,H("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xe(typeof t.token=="string"),this.R=t.token,new Nv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function uB(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Ch=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=uB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function Ce(n,e){return n<e?-1:n>e?1:0}function Ps(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var gt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new B(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new B(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new B(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var se=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new gt(0,0))}static max(){return new n(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var bh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&J(),r===void 0?r=e.length-t:r>e.length-t&&J(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},je=class n extends bh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},lB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Kt=class n extends bh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return lB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new B(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new B(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var W=class n{constructor(e){this.path=e}static fromPath(e){return new n(je.fromString(e))}static fromName(e){return new n(je.fromString(e).popFirst(5))}static empty(){return new n(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new je(e.slice()))}};var Ov=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Ov.UNKNOWN_ID=-1;function dB(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new gt(t+1,0):new gt(t,r));return new io(i,W.empty(),e)}function hB(n){return new io(n.readTime,n.key,-1)}var io=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(se.min(),W.empty(),-1)}static max(){return new n(se.max(),W.empty(),-1)}};function fB(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=W.comparator(n.documentKey,e.documentKey),t!==0?t:Ce(n.largestBatchId,e.largestBatchId))}var pB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",kv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Jc(n){return m(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==pB)throw n;H("LocalStore","Unexpectedly lost primary lease")})}var F=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function gB(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Xc(n){return n.name==="IndexedDbTransactionError"}var tA=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function tf(n){return n==null}function Vc(n){return n===0&&1/n==-1/0}function mB(n){return typeof n=="number"&&Number.isInteger(n)&&!Vc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var yB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],X8=[...yB,"documentOverlays"],vB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_B=vB,wB=[..._B,"indexConfiguration","indexState","indexEntries"];var eK=[...wB,"globals"];function IS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zs(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function nA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ze=class n{constructor(e,t){this.comparator=e,this.root=t||Wn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xs(this.root,e,this.comparator,!1)}getReverseIterator(){return new xs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xs(this.root,e,this.comparator,!0)}},xs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Wn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();let e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}};Wn.EMPTY=null,Wn.RED=!0,Wn.BLACK=!1;Wn.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Wn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var At=class n{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Th(this.data.getIterator())}getIteratorFrom(e){return new Th(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Th=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Gn=class n{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new n([])}unionWith(e){let t=new At(Kt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ps(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Sh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var xt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Sh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};xt.EMPTY_BYTE_STRING=new xt("");var IB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cr(n){if(xe(!!n),typeof n=="string"){let e=0,t=IB.exec(n);if(xe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(n.seconds),nanos:ke(n.nanos)}}function ke(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function mi(n){return typeof n=="string"?xt.fromBase64String(n):xt.fromUint8Array(n)}function iw(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function ow(n){let e=n.mapValue.fields.__previous_value__;return iw(e)?ow(e):e}function Lc(n){let e=Cr(n.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}var Fv=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Ah=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var _h={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function oo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?iw(n)?4:iA(n)?9007199254740991:rA(n)?10:11:J()}function Yn(n,e){if(n===e)return!0;let t=oo(n);if(t!==oo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Lc(n).isEqual(Lc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Cr(i.timestampValue),a=Cr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return mi(i.bytesValue).isEqual(mi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ke(i.geoPointValue.latitude)===ke(o.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ke(i.integerValue)===ke(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ke(i.doubleValue),a=ke(o.doubleValue);return s===a?Vc(s)===Vc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Ps(n.arrayValue.values||[],e.arrayValue.values||[],Yn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(IS(s)!==IS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Yn(s[u],a[u])))return!1;return!0}(n,e);default:return J()}}function Uc(n,e){return(n.values||[]).find(t=>Yn(t,e))!==void 0}function Os(n,e){if(n===e)return 0;let t=oo(n),r=oo(e);if(t!==r)return Ce(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ce(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ke(o.integerValue||o.doubleValue),u=ke(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return ES(n.timestampValue,e.timestampValue);case 4:return ES(Lc(n),Lc(e));case 5:return Ce(n.stringValue,e.stringValue);case 6:return function(o,s){let a=mi(o),u=mi(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=Ce(a[l],u[l]);if(h!==0)return h}return Ce(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Ce(ke(o.latitude),ke(s.latitude));return a!==0?a:Ce(ke(o.longitude),ke(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return DS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},y=s.fields||{},_=(a=p.value)===null||a===void 0?void 0:a.arrayValue,S=(u=y.value)===null||u===void 0?void 0:u.arrayValue,O=Ce(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return O!==0?O:DS(_,S)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===_h.mapValue&&s===_h.mapValue)return 0;if(o===_h.mapValue)return 1;if(s===_h.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let y=Ce(u[p],h[p]);if(y!==0)return y;let _=Os(a[u[p]],l[h[p]]);if(_!==0)return _}return Ce(u.length,h.length)}(n.mapValue,e.mapValue);default:throw J()}}function ES(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ce(n,e);let t=Cr(n),r=Cr(e),i=Ce(t.seconds,r.seconds);return i!==0?i:Ce(t.nanos,r.nanos)}function DS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Os(t[i],r[i]);if(o)return o}return Ce(t.length,r.length)}function ks(n){return Vv(n)}function Vv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Cr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return mi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return W.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Vv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Vv(t.fields[s])}`;return i+"}"}(n.mapValue):J()}function CS(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Lv(n){return!!n&&"integerValue"in n}function sw(n){return!!n&&"arrayValue"in n}function bS(n){return!!n&&"nullValue"in n}function TS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ih(n){return!!n&&"mapValue"in n}function rA(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Pc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return zs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Pc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function iA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var _n=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ih(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pc(t)}setAll(e){let t=Kt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Pc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Ih(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ih(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){zs(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Pc(this.value))}};function oA(n){let e=[];return zs(n.fields,(t,r)=>{let i=new Kt([t]);if(Ih(r)){let o=oA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Gn(e)}var En=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,se.min(),se.min(),se.min(),_n.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,se.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,se.min(),se.min(),_n.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,se.min(),se.min(),_n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Fs=class{constructor(e,t){this.position=e,this.inclusive=t}};function SS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=W.comparator(W.fromName(s.referenceValue),t.key):r=Os(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function AS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yn(n.position[t],e.position[t]))return!1;return!0}var Vs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function EB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var xh=class{},rt=class n extends xh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new jv(e,t,r):t==="array-contains"?new Hv(e,r):t==="in"?new qv(e,r):t==="not-in"?new zv(e,r):t==="array-contains-any"?new Gv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Bv(e,r):new $v(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Os(t,this.value)):t!==null&&oo(this.value)===oo(t)&&this.matchesComparison(Os(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Dn=class n extends xh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return sA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function sA(n){return n.op==="and"}function aA(n){return DB(n)&&sA(n)}function DB(n){for(let e of n.filters)if(e instanceof Dn)return!1;return!0}function Uv(n){if(n instanceof rt)return n.field.canonicalString()+n.op.toString()+ks(n.value);if(aA(n))return n.filters.map(e=>Uv(e)).join(",");{let e=n.filters.map(t=>Uv(t)).join(",");return`${n.op}(${e})`}}function cA(n,e){return n instanceof rt?function(r,i){return i instanceof rt&&r.op===i.op&&r.field.isEqual(i.field)&&Yn(r.value,i.value)}(n,e):n instanceof Dn?function(r,i){return i instanceof Dn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&cA(s,i.filters[a]),!0):!1}(n,e):void J()}function uA(n){return n instanceof rt?function(t){return`${t.field.canonicalString()} ${t.op} ${ks(t.value)}`}(n):n instanceof Dn?function(t){return t.op.toString()+" {"+t.getFilters().map(uA).join(" ,")+"}"}(n):"Filter"}var jv=class extends rt{constructor(e,t,r){super(e,t,r),this.key=W.fromName(r.referenceValue)}matches(e){let t=W.comparator(e.key,this.key);return this.matchesComparison(t)}},Bv=class extends rt{constructor(e,t){super(e,"in",t),this.keys=lA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},$v=class extends rt{constructor(e,t){super(e,"not-in",t),this.keys=lA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function lA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>W.fromName(r.referenceValue))}var Hv=class extends rt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return sw(t)&&Uc(t.arrayValue,this.value)}},qv=class extends rt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Uc(this.value.arrayValue,t)}},zv=class extends rt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Uc(this.value.arrayValue,t)}},Gv=class extends rt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!sw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Uc(this.value.arrayValue,r))}};var Wv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function xS(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Wv(n,e,t,r,i,o,s)}function aw(n){let e=ne(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Uv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),tf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ks(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ks(r)).join(",")),e.ue=t}return e.ue}function cw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!EB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!AS(n.startAt,e.startAt)&&AS(n.endAt,e.endAt)}function Kv(n){return W.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var so=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function CB(n,e,t,r,i,o,s,a){return new so(n,e,t,r,i,o,s,a)}function nf(n){return new so(n)}function RS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function dA(n){return n.collectionGroup!==null}function Oc(n){let e=ne(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new At(Kt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Vs(o,r))}),t.has(Kt.keyField().canonicalString())||e.ce.push(new Vs(Kt.keyField(),r))}return e.ce}function Kn(n){let e=ne(n);return e.le||(e.le=bB(e,Oc(n))),e.le}function bB(n,e){if(n.limitType==="F")return xS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Vs(i.field,o)});let t=n.endAt?new Fs(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Fs(n.startAt.position,n.startAt.inclusive):null;return xS(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Qv(n,e){let t=n.filters.concat([e]);return new so(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Yv(n,e,t){return new so(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rf(n,e){return cw(Kn(n),Kn(e))&&n.limitType===e.limitType}function hA(n){return`${aw(Kn(n))}|lt:${n.limitType}`}function Ts(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>uA(i)).join(", ")}]`),tf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ks(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ks(i)).join(",")),`Target(${r})`}(Kn(n))}; limitType=${n.limitType})`}function of(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):W.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Oc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=SS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Oc(r),i)||r.endAt&&!function(s,a,u){let l=SS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Oc(r),i))}(n,e)}function TB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fA(n){return(e,t)=>{let r=!1;for(let i of Oc(n)){let o=SB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function SB(n,e,t){let r=n.field.isKeyField()?W.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Os(u,l):J()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}var yi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zs(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return nA(this.inner)}size(){return this.innerSize}};var AB=new ze(W.comparator);function br(){return AB}var pA=new ze(W.comparator);function Nc(...n){let e=pA;for(let t of n)e=e.insert(t.key,t);return e}function gA(n){let e=pA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function eo(){return kc()}function mA(){return kc()}function kc(){return new yi(n=>n.toString(),(n,e)=>n.isEqual(e))}var xB=new ze(W.comparator),RB=new At(W.comparator);function ve(...n){let e=RB;for(let t of n)e=e.add(t);return e}var MB=new At(Ce);function NB(){return MB}function uw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vc(e)?"-0":e}}function yA(n){return{integerValue:""+n}}function PB(n,e){return mB(e)?yA(e):uw(n,e)}var Ls=class{constructor(){this._=void 0}};function OB(n,e,t){return n instanceof Us?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&iw(o)&&(o=ow(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof ao?_A(n,e):n instanceof co?wA(n,e):function(i,o){let s=vA(i,o),a=MS(s)+MS(i.Pe);return Lv(s)&&Lv(i.Pe)?yA(a):uw(i.serializer,a)}(n,e)}function kB(n,e,t){return n instanceof ao?_A(n,e):n instanceof co?wA(n,e):t}function vA(n,e){return n instanceof js?function(r){return Lv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Us=class extends Ls{},ao=class extends Ls{constructor(e){super(),this.elements=e}};function _A(n,e){let t=IA(e);for(let r of n.elements)t.some(i=>Yn(i,r))||t.push(r);return{arrayValue:{values:t}}}var co=class extends Ls{constructor(e){super(),this.elements=e}};function wA(n,e){let t=IA(e);for(let r of n.elements)t=t.filter(i=>!Yn(i,r));return{arrayValue:{values:t}}}var js=class extends Ls{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function MS(n){return ke(n.integerValue||n.doubleValue)}function IA(n){return sw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function FB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ao&&i instanceof ao||r instanceof co&&i instanceof co?Ps(r.elements,i.elements,Yn):r instanceof js&&i instanceof js?Yn(r.Pe,i.Pe):r instanceof Us&&i instanceof Us}(n.transform,e.transform)}var Zv=class{constructor(e,t){this.version=e,this.transformResults=t}},pi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Eh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Bs=class{};function EA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Rh(n.key,pi.none()):new uo(n.key,n.data,pi.none());{let t=n.data,r=_n.empty(),i=new At(Kt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Tr(n.key,r,new Gn(i.toArray()),pi.none())}}function VB(n,e,t){n instanceof uo?function(i,o,s){let a=i.value.clone(),u=PS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Tr?function(i,o,s){if(!Eh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=PS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(DA(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Fc(n,e,t,r){return n instanceof uo?function(o,s,a,u){if(!Eh(o.precondition,s))return a;let l=o.value.clone(),h=OS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Tr?function(o,s,a,u){if(!Eh(o.precondition,s))return a;let l=OS(o.fieldTransforms,u,s),h=s.data;return h.setAll(DA(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Eh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function LB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=vA(r.transform,i||null);o!=null&&(t===null&&(t=_n.empty()),t.set(r.field,o))}return t||null}function NS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ps(r,i,(o,s)=>FB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var uo=class extends Bs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Tr=class extends Bs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function DA(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function PS(n,e,t){let r=new Map;xe(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,kB(s,a,t[i]))}return r}function OS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,OB(o,s,e))}return r}var Rh=class extends Bs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Jv=class extends Bs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Xv=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&VB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Fc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=mA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=EA(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ve())}isEqual(e){return this.batchId===e.batchId&&Ps(this.mutations,e.mutations,(t,r)=>NS(t,r))&&Ps(this.baseMutations,e.baseMutations,(t,r)=>NS(t,r))}},e_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xe(e.mutations.length===r.length);let i=function(){return xB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var t_=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var n_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var tt,we;function UB(n){switch(n){default:return J();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function CA(n){if(n===void 0)return Dr("GRPC error has no .code"),N.UNKNOWN;switch(n){case tt.OK:return N.OK;case tt.CANCELLED:return N.CANCELLED;case tt.UNKNOWN:return N.UNKNOWN;case tt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case tt.INTERNAL:return N.INTERNAL;case tt.UNAVAILABLE:return N.UNAVAILABLE;case tt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case tt.NOT_FOUND:return N.NOT_FOUND;case tt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case tt.ABORTED:return N.ABORTED;case tt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case tt.DATA_LOSS:return N.DATA_LOSS;default:return J()}}(we=tt||(tt={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";var kS=null;function jB(){return new TextEncoder}var BB=new fi([4294967295,4294967295],0);function FS(n){let e=jB().encode(n),t=new yv;return t.update(e),new Uint8Array(t.digest())}function VS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new fi([t,r],0),new fi([i,o],0)]}var r_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new to(`Invalid padding: ${t}`);if(r<0)throw new to(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new to(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new to(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=fi.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(fi.fromNumber(r)));return i.compare(BB)===1&&(i=new fi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=FS(e),[r,i]=VS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=FS(e),[r,i]=VS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},to=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Mh=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,jc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(se.min(),i,new ze(Ce),br(),ve())}},jc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ve(),ve(),ve())}};var Rs=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Nh=class{constructor(e,t){this.targetId=e,this.me=t}},Ph=class{constructor(e,t,r=xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Oh=class{constructor(){this.fe=0,this.ge=US(),this.pe=xt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ve(),t=ve(),r=ve();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:J()}}),new jc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=US()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},i_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=br(),this.qe=LS(),this.Qe=new ze(Ce)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:J()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Kv(o))if(r===0){let s=new W(o.path);this.Ue(t,s,En.newNoDocument(s,se.min()))}else xe(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}kS?.et(function(h,p,y,_,S){var O,M,j,K,Q,de;let Be={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},re=p.unchangedNames;return re&&(Be.bloomFilter={applied:S===0,hashCount:(O=re?.hashCount)!==null&&O!==void 0?O:0,bitmapLength:(K=(j=(M=re?.bits)===null||M===void 0?void 0:M.bitmap)===null||j===void 0?void 0:j.length)!==null&&K!==void 0?K:0,padding:(de=(Q=re?.bits)===null||Q===void 0?void 0:Q.padding)!==null&&de!==void 0?de:0,mightContain:D=>{var v;return(v=_?.mightContain(D))!==null&&v!==void 0&&v}}),Be}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=mi(r).toUint8Array()}catch(u){if(u instanceof Sh)return Ns("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new r_(s,i,o)}catch(u){return Ns(u instanceof to?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Kv(a.target)){let u=new W(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,En.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ve();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Mh(e,t,this.Qe,this.ke,r);return this.ke=br(),this.qe=LS(),this.Qe=new ze(Ce),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Oh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new At(Ce),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||H("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Oh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function LS(){return new ze(W.comparator)}function US(){return new ze(W.comparator)}var $B={asc:"ASCENDING",desc:"DESCENDING"},HB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qB={and:"AND",or:"OR"},o_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function s_(n,e){return n.useProto3Json||tf(e)?e:{value:e}}function kh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function zB(n,e){return kh(n,e.toTimestamp())}function Qn(n){return xe(!!n),se.fromTimestamp(function(t){let r=Cr(t);return new gt(r.seconds,r.nanos)}(n))}function lw(n,e){return a_(n,e).canonicalString()}function a_(n,e){let t=function(i){return new je(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function TA(n){let e=je.fromString(n);return xe(MA(e)),e}function c_(n,e){return lw(n.databaseId,e.path)}function Dv(n,e){let t=TA(e);if(t.get(1)!==n.databaseId.projectId)throw new B(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new B(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new W(AA(t))}function SA(n,e){return lw(n.databaseId,e)}function GB(n){let e=TA(n);return e.length===4?je.emptyPath():AA(e)}function u_(n){return new je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AA(n){return xe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function jS(n,e,t){return{name:c_(n,e),fields:t.value.mapValue.fields}}function WB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(xe(h===void 0||typeof h=="string"),xt.fromBase64String(h||"")):(xe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),xt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?N.UNKNOWN:CA(l.code);return new B(h,l.message||"")}(s);t=new Ph(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Dv(n,r.document.name),o=Qn(r.document.updateTime),s=r.document.createTime?Qn(r.document.createTime):se.min(),a=new _n({mapValue:{fields:r.document.fields}}),u=En.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Rs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Dv(n,r.document),o=r.readTime?Qn(r.readTime):se.min(),s=En.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Rs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Dv(n,r.document),o=r.removedTargetIds||[];t=new Rs([],o,i,null)}else{if(!("filter"in e))return J();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new n_(i,o),a=r.targetId;t=new Nh(a,s)}}return t}function KB(n,e){let t;if(e instanceof uo)t={update:jS(n,e.key,e.value)};else if(e instanceof Rh)t={delete:c_(n,e.key)};else if(e instanceof Tr)t={update:jS(n,e.key,e.data),updateMask:r$(e.fieldMask)};else{if(!(e instanceof Jv))return J();t={verify:c_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Us)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ao)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof co)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof js)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw J()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:zB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:J()}(n,e.precondition)),t}function QB(n,e){return n&&n.length>0?(xe(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Qn(i.updateTime):Qn(o);return s.isEqual(se.min())&&(s=Qn(o)),new Zv(s,i.transformResults||[])}(t,e))):[]}function YB(n,e){return{documents:[SA(n,e.path)]}}function ZB(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=SA(n,i);let o=function(l){if(l.length!==0)return RA(Dn.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(y){return{field:Ss(y.field),direction:e$(y.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=s_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function JB(n){let e=GB(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){xe(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let y=xA(p);return y instanceof Dn&&aA(y)?y.getFilters():[y]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(y=>function(S){return new Vs(As(S.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(y))}(t.orderBy));let a=null;t.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,tf(y)?null:y}(t.limit));let u=null;t.startAt&&(u=function(p){let y=!!p.before,_=p.values||[];return new Fs(_,y)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let y=!p.before,_=p.values||[];return new Fs(_,y)}(t.endAt)),CB(e,i,s,o,a,"F",u,l)}function XB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=As(t.unaryFilter.field);return rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=As(t.unaryFilter.field);return rt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=As(t.unaryFilter.field);return rt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=As(t.unaryFilter.field);return rt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(n):n.fieldFilter!==void 0?function(t){return rt.create(As(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Dn.create(t.compositeFilter.filters.map(r=>xA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J()}}(t.compositeFilter.op))}(n):J()}function e$(n){return $B[n]}function t$(n){return HB[n]}function n$(n){return qB[n]}function Ss(n){return{fieldPath:n.canonicalString()}}function As(n){return Kt.fromServerFormat(n.fieldPath)}function RA(n){return n instanceof rt?function(t){if(t.op==="=="){if(TS(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NAN"}};if(bS(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(TS(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NOT_NAN"}};if(bS(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ss(t.field),op:t$(t.op),value:t.value}}}(n):n instanceof Dn?function(t){let r=t.getFilters().map(i=>RA(i));return r.length===1?r[0]:{compositeFilter:{op:n$(t.op),filters:r}}}(n):J()}function r$(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function MA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Bc=class n{constructor(e,t,r,i,o=se.min(),s=se.min(),a=xt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var l_=class{constructor(e){this.ct=e}};function i$(n){let e=JB({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Yv(e,e.limit,"L"):e}var Fh=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ke(e.integerValue));else if("doubleValue"in e){let r=ke(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Vc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Cr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(mi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?iA(e)?this.dt(t,Number.MAX_SAFE_INTEGER):rA(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):J()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ke(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),W.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Fh.vt=new Fh;var d_=class{constructor(){this.un=new h_}addToCollectionParentIndex(e,t){return this.un.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(io.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(io.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}},h_=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new At(je.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new At(je.comparator)).toArray()}};var nK=new Uint8Array(0);var zn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(41943040,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);var $c=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var f_=class{constructor(){this.changes=new yi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var p_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var g_=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Fc(r.mutation,i,Gn.empty(),gt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ve()){let i=eo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Nc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=eo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ve()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=br(),s=kc(),a=function(){return kc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Tr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Fc(h.mutation,l,h.mutation.getFieldMask(),gt.now())):s.set(l.key,Gn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new p_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=kc(),i=new ze((s,a)=>s-a),o=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Gn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ve()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=mA();h.forEach(y=>{if(!o.has(y)){let _=EA(t.get(y),r.get(y));_!==null&&p.set(y,_),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return F.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return W.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):F.resolve(eo()),a=-1,u=o;return s.next(l=>F.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{u=u.insert(h,y)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ve())).next(h=>({batchId:a,changes:gA(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new W(t)).next(r=>{let i=Nc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Nc();return this.indexManager.getCollectionParents(e,o).next(a=>F.forEach(a,u=>{let l=function(p,y){return new so(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,y)=>{s=s.insert(p,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,En.newInvalidDocument(h)))});let a=Nc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Fc(h.mutation,l,Gn.empty(),gt.now()),of(t,l)&&(a=a.insert(u,l))}),a})}};var m_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return F.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Qn(i.createTime)}}(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:i$(i.bundledQuery),readTime:Qn(i.readTime)}}(t)),F.resolve()}};var y_=class{constructor(){this.overlays=new ze(W.comparator),this.Ir=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){let r=eo();return F.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),F.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){let i=eo(),o=t.length+1,s=new W(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return F.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ze((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=eo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=eo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return F.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new t_(t,r));let o=this.Ir.get(t);o===void 0&&(o=ve(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var v_=class{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}};var Hc=class{constructor(){this.Tr=new At(nt.Er),this.dr=new At(nt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new nt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new nt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new W(new je([])),r=new nt(t,e),i=new nt(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new W(new je([])),r=new nt(t,e),i=new nt(t,e+1),o=ve();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new nt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},nt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return W.comparator(e.key,t.key)||Ce(e.wr,t.wr)}static Ar(e,t){return Ce(e.wr,t.wr)||W.comparator(e.key,t.key)}};var __=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new At(nt.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Xv(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new nt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(s)}lookupMutationBatch(e,t){return F.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return F.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new nt(t,0),i=new nt(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),F.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new At(Ce);return t.forEach(i=>{let o=new nt(i,0),s=new nt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;W.isDocumentKey(o)||(o=o.child(""));let s=new nt(new W(o),0),a=new At(Ce);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),F.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){xe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(t.mutations,i=>{let o=new nt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new nt(t,0),i=this.br.firstAfterOrEqual(r);return F.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var w_=class{constructor(e){this.Mr=e,this.docs=function(){return new ze(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():En.newInvalidDocument(t))}getEntries(e,t){let r=br();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():En.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=br(),s=t.path,a=new W(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||fB(hB(h),r)<=0||(i.has(h.key)||of(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return F.resolve(o)}getAllFromCollectionGroup(e,t,r,i){J()}Or(e,t){return F.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new I_(this)}getSize(e){return F.resolve(this.size)}},I_=class extends f_{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var E_=class{constructor(e){this.persistence=e,this.Nr=new yi(t=>aw(t),cw),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Hc,this.targetCount=0,this.kr=$c.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),F.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new $c(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.Kn(t),F.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(o).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),F.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),F.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),F.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this.Br.containsKey(t))}};var D_=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new tA(0),this.Kr=!1,this.Kr=!0,this.$r=new v_,this.referenceDelegate=e(this),this.Ur=new E_(this),this.indexManager=new d_,this.remoteDocumentCache=function(i){return new w_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new l_(t),this.Gr=new m_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new y_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new __(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){H("MemoryPersistence","Starting transaction:",e);let i=new C_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},C_=class extends kv{constructor(e){super(),this.currentSequenceNumber=e}},b_=class n{constructor(e){this.persistence=e,this.Jr=new Hc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw J()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),F.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{let i=W.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,se.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return F.or([()=>F.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var T_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ve(),i=ve();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var S_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var A_=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return eT()?8:gB(ut())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new S_;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Mc()<=ye.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Ts(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Mc()<=ye.DEBUG&&H("QueryEngine","Query:",Ts(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Mc()<=ye.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Ts(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kn(t))):F.resolve())}Yi(e,t){if(RS(t))return F.resolve(null);let r=Kn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Yv(t,null,"F"),r=Kn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ve(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,Yv(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return RS(t)||i.isEqual(se.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?F.resolve(null):(Mc()<=ye.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ts(t)),this.rs(e,s,t,dB(i,-1)).next(a=>a))})}ts(e,t){let r=new At(fA(e));return t.forEach((i,o)=>{of(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Mc()<=ye.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Ts(t)),this.Ji.getDocumentsMatchingQuery(e,t,io.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var x_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ze(Ce),this._s=new yi(o=>aw(o),cw),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new g_(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function o$(n,e,t,r){return new x_(n,e,t,r)}function NA(n,e){return m(this,null,function*(){let t=ne(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ve();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function s$(n,e){let t=ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,y=p.keys(),_=F.resolve();return y.forEach(S=>{_=_.next(()=>h.getEntry(u,S)).next(O=>{let M=l.docVersions.get(S);xe(M!==null),O.version.compareTo(M)<0&&(p.applyToRemoteDocument(O,l),O.isValidDocument()&&(O.setReadTime(l.commitVersion),h.addEntry(O)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ve();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function PA(n){let e=ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function a$(n,e){let t=ne(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let _=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(xt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(O,M,j){return O.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(y,_,h)&&a.push(t.Ur.updateTargetData(o,_))});let u=br(),l=ve();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(c$(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(se.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return F.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function c$(n,e,t){let r=ve(),i=ve();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=br();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(se.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function u$(n,e){let t=ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function l$(n,e){let t=ne(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,F.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Bc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function R_(n,e,t){return m(this,null,function*(){let r=ne(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Xc(s))throw s;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function BS(n,e,t){let r=ne(n),i=se.min(),o=ve();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=ne(u),y=p._s.get(h);return y!==void 0?F.resolve(p.os.get(y)):p.Ur.getTargetData(l,h)}(r,s,Kn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:se.min(),t?o:ve())).next(a=>(d$(r,TB(e),a),{documents:a,Ts:o})))}function d$(n,e,t){let r=n.us.get(e)||se.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}var Vh=class{constructor(){this.activeTargetIds=NB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var M_=class{constructor(){this.so=new Vh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Vh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var N_=class{_o(e){}shutdown(){}};var Lh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var wh=null;function Cv(){return wh===null?wh=function(){return 268435456+Math.round(2147483648*Math.random())}():wh++,"0x"+wh.toString(16)}var h$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var P_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var St="WebChannelConnection",O_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Cv(),u=this.xo(t,r.toUriEncodedString());H("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(H("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Ns("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qs}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=h$[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Cv();return new Promise((s,a)=>{let u=new vv;u.setWithCredentials(!0),u.listenOnce(_v.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Rc.NO_ERROR:let h=u.getResponseJson();H(St,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Rc.TIMEOUT:H(St,`RPC '${e}' ${o} timed out`),a(new B(N.DEADLINE_EXCEEDED,"Request time out"));break;case Rc.HTTP_ERROR:let p=u.getStatus();if(H(St,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let _=y?.error;if(_&&_.status&&_.message){let S=function(M){let j=M.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(j)>=0?j:N.UNKNOWN}(_.status);a(new B(S,_.message))}else a(new B(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new B(N.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{H(St,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);H(St,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Cv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ev(),a=Iv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");H(St,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),y=!1,_=!1,S=new P_({Io:M=>{_?H(St,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(y||(H(St,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),H(St,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},To:()=>p.close()}),O=(M,j,K)=>{M.listen(j,Q=>{try{K(Q)}catch(de){setTimeout(()=>{throw de},0)}})};return O(p,bs.EventType.OPEN,()=>{_||(H(St,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),O(p,bs.EventType.CLOSE,()=>{_||(_=!0,H(St,`RPC '${e}' stream ${i} transport closed`),S.So())}),O(p,bs.EventType.ERROR,M=>{_||(_=!0,Ns(St,`RPC '${e}' stream ${i} transport errored:`,M),S.So(new B(N.UNAVAILABLE,"The operation could not be completed")))}),O(p,bs.EventType.MESSAGE,M=>{var j;if(!_){let K=M.data[0];xe(!!K);let Q=K,de=Q.error||((j=Q[0])===null||j===void 0?void 0:j.error);if(de){H(St,`RPC '${e}' stream ${i} received error:`,de);let Be=de.status,re=function(w){let E=tt[w];if(E!==void 0)return CA(E)}(Be),D=de.message;re===void 0&&(re=N.INTERNAL,D="Unknown error status: "+Be+" with message "+de.message),_=!0,S.So(new B(re,D)),p.close()}else H(St,`RPC '${e}' stream ${i} received:`,K),S.bo(K)}}),O(a,wv.STAT_EVENT,M=>{M.stat===vh.PROXY?H(St,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===vh.NOPROXY&&H(St,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}};function bv(){return typeof document<"u"?document:null}function sf(n){return new o_(n,!0)}var Uh=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var jh=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Uh(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return m(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return m(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return m(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(Dr(t.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new B(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>m(this,null,function*(){this.state=0,this.start()}))}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},k_=class extends jh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=WB(this.serializer,e),r=function(o){if(!("targetChange"in o))return se.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?se.min():s.readTime?Qn(s.readTime):se.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=u_(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=Kv(u)?{documents:YB(o,u)}:{query:ZB(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=bA(o,s.resumeToken);let l=s_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(se.min())>0){a.readTime=kh(o,s.snapshotVersion.toTimestamp());let l=s_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=XB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=u_(this.serializer),t.removeTarget=e,this.a_(t)}},F_=class extends jh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return xe(!!e.streamToken),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=QB(e.writeResults,e.commitTime),r=Qn(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=u_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>KB(this.serializer,r))};this.a_(t)}};var V_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new B(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,a_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(N.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,a_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(N.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},L_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Dr(t),this.D_=!1):H("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var U_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>m(this,null,function*(){ho(this)&&(H("RemoteStore","Restarting streams for network reachability change."),yield function(u){return m(this,null,function*(){let l=ne(u);l.L_.add(4),yield eu(l),l.q_.set("Unknown"),l.L_.delete(4),yield af(l)})}(this))}))}),this.q_=new L_(r,i)}};function af(n){return m(this,null,function*(){if(ho(n))for(let e of n.B_)yield e(!0)})}function eu(n){return m(this,null,function*(){for(let e of n.B_)yield e(!1)})}function OA(n,e){let t=ne(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),pw(t)?fw(t):Gs(t).r_()&&hw(t,e))}function dw(n,e){let t=ne(n),r=Gs(t);t.N_.delete(e),r.r_()&&kA(t,e),t.N_.size===0&&(r.r_()?r.o_():ho(t)&&t.q_.set("Unknown"))}function hw(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Gs(n).A_(e)}function kA(n,e){n.Q_.xe(e),Gs(n).R_(e)}function fw(n){n.Q_=new i_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Gs(n).start(),n.q_.v_()}function pw(n){return ho(n)&&!Gs(n).n_()&&n.N_.size>0}function ho(n){return ne(n).L_.size===0}function FA(n){n.Q_=void 0}function f$(n){return m(this,null,function*(){n.q_.set("Online")})}function p$(n){return m(this,null,function*(){n.N_.forEach((e,t)=>{hw(n,e)})})}function g$(n,e){return m(this,null,function*(){FA(n),pw(n)?(n.q_.M_(e),fw(n)):n.q_.set("Unknown")})}function m$(n,e,t){return m(this,null,function*(){if(n.q_.set("Online"),e instanceof Ph&&e.state===2&&e.cause)try{yield function(i,o){return m(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Bh(n,r)}else if(e instanceof Rs?n.Q_.Ke(e):e instanceof Nh?n.Q_.He(e):n.Q_.We(e),!t.isEqual(se.min()))try{let r=yield PA(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(xt.EMPTY_BYTE_STRING,h.snapshotVersion)),kA(o,u);let p=new Bc(h.target,u,l,h.sequenceNumber);hw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){H("RemoteStore","Failed to raise snapshot:",r),yield Bh(n,r)}})}function Bh(n,e,t){return m(this,null,function*(){if(!Xc(e))throw e;n.L_.add(1),yield eu(n),n.q_.set("Offline"),t||(t=()=>PA(n.localStore)),n.asyncQueue.enqueueRetryable(()=>m(this,null,function*(){H("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield af(n)}))})}function VA(n,e){return e().catch(t=>Bh(n,t,e))}function cf(n){return m(this,null,function*(){let e=ne(n),t=vi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;y$(e);)try{let i=yield u$(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,v$(e,i)}catch(i){yield Bh(e,i)}LA(e)&&UA(e)})}function y$(n){return ho(n)&&n.O_.length<10}function v$(n,e){n.O_.push(e);let t=vi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function LA(n){return ho(n)&&!vi(n).n_()&&n.O_.length>0}function UA(n){vi(n).start()}function _$(n){return m(this,null,function*(){vi(n).p_()})}function w$(n){return m(this,null,function*(){let e=vi(n);for(let t of n.O_)e.m_(t.mutations)})}function I$(n,e,t){return m(this,null,function*(){let r=n.O_.shift(),i=e_.from(r,e,t);yield VA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield cf(n)})}function E$(n,e){return m(this,null,function*(){e&&vi(n).V_&&(yield function(r,i){return m(this,null,function*(){if(function(s){return UB(s)&&s!==N.ABORTED}(i.code)){let o=r.O_.shift();vi(r).s_(),yield VA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield cf(r)}})}(n,e)),LA(n)&&UA(n)})}function $S(n,e){return m(this,null,function*(){let t=ne(n);t.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");let r=ho(t);t.L_.add(3),yield eu(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield af(t)})}function D$(n,e){return m(this,null,function*(){let t=ne(n);e?(t.L_.delete(2),yield af(t)):e||(t.L_.add(2),yield eu(t),t.q_.set("Unknown"))})}function Gs(n){return n.K_||(n.K_=function(t,r,i){let o=ne(t);return o.w_(),new k_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:f$.bind(null,n),Ro:p$.bind(null,n),mo:g$.bind(null,n),d_:m$.bind(null,n)}),n.B_.push(e=>m(this,null,function*(){e?(n.K_.s_(),pw(n)?fw(n):n.q_.set("Unknown")):(yield n.K_.stop(),FA(n))}))),n.K_}function vi(n){return n.U_||(n.U_=function(t,r,i){let o=ne(t);return o.w_(),new F_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_$.bind(null,n),mo:E$.bind(null,n),f_:w$.bind(null,n),g_:I$.bind(null,n)}),n.B_.push(e=>m(this,null,function*(){e?(n.U_.s_(),yield cf(n)):(yield n.U_.stop(),n.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var j_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function gw(n,e){if(Dr("AsyncQueue",`${e}: ${n}`),Xc(n))return new B(N.UNAVAILABLE,`${e}: ${n}`);throw n}var $h=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||W.comparator(t.key,r.key):(t,r)=>W.comparator(t.key,r.key),this.keyedMap=Nc(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Hh=class{constructor(){this.W_=new ze(W.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):J():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},$s=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,$h.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var B_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},$_=class{constructor(){this.queries=HS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=ne(t),o=i.queries;i.queries=HS(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new B(N.ABORTED,"Firestore shutting down"))}};function HS(){return new yi(n=>hA(n),rf)}function mw(n,e){return m(this,null,function*(){let t=ne(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new B_,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=gw(s,`Initialization of query '${Ts(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&vw(t)})}function yw(n,e){return m(this,null,function*(){let t=ne(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function C$(n,e){let t=ne(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&vw(t)}function b$(n,e,t){let r=ne(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function vw(n){n.Y_.forEach(e=>{e.next()})}var H_,qS;(qS=H_||(H_={})).ea="default",qS.Cache="cache";var qc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new $s(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=$s.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==H_.Cache}};var qh=class{constructor(e){this.key=e}},zh=class{constructor(e){this.key=e}},q_=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ve(),this.mutatedKeys=ve(),this.Aa=fA(e),this.Ra=new $h(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Hh,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),_=of(this.query,p)?p:null,S=!!y&&this.mutatedKeys.has(y.key),O=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),M=!1;y&&_?y.data.isEqual(_.data)?S!==O&&(r.track({type:3,doc:_}),M=!0):this.ga(y,_)||(r.track({type:2,doc:_}),M=!0,(u&&this.Aa(_,u)>0||l&&this.Aa(_,l)<0)&&(a=!0)):!y&&_?(r.track({type:0,doc:_}),M=!0):y&&!_&&(r.track({type:1,doc:y}),M=!0,(u||l)&&(a=!0)),M&&(_?(s=s.add(_),o=O?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(_,S){let O=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return O(_)-O(S)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new $s(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Hh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ve(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new zh(r))}),this.da.forEach(r=>{e.has(r)||t.push(new qh(r))}),t}ba(e){this.Ta=e.Ts,this.da=ve();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return $s.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},z_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},G_=class{constructor(e){this.key=e,this.va=!1}},W_=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new yi(a=>hA(a),rf),this.Ma=new Map,this.xa=new Set,this.Oa=new ze(W.comparator),this.Na=new Map,this.La=new Hc,this.Ba={},this.ka=new Map,this.qa=$c.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function T$(n,e,t=!0){return m(this,null,function*(){let r=zA(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield jA(r,e,t,!0),i})}function S$(n,e){return m(this,null,function*(){let t=zA(n);yield jA(t,e,!0,!1)})}function jA(n,e,t,r){return m(this,null,function*(){let i=yield l$(n.localStore,Kn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield A$(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&OA(n.remoteStore,i),a})}function A$(n,e,t,r,i){return m(this,null,function*(){n.Ka=(p,y,_)=>function(O,M,j,K){return m(this,null,function*(){let Q=M.view.ma(j);Q.ns&&(Q=yield BS(O.localStore,M.query,!1).then(({documents:D})=>M.view.ma(D,Q)));let de=K&&K.targetChanges.get(M.targetId),Be=K&&K.targetMismatches.get(M.targetId)!=null,re=M.view.applyChanges(Q,O.isPrimaryClient,de,Be);return GS(O,M.targetId,re.wa),re.snapshot})}(n,p,y,_);let o=yield BS(n.localStore,e,!0),s=new q_(e,o.Ts),a=s.ma(o.documents),u=jc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);GS(n,t,l.wa);let h=new z_(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function x$(n,e,t){return m(this,null,function*(){let r=ne(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!rf(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield R_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&dw(r.remoteStore,i.targetId),K_(r,i.targetId)}).catch(Jc))):(K_(r,i.targetId),yield R_(r.localStore,i.targetId,!0))})}function R$(n,e){return m(this,null,function*(){let t=ne(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),dw(t.remoteStore,r.targetId))})}function M$(n,e,t){return m(this,null,function*(){let r=L$(n);try{let i=yield function(s,a){let u=ne(s),l=gt.now(),h=a.reduce((_,S)=>_.add(S.key),ve()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let S=br(),O=ve();return u.cs.getEntries(_,h).next(M=>{S=M,S.forEach((j,K)=>{K.isValidDocument()||(O=O.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,S)).next(M=>{p=M;let j=[];for(let K of a){let Q=LB(K,p.get(K.key).overlayedDocument);Q!=null&&j.push(new Tr(K.key,Q,oA(Q.value.mapValue),pi.exists(!0)))}return u.mutationQueue.addMutationBatch(_,l,j,a)}).next(M=>{y=M;let j=M.applyToLocalDocumentSet(p,O);return u.documentOverlayCache.saveOverlays(_,M.batchId,j)})}).then(()=>({batchId:y.batchId,changes:gA(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new ze(Ce)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield tu(r,i.changes),yield cf(r.remoteStore)}catch(i){let o=gw(i,"Failed to persist write");t.reject(o)}})}function BA(n,e){return m(this,null,function*(){let t=ne(n);try{let r=yield a$(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?xe(s.va):i.removedDocuments.size>0&&(xe(s.va),s.va=!1))}),yield tu(t,r,e)}catch(r){yield Jc(r)}})}function zS(n,e,t){let r=ne(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=ne(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let y of p.j_)y.Z_(a)&&(l=!0)}),l&&vw(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function N$(n,e,t){return m(this,null,function*(){let r=ne(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new ze(W.comparator);s=s.insert(o,En.newNoDocument(o,se.min()));let a=ve().add(o),u=new Mh(se.min(),new Map,new ze(Ce),s,a);yield BA(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),_w(r)}else yield R_(r.localStore,e,!1).then(()=>K_(r,e,t)).catch(Jc)})}function P$(n,e){return m(this,null,function*(){let t=ne(n),r=e.batch.batchId;try{let i=yield s$(t.localStore,e);HA(t,r,null),$A(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield tu(t,i)}catch(i){yield Jc(i)}})}function O$(n,e,t){return m(this,null,function*(){let r=ne(n);try{let i=yield function(s,a){let u=ne(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(xe(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);HA(r,e,t),$A(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield tu(r,i)}catch(i){yield Jc(i)}})}function $A(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function HA(n,e,t){let r=ne(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function K_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||qA(n,r)})}function qA(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(dw(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),_w(n))}function GS(n,e,t){for(let r of t)r instanceof qh?(n.La.addReference(r.key,e),k$(n,r)):r instanceof zh?(H("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||qA(n,r.key)):J()}function k$(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(H("SyncEngine","New document in limbo: "+t),n.xa.add(r),_w(n))}function _w(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new W(je.fromString(e)),r=n.qa.next();n.Na.set(r,new G_(t)),n.Oa=n.Oa.insert(t,r),OA(n.remoteStore,new Bc(Kn(nf(t.path)),r,"TargetPurposeLimboResolution",tA.oe))}}function tu(n,e,t){return m(this,null,function*(){let r=ne(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=T_.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return m(this,null,function*(){let h=ne(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(l,y=>F.forEach(y.$i,_=>h.persistence.referenceDelegate.addReference(p,y.targetId,_)).next(()=>F.forEach(y.Ui,_=>h.persistence.referenceDelegate.removeReference(p,y.targetId,_)))))}catch(p){if(!Xc(p))throw p;H("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let _=h.os.get(y),S=_.snapshotVersion,O=_.withLastLimboFreeSnapshotVersion(S);h.os=h.os.insert(y,O)}}})}(r.localStore,o))})}function F$(n,e){return m(this,null,function*(){let t=ne(n);if(!t.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());let r=yield NA(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new B(N.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield tu(t,r.hs)}})}function V$(n,e){let t=ne(n),r=t.Na.get(e);if(r&&r.va)return ve().add(r.key);{let i=ve(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function zA(n){let e=ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=BA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N$.bind(null,e),e.Ca.d_=C$.bind(null,e.eventManager),e.Ca.$a=b$.bind(null,e.eventManager),e}function L$(n){let e=ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=O$.bind(null,e),e}var WS=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return m(this,null,function*(){this.serializer=sf(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return o$(this.persistence,new A_,t.initialUser,this.serializer)}Ga(t){return new D_(b_.Zr,this.serializer)}Wa(t){return new M_}terminate(){return m(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var U$=(()=>{class n{initialize(t,r){return m(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=F$.bind(null,this.syncEngine),yield D$(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new $_}()}createDatastore(t){let r=sf(t.databaseInfo.databaseId),i=function(s){return new O_(s)}(t.databaseInfo);return function(s,a,u,l){return new V_(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new U_(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>zS(this.syncEngine,r,0),function(){return Lh.D()?new Lh:new N_}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let y=new W_(o,s,a,u,l,h);return p&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return m(this,null,function*(){var t,r;yield function(o){return m(this,null,function*(){let s=ne(o);H("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield eu(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var zc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Dr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Q_=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=dt.UNAUTHENTICATED,this.clientId=Ch.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>m(this,null,function*(){H("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(H("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=gw(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Tv(n,e){return m(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>m(this,null,function*(){r.isEqual(i)||(yield NA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function KS(n,e){return m(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield j$(n);H("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>$S(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>$S(e.remoteStore,i)),n._onlineComponents=e})}function j$(n){return m(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Tv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ns("Error using user provided cache. Falling back to memory cache: "+t),yield Tv(n,new WS)}}else H("FirestoreClient","Using default OfflineComponentProvider"),yield Tv(n,new WS);return n._offlineComponents})}function GA(n){return m(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),yield KS(n,n._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),yield KS(n,new U$))),n._onlineComponents})}function B$(n){return GA(n).then(e=>e.syncEngine)}function Gh(n){return m(this,null,function*(){let e=yield GA(n),t=e.eventManager;return t.onListen=T$.bind(null,e.syncEngine),t.onUnlisten=x$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=S$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=R$.bind(null,e.syncEngine),t})}function $$(n,e,t={}){let r=new wn;return n.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(o,s,a,u,l){let h=new zc({next:y=>{h.Za(),s.enqueueAndForget(()=>yw(o,p));let _=y.docs.has(a);!_&&y.fromCache?l.reject(new B(N.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&y.fromCache&&u&&u.source==="server"?l.reject(new B(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new qc(nf(a.path),h,{includeMetadataChanges:!0,_a:!0});return mw(o,p)}(yield Gh(n),n.asyncQueue,e,t,r)})),r.promise}function H$(n,e,t={}){let r=new wn;return n.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(o,s,a,u,l){let h=new zc({next:y=>{h.Za(),s.enqueueAndForget(()=>yw(o,p)),y.fromCache&&u.source==="server"?l.reject(new B(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new qc(a,h,{includeMetadataChanges:!0,_a:!0});return mw(o,p)}(yield Gh(n),n.asyncQueue,e,t,r)})),r.promise}function WA(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var QS=new Map;function KA(n,e,t){if(!t)throw new B(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function q$(n,e,t,r){if(e===!0&&r===!0)throw new B(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function YS(n){if(!W.isDocumentKey(n))throw new B(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ZS(n){if(W.isDocumentKey(n))throw new B(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function uf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":J()}function In(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new B(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=uf(n);throw new B(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Wh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}q$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Hs=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Sv;switch(r.type){case"firstParty":return new Mv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return m(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=QS.get(t);r&&(H("ComponentProvider","Removing Datastore"),QS.delete(t),r.terminate())}(this),Promise.resolve()}};function QA(n,e,t,r={}){var i;let o=(n=In(n,Hs))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Ns("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=dt.MOCK_USER;else{a=Kb(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new B(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new dt(l)}n._authCredentials=new Av(new Dh(a,u))}}var lo=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ft=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},gi=class n extends lo{constructor(e,t,r){super(e,t,nf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new W(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function YA(n,e,...t){if(n=lt(n),KA("collection","path",e),n instanceof Hs){let r=je.fromString(e,...t);return ZS(r),new gi(n,null,r)}{if(!(n instanceof Ft||n instanceof gi))throw new B(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(je.fromString(e,...t));return ZS(r),new gi(n.firestore,null,r)}}function ww(n,e,...t){if(n=lt(n),arguments.length===1&&(e=Ch.newId()),KA("doc","path",e),n instanceof Hs){let r=je.fromString(e,...t);return YS(r),new Ft(n,null,new W(r))}{if(!(n instanceof Ft||n instanceof gi))throw new B(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(je.fromString(e,...t));return YS(r),new Ft(n.firestore,n instanceof gi?n.converter:null,new W(r))}}var Kh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Uh(this,"async_queue_retry"),this.Vu=()=>{let r=bv();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=bv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=bv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new wn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return m(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Xc(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Dr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=j_.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&J()}verifyOperationInProgress(){}wu(){return m(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function JS(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Sr=class extends Hs{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Kh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return m(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Kh(e),this._firestoreClient=void 0,yield e}})}};function ZA(n,e){let t=typeof n=="object"?n:_s(),r=typeof n=="string"?n:e||"(default)",i=_c(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Wb("firestore");o&&QA(i,...o)}return i}function lf(n){if(n._terminated)throw new B(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||z$(n),n._firestoreClient}function z$(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new Fv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,WA(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Q_(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var Gc=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(xt.fromBase64String(e))}catch(t){throw new B(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Wc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new B(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Qh=class{constructor(e){this._methodName=e}};var Kc=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new B(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new B(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}};var Qc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var G$=/^__.*__$/,Y_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Tr(e,this.data,this.fieldMask,t,this.fieldTransforms):new uo(e,this.data,t,this.fieldTransforms)}};function JA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}var Z_=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Yh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(JA(this.Cu)&&G$.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},J_=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||sf(e)}Qu(e,t,r,i=!1){return new Z_({Cu:e,methodName:t,qu:r,path:Kt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Iw(n){let e=n._freezeSettings(),t=sf(n._databaseId);return new J_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function XA(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);nx("Data must be an object, but it was:",s,r);let a=ex(r,s),u,l;if(o.merge)u=new Gn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let y=K$(e,p,t);if(!s.contains(y))throw new B(N.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);Y$(h,y)||h.push(y)}u=new Gn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Y_(new _n(a),u,l)}function W$(n,e,t,r=!1){return Ew(t,n.Qu(r?4:3,e))}function Ew(n,e){if(tx(n=lt(n)))return nx("Unsupported field value:",e,n),ex(n,e);if(n instanceof Qh)return function(r,i){if(!JA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Ew(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=gt.fromDate(r);return{timestampValue:kh(i.serializer,o)}}if(r instanceof gt){let o=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kh(i.serializer,o)}}if(r instanceof Kc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gc)return{bytesValue:bA(i.serializer,r._byteString)};if(r instanceof Ft){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:lw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Qc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return uw(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${uf(r)}`)}(n,e)}function ex(n,e){let t={};return nA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zs(n,(r,i)=>{let o=Ew(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function tx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gt||n instanceof Kc||n instanceof Gc||n instanceof Ft||n instanceof Qh||n instanceof Qc)}function nx(n,e,t){if(!tx(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=uf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function K$(n,e,t){if((e=lt(e))instanceof Wc)return e._internalPath;if(typeof e=="string")return rx(n,e);throw Yh("Field path arguments must be of type string or ",n,!1,void 0,t)}var Q$=new RegExp("[~\\*/\\[\\]]");function rx(n,e,t){if(e.search(Q$)>=0)throw Yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wc(...e.split("."))._internalPath}catch{throw Yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Yh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new B(N.INVALID_ARGUMENT,a+n+u)}function Y$(n,e){return n.some(t=>t.isEqual(e))}var Zh=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new X_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Dw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},X_=class extends Zh{data(){return super.data()}};function Dw(n,e){return typeof e=="string"?rx(n,e):e instanceof Wc?e._internalPath:e._delegate._internalPath}function ix(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new B(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Yc=class{},ew=class extends Yc{};function ox(n,e,...t){let r=[];e instanceof Yc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof tw).length,a=o.filter(u=>u instanceof Jh).length;if(s>1||s>0&&a>0)throw new B(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Jh=class n extends ew{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return ax(e._query,t),new lo(e.firestore,e.converter,Qv(e._query,t))}_parse(e){let t=Iw(e.firestore);return function(o,s,a,u,l,h,p){let y;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new B(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){eA(p,h);let _=[];for(let S of p)_.push(XS(u,o,S));y={arrayValue:{values:_}}}else y=XS(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||eA(p,h),y=W$(a,s,p,h==="in"||h==="not-in");return rt.create(l,h,y)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function sx(n,e,t){let r=e,i=Dw("where",n);return Jh._create(i,r,t)}var tw=class n extends Yc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Dn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)ax(s,u),s=Qv(s,u)}(e._query,t),new lo(e.firestore,e.converter,Qv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function XS(n,e,t){if(typeof(t=lt(t))=="string"){if(t==="")throw new B(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dA(e)&&t.indexOf("/")!==-1)throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(je.fromString(t));if(!W.isDocumentKey(r))throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return CS(n,new W(r))}if(t instanceof Ft)return CS(n,t._key);throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uf(t)}.`)}function eA(n,e){if(!Array.isArray(n)||n.length===0)throw new B(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ax(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new B(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var nw=class{convertValue(e,t="none"){switch(oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw J()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return zs(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ke(s.doubleValue));return new Qc(o)}convertGeoPoint(e){return new Kc(ke(e.latitude),ke(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=ow(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Lc(e));default:return null}}convertTimestamp(e){let t=Cr(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=je.fromString(e);xe(MA(r));let i=new Ah(r.get(1),r.get(3)),o=new W(r.popFirst(5));return i.isEqual(t)||Dr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function cx(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var no=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xh=class extends Zh{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ms(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Dw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ms=class extends Xh{data(e={}){return super.data(e)}},ef=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new no(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ms(this._firestore,this._userDataWriter,r.key,r,new no(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new B(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ms(i._firestore,i._userDataWriter,a.doc.key,a.doc,new no(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ms(i._firestore,i._userDataWriter,a.doc.key,a.doc,new no(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Z$(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Z$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}function ux(n){n=In(n,Ft);let e=In(n.firestore,Sr);return $$(lf(e),n._key).then(t=>px(e,n,t))}var Zc=class extends nw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,t)}};function lx(n){n=In(n,lo);let e=In(n.firestore,Sr),t=lf(e),r=new Zc(e);return ix(n._query),H$(t,n._query).then(i=>new ef(e,r,n,i))}function dx(n,e,t){n=In(n,Ft);let r=In(n.firestore,Sr),i=cx(n.converter,e,t);return fx(r,[XA(Iw(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,pi.none())])}function hx(n,e){let t=In(n.firestore,Sr),r=ww(n),i=cx(n.converter,e);return fx(t,[XA(Iw(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,pi.exists(!1))]).then(()=>r)}function Cw(n,...e){var t,r,i;n=lt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||JS(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(JS(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Ft)l=In(n.firestore,Sr),h=nf(n._key.path),u={next:p=>{e[s]&&e[s](px(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=In(n,lo);l=In(p.firestore,Sr),h=p._query;let y=new Zc(l);u={next:_=>{e[s]&&e[s](new ef(l,y,p,_))},error:e[s+1],complete:e[s+2]},ix(n._query)}return function(y,_,S,O){let M=new zc(O),j=new qc(_,M,S);return y.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return mw(yield Gh(y),j)})),()=>{M.Za(),y.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return yw(yield Gh(y),j)}))}}(lf(l),h,a,u)}function fx(n,e){return function(r,i){let o=new wn;return r.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return M$(yield B$(r),i,o)})),o.promise}(lf(n),e)}function px(n,e,t){let r=t.docs.get(e._key),i=new Zc(n);return new Xh(n,i,e._key,r,new no(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){qs=i})(ci),ai(new sn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Sr(new xv(r.getProvider("auth-internal")),new Pv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ah(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),st(wS,"4.7.3",e),st(wS,"4.7.3","esm2017")})();var df=function(){return df=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},df.apply(this,arguments)};var eH={includeMetadataChanges:!1};function gx(n,e){return e===void 0&&(e=eH),new ge(function(t){var r=Cw(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function mx(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:df(df({},r),(t={},t[e.idField]=n.id,t))}function yx(n){return gx(n,{includeMetadataChanges:!0}).pipe(X(function(e){return e.docs}))}function vx(n,e){return e===void 0&&(e={}),yx(n).pipe(X(function(t){return t.map(function(r){return mx(r,e)})}))}var Cn=class{constructor(e){return e}},_x="firestore",bw=class{constructor(){return wc(_x)}};var Tw=new z("angularfire2.firestore-instances");function tH(n,e){let t=Qd(_x,n,e);return t&&new Cn(t)}function nH(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Cn(r)}}var rH={provide:bw,deps:[[new It,Tw]]},iH={provide:Cn,useFactory:tH,deps:[[new It,Tw],vr]};function wx(n,...e){return st("angularfire",Wi.full,"fst"),kn([iH,rH,{provide:Tw,useFactory:nH(n),multi:!0,deps:[Te,pt,Es,Ki,[new It,xc],[new It,Is],...e]}])}var Ix=Tt(vx,!0);var Ex=Tt(hx,!0);var nu=Tt(YA,!0);var bn=Tt(ww,!0);var Ar=Tt(ux,!0);var Dx=Tt(lx,!0);var Cx=Tt(ZA,!0);var bx=Tt(ox,!0);var ru=Tt(dx,!0);var Tx=Tt(sx,!0);var Ws=(()=>{class n{constructor(){this.firestore=k(Cn)}loadTour(t){return m(this,null,function*(){let r=yield Ar(bn(this.firestore,"tours",t));if(r.exists()){let i=r.data();return ce(L({},i),{id:r.id})}else console.error("Tour not found")})}getTours(){let t=nu(this.firestore,"tours");return Ix(t,{idField:"id"}).pipe(Nt(i=>{if(i.length===0)return Y([]);let o=i.map(s=>Ar(bn(this.firestore,"users",s.createdBy)).then(a=>ce(L({},s),{createdByName:a.exists()?a.data()?.firstName:"Unknown"})));return Si(o)}))}addTour(t){return m(this,null,function*(){return Ex(nu(this.firestore,"tours"),t)})}applyForTour(t,r){return m(this,null,function*(){if(!t||!r)throw new Error("Invalid tourId or userId");let i=bn(this.firestore,`tours/${t}/applications/${r}`);if(!(yield Ar(i)).exists())yield ru(i,{status:"pending",appliedAt:new Date().toISOString()});else throw new Error("You have already applied for this tour.")})}hasUserApplied(t,r){return m(this,null,function*(){let i=bn(this.firestore,`tours/${t}/applications/${r}`);return(yield Ar(i)).exists()})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oH=n=>["/tour-details",n];function sH(n,e){if(n&1&&(R(0,"li",3)(1,"h2",4),P(2),A(),R(3,"p")(4,"strong"),P(5,"Date:"),A(),P(6),A(),R(7,"p")(8,"strong"),P(9,"Difficulty:"),A(),P(10),A(),R(11,"p")(12,"strong"),P(13,"Participants:"),A(),P(14),A(),R(15,"p")(16,"strong"),P(17,"Organized By:"),A(),P(18),A(),R(19,"button",5),P(20," View Details "),A()()),n&2){let t=e.$implicit;U(2),nn(t.name),U(4),Ct(" ",t.date,""),U(4),Ct(" ",t.difficulty,""),U(4),Ct(" ",t.participants,""),U(4),Ct(" ",t.createdByName,""),U(),oe("routerLink",yC(6,oH,t.id))}}var Sx=(()=>{class n{constructor(t){this.tourService=t,this.tours$=this.tourService.getTours()}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||n)($(Ws))}}static{this.\u0275cmp=Je({type:n,selectors:[["app-home"]],standalone:!0,features:[et],decls:6,vars:3,consts:[[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],["class","mb-4 p-4 border rounded shadow",4,"ngFor","ngForOf"],[1,"mb-4","p-4","border","rounded","shadow"],[1,"text-xl","font-semibold"],[1,"mt-2","py-2","px-4","bg-blue-600","text-white","rounded","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"routerLink"]],template:function(r,i){r&1&&(R(0,"div",0)(1,"h1",1),P(2,"Hiking Tours"),A(),R(3,"ul"),De(4,sH,21,8,"li",2),ja(5,"async"),A()()),r&2&&(U(4),oe("ngForOf",Ba(5,1,i.tours$)))},dependencies:[mn,_d,wd,ii]})}}return n})();var Vx=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)($(Ln),$(pn))}}static{this.\u0275dir=Fe({type:n})}}return n})(),_f=(()=>{class n extends Vx{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ur(n)))(i||n)}})()}static{this.\u0275dir=Fe({type:n,features:[en]})}}return n})(),lu=new z("");var aH={provide:lu,useExisting:On(()=>an),multi:!0};function cH(){let n=hr()?hr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var uH=new z(""),an=(()=>{class n extends Vx{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!cH())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)($(Ln),$(pn),$(uH,8))}}static{this.\u0275dir=Fe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ae("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Jr([aH]),en]})}}return n})();function lH(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var xw=new z(""),Lx=new z("");function dH(n){return lH(n.value)?{required:!0}:null}function Ax(n){return null}function Ux(n){return n!=null}function jx(n){return Xr(n)?Oe(n):n}function Bx(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function $x(n,e){return e.map(t=>t(n))}function hH(n){return!n.validate}function Hx(n){return n.map(e=>hH(e)?e:t=>e.validate(t))}function fH(n){if(!n)return null;let e=n.filter(Ux);return e.length==0?null:function(t){return Bx($x(t,e))}}function Rw(n){return n!=null?fH(Hx(n)):null}function pH(n){if(!n)return null;let e=n.filter(Ux);return e.length==0?null:function(t){let r=$x(t,e).map(jx);return pp(r).pipe(X(Bx))}}function Mw(n){return n!=null?pH(Hx(n)):null}function xx(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function gH(n){return n._rawValidators}function mH(n){return n._rawAsyncValidators}function Aw(n){return n?Array.isArray(n)?n:[n]:[]}function ff(n,e){return Array.isArray(n)?n.includes(e):n===e}function Rx(n,e){let t=Aw(e);return Aw(n).forEach(i=>{ff(t,i)||t.push(i)}),t}function Mx(n,e){return Aw(e).filter(t=>!ff(n,t))}var pf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Rw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Mw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ys=class extends pf{get formDirective(){return null}get path(){return null}},uu=class extends pf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},gf=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},yH={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},nQ=ce(L({},yH),{"[class.ng-submitted]":"isSubmitted"}),Zn=(()=>{class n extends gf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)($(uu,2))}}static{this.\u0275dir=Fe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ld("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[en]})}}return n})(),Js=(()=>{class n extends gf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)($(Ys,10))}}static{this.\u0275dir=Fe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ld("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[en]})}}return n})();var iu="VALID",hf="INVALID",Ks="PENDING",ou="DISABLED",Zs=class{},mf=class extends Zs{constructor(e,t){super(),this.value=e,this.source=t}},au=class extends Zs{constructor(e,t){super(),this.pristine=e,this.source=t}},cu=class extends Zs{constructor(e,t){super(),this.touched=e,this.source=t}},Qs=class extends Zs{constructor(e,t){super(),this.status=e,this.source=t}};function qx(n){return(wf(n)?n.validators:n)||null}function vH(n){return Array.isArray(n)?Rw(n):n||null}function zx(n,e){return(wf(e)?e.asyncValidators:n)||null}function _H(n){return Array.isArray(n)?Mw(n):n||null}function wf(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function wH(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new q(1e3,"");if(!r[t])throw new q(1001,"")}function IH(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new q(1002,"")})}var yf=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=$a(()=>this.statusReactive()),this.statusReactive=Va(void 0),this._pristine=$a(()=>this.pristineReactive()),this.pristineReactive=Va(!0),this._touched=$a(()=>this.touchedReactive()),this.touchedReactive=Va(!1),this._events=new at,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return gn(this.statusReactive)}set status(e){gn(()=>this.statusReactive.set(e))}get valid(){return this.status===iu}get invalid(){return this.status===hf}get pending(){return this.status==Ks}get disabled(){return this.status===ou}get enabled(){return this.status!==ou}get pristine(){return gn(this.pristineReactive)}set pristine(e){gn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return gn(this.touchedReactive)}set touched(e){gn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Rx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Rx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Mx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Mx(e,this._rawAsyncValidators))}hasValidator(e){return ff(this._rawValidators,e)}hasAsyncValidator(e){return ff(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ce(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new cu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new cu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ce(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new au(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new au(!0,r))}markAsPending(e={}){this.status=Ks;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Qs(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ce(L({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ou,this.errors=null,this._forEachChild(i=>{i.disable(ce(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new mf(this.value,r)),this._events.next(new Qs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=iu,this._forEachChild(r=>{r.enable(ce(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ce(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===iu||this.status===Ks)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new mf(this.value,t)),this._events.next(new Qs(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ce(L({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ou:iu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ks,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=jx(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Qs(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ye,this.statusChanges=new Ye}_calculateStatus(){return this._allControlsDisabled()?ou:this.errors?hf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ks)?Ks:this._anyControlsHaveStatus(hf)?hf:iu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new au(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new cu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){wf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=vH(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=_H(this._rawAsyncValidators)}},vf=class extends yf{constructor(e,t,r){super(qx(t),zx(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){IH(this,!0,e),Object.keys(e).forEach(r=>{wH(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Nw=new z("CallSetDisabledState",{providedIn:"root",factory:()=>Pw}),Pw="always";function EH(n,e){return[...e.path,n]}function Gx(n,e,t=Pw){Wx(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),CH(n,e),TH(n,e),bH(n,e),DH(n,e)}function Nx(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function DH(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Wx(n,e){let t=gH(n);e.validator!==null?n.setValidators(xx(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=mH(n);e.asyncValidator!==null?n.setAsyncValidators(xx(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Nx(e._rawValidators,i),Nx(e._rawAsyncValidators,i)}function CH(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Kx(n,e)})}function bH(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Kx(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Kx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function TH(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function SH(n,e){n==null,Wx(n,e)}function AH(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function xH(n){return Object.getPrototypeOf(n.constructor)===_f}function RH(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function MH(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===an?t=o:xH(o)?r=o:i=o}),i||r||t||null}var NH={provide:Ys,useExisting:On(()=>fo)},su=Promise.resolve(),fo=(()=>{class n extends Ys{get submitted(){return gn(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=$a(()=>this.submittedReactive()),this.submittedReactive=Va(!1),this._directives=new Set,this.ngSubmit=new Ye,this.form=new vf({},Rw(t),Mw(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){su.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Gx(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){su.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){su.then(()=>{let r=this._findContainer(t.path),i=new vf({});SH(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){su.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){su.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),RH(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)($(xw,10),$(Lx,10),$(Nw,8))}}static{this.\u0275dir=Fe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ae("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Jr([NH]),en]})}}return n})();function Px(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ox(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var PH=class extends yf{constructor(e=null,t,r){super(qx(t),zx(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Ox(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Px(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Px(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Ox(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var OH={provide:uu,useExisting:On(()=>Tn)},kx=Promise.resolve(),Tn=(()=>{class n extends uu{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new PH,this._registered=!1,this.name="",this.update=new Ye,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=MH(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),AH(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Gx(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){kx.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ti(r);kx.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?EH(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)($(Ys,9),$(xw,10),$(Lx,10),$(lu,10),$(ei,8),$(Nw,8))}}static{this.\u0275dir=Fe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Jr([OH]),en,Yr]})}}return n})(),Xs=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Fe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),kH={provide:lu,useExisting:On(()=>Ow),multi:!0},Ow=(()=>{class n extends _f{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ur(n)))(i||n)}})()}static{this.\u0275dir=Fe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Ae("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[Jr([kH]),en]})}}return n})();var FH={provide:lu,useExisting:On(()=>ea),multi:!0};function Qx(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function VH(n){return n.split(":")[0]}var ea=(()=>{class n extends _f{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=Qx(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=VH(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ur(n)))(i||n)}})()}static{this.\u0275dir=Fe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Ae("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Jr([FH]),en]})}}return n})(),If=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Qx(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)($(pn),$(Ln),$(ea,9))}}static{this.\u0275dir=Fe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),LH={provide:lu,useExisting:On(()=>Yx),multi:!0};function Fx(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function UH(n){return n.split(":")[0]}var Yx=(()=>{class n extends _f{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=UH(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ur(n)))(i||n)}})()}static{this.\u0275dir=Fe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Ae("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Jr([LH]),en]})}}return n})(),Ef=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Fx(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Fx(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)($(pn),$(Ln),$(Yx,9))}}static{this.\u0275dir=Fe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var jH=(()=>{class n{constructor(){this._validator=Ax}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ax,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Fe({type:n,features:[Yr]})}}return n})();var BH={provide:xw,useExisting:On(()=>po),multi:!0};var po=(()=>{class n extends jH{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ti,this.createValidator=t=>dH}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ur(n)))(i||n)}})()}static{this.\u0275dir=Fe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&La("required",i._enabled?"":null)},inputs:{required:"required"},features:[Jr([BH]),en]})}}return n})();var $H=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qr({type:n})}static{this.\u0275inj=Kr({})}}return n})();var Jn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Nw,useValue:t.callSetDisabledState??Pw}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qr({type:n})}static{this.\u0275inj=Kr({imports:[$H]})}}return n})();var ht=(()=>{class n{constructor(){this.auth=k(Xi),this.firestore=k(Cn),this.userSubject=new Ge(null),this.userTypeSubject=new Ge(null),this.userDataSubject=new Ge(null),ph(this.auth,t=>m(this,null,function*(){if(t){let i=(yield Ar(bn(this.firestore,"users",t.uid))).data();this.userDataSubject.next(i);let o=i?.type??null;this.userTypeSubject.next(o)}else this.userTypeSubject.next(null);this.userSubject.next(t)}))}get user$(){return this.userSubject.asObservable()}get userType$(){return this.userTypeSubject.asObservable()}get userData$(){return this.userDataSubject.asObservable()}get currentUser(){return this.auth.currentUser}register(t,r,i,o,s){return m(this,null,function*(){let a=yield gS(this.auth,t,r),u=a.user;return yield ru(bn(this.firestore,"users",u.uid),{firstName:i,lastName:o,email:t,type:s}),a})}login(t,r){return m(this,null,function*(){return yield yS(this.auth,t,r)})}logout(){return m(this,null,function*(){return yield gh(this.auth)})}updateUserData(t){if(this.currentUser)return ru(bn(this.firestore,"users",this.currentUser.uid),t);throw new Error("User is not logged in")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function HH(n,e){n&1&&(R(0,"div",16),P(1," Email is required. "),A())}function qH(n,e){n&1&&(R(0,"div",16),P(1," Password is required. "),A())}var Zx=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}onLogin(t){return m(this,null,function*(){t.invalid||(yield this.authService.login(this.email,this.password),this.router.navigate(["/"]))})}static{this.\u0275fac=function(r){return new(r||n)($(ht),$(Ue))}}static{this.\u0275cmp=Je({type:n,selectors:[["app-login"]],standalone:!0,features:[et],decls:25,vars:4,consts:[["loginForm","ngForm"],["emailInput","ngModel"],["passwordInput","ngModel"],[1,"flex","min-h-screen","items-center","justify-center","bg-gray-100"],[1,"w-full","max-w-md","p-8","bg-white","rounded-lg","shadow-lg"],[1,"text-2xl","font-bold","text-center","text-gray-800"],[1,"mt-6","space-y-6",3,"ngSubmit"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","name","email","placeholder","Enter your email","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["class","text-red-500 text-sm",4,"ngIf"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","placeholder","Enter your password","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","py-3","px-4","mt-4","text-white","bg-blue-600","rounded-lg","hover:bg-blue-700","transition-colors","duration-200"],[1,"my-6","border-t","border-gray-300"],[1,"mt-6","text-center","text-sm","text-gray-600"],["routerLink","/register",1,"text-blue-600","hover:underline"],[1,"text-red-500","text-sm"]],template:function(r,i){if(r&1){let o=Xe();R(0,"div",3)(1,"div",4)(2,"h2",5),P(3,"Login to Your Account"),A(),R(4,"form",6,0),Ae("ngSubmit",function(){fe(o);let a=We(5);return pe(i.onLogin(a))}),R(6,"div")(7,"label",7),P(8,"Email"),A(),R(9,"input",8,1),Le("ngModelChange",function(a){return fe(o),qe(i.email,a)||(i.email=a),pe(a)}),A(),De(11,HH,2,0,"div",9),A(),R(12,"div")(13,"label",10),P(14,"Password"),A(),R(15,"input",11,2),Le("ngModelChange",function(a){return fe(o),qe(i.password,a)||(i.password=a),pe(a)}),A(),De(17,qH,2,0,"div",9),A(),R(18,"button",12),P(19," Login "),A()(),tn(20,"div",13),R(21,"p",14),P(22," Don't have an account? "),R(23,"a",15),P(24,"Sign up"),A()()()()}if(r&2){let o=We(10),s=We(16);U(9),Ve("ngModel",i.email),U(2),oe("ngIf",o.invalid&&o.touched),U(4),Ve("ngModel",i.password),U(2),oe("ngIf",s.invalid&&s.touched)}},dependencies:[ms,ii,Jn,Xs,an,Zn,Js,po,Tn,fo,mn,rn]})}}return n})();function zH(n,e){n&1&&(R(0,"div",32),P(1," Email is required. "),A())}function GH(n,e){n&1&&(R(0,"div",32),P(1," First name is required. "),A())}function WH(n,e){n&1&&(R(0,"div",32),P(1," Last name is required. "),A())}function KH(n,e){n&1&&(R(0,"div",32),P(1," Password is required. "),A())}function QH(n,e){n&1&&(R(0,"div",32),P(1," Confirm password is required. "),A())}function YH(n,e){n&1&&(R(0,"div",32),P(1," Passwords do not match. "),A())}function ZH(n,e){n&1&&(R(0,"div",32),P(1," User type is required. "),A())}function JH(n,e){n&1&&(R(0,"div",33),tn(1,"div",34),A())}var Jx=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isLoading=!1}onRegister(t){return m(this,null,function*(){t.invalid||(this.isLoading=!0,yield this.authService.register(this.email,this.password,this.firstName,this.lastName,this.userType),this.isLoading=!1,this.router.navigate(["/"]))})}static{this.\u0275fac=function(r){return new(r||n)($(ht),$(Ue))}}static{this.\u0275cmp=Je({type:n,selectors:[["app-register"]],standalone:!0,features:[et],decls:57,vars:14,consts:[["registerForm","ngForm"],["emailInput","ngModel"],["firstNameInput","ngModel"],["lastNameInput","ngModel"],["passwordInput","ngModel"],["confirmPasswordInput","ngModel"],["userTypeInput","ngModel"],[1,"flex","min-h-screen","items-center","justify-center","bg-gray-100"],[1,"w-full","max-w-md","p-8","bg-white","rounded-lg","shadow-lg"],[1,"text-2xl","font-bold","text-center","text-gray-800"],[3,"ngSubmit"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","name","email","placeholder","Enter your email","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["class","text-red-500 text-sm",4,"ngIf"],["for","firstName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","firstName","name","firstName","placeholder","Enter your first name","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","lastName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","lastName","name","lastName","placeholder","Enter your last name","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","placeholder","Enter your password","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Confirm your password","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","userType",1,"block","text-sm","font-medium","text-gray-700"],["id","userType","name","userType","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],["value","hiker"],["value","hikingClub"],["type","submit",1,"w-full","py-3","px-4","mt-4","text-white","bg-blue-600","rounded-lg","hover:bg-blue-700","transition-colors","duration-200"],["class","fixed inset-0 flex items-center justify-center bg-gray-100 bg-opacity-75 z-50",4,"ngIf"],[1,"my-6","border-t","border-gray-300"],[1,"text-center","text-sm","text-gray-600"],["routerLink","/login",1,"text-blue-600","hover:underline"],[1,"text-red-500","text-sm"],[1,"fixed","inset-0","flex","items-center","justify-center","bg-gray-100","bg-opacity-75","z-50"],[1,"animate-spin","rounded-full","h-32","w-32","border-t-2","border-b-2","border-blue-500"]],template:function(r,i){if(r&1){let o=Xe();R(0,"div",7)(1,"div",8)(2,"h2",9),P(3,"Create an Account"),A(),R(4,"form",10,0),Ae("ngSubmit",function(){fe(o);let a=We(5);return pe(i.onRegister(a))}),R(6,"div")(7,"label",11),P(8,"Email"),A(),R(9,"input",12,1),Le("ngModelChange",function(a){return fe(o),qe(i.email,a)||(i.email=a),pe(a)}),A(),De(11,zH,2,0,"div",13),A(),R(12,"div")(13,"label",14),P(14,"First Name"),A(),R(15,"input",15,2),Le("ngModelChange",function(a){return fe(o),qe(i.firstName,a)||(i.firstName=a),pe(a)}),A(),De(17,GH,2,0,"div",13),A(),R(18,"div")(19,"label",16),P(20,"Last Name"),A(),R(21,"input",17,3),Le("ngModelChange",function(a){return fe(o),qe(i.lastName,a)||(i.lastName=a),pe(a)}),A(),De(23,WH,2,0,"div",13),A(),R(24,"div")(25,"label",18),P(26,"Password"),A(),R(27,"input",19,4),Le("ngModelChange",function(a){return fe(o),qe(i.password,a)||(i.password=a),pe(a)}),A(),De(29,KH,2,0,"div",13),A(),R(30,"div")(31,"label",20),P(32,"Confirm Password"),A(),R(33,"input",21,5),Le("ngModelChange",function(a){return fe(o),qe(i.confirmPassword,a)||(i.confirmPassword=a),pe(a)}),A(),De(35,QH,2,0,"div",13)(36,YH,2,0,"div",13),A(),R(37,"div")(38,"label",22),P(39,"User Type"),A(),R(40,"select",23,6),Le("ngModelChange",function(a){return fe(o),qe(i.userType,a)||(i.userType=a),pe(a)}),R(42,"option",24),P(43,"Select user type"),A(),R(44,"option",25),P(45,"Hiker"),A(),R(46,"option",26),P(47,"Hiking Club"),A()(),De(48,ZH,2,0,"div",13),A(),R(49,"button",27),P(50," Register "),A()(),De(51,JH,2,0,"div",28),tn(52,"div",29),R(53,"p",30),P(54," Already have an account? "),R(55,"a",31),P(56,"Login"),A()()()()}if(r&2){let o=We(10),s=We(16),a=We(22),u=We(28),l=We(34),h=We(41);U(9),Ve("ngModel",i.email),U(2),oe("ngIf",o.invalid&&o.touched),U(4),Ve("ngModel",i.firstName),U(2),oe("ngIf",s.invalid&&s.touched),U(4),Ve("ngModel",i.lastName),U(2),oe("ngIf",a.invalid&&a.touched),U(4),Ve("ngModel",i.password),U(2),oe("ngIf",u.invalid&&u.touched),U(4),Ve("ngModel",i.confirmPassword),U(2),oe("ngIf",l.invalid&&l.touched),U(),oe("ngIf",i.password!==i.confirmPassword&&l.touched),U(4),Ve("ngModel",i.userType),U(8),oe("ngIf",h.invalid&&h.touched),U(3),oe("ngIf",i.isLoading)}},dependencies:[Jn,Xs,If,Ef,an,ea,Zn,Js,po,Tn,fo,ms,ii,mn,rn]})}}return n})();function XH(n,e){if(n&1&&(R(0,"div",9),P(1),A()),n&2){let t=Ne(2);U(),Ua("",t.clubProfile.firstName," ",t.clubProfile.lastName,"")}}function e4(n,e){if(n&1){let t=Xe();R(0,"div",15)(1,"input",16),Le("ngModelChange",function(i){fe(t);let o=Ne(2);return qe(o.firstName,i)||(o.firstName=i),pe(i)}),A(),R(2,"input",17),Le("ngModelChange",function(i){fe(t);let o=Ne(2);return qe(o.lastName,i)||(o.lastName=i),pe(i)}),A()()}if(n&2){let t=Ne(2);U(),Ve("ngModel",t.firstName),U(),Ve("ngModel",t.lastName)}}function t4(n,e){if(n&1){let t=Xe();R(0,"button",18),Ae("click",function(){fe(t);let i=Ne(2);return pe(i.toggleEditMode())}),P(1,"Edit"),A()}}function n4(n,e){if(n&1){let t=Xe();R(0,"button",19),Ae("click",function(){fe(t);let i=Ne(2);return pe(i.saveProfile())}),P(1,"Save"),A()}}function r4(n,e){if(n&1){let t=Xe();R(0,"button",20),Ae("click",function(){fe(t);let i=Ne(2);return pe(i.toggleEditMode())}),P(1,"Cancel"),A()}}function i4(n,e){if(n&1&&(R(0,"li",22)(1,"h3",23),P(2),A(),R(3,"p")(4,"strong"),P(5,"Date:"),A(),P(6),A(),R(7,"p")(8,"strong"),P(9,"Difficulty:"),A(),P(10),A(),R(11,"p")(12,"strong"),P(13,"Participants:"),A(),P(14),A()()),n&2){let t=e.$implicit;U(2),nn(t.name),U(4),Ct(" ",t.date,""),U(4),Ct(" ",t.difficulty,""),U(4),Ct(" ",t.participants,"")}}function o4(n,e){if(n&1&&(R(0,"ul"),De(1,i4,15,4,"li",21),A()),n&2){let t=Ne(2);U(),oe("ngForOf",t.tours)}}function s4(n,e){n&1&&(R(0,"p"),P(1,"No tours organized by this club."),A())}function a4(n,e){if(n&1&&(R(0,"div")(1,"div",5)(2,"div",6),P(3,"Name:"),A(),De(4,XH,2,2,"div",7)(5,e4,3,2,"div",8),A(),R(6,"div",5)(7,"div",6),P(8,"Email:"),A(),R(9,"div",9),P(10),A()(),R(11,"div",5)(12,"div",6),P(13,"Type:"),A(),R(14,"div",9),P(15),A()(),R(16,"div",10),De(17,t4,2,0,"button",11)(18,n4,2,0,"button",12)(19,r4,2,0,"button",13),A(),R(20,"h2",14),P(21,"Organized Tours"),A(),De(22,o4,2,1,"ul",4)(23,s4,2,0,"ng-template",null,1,Ui),A()),n&2){let t=We(24),r=Ne();U(4),oe("ngIf",!r.editMode),U(),oe("ngIf",r.editMode),U(5),nn(r.clubProfile.email),U(5),nn(r.clubProfile.type),U(2),oe("ngIf",!r.editMode),U(),oe("ngIf",r.editMode),U(),oe("ngIf",r.editMode),U(3),oe("ngIf",r.tours.length>0)("ngIfElse",t)}}function c4(n,e){n&1&&(R(0,"p"),P(1,"No profile data available."),A())}var Xx=(()=>{class n{constructor(t){this.authService=t,this.clubProfile=null,this.firestore=k(Cn),this.editMode=!1,this.firstName="",this.lastName=""}ngOnInit(){return m(this,null,function*(){let t=this.authService.currentUser;if(t){let r=yield Ar(bn(this.firestore,"users",t.uid));r.exists()?(this.clubProfile=r.data(),this.firstName=this.clubProfile.firstName,this.lastName=this.clubProfile.lastName,yield this.loadTours(t.uid)):console.error("User not found")}else console.error("User is not authenticated")})}toggleEditMode(){this.editMode=!this.editMode}loadTours(t){return m(this,null,function*(){let r=nu(this.firestore,"tours"),i=bx(r,Tx("createdBy","==",t)),o=yield Dx(i);this.tours=o.docs.map(s=>s.data())})}saveProfile(){return m(this,null,function*(){this.clubProfile&&(this.clubProfile.firstName=this.firstName,this.clubProfile.lastName=this.lastName,this.authService.updateUserData(this.clubProfile),this.toggleEditMode())})}static{this.\u0275fac=function(r){return new(r||n)($(ht))}}static{this.\u0275cmp=Je({type:n,selectors:[["app-profile-club"]],standalone:!0,features:[et],decls:6,vars:2,consts:[["noProfile",""],["noTours",""],[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],[4,"ngIf","ngIfElse"],[1,"flex","items-center","space-x-4"],[1,"text-lg","font-semibold","text-gray-700"],["class","text-lg text-gray-900",4,"ngIf"],["class","flex space-x-2",4,"ngIf"],[1,"text-lg","text-gray-900"],[1,"flex","justify-end","space-x-4","mt-4"],["class","bg-blue-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-green-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-red-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],[1,"text-xl","font-bold","mt-4"],[1,"flex","space-x-2"],["placeholder","First Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],["placeholder","Last Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],[1,"bg-blue-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-green-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-red-500","text-white","px-4","py-2","rounded",3,"click"],["class","mb-4 p-4 border rounded shadow",4,"ngFor","ngForOf"],[1,"mb-4","p-4","border","rounded","shadow"],[1,"text-lg","font-semibold"]],template:function(r,i){if(r&1&&(R(0,"div",2)(1,"h1",3),P(2,"Club Profile"),A(),De(3,a4,25,9,"div",4)(4,c4,2,0,"ng-template",null,0,Ui),A()),r&2){let o=We(5);U(3),oe("ngIf",i.clubProfile)("ngIfElse",o)}},dependencies:[rn,_d,Jn,an,Zn,Tn]})}}return n})();function u4(n,e){if(n&1&&(R(0,"div",9),P(1),A()),n&2){let t=Ne(2);U(),Ua("",t.userProfile.firstName," ",t.userProfile.lastName,"")}}function l4(n,e){if(n&1){let t=Xe();R(0,"div",14)(1,"input",15),Le("ngModelChange",function(i){fe(t);let o=Ne(2);return qe(o.firstName,i)||(o.firstName=i),pe(i)}),A(),R(2,"input",16),Le("ngModelChange",function(i){fe(t);let o=Ne(2);return qe(o.lastName,i)||(o.lastName=i),pe(i)}),A()()}if(n&2){let t=Ne(2);U(),Ve("ngModel",t.firstName),U(),Ve("ngModel",t.lastName)}}function d4(n,e){if(n&1){let t=Xe();R(0,"button",17),Ae("click",function(){fe(t);let i=Ne(2);return pe(i.toggleEditMode())}),P(1,"Edit"),A()}}function h4(n,e){if(n&1){let t=Xe();R(0,"button",18),Ae("click",function(){fe(t);let i=Ne(2);return pe(i.saveProfile())}),P(1,"Save"),A()}}function f4(n,e){if(n&1){let t=Xe();R(0,"button",19),Ae("click",function(){fe(t);let i=Ne(2);return pe(i.toggleEditMode())}),P(1,"Cancel"),A()}}function p4(n,e){if(n&1&&(R(0,"div",4)(1,"div",5)(2,"div",6),P(3,"Name:"),A(),De(4,u4,2,2,"div",7)(5,l4,3,2,"div",8),A(),R(6,"div",5)(7,"div",6),P(8,"Email:"),A(),R(9,"div",9),P(10),A()(),R(11,"div",5)(12,"div",6),P(13,"Type:"),A(),R(14,"div",9),P(15),A()(),R(16,"div",10),De(17,d4,2,0,"button",11)(18,h4,2,0,"button",12)(19,f4,2,0,"button",13),A()()),n&2){let t=Ne();U(4),oe("ngIf",!t.editMode),U(),oe("ngIf",t.editMode),U(5),nn(t.userProfile.email),U(5),nn(t.userProfile.type),U(2),oe("ngIf",!t.editMode),U(),oe("ngIf",t.editMode),U(),oe("ngIf",t.editMode)}}function g4(n,e){n&1&&(R(0,"p",20),P(1,"No profile data available."),A())}var eR=(()=>{class n{constructor(t){this.authService=t,this.editMode=!1,this.firstName="",this.lastName=""}ngOnInit(){return m(this,null,function*(){this.authService.userData$.subscribe(t=>{let r=t;r&&(this.userProfile=r),this.firstName=this.userProfile.firstName,this.lastName=this.userProfile.lastName})})}toggleEditMode(){this.editMode=!this.editMode}saveProfile(){return m(this,null,function*(){this.userProfile.firstName=this.firstName,this.userProfile.lastName=this.lastName,this.authService.updateUserData(this.userProfile),this.toggleEditMode()})}static{this.\u0275fac=function(r){return new(r||n)($(ht))}}static{this.\u0275cmp=Je({type:n,selectors:[["app-profile-hiker"]],standalone:!0,features:[et],decls:6,vars:2,consts:[["noProfile",""],[1,"container","mx-auto","p-6","bg-white","shadow-lg","rounded-lg"],[1,"text-3xl","font-bold","text-gray-800","mb-6","text-center"],["class","space-y-4",4,"ngIf","ngIfElse"],[1,"space-y-4"],[1,"flex","items-center","space-x-4"],[1,"text-lg","font-semibold","text-gray-700"],["class","text-lg text-gray-900",4,"ngIf"],["class","flex space-x-2",4,"ngIf"],[1,"text-lg","text-gray-900"],[1,"flex","justify-end","space-x-4"],["class","bg-blue-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-green-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],["class","bg-red-500 text-white px-4 py-2 rounded",3,"click",4,"ngIf"],[1,"flex","space-x-2"],["placeholder","First Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],["placeholder","Last Name",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],[1,"bg-blue-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-green-500","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-red-500","text-white","px-4","py-2","rounded",3,"click"],[1,"text-center","text-gray-500"]],template:function(r,i){if(r&1&&(R(0,"div",1)(1,"h1",2),P(2,"Profile"),A(),De(3,p4,20,7,"div",3)(4,g4,2,0,"ng-template",null,0,Ui),A()),r&2){let o=We(5);U(3),oe("ngIf",i.userProfile)("ngIfElse",o)}},dependencies:[rn,Jn,an,Zn,Tn]})}}return n})();var kw=(n,e)=>{let t=k(ht),r=k(Ue);return t.user$.pipe(wt(1),X(i=>i?!0:(r.navigate(["/login"]),!1)))};var tR=(()=>{class n{constructor(t,r,i){this.authService=t,this.tourService=r,this.router=i,this.tour={name:"",date:"",description:"",gpxContent:"",difficulty:"easy",participants:0,createdBy:"",createdAt:""},this.gpxFile=null}onFileChange(t){let r=t.target.files[0];r&&(this.gpxFile=r)}onSubmit(){return m(this,null,function*(){if(this.gpxFile){let t=this.authService.currentUser;if(t){let r=new FileReader;r.onload=()=>m(this,null,function*(){let i=r.result;this.tour.gpxContent=i,this.tour.createdBy=t.uid,this.tour.createdAt=new Date().toISOString();try{let o=yield this.tourService.addTour(this.tour);console.log("Tour created with ID:",o.id),this.router.navigate(["/"])}catch(o){console.error("Error adding document:",o)}}),r.readAsText(this.gpxFile)}else console.error("User is not authenticated")}else console.error("GPX file is required")})}static{this.\u0275fac=function(r){return new(r||n)($(ht),$(Ws),$(Ue))}}static{this.\u0275cmp=Je({type:n,selectors:[["app-create-hiking-tour"]],standalone:!0,features:[et],decls:38,vars:6,consts:[["tourForm","ngForm"],[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],[3,"ngSubmit"],[1,"mb-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","name","name","name","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","date",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","date","name","date","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","description",1,"block","text-sm","font-medium","text-gray-700"],["id","description","name","description","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","gpxFile",1,"block","text-sm","font-medium","text-gray-700"],["type","file","id","gpxFile","name","gpxFile","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"change"],["for","difficulty",1,"block","text-sm","font-medium","text-gray-700"],["id","difficulty","name","difficulty","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["value","easy"],["value","moderate"],["value","hard"],["for","participants",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","participants","name","participants","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"mt-4"],["type","submit",1,"w-full","py-2","px-4","bg-blue-600","text-white","rounded-md","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"disabled"]],template:function(r,i){if(r&1){let o=Xe();R(0,"div",1)(1,"h1",2),P(2,"Create Hiking Tour"),A(),R(3,"form",3,0),Ae("ngSubmit",function(){return fe(o),pe(i.onSubmit())}),R(5,"div",4)(6,"label",5),P(7,"Tour Name"),A(),R(8,"input",6),Le("ngModelChange",function(a){return fe(o),qe(i.tour.name,a)||(i.tour.name=a),pe(a)}),A()(),R(9,"div",4)(10,"label",7),P(11,"Date"),A(),R(12,"input",8),Le("ngModelChange",function(a){return fe(o),qe(i.tour.date,a)||(i.tour.date=a),pe(a)}),A()(),R(13,"div",4)(14,"label",9),P(15,"Description"),A(),R(16,"textarea",10),Le("ngModelChange",function(a){return fe(o),qe(i.tour.description,a)||(i.tour.description=a),pe(a)}),A()(),R(17,"div",4)(18,"label",11),P(19,"GPX File"),A(),R(20,"input",12),Ae("change",function(a){return fe(o),pe(i.onFileChange(a))}),A()(),R(21,"div",4)(22,"label",13),P(23,"Difficulty Level"),A(),R(24,"select",14),Le("ngModelChange",function(a){return fe(o),qe(i.tour.difficulty,a)||(i.tour.difficulty=a),pe(a)}),R(25,"option",15),P(26,"Easy"),A(),R(27,"option",16),P(28,"Moderate"),A(),R(29,"option",17),P(30,"Hard"),A()()(),R(31,"div",4)(32,"label",18),P(33,"Number of Participants"),A(),R(34,"input",19),Le("ngModelChange",function(a){return fe(o),qe(i.tour.participants,a)||(i.tour.participants=a),pe(a)}),A()(),R(35,"div",20)(36,"button",21),P(37," Create Tour "),A()()()()}if(r&2){let o=We(4);U(8),Ve("ngModel",i.tour.name),U(4),Ve("ngModel",i.tour.date),U(4),Ve("ngModel",i.tour.description),U(8),Ve("ngModel",i.tour.difficulty),U(10),Ve("ngModel",i.tour.participants),U(2),oe("disabled",o.invalid)}},dependencies:[mn,Jn,Xs,If,Ef,an,Ow,ea,Zn,Js,po,Tn,fo]})}}return n})();var nR=(n,e)=>{let t=k(ht),r=k(Ue);return t.userType$.pipe(wt(1),X(i=>i==="hikingClub"?!0:(r.navigate(["/"]),!1)))};var m4=(n,e)=>({"bg-gray-400 cursor-not-allowed":n,"bg-blue-600 hover:bg-blue-700":e});function y4(n,e){if(n&1){let t=Xe();R(0,"button",5),Ae("click",function(){fe(t);let i=Ne(2);return pe(i.applyForTour())}),P(1," Apply for the Tour "),A()}if(n&2){let t=Ne(2);oe("disabled",t.hasApplied)("ngClass",vC(2,m4,t.hasApplied,!t.hasApplied))}}function v4(n,e){if(n&1&&(R(0,"div")(1,"h2",3),P(2),A(),R(3,"p")(4,"strong"),P(5,"Date:"),A(),P(6),A(),R(7,"p")(8,"strong"),P(9,"Description:"),A(),P(10),A(),R(11,"p")(12,"strong"),P(13,"Difficulty:"),A(),P(14),A(),R(15,"p")(16,"strong"),P(17,"Participants:"),A(),P(18),A(),De(19,y4,2,5,"button",4),A()),n&2){let t=Ne();U(2),nn(t.tour.name),U(4),Ct(" ",t.tour.date,""),U(4),Ct(" ",t.tour.description,""),U(4),Ct(" ",t.tour.difficulty,""),U(4),Ct(" ",t.tour.participants,""),U(),oe("ngIf",t.isHiker)}}var rR=(()=>{class n{constructor(t,r,i,o){this.route=t,this.tourService=r,this.authService=i,this.router=o,this.isHiker=!1,this.hasApplied=!1}ngOnInit(){return m(this,null,function*(){let t=this.route.snapshot.paramMap.get("id");t?yield this.loadTour(t):this.router.navigate(["/"]),this.authService.user$.subscribe(r=>m(this,null,function*(){let i=r?.uid;i&&(this.userId=i,this.hasApplied=yield this.checkIfUserHasApplied(this.tour.id,this.userId))})),this.authService.userType$.subscribe(r=>{r==="hiker"&&(this.isHiker=!0)})})}loadTour(t){return m(this,null,function*(){let r=(yield this.tourService.loadTour(t))??null;r?this.tour=r:this.router.navigate(["/"])})}applyForTour(){return m(this,null,function*(){let t=this.authService.currentUser;t?yield this.tourService.applyForTour(this.tour.id,t.uid):this.router.navigate(["/"])})}checkIfUserHasApplied(t,r){return m(this,null,function*(){return this.tourService.hasUserApplied(t,r)})}static{this.\u0275fac=function(r){return new(r||n)($(Bn),$(Ws),$(ht),$(Ue))}}static{this.\u0275cmp=Je({type:n,selectors:[["app-tour-details"]],standalone:!0,features:[et],decls:4,vars:1,consts:[[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],[4,"ngIf"],[1,"text-xl","font-semibold"],["class","mt-2 py-2 px-4 text-white rounded focus:outline-none focus:ring-2 focus:ring-blue-500",3,"disabled","ngClass","click",4,"ngIf"],[1,"mt-2","py-2","px-4","text-white","rounded","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"click","disabled","ngClass"]],template:function(r,i){r&1&&(R(0,"div",0)(1,"h1",1),P(2,"Tour Details"),A(),De(3,v4,20,6,"div",2),A()),r&2&&(U(3),oe("ngIf",i.tour))},dependencies:[rn,jC]})}}return n})();var iR=[{path:"",component:Sx},{path:"login",component:Zx},{path:"register",component:Jx},{path:"profile-club",component:Xx,canActivate:[kw]},{path:"profile-hiker",component:eR,canActivate:[kw]},{path:"create-hiking-tour",component:tR,canActivate:[nR]},{path:"tour-details/:id",component:rR}];var oR={apiKey:"AIzaSyCu5CPQCRQ7_qsOst9yUHo9_VXxDZ7RQv0",authDomain:"master-b6858.firebaseapp.com",projectId:"master-b6858",storageBucket:"master-b6858.firebasestorage.app",messagingSenderId:"21300314672",appId:"1:21300314672:web:8cd1730aa552dff5f3e3f5"};var sR={providers:[vT(()=>Gd(oR)),pS(()=>mS()),wx(()=>Cx()),bC({eventCoalescing:!0}),Ub(iR)]};function _4(n,e){n&1&&(R(0,"li")(1,"a",9),P(2,"Create Hiking Tour"),A()())}function w4(n,e){if(n&1&&(dd(0),De(1,_4,3,0,"li",6),hd()),n&2){let t=e.ngIf;U(),oe("ngIf",t==="hikingClub")}}function I4(n,e){if(n&1){let t=Xe();dd(0),De(1,w4,2,1,"ng-container",6),ja(2,"async"),R(3,"li")(4,"a",7),Ae("click",function(){fe(t);let i=Ne();return pe(i.goToProfile())}),P(5,"Profile"),A()(),R(6,"li")(7,"a",8),Ae("click",function(){fe(t);let i=Ne();return pe(i.logout())}),P(8,"Logout"),A()(),hd()}if(n&2){let t=Ne();U(),oe("ngIf",Ba(2,1,t.userType$))}}function E4(n,e){n&1&&(R(0,"li")(1,"a",10),P(2,"Login"),A()(),R(3,"li")(4,"a",11),P(5,"Register"),A()())}var aR=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.user$=this.authService.user$,this.userType$=this.authService.userType$}ngOnInit(){}logout(){return m(this,null,function*(){yield this.authService.logout(),this.router.navigate(["/"])})}goToProfile(){this.userType$.pipe(wt(1)).subscribe(t=>{t==="hiker"?this.router.navigate(["/profile-hiker"]):t==="hikingClub"&&this.router.navigate(["/profile-club"])})}static{this.\u0275fac=function(r){return new(r||n)($(ht),$(Ue))}}static{this.\u0275cmp=Je({type:n,selectors:[["app-navbar"]],standalone:!0,features:[et],decls:10,vars:4,consts:[["loggedOut",""],[1,"bg-gray-800","p-4"],[1,"flex","items-center","space-x-4","w-full"],["routerLink","/",1,"text-white","text-lg","hover:text-gray-400"],[1,"flex-grow"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"text-white","hover:text-gray-400",3,"click"],[1,"text-white","hover:text-gray-400","cursor-pointer",3,"click"],["routerLink","/create-hiking-tour",1,"text-white","hover:text-gray-400"],["routerLink","/login",1,"text-white","hover:text-gray-400"],["routerLink","/register",1,"text-white","hover:text-gray-400"]],template:function(r,i){if(r&1&&(R(0,"nav",1)(1,"ul",2)(2,"li")(3,"a",3),P(4,"Hiking Platform"),A()(),tn(5,"li",4),De(6,I4,9,3,"ng-container",5),ja(7,"async"),De(8,E4,6,0,"ng-template",null,0,Ui),A()()),r&2){let o=We(9);U(6),oe("ngIf",Ba(7,2,i.user$))("ngIfElse",o)}},dependencies:[ms,ii,mn,rn,wd]})}}return n})();var cR=(()=>{class n{constructor(){this.title="master"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Je({type:n,selectors:[["app-root"]],standalone:!0,features:[et],decls:2,vars:0,template:function(r,i){r&1&&tn(0,"app-navbar")(1,"router-outlet")},dependencies:[ry,aR]})}}return n})();QC(cR,sR).catch(n=>console.error(n));
