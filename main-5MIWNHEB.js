var lM=Object.defineProperty,dM=Object.defineProperties;var hM=Object.getOwnPropertyDescriptors;var _I=Object.getOwnPropertySymbols,fM=Object.getPrototypeOf,pM=Object.prototype.hasOwnProperty,gM=Object.prototype.propertyIsEnumerable,mM=Reflect.get;var wI=(n,e,t)=>e in n?lM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,V=(n,e)=>{for(var t in e||={})pM.call(e,t)&&wI(n,t,e[t]);if(_I)for(var t of _I(e))gM.call(e,t)&&wI(n,t,e[t]);return n},ae=(n,e)=>dM(n,hM(e));var wr=(n,e,t)=>mM(fM(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});function II(n,e){return Object.is(n,e)}var We=null,fu=!1,pu=1,qn=Symbol("SIGNAL");function ve(n){let e=We;return We=n,e}function EI(){return We}var fa={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ff(n){if(fu)throw new Error("");if(We===null)return;We.consumerOnSignalRead(n);let e=We.nextProducerIndex++;if(vu(We),e<We.producerNode.length&&We.producerNode[e]!==n&&ha(We)){let t=We.producerNode[e];yu(t,We.producerIndexOfThis[e])}We.producerNode[e]!==n&&(We.producerNode[e]=n,We.producerIndexOfThis[e]=ha(We)?TI(n,We,e):0),We.producerLastReadVersion[e]=n.version}function yM(){pu++}function DI(n){if(!(ha(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===pu)){if(!n.producerMustRecompute(n)&&!Lf(n)){n.dirty=!1,n.lastCleanEpoch=pu;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=pu}}function CI(n){if(n.liveConsumerNode===void 0)return;let e=fu;fu=!0;try{for(let t of n.liveConsumerNode)t.dirty||vM(t)}finally{fu=e}}function bI(){return We?.consumerAllowSignalWrites!==!1}function vM(n){n.dirty=!0,CI(n),n.consumerMarkedDirty?.(n)}function mu(n){return n&&(n.nextProducerIndex=0),ve(n)}function Vf(n,e){if(ve(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ha(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)yu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Lf(n){vu(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(DI(t),r!==t.version))return!0}return!1}function Uf(n){if(vu(n),ha(n))for(let e=0;e<n.producerNode.length;e++)yu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function TI(n,e,t){if(SI(n),n.liveConsumerNode.length===0&&AI(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=TI(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function yu(n,e){if(SI(n),n.liveConsumerNode.length===1&&AI(n))for(let r=0;r<n.producerNode.length;r++)yu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];vu(i),i.producerIndexOfThis[r]=e}}function ha(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function vu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function SI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function AI(n){return n.producerNode!==void 0}function RI(n){let e=Object.create(_M);e.computation=n;let t=()=>{if(DI(e),Ff(e),e.value===gu)throw e.error;return e.value};return t[qn]=e,t}var Of=Symbol("UNSET"),kf=Symbol("COMPUTING"),gu=Symbol("ERRORED"),_M=ae(V({},fa),{value:Of,dirty:!0,error:null,equal:II,producerMustRecompute(n){return n.value===Of||n.value===kf},producerRecomputeValue(n){if(n.value===kf)throw new Error("Detected cycle in computations.");let e=n.value;n.value=kf;let t=mu(n),r;try{r=n.computation()}catch(i){r=gu,n.error=i}finally{Vf(n,t)}if(e!==Of&&e!==gu&&r!==gu&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function wM(){throw new Error}var MI=wM;function NI(){MI()}function xI(n){MI=n}var IM=null;function PI(n){let e=Object.create(kI);e.value=n;let t=()=>(Ff(e),e.value);return t[qn]=e,t}function jf(n,e){bI()||NI(),n.equal(n.value,e)||(n.value=e,EM(n))}function OI(n,e){bI()||NI(),jf(n,e(n.value))}var kI=ae(V({},fa),{equal:II,value:void 0});function EM(n){n.version++,yM(),CI(n),IM?.()}function re(n){return typeof n=="function"}function oo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var _u=oo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function di(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Oe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){e=o instanceof _u?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{FI(o)}catch(s){e=e??[],s instanceof _u?e=[...e,...s.errors]:e.push(s)}}if(e)throw new _u(e)}}add(e){var t;if(e&&e!==this)if(this.closed)FI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&di(t,e)}remove(e){let{_finalizers:t}=this;t&&di(t,e),e instanceof n&&e._removeParent(this)}};Oe.EMPTY=(()=>{let n=new Oe;return n.closed=!0,n})();var Bf=Oe.EMPTY;function wu(n){return n instanceof Oe||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function FI(n){re(n)?n():n.unsubscribe()}var nn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var so={setTimeout(n,e,...t){let{delegate:r}=so;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=so;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Iu(n){so.setTimeout(()=>{let{onUnhandledError:e}=nn;if(e)e(n);else throw n})}function pa(){}var VI=$f("C",void 0,void 0);function LI(n){return $f("E",void 0,n)}function UI(n){return $f("N",n,void 0)}function $f(n,e,t){return{kind:n,value:e,error:t}}var hi=null;function ao(n){if(nn.useDeprecatedSynchronousErrorHandling){let e=!hi;if(e&&(hi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=hi;if(hi=null,t)throw r}}else n()}function jI(n){nn.useDeprecatedSynchronousErrorHandling&&hi&&(hi.errorThrown=!0,hi.error=n)}var fi=class extends Oe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wu(e)&&e.add(this)):this.destination=bM}static create(e,t,r){return new co(e,t,r)}next(e){this.isStopped?qf(UI(e),this):this._next(e)}error(e){this.isStopped?qf(LI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?qf(VI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},DM=Function.prototype.bind;function Hf(n,e){return DM.call(n,e)}var zf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Eu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Eu(r)}else Eu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Eu(t)}}},co=class extends fi{constructor(e,t,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&nn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Hf(e.next,o),error:e.error&&Hf(e.error,o),complete:e.complete&&Hf(e.complete,o)}):i=e}this.destination=new zf(i)}};function Eu(n){nn.useDeprecatedSynchronousErrorHandling?jI(n):Iu(n)}function CM(n){throw n}function qf(n,e){let{onStoppedNotification:t}=nn;t&&so.setTimeout(()=>t(n,e))}var bM={closed:!0,next:pa,error:CM,complete:pa};var uo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ft(n){return n}function Du(...n){return Gf(n)}function Gf(n){return n.length===0?Ft:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var he=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=SM(t)?t:new co(t,r,i);return ao(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=BI(r),new r((i,o)=>{let s=new co({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[uo](){return this}pipe(...t){return Gf(t)(this)}toPromise(t){return t=BI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function BI(n){var e;return(e=n??nn.Promise)!==null&&e!==void 0?e:Promise}function TM(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}function SM(n){return n&&n instanceof fi||TM(n)&&wu(n)}function Wf(n){return re(n?.lift)}function me(n){return e=>{if(Wf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(n,e,t,r,i){return new Kf(n,e,t,r,i)}var Kf=class extends fi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function lo(){return me((n,e)=>{let t=null;n._refCount++;let r=fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ho=class extends he{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Wf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Oe;let t=this.getSubject();e.add(this.source.subscribe(fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Oe.EMPTY)}return e}refCount(){return lo()(this)}};var $I=oo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Xe=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Cu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new $I}next(t){ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Bf:(this.currentObservers=null,o.push(t),new Oe(()=>{this.currentObservers=null,di(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new he;return t.source=this,t}}return n.create=(e,t)=>new Cu(e,t),n})(),Cu=class extends Xe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Bf}};var je=class extends Xe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Qf={now(){return(Qf.delegate||Date).now()},delegate:void 0};var bu=class extends Oe{constructor(e,t){super()}schedule(e,t=0){return this}};var ga={setInterval(n,e,...t){let{delegate:r}=ga;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ga;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var fo=class extends bu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return ga.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ga.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,di(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var po=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};po.now=Qf.now;var go=class extends po{constructor(e,t=po.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Yf=new go(fo);var Tu=class extends fo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Su=class extends go{};var Zf=new Su(Tu);var Vt=new he(n=>n.complete());function HI(n){return n&&re(n.schedule)}function qI(n){return n[n.length-1]}function Au(n){return re(qI(n))?n.pop():void 0}function Ir(n){return HI(qI(n))?n.pop():void 0}function Jf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function GI(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function zI(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pi(n){return this instanceof pi?(this.v=n,this):new pi(n)}function WI(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(w){return function(S){return Promise.resolve(S).then(w,p)}}function a(w,S){r[w]&&(i[w]=function(M){return new Promise(function(R,L){o.push([w,M,R,L])>1||u(w,M)})},S&&(i[w]=S(i[w])))}function u(w,S){try{l(r[w](S))}catch(M){y(o[0][3],M)}}function l(w){w.value instanceof pi?Promise.resolve(w.value.v).then(f,p):y(o[0][2],w)}function f(w){u("next",w)}function p(w){u("throw",w)}function y(w,S){w(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function KI(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof zI=="function"?zI(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Ru=n=>n&&typeof n.length=="number"&&typeof n!="function";function Mu(n){return re(n?.then)}function Nu(n){return re(n[uo])}function xu(n){return Symbol.asyncIterator&&re(n?.[Symbol.asyncIterator])}function Pu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function AM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ou=AM();function ku(n){return re(n?.[Ou])}function Fu(n){return WI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield pi(t.read());if(i)return yield pi(void 0);yield yield pi(r)}}finally{t.releaseLock()}})}function Vu(n){return re(n?.getReader)}function Be(n){if(n instanceof he)return n;if(n!=null){if(Nu(n))return RM(n);if(Ru(n))return MM(n);if(Mu(n))return NM(n);if(xu(n))return QI(n);if(ku(n))return xM(n);if(Vu(n))return PM(n)}throw Pu(n)}function RM(n){return new he(e=>{let t=n[uo]();if(re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function MM(n){return new he(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function NM(n){return new he(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Iu)})}function xM(n){return new he(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function QI(n){return new he(e=>{OM(n,e).catch(t=>e.error(t))})}function PM(n){return QI(Fu(n))}function OM(n,e){var t,r,i,o;return GI(this,void 0,void 0,function*(){try{for(t=KI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Rt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Er(n,e=0){return me((t,r)=>{t.subscribe(fe(r,i=>Rt(r,n,()=>r.next(i),e),()=>Rt(r,n,()=>r.complete(),e),i=>Rt(r,n,()=>r.error(i),e)))})}function Dr(n,e=0){return me((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function YI(n,e){return Be(n).pipe(Dr(e),Er(e))}function ZI(n,e){return Be(n).pipe(Dr(e),Er(e))}function JI(n,e){return new he(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function XI(n,e){return new he(t=>{let r;return Rt(t,e,()=>{r=n[Ou](),Rt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function Lu(n,e){if(!n)throw new Error("Iterable cannot be null");return new he(t=>{Rt(t,e,()=>{let r=n[Symbol.asyncIterator]();Rt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function eE(n,e){return Lu(Fu(n),e)}function tE(n,e){if(n!=null){if(Nu(n))return YI(n,e);if(Ru(n))return JI(n,e);if(Mu(n))return ZI(n,e);if(xu(n))return Lu(n,e);if(ku(n))return XI(n,e);if(Vu(n))return eE(n,e)}throw Pu(n)}function Me(n,e){return e?tE(n,e):Be(n)}function Q(...n){let e=Ir(n);return Me(n,e)}function mo(n,e){let t=re(n)?n:()=>n,r=i=>i.error(t());return new he(e?i=>e.schedule(r,0,i):r)}function Xf(n){return!!n&&(n instanceof he||re(n.lift)&&re(n.subscribe))}var zn=oo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function J(n,e){return me((t,r)=>{let i=0;t.subscribe(fe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:kM}=Array;function FM(n,e){return kM(e)?n(...e):n(e)}function Uu(n){return J(e=>FM(n,e))}var{isArray:VM}=Array,{getPrototypeOf:LM,prototype:UM,keys:jM}=Object;function ju(n){if(n.length===1){let e=n[0];if(VM(e))return{args:e,keys:null};if(BM(e)){let t=jM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function BM(n){return n&&typeof n=="object"&&LM(n)===UM}function Bu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function gi(...n){let e=Ir(n),t=Au(n),{args:r,keys:i}=ju(n);if(r.length===0)return Me([],e);let o=new he($M(r,e,i?s=>Bu(i,s):Ft));return t?o.pipe(Uu(t)):o}function $M(n,e,t=Ft){return r=>{nE(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)nE(e,()=>{let l=Me(n[u],e),f=!1;l.subscribe(fe(r,p=>{o[u]=p,f||(f=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function nE(n,e,t){n?Rt(t,n,e):e()}function rE(n,e,t,r,i,o,s,a){let u=[],l=0,f=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},w=M=>l<r?S(M):u.push(M),S=M=>{o&&e.next(M),l++;let R=!1;Be(t(M,f++)).subscribe(fe(e,L=>{i?.(L),o?w(L):e.next(L)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let L=u.shift();s?Rt(e,s,()=>S(L)):S(L)}y()}catch(L){e.error(L)}}))};return n.subscribe(fe(e,w,()=>{p=!0,y()})),()=>{a?.()}}function $e(n,e,t=1/0){return re(e)?$e((r,i)=>J((o,s)=>e(r,o,i,s))(Be(n(r,i))),t):(typeof e=="number"&&(t=e),me((r,i)=>rE(r,i,n,t)))}function yo(n=1/0){return $e(Ft,n)}function iE(){return yo(1)}function vo(...n){return iE()(Me(n,Ir(n)))}function $u(n){return new he(e=>{Be(n()).subscribe(e)})}function ep(...n){let e=Au(n),{args:t,keys:r}=ju(n),i=new he(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let f=0;f<s;f++){let p=!1;Be(t[f]).subscribe(fe(o,y=>{p||(p=!0,l--),a[f]=y},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Bu(r,a):a),o.complete())}))}});return e?i.pipe(Uu(e)):i}function Lt(n,e){return me((t,r)=>{let i=0;t.subscribe(fe(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Cr(n){return me((e,t)=>{let r=null,i=!1,o;r=e.subscribe(fe(t,void 0,void 0,s=>{o=Be(n(s,Cr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function oE(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(fe(s,f=>{let p=l++;u=a?n(u,f,p):(a=!0,f),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function mi(n,e){return re(e)?$e(n,e,1):$e(n,1)}function br(n){return me((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function gt(n){return n<=0?()=>Vt:me((e,t)=>{let r=0;e.subscribe(fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function tp(n){return J(()=>n)}function Hu(n=HM){return me((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function HM(){return new zn}function ma(n){return me((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function gn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Lt((i,o)=>n(i,o,r)):Ft,gt(1),t?br(e):Hu(()=>new zn))}function _o(n){return n<=0?()=>Vt:me((e,t)=>{let r=[];e.subscribe(fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function np(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Lt((i,o)=>n(i,o,r)):Ft,_o(1),t?br(e):Hu(()=>new zn))}function qu(n,e){return me(oE(n,e,arguments.length>=2,!0))}function zu(...n){let e=Ir(n);return me((t,r)=>{(e?vo(n,t,e):vo(n,t)).subscribe(r)})}function Mt(n,e){return me((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(fe(r,u=>{i?.unsubscribe();let l=0,f=o++;Be(n(u,f)).subscribe(i=fe(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function rp(n){return me((e,t)=>{Be(n).subscribe(fe(t,()=>t.complete(),pa)),!t.closed&&e.subscribe(t)})}function Ke(n,e,t){let r=re(n)||e||t?{next:n,error:e,complete:t}:n;return r?me((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(fe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ft}var qE="https://g.co/ng/security#xss",$=class extends Error{constructor(e,t){super(ag(e,t)),this.code=e}};function ag(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function ba(n){return{toString:n}.toString()}var Gu="__parameters__";function qM(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function zE(n,e,t){return ba(()=>{let r=qM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,f){let p=u.hasOwnProperty(Gu)?u[Gu]:Object.defineProperty(u,Gu,{value:[]})[Gu];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var yp=globalThis;function Te(n){for(let e in n)if(n[e]===Te)return e;throw Error("Could not find renamed property on target object.")}function zM(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function St(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(St).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function sE(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var GM=Te({__forward_ref__:Te});function En(n){return n.__forward_ref__=En,n.toString=function(){return St(this())},n}function Tt(n){return GE(n)?n():n}function GE(n){return typeof n=="function"&&n.hasOwnProperty(GM)&&n.__forward_ref__===En}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Or(n){return{providers:n.providers||[],imports:n.imports||[]}}function Sl(n){return aE(n,KE)||aE(n,QE)}function WE(n){return Sl(n)!==null}function aE(n,e){return n.hasOwnProperty(e)?n[e]:null}function WM(n){let e=n&&(n[KE]||n[QE]);return e||null}function cE(n){return n&&(n.hasOwnProperty(uE)||n.hasOwnProperty(KM))?n[uE]:null}var KE=Te({\u0275prov:Te}),uE=Te({\u0275inj:Te}),QE=Te({ngInjectableDef:Te}),KM=Te({ngInjectorDef:Te}),H=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function YE(n){return n&&!!n.\u0275providers}var QM=Te({\u0275cmp:Te}),YM=Te({\u0275dir:Te}),ZM=Te({\u0275pipe:Te}),JM=Te({\u0275mod:Te}),nl=Te({\u0275fac:Te}),va=Te({__NG_ELEMENT_ID__:Te}),lE=Te({__NG_ENV_ID__:Te});function Al(n){return typeof n=="string"?n:n==null?"":String(n)}function XM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Al(n)}function eN(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new $(-200,n)}function cg(n,e){throw new $(-201,!1)}var se=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(se||{}),vp;function ZE(){return vp}function Nt(n){let e=vp;return vp=n,e}function JE(n,e,t){let r=Sl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&se.Optional)return null;if(e!==void 0)return e;cg(n,"Injector")}var tN={},_a=tN,_p="__NG_DI_FLAG__",rl="ngTempTokenPath",nN="ngTokenPath",rN=/\n/gm,iN="\u0275",dE="__source",Co;function oN(){return Co}function Tr(n){let e=Co;return Co=n,e}function sN(n,e=se.Default){if(Co===void 0)throw new $(-203,!1);return Co===null?JE(n,void 0,e):Co.get(n,e&se.Optional?null:void 0,e)}function ee(n,e=se.Default){return(ZE()||sN)(Tt(n),e)}function x(n,e=se.Default){return ee(n,Rl(e))}function Rl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function wp(n){let e=[];for(let t=0;t<n.length;t++){let r=Tt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,o=se.Default;for(let s=0;s<r.length;s++){let a=r[s],u=aN(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(ee(i,o))}else e.push(ee(r))}return e}function XE(n,e){return n[_p]=e,n.prototype[_p]=e,n}function aN(n){return n[_p]}function cN(n,e,t,r){let i=n[rl];throw e[dE]&&i.unshift(e[dE]),n.message=uN(`
`+n.message,i,t,r),n[nN]=i,n[rl]=null,n}function uN(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==iN?n.slice(2):n;let i=St(e);if(Array.isArray(e))i=e.map(St).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):St(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(rN,`
  `)}`}var mt=XE(zE("Optional"),8);var ug=XE(zE("SkipSelf"),4);function vi(n,e){let t=n.hasOwnProperty(nl);return t?n[nl]:null}function lg(n,e){n.forEach(t=>Array.isArray(t)?lg(t,e):e(t))}function eD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function il(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function lN(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function dN(n,e,t){let r=Ta(n,e);return r>=0?n[r|1]=t:(r=~r,lN(n,r,e,t)),r}function ip(n,e){let t=Ta(n,e);if(t>=0)return n[t|1]}function Ta(n,e){return hN(n,e,1)}function hN(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var To={},zt=[],So=new H(""),tD=new H("",-1),nD=new H(""),ol=class{get(e,t=_a){if(t===_a){let r=new Error(`NullInjectorError: No provider for ${St(e)}!`);throw r.name="NullInjectorError",r}return t}},rD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(rD||{}),vn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(vn||{}),Rr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Rr||{});function fN(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Ip(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];pN(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function iD(n){return n===3||n===4||n===6}function pN(n){return n.charCodeAt(0)===64}function wa(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?hE(n,t,i,null,e[++r]):hE(n,t,i,null,null))}}return n}function hE(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var oD="ng-template";function gN(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&fN(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(dg(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function dg(n){return n.type===4&&n.value!==oD}function mN(n,e,t){let r=n.type===4&&!t?oD:n.value;return e===r}function yN(n,e,t){let r=4,i=n.attrs,o=i!==null?wN(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!rn(r)&&!rn(u))return!1;if(s&&rn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!mN(n,u,t)||u===""&&e.length===1){if(rn(r))return!1;s=!0}}else if(r&8){if(i===null||!gN(n,i,u,t)){if(rn(r))return!1;s=!0}}else{let l=e[++a],f=vN(u,i,dg(n),t);if(f===-1){if(rn(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(rn(r))return!1;s=!0}}}}return rn(r)||s}function rn(n){return(n&1)===0}function vN(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return IN(e,n)}function _N(n,e,t=!1){for(let r=0;r<e.length;r++)if(yN(n,e[r],t))return!0;return!1}function wN(n){for(let e=0;e<n.length;e++){let t=n[e];if(iD(t))return e}return n.length}function IN(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function fE(n,e){return n?":not("+e.trim()+")":e}function EN(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!rn(s)&&(e+=fE(o,i),i=""),r=s,o=o||!rn(r);t++}return i!==""&&(e+=fE(o,i)),e}function DN(n){return n.map(EN).join(",")}function CN(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!rn(i))break;i=o}r++}return{attrs:e,classes:t}}function et(n){return ba(()=>{let e=dD(n),t=ae(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===rD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||vn.Emulated,styles:n.styles||zt,_:null,schemas:n.schemas||null,tView:null,id:""});hD(t);let r=n.dependencies;return t.directiveDefs=gE(r,!1),t.pipeDefs=gE(r,!0),t.id=SN(t),t})}function bN(n){return Mr(n)||aD(n)}function TN(n){return n!==null}function kr(n){return ba(()=>({type:n.type,bootstrap:n.bootstrap||zt,declarations:n.declarations||zt,imports:n.imports||zt,exports:n.exports||zt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function pE(n,e){if(n==null)return To;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Rr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Rr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function ke(n){return ba(()=>{let e=dD(n);return hD(e),e})}function sD(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Mr(n){return n[QM]||null}function aD(n){return n[YM]||null}function cD(n){return n[ZM]||null}function uD(n){let e=Mr(n)||aD(n)||cD(n);return e!==null?e.standalone:!1}function lD(n,e){let t=n[JM]||null;if(!t&&e===!0)throw new Error(`Type ${St(n)} does not have '\u0275mod' property.`);return t}function dD(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||To,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||zt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:pE(n.inputs,e),outputs:pE(n.outputs),debugInfo:null}}function hD(n){n.features?.forEach(e=>e(n))}function gE(n,e){if(!n)return null;let t=e?cD:bN;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(TN)}function SN(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Dn(n){return{\u0275providers:n}}function AN(...n){return{\u0275providers:fD(!0,n),\u0275fromNgModule:!0}}function fD(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return lg(e,s=>{let a=s;Ep(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&pD(i,o),t}function pD(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];hg(i,o=>{e(o,r)})}}function Ep(n,e,t,r){if(n=Tt(n),!n)return!1;let i=null,o=cE(n),s=!o&&Mr(n);if(!o&&!s){let u=n.ngModule;if(o=cE(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Ep(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{lg(o.imports,f=>{Ep(f,e,t,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&pD(l,e)}if(!a){let l=vi(i)||(()=>new i);e({provide:i,useFactory:l,deps:zt},i),e({provide:nD,useValue:i,multi:!0},i),e({provide:So,useValue:()=>ee(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;hg(u,f=>{e(f,l)})}}else return!1;return i!==n&&n.providers!==void 0}function hg(n,e){for(let t of n)YE(t)&&(t=t.\u0275providers),Array.isArray(t)?hg(t,e):e(t)}var RN=Te({provide:String,useValue:Te});function gD(n){return n!==null&&typeof n=="object"&&RN in n}function MN(n){return!!(n&&n.useExisting)}function NN(n){return!!(n&&n.useFactory)}function Ao(n){return typeof n=="function"}function xN(n){return!!n.useClass}var Ml=new H(""),Zu={},PN={},op;function fg(){return op===void 0&&(op=new ol),op}var Ut=class{},Ia=class extends Ut{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Cp(e,s=>this.processProvider(s)),this.records.set(tD,wo(void 0,this)),i.has("environment")&&this.records.set(Ut,wo(void 0,this));let o=this.records.get(Ml);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(nD,zt,se.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ve(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ve(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Tr(this),r=Nt(void 0),i;try{return e()}finally{Tr(t),Nt(r)}}get(e,t=_a,r=se.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(lE))return e[lE](this);r=Rl(r);let i,o=Tr(this),s=Nt(void 0);try{if(!(r&se.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=LN(e)&&Sl(e);l&&this.injectableDefInScope(l)?u=wo(Dp(e),Zu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&se.Self?fg():this.parent;return t=r&se.Optional&&t===_a?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[rl]=a[rl]||[]).unshift(St(e)),o)throw a;return cN(a,e,"R3InjectorError",this.source)}else throw a}finally{Nt(s),Tr(o)}}resolveInjectorInitializers(){let e=ve(null),t=Tr(this),r=Nt(void 0),i;try{let o=this.get(So,zt,se.Self);for(let s of o)s()}finally{Tr(t),Nt(r),ve(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(St(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $(205,!1)}processProvider(e){e=Tt(e);let t=Ao(e)?e:Tt(e&&e.provide),r=kN(e);if(!Ao(e)&&e.multi===!0){let i=this.records.get(t);i||(i=wo(void 0,Zu,!0),i.factory=()=>wp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ve(null);try{return t.value===Zu&&(t.value=PN,t.value=t.factory()),typeof t.value=="object"&&t.value&&VN(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ve(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Tt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Dp(n){let e=Sl(n),t=e!==null?e.factory:vi(n);if(t!==null)return t;if(n instanceof H)throw new $(204,!1);if(n instanceof Function)return ON(n);throw new $(204,!1)}function ON(n){if(n.length>0)throw new $(204,!1);let t=WM(n);return t!==null?()=>t.factory(n):()=>new n}function kN(n){if(gD(n))return wo(void 0,n.useValue);{let e=mD(n);return wo(e,Zu)}}function mD(n,e,t){let r;if(Ao(n)){let i=Tt(n);return vi(i)||Dp(i)}else if(gD(n))r=()=>Tt(n.useValue);else if(NN(n))r=()=>n.useFactory(...wp(n.deps||[]));else if(MN(n))r=()=>ee(Tt(n.useExisting));else{let i=Tt(n&&(n.useClass||n.provide));if(FN(n))r=()=>new i(...wp(n.deps));else return vi(i)||Dp(i)}return r}function wo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function FN(n){return!!n.deps}function VN(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function LN(n){return typeof n=="function"||typeof n=="object"&&n instanceof H}function Cp(n,e){for(let t of n)Array.isArray(t)?Cp(t,e):t&&YE(t)?Cp(t.\u0275providers,e):e(t)}function Cn(n,e){n instanceof Ia&&n.assertNotDestroyed();let t,r=Tr(n),i=Nt(void 0);try{return e()}finally{Tr(r),Nt(i)}}function yD(){return ZE()!==void 0||oN()!=null}function UN(n){if(!yD())throw new $(-203,!1)}function jN(n){return typeof n=="function"}var Qn=0,de=1,X=2,At=3,on=4,an=5,sl=6,al=7,sn=8,Ro=9,_n=10,qe=11,Ea=12,mE=13,Uo=14,wn=15,Mo=16,Io=17,No=18,Nl=19,vD=20,Sr=21,sp=22,Gt=23,Kt=25,_D=1;var _i=7,cl=8,ul=9,Wt=10,ll=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ll||{});function Ar(n){return Array.isArray(n)&&typeof n[_D]=="object"}function Yn(n){return Array.isArray(n)&&n[_D]===!0}function pg(n){return(n.flags&4)!==0}function xl(n){return n.componentOffset>-1}function Pl(n){return(n.flags&1)===1}function Nr(n){return!!n.template}function bp(n){return(n[X]&512)!==0}var Tp=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function wD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Fr(){return ID}function ID(n){return n.type.prototype.ngOnChanges&&(n.setInput=$N),BN}Fr.ngInherit=!0;function BN(){let n=DD(this),e=n?.current;if(e){let t=n.previous;if(t===To)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function $N(n,e,t,r,i){let o=this.declaredInputs[r],s=DD(n)||HN(n,{previous:To,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Tp(l&&l.currentValue,t,u===To),wD(n,e,i,t)}var ED="__ngSimpleChanges__";function DD(n){return n[ED]||null}function HN(n,e){return n[ED]=e}var yE=null;var mn=function(n,e,t){yE?.(n,e,t)},qN="svg",zN="math";function In(n){for(;Array.isArray(n);)n=n[Qn];return n}function CD(n,e){return In(e[n])}function Qt(n,e){return In(e[n.index])}function bD(n,e){return n.data[e]}function TD(n,e){return n[e]}function Vr(n,e){let t=e[n];return Ar(t)?t:t[Qn]}function gg(n){return(n[X]&128)===128}function GN(n){return Yn(n[At])}function xo(n,e){return e==null?null:n[e]}function SD(n){n[Io]=0}function AD(n){n[X]&1024||(n[X]|=1024,gg(n)&&kl(n))}function WN(n,e){for(;n>0;)e=e[Uo],n--;return e}function Ol(n){return!!(n[X]&9216||n[Gt]?.dirty)}function Sp(n){n[_n].changeDetectionScheduler?.notify(8),n[X]&64&&(n[X]|=1024),Ol(n)&&kl(n)}function kl(n){n[_n].changeDetectionScheduler?.notify(0);let e=wi(n);for(;e!==null&&!(e[X]&8192||(e[X]|=8192,!gg(e)));)e=wi(e)}function RD(n,e){if((n[X]&256)===256)throw new $(911,!1);n[Sr]===null&&(n[Sr]=[]),n[Sr].push(e)}function KN(n,e){if(n[Sr]===null)return;let t=n[Sr].indexOf(e);t!==-1&&n[Sr].splice(t,1)}function wi(n){let e=n[At];return Yn(e)?e[At]:e}var ce={lFrame:LD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var MD=!1;function QN(){return ce.lFrame.elementDepthCount}function YN(){ce.lFrame.elementDepthCount++}function ZN(){ce.lFrame.elementDepthCount--}function ND(){return ce.bindingsEnabled}function JN(){return ce.skipHydrationRootTNode!==null}function XN(n){return ce.skipHydrationRootTNode===n}function ex(){ce.skipHydrationRootTNode=null}function Ce(){return ce.lFrame.lView}function yt(){return ce.lFrame.tView}function Ae(n){return ce.lFrame.contextLView=n,n[sn]}function Re(n){return ce.lFrame.contextLView=null,n}function vt(){let n=xD();for(;n!==null&&n.type===64;)n=n.parent;return n}function xD(){return ce.lFrame.currentTNode}function tx(){let n=ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function bi(n,e){let t=ce.lFrame;t.currentTNode=n,t.isParent=e}function mg(){return ce.lFrame.isParent}function PD(){ce.lFrame.isParent=!1}function nx(){return ce.lFrame.contextLView}function OD(){return MD}function vE(n){MD=n}function rx(){let n=ce.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function ix(n){return ce.lFrame.bindingIndex=n}function Fl(){return ce.lFrame.bindingIndex++}function ox(n){let e=ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function sx(){return ce.lFrame.inI18n}function ax(n,e){let t=ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ap(e)}function cx(){return ce.lFrame.currentDirectiveIndex}function Ap(n){ce.lFrame.currentDirectiveIndex=n}function ux(n){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function kD(n){ce.lFrame.currentQueryIndex=n}function lx(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[an]:null}function FD(n,e,t){if(t&se.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&se.Host);)if(i=lx(o),i===null||(o=o[Uo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ce.lFrame=VD();return r.currentTNode=e,r.lView=n,!0}function yg(n){let e=VD(),t=n[de];ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function VD(){let n=ce.lFrame,e=n===null?null:n.child;return e===null?LD(n):e}function LD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function UD(){let n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var jD=UD;function vg(){let n=UD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function dx(n){return(ce.lFrame.contextLView=WN(n,ce.lFrame.contextLView))[sn]}function jo(){return ce.lFrame.selectedIndex}function Ii(n){ce.lFrame.selectedIndex=n}function _g(){let n=ce.lFrame;return bD(n.tView,n.selectedIndex)}function hx(){return ce.lFrame.currentNamespace}var BD=!0;function Vl(){return BD}function Ll(n){BD=n}function fx(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=ID(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Ul(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function Ju(n,e,t){$D(n,e,3,t)}function Xu(n,e,t,r){(n[X]&3)===t&&$D(n,e,t,r)}function ap(n,e){let t=n[X];(t&3)===e&&(t&=16383,t+=1,n[X]=t)}function $D(n,e,t,r){let i=r!==void 0?n[Io]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Io]+=65536),(a<o||o==-1)&&(px(n,t,e,u),n[Io]=(n[Io]&4294901760)+u+2),u++}function _E(n,e){mn(4,n,e);let t=ve(null);try{e.call(n)}finally{ve(t),mn(5,n,e)}}function px(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[X]>>14<n[Io]>>16&&(n[X]&3)===e&&(n[X]+=16384,_E(a,o)):_E(a,o)}var bo=-1,Ei=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function gx(n){return n instanceof Ei}function mx(n){return(n.flags&8)!==0}function yx(n){return(n.flags&16)!==0}var cp={},Rp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Rl(r);let i=this.injector.get(e,cp,r);return i!==cp||t===cp?i:this.parentInjector.get(e,t,r)}};function HD(n){return n!==bo}function dl(n){return n&32767}function vx(n){return n>>16}function hl(n,e){let t=vx(n),r=e;for(;t>0;)r=r[Uo],t--;return r}var Mp=!0;function fl(n){let e=Mp;return Mp=n,e}var _x=256,qD=_x-1,zD=5,wx=0,yn={};function Ix(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(va)&&(r=t[va]),r==null&&(r=t[va]=wx++);let i=r&qD,o=1<<i;e.data[n+(i>>zD)]|=o}function pl(n,e){let t=GD(n,e);if(t!==-1)return t;let r=e[de];r.firstCreatePass&&(n.injectorIndex=e.length,up(r.data,n),up(e,null),up(r.blueprint,null));let i=wg(n,e),o=n.injectorIndex;if(HD(i)){let s=dl(i),a=hl(i,e),u=a[de].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function up(n,e){n.push(0,0,0,0,0,0,0,0,e)}function GD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function wg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=ZD(i),r===null)return bo;if(t++,i=i[Uo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return bo}function Np(n,e,t){Ix(n,e,t)}function Ex(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(iD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function WD(n,e,t){if(t&se.Optional||n!==void 0)return n;cg(e,"NodeInjector")}function KD(n,e,t,r){if(t&se.Optional&&r===void 0&&(r=null),!(t&(se.Self|se.Host))){let i=n[Ro],o=Nt(void 0);try{return i?i.get(e,r,t&se.Optional):JE(e,r,t&se.Optional)}finally{Nt(o)}}return WD(r,e,t)}function QD(n,e,t,r=se.Default,i){if(n!==null){if(e[X]&2048&&!(r&se.Self)){let s=Sx(n,e,t,r,yn);if(s!==yn)return s}let o=YD(n,e,t,r,yn);if(o!==yn)return o}return KD(e,t,r,i)}function YD(n,e,t,r,i){let o=bx(t);if(typeof o=="function"){if(!FD(e,n,r))return r&se.Host?WD(i,t,r):KD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&se.Optional))cg(t);else return s}finally{jD()}}else if(typeof o=="number"){let s=null,a=GD(n,e),u=bo,l=r&se.Host?e[wn][an]:null;for((a===-1||r&se.SkipSelf)&&(u=a===-1?wg(n,e):e[a+8],u===bo||!IE(r,!1)?a=-1:(s=e[de],a=dl(u),e=hl(u,e)));a!==-1;){let f=e[de];if(wE(o,a,f.data)){let p=Dx(a,e,t,s,r,l);if(p!==yn)return p}u=e[a+8],u!==bo&&IE(r,e[de].data[a+8]===l)&&wE(o,a,e)?(s=f,a=dl(u),e=hl(u,e)):a=-1}}return i}function Dx(n,e,t,r,i,o){let s=e[de],a=s.data[n+8],u=r==null?xl(a)&&Mp:r!=s&&(a.type&3)!==0,l=i&se.Host&&o===a,f=Cx(a,s,t,u,l);return f!==null?Po(e,s,f,a):yn}function Cx(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,f=o>>20,p=r?a:a+f,y=i?a+f:l;for(let w=p;w<y;w++){let S=s[w];if(w<u&&t===S||w>=u&&S.type===t)return w}if(i){let w=s[u];if(w&&Nr(w)&&w.type===t)return u}return null}function Po(n,e,t,r){let i=n[t],o=e.data;if(gx(i)){let s=i;s.resolving&&eN(XM(o[t]));let a=fl(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Nt(s.injectImpl):null,f=FD(n,r,se.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&fx(t,o[t],e)}finally{l!==null&&Nt(l),fl(a),s.resolving=!1,jD()}}return i}function bx(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(va)?n[va]:void 0;return typeof e=="number"?e>=0?e&qD:Tx:e}function wE(n,e,t){let r=1<<n;return!!(t[e+(n>>zD)]&r)}function IE(n,e){return!(n&se.Self)&&!(n&se.Host&&e)}var yi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return QD(this._tNode,this._lView,e,Rl(r),t)}};function Tx(){return new yi(vt(),Ce())}function Zn(n){return ba(()=>{let e=n.prototype.constructor,t=e[nl]||xp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[nl]||xp(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function xp(n){return GE(n)?()=>{let e=xp(Tt(n));return e&&e()}:vi(n)}function Sx(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[X]&2048&&!(s[X]&512);){let a=YD(o,s,t,r|se.Self,yn);if(a!==yn)return a;let u=o.parent;if(!u){let l=s[vD];if(l){let f=l.get(t,yn,r);if(f!==yn)return f}u=ZD(s),s=s[Uo]}o=u}return i}function ZD(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[an]:null}function Ig(n){return Ex(vt(),n)}function EE(n,e=null,t=null,r){let i=JD(n,e,t,r);return i.resolveInjectorInitializers(),i}function JD(n,e=null,t=null,r,i=new Set){let o=[t||zt,AN(n)];return r=r||(typeof n=="object"?void 0:St(n)),new Ia(o,e||fg(),r||null,i)}var st=class n{static{this.THROW_IF_NOT_FOUND=_a}static{this.NULL=new ol}static create(e,t){if(Array.isArray(e))return EE({name:""},t,e,"");{let r=e.name??"";return EE({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=q({token:n,providedIn:"any",factory:()=>ee(tD)})}static{this.__NG_ELEMENT_ID__=-1}};var Ax=new H("");Ax.__NG_ELEMENT_ID__=n=>{let e=vt();if(e===null)throw new $(204,!1);if(e.type&2)return e.value;if(n&se.Optional)return null;throw new $(204,!1)};var Rx="ngOriginalError";function lp(n){return n[Rx]}var XD=!0,Eg=(()=>{class n{static{this.__NG_ELEMENT_ID__=Mx}static{this.__NG_ENV_ID__=t=>t}}return n})(),Pp=class extends Eg{constructor(e){super(),this._lView=e}onDestroy(e){return RD(this._lView,e),()=>KN(this._lView,e)}};function Mx(){return new Pp(Ce())}var Bo=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new je(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Op=class extends Xe{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,yD()&&(this.destroyRef=x(Eg,{optional:!0})??void 0,this.pendingTasks=x(Bo,{optional:!0})??void 0)}emit(e){let t=ve(null);try{super.next(e)}finally{ve(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Oe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},He=Op;function gl(...n){}function e0(n){let e,t;function r(){n=gl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function DE(n){return queueMicrotask(()=>n()),()=>{n=gl}}var Dg="isAngularZone",ml=Dg+"_ID",Nx=0,Ie=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new He(!1),this.onMicrotaskEmpty=new He(!1),this.onStable=new He(!1),this.onError=new He(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=XD}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Ox(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Dg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new $(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,xx,gl,gl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},xx={};function Cg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Px(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){e0(()=>{n.callbackScheduled=!1,kp(n),n.isCheckStableRunning=!0,Cg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),kp(n)}function Ox(n){let e=()=>{Px(n)},t=Nx++;n._inner=n._inner.fork({name:"angular",properties:{[Dg]:!0,[ml]:t,[ml+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(kx(u))return r.invokeTask(o,s,a,u);try{return CE(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),bE(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return CE(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Fx(u)&&e(),bE(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,kp(n),Cg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function kp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function CE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function bE(n){n._nesting--,Cg(n)}var Fp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new He,this.onMicrotaskEmpty=new He,this.onStable=new He,this.onError=new He}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function kx(n){return t0(n,"__ignore_ng_zone__")}function Fx(n){return t0(n,"__scheduler_tick__")}function t0(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Gn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&lp(e);for(;t&&lp(t);)t=lp(t);return t||null}},Vx=new H("",{providedIn:"root",factory:()=>{let n=x(Ie),e=x(Gn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function Lx(){return jl(vt(),Ce())}function jl(n,e){return new bn(Qt(n,e))}var bn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=Lx}}return n})();function n0(n){return(n.flags&128)===128}var r0=new Map,Ux=0;function jx(){return Ux++}function Bx(n){r0.set(n[Nl],n)}function Vp(n){r0.delete(n[Nl])}var TE="__ngContext__";function xr(n,e){Ar(e)?(n[TE]=e[Nl],Bx(e)):n[TE]=e}function i0(n){return s0(n[Ea])}function o0(n){return s0(n[on])}function s0(n){for(;n!==null&&!Yn(n);)n=n[on];return n}var Lp;function a0(n){Lp=n}function $x(){if(Lp!==void 0)return Lp;if(typeof document<"u")return document;throw new $(210,!1)}var bg=new H("",{providedIn:"root",factory:()=>Hx}),Hx="ng",Tg=new H(""),Tn=new H("",{providedIn:"platform",factory:()=>"unknown"});var Sg=new H("",{providedIn:"root",factory:()=>$x().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var qx="h",zx="b";var Gx=()=>null;function Ag(n,e,t=!1){return Gx(n,e,t)}var c0=!1,Wx=new H("",{providedIn:"root",factory:()=>c0});var Wu;function Kx(){if(Wu===void 0&&(Wu=null,yp.trustedTypes))try{Wu=yp.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Wu}function SE(n){return Kx()?.createScriptURL(n)||n}var yl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${qE})`}};function Sa(n){return n instanceof yl?n.changingThisBreaksApplicationSecurity:n}function Rg(n,e){let t=Qx(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${qE})`)}return t===e}function Qx(n){return n instanceof yl&&n.getTypeName()||null}var Yx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function u0(n){return n=String(n),n.match(Yx)?n:"unsafe:"+n}var Bl=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Bl||{});function Zx(n){let e=d0();return e?e.sanitize(Bl.URL,n)||"":Rg(n,"URL")?Sa(n):u0(Al(n))}function Jx(n){let e=d0();if(e)return SE(e.sanitize(Bl.RESOURCE_URL,n)||"");if(Rg(n,"ResourceURL"))return SE(Sa(n));throw new $(904,!1)}function Xx(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?Jx:Zx}function l0(n,e,t){return Xx(e,t)(n)}function d0(){let n=Ce();return n&&n[_n].sanitizer}var eP=/^>|^->|<!--|-->|--!>|<!-$/g,tP=/(<|>)/g,nP="\u200B$1\u200B";function rP(n){return n.replace(eP,e=>e.replace(tP,nP))}function h0(n){return n instanceof Function?n():n}function iP(n){return(n??x(st)).get(Tn)==="browser"}var Wn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Wn||{}),oP;function Mg(n,e){return oP(n,e)}function Eo(n,e,t,r,i){if(r!=null){let o,s=!1;Yn(r)?o=r:Ar(r)&&(s=!0,r=r[Qn]);let a=In(r);n===0&&t!==null?i==null?y0(e,t,a):vl(e,t,a,i||null,!0):n===1&&t!==null?vl(e,t,a,i||null,!0):n===2?IP(e,a,s):n===3&&e.destroyNode(a),o!=null&&DP(e,n,o,t,i)}}function sP(n,e){return n.createText(e)}function aP(n,e,t){n.setValue(e,t)}function cP(n,e){return n.createComment(rP(e))}function f0(n,e,t){return n.createElement(e,t)}function uP(n,e){p0(n,e),e[Qn]=null,e[an]=null}function lP(n,e,t,r,i,o){r[Qn]=i,r[an]=e,Hl(n,r,t,1,i,o)}function p0(n,e){e[_n].changeDetectionScheduler?.notify(9),Hl(n,e,e[qe],2,null,null)}function dP(n){let e=n[Ea];if(!e)return dp(n[de],n);for(;e;){let t=null;if(Ar(e))t=e[Ea];else{let r=e[Wt];r&&(t=r)}if(!t){for(;e&&!e[on]&&e!==n;)Ar(e)&&dp(e[de],e),e=e[At];e===null&&(e=n),Ar(e)&&dp(e[de],e),t=e&&e[on]}e=t}}function hP(n,e,t,r){let i=Wt+r,o=t.length;r>0&&(t[i-1][on]=e),r<o-Wt?(e[on]=t[i],eD(t,Wt+r,e)):(t.push(e),e[on]=null),e[At]=t;let s=e[Mo];s!==null&&t!==s&&g0(s,e);let a=e[No];a!==null&&a.insertView(n),Sp(e),e[X]|=128}function g0(n,e){let t=n[ul],r=e[At];if(Ar(r))n[X]|=ll.HasTransplantedViews;else{let i=r[At][wn];e[wn]!==i&&(n[X]|=ll.HasTransplantedViews)}t===null?n[ul]=[e]:t.push(e)}function Ng(n,e){let t=n[ul],r=t.indexOf(e);t.splice(r,1)}function Up(n,e){if(n.length<=Wt)return;let t=Wt+e,r=n[t];if(r){let i=r[Mo];i!==null&&i!==n&&Ng(i,r),e>0&&(n[t-1][on]=r[on]);let o=il(n,Wt+e);uP(r[de],r);let s=o[No];s!==null&&s.detachView(o[de]),r[At]=null,r[on]=null,r[X]&=-129}return r}function m0(n,e){if(!(e[X]&256)){let t=e[qe];t.destroyNode&&Hl(n,e,t,3,null,null),dP(e)}}function dp(n,e){if(e[X]&256)return;let t=ve(null);try{e[X]&=-129,e[X]|=256,e[Gt]&&Uf(e[Gt]),pP(n,e),fP(n,e),e[de].type===1&&e[qe].destroy();let r=e[Mo];if(r!==null&&Yn(e[At])){r!==e[At]&&Ng(r,e);let i=e[No];i!==null&&i.detachView(n)}Vp(e)}finally{ve(t)}}function fP(n,e){let t=n.cleanup,r=e[al];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[al]=null);let i=e[Sr];if(i!==null){e[Sr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function pP(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ei)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];mn(4,a,u);try{u.call(a)}finally{mn(5,a,u)}}else{mn(4,i,o);try{o.call(i)}finally{mn(5,i,o)}}}}}function gP(n,e,t){return mP(n,e.parent,t)}function mP(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Qn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===vn.None||o===vn.Emulated)return null}return Qt(r,t)}}function vl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function y0(n,e,t){n.appendChild(e,t)}function AE(n,e,t,r,i){r!==null?vl(n,e,t,r,i):y0(n,e,t)}function v0(n,e){return n.parentNode(e)}function yP(n,e){return n.nextSibling(e)}function vP(n,e,t){return wP(n,e,t)}function _P(n,e,t){return n.type&40?Qt(n,t):null}var wP=_P,RE;function $l(n,e,t,r){let i=gP(n,r,e),o=e[qe],s=r.parent||e[an],a=vP(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)AE(o,i,t[u],a,!1);else AE(o,i,t,a,!1);RE!==void 0&&RE(o,r,e,t,i)}function ya(n,e){if(e!==null){let t=e.type;if(t&3)return Qt(e,n);if(t&4)return jp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ya(n,r);{let i=n[e.index];return Yn(i)?jp(-1,i):In(i)}}else{if(t&128)return ya(n,e.next);if(t&32)return Mg(e,n)()||In(n[e.index]);{let r=_0(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=wi(n[wn]);return ya(i,r)}else return ya(n,e.next)}}}return null}function _0(n,e){if(e!==null){let r=n[wn][an],i=e.projection;return r.projection[i]}return null}function jp(n,e){let t=Wt+n+1;if(t<e.length){let r=e[t],i=r[de].firstChild;if(i!==null)return ya(r,i)}return e[_i]}function IP(n,e,t){n.removeChild(null,e,t)}function xg(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&xr(In(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)xg(n,e,t.child,r,i,o,!1),Eo(e,n,i,a,o);else if(u&32){let l=Mg(t,r),f;for(;f=l();)Eo(e,n,i,f,o);Eo(e,n,i,a,o)}else u&16?EP(n,e,r,t,i,o):Eo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Hl(n,e,t,r,i,o){xg(t,r,n.firstChild,e,i,o,!1)}function EP(n,e,t,r,i,o){let s=t[wn],u=s[an].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];Eo(e,n,i,f,o)}else{let l=u,f=s[At];n0(r)&&(l.flags|=128),xg(n,e,l,f,i,o,!0)}}function DP(n,e,t,r,i){let o=t[_i],s=In(t);o!==s&&Eo(e,n,r,o,i);for(let a=Wt;a<t.length;a++){let u=t[a];Hl(u[de],u,n,e,r,o)}}function CP(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Wn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Wn.Important),n.setStyle(t,r,i,o))}}function bP(n,e,t){n.setAttribute(e,"style",t)}function w0(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function I0(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Ip(n,e,r),i!==null&&w0(n,e,i),o!==null&&bP(n,e,o)}var Ti={};function ue(n=1){E0(yt(),Ce(),jo()+n,!1)}function E0(n,e,t,r){if(!r)if((e[X]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Ju(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Xu(e,o,0,t)}Ii(t)}function z(n,e=se.Default){let t=Ce();if(t===null)return ee(n,e);let r=vt();return QD(r,t,Tt(n),e)}function D0(){let n="invalid";throw new Error(n)}function C0(n,e,t,r,i,o){let s=ve(null);try{let a=null;i&Rr.SignalBased&&(a=e[r][qn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Rr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):wD(e,a,r,o)}finally{ve(s)}}function TP(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ii(~i);else{let o=i,s=t[++r],a=t[++r];ax(s,o);let u=e[o];a(2,u)}}}finally{Ii(-1)}}function ql(n,e,t,r,i,o,s,a,u,l,f){let p=e.blueprint.slice();return p[Qn]=i,p[X]=r|4|128|8|64,(l!==null||n&&n[X]&2048)&&(p[X]|=2048),SD(p),p[At]=p[Uo]=n,p[sn]=t,p[_n]=s||n&&n[_n],p[qe]=a||n&&n[qe],p[Ro]=u||n&&n[Ro]||null,p[an]=o,p[Nl]=jx(),p[sl]=f,p[vD]=l,p[wn]=e.type==2?n[wn]:p,p}function Aa(n,e,t,r,i){let o=n.data[e];if(o===null)o=SP(n,e,t,r,i),sx()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=tx();o.injectorIndex=s===null?-1:s.injectorIndex}return bi(o,!0),o}function SP(n,e,t,r,i){let o=xD(),s=mg(),a=s?o:o&&o.parent,u=n.data[e]=xP(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function b0(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function T0(n,e,t,r,i){let o=jo(),s=r&2;try{Ii(-1),s&&e.length>Kt&&E0(n,e,Kt,!1),mn(s?2:0,i),t(r,i)}finally{Ii(o),mn(s?3:1,i)}}function Pg(n,e,t){if(pg(e)){let r=ve(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{ve(r)}}}function Og(n,e,t){ND()&&(LP(n,e,t,Qt(t,e)),(t.flags&64)===64&&M0(n,e,t))}function kg(n,e,t=Qt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function S0(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Fg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Fg(n,e,t,r,i,o,s,a,u,l,f){let p=Kt+r,y=p+i,w=AP(p,y),S=typeof l=="function"?l():l;return w[de]={type:n,blueprint:w,template:t,queries:null,viewQuery:a,declTNode:e,data:w.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:f}}function AP(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ti);return t}function RP(n,e,t,r){let o=r.get(Wx,c0)||t===vn.ShadowDom,s=n.selectRootElement(e,o);return MP(s),s}function MP(n){NP(n)}var NP=()=>null;function xP(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return JN()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ME(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Rr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?NE(r,t,l,a,u):NE(r,t,l,a)}return r}function NE(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function PP(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let f=r;f<i;f++){let p=o[f],y=t?t.get(p):null,w=y?y.inputs:null,S=y?y.outputs:null;u=ME(0,p.inputs,f,u,w),l=ME(1,p.outputs,f,l,S);let M=u!==null&&s!==null&&!dg(e)?QP(u,f,s):null;a.push(M)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function OP(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function A0(n,e,t,r,i,o,s,a){let u=Qt(e,t),l=e.inputs,f;!a&&l!=null&&(f=l[r])?(Lg(n,t,f,r,i),xl(e)&&kP(t,e.index)):e.type&3?(r=OP(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function kP(n,e){let t=Vr(e,n);t[X]&16||(t[X]|=64)}function Vg(n,e,t,r){if(ND()){let i=r===null?null:{"":-1},o=jP(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&R0(n,e,t,s,i,a),i&&BP(t,r,i)}t.mergedAttrs=wa(t.mergedAttrs,t.attrs)}function R0(n,e,t,r,i,o){for(let l=0;l<r.length;l++)Np(pl(t,e),n,r[l].type);HP(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let f=r[l];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,u=b0(n,e,r.length,null);for(let l=0;l<r.length;l++){let f=r[l];t.mergedAttrs=wa(t.mergedAttrs,f.hostAttrs),qP(n,t,e,u,f),$P(u,f,i),f.contentQueries!==null&&(t.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(t.flags|=64);let p=f.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}PP(n,t,o)}function FP(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;VP(s)!=a&&s.push(a),s.push(t,r,o)}}function VP(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function LP(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;xl(t)&&zP(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||pl(t,e),xr(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Po(e,n,a,t);if(xr(l,e),s!==null&&KP(e,a-i,l,u,t,s),Nr(u)){let f=Vr(t.index,e);f[sn]=Po(e,n,a,t)}}}function M0(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=cx();try{Ii(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Ap(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&UP(u,l)}}finally{Ii(-1),Ap(s)}}function UP(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function jP(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(_N(e,s.selectors,!1))if(r||(r=[]),Nr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Bp(n,e,u)}else r.unshift(s),Bp(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Bp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function BP(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new $(-301,!1);r.push(e[i],o)}}}function $P(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Nr(e)&&(t[""]=n)}}function HP(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function qP(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=vi(i.type,!0)),s=new Ei(o,Nr(i),z);n.blueprint[r]=s,t[r]=s,FP(n,e,r,b0(n,t,i.hostVars,Ti),i)}function zP(n,e,t){let r=Qt(e,n),i=S0(t),o=n[_n].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=zl(n,ql(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function GP(n,e,t,r,i,o){let s=Qt(n,e);WP(e[qe],s,o,n.value,t,r,i)}function WP(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Al(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function KP(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],f=s[a++],p=s[a++];C0(r,t,u,l,f,p)}}function QP(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function N0(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function x0(n,e){let t=n.contentQueries;if(t!==null){let r=ve(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];kD(o),a.contentQueries(2,e[s],s)}}}finally{ve(r)}}}function zl(n,e){return n[Ea]?n[mE][on]=e:n[Ea]=e,n[mE]=e,e}function $p(n,e,t){kD(0);let r=ve(null);try{e(n,t)}finally{ve(r)}}function YP(n){return n[al]??=[]}function ZP(n){return n.cleanup??=[]}function P0(n,e){let t=n[Ro],r=t?t.get(Gn,null):null;r&&r.handleError(e)}function Lg(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],f=n.data[s];C0(f,l,r,a,u,i)}}function JP(n,e,t){let r=CD(e,n);aP(n[qe],r,t)}function XP(n,e){let t=Vr(e,n),r=t[de];eO(r,t);let i=t[Qn];i!==null&&t[sl]===null&&(t[sl]=Ag(i,t[Ro])),Ug(r,t,t[sn])}function eO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Ug(n,e,t){yg(e);try{let r=n.viewQuery;r!==null&&$p(1,r,t);let i=n.template;i!==null&&T0(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[No]?.finishViewCreation(n),n.staticContentQueries&&x0(n,e),n.staticViewQueries&&$p(2,n.viewQuery,t);let o=n.components;o!==null&&tO(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[X]&=-5,vg()}}function tO(n,e){for(let t=0;t<e.length;t++)XP(n,e[t])}function nO(n,e,t,r){let i=ve(null);try{let o=e.tView,a=n[X]&4096?4096:16,u=ql(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Mo]=l;let f=n[No];return f!==null&&(u[No]=f.createEmbeddedView(o)),Ug(o,u,t),u}finally{ve(i)}}function xE(n,e){return!e||e.firstChild===null||n0(n)}function rO(n,e,t,r=!0){let i=e[de];if(hP(i,e,n,t),r){let s=jp(t,n),a=e[qe],u=v0(a,n[_i]);u!==null&&lP(i,n[an],a,e,u,s)}let o=e[sl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function _l(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(In(o)),Yn(o)&&iO(o,r);let s=t.type;if(s&8)_l(n,e,t.child,r);else if(s&32){let a=Mg(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=_0(e,t);if(Array.isArray(a))r.push(...a);else{let u=wi(e[wn]);_l(u[de],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function iO(n,e){for(let t=Wt;t<n.length;t++){let r=n[t],i=r[de].firstChild;i!==null&&_l(r[de],r,i,e)}n[_i]!==n[Qn]&&e.push(n[_i])}var O0=[];function oO(n){return n[Gt]??sO(n)}function sO(n){let e=O0.pop()??Object.create(cO);return e.lView=n,e}function aO(n){n.lView[Gt]!==n&&(n.lView=null,O0.push(n))}var cO=ae(V({},fa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{kl(n.lView)},consumerOnSignalRead(){this.lView[Gt]=this}});function uO(n){let e=n[Gt]??Object.create(lO);return e.lView=n,e}var lO=ae(V({},fa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=wi(n.lView);for(;e&&!k0(e[de]);)e=wi(e);e&&AD(e)},consumerOnSignalRead(){this.lView[Gt]=this}});function k0(n){return n.type!==2}var dO=100;function F0(n,e=!0,t=0){let r=n[_n],i=r.rendererFactory,o=!1;o||i.begin?.();try{hO(n,t)}catch(s){throw e&&P0(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function hO(n,e){let t=OD();try{vE(!0),Hp(n,e);let r=0;for(;Ol(n);){if(r===dO)throw new $(103,!1);r++,Hp(n,1)}}finally{vE(t)}}function fO(n,e,t,r){let i=e[X];if((i&256)===256)return;let o=!1,s=!1;!o&&e[_n].inlineEffectRunner?.flush(),yg(e);let a=!0,u=null,l=null;o||(k0(n)?(l=oO(e),u=mu(l)):EI()===null?(a=!1,l=uO(e),u=mu(l)):e[Gt]&&(Uf(e[Gt]),e[Gt]=null));try{SD(e),ix(n.bindingStartIndex),t!==null&&T0(n,e,t,2,r);let f=(i&3)===3;if(!o)if(f){let w=n.preOrderCheckHooks;w!==null&&Ju(e,w,null)}else{let w=n.preOrderHooks;w!==null&&Xu(e,w,0,null),ap(e,0)}if(s||pO(e),V0(e,0),n.contentQueries!==null&&x0(n,e),!o)if(f){let w=n.contentCheckHooks;w!==null&&Ju(e,w)}else{let w=n.contentHooks;w!==null&&Xu(e,w,1),ap(e,1)}TP(n,e);let p=n.components;p!==null&&U0(e,p,0);let y=n.viewQuery;if(y!==null&&$p(2,y,r),!o)if(f){let w=n.viewCheckHooks;w!==null&&Ju(e,w)}else{let w=n.viewHooks;w!==null&&Xu(e,w,2),ap(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[sp]){for(let w of e[sp])w();e[sp]=null}o||(e[X]&=-73)}catch(f){throw o||kl(e),f}finally{l!==null&&(Vf(l,u),a&&aO(l)),vg()}}function V0(n,e){for(let t=i0(n);t!==null;t=o0(t))for(let r=Wt;r<t.length;r++){let i=t[r];L0(i,e)}}function pO(n){for(let e=i0(n);e!==null;e=o0(e)){if(!(e[X]&ll.HasTransplantedViews))continue;let t=e[ul];for(let r=0;r<t.length;r++){let i=t[r];AD(i)}}}function gO(n,e,t){let r=Vr(e,n);L0(r,t)}function L0(n,e){gg(n)&&Hp(n,e)}function Hp(n,e){let r=n[de],i=n[X],o=n[Gt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Lf(o)),s||=!1,o&&(o.dirty=!1),n[X]&=-9217,s)fO(r,n,r.template,n[sn]);else if(i&8192){V0(n,1);let a=r.components;a!==null&&U0(n,a,1)}}function U0(n,e,t){for(let r=0;r<e.length;r++)gO(n,e[r],t)}function jg(n,e){let t=OD()?64:1088;for(n[_n].changeDetectionScheduler?.notify(e);n;){n[X]|=t;let r=wi(n);if(bp(n)&&!r)return n;n=r}return null}var Di=class{get rootNodes(){let e=this._lView,t=e[de];return _l(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[sn]}set context(e){this._lView[sn]=e}get destroyed(){return(this._lView[X]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[At];if(Yn(e)){let t=e[cl],r=t?t.indexOf(this):-1;r>-1&&(Up(e,r),il(t,r))}this._attachedToViewContainer=!1}m0(this._lView[de],this._lView)}onDestroy(e){RD(this._lView,e)}markForCheck(){jg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[X]&=-129}reattach(){Sp(this._lView),this._lView[X]|=128}detectChanges(){this._lView[X]|=1024,F0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=bp(this._lView),t=this._lView[Mo];t!==null&&!e&&Ng(t,this._lView),p0(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let t=bp(this._lView),r=this._lView[Mo];r!==null&&!t&&g0(r,this._lView),Sp(this._lView)}},Gl=(()=>{class n{static{this.__NG_ELEMENT_ID__=vO}}return n})(),mO=Gl,yO=class extends mO{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=nO(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Di(i)}};function vO(){return j0(vt(),Ce())}function j0(n,e){return n.type&4?new yO(e,n,jl(n,e)):null}var GW=new RegExp(`^(\\d+)*(${zx}|${qx})*(.*)`);var _O=()=>null;function PE(n,e){return _O(n,e)}var Oo=class{},Wl=new H("",{providedIn:"root",factory:()=>!1});var B0=new H(""),$0=new H(""),qp=class{},wl=class{};function wO(n){let e=Error(`No component factory found for ${St(n)}.`);return e[IO]=n,e}var IO="ngComponent";var zp=class{resolveComponentFactory(e){throw wO(e)}},ko=class{static{this.NULL=new zp}},Fo=class{},Jn=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>EO()}}return n})();function EO(){let n=Ce(),e=vt(),t=Vr(e.index,n);return(Ar(t)?t:n)[qe]}var DO=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>null})}}return n})();function Il(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=sE(i,a);else if(o==2){let u=a,l=e[++s];r=sE(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var El=class extends ko{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Mr(e);return new Vo(t,this.ngModule)}};function OE(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Rr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Rr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function CO(n){let e=n.toLowerCase();return e==="svg"?qN:e==="math"?zN:null}var Vo=class extends wl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=OE(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return OE(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=DN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=ve(null);try{i=i||this.ngModule;let s=i instanceof Ut?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Rp(e,s):e,u=a.get(Fo,null);if(u===null)throw new $(407,!1);let l=a.get(DO,null),f=a.get(Oo,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:f},y=u.createRenderer(null,this.componentDef),w=this.componentDef.selectors[0][0]||"div",S=r?RP(y,r,this.componentDef.encapsulation,a):f0(y,w,CO(w)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let R=null;S!==null&&(R=Ag(S,a,!0));let L=Fg(0,null,null,1,0,null,null,null,null,null,null),G=ql(null,L,null,M,null,null,p,y,a,null,R);yg(G);let K,le,xe=null;try{let ne=this.componentDef,D,m=null;ne.findHostDirectiveDefs?(D=[],m=new Map,ne.findHostDirectiveDefs(ne,D,m),D.push(ne)):D=[ne];let _=bO(G,S);xe=TO(_,S,ne,D,G,p,y),le=bD(L,Kt),S&&RO(y,ne,S,r),t!==void 0&&MO(le,this.ngContentSelectors,t),K=AO(xe,ne,D,m,G,[NO]),Ug(L,G,null)}catch(ne){throw xe!==null&&Vp(xe),Vp(G),ne}finally{vg()}return new Gp(this.componentType,K,jl(le,G),G,le)}finally{ve(o)}}},Gp=class extends qp{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Di(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Lg(o[de],o,i,e,t),this.previousInputValues.set(e,t);let s=Vr(this._tNode.index,o);jg(s,1)}}get injector(){return new yi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function bO(n,e){let t=n[de],r=Kt;return n[r]=e,Aa(t,r,2,"#host",null)}function TO(n,e,t,r,i,o,s){let a=i[de];SO(r,n,e,s);let u=null;e!==null&&(u=Ag(e,i[Ro]));let l=o.rendererFactory.createRenderer(e,t),f=16;t.signals?f=4096:t.onPush&&(f=64);let p=ql(i,S0(t),null,f,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&Bp(a,n,r.length-1),zl(i,p),i[n.index]=p}function SO(n,e,t,r){for(let i of n)e.mergedAttrs=wa(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Il(e,e.mergedAttrs,!0),t!==null&&I0(r,t,e))}function AO(n,e,t,r,i,o){let s=vt(),a=i[de],u=Qt(s,i);R0(a,i,s,t,null,r);for(let f=0;f<t.length;f++){let p=s.directiveStart+f,y=Po(i,a,p,s);xr(y,i)}M0(a,i,s),u&&xr(u,i);let l=Po(i,a,s.directiveStart+s.componentOffset,s);if(n[sn]=i[sn]=l,o!==null)for(let f of o)f(l,e);return Pg(a,s,i),l}function RO(n,e,t,r){if(r)Ip(n,t,["ng-version","18.2.10"]);else{let{attrs:i,classes:o}=CN(e.selectors[0]);i&&Ip(n,t,i),o&&o.length>0&&w0(n,t,o.join(" "))}}function MO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function NO(){let n=vt();Ul(Ce()[de],n)}var $o=(()=>{class n{static{this.__NG_ELEMENT_ID__=xO}}return n})();function xO(){let n=vt();return OO(n,Ce())}var PO=$o,H0=class extends PO{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return jl(this._hostTNode,this._hostLView)}get injector(){return new yi(this._hostTNode,this._hostLView)}get parentInjector(){let e=wg(this._hostTNode,this._hostLView);if(HD(e)){let t=hl(e,this._hostLView),r=dl(e),i=t[de].data[r+8];return new yi(i,t)}else return new yi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=kE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Wt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=PE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,xE(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!jN(e),a;if(s)a=t;else{let S=t||{};a=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef}let u=s?e:new Vo(Mr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let M=(s?l:this.parentInjector).get(Ut,null);M&&(o=M)}let f=Mr(u.componentType??{}),p=PE(this._lContainer,f?.id??null),y=p?.firstChild??null,w=u.create(l,i,y,o);return this.insertImpl(w.hostView,a,xE(this._hostTNode,p)),w}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(GN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[At],l=new H0(u,u[an],u[At]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return rO(s,i,o,r),e.attachToViewContainerRef(),eD(hp(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=kE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Up(this._lContainer,t);r&&(il(hp(this._lContainer),t),m0(r[de],r))}detach(e){let t=this._adjustIndex(e,-1),r=Up(this._lContainer,t);return r&&il(hp(this._lContainer),t)!=null?new Di(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function kE(n){return n[cl]}function hp(n){return n[cl]||(n[cl]=[])}function OO(n,e){let t,r=e[n.index];return Yn(r)?t=r:(t=N0(r,e,null,n),e[n.index]=t,zl(e,t)),FO(t,e,n,r),new H0(t,n,e)}function kO(n,e){let t=n[qe],r=t.createComment(""),i=Qt(e,n),o=v0(t,i);return vl(t,o,r,yP(t,i),!1),r}var FO=UO,VO=()=>!1;function LO(n,e,t){return VO(n,e,t)}function UO(n,e,t,r){if(n[_i])return;let i;t.type&8?i=In(r):i=kO(e,t),n[_i]=i}var FE=new Set;function Ho(n){FE.has(n)||(FE.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function jO(n){return typeof n=="function"&&n[qn]!==void 0}function Ra(n,e){Ho("NgSignals");let t=PI(n),r=t[qn];return e?.equal&&(r.equal=e.equal),t.set=i=>jf(r,i),t.update=i=>OI(r,i),t.asReadonly=BO.bind(t),t}function BO(){let n=this[qn];if(n.readonlyFn===void 0){let e=()=>this();e[qn]=n,n.readonlyFn=e}return n.readonlyFn}function q0(n){return jO(n)&&typeof n.set=="function"}function $O(n){return Object.getPrototypeOf(n.prototype).constructor}function Yt(n){let e=$O(n.type),t=!0,r=[n];for(;e;){let i;if(Nr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Ku(n.inputs),s.inputTransforms=Ku(n.inputTransforms),s.declaredInputs=Ku(n.declaredInputs),s.outputs=Ku(n.outputs);let a=i.hostBindings;a&&WO(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&zO(n,u),l&&GO(n,l),HO(n,i),zM(n.outputs,i.outputs),Nr(i)&&i.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Yt&&(t=!1)}}e=Object.getPrototypeOf(e)}qO(r)}function HO(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function qO(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=wa(i.hostAttrs,t=wa(t,i.hostAttrs))}}function Ku(n){return n===To?{}:n===zt?[]:n}function zO(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function GO(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function WO(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Bg(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Pr=class{},Da=class{};var Wp=class extends Pr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new El(this);let o=lD(e);this._bootstrapComponents=h0(o.bootstrap),this._r3Injector=JD(e,t,[{provide:Pr,useValue:this},{provide:ko,useValue:this.componentFactoryResolver},...r],St(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Kp=class extends Da{constructor(e){super(),this.moduleType=e}create(e){return new Wp(this.moduleType,e,[])}};var Dl=class extends Pr{constructor(e){super(),this.componentFactoryResolver=new El(this),this.instance=null;let t=new Ia([...e.providers,{provide:Pr,useValue:this},{provide:ko,useValue:this.componentFactoryResolver}],e.parent||fg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Kl(n,e,t=null){return new Dl({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function z0(n){return QO(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function KO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function QO(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function YO(n,e,t){return n[e]=t}function qo(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function ZO(n){return(n.flags&32)===32}function JO(n,e,t,r,i,o,s,a,u){let l=e.consts,f=Aa(e,n,4,s||null,a||null);Vg(e,t,f,xo(l,u)),Ul(e,f);let p=f.tView=Fg(2,f,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}function XO(n,e,t,r,i,o,s,a,u,l){let f=t+Kt,p=e.firstCreatePass?JO(f,e,n,r,i,o,s,a,u):e.data[f];bi(p,!1);let y=ek(e,n,p,t);Vl()&&$l(e,n,y,p),xr(y,n);let w=N0(y,n,y,p);return n[f]=w,zl(n,w),LO(w,p,n),Pl(p)&&Og(e,n,p),u!=null&&kg(n,p,l),p}function Qe(n,e,t,r,i,o,s,a){let u=Ce(),l=yt(),f=xo(l.consts,o);return XO(u,l,n,e,t,r,i,f,s,a),Qe}var ek=tk;function tk(n,e,t,r){return Ll(!0),e[qe].createComment("")}var Do=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Do||{}),G0=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Qp=class n{constructor(){this.ngZone=x(Ie),this.scheduler=x(Oo),this.errorHandler=x(Gn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Do.EarlyRead,Do.Write,Do.MixedReadWrite,Do.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}},Yp=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function $g(n,e){!e?.injector&&UN($g);let t=e?.injector??x(st);return iP(t)?(Ho("NgAfterNextRender"),rk(n,t,e,!0)):ik}function nk(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function rk(n,e,t,r){let i=e.get(G0);i.impl??=e.get(Qp);let o=t?.phase??Do.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Eg):null,a=new Yp(i.impl,nk(n,o),r,s);return i.impl.register(a),a}var ik={destroy(){}};function Ma(n,e,t,r){let i=Ce(),o=Fl();if(qo(i,o,e)){let s=yt(),a=_g();GP(a,i,n,e,t,r)}return Ma}function ok(n,e,t,r){return qo(n,Fl(),t)?e+Al(t)+r:Ti}function Qu(n,e){return n<<17|e<<2}function Ci(n){return n>>17&32767}function sk(n){return(n&2)==2}function ak(n,e){return n&131071|e<<17}function Zp(n){return n|2}function Lo(n){return(n&131068)>>2}function fp(n,e){return n&-131069|e<<2}function ck(n){return(n&1)===1}function Jp(n){return n|1}function uk(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ci(s),u=Lo(s);n[r]=t;let l=!1,f;if(Array.isArray(t)){let p=t;f=p[1],(f===null||Ta(p,f)>0)&&(l=!0)}else f=t;if(i)if(u!==0){let y=Ci(n[a+1]);n[r+1]=Qu(y,a),y!==0&&(n[y+1]=fp(n[y+1],r)),n[a+1]=ak(n[a+1],r)}else n[r+1]=Qu(a,0),a!==0&&(n[a+1]=fp(n[a+1],r)),a=r;else n[r+1]=Qu(u,0),a===0?a=r:n[u+1]=fp(n[u+1],r),u=r;l&&(n[r+1]=Zp(n[r+1])),VE(n,f,r,!0),VE(n,f,r,!1),lk(e,f,n,r,o),s=Qu(a,u),o?e.classBindings=s:e.styleBindings=s}function lk(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Ta(o,e)>=0&&(t[r+1]=Jp(t[r+1]))}function VE(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ci(i):Lo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];dk(u,e)&&(a=!0,n[s+1]=r?Jp(l):Zp(l)),s=r?Ci(l):Lo(l)}a&&(n[t+1]=r?Zp(i):Jp(i))}function dk(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ta(n,e)>=0:!1}function Le(n,e,t){let r=Ce(),i=Fl();if(qo(r,i,e)){let o=yt(),s=_g();A0(o,s,r,n,e,r[qe],t,!1)}return Le}function LE(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Lg(n,t,o[s],s,r)}function Ql(n,e){return hk(n,e,null,!0),Ql}function hk(n,e,t,r){let i=Ce(),o=yt(),s=ox(2);if(o.firstUpdatePass&&pk(o,n,s,r),e!==Ti&&qo(i,s,e)){let a=o.data[jo()];_k(o,a,i,i[qe],n,i[s+1]=wk(e,t),r,s)}}function fk(n,e){return e>=n.expandoStartIndex}function pk(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[jo()],s=fk(n,t);Ik(o,r)&&e===null&&!s&&(e=!1),e=gk(i,o,e,r),uk(i,o,e,t,s,r)}}function gk(n,e,t,r){let i=ux(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=pp(null,n,e,t,r),t=Ca(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=pp(i,n,e,t,r),o===null){let u=mk(n,e,r);u!==void 0&&Array.isArray(u)&&(u=pp(null,n,e,u[1],r),u=Ca(u,e.attrs,r),yk(n,e,r,u))}else o=vk(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function mk(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Lo(r)!==0)return n[Ci(r)]}function yk(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ci(i)]=r}function vk(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ca(r,s,t)}return Ca(r,e.attrs,t)}function pp(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ca(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ca(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),dN(n,s,t?!0:e[++o]))}return n===void 0?null:n}function _k(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],f=ck(l)?UE(u,e,t,i,Lo(l),s):void 0;if(!Cl(f)){Cl(o)||sk(l)&&(o=UE(u,null,t,i,a,s));let p=CD(jo(),t);CP(r,s,p,i,o)}}function UE(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,y=t[i+1];y===Ti&&(y=p?zt:void 0);let w=p?ip(y,r):f===r?y:void 0;if(l&&!Cl(w)&&(w=ip(u,r)),Cl(w)&&(a=w,s))return a;let S=n[i+1];i=s?Ci(S):Lo(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=ip(u,r))}return a}function Cl(n){return n!==void 0}function wk(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=St(Sa(n)))),n}function Ik(n,e){return(n.flags&(e?8:16))!==0}function Ek(n,e,t,r,i,o){let s=e.consts,a=xo(s,i),u=Aa(e,n,2,r,a);return Vg(e,t,u,xo(s,o)),u.attrs!==null&&Il(u,u.attrs,!1),u.mergedAttrs!==null&&Il(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function k(n,e,t,r){let i=Ce(),o=yt(),s=Kt+n,a=i[qe],u=o.firstCreatePass?Ek(s,o,i,e,t,r):o.data[s],l=Dk(o,i,u,a,e,n);i[s]=l;let f=Pl(u);return bi(u,!0),I0(a,l,u),!ZO(u)&&Vl()&&$l(o,i,l,u),QN()===0&&xr(l,i),YN(),f&&(Og(o,i,u),Pg(o,u,i)),r!==null&&kg(i,u),k}function P(){let n=vt();mg()?PD():(n=n.parent,bi(n,!1));let e=n;XN(e)&&ex(),ZN();let t=yt();return t.firstCreatePass&&(Ul(t,n),pg(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&mx(e)&&LE(t,e,Ce(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&yx(e)&&LE(t,e,Ce(),e.stylesWithoutHost,!1),P}function Zt(n,e,t,r){return k(n,e,t,r),P(),Zt}var Dk=(n,e,t,r,i,o)=>(Ll(!0),f0(r,i,hx()));function Ck(n,e,t,r,i){let o=e.consts,s=xo(o,r),a=Aa(e,n,8,"ng-container",s);s!==null&&Il(a,s,!0);let u=xo(o,i);return Vg(e,t,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function Yl(n,e,t){let r=Ce(),i=yt(),o=n+Kt,s=i.firstCreatePass?Ck(o,i,r,e,t):i.data[o];bi(s,!0);let a=bk(i,r,s,n);return r[o]=a,Vl()&&$l(i,r,a,s),xr(a,r),Pl(s)&&(Og(i,r,s),Pg(i,s,r)),t!=null&&kg(r,s),Yl}function Zl(){let n=vt(),e=yt();return mg()?PD():(n=n.parent,bi(n,!1)),e.firstCreatePass&&(Ul(e,n),pg(n)&&e.queries.elementEnd(n)),Zl}var bk=(n,e,t,r)=>(Ll(!0),cP(e[qe],""));function Sn(){return Ce()}var bl="en-US";var Tk=bl;function Sk(n){typeof n=="string"&&(Tk=n.toLowerCase().replace(/_/g,"-"))}var Ak=(n,e,t)=>{};function Ue(n,e,t,r){let i=Ce(),o=yt(),s=vt();return W0(o,i,i[qe],s,n,e,r),Ue}function Rk(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[al],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function W0(n,e,t,r,i,o,s){let a=Pl(r),l=n.firstCreatePass&&ZP(n),f=e[sn],p=YP(e),y=!0;if(r.type&3||s){let M=Qt(r,e),R=s?s(M):M,L=p.length,G=s?le=>s(In(le[r.index])):r.index,K=null;if(!s&&a&&(K=Rk(n,e,i,r.index)),K!==null){let le=K.__ngLastListenerFn__||K;le.__ngNextListenerFn__=o,K.__ngLastListenerFn__=o,y=!1}else{o=BE(r,e,f,o),Ak(M,i,o);let le=t.listen(R,i,o);p.push(o,le),l&&l.push(i,G,L,L+1)}}else o=BE(r,e,f,o);let w=r.outputs,S;if(y&&w!==null&&(S=w[i])){let M=S.length;if(M)for(let R=0;R<M;R+=2){let L=S[R],G=S[R+1],xe=e[L][G].subscribe(o),ne=p.length;p.push(o,xe),l&&l.push(i,r.index,ne,-(ne+1))}}}function jE(n,e,t,r){let i=ve(null);try{return mn(6,e,t),t(r)!==!1}catch(o){return P0(n,o),!1}finally{mn(7,e,t),ve(i)}}function BE(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?Vr(n.index,e):e;jg(s,5);let a=jE(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=jE(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function zo(n=1){return dx(n)}function Mk(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function _t(n){let e=nx();return TD(e,Kt+n)}function U(n,e=""){let t=Ce(),r=yt(),i=n+Kt,o=r.firstCreatePass?Aa(r,i,1,e,null):r.data[i],s=Nk(r,t,o,e,n);t[i]=s,Vl()&&$l(r,t,s,o),bi(o,!1)}var Nk=(n,e,t,r,i)=>(Ll(!0),sP(e[qe],r));function Hg(n){return Si("",n,""),Hg}function Si(n,e,t){let r=Ce(),i=ok(r,n,e,t);return i!==Ti&&JP(r,jo(),i),Si}function at(n,e,t){q0(e)&&(e=e());let r=Ce(),i=Fl();if(qo(r,i,e)){let o=yt(),s=_g();A0(o,s,r,n,e,r[qe],t,!1)}return at}function wt(n,e){let t=q0(n);return t&&n.set(e),t}function ct(n,e){let t=Ce(),r=yt(),i=vt();return W0(r,t,t[qe],i,n,e),ct}function xk(n,e,t){let r=yt();if(r.firstCreatePass){let i=Nr(n);Xp(t,r.data,r.blueprint,i,!0),Xp(e,r.data,r.blueprint,i,!1)}}function Xp(n,e,t,r,i){if(n=Tt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Xp(n[o],e,t,r,i);else{let o=yt(),s=Ce(),a=vt(),u=Ao(n)?n:Tt(n.provide),l=mD(n),f=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(Ao(n)||!n.multi){let w=new Ei(l,i,z),S=mp(u,e,i?f:f+y,p);S===-1?(Np(pl(a,s),o,u),gp(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(w),s.push(w)):(t[S]=w,s[S]=w)}else{let w=mp(u,e,f+y,p),S=mp(u,e,f,f+y),M=w>=0&&t[w],R=S>=0&&t[S];if(i&&!R||!i&&!M){Np(pl(a,s),o,u);let L=kk(i?Ok:Pk,t.length,i,r,l);!i&&R&&(t[S].providerFactory=L),gp(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(L),s.push(L)}else{let L=K0(t[i?S:w],l,!i&&r);gp(o,n,w>-1?w:S,L)}!i&&r&&R&&t[S].componentProviders++}}}function gp(n,e,t,r){let i=Ao(e),o=xN(e);if(i||o){let u=(o?Tt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let f=l.indexOf(t);f===-1?l.push(t,[r,u]):l[f+1].push(r,u)}else l.push(t,u)}}}function K0(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function mp(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Pk(n,e,t,r){return eg(this.multi,[])}function Ok(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Po(t,t[de],this.providerFactory.index,r);o=a.slice(0,s),eg(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],eg(i,o);return o}function eg(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function kk(n,e,t,r,i){let o=new Ei(n,t,z);return o.multi=[],o.index=e,o.componentProviders=0,K0(o,i,r&&!t),o}function Lr(n,e=[]){return t=>{t.providersResolver=(r,i)=>xk(r,i?i(n):n,e)}}var Fk=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=fD(!1,t.type),i=r.length>0?Kl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(ee(Ut))})}}return n})();function tt(n){Ho("NgStandalone"),n.getStandaloneInjector=e=>e.get(Fk).getOrCreateStandaloneInjector(n)}function Vk(n,e){let t=n[e];return t===Ti?void 0:t}function Lk(n,e,t,r,i,o){let s=e+t;return qo(n,s,i)?YO(n,s+1,o?r.call(o,i):r(i)):Vk(n,s+1)}function Na(n,e){let t=yt(),r,i=n+Kt;t.firstCreatePass?(r=Uk(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=vi(r.type,!0)),s,a=Nt(z);try{let u=fl(!1),l=o();return fl(u),Mk(t,Ce(),i,l),l}finally{Nt(a)}}function Uk(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function xa(n,e,t){let r=n+Kt,i=Ce(),o=TD(i,r);return jk(i,r)?Lk(i,rx(),e,o.transform,t,o):o.transform(t)}function jk(n,e){return n[de].data[e].pure}function Q0(n,e){return j0(n,e)}var Kn=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Y0=new Kn("18.2.10");var Jl=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Z0=new H("");function Ur(n){return!!n&&typeof n.then=="function"}function qg(n){return!!n&&typeof n.subscribe=="function"}var Xl=new H(""),J0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=x(Xl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Ur(o))t.push(o);else if(qg(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ed=new H("");function Bk(){xI(()=>{throw new $(600,!1)})}function $k(n){return n.isBoundToModule}var Hk=10;function qk(n,e,t){try{let r=t();return Ur(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Ai=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=x(Vx),this.afterRenderManager=x(G0),this.zonelessEnabled=x(Wl),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Xe,this.afterTick=new Xe,this.componentTypes=[],this.components=[],this.isStable=x(Bo).hasPendingTasks.pipe(J(t=>!t)),this._injector=x(Ut)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof wl;if(!this._injector.get(J0).done){let y=!i&&uD(t),w=!1;throw new $(405,w)}let s;i?s=t:s=this._injector.get(ko).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=$k(s)?void 0:this._injector.get(Pr),u=r||s.selector,l=s.create(st.NULL,[],u,a),f=l.location.nativeElement,p=l.injector.get(Z0,null);return p?.registerApplication(f),l.onDestroy(()=>{this.detachView(l.hostView),el(this.components,l),p?.unregisterApplication(f)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new $(101,!1);let t=ve(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,ve(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Fo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<Hk;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)zk(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ol(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;el(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(ed,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>el(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new $(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function el(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function zk(n,e,t,r){if(!t&&!Ol(n))return;F0(n,e,t&&!r?0:1)}var tg=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},td=(()=>{class n{compileModuleSync(t){return new Kp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=lD(t),o=h0(i.declarations).reduce((s,a)=>{let u=Mr(a);return u&&s.push(new Vo(u)),s},[]);return new tg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Gk=(()=>{class n{constructor(){this.zone=x(Ie),this.changeDetectionScheduler=x(Oo),this.applicationRef=x(Ai)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Wk=new H("",{factory:()=>!1});function X0({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ie(ae(V({},tC()),{scheduleInRootZone:t})),[{provide:Ie,useFactory:n},{provide:So,multi:!0,useFactory:()=>{let r=x(Gk,{optional:!0});return()=>r.initialize()}},{provide:So,multi:!0,useFactory:()=>{let r=x(Kk);return()=>{r.initialize()}}},e===!0?{provide:B0,useValue:!0}:[],{provide:$0,useValue:t??XD}]}function eC(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=X0({ngZoneFactory:()=>{let i=tC(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Ho("NgZone_CoalesceEvent"),new Ie(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Dn([{provide:Wk,useValue:!0},{provide:Wl,useValue:!1},r])}function tC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Kk=(()=>{class n{constructor(){this.subscription=new Oe,this.initialized=!1,this.zone=x(Ie),this.pendingTasks=x(Bo)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ie.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ie.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Qk=(()=>{class n{constructor(){this.appRef=x(Ai),this.taskService=x(Bo),this.ngZone=x(Ie),this.zonelessEnabled=x(Wl),this.disableScheduling=x(B0,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Oe,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ml):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x($0,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Fp||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?DE:e0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ml+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,DE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Yk(){return typeof $localize<"u"&&$localize.locale||bl}var zg=new H("",{providedIn:"root",factory:()=>x(zg,se.Optional|se.SkipSelf)||Yk()});var ng=new H("");function Yu(n){return!n.moduleRef}function Zk(n){let e=Yu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ie);return t.run(()=>{Yu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Gn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Yu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(ng);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(ng);s.add(o),n.moduleRef.onDestroy(()=>{el(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return qk(r,t,()=>{let o=e.get(J0);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(zg,bl);if(Sk(s||bl),Yu(n)){let a=e.get(Ai);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return Jk(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function Jk(n,e){let t=n.injector.get(Ai);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new $(-403,!1);e.push(n)}var tl=null;function Xk(n=[],e){return st.create({name:e,providers:[{provide:Ml,useValue:"platform"},{provide:ng,useValue:new Set([()=>tl=null])},...n]})}function e1(n=[]){if(tl)return tl;let e=Xk(n);return tl=e,Bk(),t1(e),e}function t1(n){n.get(Tg,null)?.forEach(t=>t())}var jr=(()=>{class n{static{this.__NG_ELEMENT_ID__=n1}}return n})();function n1(n){return r1(vt(),Ce(),(n&16)===16)}function r1(n,e,t){if(xl(n)&&!t){let r=Vr(n.index,e);return new Di(r,r)}else if(n.type&175){let r=e[wn];return new Di(r,e)}return null}var rg=class{constructor(){}supports(e){return z0(e)}create(e){return new ig(e)}},i1=(n,e)=>e,ig=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||i1}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<$E(r,i,o)?t:r,a=$E(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,f=u-i;if(l!=f){for(let y=0;y<l;y++){let w=y<o.length?o[y]:o[y]=0,S=w+y;f<=S&&S<l&&(o[y]=w+1)}let p=s.previousIndex;o[p]=f-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!z0(e))throw new $(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,KO(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new og(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Tl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Tl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},og=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},sg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Tl=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new sg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function $E(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function HE(){return new Gg([new rg])}var Gg=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:HE})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||HE()),deps:[[n,new ug,new mt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new $(901,!1)}}return n})();function nC(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=e1(r),o=[X0({}),{provide:Oo,useExisting:Qk},...t||[]],s=new Dl({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return Zk({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Br(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Pa(n,e){Ho("NgSignals");let t=RI(n);return e?.equal&&(t[qn].equal=e.equal),t}function cn(n){let e=ve(null);try{return n()}finally{ve(e)}}function rC(n){let e=Mr(n);if(!e)return null;let t=new Vo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var cC=null;function er(){return cC}function uC(n){cC??=n}var nd=class{};var Pt=new H(""),Xg=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>x(o1),providedIn:"platform"})}}return n})(),lC=new H(""),o1=(()=>{class n extends Xg{constructor(){super(),this._doc=x(Pt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return er().getBaseHref(this._doc)}onPopState(t){let r=er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function em(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function iC(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Xn(n){return n&&n[0]!=="?"?"?"+n:n}var tr=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>x(tm),providedIn:"root"})}}return n})(),dC=new H(""),tm=(()=>{class n extends tr{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(Pt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return em(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Xn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Xn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Xn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ee(Xg),ee(dC,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hC=(()=>{class n extends tr{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=em(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Xn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Xn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ee(Xg),ee(dC,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Go=(()=>{class n{constructor(t){this._subject=new He,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=c1(iC(oC(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Xn(r))}normalize(t){return n.stripTrailingSlash(a1(this._basePath,oC(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Xn}static{this.joinWithSlash=em}static{this.stripTrailingSlash=iC}static{this.\u0275fac=function(r){return new(r||n)(ee(tr))}}static{this.\u0275prov=q({token:n,factory:()=>s1(),providedIn:"root"})}}return n})();function s1(){return new Go(ee(tr))}function a1(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function oC(n){return n.replace(/\/index.html$/,"")}function c1(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function fC(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Wg=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},pC=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Wg(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),sC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);sC(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(z($o),z(Gl),z(Gg))}}static{this.\u0275dir=ke({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function sC(n,e){n.context.$implicit=e.item}var Wo=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Kg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){aC("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){aC("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(z($o),z(Gl))}}static{this.\u0275dir=ke({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Kg=class{constructor(){this.$implicit=null,this.ngIf=null}};function aC(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${St(e)}'.`)}function u1(n,e){return new $(2100,!1)}var Qg=class{createSubscription(e,t){return cn(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){cn(()=>e.unsubscribe())}},Yg=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},l1=new Yg,d1=new Qg,id=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Ur(t))return l1;if(qg(t))return d1;throw u1(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(z(jr,16))}}static{this.\u0275pipe=sD({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var un=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=kr({type:n})}static{this.\u0275inj=Or({})}}return n})(),nm="browser",h1="server";function f1(n){return n===nm}function rm(n){return n===h1}var gC=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>f1(x(Tn))?new Zg(x(Pt),window):new Jg})}}return n})(),Zg=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=p1(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function p1(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Jg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},rd=class{};var sm=class extends nd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},am=class n extends sm{static makeCurrent(){uC(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=g1();return t==null?null:m1(t)}resetBaseElement(){ka=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fC(document.cookie,e)}},ka=null;function g1(){return ka=ka||document.querySelector("base"),ka?ka.getAttribute("href"):null}function m1(n){return new URL(n,document.baseURI).pathname}var y1=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),cm=new H(""),_C=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(ee(cm),ee(Ie))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),od=class{constructor(e){this._doc=e}},im="ng-app-id",wC=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=rm(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${im}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(im),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(im,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(ee(Pt),ee(bg),ee(Sg,8),ee(Tn))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),om={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},lm=/%COMP%/g,IC="%COMP%",v1=`_nghost-${IC}`,_1=`_ngcontent-${IC}`,w1=!0,I1=new H("",{providedIn:"root",factory:()=>w1});function E1(n){return _1.replace(lm,n)}function D1(n){return v1.replace(lm,n)}function EC(n,e){return e.map(t=>t.replace(lm,n))}var mC=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=rm(a),this.defaultRenderer=new Fa(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===vn.ShadowDom&&(r=ae(V({},r),{encapsulation:vn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof sd?i.applyToHost(t):i instanceof Va&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case vn.Emulated:o=new sd(u,l,r,this.appId,f,s,a,p);break;case vn.ShadowDom:return new um(u,l,t,r,s,a,this.nonce,p);default:o=new Va(u,l,r,f,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(ee(_C),ee(wC),ee(bg),ee(I1),ee(Pt),ee(Tn),ee(Ie),ee(Sg))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Fa=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(om[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(yC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(yC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=om[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=om[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Wn.DashCase|Wn.Important)?e.style.setProperty(t,r,i&Wn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Wn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=er().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function yC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var um=class extends Fa{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=EC(i.id,i.styles);for(let f of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=f,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Va=class extends Fa{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?EC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},sd=class extends Va{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=E1(l),this.hostAttr=D1(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},C1=(()=>{class n extends od{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(ee(Pt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),vC=["alt","control","meta","shift"],b1={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},T1={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},S1=(()=>{class n extends od{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>er().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),vC.forEach(l=>{let f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=b1[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),vC.forEach(s=>{if(s!==i){let a=T1[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(ee(Pt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function DC(n,e){return nC(V({rootComponent:n},A1(e)))}function A1(n){return{appProviders:[...P1,...n?.providers??[]],platformProviders:x1}}function R1(){am.makeCurrent()}function M1(){return new Gn}function N1(){return a0(document),document}var x1=[{provide:Tn,useValue:nm},{provide:Tg,useValue:R1,multi:!0},{provide:Pt,useFactory:N1,deps:[]}];var P1=[{provide:Ml,useValue:"root"},{provide:Gn,useFactory:M1,deps:[]},{provide:cm,useClass:C1,multi:!0,deps:[Pt,Ie,Tn]},{provide:cm,useClass:S1,multi:!0,deps:[Pt]},mC,wC,_C,{provide:Fo,useExisting:mC},{provide:rd,useClass:y1,deps:[]},[]];var CC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(ee(Pt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oe="primary",Ja=Symbol("RouteTitle"),gm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Xo(n){return new gm(n)}function k1(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function F1(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!An(n[t],e[t]))return!1;return!0}function An(n,e){let t=n?mm(n):void 0,r=e?mm(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!kC(n[i],e[i]))return!1;return!0}function mm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function kC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function FC(n){return n.length>0?n[n.length-1]:null}function qr(n){return Xf(n)?n:Ur(n)?Me(Promise.resolve(n)):Q(n)}var V1={exact:LC,subset:UC},VC={exact:L1,subset:U1,ignored:()=>!0};function bC(n,e,t){return V1[t.paths](n.root,e.root,t.matrixParams)&&VC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function L1(n,e){return An(n,e)}function LC(n,e,t){if(!Mi(n.segments,e.segments)||!ud(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!LC(n.children[r],e.children[r],t))return!1;return!0}function U1(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>kC(n[t],e[t]))}function UC(n,e,t){return jC(n,e,e.segments,t)}function jC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Mi(i,t)||e.hasChildren()||!ud(i,t,r))}else if(n.segments.length===t.length){if(!Mi(n.segments,t)||!ud(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!UC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Mi(n.segments,i)||!ud(n.segments,i,r)||!n.children[oe]?!1:jC(n.children[oe],e,o,r)}}function ud(n,e,t){return e.every((r,i)=>VC[t](n[i].parameters,r.parameters))}var rr=class{constructor(e=new Ee([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Xo(this.queryParams),this._queryParamMap}toString(){return $1.serialize(this)}},Ee=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ld(this)}},Ri=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Xo(this.parameters),this._parameterMap}toString(){return $C(this)}};function j1(n,e){return Mi(n,e)&&n.every((t,r)=>An(t.parameters,e[r].parameters))}function Mi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function B1(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(t=t.concat(e(i,r)))}),t}var Xa=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new es,providedIn:"root"})}}return n})(),es=class{parse(e){let t=new vm(e);return new rr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${La(e.root,!0)}`,r=z1(e.queryParams),i=typeof e.fragment=="string"?`#${H1(e.fragment)}`:"";return`${t}${r}${i}`}},$1=new es;function ld(n){return n.segments.map(e=>$C(e)).join("/")}function La(n,e){if(!n.hasChildren())return ld(n);if(e){let t=n.children[oe]?La(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${La(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=B1(n,(r,i)=>i===oe?[La(n.children[oe],!1)]:[`${i}:${La(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${ld(n)}/${t[0]}`:`${ld(n)}/(${t.join("//")})`}}function BC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ad(n){return BC(n).replace(/%3B/gi,";")}function H1(n){return encodeURI(n)}function ym(n){return BC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dd(n){return decodeURIComponent(n)}function TC(n){return dd(n.replace(/\+/g,"%20"))}function $C(n){return`${ym(n.path)}${q1(n.parameters)}`}function q1(n){return Object.entries(n).map(([e,t])=>`;${ym(e)}=${ym(t)}`).join("")}function z1(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ad(t)}=${ad(i)}`).join("&"):`${ad(t)}=${ad(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var G1=/^[^\/()?;#]+/;function dm(n){let e=n.match(G1);return e?e[0]:""}var W1=/^[^\/()?;=#]+/;function K1(n){let e=n.match(W1);return e?e[0]:""}var Q1=/^[^=?&#]+/;function Y1(n){let e=n.match(Q1);return e?e[0]:""}var Z1=/^[^&#]+/;function J1(n){let e=n.match(Z1);return e?e[0]:""}var vm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[oe]=new Ee(e,t)),r}parseSegment(){let e=dm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new Ri(dd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=K1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=dm(this.remaining);i&&(r=i,this.capture(r))}e[dd(t)]=dd(r)}parseQueryParam(e){let t=Y1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=J1(this.remaining);s&&(r=s,this.capture(r))}let i=TC(t),o=TC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=dm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[oe]:new Ee([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function HC(n){return n.segments.length>0?new Ee([],{[oe]:n}):n}function qC(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=qC(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ee(n.segments,e);return X1(t)}function X1(n){if(n.numberOfChildren===1&&n.children[oe]){let e=n.children[oe];return new Ee(n.segments.concat(e.segments),e.children)}return n}function Ni(n){return n instanceof rr}function eF(n,e,t=null,r=null){let i=zC(n);return GC(i,e,t,r)}function zC(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Ee(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=HC(r);return e??i}function GC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return hm(i,i,i,t,r);let o=tF(e);if(o.toRoot())return hm(i,i,new Ee([],{}),t,r);let s=nF(o,i,n),a=s.processChildren?Ba(s.segmentGroup,s.index,o.commands):KC(s.segmentGroup,s.index,o.commands);return hm(i,s.segmentGroup,a,t,r)}function hd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function qa(n){return typeof n=="object"&&n!=null&&n.outlets}function hm(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`});let s;n===e?s=t:s=WC(n,e,t);let a=HC(qC(s));return new rr(a,o,i)}function WC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=WC(o,e,t)}),new Ee(n.segments,r)}var fd=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&hd(r[0]))throw new $(4003,!1);let i=r.find(qa);if(i&&i!==FC(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function tF(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new fd(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new fd(t,e,r)}var Yo=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function nF(n,e,t){if(n.isAbsolute)return new Yo(e,!0,0);if(!t)return new Yo(e,!1,NaN);if(t.parent===null)return new Yo(t,!0,0);let r=hd(n.commands[0])?0:1,i=t.segments.length-1+r;return rF(t,i,n.numberOfDoubleDots)}function rF(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new Yo(r,!1,i-o)}function iF(n){return qa(n[0])?n[0].outlets:{[oe]:n}}function KC(n,e,t){if(n??=new Ee([],{}),n.segments.length===0&&n.hasChildren())return Ba(n,e,t);let r=oF(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ee(n.segments.slice(0,r.pathIndex),{});return o.children[oe]=new Ee(n.segments.slice(r.pathIndex),n.children),Ba(o,0,i)}else return r.match&&i.length===0?new Ee(n.segments,{}):r.match&&!n.hasChildren()?_m(n,e,t):r.match?Ba(n,0,i):_m(n,e,t)}function Ba(n,e,t){if(t.length===0)return new Ee(n.segments,{});{let r=iF(t),i={};if(Object.keys(r).some(o=>o!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let o=Ba(n.children[oe],e,t);return new Ee(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=KC(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ee(n.segments,i)}}function oF(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(qa(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!AC(u,l,s))return o;r+=2}else{if(!AC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function _m(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(qa(o)){let u=sF(o.outlets);return new Ee(r,u)}if(i===0&&hd(t[0])){let u=n.segments[e];r.push(new Ri(u.path,SC(t[0]))),i++;continue}let s=qa(o)?o.outlets[oe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&hd(a)?(r.push(new Ri(s,SC(a))),i+=2):(r.push(new Ri(s,{})),i++)}return new Ee(r,{})}function sF(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=_m(new Ee([],{}),0,r))}),e}function SC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function AC(n,e,t){return n==t.path&&An(e,t.parameters)}var $a="imperative",nt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(nt||{}),Jt=class{constructor(e,t){this.id=e,this.url=t}},ts=class extends Jt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=nt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Rn=class extends Jt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=nt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Bt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Bt||{}),pd=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(pd||{}),nr=class extends Jt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=nt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},$r=class extends Jt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=nt.NavigationSkipped}},za=class extends Jt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=nt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},gd=class extends Jt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=nt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wm=class extends Jt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=nt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Im=class extends Jt{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=nt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Em=class extends Jt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=nt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dm=class extends Jt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=nt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cm=class{constructor(e){this.route=e,this.type=nt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},bm=class{constructor(e){this.route=e,this.type=nt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Tm=class{constructor(e){this.snapshot=e,this.type=nt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sm=class{constructor(e){this.snapshot=e,this.type=nt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Am=class{constructor(e){this.snapshot=e,this.type=nt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rm=class{constructor(e){this.snapshot=e,this.type=nt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},md=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=nt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ga=class{},ns=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function aF(n,e){return n.providers&&!n._injector&&(n._injector=Kl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ln(n){return n.outlet||oe}function cF(n,e){let t=n.filter(r=>ln(r)===e);return t.push(...n.filter(r=>ln(r)!==e)),t}function ec(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Mm=class{get injector(){return ec(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new tc(this.rootInjector),this.attachRef=null}},tc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Mm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(ee(Ut))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Nm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Nm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=xm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return xm(e,this._root).map(t=>t.value)}};function Nm(n,e){if(n===e.value)return e;for(let t of e.children){let r=Nm(n,t);if(r)return r}return null}function xm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=xm(n,t);if(r.length)return r.unshift(e),r}return[]}var jt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Qo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var vd=class extends yd{constructor(e,t){super(e),this.snapshot=t,Bm(this,e)}toString(){return this.snapshot.toString()}};function QC(n){let e=uF(n),t=new je([new Ri("",{})]),r=new je({}),i=new je({}),o=new je({}),s=new je(""),a=new Hr(t,r,o,s,i,oe,n,e.root);return a.snapshot=e.root,new vd(new jt(a,[]),e)}function uF(n){let e={},t={},r={},i="",o=new Zo([],e,r,i,t,oe,n,null,{});return new wd("",new jt(o,[]))}var Hr=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(J(l=>l[Ja]))??Q(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(e=>Xo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(e=>Xo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function _d(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&ZC(i)&&(r.resolve[Ja]=i.title),r}var Zo=class{get title(){return this.data?.[Ja]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Xo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Xo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},wd=class extends yd{constructor(e,t){super(t),this.url=e,Bm(this,t)}toString(){return YC(this._root)}};function Bm(n,e){e.value._routerState=n,e.children.forEach(t=>Bm(n,t))}function YC(n){let e=n.children.length>0?` { ${n.children.map(YC).join(", ")} } `:"";return`${n.value}${e}`}function fm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,An(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),An(e.params,t.params)||n.paramsSubject.next(t.params),F1(e.url,t.url)||n.urlSubject.next(t.url),An(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Pm(n,e){let t=An(n.params,e.params)&&j1(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Pm(n.parent,e.parent))}function ZC(n){return typeof n.title=="string"||n.title===null}var $m=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new He,this.deactivateEvents=new He,this.attachEvents=new He,this.detachEvents=new He,this.parentContexts=x(tc),this.location=x($o),this.changeDetector=x(jr),this.inputBinder=x(Cd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Om(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ke({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Fr]})}}return n})(),Om=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Hr?this.route:e===tc?this.childContexts:this.parent.get(e,t)}},Cd=new H(""),RC=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=gi([r.queryParams,r.params,r.data]).pipe(Mt(([o,s,a],u)=>(a=V(V(V({},o),s),a),u===0?Q(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=rC(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function lF(n,e,t){let r=Wa(n,e._root,t?t._root:void 0);return new vd(r,e)}function Wa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=dF(n,e,t);return new jt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Wa(n,a)),s}}let r=hF(e.value),i=e.children.map(o=>Wa(n,o));return new jt(r,i)}}function dF(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Wa(n,r,i);return Wa(n,r)})}function hF(n){return new Hr(new je(n.url),new je(n.params),new je(n.queryParams),new je(n.fragment),new je(n.data),n.outlet,n.component,n)}var Ka=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},JC="ngNavigationCancelingError";function Id(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ni(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=XC(!1,Bt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function XC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[JC]=!0,t.cancellationCode=e,t}function fF(n){return eb(n)&&Ni(n.url)}function eb(n){return!!n&&n[JC]}var pF=(n,e,t,r)=>J(i=>(new km(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),km=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),fm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Qo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Qo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Qo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Qo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Rm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Sm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(fm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),fm(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ed=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Jo=class{constructor(e,t){this.component=e,this.route=t}};function gF(n,e,t){let r=n._root,i=e?e._root:null;return Ua(r,i,t,[r.value])}function mF(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function is(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!WE(n)?n:e.get(n):r}function Ua(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Qo(e);return n.children.forEach(s=>{yF(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ha(a,t.getContext(s),i)),i}function yF(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=vF(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ed(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ua(n,e,a?a.children:null,r,i):Ua(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Jo(a.outlet.component,s))}else s&&Ha(e,a,i),i.canActivateChecks.push(new Ed(r)),o.component?Ua(n,null,a?a.children:null,r,i):Ua(n,null,t,r,i);return i}function vF(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Mi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Mi(n.url,e.url)||!An(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pm(n,e)||!An(n.queryParams,e.queryParams);case"paramsChange":default:return!Pm(n,e)}}function Ha(n,e,t){let r=Qo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ha(s,e.children.getContext(o),t):Ha(s,null,t):Ha(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Jo(e.outlet.component,i)):t.canDeactivateChecks.push(new Jo(null,i)):t.canDeactivateChecks.push(new Jo(null,i))}function nc(n){return typeof n=="function"}function _F(n){return typeof n=="boolean"}function wF(n){return n&&nc(n.canLoad)}function IF(n){return n&&nc(n.canActivate)}function EF(n){return n&&nc(n.canActivateChild)}function DF(n){return n&&nc(n.canDeactivate)}function CF(n){return n&&nc(n.canMatch)}function tb(n){return n instanceof zn||n?.name==="EmptyError"}var cd=Symbol("INITIAL_VALUE");function rs(){return Mt(n=>gi(n.map(e=>e.pipe(gt(1),zu(cd)))).pipe(J(e=>{for(let t of e)if(t!==!0){if(t===cd)return cd;if(t===!1||bF(t))return t}return!0}),Lt(e=>e!==cd),gt(1)))}function bF(n){return Ni(n)||n instanceof Ka}function TF(n,e){return $e(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Q(ae(V({},t),{guardsResult:!0})):SF(s,r,i,n).pipe($e(a=>a&&_F(a)?AF(r,o,n,e):Q(a)),J(a=>ae(V({},t),{guardsResult:a})))})}function SF(n,e,t,r){return Me(n).pipe($e(i=>PF(i.component,i.route,t,e,r)),gn(i=>i!==!0,!0))}function AF(n,e,t,r){return Me(e).pipe(mi(i=>vo(MF(i.route.parent,r),RF(i.route,r),xF(n,i.path,t),NF(n,i.route,t))),gn(i=>i!==!0,!0))}function RF(n,e){return n!==null&&e&&e(new Am(n)),Q(!0)}function MF(n,e){return n!==null&&e&&e(new Tm(n)),Q(!0)}function NF(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Q(!0);let i=r.map(o=>$u(()=>{let s=ec(e)??t,a=is(o,s),u=IF(a)?a.canActivate(e,n):Cn(s,()=>a(e,n));return qr(u).pipe(gn())}));return Q(i).pipe(rs())}function xF(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>mF(s)).filter(s=>s!==null).map(s=>$u(()=>{let a=s.guards.map(u=>{let l=ec(s.node)??t,f=is(u,l),p=EF(f)?f.canActivateChild(r,n):Cn(l,()=>f(r,n));return qr(p).pipe(gn())});return Q(a).pipe(rs())}));return Q(o).pipe(rs())}function PF(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Q(!0);let s=o.map(a=>{let u=ec(e)??i,l=is(a,u),f=DF(l)?l.canDeactivate(n,e,t,r):Cn(u,()=>l(n,e,t,r));return qr(f).pipe(gn())});return Q(s).pipe(rs())}function OF(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Q(!0);let o=i.map(s=>{let a=is(s,n),u=wF(a)?a.canLoad(e,t):Cn(n,()=>a(e,t));return qr(u)});return Q(o).pipe(rs(),nb(r))}function nb(n){return Du(Ke(e=>{if(typeof e!="boolean")throw Id(n,e)}),J(e=>e===!0))}function kF(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Q(!0);let o=i.map(s=>{let a=is(s,n),u=CF(a)?a.canMatch(e,t):Cn(n,()=>a(e,t));return qr(u)});return Q(o).pipe(rs(),nb(r))}var Qa=class{constructor(e){this.segmentGroup=e||null}},Ya=class extends Error{constructor(e){super(),this.urlTree=e}};function Ko(n){return mo(new Qa(n))}function FF(n){return mo(new $(4e3,!1))}function VF(n){return mo(XC(!1,Bt.GuardRejected))}var Fm=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Q(r);if(i.numberOfChildren>1||!i.children[oe])return FF(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:f,url:p,outlet:y,params:w,data:S,title:M}=i,R=Cn(o,()=>a({params:w,data:S,queryParams:u,fragment:l,routeConfig:f,url:p,outlet:y,title:M}));if(R instanceof rr)throw new Ya(R);t=R}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Ya(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new rr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ee(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Vm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function LF(n,e,t,r,i){let o=rb(n,e,t);return o.matched?(r=aF(e,r),kF(r,e,t,i).pipe(J(s=>s===!0?o:V({},Vm)))):Q(o)}function rb(n,e,t){if(e.path==="**")return UF(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},Vm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||k1)(t,n,e);if(!i)return V({},Vm);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function UF(n){return{matched:!0,parameters:n.length>0?FC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function MC(n,e,t,r){return t.length>0&&$F(n,t,r)?{segmentGroup:new Ee(e,BF(r,new Ee(t,n.children))),slicedSegments:[]}:t.length===0&&HF(n,t,r)?{segmentGroup:new Ee(n.segments,jF(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ee(n.segments,n.children),slicedSegments:t}}function jF(n,e,t,r){let i={};for(let o of t)if(bd(n,e,o)&&!r[ln(o)]){let s=new Ee([],{});i[ln(o)]=s}return V(V({},r),i)}function BF(n,e){let t={};t[oe]=e;for(let r of n)if(r.path===""&&ln(r)!==oe){let i=new Ee([],{});t[ln(r)]=i}return t}function $F(n,e,t){return t.some(r=>bd(n,e,r)&&ln(r)!==oe)}function HF(n,e,t){return t.some(r=>bd(n,e,r))}function bd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function qF(n,e,t){return e.length===0&&!n.children[t]}var Lm=class{};function zF(n,e,t,r,i,o,s="emptyOnly"){return new Um(n,e,t,r,i,s,o).recognize()}var GF=31,Um=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Fm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=MC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(({children:t,rootSnapshot:r})=>{let i=new jt(r,t),o=new wd("",i),s=eF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Zo([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,t).pipe(J(r=>({children:r,rootSnapshot:t})),Cr(r=>{if(r instanceof Ya)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Qa?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(J(s=>s instanceof jt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Me(o).pipe(mi(s=>{let a=r.children[s],u=cF(t,s);return this.processSegmentGroup(e,u,a,s,i)}),qu((s,a)=>(s.push(...a),s)),br(null),np(),$e(s=>{if(s===null)return Ko(r);let a=ib(s);return WF(a),Q(a)}))}processSegment(e,t,r,i,o,s,a){return Me(t).pipe(mi(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Cr(l=>{if(l instanceof Qa)return Q(null);throw l}))),gn(u=>!!u),Cr(u=>{if(tb(u))return qF(r,i,o)?Q(new Lm):Ko(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return ln(r)!==s&&(s===oe||!bd(i,o,r))?Ko(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Ko(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:f,positionalParamSegments:p,remainingSegments:y}=rb(t,i,o);if(!u)return Ko(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>GF&&(this.allowRedirects=!1));let w=new Zo(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,NC(i),ln(i),i.component??i._loadedComponent??null,i,xC(i)),S=_d(w,a,this.paramsInheritanceStrategy);w.params=Object.freeze(S.params),w.data=Object.freeze(S.data);let M=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,w,e);return this.applyRedirects.lineralizeSegments(i,M).pipe($e(R=>this.processSegment(e,r,t,R.concat(y),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=LF(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Mt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Mt(({routes:l})=>{let f=r._loadedInjector??e,{parameters:p,consumedSegments:y,remainingSegments:w}=u,S=new Zo(y,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,NC(r),ln(r),r.component??r._loadedComponent??null,r,xC(r)),M=_d(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(M.params),S.data=Object.freeze(M.data);let{segmentGroup:R,slicedSegments:L}=MC(t,y,w,l);if(L.length===0&&R.hasChildren())return this.processChildren(f,l,R,S).pipe(J(K=>new jt(S,K)));if(l.length===0&&L.length===0)return Q(new jt(S,[]));let G=ln(r)===o;return this.processSegment(f,l,R,L,G?oe:o,!0,S).pipe(J(K=>new jt(S,K instanceof jt?[K]:[])))}))):Ko(t)))}getChildConfig(e,t,r){return t.children?Q({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Q({routes:t._loadedRoutes,injector:t._loadedInjector}):OF(e,t,r,this.urlSerializer).pipe($e(i=>i?this.configLoader.loadChildren(e,t).pipe(Ke(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):VF(t))):Q({routes:[],injector:e})}};function WF(n){n.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet))}function KF(n){let e=n.value.routeConfig;return e&&e.path===""}function ib(n){let e=[],t=new Set;for(let r of n){if(!KF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=ib(r.children);e.push(new jt(r.value,i))}return e.filter(r=>!t.has(r))}function NC(n){return n.data||{}}function xC(n){return n.resolve||{}}function QF(n,e,t,r,i,o){return $e(s=>zF(n,e,t,r,s.extractedUrl,i,o).pipe(J(({state:a,tree:u})=>ae(V({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function YF(n,e){return $e(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Q(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of ob(u))s.add(l);let a=0;return Me(s).pipe(mi(u=>o.has(u)?ZF(u,r,n,e):(u.data=_d(u,u.parent,n).resolve,Q(void 0))),Ke(()=>a++),_o(1),$e(u=>a===s.size?Q(t):Vt))})}function ob(n){let e=n.children.map(t=>ob(t)).flat();return[n,...e]}function ZF(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!ZC(i)&&(o[Ja]=i.title),JF(o,n,e,r).pipe(J(s=>(n._resolvedData=s,n.data=_d(n,n.parent,t).resolve,null)))}function JF(n,e,t,r){let i=mm(n);if(i.length===0)return Q({});let o={};return Me(i).pipe($e(s=>XF(n[s],e,t,r).pipe(gn(),Ke(a=>{if(a instanceof Ka)throw Id(new es,a);o[s]=a}))),_o(1),tp(o),Cr(s=>tb(s)?Vt:mo(s)))}function XF(n,e,t,r){let i=ec(e)??r,o=is(n,i),s=o.resolve?o.resolve(e,t):Cn(i,()=>o(e,t));return qr(s)}function pm(n){return Mt(e=>{let t=n(e);return t?Me(t).pipe(J(()=>e)):Q(e)})}var sb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(t){return t.data[Ja]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>x(eV),providedIn:"root"})}}return n})(),eV=(()=>{class n extends sb{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(ee(CC))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rc=new H("",{providedIn:"root",factory:()=>({})}),tV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=et({type:n,selectors:[["ng-component"]],standalone:!0,features:[tt],decls:1,vars:0,template:function(r,i){r&1&&Zt(0,"router-outlet")},dependencies:[$m],encapsulation:2})}}return n})();function Hm(n){let e=n.children&&n.children.map(Hm),t=e?ae(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==oe&&(t.component=tV),t}var Za=new H(""),qm=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=x(td)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Q(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=qr(t.loadComponent()).pipe(J(ab),Ke(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ma(()=>{this.componentLoaders.delete(t)})),i=new ho(r,()=>new Xe).pipe(lo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=nV(r,this.compiler,t,this.onLoadEndListener).pipe(ma(()=>{this.childrenLoaders.delete(r)})),s=new ho(o,()=>new Xe).pipe(lo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function nV(n,e,t,r){return qr(n.loadChildren()).pipe(J(ab),$e(i=>i instanceof Da||Array.isArray(i)?Q(i):Me(e.compileModuleAsync(i))),J(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Za,[],{optional:!0,self:!0}).flat()),{routes:s.map(Hm),injector:o}}))}function rV(n){return n&&typeof n=="object"&&"default"in n}function ab(n){return rV(n)?n.default:n}var zm=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>x(iV),providedIn:"root"})}}return n})(),iV=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),cb=new H(""),ub=new H("");function oV(n,e,t){let r=n.get(ub),i=n.get(Pt);return n.get(Ie).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),sV(n))),{onViewTransitionCreated:u}=r;return u&&Cn(n,()=>u({transition:a,from:e,to:t})),s})}function sV(n){return new Promise(e=>{$g({read:()=>setTimeout(e)},{injector:n})})}var aV=new H(""),Gm=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Xe,this.transitionAbortSubject=new Xe,this.configLoader=x(qm),this.environmentInjector=x(Ut),this.urlSerializer=x(Xa),this.rootContexts=x(tc),this.location=x(Go),this.inputBindingEnabled=x(Cd,{optional:!0})!==null,this.titleStrategy=x(sb),this.options=x(rc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=x(zm),this.createViewTransition=x(cb,{optional:!0}),this.navigationErrorHandler=x(aV,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Q(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Cm(i)),r=i=>this.events.next(new bm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ae(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new je({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:$a,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Lt(o=>o.id!==0),J(o=>ae(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Mt(o=>{let s=!1,a=!1;return Q(o).pipe(Mt(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Bt.SupersededByNewNavigation),Vt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ae(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&f!=="reload"){let p="";return this.events.next(new $r(u.id,this.urlSerializer.serialize(u.rawUrl),p,pd.IgnoredSameUrlNavigation)),u.resolve(!1),Vt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Q(u).pipe(Mt(p=>{let y=this.transitions?.getValue();return this.events.next(new ts(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),y!==this.transitions?.getValue()?Vt:Promise.resolve(p)}),QF(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ke(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ae(V({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let y=new gd(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(y)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:y,source:w,restoredState:S,extras:M}=u,R=new ts(p,this.urlSerializer.serialize(y),w,S);this.events.next(R);let L=QC(this.rootComponentType).snapshot;return this.currentTransition=o=ae(V({},u),{targetSnapshot:L,urlAfterRedirects:y,extras:ae(V({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,Q(o)}else{let p="";return this.events.next(new $r(u.id,this.urlSerializer.serialize(u.extractedUrl),p,pd.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Vt}}),Ke(u=>{let l=new wm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),J(u=>(this.currentTransition=o=ae(V({},u),{guards:gF(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),TF(this.environmentInjector,u=>this.events.next(u)),Ke(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Id(this.urlSerializer,u.guardsResult);let l=new Im(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Lt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Bt.GuardRejected),!1)),pm(u=>{if(u.guards.canActivateChecks.length)return Q(u).pipe(Ke(l=>{let f=new Em(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),Mt(l=>{let f=!1;return Q(l).pipe(YF(this.paramsInheritanceStrategy,this.environmentInjector),Ke({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(l,"",Bt.NoDataFromResolver)}}))}),Ke(l=>{let f=new Dm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}))}),pm(u=>{let l=f=>{let p=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(f.routeConfig).pipe(Ke(y=>{f.component=y}),J(()=>{})));for(let y of f.children)p.push(...l(y));return p};return gi(l(u.targetSnapshot.root)).pipe(br(null),gt(1))}),pm(()=>this.afterPreactivation()),Mt(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,f=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return f?Me(f).pipe(J(()=>o)):Q(o)}),J(u=>{let l=lF(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ae(V({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Ke(()=>{this.events.next(new Ga)}),pF(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),gt(1),Ke({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Rn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),rp(this.transitionAbortSubject.pipe(Ke(u=>{throw u}))),ma(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Bt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Cr(u=>{if(a=!0,eb(u))this.events.next(new nr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),fF(u)?this.events.next(new ns(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new za(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let f=Cn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(f instanceof Ka){let{message:p,cancellationCode:y}=Id(this.urlSerializer,f);this.events.next(new nr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,y)),this.events.next(new ns(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);o.resolve(!!p)}}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return Vt}))}))}cancelNavigationTransition(t,r,i){let o=new nr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cV(n){return n!==$a}var uV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>x(lV),providedIn:"root"})}}return n})(),jm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},lV=(()=>{class n extends jm{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Zn(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),lb=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>x(dV),providedIn:"root"})}}return n})(),dV=(()=>{class n extends lb{constructor(){super(...arguments),this.location=x(Go),this.urlSerializer=x(Xa),this.options=x(rc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=x(zm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new rr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=QC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof ts)this.stateMemento=this.createStateMemento();else if(t instanceof $r)this.rawUrlTree=r.initialUrl;else if(t instanceof gd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Ga?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof nr&&(t.code===Bt.GuardRejected||t.code===Bt.NoDataFromResolver)?this.restoreHistory(r):t instanceof za?this.restoreHistory(r,!0):t instanceof Rn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof rr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=V(V({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Zn(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ja=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ja||{});function db(n,e){n.events.pipe(Lt(t=>t instanceof Rn||t instanceof nr||t instanceof za||t instanceof $r),J(t=>t instanceof Rn||t instanceof $r?ja.COMPLETE:(t instanceof nr?t.code===Bt.Redirect||t.code===Bt.SupersededByNewNavigation:!1)?ja.REDIRECTING:ja.FAILED),Lt(t=>t!==ja.REDIRECTING),gt(1)).subscribe(()=>{e()})}function hV(n){throw n}var fV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ye=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=x(Jl),this.stateManager=x(lb),this.options=x(rc,{optional:!0})||{},this.pendingTasks=x(Bo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=x(Gm),this.urlSerializer=x(Xa),this.location=x(Go),this.urlHandlingStrategy=x(zm),this._events=new Xe,this.errorHandler=this.options.errorHandler||hV,this.navigated=!1,this.routeReuseStrategy=x(uV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=x(Za,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!x(Cd,{optional:!0}),this.eventsSubscription=new Oe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof nr&&r.code!==Bt.Redirect&&r.code!==Bt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Rn)this.navigated=!0;else if(r instanceof ns){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||cV(i.source)},s);this.scheduleNavigation(a,$a,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}mV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$a,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=V({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Hm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=zC(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return GC(p,t,f,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ni(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,$a,null,r)}navigate(t,r={skipLocationChange:!1}){return gV(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},fV):r===!1?i=V({},pV):i=r,Ni(t))return bC(this.currentUrlTree,t,i);let o=this.parseUrl(t);return bC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,y)=>{a=p,u=y});let f=this.pendingTasks.add();return db(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function gV(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new $(4008,!1)}function mV(n){return!(n instanceof Ga)&&!(n instanceof ns)}var os=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new Xe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Rn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ni(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:l0(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Ni(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(z(Ye),z(Hr),Ig("tabindex"),z(Jn),z(bn),z(tr))}}static{this.\u0275dir=ke({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Ue("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ma("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Br],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Br],replaceUrl:[2,"replaceUrl","replaceUrl",Br],routerLink:"routerLink"},standalone:!0,features:[Bg,Fr]})}}return n})();var Dd=class{};var yV=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Lt(t=>t instanceof Rn),mi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Kl(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Me(i).pipe(yo())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Q(null);let o=i.pipe($e(s=>s===null?Q(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Me([o,s]).pipe(yo())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(ee(Ye),ee(td),ee(Ut),ee(Dd),ee(qm))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hb=new H(""),vV=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ts?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Rn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof $r&&t.code===pd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof md&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new md(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){D0()}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function fb(n,...e){return Dn([{provide:Za,multi:!0,useValue:n},[],{provide:Hr,useFactory:pb,deps:[Ye]},{provide:ed,multi:!0,useFactory:gb},e.map(t=>t.\u0275providers)])}function pb(n){return n.routerState.root}function ic(n,e){return{\u0275kind:n,\u0275providers:e}}function gb(){let n=x(st);return e=>{let t=n.get(Ai);if(e!==t.components[0])return;let r=n.get(Ye),i=n.get(mb);n.get(Wm)===1&&r.initialNavigation(),n.get(yb,null,se.Optional)?.setUpPreloading(),n.get(hb,null,se.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var mb=new H("",{factory:()=>new Xe}),Wm=new H("",{providedIn:"root",factory:()=>1});function _V(){return ic(2,[{provide:Wm,useValue:0},{provide:Xl,multi:!0,deps:[st],useFactory:e=>{let t=e.get(lC,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Ye),o=e.get(mb);db(i,()=>{r(!0)}),e.get(Gm).afterPreactivation=()=>(r(!0),o.closed?Q(void 0):o),i.initialNavigation()}))}}])}function wV(){return ic(3,[{provide:Xl,multi:!0,useFactory:()=>{let e=x(Ye);return()=>{e.setUpLocationChangeListener()}}},{provide:Wm,useValue:2}])}var yb=new H("");function IV(n){return ic(0,[{provide:yb,useExisting:yV},{provide:Dd,useExisting:n}])}function EV(){return ic(8,[RC,{provide:Cd,useExisting:RC}])}function DV(n){let e=[{provide:cb,useValue:oV},{provide:ub,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return ic(9,e)}var PC=new H("ROUTER_FORROOT_GUARD"),CV=[Go,{provide:Xa,useClass:es},Ye,tc,{provide:Hr,useFactory:pb,deps:[Ye]},qm,[]],ss=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[CV,[],{provide:Za,multi:!0,useValue:t},{provide:PC,useFactory:AV,deps:[[Ye,new mt,new ug]]},{provide:rc,useValue:r||{}},r?.useHash?TV():SV(),bV(),r?.preloadingStrategy?IV(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?RV(r):[],r?.bindToComponentInputs?EV().\u0275providers:[],r?.enableViewTransitions?DV().\u0275providers:[],MV()]}}static forChild(t){return{ngModule:n,providers:[{provide:Za,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(ee(PC,8))}}static{this.\u0275mod=kr({type:n})}static{this.\u0275inj=Or({})}}return n})();function bV(){return{provide:hb,useFactory:()=>{let n=x(gC),e=x(Ie),t=x(rc),r=x(Gm),i=x(Xa);return t.scrollOffset&&n.setOffset(t.scrollOffset),new vV(i,r,n,e,t)}}}function TV(){return{provide:tr,useClass:hC}}function SV(){return{provide:tr,useClass:tm}}function AV(n){return"guarded"}function RV(n){return[n.initialNavigation==="disabled"?wV().\u0275providers:[],n.initialNavigation==="enabledBlocking"?_V().\u0275providers:[]]}var OC=new H("");function MV(){return[{provide:OC,useFactory:gb},{provide:ed,multi:!0,useExisting:OC}]}var _b=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},NV=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},wb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,f=o>>2,p=(o&3)<<4|a>>4,y=(a&15)<<2|l>>6,w=l&63;u||(w=64,s||(y=64)),r.push(t[f],t[p],t[y],t[w])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(_b(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):NV(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Ym;let y=o<<2|a>>4;if(r.push(y),l!==64){let w=a<<4&240|l>>2;if(r.push(w),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Ym=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},xV=function(n){let e=_b(n);return wb.encodeByteArray(e,!0)},oc=function(n){return xV(n).replace(/\./g,"")},Jm=function(n){try{return wb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function PV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var OV=()=>PV().__FIREBASE_DEFAULTS__,kV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},FV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Jm(n[1]);return e&&JSON.parse(e)},Sd=()=>{try{return OV()||kV()||FV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Xm=n=>{var e,t;return(t=(e=Sd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Ib=n=>{let e=Xm(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ey=()=>{var n;return(n=Sd())===null||n===void 0?void 0:n.config},ty=n=>{var e;return(e=Sd())===null||e===void 0?void 0:e[`_${n}`]};var Td=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Eb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[oc(JSON.stringify(t)),oc(JSON.stringify(s)),""].join(".")}function rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Db(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function VV(){var n;let e=(n=Sd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Cb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bb(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Tb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Sb(){let n=rt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Ab(){return!VV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ny(){try{return typeof indexedDB=="object"}catch{return!1}}function Rb(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var LV="FirebaseError",$t=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=LV,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ir.prototype.create)}},ir=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?UV(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new $t(i,a,r)}};function UV(n,e){return n.replace(jV,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var jV=/\{\$([^}]+)}/g;function Mb(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function xi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(vb(o)&&vb(s)){if(!xi(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function vb(n){return n!==null&&typeof n=="object"}function sc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function as(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function cs(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Nb(n,e){let t=new Zm(n,e);return t.subscribe.bind(t)}var Zm=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");BV(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Qm),i.error===void 0&&(i.error=Qm),i.complete===void 0&&(i.complete=Qm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function BV(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Qm(){}var l6=4*60*60*1e3;function ut(n){return n&&n._delegate?n._delegate:n}var Xt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Pi="[DEFAULT]";var ry=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Td;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HV(e))try{this.getOrInitializeService({instanceIdentifier:Pi})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Pi){return this.instances.has(e)}getOptions(e=Pi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$V(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pi){return this.component?this.component.multipleInstances?e:Pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function $V(n){return n===Pi?void 0:n}function HV(n){return n.instantiationMode==="EAGER"}var Ad=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new ry(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var qV=[],pe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(pe||{}),zV={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},GV=pe.INFO,WV={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},KV=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=WV[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},zr=class{constructor(e){this.name=e,this._logLevel=GV,this._logHandler=KV,this._userLogHandler=null,qV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}};var QV=(n,e)=>e.some(t=>n instanceof t),xb,Pb;function YV(){return xb||(xb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZV(){return Pb||(Pb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Ob=new WeakMap,oy=new WeakMap,kb=new WeakMap,iy=new WeakMap,ay=new WeakMap;function JV(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Mn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&Ob.set(t,n)}).catch(()=>{}),ay.set(e,n),e}function XV(n){if(oy.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});oy.set(n,e)}var sy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return oy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||kb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Mn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Fb(n){sy=n(sy)}function eL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Rd(this),e,...t);return kb.set(r,e.sort?e.sort():[e]),Mn(r)}:ZV().includes(n)?function(...e){return n.apply(Rd(this),e),Mn(Ob.get(this))}:function(...e){return Mn(n.apply(Rd(this),e))}}function tL(n){return typeof n=="function"?eL(n):(n instanceof IDBTransaction&&XV(n),QV(n,YV())?new Proxy(n,sy):n)}function Mn(n){if(n instanceof IDBRequest)return JV(n);if(iy.has(n))return iy.get(n);let e=tL(n);return e!==n&&(iy.set(n,e),ay.set(e,n)),e}var Rd=n=>ay.get(n);function Lb(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Mn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Mn(s.result),u.oldVersion,u.newVersion,Mn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var nL=["get","getKey","getAll","getAllKeys","count"],rL=["put","add","delete","clear"],cy=new Map;function Vb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cy.get(e))return cy.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=rL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||nL.includes(t)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return cy.set(e,o),o}Fb(n=>ae(V({},n),{get:(e,t,r)=>Vb(e,t)||n.get(e,t,r),has:(e,t)=>!!Vb(e,t)||n.has(e,t)}));var ly=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(iL(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function iL(n){let e=n.getComponent();return e?.type==="VERSION"}var dy="@firebase/app",Ub="0.10.13";var or=new zr("@firebase/app"),oL="@firebase/app-compat",sL="@firebase/analytics-compat",aL="@firebase/analytics",cL="@firebase/app-check-compat",uL="@firebase/app-check",lL="@firebase/auth",dL="@firebase/auth-compat",hL="@firebase/database",fL="@firebase/data-connect",pL="@firebase/database-compat",gL="@firebase/functions",mL="@firebase/functions-compat",yL="@firebase/installations",vL="@firebase/installations-compat",_L="@firebase/messaging",wL="@firebase/messaging-compat",IL="@firebase/performance",EL="@firebase/performance-compat",DL="@firebase/remote-config",CL="@firebase/remote-config-compat",bL="@firebase/storage",TL="@firebase/storage-compat",SL="@firebase/firestore",AL="@firebase/vertexai-preview",RL="@firebase/firestore-compat",ML="firebase",NL="10.14.1";var hy="[DEFAULT]",xL={[dy]:"fire-core",[oL]:"fire-core-compat",[aL]:"fire-analytics",[sL]:"fire-analytics-compat",[uL]:"fire-app-check",[cL]:"fire-app-check-compat",[lL]:"fire-auth",[dL]:"fire-auth-compat",[hL]:"fire-rtdb",[fL]:"fire-data-connect",[pL]:"fire-rtdb-compat",[gL]:"fire-fn",[mL]:"fire-fn-compat",[yL]:"fire-iid",[vL]:"fire-iid-compat",[_L]:"fire-fcm",[wL]:"fire-fcm-compat",[IL]:"fire-perf",[EL]:"fire-perf-compat",[DL]:"fire-rc",[CL]:"fire-rc-compat",[bL]:"fire-gcs",[TL]:"fire-gcs-compat",[SL]:"fire-fst",[RL]:"fire-fst-compat",[AL]:"fire-vertex","fire-js":"fire-js",[ML]:"fire-js-all"};var ac=new Map,PL=new Map,fy=new Map;function jb(n,e){try{n.container.addComponent(e)}catch(t){or.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Wr(n){let e=n.name;if(fy.has(e))return or.debug(`There were multiple attempts to register component ${e}.`),!1;fy.set(e,n);for(let t of ac.values())jb(t,n);for(let t of PL.values())jb(t,n);return!0}function uc(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function dn(n){return n.settings!==void 0}var OL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gr=new ir("app","Firebase",OL);var py=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gr.create("app-deleted",{appName:this._name})}};var Kr=NL;function Md(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:hy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Gr.create("bad-app-name",{appName:String(i)});if(t||(t=ey()),!t)throw Gr.create("no-options");let o=ac.get(i);if(o){if(xi(t,o.options)&&xi(r,o.config))return o;throw Gr.create("duplicate-app",{appName:i})}let s=new Ad(i);for(let u of fy.values())s.addComponent(u);let a=new py(t,r,s);return ac.set(i,a),a}function us(n=hy){let e=ac.get(n);if(!e&&n===hy&&ey())return Md();if(!e)throw Gr.create("no-app",{appName:n});return e}function Nd(){return Array.from(ac.values())}function Ze(n,e,t){var r;let i=(r=xL[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),or.warn(a.join(" "));return}Wr(new Xt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var kL="firebase-heartbeat-database",FL=1,cc="firebase-heartbeat-store",uy=null;function qb(){return uy||(uy=Lb(kL,FL,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Gr.create("idb-open",{originalErrorMessage:n.message})})),uy}function VL(n){return v(this,null,function*(){try{let t=(yield qb()).transaction(cc),r=yield t.objectStore(cc).get(zb(n));return yield t.done,r}catch(e){if(e instanceof $t)or.warn(e.message);else{let t=Gr.create("idb-get",{originalErrorMessage:e?.message});or.warn(t.message)}}})}function Bb(n,e){return v(this,null,function*(){try{let r=(yield qb()).transaction(cc,"readwrite");yield r.objectStore(cc).put(e,zb(n)),yield r.done}catch(t){if(t instanceof $t)or.warn(t.message);else{let r=Gr.create("idb-set",{originalErrorMessage:t?.message});or.warn(r.message)}}})}function zb(n){return`${n.name}!${n.options.appId}`}var LL=1024,UL=30*24*60*60*1e3,gy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new my(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=$b();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=UL}),this._storage.overwrite(this._heartbeatsCache))}catch(r){or.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=$b(),{heartbeatsToSend:r,unsentEntries:i}=jL(this._heartbeatsCache.heartbeats),o=oc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return or.warn(t),""}})}};function $b(){return new Date().toISOString().substring(0,10)}function jL(n,e=LL){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Hb(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Hb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var my=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return ny()?Rb().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield VL(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Bb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Bb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Hb(n){return oc(JSON.stringify({version:2,heartbeats:n})).length}function BL(n){Wr(new Xt("platform-logger",e=>new ly(e),"PRIVATE")),Wr(new Xt("heartbeat",e=>new gy(e),"PRIVATE")),Ze(dy,Ub,n),Ze(dy,Ub,"esm2017"),Ze("fire-js","")}BL("");var $L="firebase",HL="10.14.1";Ze($L,HL,"app");var ki=new Kn("ANGULARFIRE2_VERSION");function Pd(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var lc=(n,e)=>{let t=e?[e]:Nd(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ds=class{constructor(){return lc(qL)}},qL="app-check";function ls(){}var xd=class{zone;delegate;constructor(e,t=Zf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},yy=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ls,{},ls,ls)),t.pipe(Ke({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},hs=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new xd(Zone.current)),this.insideAngular=t.run(()=>new xd(Zone.current,Yf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ee(Ie))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Od(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function zL(n){return Od().ngZone.runOutsideAngular(()=>n())}function Oi(n){return Od().ngZone.run(()=>n())}function GL(n){return WL(Od())(n)}function WL(n){return function(t){return t=t.lift(new yy(n.ngZone)),t.pipe(Dr(n.outsideAngular),Er(n.insideAngular))}}var KL=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Oi(()=>n.apply(void 0,r))},Ht=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=Oi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ls,{},ls,ls))),r[o]=KL(r[o],t));let i=zL(()=>n.apply(this,r));if(!e)if(i instanceof he){let o=Od();return i.pipe(Dr(o.outsideAngular),Er(o.insideAngular))}else return Oi(()=>i);return i instanceof he?i.pipe(GL):i instanceof Promise?Oi(()=>new Promise((o,s)=>i.then(a=>Oi(()=>o(a)),a=>Oi(()=>s(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Oi(()=>i)};var sr=class{constructor(e){return e}},Fi=class{constructor(){return Nd()}};function QL(n){return n&&n.length===1?n[0]:new sr(us())}var vy=new H("angularfire2._apps"),YL={provide:sr,useFactory:QL,deps:[[new mt,vy]]},ZL={provide:Fi,deps:[[new mt,vy]]};function JL(n){return(e,t)=>{let r=t.get(Tn);Ze("angularfire",ki.full,"core"),Ze("angularfire",ki.full,"app"),Ze("angular",Y0.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new sr(i)}}function Gb(n,...e){return Dn([YL,ZL,{provide:vy,useFactory:JL(n),multi:!0,deps:[Ie,st,hs,...e]}])}function uT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var lT=uT,dT=new ir("auth","Firebase",uT());var jd=new zr("@firebase/auth");function XL(n,...e){jd.logLevel<=pe.WARN&&jd.warn(`Auth (${Kr}): ${n}`,...e)}function Fd(n,...e){jd.logLevel<=pe.ERROR&&jd.error(`Auth (${Kr}): ${n}`,...e)}function xn(n,...e){throw By(n,...e)}function Vi(n,...e){return By(n,...e)}function hT(n,e,t){let r=Object.assign(Object.assign({},lT()),{[e]:t});return new ir("auth","Firebase",r).create(e,{appName:n.name})}function ur(n){return hT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function By(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return dT.create(n,...e)}function Y(n,e,...t){if(!n)throw By(e,...t)}function ar(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Fd(e),new Error(e)}function Yr(n,e){n||ar(e)}function Ey(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function e2(){return Wb()==="http:"||Wb()==="https:"}function Wb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function t2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(e2()||bb()||"connection"in navigator)?navigator.onLine:!0}function n2(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Li=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yr(t>e,"Short delay should be less than long delay!"),this.isMobile=Db()||Tb()}get(){return t2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function $y(n,e){Yr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Bd=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var r2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var i2=new Li(3e4,6e4);function Zr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Jr(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){return fT(n,i,()=>v(this,null,function*(){let l={},f={};r&&(e==="GET"?f=r:l={body:JSON.stringify(r)});let p=sc(Object.assign({key:n.config.apiKey},f)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let w=Object.assign({method:e,headers:y},l);return Cb()||(w.referrerPolicy="no-referrer"),Bd.fetch()(pT(n,n.config.apiHost,t,p),w)}))})}function fT(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},r2),e);try{let i=new Dy(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw kd(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw kd(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw kd(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw kd(n,"user-disabled",s);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw hT(n,f,l);xn(n,f)}}catch(i){if(i instanceof $t)throw i;xn(n,"network-request-failed",{message:String(i)})}})}function vc(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){let l=yield Jr(n,e,t,r,i);return"mfaPendingCredential"in l&&xn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function pT(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?$y(n.config,i):`${n.config.apiScheme}://${i}`}function o2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Dy=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Vi(this.auth,"network-request-failed")),i2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function kd(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Vi(n,e,r);return i.customData._tokenResponse=t,i}function Kb(n){return n!==void 0&&n.enterprise!==void 0}var Cy=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return o2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function s2(n,e){return v(this,null,function*(){return Jr(n,"GET","/v2/recaptchaConfig",Zr(n,e))})}function a2(n,e){return v(this,null,function*(){return Jr(n,"POST","/v1/accounts:delete",e)})}function gT(n,e){return v(this,null,function*(){return Jr(n,"POST","/v1/accounts:lookup",e)})}function dc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Hy(n,e=!1){return v(this,null,function*(){let t=ut(n),r=yield t.getIdToken(e),i=qy(r);Y(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:dc(_y(i.auth_time)),issuedAtTime:dc(_y(i.iat)),expirationTime:dc(_y(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function _y(n){return Number(n)*1e3}function qy(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Fd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Jm(t);return i?JSON.parse(i):(Fd("Failed to decode base64 JWT payload"),null)}catch(i){return Fd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Qb(n){let e=qy(n);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function fc(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof $t&&c2(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function c2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var by=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var pc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=dc(this.lastLoginAt),this.creationTime=dc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function $d(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield fc(n,gT(t,{idToken:r}));Y(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?mT(o.providerUserInfo):[],a=u2(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,f=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new pc(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(n,p)})}function zy(n){return v(this,null,function*(){let e=ut(n);yield $d(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function u2(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function mT(n){return n.map(e=>{var{providerId:t}=e,r=Jf(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function l2(n,e){return v(this,null,function*(){let t=yield fT(n,{},()=>v(this,null,function*(){let r=sc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=pT(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Bd.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function d2(n,e){return v(this,null,function*(){return Jr(n,"POST","/v2/accounts:revokeToken",Zr(n,e))})}var hc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Y(e.length!==0,"internal-error");let t=Qb(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield l2(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Y(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Y(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ar("not implemented")}};function Qr(n,e){Y(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var fs=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Jf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new by(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new pc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield fc(this,this.stsTokenManager.getToken(this.auth,e));return Y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Hy(this,e)}reload(){return zy(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield $d(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(dn(this.auth.app))return Promise.reject(ur(this.auth));let e=yield this.getIdToken();return yield fc(this,a2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,f;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,w=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=t.photoURL)!==null&&s!==void 0?s:void 0,M=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,L=(l=t.createdAt)!==null&&l!==void 0?l:void 0,G=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:K,emailVerified:le,isAnonymous:xe,providerData:ne,stsTokenManager:D}=t;Y(K&&D,e,"internal-error");let m=hc.fromJSON(this.name,D);Y(typeof K=="string",e,"internal-error"),Qr(p,e.name),Qr(y,e.name),Y(typeof le=="boolean",e,"internal-error"),Y(typeof xe=="boolean",e,"internal-error"),Qr(w,e.name),Qr(S,e.name),Qr(M,e.name),Qr(R,e.name),Qr(L,e.name),Qr(G,e.name);let _=new n({uid:K,auth:e,email:y,emailVerified:le,displayName:p,isAnonymous:xe,photoURL:S,phoneNumber:w,tenantId:M,stsTokenManager:m,createdAt:L,lastLoginAt:G});return ne&&Array.isArray(ne)&&(_.providerData=ne.map(E=>Object.assign({},E))),R&&(_._redirectEventId=R),_}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new hc;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield $d(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];Y(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?mT(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new hc;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new pc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var Yb=new Map;function cr(n){Yr(n instanceof Function,"Expected a class definition");let e=Yb.get(n);return e?(Yr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Yb.set(n,e),e)}var h2=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Ty=h2;function Vd(n,e,t){return`firebase:${n}:${e}:${t}`}var Hd=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Vd(this.userKey,i.apiKey,o),this.fullPersistenceKey=Vd("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?fs._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(cr(Ty),e,r);let i=(yield Promise.all(t.map(l=>v(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||cr(Ty),s=Vd(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let f=yield l._get(s);if(f){let p=fs._fromJSON(e,f);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>v(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function Zb(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ET(e))return"Blackberry";if(DT(e))return"Webos";if(vT(e))return"Safari";if((e.includes("chrome/")||_T(e))&&!e.includes("edge/"))return"Chrome";if(IT(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function yT(n=rt()){return/firefox\//i.test(n)}function vT(n=rt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _T(n=rt()){return/crios\//i.test(n)}function wT(n=rt()){return/iemobile/i.test(n)}function IT(n=rt()){return/android/i.test(n)}function ET(n=rt()){return/blackberry/i.test(n)}function DT(n=rt()){return/webos/i.test(n)}function Gy(n=rt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function f2(n=rt()){var e;return Gy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function p2(){return Sb()&&document.documentMode===10}function CT(n=rt()){return Gy(n)||IT(n)||DT(n)||ET(n)||/windows phone/i.test(n)||wT(n)}function bT(n,e=[]){let t;switch(n){case"Browser":t=Zb(rt());break;case"Worker":t=`${Zb(rt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Kr}/${r}`}var Sy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function g2(t){return v(this,arguments,function*(n,e={}){return Jr(n,"GET","/v2/passwordPolicy",Zr(n,e))})}var m2=6,Ay=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:m2,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Ry=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qd(this),this.idTokenSubscription=new qd(this),this.beforeStateQueue=new Sy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=cr(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Hd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield gT(this,{idToken:e}),r=yield fs._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(dn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield $d(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=n2()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(dn(this.app))return Promise.reject(ur(this));let t=e?ut(e):null;return t&&Y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return dn(this.app)?Promise.reject(ur(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return dn(this.app)?Promise.reject(ur(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(cr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield g2(this),t=new Ay(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ir("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield d2(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&cr(e)||this._popupRedirectResolver;Y(t,this,"argument-error"),this.redirectPersistenceManager=yield Hd.create(this,[cr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&XL(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function ji(n){return ut(n)}var qd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Nb(t=>this.observer=t)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Zd={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function y2(n){Zd=n}function TT(n){return Zd.loadJS(n)}function v2(){return Zd.recaptchaEnterpriseScript}function _2(){return Zd.gapiScript}function ST(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var w2="recaptcha-enterprise",I2="NO_RECAPTCHA",My=class{constructor(e){this.type=w2,this.auth=ji(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(this,null,function*(){s2(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Cy(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;Kb(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(I2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&Kb(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=v2();u.length!==0&&(u+=a),TT(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Jb(n,e,t,r=!1){return v(this,null,function*(){let i=new My(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function Ny(n,e,t,r){return v(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield Jb(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>v(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield Jb(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)}))})}function Wy(n,e){let t=uc(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(xi(o,e??{}))return i;xn(i,"already-initialized")}return t.initialize({options:e})}function E2(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(cr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Ky(n,e,t){let r=ji(n);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=AT(e),{host:s,port:a}=D2(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||C2()}function AT(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function D2(n){let e=AT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:Xb(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:Xb(s)}}}function Xb(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function C2(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var gc=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ar("not implemented")}_getIdTokenResponse(e){return ar("not implemented")}_linkToIdToken(e,t){return ar("not implemented")}_getReauthenticationResolver(e){return ar("not implemented")}};function b2(n,e){return v(this,null,function*(){return Jr(n,"POST","/v1/accounts:signUp",e)})}function T2(n,e){return v(this,null,function*(){return vc(n,"POST","/v1/accounts:signInWithPassword",Zr(n,e))})}function S2(n,e){return v(this,null,function*(){return vc(n,"POST","/v1/accounts:signInWithEmailLink",Zr(n,e))})}function A2(n,e){return v(this,null,function*(){return vc(n,"POST","/v1/accounts:signInWithEmailLink",Zr(n,e))})}var mc=class n extends gc{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ny(e,t,"signInWithPassword",T2);case"emailLink":return S2(e,{email:this._email,oobCode:this._password});default:xn(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ny(e,r,"signUpPassword",b2);case"emailLink":return A2(e,{idToken:t,email:this._email,oobCode:this._password});default:xn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function wy(n,e){return v(this,null,function*(){return vc(n,"POST","/v1/accounts:signInWithIdp",Zr(n,e))})}function R2(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function M2(n){let e=as(cs(n)).link,t=e?as(cs(e)).deep_link_id:null,r=as(cs(n)).deep_link_id;return(r?as(cs(r)).link:null)||r||t||e||n}var zd=class n{constructor(e){var t,r,i,o,s,a;let u=as(cs(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=R2((i=u.mode)!==null&&i!==void 0?i:null);Y(l&&f&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=f,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=M2(e);try{return new n(t)}catch{return null}}};var RT=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return mc._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=zd.parseLink(r);return Y(i,"argument-error"),mc._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Gd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var xy=class extends Gd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function N2(n,e){return v(this,null,function*(){return vc(n,"POST","/v1/accounts:signUp",Zr(n,e))})}var ps=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield fs._fromIdTokenResponse(e,r,i),s=eT(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=eT(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function eT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Py=class n extends $t{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function MT(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Py._fromErrorAndOperation(n,o,e,r):o})}function x2(n,e,t=!1){return v(this,null,function*(){let r=yield fc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ps._forOperation(n,"link",r)})}function P2(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(dn(r.app))return Promise.reject(ur(r));let i="reauthenticate";try{let o=yield fc(n,MT(r,i,e,n),t);Y(o.idToken,r,"internal-error");let s=qy(o.idToken);Y(s,r,"internal-error");let{sub:a}=s;return Y(n.uid===a,r,"user-mismatch"),ps._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&xn(r,"user-mismatch"),o}})}function NT(n,e,t=!1){return v(this,null,function*(){if(dn(n.app))return Promise.reject(ur(n));let r="signIn",i=yield MT(n,r,e),o=yield ps._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Qy(n,e){return v(this,null,function*(){return NT(ji(n),e)})}function xT(n){return v(this,null,function*(){let e=ji(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Yy(n,e,t){return v(this,null,function*(){if(dn(n.app))return Promise.reject(ur(n));let r=ji(n),s=yield Ny(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",N2).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&xT(n),u}),a=yield ps._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function Zy(n,e,t){return dn(n.app)?Promise.reject(ur(n)):Qy(ut(n),RT.credential(e,t)).catch(r=>v(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&xT(n),r}))}function Jy(n,e,t,r){return ut(n).onIdTokenChanged(e,t,r)}function Xy(n,e,t){return ut(n).beforeAuthStateChanged(e,t)}function Jd(n,e,t,r){return ut(n).onAuthStateChanged(e,t,r)}function Xd(n){return ut(n).signOut()}var Wd="__sak";var Kd=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wd,"1"),this.storage.removeItem(Wd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var O2=1e3,k2=10,F2=(()=>{class n extends Kd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CT(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);p2()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,k2):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},O2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield wr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield wr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield wr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),PT=F2;var V2=(()=>{class n extends Kd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),ev=V2;function L2(n){return Promise.all(n.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var U2=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(f=>v(this,null,function*(){return f(r.origin,s)})),l=yield L2(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function OT(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Oy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=OT("",20);i.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(y.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Nn(){return window}function j2(n){Nn().location.href=n}function kT(){return typeof Nn().WorkerGlobalScope<"u"&&typeof Nn().importScripts=="function"}function B2(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function $2(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function H2(){return kT()?self:null}var FT="firebaseLocalStorageDb",q2=1,Qd="firebaseLocalStorage",VT="fbase_key",Ui=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function eh(n,e){return n.transaction([Qd],e?"readwrite":"readonly").objectStore(Qd)}function z2(){let n=indexedDB.deleteDatabase(FT);return new Ui(n).toPromise()}function ky(){let n=indexedDB.open(FT,q2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Qd,{keyPath:VT})}catch(i){t(i)}}),n.addEventListener("success",()=>v(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Qd)?e(r):(r.close(),yield z2(),e(yield ky()))}))})}function tT(n,e,t){return v(this,null,function*(){let r=eh(n,!0).put({[VT]:e,value:t});return new Ui(r).toPromise()})}function G2(n,e){return v(this,null,function*(){let t=eh(n,!1).get(e),r=yield new Ui(t).toPromise();return r===void 0?null:r.value})}function nT(n,e){let t=eh(n,!0).delete(e);return new Ui(t).toPromise()}var W2=800,K2=3,Q2=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield ky(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>K2)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return kT()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=U2._getInstance(H2()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield B2(),!this.activeServiceWorker)return;this.sender=new Oy(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||$2()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield ky();return yield tT(t,Wd,"1"),yield nT(t,Wd),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>tT(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>G2(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>nT(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let s=eh(o,!1).getAll();return new Ui(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),W2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),LT=Q2;var r5=ST("rcb"),i5=new Li(3e4,6e4);function Y2(n,e){return e?cr(e):(Y(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var yc=class extends gc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wy(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wy(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wy(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Z2(n){return NT(n.auth,new yc(n),n.bypassAuthState)}function J2(n){let{auth:e,user:t}=n;return Y(t,e,"internal-error"),P2(t,new yc(n),n.bypassAuthState)}function X2(n){return v(this,null,function*(){let{auth:e,user:t}=n;return Y(t,e,"internal-error"),x2(t,new yc(n),n.bypassAuthState)})}var Fy=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Z2;case"linkViaPopup":case"linkViaRedirect":return X2;case"reauthViaPopup":case"reauthViaRedirect":return J2;default:xn(this.auth,"internal-error")}}resolve(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var o5=new Li(2e3,1e4);var eU="pendingRedirect",Ld=new Map,Vy=class n extends Fy{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=Ld.get(this.auth._key());if(!e){try{let r=(yield tU(this.resolver,this.auth))?yield wr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ld.set(this.auth._key(),e)}return this.bypassAuthState||Ld.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return wr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,wr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function tU(n,e){return v(this,null,function*(){let t=iU(e),r=rU(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function nU(n,e){Ld.set(n._key(),e)}function rU(n){return cr(n._redirectPersistence)}function iU(n){return Vd(eU,n.config.apiKey,n.name)}function oU(n,e,t=!1){return v(this,null,function*(){if(dn(n.app))return Promise.reject(ur(n));let r=ji(n),i=Y2(r,e),s=yield new Vy(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var sU=10*60*1e3,Ly=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!UT(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Vi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sU&&this.cachedEventUids.clear(),this.cachedEventUids.has(rT(e))}saveEventToCache(e){this.cachedEventUids.add(rT(e)),this.lastProcessedEventTime=Date.now()}};function rT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function UT({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function aU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UT(n);default:return!1}}function cU(t){return v(this,arguments,function*(n,e={}){return Jr(n,"GET","/v1/projects",e)})}var uU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lU=/^https?/;function dU(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield cU(n);for(let t of e)try{if(hU(t))return}catch{}xn(n,"unauthorized-domain")})}function hU(n){let e=Ey(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!lU.test(t))return!1;if(uU.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var fU=new Li(3e4,6e4);function iT(){let n=Nn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function pU(n){return new Promise((e,t)=>{var r,i,o;function s(){iT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iT(),t(Vi(n,"network-request-failed"))},timeout:fU.get()})}if(!((i=(r=Nn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Nn().gapi)===null||o===void 0)&&o.load)s();else{let a=ST("iframefcb");return Nn()[a]=()=>{gapi.load?s():t(Vi(n,"network-request-failed"))},TT(`${_2()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw Ud=null,e})}var Ud=null;function gU(n){return Ud=Ud||pU(n),Ud}var mU=new Li(5e3,15e3),yU="__/auth/iframe",vU="emulator/auth/iframe",_U={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IU(n){let e=n.config;Y(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?$y(e,vU):`https://${n.config.authDomain}/${yU}`,r={apiKey:e.apiKey,appName:n.name,v:Kr},i=wU.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${sc(r).slice(1)}`}function EU(n){return v(this,null,function*(){let e=yield gU(n),t=Nn().gapi;return Y(t,n,"internal-error"),e.open({where:document.body,url:IU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_U,dontclear:!0},r=>new Promise((i,o)=>v(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Vi(n,"network-request-failed"),a=Nn().setTimeout(()=>{o(s)},mU.get());function u(){Nn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var DU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CU=500,bU=600,TU="_blank",SU="http://localhost",Yd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function AU(n,e,t,r=CU,i=bU){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},DU),{width:r.toString(),height:i.toString(),top:o,left:s}),l=rt().toLowerCase();t&&(a=_T(l)?TU:t),yT(l)&&(e=e||SU,u.scrollbars="yes");let f=Object.entries(u).reduce((y,[w,S])=>`${y}${w}=${S},`,"");if(f2(l)&&a!=="_self")return RU(e||"",a),new Yd(null);let p=window.open(e||"",a,f);Y(p,n,"popup-blocked");try{p.focus()}catch{}return new Yd(p)}function RU(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var MU="__/auth/handler",NU="emulator/auth/handler",xU=encodeURIComponent("fac");function oT(n,e,t,r,i,o){return v(this,null,function*(){Y(n.config.authDomain,n,"auth-domain-config-required"),Y(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Kr,eventId:i};if(e instanceof Gd){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",Mb(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(o||{}))s[f]=p}if(e instanceof xy){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let f of Object.keys(a))a[f]===void 0&&delete a[f];let u=yield n._getAppCheckToken(),l=u?`#${xU}=${encodeURIComponent(u)}`:"";return`${PU(n)}?${sc(a).slice(1)}${l}`})}function PU({config:n}){return n.emulator?$y(n,NU):`https://${n.authDomain}/${MU}`}var Iy="webStorageSupport",Uy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ev,this._completeRedirectFn=oU,this._overrideRedirectResult=nU}_openPopup(e,t,r,i){return v(this,null,function*(){var o;Yr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield oT(e,t,r,Ey(),i);return AU(e,s,OT())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield oT(e,t,r,Ey(),i);return j2(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Yr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield EU(e),r=new Ly(e);return t.register("authEvent",i=>(Y(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Iy,{type:Iy},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Iy];s!==void 0&&t(!!s),xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return CT()||vT()||Gy()}},jT=Uy;var sT="@firebase/auth",aT="1.7.9";var jy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function OU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kU(n){Wr(new Xt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Y(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bT(n)},l=new Ry(r,i,o,u);return E2(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Wr(new Xt("auth-internal",e=>{let t=ji(e.getProvider("auth").getImmediate());return(r=>new jy(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ze(sT,aT,OU(n)),Ze(sT,aT,"esm2017")}var FU=5*60,VU=ty("authIdTokenMaxAge")||FU,cT=null,LU=n=>e=>v(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>VU)return;let i=t?.token;cT!==i&&(cT=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function tv(n=us()){let e=uc(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Wy(n,{popupRedirectResolver:jT,persistence:[LT,PT,ev]}),r=ty("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=LU(o.toString());Xy(t,s,()=>s(t.currentUser)),Jy(t,a=>s(a))}}let i=Xm("auth");return i&&Ky(t,`http://${i}`),t}function UU(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}y2({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Vi("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",UU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kU("Browser");var BT="auth",Bi=class{constructor(e){return e}},_c=class{constructor(){return lc(BT)}};var nv=new H("angularfire2.auth-instances");function Aj(n,e){let t=Pd(BT,n,e);return t&&new Bi(t)}function Rj(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Bi(r)}}var Mj={provide:_c,deps:[[new mt,nv]]},Nj={provide:Bi,useFactory:Aj,deps:[[new mt,nv],sr]};function $T(n,...e){return Ze("angularfire",ki.full,"auth"),Dn([Nj,Mj,{provide:nv,useFactory:Rj(n),multi:!0,deps:[Ie,st,hs,Fi,[new mt,ds],...e]}])}var HT=Ht(Yy,!0);var qT=Ht(tv,!0);var zT=Ht(Zy,!0);var GT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},WT={};var Xr,rv;(function(){var n;function e(D,m){function _(){}_.prototype=m.prototype,D.D=m.prototype,D.prototype=new _,D.prototype.constructor=D,D.C=function(E,C,T){for(var I=Array(arguments.length-2),Bn=2;Bn<arguments.length;Bn++)I[Bn-2]=arguments[Bn];return m.prototype[C].apply(E,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,m,_){_||(_=0);var E=Array(16);if(typeof m=="string")for(var C=0;16>C;++C)E[C]=m.charCodeAt(_++)|m.charCodeAt(_++)<<8|m.charCodeAt(_++)<<16|m.charCodeAt(_++)<<24;else for(C=0;16>C;++C)E[C]=m[_++]|m[_++]<<8|m[_++]<<16|m[_++]<<24;m=D.g[0],_=D.g[1],C=D.g[2];var T=D.g[3],I=m+(T^_&(C^T))+E[0]+3614090360&4294967295;m=_+(I<<7&4294967295|I>>>25),I=T+(C^m&(_^C))+E[1]+3905402710&4294967295,T=m+(I<<12&4294967295|I>>>20),I=C+(_^T&(m^_))+E[2]+606105819&4294967295,C=T+(I<<17&4294967295|I>>>15),I=_+(m^C&(T^m))+E[3]+3250441966&4294967295,_=C+(I<<22&4294967295|I>>>10),I=m+(T^_&(C^T))+E[4]+4118548399&4294967295,m=_+(I<<7&4294967295|I>>>25),I=T+(C^m&(_^C))+E[5]+1200080426&4294967295,T=m+(I<<12&4294967295|I>>>20),I=C+(_^T&(m^_))+E[6]+2821735955&4294967295,C=T+(I<<17&4294967295|I>>>15),I=_+(m^C&(T^m))+E[7]+4249261313&4294967295,_=C+(I<<22&4294967295|I>>>10),I=m+(T^_&(C^T))+E[8]+1770035416&4294967295,m=_+(I<<7&4294967295|I>>>25),I=T+(C^m&(_^C))+E[9]+2336552879&4294967295,T=m+(I<<12&4294967295|I>>>20),I=C+(_^T&(m^_))+E[10]+4294925233&4294967295,C=T+(I<<17&4294967295|I>>>15),I=_+(m^C&(T^m))+E[11]+2304563134&4294967295,_=C+(I<<22&4294967295|I>>>10),I=m+(T^_&(C^T))+E[12]+1804603682&4294967295,m=_+(I<<7&4294967295|I>>>25),I=T+(C^m&(_^C))+E[13]+4254626195&4294967295,T=m+(I<<12&4294967295|I>>>20),I=C+(_^T&(m^_))+E[14]+2792965006&4294967295,C=T+(I<<17&4294967295|I>>>15),I=_+(m^C&(T^m))+E[15]+1236535329&4294967295,_=C+(I<<22&4294967295|I>>>10),I=m+(C^T&(_^C))+E[1]+4129170786&4294967295,m=_+(I<<5&4294967295|I>>>27),I=T+(_^C&(m^_))+E[6]+3225465664&4294967295,T=m+(I<<9&4294967295|I>>>23),I=C+(m^_&(T^m))+E[11]+643717713&4294967295,C=T+(I<<14&4294967295|I>>>18),I=_+(T^m&(C^T))+E[0]+3921069994&4294967295,_=C+(I<<20&4294967295|I>>>12),I=m+(C^T&(_^C))+E[5]+3593408605&4294967295,m=_+(I<<5&4294967295|I>>>27),I=T+(_^C&(m^_))+E[10]+38016083&4294967295,T=m+(I<<9&4294967295|I>>>23),I=C+(m^_&(T^m))+E[15]+3634488961&4294967295,C=T+(I<<14&4294967295|I>>>18),I=_+(T^m&(C^T))+E[4]+3889429448&4294967295,_=C+(I<<20&4294967295|I>>>12),I=m+(C^T&(_^C))+E[9]+568446438&4294967295,m=_+(I<<5&4294967295|I>>>27),I=T+(_^C&(m^_))+E[14]+3275163606&4294967295,T=m+(I<<9&4294967295|I>>>23),I=C+(m^_&(T^m))+E[3]+4107603335&4294967295,C=T+(I<<14&4294967295|I>>>18),I=_+(T^m&(C^T))+E[8]+1163531501&4294967295,_=C+(I<<20&4294967295|I>>>12),I=m+(C^T&(_^C))+E[13]+2850285829&4294967295,m=_+(I<<5&4294967295|I>>>27),I=T+(_^C&(m^_))+E[2]+4243563512&4294967295,T=m+(I<<9&4294967295|I>>>23),I=C+(m^_&(T^m))+E[7]+1735328473&4294967295,C=T+(I<<14&4294967295|I>>>18),I=_+(T^m&(C^T))+E[12]+2368359562&4294967295,_=C+(I<<20&4294967295|I>>>12),I=m+(_^C^T)+E[5]+4294588738&4294967295,m=_+(I<<4&4294967295|I>>>28),I=T+(m^_^C)+E[8]+2272392833&4294967295,T=m+(I<<11&4294967295|I>>>21),I=C+(T^m^_)+E[11]+1839030562&4294967295,C=T+(I<<16&4294967295|I>>>16),I=_+(C^T^m)+E[14]+4259657740&4294967295,_=C+(I<<23&4294967295|I>>>9),I=m+(_^C^T)+E[1]+2763975236&4294967295,m=_+(I<<4&4294967295|I>>>28),I=T+(m^_^C)+E[4]+1272893353&4294967295,T=m+(I<<11&4294967295|I>>>21),I=C+(T^m^_)+E[7]+4139469664&4294967295,C=T+(I<<16&4294967295|I>>>16),I=_+(C^T^m)+E[10]+3200236656&4294967295,_=C+(I<<23&4294967295|I>>>9),I=m+(_^C^T)+E[13]+681279174&4294967295,m=_+(I<<4&4294967295|I>>>28),I=T+(m^_^C)+E[0]+3936430074&4294967295,T=m+(I<<11&4294967295|I>>>21),I=C+(T^m^_)+E[3]+3572445317&4294967295,C=T+(I<<16&4294967295|I>>>16),I=_+(C^T^m)+E[6]+76029189&4294967295,_=C+(I<<23&4294967295|I>>>9),I=m+(_^C^T)+E[9]+3654602809&4294967295,m=_+(I<<4&4294967295|I>>>28),I=T+(m^_^C)+E[12]+3873151461&4294967295,T=m+(I<<11&4294967295|I>>>21),I=C+(T^m^_)+E[15]+530742520&4294967295,C=T+(I<<16&4294967295|I>>>16),I=_+(C^T^m)+E[2]+3299628645&4294967295,_=C+(I<<23&4294967295|I>>>9),I=m+(C^(_|~T))+E[0]+4096336452&4294967295,m=_+(I<<6&4294967295|I>>>26),I=T+(_^(m|~C))+E[7]+1126891415&4294967295,T=m+(I<<10&4294967295|I>>>22),I=C+(m^(T|~_))+E[14]+2878612391&4294967295,C=T+(I<<15&4294967295|I>>>17),I=_+(T^(C|~m))+E[5]+4237533241&4294967295,_=C+(I<<21&4294967295|I>>>11),I=m+(C^(_|~T))+E[12]+1700485571&4294967295,m=_+(I<<6&4294967295|I>>>26),I=T+(_^(m|~C))+E[3]+2399980690&4294967295,T=m+(I<<10&4294967295|I>>>22),I=C+(m^(T|~_))+E[10]+4293915773&4294967295,C=T+(I<<15&4294967295|I>>>17),I=_+(T^(C|~m))+E[1]+2240044497&4294967295,_=C+(I<<21&4294967295|I>>>11),I=m+(C^(_|~T))+E[8]+1873313359&4294967295,m=_+(I<<6&4294967295|I>>>26),I=T+(_^(m|~C))+E[15]+4264355552&4294967295,T=m+(I<<10&4294967295|I>>>22),I=C+(m^(T|~_))+E[6]+2734768916&4294967295,C=T+(I<<15&4294967295|I>>>17),I=_+(T^(C|~m))+E[13]+1309151649&4294967295,_=C+(I<<21&4294967295|I>>>11),I=m+(C^(_|~T))+E[4]+4149444226&4294967295,m=_+(I<<6&4294967295|I>>>26),I=T+(_^(m|~C))+E[11]+3174756917&4294967295,T=m+(I<<10&4294967295|I>>>22),I=C+(m^(T|~_))+E[2]+718787259&4294967295,C=T+(I<<15&4294967295|I>>>17),I=_+(T^(C|~m))+E[9]+3951481745&4294967295,D.g[0]=D.g[0]+m&4294967295,D.g[1]=D.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+C&4294967295,D.g[3]=D.g[3]+T&4294967295}r.prototype.u=function(D,m){m===void 0&&(m=D.length);for(var _=m-this.blockSize,E=this.B,C=this.h,T=0;T<m;){if(C==0)for(;T<=_;)i(this,D,T),T+=this.blockSize;if(typeof D=="string"){for(;T<m;)if(E[C++]=D.charCodeAt(T++),C==this.blockSize){i(this,E),C=0;break}}else for(;T<m;)if(E[C++]=D[T++],C==this.blockSize){i(this,E),C=0;break}}this.h=C,this.o+=m},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var m=1;m<D.length-8;++m)D[m]=0;var _=8*this.o;for(m=D.length-8;m<D.length;++m)D[m]=_&255,_/=256;for(this.u(D),D=Array(16),m=_=0;4>m;++m)for(var E=0;32>E;E+=8)D[_++]=this.g[m]>>>E&255;return D};function o(D,m){var _=a;return Object.prototype.hasOwnProperty.call(_,D)?_[D]:_[D]=m(D)}function s(D,m){this.h=m;for(var _=[],E=!0,C=D.length-1;0<=C;C--){var T=D[C]|0;E&&T==m||(_[C]=T,E=!1)}this.g=_}var a={};function u(D){return-128<=D&&128>D?o(D,function(m){return new s([m|0],0>m?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(l(-D));for(var m=[],_=1,E=0;D>=_;E++)m[E]=D/_|0,_*=4294967296;return new s(m,0)}function f(D,m){if(D.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(D.charAt(0)=="-")return R(f(D.substring(1),m));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(m,8)),E=p,C=0;C<D.length;C+=8){var T=Math.min(8,D.length-C),I=parseInt(D.substring(C,C+T),m);8>T?(T=l(Math.pow(m,T)),E=E.j(T).add(l(I))):(E=E.j(_),E=E.add(l(I)))}return E}var p=u(0),y=u(1),w=u(16777216);n=s.prototype,n.m=function(){if(M(this))return-R(this).m();for(var D=0,m=1,_=0;_<this.g.length;_++){var E=this.i(_);D+=(0<=E?E:4294967296+E)*m,m*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(M(this))return"-"+R(this).toString(D);for(var m=l(Math.pow(D,6)),_=this,E="";;){var C=le(_,m).g;_=L(_,C.j(m));var T=((0<_.g.length?_.g[0]:_.h)>>>0).toString(D);if(_=C,S(_))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(var m=0;m<D.g.length;m++)if(D.g[m]!=0)return!1;return!0}function M(D){return D.h==-1}n.l=function(D){return D=L(this,D),M(D)?-1:S(D)?0:1};function R(D){for(var m=D.g.length,_=[],E=0;E<m;E++)_[E]=~D.g[E];return new s(_,~D.h).add(y)}n.abs=function(){return M(this)?R(this):this},n.add=function(D){for(var m=Math.max(this.g.length,D.g.length),_=[],E=0,C=0;C<=m;C++){var T=E+(this.i(C)&65535)+(D.i(C)&65535),I=(T>>>16)+(this.i(C)>>>16)+(D.i(C)>>>16);E=I>>>16,T&=65535,I&=65535,_[C]=I<<16|T}return new s(_,_[_.length-1]&-2147483648?-1:0)};function L(D,m){return D.add(R(m))}n.j=function(D){if(S(this)||S(D))return p;if(M(this))return M(D)?R(this).j(R(D)):R(R(this).j(D));if(M(D))return R(this.j(R(D)));if(0>this.l(w)&&0>D.l(w))return l(this.m()*D.m());for(var m=this.g.length+D.g.length,_=[],E=0;E<2*m;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<D.g.length;C++){var T=this.i(E)>>>16,I=this.i(E)&65535,Bn=D.i(C)>>>16,Ws=D.i(C)&65535;_[2*E+2*C]+=I*Ws,G(_,2*E+2*C),_[2*E+2*C+1]+=T*Ws,G(_,2*E+2*C+1),_[2*E+2*C+1]+=I*Bn,G(_,2*E+2*C+1),_[2*E+2*C+2]+=T*Bn,G(_,2*E+2*C+2)}for(E=0;E<m;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=m;E<2*m;E++)_[E]=0;return new s(_,0)};function G(D,m){for(;(D[m]&65535)!=D[m];)D[m+1]+=D[m]>>>16,D[m]&=65535,m++}function K(D,m){this.g=D,this.h=m}function le(D,m){if(S(m))throw Error("division by zero");if(S(D))return new K(p,p);if(M(D))return m=le(R(D),m),new K(R(m.g),R(m.h));if(M(m))return m=le(D,R(m)),new K(R(m.g),m.h);if(30<D.g.length){if(M(D)||M(m))throw Error("slowDivide_ only works with positive integers.");for(var _=y,E=m;0>=E.l(D);)_=xe(_),E=xe(E);var C=ne(_,1),T=ne(E,1);for(E=ne(E,2),_=ne(_,2);!S(E);){var I=T.add(E);0>=I.l(D)&&(C=C.add(_),T=I),E=ne(E,1),_=ne(_,1)}return m=L(D,C.j(m)),new K(C,m)}for(C=p;0<=D.l(m);){for(_=Math.max(1,Math.floor(D.m()/m.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(_),I=T.j(m);M(I)||0<I.l(D);)_-=E,T=l(_),I=T.j(m);S(T)&&(T=y),C=C.add(T),D=L(D,I)}return new K(C,D)}n.A=function(D){return le(this,D).h},n.and=function(D){for(var m=Math.max(this.g.length,D.g.length),_=[],E=0;E<m;E++)_[E]=this.i(E)&D.i(E);return new s(_,this.h&D.h)},n.or=function(D){for(var m=Math.max(this.g.length,D.g.length),_=[],E=0;E<m;E++)_[E]=this.i(E)|D.i(E);return new s(_,this.h|D.h)},n.xor=function(D){for(var m=Math.max(this.g.length,D.g.length),_=[],E=0;E<m;E++)_[E]=this.i(E)^D.i(E);return new s(_,this.h^D.h)};function xe(D){for(var m=D.g.length+1,_=[],E=0;E<m;E++)_[E]=D.i(E)<<1|D.i(E-1)>>>31;return new s(_,D.h)}function ne(D,m){var _=m>>5;m%=32;for(var E=D.g.length-_,C=[],T=0;T<E;T++)C[T]=0<m?D.i(T+_)>>>m|D.i(T+_+1)<<32-m:D.i(T+_);return new s(C,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,rv=WT.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,Xr=WT.Integer=s}).apply(typeof GT<"u"?GT:typeof self<"u"?self:typeof window<"u"?window:{});var th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lr={};var iv,xj,gs,ov,wc,nh,sv,av,cv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,h){return c==Array.prototype||c==Object.prototype||(c[d]=h.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof th=="object"&&th];for(var d=0;d<c.length;++d){var h=c[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var h=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in h))break e;h=h[b]}c=c[c.length-1],g=h[c],d=d(g),d!=g&&d!=null&&e(h,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var h=0,g=!1,b={next:function(){if(!g&&h<c.length){var A=h++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,h){return h})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function f(c,d,h){return c.call.apply(c.bind,arguments)}function p(c,d,h){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function y(c,d,h){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,y.apply(null,arguments)}function w(c,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function S(c,d){function h(){}h.prototype=d.prototype,c.aa=d.prototype,c.prototype=new h,c.prototype.constructor=c,c.Qb=function(g,b,A){for(var F=Array(arguments.length-2),be=2;be<arguments.length;be++)F[be-2]=arguments[be];return d.prototype[b].apply(g,F)}}function M(c){let d=c.length;if(0<d){let h=Array(d);for(let g=0;g<d;g++)h[g]=c[g];return h}return[]}function R(c,d){for(let h=1;h<arguments.length;h++){let g=arguments[h];if(u(g)){let b=c.length||0,A=g.length||0;c.length=b+A;for(let F=0;F<A;F++)c[b+F]=g[F]}else c.push(g)}}class L{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function G(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function le(c){return le[" "](c),c}le[" "]=function(){};var xe=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function ne(c,d,h){for(let g in c)d.call(h,c[g],g,c)}function D(c,d){for(let h in c)d.call(void 0,c[h],h,c)}function m(c){let d={};for(let h in c)d[h]=c[h];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let h,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(h in g)c[h]=g[h];for(let A=0;A<_.length;A++)h=_[A],Object.prototype.hasOwnProperty.call(g,h)&&(c[h]=g[h])}}function C(c){var d=1;c=c.split(":");let h=[];for(;0<d&&c.length;)h.push(c.shift()),d--;return c.length&&h.push(c.join(":")),h}function T(c){a.setTimeout(()=>{throw c},0)}function I(){var c=uf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Bn{constructor(){this.h=this.g=null}add(d,h){let g=Ws.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var Ws=new L(()=>new MR,c=>c.reset());class MR{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Ks,Qs=!1,uf=new Bn,vw=()=>{let c=a.Promise.resolve(void 0);Ks=()=>{c.then(NR)}};var NR=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(h){T(h)}var d=Ws;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Qs=!1};function mr(){this.s=this.s,this.C=this.C}mr.prototype.s=!1,mr.prototype.ma=function(){this.s||(this.s=!0,this.N())},mr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function dt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}dt.prototype.h=function(){this.defaultPrevented=!0};var xR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let h=()=>{};a.addEventListener("test",h,d),a.removeEventListener("test",h,d)}catch{}return c}();function Ys(c,d){if(dt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var h=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(xe){e:{try{le(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else h=="mouseover"?d=c.fromElement:h=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:PR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ys.aa.h.call(this)}}S(Ys,dt);var PR={2:"touch",3:"pen",4:"mouse"};Ys.prototype.h=function(){Ys.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Zs="closure_listenable_"+(1e6*Math.random()|0),OR=0;function kR(c,d,h,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=b,this.key=++OR,this.da=this.fa=!1}function Yc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Zc(c){this.src=c,this.g={},this.h=0}Zc.prototype.add=function(c,d,h,g,b){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var F=df(c,d,g,b);return-1<F?(d=c[F],h||(d.fa=!1)):(d=new kR(d,this.src,A,!!g,b),d.fa=h,c.push(d)),d};function lf(c,d){var h=d.type;if(h in c.g){var g=c.g[h],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(g,b,1),A&&(Yc(d),c.g[h].length==0&&(delete c.g[h],c.h--))}}function df(c,d,h,g){for(var b=0;b<c.length;++b){var A=c[b];if(!A.da&&A.listener==d&&A.capture==!!h&&A.ha==g)return b}return-1}var hf="closure_lm_"+(1e6*Math.random()|0),ff={};function _w(c,d,h,g,b){if(g&&g.once)return Iw(c,d,h,g,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)_w(c,d[A],h,g,b);return null}return h=yf(h),c&&c[Zs]?c.K(d,h,l(g)?!!g.capture:!!g,b):ww(c,d,h,!1,g,b)}function ww(c,d,h,g,b,A){if(!d)throw Error("Invalid event type");var F=l(b)?!!b.capture:!!b,be=gf(c);if(be||(c[hf]=be=new Zc(c)),h=be.add(d,h,g,F,A),h.proxy)return h;if(g=FR(),h.proxy=g,g.src=c,g.listener=h,c.addEventListener)xR||(b=F),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(Dw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function FR(){function c(h){return d.call(c.src,c.listener,h)}let d=VR;return c}function Iw(c,d,h,g,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)Iw(c,d[A],h,g,b);return null}return h=yf(h),c&&c[Zs]?c.L(d,h,l(g)?!!g.capture:!!g,b):ww(c,d,h,!0,g,b)}function Ew(c,d,h,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)Ew(c,d[A],h,g,b);else g=l(g)?!!g.capture:!!g,h=yf(h),c&&c[Zs]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],h=df(A,h,g,b),-1<h&&(Yc(A[h]),Array.prototype.splice.call(A,h,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=gf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=df(d,h,g,b)),(h=-1<c?d[c]:null)&&pf(h))}function pf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Zs])lf(d.i,c);else{var h=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(h,g,c.capture):d.detachEvent?d.detachEvent(Dw(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=gf(d))?(lf(h,c),h.h==0&&(h.src=null,d[hf]=null)):Yc(c)}}}function Dw(c){return c in ff?ff[c]:ff[c]="on"+c}function VR(c,d){if(c.da)c=!0;else{d=new Ys(d,this);var h=c.listener,g=c.ha||c.src;c.fa&&pf(c),c=h.call(g,d)}return c}function gf(c){return c=c[hf],c instanceof Zc?c:null}var mf="__closure_events_fn_"+(1e9*Math.random()>>>0);function yf(c){return typeof c=="function"?c:(c[mf]||(c[mf]=function(d){return c.handleEvent(d)}),c[mf])}function ht(){mr.call(this),this.i=new Zc(this),this.M=this,this.F=null}S(ht,mr),ht.prototype[Zs]=!0,ht.prototype.removeEventListener=function(c,d,h,g){Ew(this,c,d,h,g)};function Ct(c,d){var h,g=c.F;if(g)for(h=[];g;g=g.F)h.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new dt(d,c);else if(d instanceof dt)d.target=d.target||c;else{var b=d;d=new dt(g,c),E(d,b)}if(b=!0,h)for(var A=h.length-1;0<=A;A--){var F=d.g=h[A];b=Jc(F,g,!0,d)&&b}if(F=d.g=c,b=Jc(F,g,!0,d)&&b,b=Jc(F,g,!1,d)&&b,h)for(A=0;A<h.length;A++)F=d.g=h[A],b=Jc(F,g,!1,d)&&b}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var h=c.g[d],g=0;g<h.length;g++)Yc(h[g]);delete c.g[d],c.h--}}this.F=null},ht.prototype.K=function(c,d,h,g){return this.i.add(String(c),d,!1,h,g)},ht.prototype.L=function(c,d,h,g){return this.i.add(String(c),d,!0,h,g)};function Jc(c,d,h,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var F=d[A];if(F&&!F.da&&F.capture==h){var be=F.listener,ot=F.ha||F.src;F.fa&&lf(c.i,F),b=be.call(ot,g)!==!1&&b}}return b&&!g.defaultPrevented}function Cw(c,d,h){if(typeof c=="function")h&&(c=y(c,h));else if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function bw(c){c.g=Cw(()=>{c.g=null,c.i&&(c.i=!1,bw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class LR extends mr{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:bw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Js(c){mr.call(this),this.h=c,this.g={}}S(Js,mr);var Tw=[];function Sw(c){ne(c.g,function(d,h){this.g.hasOwnProperty(h)&&pf(d)},c),c.g={}}Js.prototype.N=function(){Js.aa.N.call(this),Sw(this)},Js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vf=a.JSON.stringify,UR=a.JSON.parse,jR=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function _f(){}_f.prototype.h=null;function Aw(c){return c.h||(c.h=c.i())}function Rw(){}var Xs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wf(){dt.call(this,"d")}S(wf,dt);function If(){dt.call(this,"c")}S(If,dt);var ai={},Mw=null;function Xc(){return Mw=Mw||new ht}ai.La="serverreachability";function Nw(c){dt.call(this,ai.La,c)}S(Nw,dt);function ea(c){let d=Xc();Ct(d,new Nw(d))}ai.STAT_EVENT="statevent";function xw(c,d){dt.call(this,ai.STAT_EVENT,c),this.stat=d}S(xw,dt);function bt(c){let d=Xc();Ct(d,new xw(d,c))}ai.Ma="timingevent";function Pw(c,d){dt.call(this,ai.Ma,c),this.size=d}S(Pw,dt);function ta(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function na(){this.g=!0}na.prototype.xa=function(){this.g=!1};function BR(c,d,h,g,b,A){c.info(function(){if(c.g)if(A)for(var F="",be=A.split("&"),ot=0;ot<be.length;ot++){var _e=be[ot].split("=");if(1<_e.length){var ft=_e[0];_e=_e[1];var pt=ft.split("_");F=2<=pt.length&&pt[1]=="type"?F+(ft+"="+_e+"&"):F+(ft+"=redacted&")}}else F=null;else F=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+h+`
`+F})}function $R(c,d,h,g,b,A,F){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+h+`
`+A+" "+F})}function to(c,d,h,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+qR(c,h)+(g?" "+g:"")})}function HR(c,d){c.info(function(){return"TIMEOUT: "+d})}na.prototype.info=function(){};function qR(c,d){if(!c.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(c=0;c<h.length;c++)if(Array.isArray(h[c])){var g=h[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var F=1;F<b.length;F++)b[F]=""}}}}return vf(h)}catch{return d}}var eu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ow={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ef;function tu(){}S(tu,_f),tu.prototype.g=function(){return new XMLHttpRequest},tu.prototype.i=function(){return{}},Ef=new tu;function yr(c,d,h,g){this.j=c,this.i=d,this.l=h,this.R=g||1,this.U=new Js(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kw}function kw(){this.i=null,this.g="",this.h=!1}var Fw={},Df={};function Cf(c,d,h){c.L=1,c.v=ou($n(d)),c.m=h,c.P=!0,Vw(c,null)}function Vw(c,d){c.F=Date.now(),nu(c),c.A=$n(c.v);var h=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Zw(h.i,"t",g),c.C=0,h=c.j.J,c.h=new kw,c.g=gI(c.j,h?d:null,!c.m),0<c.O&&(c.M=new LR(y(c.Y,c,c.g),c.O)),d=c.U,h=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(Tw[0]=b.toString()),b=Tw);for(var A=0;A<b.length;A++){var F=_w(h,b[A],g||d.handleEvent,!1,d.h||d);if(!F)break;d.g[F.key]=F}d=c.H?m(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ea(),BR(c.i,c.u,c.A,c.l,c.R,c.m)}yr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Hn(c)==3?d.j():this.Y(c)},yr.prototype.Y=function(c){try{if(c==this.g)e:{let pt=Hn(this.g);var d=this.g.Ba();let io=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||iI(this.g)))){this.J||pt!=4||d==7||(d==8||0>=io?ea(3):ea(2)),bf(this);var h=this.g.Z();this.X=h;t:if(Lw(this)){var g=iI(this.g);c="";var b=g.length,A=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ci(this),ra(this);var F="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=h==200,$R(this.i,this.u,this.A,this.l,this.R,pt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var be,ot=this.g;if((be=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(be)){var _e=be;break t}}_e=null}if(h=_e)to(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tf(this,h);else{this.o=!1,this.s=3,bt(12),ci(this),ra(this);break e}}if(this.P){h=!0;let tn;for(;!this.J&&this.C<F.length;)if(tn=zR(this,F),tn==Df){pt==4&&(this.s=4,bt(14),h=!1),to(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==Fw){this.s=4,bt(15),to(this.i,this.l,F,"[Invalid Chunk]"),h=!1;break}else to(this.i,this.l,tn,null),Tf(this,tn);if(Lw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||F.length!=0||this.h.h||(this.s=1,bt(16),h=!1),this.o=this.o&&h,!h)to(this.i,this.l,F,"[Invalid Chunked Response]"),ci(this),ra(this);else if(0<F.length&&!this.W){this.W=!0;var ft=this.j;ft.g==this&&ft.ba&&!ft.M&&(ft.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),xf(ft),ft.M=!0,bt(11))}}else to(this.i,this.l,F,null),Tf(this,F);pt==4&&ci(this),this.o&&!this.J&&(pt==4?dI(this.j,this):(this.o=!1,nu(this)))}else cM(this.g),h==400&&0<F.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),ci(this),ra(this)}}}catch{}finally{}};function Lw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function zR(c,d){var h=c.C,g=d.indexOf(`
`,h);return g==-1?Df:(h=Number(d.substring(h,g)),isNaN(h)?Fw:(g+=1,g+h>d.length?Df:(d=d.slice(g,g+h),c.C=g+h,d)))}yr.prototype.cancel=function(){this.J=!0,ci(this)};function nu(c){c.S=Date.now()+c.I,Uw(c,c.I)}function Uw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ta(y(c.ba,c),d)}function bf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}yr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(HR(this.i,this.A),this.L!=2&&(ea(),bt(17)),ci(this),this.s=2,ra(this)):Uw(this,this.S-c)};function ra(c){c.j.G==0||c.J||dI(c.j,c)}function ci(c){bf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,Sw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Tf(c,d){try{var h=c.j;if(h.G!=0&&(h.g==c||Sf(h.h,c))){if(!c.K&&Sf(h.h,c)&&h.G==3){try{var g=h.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<c.F)lu(h),cu(h);else break e;Nf(h),bt(18)}}else h.za=b[1],0<h.za-h.T&&37500>b[2]&&h.F&&h.v==0&&!h.C&&(h.C=ta(y(h.Za,h),6e3));if(1>=$w(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else li(h,11)}else if((c.K||h.g==c)&&lu(h),!G(d))for(b=h.Da.g.parse(d),d=0;d<b.length;d++){let _e=b[d];if(h.T=_e[0],_e=_e[1],h.G==2)if(_e[0]=="c"){h.K=_e[1],h.ia=_e[2];let ft=_e[3];ft!=null&&(h.la=ft,h.j.info("VER="+h.la));let pt=_e[4];pt!=null&&(h.Aa=pt,h.j.info("SVER="+h.Aa));let io=_e[5];io!=null&&typeof io=="number"&&0<io&&(g=1.5*io,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let tn=c.g;if(tn){let hu=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hu){var A=g.h;A.g||hu.indexOf("spdy")==-1&&hu.indexOf("quic")==-1&&hu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Af(A,A.h),A.h=null))}if(g.D){let Pf=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Pf&&(g.ya=Pf,Se(g.I,g.D,Pf))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-c.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var F=c;if(g.qa=pI(g,g.J?g.ia:null,g.W),F.K){Hw(g.h,F);var be=F,ot=g.L;ot&&(be.I=ot),be.B&&(bf(be),nu(be)),g.g=F}else uI(g);0<h.i.length&&uu(h)}else _e[0]!="stop"&&_e[0]!="close"||li(h,7);else h.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?li(h,7):Mf(h):_e[0]!="noop"&&h.l&&h.l.ta(_e),h.v=0)}}ea(4)}catch{}}var GR=class{constructor(c,d){this.g=c,this.map=d}};function jw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function $w(c){return c.h?1:c.g?c.g.size:0}function Sf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Af(c,d){c.g?c.g.add(d):c.h=d}function Hw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}jw.prototype.cancel=function(){if(this.i=qw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function qw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let h of c.g.values())d=d.concat(h.D);return d}return M(c.i)}function WR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],h=c.length,g=0;g<h;g++)d.push(c[g]);return d}d=[],h=0;for(g in c)d[h++]=c[g];return d}function KR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var h=0;h<c;h++)d.push(h);return d}d=[],h=0;for(let g in c)d[h++]=g;return d}}}function zw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var h=KR(c),g=WR(c),b=g.length,A=0;A<b;A++)d.call(void 0,g[A],h&&h[A],c)}var Gw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function QR(c,d){if(c){c=c.split("&");for(var h=0;h<c.length;h++){var g=c[h].indexOf("="),b=null;if(0<=g){var A=c[h].substring(0,g);b=c[h].substring(g+1)}else A=c[h];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function ui(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ui){this.h=c.h,ru(this,c.j),this.o=c.o,this.g=c.g,iu(this,c.s),this.l=c.l;var d=c.i,h=new sa;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),Ww(this,h),this.m=c.m}else c&&(d=String(c).match(Gw))?(this.h=!1,ru(this,d[1]||"",!0),this.o=ia(d[2]||""),this.g=ia(d[3]||"",!0),iu(this,d[4]),this.l=ia(d[5]||"",!0),Ww(this,d[6]||"",!0),this.m=ia(d[7]||"")):(this.h=!1,this.i=new sa(null,this.h))}ui.prototype.toString=function(){var c=[],d=this.j;d&&c.push(oa(d,Kw,!0),":");var h=this.g;return(h||d=="file")&&(c.push("//"),(d=this.o)&&c.push(oa(d,Kw,!0),"@"),c.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&c.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&c.push("/"),c.push(oa(h,h.charAt(0)=="/"?JR:ZR,!0))),(h=this.i.toString())&&c.push("?",h),(h=this.m)&&c.push("#",oa(h,eM)),c.join("")};function $n(c){return new ui(c)}function ru(c,d,h){c.j=h?ia(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function iu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Ww(c,d,h){d instanceof sa?(c.i=d,tM(c.i,c.h)):(h||(d=oa(d,XR)),c.i=new sa(d,c.h))}function Se(c,d,h){c.i.set(d,h)}function ou(c){return Se(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ia(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function oa(c,d,h){return typeof c=="string"?(c=encodeURI(c).replace(d,YR),h&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function YR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Kw=/[#\/\?@]/g,ZR=/[#\?:]/g,JR=/[#\?]/g,XR=/[#\?@]/g,eM=/#/g;function sa(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function vr(c){c.g||(c.g=new Map,c.h=0,c.i&&QR(c.i,function(d,h){c.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}n=sa.prototype,n.add=function(c,d){vr(this),this.i=null,c=no(this,c);var h=this.g.get(c);return h||this.g.set(c,h=[]),h.push(d),this.h+=1,this};function Qw(c,d){vr(c),d=no(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Yw(c,d){return vr(c),d=no(c,d),c.g.has(d)}n.forEach=function(c,d){vr(this),this.g.forEach(function(h,g){h.forEach(function(b){c.call(d,b,g,this)},this)},this)},n.na=function(){vr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let g=0;g<d.length;g++){let b=c[g];for(let A=0;A<b.length;A++)h.push(d[g])}return h},n.V=function(c){vr(this);let d=[];if(typeof c=="string")Yw(this,c)&&(d=d.concat(this.g.get(no(this,c))));else{c=Array.from(this.g.values());for(let h=0;h<c.length;h++)d=d.concat(c[h])}return d},n.set=function(c,d){return vr(this),this.i=null,c=no(this,c),Yw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Zw(c,d,h){Qw(c,d),0<h.length&&(c.i=null,c.g.set(no(c,d),M(h)),c.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var g=d[h];let A=encodeURIComponent(String(g)),F=this.V(g);for(g=0;g<F.length;g++){var b=A;F[g]!==""&&(b+="="+encodeURIComponent(String(F[g]))),c.push(b)}}return this.i=c.join("&")};function no(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function tM(c,d){d&&!c.j&&(vr(c),c.i=null,c.g.forEach(function(h,g){var b=g.toLowerCase();g!=b&&(Qw(this,g),Zw(this,b,h))},c)),c.j=d}function nM(c,d){let h=new na;if(a.Image){let g=new Image;g.onload=w(_r,h,"TestLoadImage: loaded",!0,d,g),g.onerror=w(_r,h,"TestLoadImage: error",!1,d,g),g.onabort=w(_r,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=w(_r,h,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function rM(c,d){let h=new na,g=new AbortController,b=setTimeout(()=>{g.abort(),_r(h,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?_r(h,"TestPingServer: ok",!0,d):_r(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),_r(h,"TestPingServer: error",!1,d)})}function _r(c,d,h,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(h)}catch{}}function iM(){this.g=new jR}function oM(c,d,h){let g=h||"";try{zw(c,function(b,A){let F=b;l(b)&&(F=vf(b)),d.push(g+A+"="+encodeURIComponent(F))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function aa(c){this.l=c.Ub||null,this.j=c.eb||!1}S(aa,_f),aa.prototype.g=function(){return new su(this.l,this.j)},aa.prototype.i=function(c){return function(){return c}}({});function su(c,d){ht.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(su,ht),n=su.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,ua(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ca(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ua(this)),this.g&&(this.readyState=3,ua(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ca(this):ua(this),this.readyState==3&&Jw(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,ca(this))},n.Qa=function(c){this.g&&(this.response=c,ca(this))},n.ga=function(){this.g&&ca(this)};function ca(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ua(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,c.push(h[0]+": "+h[1]),h=d.next();return c.join(`\r
`)};function ua(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(su.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Xw(c){let d="";return ne(c,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function Rf(c,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=Xw(h),typeof c=="string"?h!=null&&encodeURIComponent(String(h)):Se(c,d,h))}function Pe(c){ht.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Pe,ht);var sM=/^https?$/i,aM=["POST","PUT"];n=Pe.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ef.g(),this.v=this.o?Aw(this.o):Aw(Ef),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){eI(this,A);return}if(c=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)h.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())h.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(aM,d,void 0))||g||b||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,F]of h)this.g.setRequestHeader(A,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rI(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){eI(this,A)}};function eI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,tI(c),au(c)}function tI(c){c.A||(c.A=!0,Ct(c,"complete"),Ct(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ct(this,"complete"),Ct(this,"abort"),au(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),au(this,!0)),Pe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?nI(this):this.bb())},n.bb=function(){nI(this)};function nI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Hn(c)!=4||c.Z()!=2)){if(c.u&&Hn(c)==4)Cw(c.Ea,0,c);else if(Ct(c,"readystatechange"),Hn(c)==4){c.h=!1;try{let F=c.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=F===0){var b=String(c.D).match(Gw)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!sM.test(b?b.toLowerCase():"")}h=g}if(h)Ct(c,"complete"),Ct(c,"success");else{c.m=6;try{var A=2<Hn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",tI(c)}}finally{au(c)}}}}function au(c,d){if(c.g){rI(c);let h=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Ct(c,"ready");try{h.onreadystatechange=g}catch{}}}function rI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Hn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),UR(d)}};function iI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function cM(c){let d={};c=(c.g&&2<=Hn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(G(c[g]))continue;var h=C(c[g]);let b=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let A=d[b]||[];d[b]=A,A.push(h)}D(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function la(c,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[c]||d}function oI(c){this.Aa=0,this.i=[],this.j=new na,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=la("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=la("baseRetryDelayMs",5e3,c),this.cb=la("retryDelaySeedMs",1e4,c),this.Wa=la("forwardChannelMaxRetries",2,c),this.wa=la("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new jw(c&&c.concurrentRequestLimit),this.Da=new iM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=oI.prototype,n.la=8,n.G=1,n.connect=function(c,d,h,g){bt(0),this.W=c,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=pI(this,null,this.W),uu(this)};function Mf(c){if(sI(c),c.G==3){var d=c.U++,h=$n(c.I);if(Se(h,"SID",c.K),Se(h,"RID",d),Se(h,"TYPE","terminate"),da(c,h),d=new yr(c,c.j,d),d.L=2,d.v=ou($n(h)),h=!1,a.navigator&&a.navigator.sendBeacon)try{h=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&a.Image&&(new Image().src=d.v,h=!0),h||(d.g=gI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),nu(d)}fI(c)}function cu(c){c.g&&(xf(c),c.g.cancel(),c.g=null)}function sI(c){cu(c),c.u&&(a.clearTimeout(c.u),c.u=null),lu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function uu(c){if(!Bw(c.h)&&!c.s){c.s=!0;var d=c.Ga;Ks||vw(),Qs||(Ks(),Qs=!0),uf.add(d,c),c.B=0}}function uM(c,d){return $w(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ta(y(c.Ga,c,d),hI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new yr(this,this.j,c),A=this.o;if(this.S&&(A?(A=m(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=cI(this,b,d),h=$n(this.I),Se(h,"RID",c),Se(h,"CVER",22),this.D&&Se(h,"X-HTTP-Session-Id",this.D),da(this,h),A&&(this.O?d="headers="+encodeURIComponent(String(Xw(A)))+"&"+d:this.m&&Rf(h,this.m,A)),Af(this.h,b),this.Ua&&Se(h,"TYPE","init"),this.P?(Se(h,"$req",d),Se(h,"SID","null"),b.T=!0,Cf(b,h,null)):Cf(b,h,d),this.G=2}}else this.G==3&&(c?aI(this,c):this.i.length==0||Bw(this.h)||aI(this))};function aI(c,d){var h;d?h=d.l:h=c.U++;let g=$n(c.I);Se(g,"SID",c.K),Se(g,"RID",h),Se(g,"AID",c.T),da(c,g),c.m&&c.o&&Rf(g,c.m,c.o),h=new yr(c,c.j,h,c.B+1),c.m===null&&(h.H=c.o),d&&(c.i=d.D.concat(c.i)),d=cI(c,h,1e3),h.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Af(c.h,h),Cf(h,g,d)}function da(c,d){c.H&&ne(c.H,function(h,g){Se(d,g,h)}),c.l&&zw({},function(h,g){Se(d,g,h)})}function cI(c,d,h){h=Math.min(c.i.length,h);var g=c.l?y(c.l.Na,c.l,c):null;e:{var b=c.i;let A=-1;for(;;){let F=["count="+h];A==-1?0<h?(A=b[0].g,F.push("ofs="+A)):A=0:F.push("ofs="+A);let be=!0;for(let ot=0;ot<h;ot++){let _e=b[ot].g,ft=b[ot].map;if(_e-=A,0>_e)A=Math.max(0,b[ot].g-100),be=!1;else try{oM(ft,F,"req"+_e+"_")}catch{g&&g(ft)}}if(be){g=F.join("&");break e}}}return c=c.i.splice(0,h),d.D=c,g}function uI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Ks||vw(),Qs||(Ks(),Qs=!0),uf.add(d,c),c.v=0}}function Nf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ta(y(c.Fa,c),hI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,lI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ta(y(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),cu(this),lI(this))};function xf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function lI(c){c.g=new yr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=$n(c.qa);Se(d,"RID","rpc"),Se(d,"SID",c.K),Se(d,"AID",c.T),Se(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Se(d,"TO",c.ja),Se(d,"TYPE","xmlhttp"),da(c,d),c.m&&c.o&&Rf(d,c.m,c.o),c.L&&(c.g.I=c.L);var h=c.g;c=c.ia,h.L=1,h.v=ou($n(d)),h.m=null,h.P=!0,Vw(h,c)}n.Za=function(){this.C!=null&&(this.C=null,cu(this),Nf(this),bt(19))};function lu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function dI(c,d){var h=null;if(c.g==d){lu(c),xf(c),c.g=null;var g=2}else if(Sf(c.h,d))h=d.D,Hw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=Xc(),Ct(g,new Pw(g,h)),uu(c)}else uI(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&uM(c,d)||g==2&&Nf(c)))switch(h&&0<h.length&&(d=c.h,d.i=d.i.concat(h)),b){case 1:li(c,5);break;case 4:li(c,10);break;case 3:li(c,6);break;default:li(c,2)}}}function hI(c,d){let h=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(h*=2),h*d}function li(c,d){if(c.j.info("Error code "+d),d==2){var h=y(c.fb,c),g=c.Xa;let b=!g;g=new ui(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ru(g,"https"),ou(g),b?nM(g.toString(),h):rM(g.toString(),h)}else bt(2);c.G=0,c.l&&c.l.sa(d),fI(c),sI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function fI(c){if(c.G=0,c.ka=[],c.l){let d=qw(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function pI(c,d,h){var g=h instanceof ui?$n(h):new ui(h);if(g.g!="")d&&(g.g=d+"."+g.g),iu(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new ui(null);g&&ru(A,g),d&&(A.g=d),b&&iu(A,b),h&&(A.l=h),g=A}return h=c.D,d=c.ya,h&&d&&Se(g,h,d),Se(g,"VER",c.la),da(c,g),g}function gI(c,d,h){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Pe(new aa({eb:h})):new Pe(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function mI(){}n=mI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function du(){}du.prototype.g=function(c,d){return new kt(c,d)};function kt(c,d){ht.call(this),this.g=new oI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!G(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!G(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new ro(this)}S(kt,ht),kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){Mf(this.g)},kt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var h={};h.__data__=c,c=h}else this.u&&(h={},h.__data__=vf(c),c=h);d.i.push(new GR(d.Ya++,c)),d.G==3&&uu(d)},kt.prototype.N=function(){this.g.l=null,delete this.j,Mf(this.g),delete this.g,kt.aa.N.call(this)};function yI(c){wf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let h in d){c=h;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(yI,wf);function vI(){If.call(this),this.status=1}S(vI,If);function ro(c){this.g=c}S(ro,mI),ro.prototype.ua=function(){Ct(this.g,"a")},ro.prototype.ta=function(c){Ct(this.g,new yI(c))},ro.prototype.sa=function(c){Ct(this.g,new vI)},ro.prototype.ra=function(){Ct(this.g,"b")},du.prototype.createWebChannel=du.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,cv=lr.createWebChannelTransport=function(){return new du},av=lr.getStatEventTarget=function(){return Xc()},sv=lr.Event=ai,nh=lr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},eu.NO_ERROR=0,eu.TIMEOUT=8,eu.HTTP_ERROR=6,wc=lr.ErrorCode=eu,Ow.COMPLETE="complete",ov=lr.EventType=Ow,Rw.EventType=Xs,Xs.OPEN="a",Xs.CLOSE="b",Xs.ERROR="c",Xs.MESSAGE="d",ht.prototype.listen=ht.prototype.K,gs=lr.WebChannel=Rw,xj=lr.FetchXmlHttpFactory=aa,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,iv=lr.XhrIo=Pe}).apply(typeof th<"u"?th:typeof self<"u"?self:typeof window<"u"?window:{});var KT="@firebase/firestore";var it=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};it.UNAUTHENTICATED=new it(null),it.GOOGLE_CREDENTIALS=new it("google-credentials-uid"),it.FIRST_PARTY=new it("first-party-uid"),it.MOCK_USER=new it("mock-user");var ks="10.14.0";var zi=new zr("@firebase/firestore");function Ic(){return zi.logLevel}function j(n,...e){if(zi.logLevel<=pe.DEBUG){let t=e.map($_);zi.debug(`Firestore (${ks}): ${n}`,...t)}}function hr(n,...e){if(zi.logLevel<=pe.ERROR){let t=e.map($_);zi.error(`Firestore (${ks}): ${n}`,...t)}}function Es(n,...e){if(zi.logLevel<=pe.WARN){let t=e.map($_);zi.warn(`Firestore (${ks}): ${n}`,...t)}}function $_(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Z(n="Unexpected state"){let e=`FIRESTORE (${ks}) INTERNAL ASSERTION FAILED: `+n;throw hr(e),new Error(e)}function De(n,e){n||Z()}function te(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends $t{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var kn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ah=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},fv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(it.UNAUTHENTICATED))}shutdown(){}},pv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},gv=class{constructor(e){this.t=e,this.currentUser=it.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){De(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new kn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new kn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new kn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new ah(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new it(e)}},mv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=it.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},yv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new mv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(it.FIRST_PARTY))}shutdown(){}invalidateToken(){}},vv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},_v=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){De(this.o===void 0);let r=o=>{o.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(De(typeof t.token=="string"),this.R=t.token,new vv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Pj(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var ch=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Pj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function we(n,e){return n<e?-1:n>e?1:0}function Ds(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var lt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new B(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new B(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new B(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ie=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new lt(0,0))}static max(){return new n(new lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var uh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Z(),r===void 0?r=e.length-t:r>e.length-t&&Z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Fe=class n extends uh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Oj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qt=class n extends uh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Oj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new B(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new B(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var W=class n{constructor(e){this.path=e}static fromPath(e){return new n(Fe.fromString(e))}static fromName(e){return new n(Fe.fromString(e).popFirst(5))}static empty(){return new n(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Fe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Fe(e.slice()))}};var wv=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};wv.UNKNOWN_ID=-1;function kj(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new lt(t+1,0):new lt(t,r));return new Gi(i,W.empty(),e)}function Fj(n){return new Gi(n.readTime,n.key,-1)}var Gi=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ie.min(),W.empty(),-1)}static max(){return new n(ie.max(),W.empty(),-1)}};function Vj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=W.comparator(n.documentKey,e.documentKey),t!==0?t:we(n.largestBatchId,e.largestBatchId))}var Lj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Iv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Lc(n){return v(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==Lj)throw n;j("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(f=>{s[l]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function Uj(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Uc(n){return n.name==="IndexedDbTransactionError"}var TS=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function jh(n){return n==null}function Sc(n){return n===0&&1/n==-1/0}function jj(n){return typeof n=="number"&&Number.isInteger(n)&&!Sc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Bj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],t8=[...Bj,"documentOverlays"],$j=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Hj=$j,qj=[...Hj,"indexConfiguration","indexState","indexEntries"];var n8=[...qj,"globals"];function QT(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Fs(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function SS(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ve=class n{constructor(e,t){this.comparator=e,this.root=t||Fn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _s(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _s(this.root,e,this.comparator,!1)}getReverseIterator(){return new _s(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _s(this.root,e,this.comparator,!0)}},_s=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Fn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();let e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}};Fn.EMPTY=null,Fn.RED=!0,Fn.BLACK=!1;Fn.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Fn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Et=class n{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lh(this.data.getIterator())}getIteratorFrom(e){return new lh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},lh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var On=class n{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Et(qt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ds(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var dh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Dt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new dh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Dt.EMPTY_BYTE_STRING=new Dt("");var zj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fr(n){if(De(!!n),typeof n=="string"){let e=0,t=zj.exec(n);if(De(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(n.seconds),nanos:Ne(n.nanos)}}function Ne(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ni(n){return typeof n=="string"?Dt.fromBase64String(n):Dt.fromUint8Array(n)}function H_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function q_(n){let e=n.mapValue.fields.__previous_value__;return H_(e)?q_(e):e}function Ac(n){let e=fr(n.mapValue.fields.__local_write_time__.timestampValue);return new lt(e.seconds,e.nanos)}var Ev=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},hh=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var rh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Wi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?H_(n)?4:RS(n)?9007199254740991:AS(n)?10:11:Z()}function Un(n,e){if(n===e)return!0;let t=Wi(n);if(t!==Wi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ac(n).isEqual(Ac(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=fr(i.timestampValue),a=fr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return ni(i.bytesValue).isEqual(ni(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ne(i.doubleValue),a=Ne(o.doubleValue);return s===a?Sc(s)===Sc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Ds(n.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(QT(s)!==QT(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Un(s[u],a[u])))return!1;return!0}(n,e);default:return Z()}}function Rc(n,e){return(n.values||[]).find(t=>Un(t,e))!==void 0}function Cs(n,e){if(n===e)return 0;let t=Wi(n),r=Wi(e);if(t!==r)return we(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return we(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ne(o.integerValue||o.doubleValue),u=Ne(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return YT(n.timestampValue,e.timestampValue);case 4:return YT(Ac(n),Ac(e));case 5:return we(n.stringValue,e.stringValue);case 6:return function(o,s){let a=ni(o),u=ni(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let f=we(a[l],u[l]);if(f!==0)return f}return we(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=we(Ne(o.latitude),Ne(s.latitude));return a!==0?a:we(Ne(o.longitude),Ne(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ZT(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,f;let p=o.fields||{},y=s.fields||{},w=(a=p.value)===null||a===void 0?void 0:a.arrayValue,S=(u=y.value)===null||u===void 0?void 0:u.arrayValue,M=we(((l=w?.values)===null||l===void 0?void 0:l.length)||0,((f=S?.values)===null||f===void 0?void 0:f.length)||0);return M!==0?M:ZT(w,S)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===rh.mapValue&&s===rh.mapValue)return 0;if(o===rh.mapValue)return 1;if(s===rh.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let y=we(u[p],f[p]);if(y!==0)return y;let w=Cs(a[u[p]],l[f[p]]);if(w!==0)return w}return we(u.length,f.length)}(n.mapValue,e.mapValue);default:throw Z()}}function YT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return we(n,e);let t=fr(n),r=fr(e),i=we(t.seconds,r.seconds);return i!==0?i:we(t.nanos,r.nanos)}function ZT(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Cs(t[i],r[i]);if(o)return o}return we(t.length,r.length)}function bs(n){return Dv(n)}function Dv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=fr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ni(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return W.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Dv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Dv(t.fields[s])}`;return i+"}"}(n.mapValue):Z()}function Cv(n){return!!n&&"integerValue"in n}function z_(n){return!!n&&"arrayValue"in n}function JT(n){return!!n&&"nullValue"in n}function XT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function oh(n){return!!n&&"mapValue"in n}function AS(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Dc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Fs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Dc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Dc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function RS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var hn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dc(t)}setAll(e){let t=qt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Dc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];oh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Fs(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Dc(this.value))}};function MS(n){let e=[];return Fs(n.fields,(t,r)=>{let i=new qt([t]);if(oh(r)){let o=MS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new On(e)}var fn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ie.min(),ie.min(),ie.min(),hn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ie.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ie.min(),ie.min(),hn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ie.min(),ie.min(),hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ts=class{constructor(e,t){this.position=e,this.inclusive=t}};function eS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=W.comparator(W.fromName(s.referenceValue),t.key):r=Cs(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function tS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Un(n.position[t],e.position[t]))return!1;return!0}var Ss=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Gj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var fh=class{},Je=class n extends fh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Tv(e,t,r):t==="array-contains"?new Rv(e,r):t==="in"?new Mv(e,r):t==="not-in"?new Nv(e,r):t==="array-contains-any"?new xv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Sv(e,r):new Av(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Cs(t,this.value)):t!==null&&Wi(this.value)===Wi(t)&&this.matchesComparison(Cs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},jn=class n extends fh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return NS(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function NS(n){return n.op==="and"}function xS(n){return Wj(n)&&NS(n)}function Wj(n){for(let e of n.filters)if(e instanceof jn)return!1;return!0}function bv(n){if(n instanceof Je)return n.field.canonicalString()+n.op.toString()+bs(n.value);if(xS(n))return n.filters.map(e=>bv(e)).join(",");{let e=n.filters.map(t=>bv(t)).join(",");return`${n.op}(${e})`}}function PS(n,e){return n instanceof Je?function(r,i){return i instanceof Je&&r.op===i.op&&r.field.isEqual(i.field)&&Un(r.value,i.value)}(n,e):n instanceof jn?function(r,i){return i instanceof jn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&PS(s,i.filters[a]),!0):!1}(n,e):void Z()}function OS(n){return n instanceof Je?function(t){return`${t.field.canonicalString()} ${t.op} ${bs(t.value)}`}(n):n instanceof jn?function(t){return t.op.toString()+" {"+t.getFilters().map(OS).join(" ,")+"}"}(n):"Filter"}var Tv=class extends Je{constructor(e,t,r){super(e,t,r),this.key=W.fromName(r.referenceValue)}matches(e){let t=W.comparator(e.key,this.key);return this.matchesComparison(t)}},Sv=class extends Je{constructor(e,t){super(e,"in",t),this.keys=kS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Av=class extends Je{constructor(e,t){super(e,"not-in",t),this.keys=kS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function kS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>W.fromName(r.referenceValue))}var Rv=class extends Je{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return z_(t)&&Rc(t.arrayValue,this.value)}},Mv=class extends Je{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Rc(this.value.arrayValue,t)}},Nv=class extends Je{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Rc(this.value.arrayValue,t)}},xv=class extends Je{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!z_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Rc(this.value.arrayValue,r))}};var Pv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function nS(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Pv(n,e,t,r,i,o,s)}function G_(n){let e=te(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>bv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),jh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>bs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>bs(r)).join(",")),e.ue=t}return e.ue}function W_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Gj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!PS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tS(n.startAt,e.startAt)&&tS(n.endAt,e.endAt)}function Ov(n){return W.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var As=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Kj(n,e,t,r,i,o,s,a){return new As(n,e,t,r,i,o,s,a)}function Bh(n){return new As(n)}function rS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Qj(n){return n.collectionGroup!==null}function Cc(n){let e=te(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Et(qt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ss(o,r))}),t.has(qt.keyField().canonicalString())||e.ce.push(new Ss(qt.keyField(),r))}return e.ce}function Vn(n){let e=te(n);return e.le||(e.le=Yj(e,Cc(n))),e.le}function Yj(n,e){if(n.limitType==="F")return nS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ss(i.field,o)});let t=n.endAt?new Ts(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ts(n.startAt.position,n.startAt.inclusive):null;return nS(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function kv(n,e,t){return new As(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $h(n,e){return W_(Vn(n),Vn(e))&&n.limitType===e.limitType}function FS(n){return`${G_(Vn(n))}|lt:${n.limitType}`}function ms(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>OS(i)).join(", ")}]`),jh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>bs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>bs(i)).join(",")),`Target(${r})`}(Vn(n))}; limitType=${n.limitType})`}function Hh(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):W.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Cc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=eS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Cc(r),i)||r.endAt&&!function(s,a,u){let l=eS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Cc(r),i))}(n,e)}function Zj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function VS(n){return(e,t)=>{let r=!1;for(let i of Cc(n)){let o=Jj(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Jj(n,e,t){let r=n.field.isKeyField()?W.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Cs(u,l):Z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}var ri=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return SS(this.inner)}size(){return this.innerSize}};var Xj=new Ve(W.comparator);function pr(){return Xj}var LS=new Ve(W.comparator);function Ec(...n){let e=LS;for(let t of n)e=e.insert(t.key,t);return e}function US(n){let e=LS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function $i(){return bc()}function jS(){return bc()}function bc(){return new ri(n=>n.toString(),(n,e)=>n.isEqual(e))}var eB=new Ve(W.comparator),tB=new Et(W.comparator);function ge(...n){let e=tB;for(let t of n)e=e.add(t);return e}var nB=new Et(we);function rB(){return nB}function K_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sc(e)?"-0":e}}function BS(n){return{integerValue:""+n}}function iB(n,e){return jj(e)?BS(e):K_(n,e)}var Rs=class{constructor(){this._=void 0}};function oB(n,e,t){return n instanceof Ms?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&H_(o)&&(o=q_(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Ki?HS(n,e):n instanceof Qi?qS(n,e):function(i,o){let s=$S(i,o),a=iS(s)+iS(i.Pe);return Cv(s)&&Cv(i.Pe)?BS(a):K_(i.serializer,a)}(n,e)}function sB(n,e,t){return n instanceof Ki?HS(n,e):n instanceof Qi?qS(n,e):t}function $S(n,e){return n instanceof Ns?function(r){return Cv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ms=class extends Rs{},Ki=class extends Rs{constructor(e){super(),this.elements=e}};function HS(n,e){let t=zS(e);for(let r of n.elements)t.some(i=>Un(i,r))||t.push(r);return{arrayValue:{values:t}}}var Qi=class extends Rs{constructor(e){super(),this.elements=e}};function qS(n,e){let t=zS(e);for(let r of n.elements)t=t.filter(i=>!Un(i,r));return{arrayValue:{values:t}}}var Ns=class extends Rs{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function iS(n){return Ne(n.integerValue||n.doubleValue)}function zS(n){return z_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function aB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ki&&i instanceof Ki||r instanceof Qi&&i instanceof Qi?Ds(r.elements,i.elements,Un):r instanceof Ns&&i instanceof Ns?Un(r.Pe,i.Pe):r instanceof Ms&&i instanceof Ms}(n.transform,e.transform)}var Fv=class{constructor(e,t){this.version=e,this.transformResults=t}},ei=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function sh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var xs=class{};function GS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ph(n.key,ei.none()):new Yi(n.key,n.data,ei.none());{let t=n.data,r=hn.empty(),i=new Et(qt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new gr(n.key,r,new On(i.toArray()),ei.none())}}function cB(n,e,t){n instanceof Yi?function(i,o,s){let a=i.value.clone(),u=sS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof gr?function(i,o,s){if(!sh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=sS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(WS(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Tc(n,e,t,r){return n instanceof Yi?function(o,s,a,u){if(!sh(o.precondition,s))return a;let l=o.value.clone(),f=aS(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof gr?function(o,s,a,u){if(!sh(o.precondition,s))return a;let l=aS(o.fieldTransforms,u,s),f=s.data;return f.setAll(WS(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return sh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function uB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=$S(r.transform,i||null);o!=null&&(t===null&&(t=hn.empty()),t.set(r.field,o))}return t||null}function oS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ds(r,i,(o,s)=>aB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Yi=class extends xs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},gr=class extends xs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function WS(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function sS(n,e,t){let r=new Map;De(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,sB(s,a,t[i]))}return r}function aS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,oB(o,s,e))}return r}var ph=class extends xs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Vv=class extends xs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Lv=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&cB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Tc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Tc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=jS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=GS(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ge())}isEqual(e){return this.batchId===e.batchId&&Ds(this.mutations,e.mutations,(t,r)=>oS(t,r))&&Ds(this.baseMutations,e.baseMutations,(t,r)=>oS(t,r))}},Uv=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){De(e.mutations.length===r.length);let i=function(){return eB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var jv=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Bv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ze,ye;function lB(n){switch(n){default:return Z();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function KS(n){if(n===void 0)return hr("GRPC error has no .code"),N.UNKNOWN;switch(n){case ze.OK:return N.OK;case ze.CANCELLED:return N.CANCELLED;case ze.UNKNOWN:return N.UNKNOWN;case ze.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case ze.INTERNAL:return N.INTERNAL;case ze.UNAVAILABLE:return N.UNAVAILABLE;case ze.UNAUTHENTICATED:return N.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case ze.NOT_FOUND:return N.NOT_FOUND;case ze.ALREADY_EXISTS:return N.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return N.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case ze.ABORTED:return N.ABORTED;case ze.OUT_OF_RANGE:return N.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return N.UNIMPLEMENTED;case ze.DATA_LOSS:return N.DATA_LOSS;default:return Z()}}(ye=ze||(ze={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var cS=null;function dB(){return new TextEncoder}var hB=new Xr([4294967295,4294967295],0);function uS(n){let e=dB().encode(n),t=new rv;return t.update(e),new Uint8Array(t.digest())}function lS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Xr([t,r],0),new Xr([i,o],0)]}var $v=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Hi(`Invalid padding: ${t}`);if(r<0)throw new Hi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Hi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Xr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Xr.fromNumber(r)));return i.compare(hB)===1&&(i=new Xr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=uS(e),[r,i]=lS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=uS(e),[r,i]=lS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Hi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var gh=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Mc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ie.min(),i,new Ve(we),pr(),ge())}},Mc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ge(),ge(),ge())}};var ws=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},mh=class{constructor(e,t){this.targetId=e,this.me=t}},yh=class{constructor(e,t,r=Dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},vh=class{constructor(){this.fe=0,this.ge=hS(),this.pe=Dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),t=ge(),r=ge();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Z()}}),new Mc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=hS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,De(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Hv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=pr(),this.qe=dS(),this.Qe=new Ve(we)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Ov(o))if(r===0){let s=new W(o.path);this.Ue(t,s,fn.newNoDocument(s,ie.min()))}else De(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}cS?.et(function(f,p,y,w,S){var M,R,L,G,K,le;let xe={localCacheCount:f,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},ne=p.unchangedNames;return ne&&(xe.bloomFilter={applied:S===0,hashCount:(M=ne?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(G=(L=(R=ne?.bits)===null||R===void 0?void 0:R.bitmap)===null||L===void 0?void 0:L.length)!==null&&G!==void 0?G:0,padding:(le=(K=ne?.bits)===null||K===void 0?void 0:K.padding)!==null&&le!==void 0?le:0,mightContain:D=>{var m;return(m=w?.mightContain(D))!==null&&m!==void 0&&m}}),xe}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=ni(r).toUint8Array()}catch(u){if(u instanceof dh)return Es("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new $v(s,i,o)}catch(u){return Es(u instanceof Hi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Ov(a.target)){let u=new W(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,fn.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ge();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new gh(e,t,this.Qe,this.ke,r);return this.ke=pr(),this.qe=dS(),this.Qe=new Ve(we),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new vh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Et(we),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||j("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function dS(){return new Ve(W.comparator)}function hS(){return new Ve(W.comparator)}var fB={asc:"ASCENDING",desc:"DESCENDING"},pB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gB={and:"AND",or:"OR"},qv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function zv(n,e){return n.useProto3Json||jh(e)?e:{value:e}}function _h(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function mB(n,e){return _h(n,e.toTimestamp())}function Ln(n){return De(!!n),ie.fromTimestamp(function(t){let r=fr(t);return new lt(r.seconds,r.nanos)}(n))}function Q_(n,e){return Gv(n,e).canonicalString()}function Gv(n,e){let t=function(i){return new Fe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function YS(n){let e=Fe.fromString(n);return De(tA(e)),e}function Wv(n,e){return Q_(n.databaseId,e.path)}function uv(n,e){let t=YS(e);if(t.get(1)!==n.databaseId.projectId)throw new B(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new B(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new W(JS(t))}function ZS(n,e){return Q_(n.databaseId,e)}function yB(n){let e=YS(n);return e.length===4?Fe.emptyPath():JS(e)}function Kv(n){return new Fe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function JS(n){return De(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function fS(n,e,t){return{name:Wv(n,e),fields:t.value.mapValue.fields}}function vB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,f){return l.useProto3Json?(De(f===void 0||typeof f=="string"),Dt.fromBase64String(f||"")):(De(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Dt.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let f=l.code===void 0?N.UNKNOWN:KS(l.code);return new B(f,l.message||"")}(s);t=new yh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=uv(n,r.document.name),o=Ln(r.document.updateTime),s=r.document.createTime?Ln(r.document.createTime):ie.min(),a=new hn({mapValue:{fields:r.document.fields}}),u=fn.newFoundDocument(i,o,s,a),l=r.targetIds||[],f=r.removedTargetIds||[];t=new ws(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=uv(n,r.document),o=r.readTime?Ln(r.readTime):ie.min(),s=fn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ws([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=uv(n,r.document),o=r.removedTargetIds||[];t=new ws([],o,i,null)}else{if(!("filter"in e))return Z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Bv(i,o),a=r.targetId;t=new mh(a,s)}}return t}function _B(n,e){let t;if(e instanceof Yi)t={update:fS(n,e.key,e.value)};else if(e instanceof ph)t={delete:Wv(n,e.key)};else if(e instanceof gr)t={update:fS(n,e.key,e.data),updateMask:AB(e.fieldMask)};else{if(!(e instanceof Vv))return Z();t={verify:Wv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Ms)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ki)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Qi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ns)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:mB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Z()}(n,e.precondition)),t}function wB(n,e){return n&&n.length>0?(De(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Ln(i.updateTime):Ln(o);return s.isEqual(ie.min())&&(s=Ln(o)),new Fv(s,i.transformResults||[])}(t,e))):[]}function IB(n,e){return{documents:[ZS(n,e.path)]}}function EB(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ZS(n,i);let o=function(l){if(l.length!==0)return eA(jn.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(f=>function(y){return{field:ys(y.field),direction:bB(y.dir)}}(f))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=zv(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function DB(n){let e=yB(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){De(r===1);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=function(p){let y=XS(p);return y instanceof jn&&xS(y)?y.getFilters():[y]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(y=>function(S){return new Ss(vs(S.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(y))}(t.orderBy));let a=null;t.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,jh(y)?null:y}(t.limit));let u=null;t.startAt&&(u=function(p){let y=!!p.before,w=p.values||[];return new Ts(w,y)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let y=!p.before,w=p.values||[];return new Ts(w,y)}(t.endAt)),Kj(e,i,s,o,a,"F",u,l)}function CB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function XS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=vs(t.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=vs(t.unaryFilter.field);return Je.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=vs(t.unaryFilter.field);return Je.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=vs(t.unaryFilter.field);return Je.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(n):n.fieldFilter!==void 0?function(t){return Je.create(vs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return jn.create(t.compositeFilter.filters.map(r=>XS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z()}}(t.compositeFilter.op))}(n):Z()}function bB(n){return fB[n]}function TB(n){return pB[n]}function SB(n){return gB[n]}function ys(n){return{fieldPath:n.canonicalString()}}function vs(n){return qt.fromServerFormat(n.fieldPath)}function eA(n){return n instanceof Je?function(t){if(t.op==="=="){if(XT(t.value))return{unaryFilter:{field:ys(t.field),op:"IS_NAN"}};if(JT(t.value))return{unaryFilter:{field:ys(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(XT(t.value))return{unaryFilter:{field:ys(t.field),op:"IS_NOT_NAN"}};if(JT(t.value))return{unaryFilter:{field:ys(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ys(t.field),op:TB(t.op),value:t.value}}}(n):n instanceof jn?function(t){let r=t.getFilters().map(i=>eA(i));return r.length===1?r[0]:{compositeFilter:{op:SB(t.op),filters:r}}}(n):Z()}function AB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function tA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Nc=class n{constructor(e,t,r,i,o=ie.min(),s=ie.min(),a=Dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Qv=class{constructor(e){this.ct=e}};function RB(n){let e=DB({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?kv(e,e.limit,"L"):e}var wh=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Sc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=fr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ni(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?RS(e)?this.dt(t,Number.MAX_SAFE_INTEGER):AS(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Ne(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),W.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};wh.vt=new wh;var Yv=class{constructor(){this.un=new Zv}addToCollectionParentIndex(e,t){return this.un.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(Gi.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(Gi.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},Zv=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Et(Fe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Et(Fe.comparator)).toArray()}};var i8=new Uint8Array(0);var Pn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(41943040,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);var xc=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Jv=class{constructor(){this.changes=new ri(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Xv=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var e_=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Tc(r.mutation,i,On.empty(),lt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ge()){let i=$i();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Ec();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=$i();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ge()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=pr(),s=bc(),a=function(){return bc()}();return t.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof gr)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),Tc(f.mutation,l,f.mutation.getFieldMask(),lt.now())):s.set(l.key,On.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),t.forEach((l,f)=>{var p;return a.set(l,new Xv(f,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=bc(),i=new Ve((s,a)=>s-a),o=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let f=r.get(u)||On.empty();f=a.applyToLocalView(l,f),r.set(u,f);let p=(i.get(a.batchId)||ge()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,f=u.value,p=jS();f.forEach(y=>{if(!o.has(y)){let w=GS(t.get(y),r.get(y));w!==null&&p.set(y,w),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return W.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Qj(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):O.resolve($i()),a=-1,u=o;return s.next(l=>O.forEach(l,(f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(f)?O.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ge())).next(f=>({batchId:a,changes:US(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new W(t)).next(r=>{let i=Ec();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Ec();return this.indexManager.getCollectionParents(e,o).next(a=>O.forEach(a,u=>{let l=function(p,y){return new As(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,y)=>{s=s.insert(p,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,fn.newInvalidDocument(f)))});let a=Ec();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&Tc(f.mutation,l,On.empty(),lt.now()),Hh(t,l)&&(a=a.insert(u,l))}),a})}};var t_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return O.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ln(i.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:RB(i.bundledQuery),readTime:Ln(i.readTime)}}(t)),O.resolve()}};var n_=class{constructor(){this.overlays=new Ve(W.comparator),this.Ir=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let r=$i();return O.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),O.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){let i=$i(),o=t.length+1,s=new W(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ve((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=$i(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let a=$i(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return O.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new jv(t,r));let o=this.Ir.get(t);o===void 0&&(o=ge(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var r_=class{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var Pc=class{constructor(){this.Tr=new Et(Ge.Er),this.dr=new Et(Ge.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Ge(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Ge(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new W(new Fe([])),r=new Ge(t,e),i=new Ge(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new W(new Fe([])),r=new Ge(t,e),i=new Ge(t,e+1),o=ge();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ge(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ge=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return W.comparator(e.key,t.key)||we(e.wr,t.wr)}static Ar(e,t){return we(e.wr,t.wr)||W.comparator(e.key,t.key)}};var i_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Et(Ge.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Lv(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Ge(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(s)}lookupMutationBatch(e,t){return O.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return O.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ge(t,0),i=new Ge(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),O.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Et(we);return t.forEach(i=>{let o=new Ge(i,0),s=new Ge(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;W.isDocumentKey(o)||(o=o.child(""));let s=new Ge(new W(o),0),a=new Et(we);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),O.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){De(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(t.mutations,i=>{let o=new Ge(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Ge(t,0),i=this.br.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var o_=class{constructor(e){this.Mr=e,this.docs=function(){return new Ve(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():fn.newInvalidDocument(t))}getEntries(e,t){let r=pr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():fn.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=pr(),s=t.path,a=new W(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Vj(Fj(f),r)<=0||(i.has(f.key)||Hh(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return O.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Z()}Or(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new s_(this)}getSize(e){return O.resolve(this.size)}},s_=class extends Jv{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var a_=class{constructor(e){this.persistence=e,this.Nr=new ri(t=>G_(t),W_),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Pc,this.targetCount=0,this.kr=xc.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),O.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new xc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.Kn(t),O.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(o).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),O.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),O.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.Br.containsKey(t))}};var c_=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new TS(0),this.Kr=!1,this.Kr=!0,this.$r=new r_,this.referenceDelegate=e(this),this.Ur=new a_(this),this.indexManager=new Yv,this.remoteDocumentCache=function(i){return new o_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Qv(t),this.Gr=new t_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new n_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new i_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){j("MemoryPersistence","Starting transaction:",e);let i=new u_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},u_=class extends Iv{constructor(e){super(),this.currentSequenceNumber=e}},l_=class n{constructor(e){this.persistence=e,this.Jr=new Pc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),O.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{let i=W.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,ie.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return O.or([()=>O.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var d_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ge(),i=ge();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var h_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var f_=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Ab()?8:Uj(rt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new h_;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Ic()<=pe.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",ms(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(Ic()<=pe.DEBUG&&j("QueryEngine","Query:",ms(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ic()<=pe.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",ms(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(t))):O.resolve())}Yi(e,t){if(rS(t))return O.resolve(null);let r=Vn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=kv(t,null,"F"),r=Vn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ge(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,kv(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return rS(t)||i.isEqual(ie.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?O.resolve(null):(Ic()<=pe.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ms(t)),this.rs(e,s,t,kj(i,-1)).next(a=>a))})}ts(e,t){let r=new Et(VS(e));return t.forEach((i,o)=>{Hh(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Ic()<=pe.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",ms(t)),this.Ji.getDocumentsMatchingQuery(e,t,Gi.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var p_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ve(we),this._s=new ri(o=>G_(o),W_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new e_(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function MB(n,e,t,r){return new p_(n,e,t,r)}function nA(n,e){return v(this,null,function*(){let t=te(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ge();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){a.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function NB(n,e){let t=te(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,f){let p=l.batch,y=p.keys(),w=O.resolve();return y.forEach(S=>{w=w.next(()=>f.getEntry(u,S)).next(M=>{let R=l.docVersions.get(S);De(R!==null),M.version.compareTo(R)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),f.addEntry(M)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ge();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function rA(n){let e=te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function xB(n,e){let t=te(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((f,p)=>{let y=i.get(p);if(!y)return;a.push(t.Ur.removeMatchingKeys(o,f.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,f.addedDocuments,p)));let w=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(Dt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),i=i.insert(p,w),function(M,R,L){return M.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(y,w,f)&&a.push(t.Ur.updateTargetData(o,w))});let u=pr(),l=ge();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(PB(o,s,e.documentUpdates).next(f=>{u=f.Ps,l=f.Is})),!r.isEqual(ie.min())){let f=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return O.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function PB(n,e,t){let r=ge(),i=ge();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=pr();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function OB(n,e){let t=te(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function kB(n,e){let t=te(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,O.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Nc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function g_(n,e,t){return v(this,null,function*(){let r=te(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Uc(s))throw s;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function pS(n,e,t){let r=te(n),i=ie.min(),o=ge();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,f){let p=te(u),y=p._s.get(f);return y!==void 0?O.resolve(p.os.get(y)):p.Ur.getTargetData(l,f)}(r,s,Vn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:ie.min(),t?o:ge())).next(a=>(FB(r,Zj(e),a),{documents:a,Ts:o})))}function FB(n,e,t){let r=n.us.get(e)||ie.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}var Ih=class{constructor(){this.activeTargetIds=rB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var m_=class{constructor(){this.so=new Ih,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ih,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var y_=class{_o(e){}shutdown(){}};var Eh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ih=null;function lv(){return ih===null?ih=function(){return 268435456+Math.round(2147483648*Math.random())}():ih++,"0x"+ih.toString(16)}var VB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var v_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var It="WebChannelConnection",__=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=lv(),u=this.xo(t,r.toUriEncodedString());j("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(f=>(j("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw Es("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ks}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=VB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=lv();return new Promise((s,a)=>{let u=new iv;u.setWithCredentials(!0),u.listenOnce(ov.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case wc.NO_ERROR:let f=u.getResponseJson();j(It,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case wc.TIMEOUT:j(It,`RPC '${e}' ${o} timed out`),a(new B(N.DEADLINE_EXCEEDED,"Request time out"));break;case wc.HTTP_ERROR:let p=u.getStatus();if(j(It,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let w=y?.error;if(w&&w.status&&w.message){let S=function(R){let L=R.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(L)>=0?L:N.UNKNOWN}(w.status);a(new B(S,w.message))}else a(new B(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new B(N.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{j(It,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);j(It,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=lv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=cv(),a=av(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let f=o.join("");j(It,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u),y=!1,w=!1,S=new v_({Io:R=>{w?j(It,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(y||(j(It,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),j(It,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),M=(R,L,G)=>{R.listen(L,K=>{try{G(K)}catch(le){setTimeout(()=>{throw le},0)}})};return M(p,gs.EventType.OPEN,()=>{w||(j(It,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),M(p,gs.EventType.CLOSE,()=>{w||(w=!0,j(It,`RPC '${e}' stream ${i} transport closed`),S.So())}),M(p,gs.EventType.ERROR,R=>{w||(w=!0,Es(It,`RPC '${e}' stream ${i} transport errored:`,R),S.So(new B(N.UNAVAILABLE,"The operation could not be completed")))}),M(p,gs.EventType.MESSAGE,R=>{var L;if(!w){let G=R.data[0];De(!!G);let K=G,le=K.error||((L=K[0])===null||L===void 0?void 0:L.error);if(le){j(It,`RPC '${e}' stream ${i} received error:`,le);let xe=le.status,ne=function(_){let E=ze[_];if(E!==void 0)return KS(E)}(xe),D=le.message;ne===void 0&&(ne=N.INTERNAL,D="Unknown error status: "+xe+" with message "+le.message),w=!0,S.So(new B(ne,D)),p.close()}else j(It,`RPC '${e}' stream ${i} received:`,G),S.bo(G)}}),M(a,sv.STAT_EVENT,R=>{R.stat===nh.PROXY?j(It,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===nh.NOPROXY&&j(It,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}};function dv(){return typeof document<"u"?document:null}function qh(n){return new qv(n,!0)}var Dh=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Ch=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Dh(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return v(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return v(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return v(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(hr(t.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new B(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>v(this,null,function*(){this.state=0,this.start()}))}I_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},w_=class extends Ch{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=vB(this.serializer,e),r=function(o){if(!("targetChange"in o))return ie.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ie.min():s.readTime?Ln(s.readTime):ie.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Kv(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=Ov(u)?{documents:IB(o,u)}:{query:EB(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=QS(o,s.resumeToken);let l=zv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ie.min())>0){a.readTime=_h(o,s.snapshotVersion.toTimestamp());let l=zv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=CB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Kv(this.serializer),t.removeTarget=e,this.a_(t)}},I_=class extends Ch{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return De(!!e.streamToken),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=wB(e.writeResults,e.commitTime),r=Ln(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Kv(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>_B(this.serializer,r))};this.a_(t)}};var E_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new B(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Gv(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(N.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Gv(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(N.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},D_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(hr(t),this.D_=!1):j("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var C_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>v(this,null,function*(){Zi(this)&&(j("RemoteStore","Restarting streams for network reachability change."),yield function(u){return v(this,null,function*(){let l=te(u);l.L_.add(4),yield jc(l),l.q_.set("Unknown"),l.L_.delete(4),yield zh(l)})}(this))}))}),this.q_=new D_(r,i)}};function zh(n){return v(this,null,function*(){if(Zi(n))for(let e of n.B_)yield e(!0)})}function jc(n){return v(this,null,function*(){for(let e of n.B_)yield e(!1)})}function iA(n,e){let t=te(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),X_(t)?J_(t):Vs(t).r_()&&Z_(t,e))}function Y_(n,e){let t=te(n),r=Vs(t);t.N_.delete(e),r.r_()&&oA(t,e),t.N_.size===0&&(r.r_()?r.o_():Zi(t)&&t.q_.set("Unknown"))}function Z_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vs(n).A_(e)}function oA(n,e){n.Q_.xe(e),Vs(n).R_(e)}function J_(n){n.Q_=new Hv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Vs(n).start(),n.q_.v_()}function X_(n){return Zi(n)&&!Vs(n).n_()&&n.N_.size>0}function Zi(n){return te(n).L_.size===0}function sA(n){n.Q_=void 0}function LB(n){return v(this,null,function*(){n.q_.set("Online")})}function UB(n){return v(this,null,function*(){n.N_.forEach((e,t)=>{Z_(n,e)})})}function jB(n,e){return v(this,null,function*(){sA(n),X_(n)?(n.q_.M_(e),J_(n)):n.q_.set("Unknown")})}function BB(n,e,t){return v(this,null,function*(){if(n.q_.set("Online"),e instanceof yh&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bh(n,r)}else if(e instanceof ws?n.Q_.Ke(e):e instanceof mh?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ie.min()))try{let r=yield rA(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.N_.get(l);f&&o.N_.set(l,f.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let f=o.N_.get(u);if(!f)return;o.N_.set(u,f.withResumeToken(Dt.EMPTY_BYTE_STRING,f.snapshotVersion)),oA(o,u);let p=new Nc(f.target,u,l,f.sequenceNumber);Z_(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){j("RemoteStore","Failed to raise snapshot:",r),yield bh(n,r)}})}function bh(n,e,t){return v(this,null,function*(){if(!Uc(e))throw e;n.L_.add(1),yield jc(n),n.q_.set("Offline"),t||(t=()=>rA(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){j("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield zh(n)}))})}function aA(n,e){return e().catch(t=>bh(n,t,e))}function Gh(n){return v(this,null,function*(){let e=te(n),t=ii(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$B(e);)try{let i=yield OB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,HB(e,i)}catch(i){yield bh(e,i)}cA(e)&&uA(e)})}function $B(n){return Zi(n)&&n.O_.length<10}function HB(n,e){n.O_.push(e);let t=ii(n);t.r_()&&t.V_&&t.m_(e.mutations)}function cA(n){return Zi(n)&&!ii(n).n_()&&n.O_.length>0}function uA(n){ii(n).start()}function qB(n){return v(this,null,function*(){ii(n).p_()})}function zB(n){return v(this,null,function*(){let e=ii(n);for(let t of n.O_)e.m_(t.mutations)})}function GB(n,e,t){return v(this,null,function*(){let r=n.O_.shift(),i=Uv.from(r,e,t);yield aA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Gh(n)})}function WB(n,e){return v(this,null,function*(){e&&ii(n).V_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return lB(s)&&s!==N.ABORTED}(i.code)){let o=r.O_.shift();ii(r).s_(),yield aA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Gh(r)}})}(n,e)),cA(n)&&uA(n)})}function gS(n,e){return v(this,null,function*(){let t=te(n);t.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");let r=Zi(t);t.L_.add(3),yield jc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield zh(t)})}function KB(n,e){return v(this,null,function*(){let t=te(n);e?(t.L_.delete(2),yield zh(t)):e||(t.L_.add(2),yield jc(t),t.q_.set("Unknown"))})}function Vs(n){return n.K_||(n.K_=function(t,r,i){let o=te(t);return o.w_(),new w_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:LB.bind(null,n),Ro:UB.bind(null,n),mo:jB.bind(null,n),d_:BB.bind(null,n)}),n.B_.push(e=>v(this,null,function*(){e?(n.K_.s_(),X_(n)?J_(n):n.q_.set("Unknown")):(yield n.K_.stop(),sA(n))}))),n.K_}function ii(n){return n.U_||(n.U_=function(t,r,i){let o=te(t);return o.w_(),new I_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:qB.bind(null,n),mo:WB.bind(null,n),f_:zB.bind(null,n),g_:GB.bind(null,n)}),n.B_.push(e=>v(this,null,function*(){e?(n.U_.s_(),yield Gh(n)):(yield n.U_.stop(),n.O_.length>0&&(j("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var b_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ew(n,e){if(hr("AsyncQueue",`${e}: ${n}`),Uc(n))return new B(N.UNAVAILABLE,`${e}: ${n}`);throw n}var Th=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||W.comparator(t.key,r.key):(t,r)=>W.comparator(t.key,r.key),this.keyedMap=Ec(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Sh=class{constructor(){this.W_=new Ve(W.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ps=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Th.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var T_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},S_=class{constructor(){this.queries=mS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=te(t),o=i.queries;i.queries=mS(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new B(N.ABORTED,"Firestore shutting down"))}};function mS(){return new ri(n=>FS(n),$h)}function lA(n,e){return v(this,null,function*(){let t=te(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new T_,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=ew(s,`Initialization of query '${ms(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&tw(t)})}function dA(n,e){return v(this,null,function*(){let t=te(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function QB(n,e){let t=te(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&tw(t)}function YB(n,e,t){let r=te(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function tw(n){n.Y_.forEach(e=>{e.next()})}var A_,yS;(yS=A_||(A_={})).ea="default",yS.Cache="cache";var Ah=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ps(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ps.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==A_.Cache}};var Rh=class{constructor(e){this.key=e}},Mh=class{constructor(e){this.key=e}},R_=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=VS(e),this.Ra=new Th(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Sh,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let y=i.get(f),w=Hh(this.query,p)?p:null,S=!!y&&this.mutatedKeys.has(y.key),M=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations),R=!1;y&&w?y.data.isEqual(w.data)?S!==M&&(r.track({type:3,doc:w}),R=!0):this.ga(y,w)||(r.track({type:2,doc:w}),R=!0,(u&&this.Aa(w,u)>0||l&&this.Aa(w,l)<0)&&(a=!0)):!y&&w?(r.track({type:0,doc:w}),R=!0):y&&!w&&(r.track({type:1,doc:y}),R=!0,(u||l)&&(a=!0)),R&&(w?(s=s.add(w),o=M?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((f,p)=>function(w,S){let M=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return M(w)-M(S)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new Ps(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Sh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ge(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Mh(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Rh(r))}),t}ba(e){this.Ta=e.Ts,this.da=ge();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ps.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},M_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},N_=class{constructor(e){this.key=e,this.va=!1}},x_=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new ri(a=>FS(a),$h),this.Ma=new Map,this.xa=new Set,this.Oa=new Ve(W.comparator),this.Na=new Map,this.La=new Pc,this.Ba={},this.ka=new Map,this.qa=xc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function ZB(n,e,t=!0){return v(this,null,function*(){let r=yA(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield hA(r,e,t,!0),i})}function JB(n,e){return v(this,null,function*(){let t=yA(n);yield hA(t,e,!0,!1)})}function hA(n,e,t,r){return v(this,null,function*(){let i=yield kB(n.localStore,Vn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield XB(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&iA(n.remoteStore,i),a})}function XB(n,e,t,r,i){return v(this,null,function*(){n.Ka=(p,y,w)=>function(M,R,L,G){return v(this,null,function*(){let K=R.view.ma(L);K.ns&&(K=yield pS(M.localStore,R.query,!1).then(({documents:D})=>R.view.ma(D,K)));let le=G&&G.targetChanges.get(R.targetId),xe=G&&G.targetMismatches.get(R.targetId)!=null,ne=R.view.applyChanges(K,M.isPrimaryClient,le,xe);return _S(M,R.targetId,ne.wa),ne.snapshot})}(n,p,y,w);let o=yield pS(n.localStore,e,!0),s=new R_(e,o.Ts),a=s.ma(o.documents),u=Mc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);_S(n,t,l.wa);let f=new M_(e,t,s);return n.Fa.set(e,f),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function e$(n,e,t){return v(this,null,function*(){let r=te(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!$h(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield g_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Y_(r.remoteStore,i.targetId),P_(r,i.targetId)}).catch(Lc))):(P_(r,i.targetId),yield g_(r.localStore,i.targetId,!0))})}function t$(n,e){return v(this,null,function*(){let t=te(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Y_(t.remoteStore,r.targetId))})}function n$(n,e,t){return v(this,null,function*(){let r=u$(n);try{let i=yield function(s,a){let u=te(s),l=lt.now(),f=a.reduce((w,S)=>w.add(S.key),ge()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=pr(),M=ge();return u.cs.getEntries(w,f).next(R=>{S=R,S.forEach((L,G)=>{G.isValidDocument()||(M=M.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,S)).next(R=>{p=R;let L=[];for(let G of a){let K=uB(G,p.get(G.key).overlayedDocument);K!=null&&L.push(new gr(G.key,K,MS(K.value.mapValue),ei.exists(!0)))}return u.mutationQueue.addMutationBatch(w,l,L,a)}).next(R=>{y=R;let L=R.applyToLocalDocumentSet(p,M);return u.documentOverlayCache.saveOverlays(w,R.batchId,L)})}).then(()=>({batchId:y.batchId,changes:US(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Ve(we)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Bc(r,i.changes),yield Gh(r.remoteStore)}catch(i){let o=ew(i,"Failed to persist write");t.reject(o)}})}function fA(n,e){return v(this,null,function*(){let t=te(n);try{let r=yield xB(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?De(s.va):i.removedDocuments.size>0&&(De(s.va),s.va=!1))}),yield Bc(t,r,e)}catch(r){yield Lc(r)}})}function vS(n,e,t){let r=te(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=te(s);u.onlineState=a;let l=!1;u.queries.forEach((f,p)=>{for(let y of p.j_)y.Z_(a)&&(l=!0)}),l&&tw(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function r$(n,e,t){return v(this,null,function*(){let r=te(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Ve(W.comparator);s=s.insert(o,fn.newNoDocument(o,ie.min()));let a=ge().add(o),u=new gh(ie.min(),new Map,new Ve(we),s,a);yield fA(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),nw(r)}else yield g_(r.localStore,e,!1).then(()=>P_(r,e,t)).catch(Lc)})}function i$(n,e){return v(this,null,function*(){let t=te(n),r=e.batch.batchId;try{let i=yield NB(t.localStore,e);gA(t,r,null),pA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Bc(t,i)}catch(i){yield Lc(i)}})}function o$(n,e,t){return v(this,null,function*(){let r=te(n);try{let i=yield function(s,a){let u=te(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(De(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})}(r.localStore,e);gA(r,e,t),pA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Bc(r,i)}catch(i){yield Lc(i)}})}function pA(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function gA(n,e,t){let r=te(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function P_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||mA(n,r)})}function mA(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Y_(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),nw(n))}function _S(n,e,t){for(let r of t)r instanceof Rh?(n.La.addReference(r.key,e),s$(n,r)):r instanceof Mh?(j("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||mA(n,r.key)):Z()}function s$(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(j("SyncEngine","New document in limbo: "+t),n.xa.add(r),nw(n))}function nw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new W(Fe.fromString(e)),r=n.qa.next();n.Na.set(r,new N_(t)),n.Oa=n.Oa.insert(t,r),iA(n.remoteStore,new Nc(Vn(Bh(t.path)),r,"TargetPurposeLimboResolution",TS.oe))}}function Bc(n,e,t){return v(this,null,function*(){let r=te(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var f;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(f=t?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=d_.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return v(this,null,function*(){let f=te(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(l,y=>O.forEach(y.$i,w=>f.persistence.referenceDelegate.addReference(p,y.targetId,w)).next(()=>O.forEach(y.Ui,w=>f.persistence.referenceDelegate.removeReference(p,y.targetId,w)))))}catch(p){if(!Uc(p))throw p;j("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let w=f.os.get(y),S=w.snapshotVersion,M=w.withLastLimboFreeSnapshotVersion(S);f.os=f.os.insert(y,M)}}})}(r.localStore,o))})}function a$(n,e){return v(this,null,function*(){let t=te(n);if(!t.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());let r=yield nA(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new B(N.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Bc(t,r.hs)}})}function c$(n,e){let t=te(n),r=t.Na.get(e);if(r&&r.va)return ge().add(r.key);{let i=ge(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function yA(n){let e=te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=c$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r$.bind(null,e),e.Ca.d_=QB.bind(null,e.eventManager),e.Ca.$a=YB.bind(null,e.eventManager),e}function u$(n){let e=te(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=i$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=o$.bind(null,e),e}var wS=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=qh(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return MB(this.persistence,new f_,t.initialUser,this.serializer)}Ga(t){return new c_(l_.Zr,this.serializer)}Wa(t){return new m_}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var l$=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>vS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=a$.bind(null,this.syncEngine),yield KB(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new S_}()}createDatastore(t){let r=qh(t.databaseInfo.databaseId),i=function(s){return new __(s)}(t.databaseInfo);return function(s,a,u,l){return new E_(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new C_(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>vS(this.syncEngine,r,0),function(){return Eh.D()?new Eh:new y_}())}createSyncEngine(t,r){return function(o,s,a,u,l,f,p){let y=new x_(o,s,a,u,l,f);return p&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield function(o){return v(this,null,function*(){let s=te(o);j("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield jc(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Nh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var O_=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=it.UNAUTHENTICATED,this.clientId=ch.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){j("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(j("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ew(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function hv(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(this,null,function*(){r.isEqual(i)||(yield nA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function IS(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield d$(n);j("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>gS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>gS(e.remoteStore,i)),n._onlineComponents=e})}function d$(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield hv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Es("Error using user provided cache. Falling back to memory cache: "+t),yield hv(n,new wS)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield hv(n,new wS);return n._offlineComponents})}function vA(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield IS(n,n._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield IS(n,new l$))),n._onlineComponents})}function h$(n){return vA(n).then(e=>e.syncEngine)}function k_(n){return v(this,null,function*(){let e=yield vA(n),t=e.eventManager;return t.onListen=ZB.bind(null,e.syncEngine),t.onUnlisten=e$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=JB.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=t$.bind(null,e.syncEngine),t})}function f$(n,e,t={}){let r=new kn;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(o,s,a,u,l){let f=new Nh({next:y=>{f.Za(),s.enqueueAndForget(()=>dA(o,p));let w=y.docs.has(a);!w&&y.fromCache?l.reject(new B(N.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&y.fromCache&&u&&u.source==="server"?l.reject(new B(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new Ah(Bh(a.path),f,{includeMetadataChanges:!0,_a:!0});return lA(o,p)}(yield k_(n),n.asyncQueue,e,t,r)})),r.promise}function _A(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var ES=new Map;function wA(n,e,t){if(!t)throw new B(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function p$(n,e,t,r){if(e===!0&&r===!0)throw new B(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function DS(n){if(!W.isDocumentKey(n))throw new B(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function CS(n){if(W.isDocumentKey(n))throw new B(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function rw(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Z()}function dr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new B(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=rw(n);throw new B(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var xh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}p$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_A((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Os=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new fv;switch(r.type){case"firstParty":return new yv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=ES.get(t);r&&(j("ComponentProvider","Removing Datastore"),ES.delete(t),r.terminate())}(this),Promise.resolve()}};function IA(n,e,t,r={}){var i;let o=(n=dr(n,Os))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Es("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=it.MOCK_USER;else{a=Eb(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new B(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new it(l)}n._authCredentials=new pv(new ah(a,u))}}var Ph=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ot=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ti=class n extends Ph{constructor(e,t,r){super(e,t,Bh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new W(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function EA(n,e,...t){if(n=ut(n),wA("collection","path",e),n instanceof Os){let r=Fe.fromString(e,...t);return CS(r),new ti(n,null,r)}{if(!(n instanceof Ot||n instanceof ti))throw new B(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Fe.fromString(e,...t));return CS(r),new ti(n.firestore,null,r)}}function iw(n,e,...t){if(n=ut(n),arguments.length===1&&(e=ch.newId()),wA("doc","path",e),n instanceof Os){let r=Fe.fromString(e,...t);return DS(r),new Ot(n,null,new W(r))}{if(!(n instanceof Ot||n instanceof ti))throw new B(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Fe.fromString(e,...t));return DS(r),new Ot(n.firestore,n instanceof ti?n.converter:null,new W(r))}}var Oh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Dh(this,"async_queue_retry"),this.Vu=()=>{let r=dv();r&&j("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=dv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=dv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new kn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return v(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Uc(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw hr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=b_.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&Z()}verifyOperationInProgress(){}wu(){return v(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function bS(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var oi=class extends Os{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Oh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Oh(e),this._firestoreClient=void 0,yield e}})}};function DA(n,e){let t=typeof n=="object"?n:us(),r=typeof n=="string"?n:e||"(default)",i=uc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Ib("firestore");o&&IA(i,...o)}return i}function ow(n){if(n._terminated)throw new B(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||g$(n),n._firestoreClient}function g$(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,f){return new Ev(a,u,l,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,_A(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new O_(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var Oc=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Dt.fromBase64String(e))}catch(t){throw new B(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var kc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new B(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var kh=class{constructor(e){this._methodName=e}};var Fc=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new B(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new B(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}};var Vc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var m$=/^__.*__$/,F_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new gr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yi(e,this.data,t,this.fieldTransforms)}};function CA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}var V_=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Fh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(CA(this.Cu)&&m$.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},L_=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||qh(e)}Qu(e,t,r,i=!1){return new V_({Cu:e,methodName:t,qu:r,path:qt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function bA(n){let e=n._freezeSettings(),t=qh(n._databaseId);return new L_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TA(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);MA("Data must be an object, but it was:",s,r);let a=AA(r,s),u,l;if(o.merge)u=new On(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let y=y$(e,p,t);if(!s.contains(y))throw new B(N.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);_$(f,y)||f.push(y)}u=new On(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new F_(new hn(a),u,l)}function SA(n,e){if(RA(n=ut(n)))return MA("Unsupported field value:",e,n),AA(n,e);if(n instanceof kh)return function(r,i){if(!CA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=SA(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=ut(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=lt.fromDate(r);return{timestampValue:_h(i.serializer,o)}}if(r instanceof lt){let o=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_h(i.serializer,o)}}if(r instanceof Fc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Oc)return{bytesValue:QS(i.serializer,r._byteString)};if(r instanceof Ot){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Q_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return K_(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${rw(r)}`)}(n,e)}function AA(n,e){let t={};return SS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(n,(r,i)=>{let o=SA(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function RA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof lt||n instanceof Fc||n instanceof Oc||n instanceof Ot||n instanceof kh||n instanceof Vc)}function MA(n,e,t){if(!RA(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=rw(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function y$(n,e,t){if((e=ut(e))instanceof kc)return e._internalPath;if(typeof e=="string")return NA(n,e);throw Fh("Field path arguments must be of type string or ",n,!1,void 0,t)}var v$=new RegExp("[~\\*/\\[\\]]");function NA(n,e,t){if(e.search(v$)>=0)throw Fh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new kc(...e.split("."))._internalPath}catch{throw Fh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Fh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new B(N.INVALID_ARGUMENT,a+n+u)}function _$(n,e){return n.some(t=>t.isEqual(e))}var Vh=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new U_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(xA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},U_=class extends Vh{data(){return super.data()}};function xA(n,e){return typeof e=="string"?NA(n,e):e instanceof kc?e._internalPath:e._delegate._internalPath}function w$(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new B(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var j_=class{convertValue(e,t="none"){switch(Wi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Fs(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ne(s.doubleValue));return new Vc(o)}convertGeoPoint(e){return new Fc(Ne(e.latitude),Ne(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=q_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ac(e));default:return null}}convertTimestamp(e){let t=fr(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Fe.fromString(e);De(tA(r));let i=new hh(r.get(1),r.get(3)),o=new W(r.popFirst(5));return i.isEqual(t)||hr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function PA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var qi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Lh=class extends Vh{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Is(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(xA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Is=class extends Lh{data(e={}){return super.data(e)}},B_=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new qi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Is(this._firestore,this._userDataWriter,r.key,r,new qi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new B(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Is(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Is(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:I$(a.type),doc:u,oldIndex:l,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function I$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}function OA(n){n=dr(n,Ot);let e=dr(n.firestore,oi);return f$(ow(e),n._key).then(t=>LA(e,n,t))}var Uh=class extends j_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}};function kA(n,e,t){n=dr(n,Ot);let r=dr(n.firestore,oi),i=PA(n.converter,e,t);return VA(r,[TA(bA(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ei.none())])}function FA(n,e){let t=dr(n.firestore,oi),r=iw(n),i=PA(n.converter,e);return VA(t,[TA(bA(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ei.exists(!1))]).then(()=>r)}function sw(n,...e){var t,r,i;n=ut(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||bS(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(bS(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,f;if(n instanceof Ot)l=dr(n.firestore,oi),f=Bh(n._key.path),u={next:p=>{e[s]&&e[s](LA(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=dr(n,Ph);l=dr(p.firestore,oi),f=p._query;let y=new Uh(l);u={next:w=>{e[s]&&e[s](new B_(l,y,p,w))},error:e[s+1],complete:e[s+2]},w$(n._query)}return function(y,w,S,M){let R=new Nh(M),L=new Ah(w,R,S);return y.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return lA(yield k_(y),L)})),()=>{R.Za(),y.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return dA(yield k_(y),L)}))}}(ow(l),f,a,u)}function VA(n,e){return function(r,i){let o=new kn;return r.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return n$(yield h$(r),i,o)})),o.promise}(ow(n),e)}function LA(n,e,t){let r=t.docs.get(e._key),i=new Uh(n);return new Lh(n,i,e._key,r,new qi(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ks=i})(Kr),Wr(new Xt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new oi(new gv(r.getProvider("auth-internal")),new _v(r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hh(l.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ze(KT,"4.7.3",e),Ze(KT,"4.7.3","esm2017")})();var Wh=function(){return Wh=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Wh.apply(this,arguments)};var C$={includeMetadataChanges:!1};function UA(n,e){return e===void 0&&(e=C$),new he(function(t){var r=sw(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function jA(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Wh(Wh({},r),(t={},t[e.idField]=n.id,t))}function BA(n){return UA(n,{includeMetadataChanges:!0}).pipe(J(function(e){return e.docs}))}function $A(n,e){return e===void 0&&(e={}),BA(n).pipe(J(function(t){return t.map(function(r){return jA(r,e)})}))}var pn=class{constructor(e){return e}},HA="firestore",aw=class{constructor(){return lc(HA)}};var cw=new H("angularfire2.firestore-instances");function b$(n,e){let t=Pd(HA,n,e);return t&&new pn(t)}function T$(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new pn(r)}}var S$={provide:aw,deps:[[new mt,cw]]},A$={provide:pn,useFactory:b$,deps:[[new mt,cw],sr]};function qA(n,...e){return Ze("angularfire",ki.full,"fst"),Dn([A$,S$,{provide:cw,useFactory:T$(n),multi:!0,deps:[Ie,st,hs,Fi,[new mt,_c],[new mt,ds],...e]}])}var zA=Ht($A,!0);var GA=Ht(FA,!0);var Kh=Ht(EA,!0);var $c=Ht(iw,!0);var Qh=Ht(OA,!0);var WA=Ht(DA,!0);var KA=Ht(kA,!0);function R$(n,e){if(n&1){let t=Sn();k(0,"li",3)(1,"h2",4),U(2),P(),k(3,"p")(4,"strong"),U(5,"Date:"),P(),U(6),P(),k(7,"p")(8,"strong"),U(9,"Difficulty:"),P(),U(10),P(),k(11,"p")(12,"strong"),U(13,"Participants:"),P(),U(14),P(),k(15,"p")(16,"strong"),U(17,"Organized By:"),P(),U(18),P(),k(19,"button",5),Ue("click",function(){let i=Ae(t).$implicit,o=zo();return Re(o.viewDetails(i))}),U(20," View Details "),P()()}if(n&2){let t=e.$implicit;ue(2),Hg(t.name),ue(4),Si(" ",t.date,""),ue(4),Si(" ",t.difficulty,""),ue(4),Si(" ",t.participants,""),ue(4),Si(" ",t.createdByName,"")}}var QA=(()=>{class n{viewDetails(t){throw new Error("Method not implemented.")}constructor(){this.firestore=x(pn);let t=Kh(this.firestore,"tours");this.tours$=zA(t,{idField:"id"}).pipe(Mt(r=>{if(r.length===0)return Q([]);let i=r.map(o=>Qh($c(this.firestore,"users",o.createdBy)).then(s=>ae(V({},o),{createdByName:s.exists()?s.data()?.firstName:"Unknown"})));return gi(i)}))}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=et({type:n,selectors:[["app-home"]],standalone:!0,features:[tt],decls:6,vars:3,consts:[[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],["class","mb-4 p-4 border rounded shadow",4,"ngFor","ngForOf"],[1,"mb-4","p-4","border","rounded","shadow"],[1,"text-xl","font-semibold"],[1,"mt-2","py-2","px-4","bg-blue-600","text-white","rounded","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"click"]],template:function(r,i){r&1&&(k(0,"div",0)(1,"h1",1),U(2,"Hiking Tours"),P(),k(3,"ul"),Qe(4,R$,21,5,"li",2),Na(5,"async"),P()()),r&2&&(ue(4),Le("ngForOf",xa(5,1,i.tours$)))},dependencies:[un,pC,id]})}}return n})();var oR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(z(Jn),z(bn))}}static{this.\u0275dir=ke({type:n})}}return n})(),rf=(()=>{class n extends oR{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Zn(n)))(i||n)}})()}static{this.\u0275dir=ke({type:n,features:[Yt]})}}return n})(),Qc=new H("");var M$={provide:Qc,useExisting:En(()=>si),multi:!0};function N$(){let n=er()?er().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var x$=new H(""),si=(()=>{class n extends oR{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!N$())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(z(Jn),z(bn),z(x$,8))}}static{this.\u0275dir=ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ue("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Lr([M$]),Yt]})}}return n})();function P$(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var lw=new H(""),sR=new H("");function O$(n){return P$(n.value)?{required:!0}:null}function YA(n){return null}function aR(n){return n!=null}function cR(n){return Ur(n)?Me(n):n}function uR(n){let e={};return n.forEach(t=>{e=t!=null?V(V({},e),t):e}),Object.keys(e).length===0?null:e}function lR(n,e){return e.map(t=>t(n))}function k$(n){return!n.validate}function dR(n){return n.map(e=>k$(e)?e:t=>e.validate(t))}function F$(n){if(!n)return null;let e=n.filter(aR);return e.length==0?null:function(t){return uR(lR(t,e))}}function dw(n){return n!=null?F$(dR(n)):null}function V$(n){if(!n)return null;let e=n.filter(aR);return e.length==0?null:function(t){let r=lR(t,e).map(cR);return ep(r).pipe(J(uR))}}function hw(n){return n!=null?V$(dR(n)):null}function ZA(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function L$(n){return n._rawValidators}function U$(n){return n._rawAsyncValidators}function uw(n){return n?Array.isArray(n)?n:[n]:[]}function Zh(n,e){return Array.isArray(n)?n.includes(e):n===e}function JA(n,e){let t=uw(e);return uw(n).forEach(i=>{Zh(t,i)||t.push(i)}),t}function XA(n,e){return uw(e).filter(t=>!Zh(n,t))}var Jh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=dw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=hw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},js=class extends Jh{get formDirective(){return null}get path(){return null}},Kc=class extends Jh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Xh=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},j$={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},a7=ae(V({},j$),{"[class.ng-submitted]":"isSubmitted"}),$s=(()=>{class n extends Xh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(z(Kc,2))}}static{this.\u0275dir=ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ql("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Yt]})}}return n})(),Hs=(()=>{class n extends Xh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(z(js,10))}}static{this.\u0275dir=ke({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ql("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Yt]})}}return n})();var Hc="VALID",Yh="INVALID",Ls="PENDING",qc="DISABLED",Bs=class{},ef=class extends Bs{constructor(e,t){super(),this.value=e,this.source=t}},Gc=class extends Bs{constructor(e,t){super(),this.pristine=e,this.source=t}},Wc=class extends Bs{constructor(e,t){super(),this.touched=e,this.source=t}},Us=class extends Bs{constructor(e,t){super(),this.status=e,this.source=t}};function hR(n){return(of(n)?n.validators:n)||null}function B$(n){return Array.isArray(n)?dw(n):n||null}function fR(n,e){return(of(e)?e.asyncValidators:n)||null}function $$(n){return Array.isArray(n)?hw(n):n||null}function of(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function H$(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new $(1e3,"");if(!r[t])throw new $(1001,"")}function q$(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new $(1002,"")})}var tf=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Pa(()=>this.statusReactive()),this.statusReactive=Ra(void 0),this._pristine=Pa(()=>this.pristineReactive()),this.pristineReactive=Ra(!0),this._touched=Pa(()=>this.touchedReactive()),this.touchedReactive=Ra(!1),this._events=new Xe,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return cn(this.statusReactive)}set status(e){cn(()=>this.statusReactive.set(e))}get valid(){return this.status===Hc}get invalid(){return this.status===Yh}get pending(){return this.status==Ls}get disabled(){return this.status===qc}get enabled(){return this.status!==qc}get pristine(){return cn(this.pristineReactive)}set pristine(e){cn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return cn(this.touchedReactive)}set touched(e){cn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(JA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(JA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(XA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(XA(e,this._rawAsyncValidators))}hasValidator(e){return Zh(this._rawValidators,e)}hasAsyncValidator(e){return Zh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ae(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Wc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Wc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ae(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Gc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Gc(!0,r))}markAsPending(e={}){this.status=Ls;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Us(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ae(V({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=qc,this.errors=null,this._forEachChild(i=>{i.disable(ae(V({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ef(this.value,r)),this._events.next(new Us(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Hc,this._forEachChild(r=>{r.enable(ae(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ae(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Hc||this.status===Ls)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ef(this.value,t)),this._events.next(new Us(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ae(V({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qc:Hc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ls,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=cR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Us(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new He,this.statusChanges=new He}_calculateStatus(){return this._allControlsDisabled()?qc:this.errors?Yh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ls)?Ls:this._anyControlsHaveStatus(Yh)?Yh:Hc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Gc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Wc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){of(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=B$(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=$$(this._rawAsyncValidators)}},nf=class extends tf{constructor(e,t,r){super(hR(t),fR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){q$(this,!0,e),Object.keys(e).forEach(r=>{H$(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var fw=new H("CallSetDisabledState",{providedIn:"root",factory:()=>pw}),pw="always";function z$(n,e){return[...e.path,n]}function pR(n,e,t=pw){gR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),W$(n,e),Q$(n,e),K$(n,e),G$(n,e)}function eR(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function G$(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function gR(n,e){let t=L$(n);e.validator!==null?n.setValidators(ZA(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=U$(n);e.asyncValidator!==null?n.setAsyncValidators(ZA(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();eR(e._rawValidators,i),eR(e._rawAsyncValidators,i)}function W$(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&mR(n,e)})}function K$(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&mR(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function mR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Q$(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Y$(n,e){n==null,gR(n,e)}function Z$(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function J$(n){return Object.getPrototypeOf(n.constructor)===rf}function X$(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function eH(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===si?t=o:J$(o)?r=o:i=o}),i||r||t||null}var tH={provide:js,useExisting:En(()=>Ji)},zc=Promise.resolve(),Ji=(()=>{class n extends js{get submitted(){return cn(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Pa(()=>this.submittedReactive()),this.submittedReactive=Ra(!1),this._directives=new Set,this.ngSubmit=new He,this.form=new nf({},dw(t),hw(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){zc.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),pR(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){zc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){zc.then(()=>{let r=this._findContainer(t.path),i=new nf({});Y$(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){zc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){zc.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),X$(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(z(lw,10),z(sR,10),z(fw,8))}}static{this.\u0275dir=ke({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ue("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Lr([tH]),Yt]})}}return n})();function tR(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function nR(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var nH=class extends tf{constructor(e=null,t,r){super(hR(t),fR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),of(t)&&(t.nonNullable||t.initialValueIsDefault)&&(nR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){tR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){tR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){nR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var rH={provide:Kc,useExisting:En(()=>Xi)},rR=Promise.resolve(),Xi=(()=>{class n extends Kc{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new nH,this._registered=!1,this.name="",this.update=new He,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=eH(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Z$(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){pR(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){rR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Br(r);rR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?z$(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(z(js,9),z(lw,10),z(sR,10),z(Qc,10),z(jr,8),z(fw,8))}}static{this.\u0275dir=ke({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Lr([rH]),Yt,Fr]})}}return n})(),qs=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ke({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),iH={provide:Qc,useExisting:En(()=>gw),multi:!0},gw=(()=>{class n extends rf{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Zn(n)))(i||n)}})()}static{this.\u0275dir=ke({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Ue("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[Lr([iH]),Yt]})}}return n})();var oH={provide:Qc,useExisting:En(()=>zs),multi:!0};function yR(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function sH(n){return n.split(":")[0]}var zs=(()=>{class n extends rf{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=yR(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=sH(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Zn(n)))(i||n)}})()}static{this.\u0275dir=ke({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Ue("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Lr([oH]),Yt]})}}return n})(),sf=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(yR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(z(bn),z(Jn),z(zs,9))}}static{this.\u0275dir=ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),aH={provide:Qc,useExisting:En(()=>vR),multi:!0};function iR(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function cH(n){return n.split(":")[0]}var vR=(()=>{class n extends rf{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=cH(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Zn(n)))(i||n)}})()}static{this.\u0275dir=ke({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Ue("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Lr([aH]),Yt]})}}return n})(),af=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(iR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(iR(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(z(bn),z(Jn),z(vR,9))}}static{this.\u0275dir=ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var uH=(()=>{class n{constructor(){this._validator=YA}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):YA,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ke({type:n,features:[Fr]})}}return n})();var lH={provide:lw,useExisting:En(()=>eo),multi:!0};var eo=(()=>{class n extends uH{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Br,this.createValidator=t=>O$}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Zn(n)))(i||n)}})()}static{this.\u0275dir=ke({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ma("required",i._enabled?"":null)},inputs:{required:"required"},features:[Lr([lH]),Yt]})}}return n})();var dH=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=kr({type:n})}static{this.\u0275inj=Or({})}}return n})();var Gs=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:fw,useValue:t.callSetDisabledState??pw}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=kr({type:n})}static{this.\u0275inj=Or({imports:[dH]})}}return n})();var en=(()=>{class n{constructor(){this.auth=x(Bi),this.firestore=x(pn),this.userSubject=new je(null),this.userTypeSubject=new je(null),Jd(this.auth,t=>v(this,null,function*(){if(t){let o=(yield Qh($c(this.firestore,"users",t.uid))).data()?.type??null;this.userTypeSubject.next(o)}else this.userTypeSubject.next(null);this.userSubject.next(t)}))}get user$(){return this.userSubject.asObservable()}get userType$(){return this.userTypeSubject.asObservable()}get currentUser(){return this.auth.currentUser}register(t,r,i,o,s){return v(this,null,function*(){let a=yield HT(this.auth,t,r),u=a.user;return yield KA($c(this.firestore,"users",u.uid),{firstName:i,lastName:o,email:t,type:s}),a})}login(t,r){return v(this,null,function*(){return yield zT(this.auth,t,r)})}logout(){return v(this,null,function*(){return yield Xd(this.auth)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function hH(n,e){n&1&&(k(0,"div",16),U(1," Email is required. "),P())}function fH(n,e){n&1&&(k(0,"div",16),U(1," Password is required. "),P())}var _R=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}onLogin(t){return v(this,null,function*(){t.invalid||(yield this.authService.login(this.email,this.password),this.router.navigate(["/"]))})}static{this.\u0275fac=function(r){return new(r||n)(z(en),z(Ye))}}static{this.\u0275cmp=et({type:n,selectors:[["app-login"]],standalone:!0,features:[tt],decls:25,vars:4,consts:[["loginForm","ngForm"],["emailInput","ngModel"],["passwordInput","ngModel"],[1,"flex","min-h-screen","items-center","justify-center","bg-gray-100"],[1,"w-full","max-w-md","p-8","bg-white","rounded-lg","shadow-lg"],[1,"text-2xl","font-bold","text-center","text-gray-800"],[1,"mt-6","space-y-6",3,"ngSubmit"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","name","email","placeholder","Enter your email","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["class","text-red-500 text-sm",4,"ngIf"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","placeholder","Enter your password","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","py-3","px-4","mt-4","text-white","bg-blue-600","rounded-lg","hover:bg-blue-700","transition-colors","duration-200"],[1,"my-6","border-t","border-gray-300"],[1,"mt-6","text-center","text-sm","text-gray-600"],["routerLink","/register",1,"text-blue-600","hover:underline"],[1,"text-red-500","text-sm"]],template:function(r,i){if(r&1){let o=Sn();k(0,"div",3)(1,"div",4)(2,"h2",5),U(3,"Login to Your Account"),P(),k(4,"form",6,0),Ue("ngSubmit",function(){Ae(o);let a=_t(5);return Re(i.onLogin(a))}),k(6,"div")(7,"label",7),U(8,"Email"),P(),k(9,"input",8,1),ct("ngModelChange",function(a){return Ae(o),wt(i.email,a)||(i.email=a),Re(a)}),P(),Qe(11,hH,2,0,"div",9),P(),k(12,"div")(13,"label",10),U(14,"Password"),P(),k(15,"input",11,2),ct("ngModelChange",function(a){return Ae(o),wt(i.password,a)||(i.password=a),Re(a)}),P(),Qe(17,fH,2,0,"div",9),P(),k(18,"button",12),U(19," Login "),P()(),Zt(20,"div",13),k(21,"p",14),U(22," Don't have an account? "),k(23,"a",15),U(24,"Sign up"),P()()()()}if(r&2){let o=_t(10),s=_t(16);ue(9),at("ngModel",i.email),ue(2),Le("ngIf",o.invalid&&o.touched),ue(4),at("ngModel",i.password),ue(2),Le("ngIf",s.invalid&&s.touched)}},dependencies:[ss,os,Gs,qs,si,$s,Hs,eo,Xi,Ji,un,Wo]})}}return n})();function pH(n,e){n&1&&(k(0,"div",32),U(1," Email is required. "),P())}function gH(n,e){n&1&&(k(0,"div",32),U(1," First name is required. "),P())}function mH(n,e){n&1&&(k(0,"div",32),U(1," Last name is required. "),P())}function yH(n,e){n&1&&(k(0,"div",32),U(1," Password is required. "),P())}function vH(n,e){n&1&&(k(0,"div",32),U(1," Confirm password is required. "),P())}function _H(n,e){n&1&&(k(0,"div",32),U(1," Passwords do not match. "),P())}function wH(n,e){n&1&&(k(0,"div",32),U(1," User type is required. "),P())}function IH(n,e){n&1&&(k(0,"div",33),Zt(1,"div",34),P())}var wR=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isLoading=!1}onRegister(t){return v(this,null,function*(){t.invalid||(this.isLoading=!0,yield this.authService.register(this.email,this.password,this.firstName,this.lastName,this.userType),this.isLoading=!1,this.router.navigate(["/"]))})}static{this.\u0275fac=function(r){return new(r||n)(z(en),z(Ye))}}static{this.\u0275cmp=et({type:n,selectors:[["app-register"]],standalone:!0,features:[tt],decls:57,vars:14,consts:[["registerForm","ngForm"],["emailInput","ngModel"],["firstNameInput","ngModel"],["lastNameInput","ngModel"],["passwordInput","ngModel"],["confirmPasswordInput","ngModel"],["userTypeInput","ngModel"],[1,"flex","min-h-screen","items-center","justify-center","bg-gray-100"],[1,"w-full","max-w-md","p-8","bg-white","rounded-lg","shadow-lg"],[1,"text-2xl","font-bold","text-center","text-gray-800"],[3,"ngSubmit"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","name","email","placeholder","Enter your email","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["class","text-red-500 text-sm",4,"ngIf"],["for","firstName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","firstName","name","firstName","placeholder","Enter your first name","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","lastName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","lastName","name","lastName","placeholder","Enter your last name","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","placeholder","Enter your password","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Confirm your password","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["for","userType",1,"block","text-sm","font-medium","text-gray-700"],["id","userType","name","userType","required","",1,"w-full","mt-2","p-3","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],["value","hiker"],["value","hikingClub"],["type","submit",1,"w-full","py-3","px-4","mt-4","text-white","bg-blue-600","rounded-lg","hover:bg-blue-700","transition-colors","duration-200"],["class","fixed inset-0 flex items-center justify-center bg-gray-100 bg-opacity-75 z-50",4,"ngIf"],[1,"my-6","border-t","border-gray-300"],[1,"text-center","text-sm","text-gray-600"],["routerLink","/login",1,"text-blue-600","hover:underline"],[1,"text-red-500","text-sm"],[1,"fixed","inset-0","flex","items-center","justify-center","bg-gray-100","bg-opacity-75","z-50"],[1,"animate-spin","rounded-full","h-32","w-32","border-t-2","border-b-2","border-blue-500"]],template:function(r,i){if(r&1){let o=Sn();k(0,"div",7)(1,"div",8)(2,"h2",9),U(3,"Create an Account"),P(),k(4,"form",10,0),Ue("ngSubmit",function(){Ae(o);let a=_t(5);return Re(i.onRegister(a))}),k(6,"div")(7,"label",11),U(8,"Email"),P(),k(9,"input",12,1),ct("ngModelChange",function(a){return Ae(o),wt(i.email,a)||(i.email=a),Re(a)}),P(),Qe(11,pH,2,0,"div",13),P(),k(12,"div")(13,"label",14),U(14,"First Name"),P(),k(15,"input",15,2),ct("ngModelChange",function(a){return Ae(o),wt(i.firstName,a)||(i.firstName=a),Re(a)}),P(),Qe(17,gH,2,0,"div",13),P(),k(18,"div")(19,"label",16),U(20,"Last Name"),P(),k(21,"input",17,3),ct("ngModelChange",function(a){return Ae(o),wt(i.lastName,a)||(i.lastName=a),Re(a)}),P(),Qe(23,mH,2,0,"div",13),P(),k(24,"div")(25,"label",18),U(26,"Password"),P(),k(27,"input",19,4),ct("ngModelChange",function(a){return Ae(o),wt(i.password,a)||(i.password=a),Re(a)}),P(),Qe(29,yH,2,0,"div",13),P(),k(30,"div")(31,"label",20),U(32,"Confirm Password"),P(),k(33,"input",21,5),ct("ngModelChange",function(a){return Ae(o),wt(i.confirmPassword,a)||(i.confirmPassword=a),Re(a)}),P(),Qe(35,vH,2,0,"div",13)(36,_H,2,0,"div",13),P(),k(37,"div")(38,"label",22),U(39,"User Type"),P(),k(40,"select",23,6),ct("ngModelChange",function(a){return Ae(o),wt(i.userType,a)||(i.userType=a),Re(a)}),k(42,"option",24),U(43,"Select user type"),P(),k(44,"option",25),U(45,"Hiker"),P(),k(46,"option",26),U(47,"Hiking Club"),P()(),Qe(48,wH,2,0,"div",13),P(),k(49,"button",27),U(50," Register "),P()(),Qe(51,IH,2,0,"div",28),Zt(52,"div",29),k(53,"p",30),U(54," Already have an account? "),k(55,"a",31),U(56,"Login"),P()()()()}if(r&2){let o=_t(10),s=_t(16),a=_t(22),u=_t(28),l=_t(34),f=_t(41);ue(9),at("ngModel",i.email),ue(2),Le("ngIf",o.invalid&&o.touched),ue(4),at("ngModel",i.firstName),ue(2),Le("ngIf",s.invalid&&s.touched),ue(4),at("ngModel",i.lastName),ue(2),Le("ngIf",a.invalid&&a.touched),ue(4),at("ngModel",i.password),ue(2),Le("ngIf",u.invalid&&u.touched),ue(4),at("ngModel",i.confirmPassword),ue(2),Le("ngIf",l.invalid&&l.touched),ue(),Le("ngIf",i.password!==i.confirmPassword&&l.touched),ue(4),at("ngModel",i.userType),ue(8),Le("ngIf",f.invalid&&f.touched),ue(3),Le("ngIf",i.isLoading)}},dependencies:[Gs,qs,sf,af,si,zs,$s,Hs,eo,Xi,Ji,ss,os,un,Wo]})}}return n})();var IR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=et({type:n,selectors:[["app-profile-club"]],standalone:!0,features:[tt],decls:2,vars:0,template:function(r,i){r&1&&(k(0,"p"),U(1,"profile-club works!"),P())}})}}return n})();var ER=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=et({type:n,selectors:[["app-profile-hiker"]],standalone:!0,features:[tt],decls:2,vars:0,template:function(r,i){r&1&&(k(0,"p"),U(1,"profile-hiker works!"),P())}})}}return n})();var yw=(n,e)=>{let t=x(en),r=x(Ye);return t.user$.pipe(gt(1),J(i=>i?!0:(r.navigate(["/login"]),!1)))};var DR=(()=>{class n{constructor(t){this.authService=t,this.tour={name:"",date:"",description:"",gpxFile:null,difficulty:"easy",participants:0,createdBy:"",createdAt:""},this.firestore=x(pn)}onFileChange(t){let r=t.target.files[0];r&&(this.tour.gpxFile=r)}onSubmit(){return v(this,null,function*(){if(this.tour.gpxFile){let t=this.authService.currentUser;if(t){let r=new FileReader;r.onload=()=>v(this,null,function*(){let i=r.result,o={name:this.tour.name,date:this.tour.date,description:this.tour.description,gpxContent:i,difficulty:this.tour.difficulty,participants:this.tour.participants,createdBy:t.uid,createdAt:new Date().toISOString()};try{let s=yield GA(Kh(this.firestore,"tours"),o);console.log("Tour created with ID:",s.id)}catch(s){console.error("Error adding document:",s)}}),r.readAsText(this.tour.gpxFile)}else console.error("User is not authenticated")}else console.error("GPX file is required")})}static{this.\u0275fac=function(r){return new(r||n)(z(en))}}static{this.\u0275cmp=et({type:n,selectors:[["app-create-hiking-tour"]],standalone:!0,features:[tt],decls:38,vars:6,consts:[["tourForm","ngForm"],[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],[3,"ngSubmit"],[1,"mb-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","name","name","name","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","date",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","date","name","date","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","description",1,"block","text-sm","font-medium","text-gray-700"],["id","description","name","description","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","gpxFile",1,"block","text-sm","font-medium","text-gray-700"],["type","file","id","gpxFile","name","gpxFile","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"change"],["for","difficulty",1,"block","text-sm","font-medium","text-gray-700"],["id","difficulty","name","difficulty","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["value","easy"],["value","moderate"],["value","hard"],["for","participants",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","participants","name","participants","required","",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"mt-4"],["type","submit",1,"w-full","py-2","px-4","bg-blue-600","text-white","rounded-md","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"disabled"]],template:function(r,i){if(r&1){let o=Sn();k(0,"div",1)(1,"h1",2),U(2,"Create Hiking Tour"),P(),k(3,"form",3,0),Ue("ngSubmit",function(){return Ae(o),Re(i.onSubmit())}),k(5,"div",4)(6,"label",5),U(7,"Tour Name"),P(),k(8,"input",6),ct("ngModelChange",function(a){return Ae(o),wt(i.tour.name,a)||(i.tour.name=a),Re(a)}),P()(),k(9,"div",4)(10,"label",7),U(11,"Date"),P(),k(12,"input",8),ct("ngModelChange",function(a){return Ae(o),wt(i.tour.date,a)||(i.tour.date=a),Re(a)}),P()(),k(13,"div",4)(14,"label",9),U(15,"Description"),P(),k(16,"textarea",10),ct("ngModelChange",function(a){return Ae(o),wt(i.tour.description,a)||(i.tour.description=a),Re(a)}),P()(),k(17,"div",4)(18,"label",11),U(19,"GPX File"),P(),k(20,"input",12),Ue("change",function(a){return Ae(o),Re(i.onFileChange(a))}),P()(),k(21,"div",4)(22,"label",13),U(23,"Difficulty Level"),P(),k(24,"select",14),ct("ngModelChange",function(a){return Ae(o),wt(i.tour.difficulty,a)||(i.tour.difficulty=a),Re(a)}),k(25,"option",15),U(26,"Easy"),P(),k(27,"option",16),U(28,"Moderate"),P(),k(29,"option",17),U(30,"Hard"),P()()(),k(31,"div",4)(32,"label",18),U(33,"Number of Participants"),P(),k(34,"input",19),ct("ngModelChange",function(a){return Ae(o),wt(i.tour.participants,a)||(i.tour.participants=a),Re(a)}),P()(),k(35,"div",20)(36,"button",21),U(37," Create Tour "),P()()()()}if(r&2){let o=_t(4);ue(8),at("ngModel",i.tour.name),ue(4),at("ngModel",i.tour.date),ue(4),at("ngModel",i.tour.description),ue(8),at("ngModel",i.tour.difficulty),ue(10),at("ngModel",i.tour.participants),ue(2),Le("disabled",o.invalid)}},dependencies:[un,Gs,qs,sf,af,si,gw,zs,$s,Hs,eo,Xi,Ji]})}}return n})();var CR=(n,e)=>{let t=x(en),r=x(Ye);return t.userType$.pipe(gt(1),J(i=>i==="hikingClub"?!0:(r.navigate(["/"]),!1)))};var bR=[{path:"",component:QA},{path:"login",component:_R},{path:"register",component:wR},{path:"profile-club",component:IR,canActivate:[yw]},{path:"profile-hiker",component:ER,canActivate:[yw]},{path:"create-hiking-tour",component:DR,canActivate:[CR]}];var TR={apiKey:"AIzaSyCu5CPQCRQ7_qsOst9yUHo9_VXxDZ7RQv0",authDomain:"master-b6858.firebaseapp.com",projectId:"master-b6858",storageBucket:"master-b6858.firebasestorage.app",messagingSenderId:"21300314672",appId:"1:21300314672:web:8cd1730aa552dff5f3e3f5"};var SR={providers:[Gb(()=>Md(TR)),$T(()=>qT()),qA(()=>WA()),eC({eventCoalescing:!0}),fb(bR)]};function EH(n,e){n&1&&(k(0,"li")(1,"a",9),U(2,"Create Hiking Tour"),P()())}function DH(n,e){if(n&1&&(Yl(0),Qe(1,EH,3,0,"li",6),Zl()),n&2){let t=e.ngIf;ue(),Le("ngIf",t==="hikingClub")}}function CH(n,e){if(n&1){let t=Sn();Yl(0),Qe(1,DH,2,1,"ng-container",6),Na(2,"async"),k(3,"li")(4,"a",7),Ue("click",function(){Ae(t);let i=zo();return Re(i.goToProfile())}),U(5,"Profile"),P()(),k(6,"li")(7,"a",8),Ue("click",function(){Ae(t);let i=zo();return Re(i.logout())}),U(8,"Logout"),P()(),Zl()}if(n&2){let t=zo();ue(),Le("ngIf",xa(2,1,t.userType$))}}function bH(n,e){n&1&&(k(0,"li")(1,"a",10),U(2,"Login"),P()(),k(3,"li")(4,"a",11),U(5,"Register"),P()())}var AR=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.user$=this.authService.user$,this.userType$=this.authService.userType$}ngOnInit(){}logout(){return v(this,null,function*(){yield this.authService.logout(),this.router.navigate(["/"])})}goToProfile(){this.userType$.pipe(gt(1)).subscribe(t=>{t==="hiker"?this.router.navigate(["/profile-hiker"]):t==="hikingClub"&&this.router.navigate(["/profile-club"])})}static{this.\u0275fac=function(r){return new(r||n)(z(en),z(Ye))}}static{this.\u0275cmp=et({type:n,selectors:[["app-navbar"]],standalone:!0,features:[tt],decls:10,vars:4,consts:[["loggedOut",""],[1,"bg-gray-800","p-4"],[1,"flex","items-center","space-x-4","w-full"],["routerLink","/",1,"text-white","text-lg","hover:text-gray-400"],[1,"flex-grow"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"text-white","hover:text-gray-400",3,"click"],[1,"text-white","hover:text-gray-400","cursor-pointer",3,"click"],["routerLink","/create-hiking-tour",1,"text-white","hover:text-gray-400"],["routerLink","/login",1,"text-white","hover:text-gray-400"],["routerLink","/register",1,"text-white","hover:text-gray-400"]],template:function(r,i){if(r&1&&(k(0,"nav",1)(1,"ul",2)(2,"li")(3,"a",3),U(4,"Hiking Platform"),P()(),Zt(5,"li",4),Qe(6,CH,9,3,"ng-container",5),Na(7,"async"),Qe(8,bH,6,0,"ng-template",null,0,Q0),P()()),r&2){let o=_t(9);ue(6),Le("ngIf",xa(7,2,i.user$))("ngIfElse",o)}},dependencies:[ss,os,un,Wo,id]})}}return n})();var RR=(()=>{class n{constructor(){this.title="master"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=et({type:n,selectors:[["app-root"]],standalone:!0,features:[tt],decls:2,vars:0,template:function(r,i){r&1&&Zt(0,"app-navbar")(1,"router-outlet")},dependencies:[$m,AR]})}}return n})();DC(RR,SR).catch(n=>console.error(n));
